!function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=88)}([function(t,e,o){var n,r;/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(e,o){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?o(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return o(t)}:o(e)}("undefined"!=typeof window?window:this,function(i,s){function a(t){var e=t.length,o=rt.type(t);return"function"!==o&&!rt.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===o||0===e||"number"==typeof e&&e>0&&e-1 in t))}function l(t,e,o){if(rt.isFunction(e))return rt.grep(t,function(t,n){return!!e.call(t,n,t)!==o});if(e.nodeType)return rt.grep(t,function(t){return t===e!==o});if("string"==typeof e){if(ht.test(e))return rt.filter(e,t,o);e=rt.filter(e,t)}return rt.grep(t,function(t){return Q.call(e,t)>=0!==o})}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t){var e=vt[t]={};return rt.each(t.match(yt)||[],function(t,o){e[o]=!0}),e}function g(){ot.removeEventListener("DOMContentLoaded",g,!1),i.removeEventListener("load",g,!1),rt.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=rt.expando+Math.random()}function p(t,e,o){var n;if(void 0===o&&1===t.nodeType)if(n="data-"+e.replace(Tt,"-$1").toLowerCase(),"string"==typeof(o=t.getAttribute(n))){try{o="true"===o||"false"!==o&&("null"===o?null:+o+""===o?+o:kt.test(o)?rt.parseJSON(o):o)}catch(t){}St.set(t,e,o)}else o=void 0;return o}function d(){return!0}function f(){return!1}function m(){try{return ot.activeElement}catch(t){}}function y(t,e){return rt.nodeName(t,"table")&&rt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function v(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function _(t){var e=Ht.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){for(var o=0,n=t.length;n>o;o++)Et.set(t[o],"globalEval",!e||Et.get(e[o],"globalEval"))}function E(t,e){var o,n,r,i,s,a,l,c;if(1===e.nodeType){if(Et.hasData(t)&&(i=Et.access(t),s=Et.set(e,i),c=i.events)){delete s.handle,s.events={};for(r in c)for(o=0,n=c[r].length;n>o;o++)rt.event.add(e,r,c[r][o])}St.hasData(t)&&(a=St.access(t),l=rt.extend({},a),St.set(e,l))}}function S(t,e){var o=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&rt.nodeName(t,e)?rt.merge([t],o):o}function k(t,e){var o=e.nodeName.toLowerCase();"input"===o&&Bt.test(t.type)?e.checked=t.checked:("input"===o||"textarea"===o)&&(e.defaultValue=t.defaultValue)}function T(t,e){var o,n=rt(e.createElement(t)).appendTo(e.body),r=i.getDefaultComputedStyle&&(o=i.getDefaultComputedStyle(n[0]))?o.display:rt.css(n[0],"display");return n.detach(),r}function C(t){var e=ot,o=Wt[t];return o||(o=T(t,e),"none"!==o&&o||(Vt=(Vt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Vt[0].contentDocument,e.write(),e.close(),o=T(t,e),Vt.detach()),Wt[t]=o),o}function x(t,e,o){var n,r,i,s,a=t.style;return o=o||Xt(t),o&&(s=o.getPropertyValue(e)||o[e]),o&&(""!==s||rt.contains(t.ownerDocument,t)||(s=rt.style(t,e)),qt.test(s)&&zt.test(e)&&(n=a.width,r=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=o.width,a.width=n,a.minWidth=r,a.maxWidth=i)),void 0!==s?s+"":s}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function B(t,e){if(e in t)return e;for(var o=e[0].toUpperCase()+e.slice(1),n=e,r=Zt.length;r--;)if((e=Zt[r]+o)in t)return e;return n}function I(t,e,o){var n=Yt.exec(e);return n?Math.max(0,n[1]-(o||0))+(n[2]||"px"):e}function A(t,e,o,n,r){for(var i=o===(n?"border":"content")?4:"width"===e?1:0,s=0;4>i;i+=2)"margin"===o&&(s+=rt.css(t,o+xt[i],!0,r)),n?("content"===o&&(s-=rt.css(t,"padding"+xt[i],!0,r)),"margin"!==o&&(s-=rt.css(t,"border"+xt[i]+"Width",!0,r))):(s+=rt.css(t,"padding"+xt[i],!0,r),"padding"!==o&&(s+=rt.css(t,"border"+xt[i]+"Width",!0,r)));return s}function N(t,e,o){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,i=Xt(t),s="border-box"===rt.css(t,"boxSizing",!1,i);if(0>=r||null==r){if(r=x(t,e,i),(0>r||null==r)&&(r=t.style[e]),qt.test(r))return r;n=s&&(et.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+A(t,e,o||(s?"border":"content"),n,i)+"px"}function L(t,e){for(var o,n,r,i=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(i[s]=Et.get(n,"olddisplay"),o=n.style.display,e?(i[s]||"none"!==o||(n.style.display=""),""===n.style.display&&wt(n)&&(i[s]=Et.access(n,"olddisplay",C(n.nodeName)))):(r=wt(n),"none"===o&&r||Et.set(n,"olddisplay",r?o:rt.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?i[s]||"":"none"));return t}function R(t,e,o,n,r){return new R.prototype.init(t,e,o,n,r)}function D(){return setTimeout(function(){te=void 0}),te=rt.now()}function O(t,e){var o,n=0,r={height:t};for(e=e?1:0;4>n;n+=2-e)o=xt[n],r["margin"+o]=r["padding"+o]=t;return e&&(r.opacity=r.width=t),r}function j(t,e,o){for(var n,r=(se[e]||[]).concat(se["*"]),i=0,s=r.length;s>i;i++)if(n=r[i].call(o,e,t))return n}function M(t,e,o){var n,r,i,s,a,l,c,u=this,g={},h=t.style,p=t.nodeType&&wt(t),d=Et.get(t,"fxshow");o.queue||(a=rt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,rt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(o.overflow=[h.overflow,h.overflowX,h.overflowY],c=rt.css(t,"display"),"inline"===("none"===c?Et.get(t,"olddisplay")||C(t.nodeName):c)&&"none"===rt.css(t,"float")&&(h.display="inline-block")),o.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=o.overflow[0],h.overflowX=o.overflow[1],h.overflowY=o.overflow[2]}));for(n in e)if(r=e[n],oe.exec(r)){if(delete e[n],i=i||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!d||void 0===d[n])continue;p=!0}g[n]=d&&d[n]||rt.style(t,n)}else c=void 0;if(rt.isEmptyObject(g))"inline"===("none"===c?C(t.nodeName):c)&&(h.display=c);else{d?"hidden"in d&&(p=d.hidden):d=Et.access(t,"fxshow",{}),i&&(d.hidden=!p),p?rt(t).show():u.done(function(){rt(t).hide()}),u.done(function(){var e;Et.remove(t,"fxshow");for(e in g)rt.style(t,e,g[e])});for(n in g)s=j(p?d[n]:0,n,u),n in d||(d[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function P(t,e){var o,n,r,i,s;for(o in t)if(n=rt.camelCase(o),r=e[n],i=t[o],rt.isArray(i)&&(r=i[1],i=t[o]=i[0]),o!==n&&(t[n]=i,delete t[o]),(s=rt.cssHooks[n])&&"expand"in s){i=s.expand(i),delete t[n];for(o in i)o in t||(t[o]=i[o],e[o]=r)}else e[n]=r}function F(t,e,o){var n,r,i=0,s=ie.length,a=rt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=te||D(),o=Math.max(0,c.startTime+c.duration-e),n=o/c.duration||0,i=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(i);return a.notifyWith(t,[c,i,o]),1>i&&l?o:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:rt.extend({},e),opts:rt.extend(!0,{specialEasing:{}},o),originalProperties:e,originalOptions:o,startTime:te||D(),duration:o.duration,tweens:[],createTween:function(e,o){var n=rt.Tween(t,c.opts,e,o,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var o=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;n>o;o++)c.tweens[o].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(P(u,c.opts.specialEasing);s>i;i++)if(n=ie[i].call(c,t,u,c.opts))return n;return rt.map(u,j,c),rt.isFunction(c.opts.start)&&c.opts.start.call(t,c),rt.fx.timer(rt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(t){return function(e,o){"string"!=typeof e&&(o=e,e="*");var n,r=0,i=e.toLowerCase().match(yt)||[];if(rt.isFunction(o))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(o)):(t[n]=t[n]||[]).push(o)}}function U(t,e,o,n){function r(a){var l;return i[a]=!0,rt.each(t[a]||[],function(t,a){var c=a(e,o,n);return"string"!=typeof c||s||i[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var i={},s=t===Te;return r(e.dataTypes[0])||!i["*"]&&r("*")}function G(t,e){var o,n,r=rt.ajaxSettings.flatOptions||{};for(o in e)void 0!==e[o]&&((r[o]?t:n||(n={}))[o]=e[o]);return n&&rt.extend(!0,t,n),t}function V(t,e,o){for(var n,r,i,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in o)i=l[0];else{for(r in o){if(!l[0]||t.converters[r+" "+l[0]]){i=r;break}s||(s=r)}i=i||s}return i?(i!==l[0]&&l.unshift(i),o[i]):void 0}function W(t,e,o,n){var r,i,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(i=u.shift();i;)if(t.responseFields[i]&&(o[t.responseFields[i]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(s=c[l+" "+i]||c["* "+i]))for(r in c)if(a=r.split(" "),a[1]===i&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(i=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+i}}}return{state:"success",data:e}}function z(t,e,o,n){var r;if(rt.isArray(e))rt.each(e,function(e,r){o||we.test(t)?n(t,r):z(t+"["+("object"==typeof r?e:"")+"]",r,o,n)});else if(o||"object"!==rt.type(e))n(t,e);else for(r in e)z(t+"["+r+"]",e[r],o,n)}function q(t){return rt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var X=[],K=X.slice,Y=X.concat,$=X.push,Q=X.indexOf,J={},Z=J.toString,tt=J.hasOwnProperty,et={},ot=i.document,nt="2.1.1",rt=function(t,e){return new rt.fn.init(t,e)},it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,at=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};rt.fn=rt.prototype={jquery:nt,constructor:rt,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=rt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return rt.each(this,t,e)},map:function(t){return this.pushStack(rt.map(this,function(e,o){return t.call(e,o,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,o=+t+(0>t?e:0);return this.pushStack(o>=0&&e>o?[this[o]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:X.sort,splice:X.splice},rt.extend=rt.fn.extend=function(){var t,e,o,n,r,i,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||rt.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)o=s[e],n=t[e],s!==n&&(c&&n&&(rt.isPlainObject(n)||(r=rt.isArray(n)))?(r?(r=!1,i=o&&rt.isArray(o)?o:[]):i=o&&rt.isPlainObject(o)?o:{},s[e]=rt.extend(c,i,n)):void 0!==n&&(s[e]=n));return s},rt.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===rt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!rt.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"===rt.type(t)&&!t.nodeType&&!rt.isWindow(t)&&!(t.constructor&&!tt.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?J[Z.call(t)]||"object":typeof t},globalEval:function(t){var e,o=eval;(t=rt.trim(t))&&(1===t.indexOf("use strict")?(e=ot.createElement("script"),e.text=t,ot.head.appendChild(e).parentNode.removeChild(e)):o(t))},camelCase:function(t){return t.replace(st,"ms-").replace(at,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,o){var n=0,r=t.length,i=a(t);if(o){if(i)for(;r>n&&!1!==e.apply(t[n],o);n++);else for(n in t)if(!1===e.apply(t[n],o))break}else if(i)for(;r>n&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(it,"")},makeArray:function(t,e){var o=e||[];return null!=t&&(a(Object(t))?rt.merge(o,"string"==typeof t?[t]:t):$.call(o,t)),o},inArray:function(t,e,o){return null==e?-1:Q.call(e,t,o)},merge:function(t,e){for(var o=+e.length,n=0,r=t.length;o>n;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,o){for(var n=[],r=0,i=t.length,s=!o;i>r;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,o){var n,r=0,i=t.length,s=a(t),l=[];if(s)for(;i>r;r++)null!=(n=e(t[r],r,o))&&l.push(n);else for(r in t)null!=(n=e(t[r],r,o))&&l.push(n);return Y.apply([],l)},guid:1,proxy:function(t,e){var o,n,r;return"string"==typeof e&&(o=t[e],e=t,t=o),rt.isFunction(t)?(n=K.call(arguments,2),r=function(){return t.apply(e||this,n.concat(K.call(arguments)))},r.guid=t.guid=t.guid||rt.guid++,r):void 0},now:Date.now,support:et}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,o,n){var r,i,s,a,c,g,h,p,d,f;if((e?e.ownerDocument||e:P)!==A&&I(e),e=e||A,o=o||[],!t||"string"!=typeof t)return o;if(1!==(a=e.nodeType)&&9!==a)return[];if(L&&!n){if(r=mt.exec(t))if(s=r[1]){if(9===a){if(!(i=e.getElementById(s))||!i.parentNode)return o;if(i.id===s)return o.push(i),o}else if(e.ownerDocument&&(i=e.ownerDocument.getElementById(s))&&j(e,i)&&i.id===s)return o.push(i),o}else{if(r[2])return Q.apply(o,e.getElementsByTagName(t)),o;if((s=r[3])&&_.getElementsByClassName&&e.getElementsByClassName)return Q.apply(o,e.getElementsByClassName(s)),o}if(_.qsa&&(!R||!R.test(t))){if(p=h=M,d=e,f=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(g=k(t),(h=e.getAttribute("id"))?p=h.replace(vt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",c=g.length;c--;)g[c]=p+u(g[c]);d=yt.test(t)&&l(e.parentNode)||e,f=g.join(",")}if(f)try{return Q.apply(o,d.querySelectorAll(f)),o}catch(t){}finally{h||e.removeAttribute("id")}}}return C(t.replace(st,"$1"),e,o,n)}function o(){function t(o,n){return e.push(o+" ")>b.cacheLength&&delete t[e.shift()],t[o+" "]=n}var e=[];return t}function n(t){return t[M]=!0,t}function r(t){var e=A.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function i(t,e){for(var o=t.split("|"),n=t.length;n--;)b.attrHandle[o[n]]=e}function s(t,e){var o=e&&t,n=o&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(n)return n;if(o)for(;o=o.nextSibling;)if(o===e)return-1;return t?1:-1}function a(t){return n(function(e){return e=+e,n(function(o,n){for(var r,i=t([],o.length,e),s=i.length;s--;)o[r=i[s]]&&(o[r]=!(n[r]=o[r]))})})}function l(t){return t&&typeof t.getElementsByTagName!==z&&t}function c(){}function u(t){for(var e=0,o=t.length,n="";o>e;e++)n+=t[e].value;return n}function g(t,e,o){var n=e.dir,r=o&&"parentNode"===n,i=H++;return e.first?function(e,o,i){for(;e=e[n];)if(1===e.nodeType||r)return t(e,o,i)}:function(e,o,s){var a,l,c=[F,i];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,o,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[M]||(e[M]={}),(a=l[n])&&a[0]===F&&a[1]===i)return c[2]=a[2];if(l[n]=c,c[2]=t(e,o,s))return!0}}}function h(t){return t.length>1?function(e,o,n){for(var r=t.length;r--;)if(!t[r](e,o,n))return!1;return!0}:t[0]}function p(t,o,n){for(var r=0,i=o.length;i>r;r++)e(t,o[r],n);return n}function d(t,e,o,n,r){for(var i,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(i=t[a])&&(!o||o(i,n,r))&&(s.push(i),c&&e.push(a));return s}function f(t,e,o,r,i,s){return r&&!r[M]&&(r=f(r)),i&&!i[M]&&(i=f(i,s)),n(function(n,s,a,l){var c,u,g,h=[],f=[],m=s.length,y=n||p(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?y:d(y,h,t,a,l),_=o?i||(n?t:m||r)?[]:s:v;if(o&&o(v,_,a,l),r)for(c=d(_,f),r(c,[],a,l),u=c.length;u--;)(g=c[u])&&(_[f[u]]=!(v[f[u]]=g));if(n){if(i||t){if(i){for(c=[],u=_.length;u--;)(g=_[u])&&c.push(v[u]=g);i(null,_=[],c,l)}for(u=_.length;u--;)(g=_[u])&&(c=i?Z.call(n,g):h[u])>-1&&(n[c]=!(s[c]=g))}}else _=d(_===s?_.splice(m,_.length):_),i?i(null,s,_,l):Q.apply(s,_)})}function m(t){for(var e,o,n,r=t.length,i=b.relative[t[0].type],s=i||b.relative[" "],a=i?1:0,l=g(function(t){return t===e},s,!0),c=g(function(t){return Z.call(e,t)>-1},s,!0),p=[function(t,o,n){return!i&&(n||o!==x)||((e=o).nodeType?l(t,o,n):c(t,o,n))}];r>a;a++)if(o=b.relative[t[a].type])p=[g(h(p),o)];else{if(o=b.filter[t[a].type].apply(null,t[a].matches),o[M]){for(n=++a;r>n&&!b.relative[t[n].type];n++);return f(a>1&&h(p),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(st,"$1"),o,n>a&&m(t.slice(a,n)),r>n&&m(t=t.slice(n)),r>n&&u(t))}p.push(o)}return h(p)}function y(t,o){var r=o.length>0,i=t.length>0,s=function(n,s,a,l,c){var u,g,h,p=0,f="0",m=n&&[],y=[],v=x,_=n||i&&b.find.TAG("*",c),E=F+=null==v?1:Math.random()||.1,S=_.length;for(c&&(x=s!==A&&s);f!==S&&null!=(u=_[f]);f++){if(i&&u){for(g=0;h=t[g++];)if(h(u,s,a)){l.push(u);break}c&&(F=E)}r&&((u=!h&&u)&&p--,n&&m.push(u))}if(p+=f,r&&f!==p){for(g=0;h=o[g++];)h(m,y,s,a);if(n){if(p>0)for(;f--;)m[f]||y[f]||(y[f]=Y.call(l));y=d(y)}Q.apply(l,y),c&&!n&&y.length>0&&p+o.length>1&&e.uniqueSort(l)}return c&&(F=E,x=v),m};return r?n(s):s}var v,_,b,E,S,k,T,C,x,w,B,I,A,N,L,R,D,O,j,M="sizzle"+-new Date,P=t.document,F=0,H=0,U=o(),G=o(),V=o(),W=function(t,e){return t===e&&(B=!0),0},z="undefined",q=1<<31,X={}.hasOwnProperty,K=[],Y=K.pop,$=K.push,Q=K.push,J=K.slice,Z=K.indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(this[e]===t)return e;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",et="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=ot.replace("w","w#"),rt="\\["+et+"*("+ot+")(?:"+et+"*([*^$|!~]?=)"+et+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+et+"*\\]",it=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),at=new RegExp("^"+et+"*,"+et+"*"),lt=new RegExp("^"+et+"*([>+~]|"+et+")"+et+"*"),ct=new RegExp("="+et+"*([^\\]'\"]*?)"+et+"*\\]","g"),ut=new RegExp(it),gt=new RegExp("^"+nt+"$"),ht={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,dt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,vt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+et+"?|("+et+")|.)","ig"),bt=function(t,e,o){var n="0x"+e-65536;return n!==n||o?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(K=J.call(P.childNodes),P.childNodes),K[P.childNodes.length].nodeType}catch(t){Q={apply:K.length?function(t,e){$.apply(t,J.call(e))}:function(t,e){for(var o=t.length,n=0;t[o++]=e[n++];);t.length=o-1}}}_=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},I=e.setDocument=function(t){var e,o=t?t.ownerDocument||t:P,n=o.defaultView;return o!==A&&9===o.nodeType&&o.documentElement?(A=o,N=o.documentElement,L=!S(o),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){I()},!1):n.attachEvent&&n.attachEvent("onunload",function(){I()})),_.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=r(function(t){return t.appendChild(o.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=ft.test(o.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),_.getById=r(function(t){return N.appendChild(t).id=M,!o.getElementsByName||!o.getElementsByName(M).length}),_.getById?(b.find.ID=function(t,e){if(typeof e.getElementById!==z&&L){var o=e.getElementById(t);return o&&o.parentNode?[o]:[]}},b.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){var o=typeof t.getAttributeNode!==z&&t.getAttributeNode("id");return o&&o.value===e}}),b.find.TAG=_.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==z?e.getElementsByTagName(t):void 0}:function(t,e){var o,n=[],r=0,i=e.getElementsByTagName(t);if("*"===t){for(;o=i[r++];)1===o.nodeType&&n.push(o);return n}return i},b.find.CLASS=_.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==z&&L?e.getElementsByClassName(t):void 0},D=[],R=[],(_.qsa=ft.test(o.querySelectorAll))&&(r(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&R.push("[*^$]="+et+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+et+"*(?:value|"+tt+")"),t.querySelectorAll(":checked").length||R.push(":checked")}),r(function(t){var e=o.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+et+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(_.matchesSelector=ft.test(O=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(t){_.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),D.push("!=",it)}),R=R.length&&new RegExp(R.join("|")),D=D.length&&new RegExp(D.join("|")),e=ft.test(N.compareDocumentPosition),j=e||ft.test(N.contains)?function(t,e){var o=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(o.contains?o.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return B=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===o||t.ownerDocument===P&&j(P,t)?-1:e===o||e.ownerDocument===P&&j(P,e)?1:w?Z.call(w,t)-Z.call(w,e):0:4&n?-1:1)}:function(t,e){if(t===e)return B=!0,0;var n,r=0,i=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!i||!a)return t===o?-1:e===o?1:i?-1:a?1:w?Z.call(w,t)-Z.call(w,e):0;if(i===a)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===P?-1:c[r]===P?1:0},o):A},e.matches=function(t,o){return e(t,null,null,o)},e.matchesSelector=function(t,o){if((t.ownerDocument||t)!==A&&I(t),o=o.replace(ct,"='$1']"),!(!_.matchesSelector||!L||D&&D.test(o)||R&&R.test(o)))try{var n=O.call(t,o);if(n||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(o,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&I(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&I(t);var o=b.attrHandle[e.toLowerCase()],n=o&&X.call(b.attrHandle,e.toLowerCase())?o(t,e,!L):void 0;return void 0!==n?n:_.attributes||!L?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,o=[],n=0,r=0;if(B=!_.detectDuplicates,w=!_.sortStable&&t.slice(0),t.sort(W),B){for(;e=t[r++];)e===t[r]&&(n=o.push(r));for(;n--;)t.splice(o[n],1)}return w=null,t},E=e.getText=function(t){var e,o="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)o+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)o+=E(e);return o},b=e.selectors={cacheLength:50,createPseudo:n,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,o=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":o&&ut.test(o)&&(e=k(o,!0))&&(e=o.indexOf(")",o.length-e)-o.length)&&(t[0]=t[0].slice(0,e),t[2]=o.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+et+")"+t+"("+et+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==z&&t.getAttribute("class")||"")})},ATTR:function(t,o,n){return function(r){var i=e.attr(r,t);return null==i?"!="===o:!o||(i+="","="===o?i===n:"!="===o?i!==n:"^="===o?n&&0===i.indexOf(n):"*="===o?n&&i.indexOf(n)>-1:"$="===o?n&&i.slice(-n.length)===n:"~="===o?(" "+i+" ").indexOf(n)>-1:"|="===o&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,o,n,r){var i="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,o,l){var c,u,g,h,p,d,f=i!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(m){if(i){for(;f;){for(g=e;g=g[f];)if(a?g.nodeName.toLowerCase()===y:1===g.nodeType)return!1;d=f="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&v){for(u=m[M]||(m[M]={}),c=u[t]||[],p=c[0]===F&&c[1],h=c[0]===F&&c[2],g=p&&m.childNodes[p];g=++p&&g&&g[f]||(h=p=0)||d.pop();)if(1===g.nodeType&&++h&&g===e){u[t]=[F,p,h];break}}else if(v&&(c=(e[M]||(e[M]={}))[t])&&c[0]===F)h=c[1];else for(;(g=++p&&g&&g[f]||(h=p=0)||d.pop())&&((a?g.nodeName.toLowerCase()!==y:1!==g.nodeType)||!++h||(v&&((g[M]||(g[M]={}))[t]=[F,h]),g!==e)););return(h-=r)===n||h%n==0&&h/n>=0}}},PSEUDO:function(t,o){var r,i=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[M]?i(o):i.length>1?(r=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=i(t,o),s=r.length;s--;)n=Z.call(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:n(function(t){var e=[],o=[],r=T(t.replace(st,"$1"));return r[M]?n(function(t,e,o,n){for(var i,s=r(t,null,n,[]),a=t.length;a--;)(i=s[a])&&(t[a]=!(e[a]=i))}):function(t,n,i){return e[0]=t,r(e,null,i,o),!o.pop()}}),has:n(function(t){return function(o){return e(t,o).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:n(function(t){return gt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,bt).toLowerCase(),function(e){var o;do{if(o=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(o=o.toLowerCase())===t||0===o.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var o=t.location&&t.location.hash;return o&&o.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return dt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,o){return[0>o?o+e:o]}),even:a(function(t,e){for(var o=0;e>o;o+=2)t.push(o);return t}),odd:a(function(t,e){for(var o=1;e>o;o+=2)t.push(o);return t}),lt:a(function(t,e,o){for(var n=0>o?o+e:o;--n>=0;)t.push(n);return t}),gt:a(function(t,e,o){for(var n=0>o?o+e:o;++n<e;)t.push(n);return t})}},b.pseudos.nth=b.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[v]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(v);for(v in{submit:!0,reset:!0})b.pseudos[v]=function(t){return function(e){var o=e.nodeName.toLowerCase();return("input"===o||"button"===o)&&e.type===t}}(v);return c.prototype=b.filters=b.pseudos,b.setFilters=new c,k=e.tokenize=function(t,o){var n,r,i,s,a,l,c,u=G[t+" "];if(u)return o?0:u.slice(0);for(a=t,l=[],c=b.preFilter;a;){(!n||(r=at.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),n=!1,(r=lt.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(st," ")}),a=a.slice(n.length));for(s in b.filter)!(r=ht[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return o?a.length:a?e.error(t):G(t,l).slice(0)},T=e.compile=function(t,e){var o,n=[],r=[],i=V[t+" "];if(!i){for(e||(e=k(t)),o=e.length;o--;)i=m(e[o]),i[M]?n.push(i):r.push(i);i=V(t,y(r,n)),i.selector=t}return i},C=e.select=function(t,e,o,n){var r,i,s,a,c,g="function"==typeof t&&t,h=!n&&k(t=g.selector||t);if(o=o||[],1===h.length){if(i=h[0]=h[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&_.getById&&9===e.nodeType&&L&&b.relative[i[1].type]){if(!(e=(b.find.ID(s.matches[0].replace(_t,bt),e)||[])[0]))return o;g&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(r=ht.needsContext.test(t)?0:i.length;r--&&(s=i[r],!b.relative[a=s.type]);)if((c=b.find[a])&&(n=c(s.matches[0].replace(_t,bt),yt.test(i[0].type)&&l(e.parentNode)||e))){if(i.splice(r,1),!(t=n.length&&u(i)))return Q.apply(o,n),o;break}}return(g||T(t,h))(n,e,!L,o,yt.test(t)&&l(e.parentNode)||e),o},_.sortStable=M.split("").sort(W).join("")===M,_.detectDuplicates=!!B,I(),_.sortDetached=r(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||i("type|href|height|width",function(t,e,o){return o?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||i("value",function(t,e,o){return o||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||i(tt,function(t,e,o){var n;return o?void 0:!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(i);rt.find=ct,rt.expr=ct.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ct.uniqueSort,rt.text=ct.getText,rt.isXMLDoc=ct.isXML,rt.contains=ct.contains;var ut=rt.expr.match.needsContext,gt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;rt.filter=function(t,e,o){var n=e[0];return o&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?rt.find.matchesSelector(n,t)?[n]:[]:rt.find.matches(t,rt.grep(e,function(t){return 1===t.nodeType}))},rt.fn.extend({find:function(t){var e,o=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(rt(t).filter(function(){for(e=0;o>e;e++)if(rt.contains(r[e],this))return!0}));for(e=0;o>e;e++)rt.find(t,r[e],n);return n=this.pushStack(o>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(l(this,t||[],!1))},not:function(t){return this.pushStack(l(this,t||[],!0))},is:function(t){return!!l(this,"string"==typeof t&&ut.test(t)?rt(t):t||[],!1).length}});var pt,dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(rt.fn.init=function(t,e){var o,n;if(!t)return this;if("string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:dt.exec(t))||!o[1]&&e)return!e||e.jquery?(e||pt).find(t):this.constructor(e).find(t);if(o[1]){if(e=e instanceof rt?e[0]:e,rt.merge(this,rt.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:ot,!0)),gt.test(o[1])&&rt.isPlainObject(e))for(o in e)rt.isFunction(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return n=ot.getElementById(o[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=ot,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):rt.isFunction(t)?void 0!==pt.ready?pt.ready(t):t(rt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),rt.makeArray(t,this))}).prototype=rt.fn,pt=rt(ot);var ft=/^(?:parents|prev(?:Until|All))/,mt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(t,e,o){for(var n=[],r=void 0!==o;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&rt(t).is(o))break;n.push(t)}return n},sibling:function(t,e){for(var o=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&o.push(t);return o}}),rt.fn.extend({has:function(t){var e=rt(t,this),o=e.length;return this.filter(function(){for(var t=0;o>t;t++)if(rt.contains(this,e[t]))return!0})},closest:function(t,e){for(var o,n=0,r=this.length,i=[],s=ut.test(t)||"string"!=typeof t?rt(t,e||this.context):0;r>n;n++)for(o=this[n];o&&o!==e;o=o.parentNode)if(o.nodeType<11&&(s?s.index(o)>-1:1===o.nodeType&&rt.find.matchesSelector(o,t))){i.push(o);break}return this.pushStack(i.length>1?rt.unique(i):i)},index:function(t){return t?"string"==typeof t?Q.call(rt(t),this[0]):Q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(rt.unique(rt.merge(this.get(),rt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return rt.dir(t,"parentNode")},parentsUntil:function(t,e,o){return rt.dir(t,"parentNode",o)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return rt.dir(t,"nextSibling")},prevAll:function(t){return rt.dir(t,"previousSibling")},nextUntil:function(t,e,o){return rt.dir(t,"nextSibling",o)},prevUntil:function(t,e,o){return rt.dir(t,"previousSibling",o)},siblings:function(t){return rt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return rt.sibling(t.firstChild)},contents:function(t){return t.contentDocument||rt.merge([],t.childNodes)}},function(t,e){rt.fn[t]=function(o,n){var r=rt.map(this,e,o);return"Until"!==t.slice(-5)&&(n=o),n&&"string"==typeof n&&(r=rt.filter(n,r)),this.length>1&&(mt[t]||rt.unique(r),ft.test(t)&&r.reverse()),this.pushStack(r)}});var yt=/\S+/g,vt={};rt.Callbacks=function(t){t="string"==typeof t?vt[t]||u(t):rt.extend({},t);var e,o,n,r,i,s,a=[],l=!t.once&&[],c=function(u){for(e=t.memory&&u,o=!0,s=r||0,r=0,i=a.length,n=!0;a&&i>s;s++)if(!1===a[s].apply(u[0],u[1])&&t.stopOnFalse){e=!1;break}n=!1,a&&(l?l.length&&c(l.shift()):e?a=[]:g.disable())},g={add:function(){if(a){var o=a.length;!function e(o){rt.each(o,function(o,n){var r=rt.type(n);"function"===r?t.unique&&g.has(n)||a.push(n):n&&n.length&&"string"!==r&&e(n)})}(arguments),n?i=a.length:e&&(r=o,c(e))}return this},remove:function(){return a&&rt.each(arguments,function(t,e){for(var o;(o=rt.inArray(e,a,o))>-1;)a.splice(o,1),n&&(i>=o&&i--,s>=o&&s--)}),this},has:function(t){return t?rt.inArray(t,a)>-1:!(!a||!a.length)},empty:function(){return a=[],i=0,this},disable:function(){return a=l=e=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,e||g.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!a||o&&!l||(e=e||[],e=[t,e.slice?e.slice():e],n?l.push(e):c(e)),this},fire:function(){return g.fireWith(this,arguments),this},fired:function(){return!!o}};return g},rt.extend({Deferred:function(t){var e=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],o="pending",n={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return rt.Deferred(function(o){rt.each(e,function(e,i){var s=rt.isFunction(t[e])&&t[e];r[i[1]](function(){var t=s&&s.apply(this,arguments);t&&rt.isFunction(t.promise)?t.promise().done(o.resolve).fail(o.reject).progress(o.notify):o[i[0]+"With"](this===n?o.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?rt.extend(t,n):n}},r={};return n.pipe=n.then,rt.each(e,function(t,i){var s=i[2],a=i[3];n[i[1]]=s.add,a&&s.add(function(){o=a},e[1^t][2].disable,e[2][2].lock),r[i[0]]=function(){return r[i[0]+"With"](this===r?n:this,arguments),this},r[i[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,o,n,r=0,i=K.call(arguments),s=i.length,a=1!==s||t&&rt.isFunction(t.promise)?s:0,l=1===a?t:rt.Deferred(),c=function(t,o,n){return function(r){o[t]=this,n[t]=arguments.length>1?K.call(arguments):r,n===e?l.notifyWith(o,n):--a||l.resolveWith(o,n)}};if(s>1)for(e=new Array(s),o=new Array(s),n=new Array(s);s>r;r++)i[r]&&rt.isFunction(i[r].promise)?i[r].promise().done(c(r,n,i)).fail(l.reject).progress(c(r,o,e)):--a;return a||l.resolveWith(n,i),l.promise()}});var _t;rt.fn.ready=function(t){return rt.ready.promise().done(t),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?rt.readyWait++:rt.ready(!0)},ready:function(t){(!0===t?--rt.readyWait:rt.isReady)||(rt.isReady=!0,!0!==t&&--rt.readyWait>0||(_t.resolveWith(ot,[rt]),rt.fn.triggerHandler&&(rt(ot).triggerHandler("ready"),rt(ot).off("ready"))))}}),rt.ready.promise=function(t){return _t||(_t=rt.Deferred(),"complete"===ot.readyState?setTimeout(rt.ready):(ot.addEventListener("DOMContentLoaded",g,!1),i.addEventListener("load",g,!1))),_t.promise(t)},rt.ready.promise();var bt=rt.access=function(t,e,o,n,r,i,s){var a=0,l=t.length,c=null==o;if("object"===rt.type(o)){r=!0;for(a in o)rt.access(t,e,a,o[a],!0,i,s)}else if(void 0!==n&&(r=!0,rt.isFunction(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,o){return c.call(rt(t),o)})),e))for(;l>a;a++)e(t[a],o,s?n:n.call(t[a],a,e(t[a],o)));return r?t:c?e.call(t):l?e(t[0],o):i};rt.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},h.uid=1,h.accepts=rt.acceptData,h.prototype={key:function(t){if(!h.accepts(t))return 0;var e={},o=t[this.expando];if(!o){o=h.uid++;try{e[this.expando]={value:o},Object.defineProperties(t,e)}catch(n){e[this.expando]=o,rt.extend(t,e)}}return this.cache[o]||(this.cache[o]={}),o},set:function(t,e,o){var n,r=this.key(t),i=this.cache[r];if("string"==typeof e)i[e]=o;else if(rt.isEmptyObject(i))rt.extend(this.cache[r],e);else for(n in e)i[n]=e[n];return i},get:function(t,e){var o=this.cache[this.key(t)];return void 0===e?o:o[e]},access:function(t,e,o){var n;return void 0===e||e&&"string"==typeof e&&void 0===o?(n=this.get(t,e),void 0!==n?n:this.get(t,rt.camelCase(e))):(this.set(t,e,o),void 0!==o?o:e)},remove:function(t,e){var o,n,r,i=this.key(t),s=this.cache[i];if(void 0===e)this.cache[i]={};else{rt.isArray(e)?n=e.concat(e.map(rt.camelCase)):(r=rt.camelCase(e),e in s?n=[e,r]:(n=r,n=n in s?[n]:n.match(yt)||[])),o=n.length;for(;o--;)delete s[n[o]]}},hasData:function(t){return!rt.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var Et=new h,St=new h,kt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tt=/([A-Z])/g;rt.extend({hasData:function(t){return St.hasData(t)||Et.hasData(t)},data:function(t,e,o){return St.access(t,e,o)},removeData:function(t,e){St.remove(t,e)},_data:function(t,e,o){return Et.access(t,e,o)},_removeData:function(t,e){Et.remove(t,e)}}),rt.fn.extend({data:function(t,e){var o,n,r,i=this[0],s=i&&i.attributes;if(void 0===t){if(this.length&&(r=St.get(i),1===i.nodeType&&!Et.get(i,"hasDataAttrs"))){for(o=s.length;o--;)s[o]&&(n=s[o].name,0===n.indexOf("data-")&&(n=rt.camelCase(n.slice(5)),p(i,n,r[n])));Et.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){St.set(this,t)}):bt(this,function(e){var o,n=rt.camelCase(t);if(i&&void 0===e){if(void 0!==(o=St.get(i,t)))return o;if(void 0!==(o=St.get(i,n)))return o;if(void 0!==(o=p(i,n,void 0)))return o}else this.each(function(){var o=St.get(this,n);St.set(this,n,e),-1!==t.indexOf("-")&&void 0!==o&&St.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){St.remove(this,t)})}}),rt.extend({queue:function(t,e,o){var n;return t?(e=(e||"fx")+"queue",n=Et.get(t,e),o&&(!n||rt.isArray(o)?n=Et.access(t,e,rt.makeArray(o)):n.push(o)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var o=rt.queue(t,e),n=o.length,r=o.shift(),i=rt._queueHooks(t,e),s=function(){rt.dequeue(t,e)};"inprogress"===r&&(r=o.shift(),n--),r&&("fx"===e&&o.unshift("inprogress"),delete i.stop,r.call(t,s,i)),!n&&i&&i.empty.fire()},_queueHooks:function(t,e){var o=e+"queueHooks";return Et.get(t,o)||Et.access(t,o,{empty:rt.Callbacks("once memory").add(function(){Et.remove(t,[e+"queue",o])})})}}),rt.fn.extend({queue:function(t,e){var o=2;return"string"!=typeof t&&(e=t,t="fx",o--),arguments.length<o?rt.queue(this[0],t):void 0===e?this:this.each(function(){var o=rt.queue(this,t,e);rt._queueHooks(this,t),"fx"===t&&"inprogress"!==o[0]&&rt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){rt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var o,n=1,r=rt.Deferred(),i=this,s=this.length,a=function(){--n||r.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(o=Et.get(i[s],t+"queueHooks"))&&o.empty&&(n++,o.empty.add(a));return a(),r.promise(e)}});var Ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=["Top","Right","Bottom","Left"],wt=function(t,e){return t=e||t,"none"===rt.css(t,"display")||!rt.contains(t.ownerDocument,t)},Bt=/^(?:checkbox|radio)$/i;!function(){var t=ot.createDocumentFragment(),e=t.appendChild(ot.createElement("div")),o=ot.createElement("input");o.setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),e.appendChild(o),et.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",et.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var It="undefined";et.focusinBubbles="onfocusin"in i;var At=/^key/,Nt=/^(?:mouse|pointer|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,Rt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(t,e,o,n,r){var i,s,a,l,c,u,g,h,p,d,f,m=Et.get(t);if(m)for(o.handler&&(i=o,o=i.handler,r=i.selector),o.guid||(o.guid=rt.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return typeof rt!==It&&rt.event.triggered!==e.type?rt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(yt)||[""],c=e.length;c--;)a=Rt.exec(e[c])||[],p=f=a[1],d=(a[2]||"").split(".").sort(),p&&(g=rt.event.special[p]||{},p=(r?g.delegateType:g.bindType)||p,g=rt.event.special[p]||{},u=rt.extend({type:p,origType:f,data:n,handler:o,guid:o.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:d.join(".")},i),(h=l[p])||(h=l[p]=[],h.delegateCount=0,g.setup&&!1!==g.setup.call(t,n,d,s)||t.addEventListener&&t.addEventListener(p,s,!1)),g.add&&(g.add.call(t,u),u.handler.guid||(u.handler.guid=o.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),rt.event.global[p]=!0)},remove:function(t,e,o,n,r){var i,s,a,l,c,u,g,h,p,d,f,m=Et.hasData(t)&&Et.get(t);if(m&&(l=m.events)){for(e=(e||"").match(yt)||[""],c=e.length;c--;)if(a=Rt.exec(e[c])||[],p=f=a[1],d=(a[2]||"").split(".").sort(),p){for(g=rt.event.special[p]||{},p=(n?g.delegateType:g.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=h.length;i--;)u=h[i],!r&&f!==u.origType||o&&o.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(i,1),u.selector&&h.delegateCount--,g.remove&&g.remove.call(t,u));s&&!h.length&&(g.teardown&&!1!==g.teardown.call(t,d,m.handle)||rt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)rt.event.remove(t,p+e[c],o,n,!0);rt.isEmptyObject(l)&&(delete m.handle,Et.remove(t,"events"))}},trigger:function(t,e,o,n){var r,s,a,l,c,u,g,h=[o||ot],p=tt.call(t,"type")?t.type:t,d=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=a=o=o||ot,3!==o.nodeType&&8!==o.nodeType&&!Lt.test(p+rt.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[rt.expando]?t:new rt.Event(p,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),e=null==e?[t]:rt.makeArray(e,[t]),g=rt.event.special[p]||{},n||!g.trigger||!1!==g.trigger.apply(o,e))){if(!n&&!g.noBubble&&!rt.isWindow(o)){for(l=g.delegateType||p,Lt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(o.ownerDocument||ot)&&h.push(a.defaultView||a.parentWindow||i)}for(r=0;(s=h[r++])&&!t.isPropagationStopped();)t.type=r>1?l:g.bindType||p,u=(Et.get(s,"events")||{})[t.type]&&Et.get(s,"handle"),u&&u.apply(s,e),(u=c&&s[c])&&u.apply&&rt.acceptData(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=p,n||t.isDefaultPrevented()||g._default&&!1!==g._default.apply(h.pop(),e)||!rt.acceptData(o)||c&&rt.isFunction(o[p])&&!rt.isWindow(o)&&(a=o[c],a&&(o[c]=null),rt.event.triggered=p,o[p](),rt.event.triggered=void 0,a&&(o[c]=a)),t.result}},dispatch:function(t){t=rt.event.fix(t);var e,o,n,r,i,s=[],a=K.call(arguments),l=(Et.get(this,"events")||{})[t.type]||[],c=rt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=rt.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,void 0!==(n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var o,n,r,i,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(n=[],o=0;a>o;o++)i=e[o],r=i.selector+" ",void 0===n[r]&&(n[r]=i.needsContext?rt(r,this).index(l)>=0:rt.find(r,this,null,[l]).length),n[r]&&n.push(i);n.length&&s.push({elem:l,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var o,n,r,i=e.button;return null==t.pageX&&null!=e.clientX&&(o=t.target.ownerDocument||ot,n=o.documentElement,r=o.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===i||(t.which=1&i?1:2&i?3:4&i?2:0),t}},fix:function(t){if(t[rt.expando])return t;var e,o,n,r=t.type,i=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Nt.test(r)?this.mouseHooks:At.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new rt.Event(i),e=n.length;e--;)o=n[e],t[o]=i[o];return t.target||(t.target=ot),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,i):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&rt.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return rt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,o,n){var r=rt.extend(new rt.Event,o,{type:t,isSimulated:!0,originalEvent:{}});n?rt.event.trigger(r,null,e):rt.event.dispatch.call(e,r),r.isDefaultPrevented()&&o.preventDefault()}},rt.removeEvent=function(t,e,o){t.removeEventListener&&t.removeEventListener(e,o,!1)},rt.Event=function(t,e){return this instanceof rt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?d:f):this.type=t,e&&rt.extend(this,e),this.timeStamp=t&&t.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(t,e)},rt.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){rt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var o,n=this,r=t.relatedTarget,i=t.handleObj;return(!r||r!==n&&!rt.contains(n,r))&&(t.type=i.origType,o=i.handler.apply(this,arguments),t.type=e),o}}}),et.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(t,e){var o=function(t){rt.event.simulate(e,t.target,rt.event.fix(t),!0)};rt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=Et.access(n,e);r||n.addEventListener(t,o,!0),Et.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Et.access(n,e)-1;r?Et.access(n,e,r):(n.removeEventListener(t,o,!0),Et.remove(n,e))}}}),rt.fn.extend({on:function(t,e,o,n,r){var i,s;if("object"==typeof t){"string"!=typeof e&&(o=o||e,e=void 0);for(s in t)this.on(s,e,o,t[s],r);return this}if(null==o&&null==n?(n=e,o=e=void 0):null==n&&("string"==typeof e?(n=o,o=void 0):(n=o,o=e,e=void 0)),!1===n)n=f;else if(!n)return this;return 1===r&&(i=n,n=function(t){return rt().off(t),i.apply(this,arguments)},n.guid=i.guid||(i.guid=rt.guid++)),this.each(function(){rt.event.add(this,t,n,o,e)})},one:function(t,e,o,n){return this.on(t,e,o,n,1)},off:function(t,e,o){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,rt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(!1===e||"function"==typeof e)&&(o=e,e=void 0),!1===o&&(o=f),this.each(function(){rt.event.remove(this,t,o,e)})},trigger:function(t,e){return this.each(function(){rt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var o=this[0];return o?rt.event.trigger(t,e,o,!0):void 0}});var Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,jt=/<|&#?\w+;/,Mt=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ft=/^$|\/(?:java|ecma)script/i,Ht=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td,rt.extend({clone:function(t,e,o){var n,r,i,s,a=t.cloneNode(!0),l=rt.contains(t.ownerDocument,t);if(!(et.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||rt.isXMLDoc(t)))for(s=S(a),i=S(t),n=0,r=i.length;r>n;n++)k(i[n],s[n]);if(e)if(o)for(i=i||S(t),s=s||S(a),n=0,r=i.length;r>n;n++)E(i[n],s[n]);else E(t,a);return s=S(a,"script"),s.length>0&&b(s,!l&&S(t,"script")),a},buildFragment:function(t,e,o,n){for(var r,i,s,a,l,c,u=e.createDocumentFragment(),g=[],h=0,p=t.length;p>h;h++)if((r=t[h])||0===r)if("object"===rt.type(r))rt.merge(g,r.nodeType?[r]:r);else if(jt.test(r)){for(i=i||u.appendChild(e.createElement("div")),s=(Ot.exec(r)||["",""])[1].toLowerCase(),a=Gt[s]||Gt._default,i.innerHTML=a[1]+r.replace(Dt,"<$1></$2>")+a[2],c=a[0];c--;)i=i.lastChild;rt.merge(g,i.childNodes),i=u.firstChild,i.textContent=""}else g.push(e.createTextNode(r));for(u.textContent="",h=0;r=g[h++];)if((!n||-1===rt.inArray(r,n))&&(l=rt.contains(r.ownerDocument,r),i=S(u.appendChild(r),"script"),l&&b(i),o))for(c=0;r=i[c++];)Ft.test(r.type||"")&&o.push(r);return u},cleanData:function(t){for(var e,o,n,r,i=rt.event.special,s=0;void 0!==(o=t[s]);s++){if(rt.acceptData(o)&&(r=o[Et.expando])&&(e=Et.cache[r])){if(e.events)for(n in e.events)i[n]?rt.event.remove(o,n):rt.removeEvent(o,n,e.handle);Et.cache[r]&&delete Et.cache[r]}delete St.cache[o[St.expando]]}}}),rt.fn.extend({text:function(t){return bt(this,function(t){return void 0===t?rt.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){y(this,t).appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var o,n=t?rt.filter(t,this):this,r=0;null!=(o=n[r]);r++)e||1!==o.nodeType||rt.cleanData(S(o)),o.parentNode&&(e&&rt.contains(o.ownerDocument,o)&&b(S(o,"script")),o.parentNode.removeChild(o));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(rt.cleanData(S(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return rt.clone(this,t,e)})},html:function(t){return bt(this,function(t){var e=this[0]||{},o=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!Gt[(Ot.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Dt,"<$1></$2>");try{for(;n>o;o++)e=this[o]||{},1===e.nodeType&&(rt.cleanData(S(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,rt.cleanData(S(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var o,n,r,i,s,a,l=0,c=this.length,u=this,g=c-1,h=t[0],p=rt.isFunction(h);if(p||c>1&&"string"==typeof h&&!et.checkClone&&Pt.test(h))return this.each(function(o){var n=u.eq(o);p&&(t[0]=h.call(this,o,n.html())),n.domManip(t,e)});if(c&&(o=rt.buildFragment(t,this[0].ownerDocument,!1,this),n=o.firstChild,1===o.childNodes.length&&(o=n),n)){for(r=rt.map(S(o,"script"),v),i=r.length;c>l;l++)s=o,l!==g&&(s=rt.clone(s,!0,!0),i&&rt.merge(r,S(s,"script"))),e.call(this[l],s,l);if(i)for(a=r[r.length-1].ownerDocument,rt.map(r,_),l=0;i>l;l++)s=r[l],Ft.test(s.type||"")&&!Et.access(s,"globalEval")&&rt.contains(a,s)&&(s.src?rt._evalUrl&&rt._evalUrl(s.src):rt.globalEval(s.textContent.replace(Ut,"")))}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){rt.fn[t]=function(t){for(var o,n=[],r=rt(t),i=r.length-1,s=0;i>=s;s++)o=s===i?this:this.clone(!0),rt(r[s])[e](o),$.apply(n,o.get());return this.pushStack(n)}});var Vt,Wt={},zt=/^margin/,qt=new RegExp("^("+Ct+")(?!px)[a-z%]+$","i"),Xt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",n.appendChild(r);var t=i.getComputedStyle(s,null);e="1%"!==t.top,o="4px"===t.width,n.removeChild(r)}var e,o,n=ot.documentElement,r=ot.createElement("div"),s=ot.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",et.clearCloneStyle="content-box"===s.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(s),i.getComputedStyle&&rt.extend(et,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==o&&t(),o},reliableMarginRight:function(){var t,e=s.appendChild(ot.createElement("div"));return e.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",s.style.width="1px",n.appendChild(r),t=!parseFloat(i.getComputedStyle(e,null).marginRight),n.removeChild(r),t}}))}(),rt.swap=function(t,e,o,n){var r,i,s={};for(i in e)s[i]=t.style[i],t.style[i]=e[i];r=o.apply(t,n||[]);for(i in e)t.style[i]=s[i];return r};var Kt=/^(none|table(?!-c[ea]).+)/,Yt=new RegExp("^("+Ct+")(.*)$","i"),$t=new RegExp("^([+-])=("+Ct+")","i"),Qt={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var o=x(t,"opacity");return""===o?"1":o}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,o,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,i,s,a=rt.camelCase(e),l=t.style;return e=rt.cssProps[a]||(rt.cssProps[a]=B(l,a)),s=rt.cssHooks[e]||rt.cssHooks[a],void 0===o?s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e]:(i=typeof o,"string"===i&&(r=$t.exec(o))&&(o=(r[1]+1)*r[2]+parseFloat(rt.css(t,e)),i="number"),void(null!=o&&o===o&&("number"!==i||rt.cssNumber[a]||(o+="px"),et.clearCloneStyle||""!==o||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(o=s.set(t,o,n))||(l[e]=o))))}},css:function(t,e,o,n){var r,i,s,a=rt.camelCase(e);return e=rt.cssProps[a]||(rt.cssProps[a]=B(t.style,a)),s=rt.cssHooks[e]||rt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,o)),void 0===r&&(r=x(t,e,n)),"normal"===r&&e in Jt&&(r=Jt[e]),""===o||o?(i=parseFloat(r),!0===o||rt.isNumeric(i)?i||0:r):r}}),rt.each(["height","width"],function(t,e){rt.cssHooks[e]={get:function(t,o,n){return o?Kt.test(rt.css(t,"display"))&&0===t.offsetWidth?rt.swap(t,Qt,function(){return N(t,e,n)}):N(t,e,n):void 0},set:function(t,o,n){var r=n&&Xt(t);return I(t,o,n?A(t,e,n,"border-box"===rt.css(t,"boxSizing",!1,r),r):0)}}}),rt.cssHooks.marginRight=w(et.reliableMarginRight,function(t,e){return e?rt.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(t,e){rt.cssHooks[t+e]={expand:function(o){for(var n=0,r={},i="string"==typeof o?o.split(" "):[o];4>n;n++)r[t+xt[n]+e]=i[n]||i[n-2]||i[0];return r}},zt.test(t)||(rt.cssHooks[t+e].set=I)}),rt.fn.extend({css:function(t,e){return bt(this,function(t,e,o){var n,r,i={},s=0;if(rt.isArray(e)){for(n=Xt(t),r=e.length;r>s;s++)i[e[s]]=rt.css(t,e[s],!1,n);return i}return void 0!==o?rt.style(t,e,o):rt.css(t,e)},t,e,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){wt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=R,R.prototype={constructor:R,init:function(t,e,o,n,r,i){this.elem=t,this.prop=o,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=i||(rt.cssNumber[o]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,o=R.propHooks[this.prop];return this.pos=e=this.options.duration?rt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),o&&o.set?o.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=rt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){rt.fx.step[t.prop]?rt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[rt.cssProps[t.prop]]||rt.cssHooks[t.prop])?rt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},rt.fx=R.prototype.init,rt.fx.step={};var te,ee,oe=/^(?:toggle|show|hide)$/,ne=new RegExp("^(?:([+-])=|)("+Ct+")([a-z%]*)$","i"),re=/queueHooks$/,ie=[M],se={"*":[function(t,e){var o=this.createTween(t,e),n=o.cur(),r=ne.exec(e),i=r&&r[3]||(rt.cssNumber[t]?"":"px"),s=(rt.cssNumber[t]||"px"!==i&&+n)&&ne.exec(rt.css(o.elem,t)),a=1,l=20;if(s&&s[3]!==i){i=i||s[3],r=r||[],s=+n||1;do{a=a||".5",s/=a,rt.style(o.elem,t,s+i)}while(a!==(a=o.cur()/n)&&1!==a&&--l)}return r&&(s=o.start=+s||+n||0,o.unit=i,o.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),o}]};rt.Animation=rt.extend(F,{tweener:function(t,e){rt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var o,n=0,r=t.length;r>n;n++)o=t[n],se[o]=se[o]||[],se[o].unshift(e)},prefilter:function(t,e){e?ie.unshift(t):ie.push(t)}}),rt.speed=function(t,e,o){var n=t&&"object"==typeof t?rt.extend({},t):{complete:o||!o&&e||rt.isFunction(t)&&t,duration:t,easing:o&&e||e&&!rt.isFunction(e)&&e};return n.duration=rt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in rt.fx.speeds?rt.fx.speeds[n.duration]:rt.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){rt.isFunction(n.old)&&n.old.call(this),n.queue&&rt.dequeue(this,n.queue)},n},rt.fn.extend({fadeTo:function(t,e,o,n){return this.filter(wt).css("opacity",0).show().end().animate({opacity:e},t,o,n)},animate:function(t,e,o,n){var r=rt.isEmptyObject(t),i=rt.speed(e,o,n),s=function(){var e=F(this,rt.extend({},t),i);(r||Et.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(t,e,o){var n=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof t&&(o=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",i=rt.timers,s=Et.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&re.test(r)&&n(s[r]);for(r=i.length;r--;)i[r].elem!==this||null!=t&&i[r].queue!==t||(i[r].anim.stop(o),e=!1,i.splice(r,1));(e||!o)&&rt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,o=Et.get(this),n=o[t+"queue"],r=o[t+"queueHooks"],i=rt.timers,s=n?n.length:0;for(o.finish=!0,rt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete o.finish})}}),rt.each(["toggle","show","hide"],function(t,e){var o=rt.fn[e];rt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(O(e,!0),t,n,r)}}),rt.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){rt.fn[t]=function(t,o,n){return this.animate(e,t,o,n)}}),rt.timers=[],rt.fx.tick=function(){var t,e=0,o=rt.timers;for(te=rt.now();e<o.length;e++)(t=o[e])()||o[e]!==t||o.splice(e--,1);o.length||rt.fx.stop(),te=void 0},rt.fx.timer=function(t){rt.timers.push(t),t()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){ee||(ee=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(ee),ee=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(t,e){return t=rt.fx?rt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,o){var n=setTimeout(e,t);o.stop=function(){clearTimeout(n)}})},function(){var t=ot.createElement("input"),e=ot.createElement("select"),o=e.appendChild(ot.createElement("option"));t.type="checkbox",et.checkOn=""!==t.value,et.optSelected=o.selected,e.disabled=!0,et.optDisabled=!o.disabled,t=ot.createElement("input"),t.value="t",t.type="radio",et.radioValue="t"===t.value}();var ae,le=rt.expr.attrHandle;rt.fn.extend({attr:function(t,e){return bt(this,rt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){rt.removeAttr(this,t)})}}),rt.extend({attr:function(t,e,o){var n,r,i=t.nodeType;if(t&&3!==i&&8!==i&&2!==i)return typeof t.getAttribute===It?rt.prop(t,e,o):(1===i&&rt.isXMLDoc(t)||(e=e.toLowerCase(),n=rt.attrHooks[e]||(rt.expr.match.bool.test(e)?ae:void 0)),void 0===o?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=rt.find.attr(t,e),null==r?void 0:r):null!==o?n&&"set"in n&&void 0!==(r=n.set(t,o,e))?r:(t.setAttribute(e,o+""),o):void rt.removeAttr(t,e))},removeAttr:function(t,e){var o,n,r=0,i=e&&e.match(yt);if(i&&1===t.nodeType)for(;o=i[r++];)n=rt.propFix[o]||o,rt.expr.match.bool.test(o)&&(t[n]=!1),t.removeAttribute(o)},attrHooks:{type:{set:function(t,e){if(!et.radioValue&&"radio"===e&&rt.nodeName(t,"input")){var o=t.value;return t.setAttribute("type",e),o&&(t.value=o),e}}}}}),ae={set:function(t,e,o){return!1===e?rt.removeAttr(t,o):t.setAttribute(o,o),o}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(t,e){var o=le[e]||rt.find.attr;le[e]=function(t,e,n){var r,i;return n||(i=le[e],le[e]=r,r=null!=o(t,e,n)?e.toLowerCase():null,le[e]=i),r}});var ce=/^(?:input|select|textarea|button)$/i;rt.fn.extend({prop:function(t,e){return bt(this,rt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[rt.propFix[t]||t]})}}),rt.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,o){var n,r,i,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return i=1!==s||!rt.isXMLDoc(t),i&&(e=rt.propFix[e]||e,r=rt.propHooks[e]),void 0!==o?r&&"set"in r&&void 0!==(n=r.set(t,o,e))?n:t[e]=o:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ce.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),et.optSelected||(rt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this});var ue=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(t){var e,o,n,r,i,s,a="string"==typeof t&&t,l=0,c=this.length;if(rt.isFunction(t))return this.each(function(e){rt(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(yt)||[];c>l;l++)if(o=this[l],n=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(ue," "):" ")){for(i=0;r=e[i++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=rt.trim(n),o.className!==s&&(o.className=s)}return this},removeClass:function(t){var e,o,n,r,i,s,a=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(rt.isFunction(t))return this.each(function(e){rt(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(yt)||[];c>l;l++)if(o=this[l],n=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(ue," "):"")){for(i=0;r=e[i++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=t?rt.trim(n):"",o.className!==s&&(o.className=s)}return this},toggleClass:function(t,e){var o=typeof t;return"boolean"==typeof e&&"string"===o?e?this.addClass(t):this.removeClass(t):this.each(rt.isFunction(t)?function(o){rt(this).toggleClass(t.call(this,o,this.className,e),e)}:function(){if("string"===o)for(var e,n=0,r=rt(this),i=t.match(yt)||[];e=i[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(o===It||"boolean"===o)&&(this.className&&Et.set(this,"__className__",this.className),this.className=this.className||!1===t?"":Et.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",o=0,n=this.length;n>o;o++)if(1===this[o].nodeType&&(" "+this[o].className+" ").replace(ue," ").indexOf(e)>=0)return!0;return!1}});var ge=/\r/g;rt.fn.extend({val:function(t){var e,o,n,r=this[0];return arguments.length?(n=rt.isFunction(t),this.each(function(o){var r;1===this.nodeType&&(r=n?t.call(this,o,rt(this).val()):t,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(t){return null==t?"":t+""})),(e=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(o=e.get(r,"value"))?o:(o=r.value,"string"==typeof o?o.replace(ge,""):null==o?"":o)):void 0}}),rt.extend({valHooks:{option:{get:function(t){var e=rt.find.attr(t,"value");return null!=e?e:rt.trim(rt.text(t))}},select:{get:function(t){for(var e,o,n=t.options,r=t.selectedIndex,i="select-one"===t.type||0>r,s=i?null:[],a=i?r+1:n.length,l=0>r?a:i?r:0;a>l;l++)if(o=n[l],!(!o.selected&&l!==r||(et.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&rt.nodeName(o.parentNode,"optgroup"))){if(e=rt(o).val(),i)return e;s.push(e)}return s},set:function(t,e){for(var o,n,r=t.options,i=rt.makeArray(e),s=r.length;s--;)n=r[s],(n.selected=rt.inArray(n.value,i)>=0)&&(o=!0);return o||(t.selectedIndex=-1),i}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(t,e){return rt.isArray(e)?t.checked=rt.inArray(rt(t).val(),e)>=0:void 0}},et.checkOn||(rt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){rt.fn[e]=function(t,o){return arguments.length>0?this.on(e,null,t,o):this.trigger(e)}}),rt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,o){return this.on(t,null,e,o)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,o,n){return this.on(e,t,o,n)},undelegate:function(t,e,o){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",o)}});var he=rt.now(),pe=/\?/;rt.parseJSON=function(t){return JSON.parse(t+"")},rt.parseXML=function(t){var e,o;if(!t||"string"!=typeof t)return null;try{o=new DOMParser,e=o.parseFromString(t,"text/xml")}catch(t){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&rt.error("Invalid XML: "+t),e};var de,fe,me=/#.*$/,ye=/([?&])_=[^&]*/,ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,_e=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,be=/^(?:GET|HEAD)$/,Ee=/^\/\//,Se=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ke={},Te={},Ce="*/".concat("*");try{fe=location.href}catch(t){fe=ot.createElement("a"),fe.href="",fe=fe.href}de=Se.exec(fe.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fe,type:"GET",isLocal:_e.test(de[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ce,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?G(G(t,rt.ajaxSettings),e):G(rt.ajaxSettings,t)},ajaxPrefilter:H(ke),ajaxTransport:H(Te),ajax:function(t,e){function o(t,e,o,s){var l,u,y,v,b,S=e;2!==_&&(_=2,a&&clearTimeout(a),n=void 0,i=s||"",E.readyState=t>0?4:0,l=t>=200&&300>t||304===t,o&&(v=V(g,E,o)),v=W(g,v,E,l),l?(g.ifModified&&(b=E.getResponseHeader("Last-Modified"),b&&(rt.lastModified[r]=b),(b=E.getResponseHeader("etag"))&&(rt.etag[r]=b)),204===t||"HEAD"===g.type?S="nocontent":304===t?S="notmodified":(S=v.state,u=v.data,y=v.error,l=!y)):(y=S,(t||!S)&&(S="error",0>t&&(t=0))),E.status=t,E.statusText=(e||S)+"",l?d.resolveWith(h,[u,S,E]):d.rejectWith(h,[E,S,y]),E.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[E,g,l?u:y]),f.fireWith(h,[E,S]),c&&(p.trigger("ajaxComplete",[E,g]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,i,s,a,l,c,u,g=rt.ajaxSetup({},e),h=g.context||g,p=g.context&&(h.nodeType||h.jquery)?rt(h):rt.event,d=rt.Deferred(),f=rt.Callbacks("once memory"),m=g.statusCode||{},y={},v={},_=0,b="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!s)for(s={};e=ve.exec(i);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?i:null},setRequestHeader:function(t,e){var o=t.toLowerCase();return _||(t=v[o]=v[o]||t,y[t]=e),this},overrideMimeType:function(t){return _||(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)m[e]=[m[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||b;return n&&n.abort(e),o(0,e),this}};if(d.promise(E).complete=f.add,E.success=E.done,E.error=E.fail,g.url=((t||g.url||fe)+"").replace(me,"").replace(Ee,de[1]+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=rt.trim(g.dataType||"*").toLowerCase().match(yt)||[""],null==g.crossDomain&&(l=Se.exec(g.url.toLowerCase()),g.crossDomain=!(!l||l[1]===de[1]&&l[2]===de[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(de[3]||("http:"===de[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=rt.param(g.data,g.traditional)),U(ke,g,e,E),2===_)return E;c=g.global,c&&0==rt.active++&&rt.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!be.test(g.type),r=g.url,g.hasContent||(g.data&&(r=g.url+=(pe.test(r)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=ye.test(r)?r.replace(ye,"$1_="+he++):r+(pe.test(r)?"&":"?")+"_="+he++)),g.ifModified&&(rt.lastModified[r]&&E.setRequestHeader("If-Modified-Since",rt.lastModified[r]),rt.etag[r]&&E.setRequestHeader("If-None-Match",rt.etag[r])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&E.setRequestHeader("Content-Type",g.contentType),E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ce+"; q=0.01":""):g.accepts["*"]);for(u in g.headers)E.setRequestHeader(u,g.headers[u]);if(g.beforeSend&&(!1===g.beforeSend.call(h,E,g)||2===_))return E.abort();b="abort";for(u in{success:1,error:1,complete:1})E[u](g[u]);if(n=U(Te,g,e,E)){E.readyState=1,c&&p.trigger("ajaxSend",[E,g]),g.async&&g.timeout>0&&(a=setTimeout(function(){E.abort("timeout")},g.timeout));try{_=1,n.send(y,o)}catch(t){if(!(2>_))throw t;o(-1,t)}}else o(-1,"No Transport");return E},getJSON:function(t,e,o){return rt.get(t,e,o,"json")},getScript:function(t,e){return rt.get(t,void 0,e,"script")}}),rt.each(["get","post"],function(t,e){rt[e]=function(t,o,n,r){return rt.isFunction(o)&&(r=r||n,n=o,o=void 0),rt.ajax({url:t,type:e,dataType:r,data:o,success:n})}}),rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){rt.fn[e]=function(t){return this.on(e,t)}}),rt._evalUrl=function(t){return rt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},rt.fn.extend({wrapAll:function(t){var e;return rt.isFunction(t)?this.each(function(e){rt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=rt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(rt.isFunction(t)?function(e){rt(this).wrapInner(t.call(this,e))}:function(){var e=rt(this),o=e.contents();o.length?o.wrapAll(t):e.append(t)})},wrap:function(t){var e=rt.isFunction(t);return this.each(function(o){rt(this).wrapAll(e?t.call(this,o):t)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},rt.expr.filters.visible=function(t){return!rt.expr.filters.hidden(t)};var xe=/%20/g,we=/\[\]$/,Be=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;rt.param=function(t,e){var o,n=[],r=function(t,e){e=rt.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(t)||t.jquery&&!rt.isPlainObject(t))rt.each(t,function(){r(this.name,this.value)});else for(o in t)z(o,t[o],e,r);return n.join("&").replace(xe,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rt.prop(this,"elements");return t?rt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rt(this).is(":disabled")&&Ae.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!Bt.test(t))}).map(function(t,e){var o=rt(this).val();return null==o?null:rt.isArray(o)?rt.map(o,function(t){return{name:e.name,value:t.replace(Be,"\r\n")}}):{name:e.name,value:o.replace(Be,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ne=0,Le={},Re={0:200,1223:204},De=rt.ajaxSettings.xhr();i.ActiveXObject&&rt(i).on("unload",function(){for(var t in Le)Le[t]()}),et.cors=!!De&&"withCredentials"in De,et.ajax=De=!!De,rt.ajaxTransport(function(t){var e;return et.cors||De&&!t.crossDomain?{send:function(o,n){var r,i=t.xhr(),s=++Ne;if(i.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)i[r]=t.xhrFields[r];t.mimeType&&i.overrideMimeType&&i.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(r in o)i.setRequestHeader(r,o[r]);e=function(t){return function(){e&&(delete Le[s],e=i.onload=i.onerror=null,"abort"===t?i.abort():"error"===t?n(i.status,i.statusText):n(Re[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=e(),i.onerror=e("error"),e=Le[s]=e("abort");try{i.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}:void 0}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return rt.globalEval(t),t}}}),rt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),rt.ajaxTransport("script",function(t){if(t.crossDomain){var e,o;return{send:function(n,r){e=rt("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",o=function(t){e.remove(),o=null,t&&r("error"===t.type?404:200,t.type)}),ot.head.appendChild(e[0])},abort:function(){o&&o()}}}});var Oe=[],je=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Oe.pop()||rt.expando+"_"+he++;return this[t]=!0,t}}),rt.ajaxPrefilter("json jsonp",function(t,e,o){var n,r,s,a=!1!==t.jsonp&&(je.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&je.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(je,"$1"+n):!1!==t.jsonp&&(t.url+=(pe.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||rt.error(n+" was not called"),s[0]},t.dataTypes[0]="json",r=i[n],i[n]=function(){s=arguments},o.always(function(){i[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,Oe.push(n)),s&&rt.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),rt.parseHTML=function(t,e,o){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(o=e,e=!1),e=e||ot;var n=gt.exec(t),r=!o&&[];return n?[e.createElement(n[1])]:(n=rt.buildFragment([t],e,r),r&&r.length&&rt(r).remove(),rt.merge([],n.childNodes))};var Me=rt.fn.load;rt.fn.load=function(t,e,o){if("string"!=typeof t&&Me)return Me.apply(this,arguments);var n,r,i,s=this,a=t.indexOf(" ");return a>=0&&(n=rt.trim(t.slice(a)),t=t.slice(0,a)),rt.isFunction(e)?(o=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&rt.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){i=arguments,s.html(n?rt("<div>").append(rt.parseHTML(t)).find(n):t)}).complete(o&&function(t,e){s.each(o,i||[t.responseText,e,t])}),this},rt.expr.filters.animated=function(t){return rt.grep(rt.timers,function(e){return t===e.elem}).length};var Pe=i.document.documentElement;rt.offset={setOffset:function(t,e,o){var n,r,i,s,a,l,c,u=rt.css(t,"position"),g=rt(t),h={};"static"===u&&(t.style.position="relative"),a=g.offset(),i=rt.css(t,"top"),l=rt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(i+l).indexOf("auto")>-1,c?(n=g.position(),s=n.top,r=n.left):(s=parseFloat(i)||0,r=parseFloat(l)||0),rt.isFunction(e)&&(e=e.call(t,o,a)),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):g.css(h)}},rt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){rt.offset.setOffset(this,t,e)});var e,o,n=this[0],r={top:0,left:0},i=n&&n.ownerDocument;return i?(e=i.documentElement,rt.contains(e,n)?(typeof n.getBoundingClientRect!==It&&(r=n.getBoundingClientRect()),o=q(i),{top:r.top+o.pageYOffset-e.clientTop,left:r.left+o.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,o=this[0],n={top:0,left:0};return"fixed"===rt.css(o,"position")?e=o.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),rt.nodeName(t[0],"html")||(n=t.offset()),n.top+=rt.css(t[0],"borderTopWidth",!0),n.left+=rt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-rt.css(o,"marginTop",!0),left:e.left-n.left-rt.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Pe;t&&!rt.nodeName(t,"html")&&"static"===rt.css(t,"position");)t=t.offsetParent;return t||Pe})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var o="pageYOffset"===e;rt.fn[t]=function(n){return bt(this,function(t,n,r){var s=q(t);return void 0===r?s?s[e]:t[n]:void(s?s.scrollTo(o?i.pageXOffset:r,o?r:i.pageYOffset):t[n]=r)},t,n,arguments.length,null)}}),rt.each(["top","left"],function(t,e){rt.cssHooks[e]=w(et.pixelPosition,function(t,o){return o?(o=x(t,e),qt.test(o)?rt(t).position()[e]+"px":o):void 0})}),rt.each({Height:"height",Width:"width"},function(t,e){rt.each({padding:"inner"+t,content:e,"":"outer"+t},function(o,n){rt.fn[n]=function(n,r){var i=arguments.length&&(o||"boolean"!=typeof n),s=o||(!0===n||!0===r?"margin":"border");return bt(this,function(e,o,n){var r;return rt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?rt.css(e,o,s):rt.style(e,o,n,s)},e,i?n:void 0,i,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,o(2)&&(n=[],void 0!==(r=function(){return rt}.apply(e,n))&&(t.exports=r));var Fe=i.jQuery,He=i.$;return rt.noConflict=function(t){return i.$===rt&&(i.$=He),t&&i.jQuery===rt&&(i.jQuery=Fe),rt},typeof s===It&&(i.jQuery=i.$=rt),rt})},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===o||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(g===clearTimeout)return clearTimeout(t);if((g===n||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(t);try{return g(t)}catch(e){try{return g.call(null,t)}catch(e){return g.call(this,t)}}}function s(){f&&p&&(f=!1,p.length?d=p.concat(d):m=-1,d.length&&a())}function a(){if(!f){var t=r(s);f=!0;for(var e=d.length;e;){for(p=d,d=[];++m<e;)p&&p[m].run();m=-1,e=d.length}p=null,f=!1,i(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,g,h=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:o}catch(t){u=o}try{g="function"==typeof clearTimeout?clearTimeout:n}catch(t){g=n}}();var p,d=[],f=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];d.push(new l(t,e)),1!==d.length||f||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,o){(function(e){!function(e){t.exports=e()}(function(){"use strict";function t(o,n){if(!(this instanceof t))return new t(o,n);this.options=n=n?mr(n):{},mr(Ri,n,!1),d(n);var r=n.value;"string"==typeof r&&(r=new ns(r,n.mode)),this.doc=r;var i=this.display=new e(o,r);i.wrapper.CodeMirror=this,u(this),l(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!ui&&Ce(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new cr},Zr&&11>ti&&setTimeout(yr(Te,this,!0),20),Be(this),Nr(),Zt(this),this.curOp.forceUpdate=!0,An(this,r),n.autofocus&&!ui||Cr()==i.input?setTimeout(yr(Qe,this),20):Je(this);for(var s in Di)Di.hasOwnProperty(s)&&Di[s](this,n[s],Oi);b(this);for(var a=0;a<Fi.length;++a)Fi[a](this);ee(this)}function e(t,e){var o=this,n=o.input=Er("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");ei?n.style.width="1000px":n.setAttribute("wrap","off"),ci&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),o.inputDiv=Er("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),o.scrollbarH=Er("div",[Er("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),o.scrollbarV=Er("div",[Er("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o.scrollbarFiller=Er("div",null,"CodeMirror-scrollbar-filler"),o.gutterFiller=Er("div",null,"CodeMirror-gutter-filler"),o.lineDiv=Er("div",null,"CodeMirror-code"),o.selectionDiv=Er("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=Er("div",null,"CodeMirror-cursors"),o.measure=Er("div",null,"CodeMirror-measure"),o.lineMeasure=Er("div",null,"CodeMirror-measure"),o.lineSpace=Er("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none"),o.mover=Er("div",[Er("div",[o.lineSpace],"CodeMirror-lines")],null,"position: relative"),o.sizer=Er("div",[o.mover],"CodeMirror-sizer"),o.heightForcer=Er("div",null,null,"position: absolute; height: "+ps+"px; width: 1px;"),o.gutters=Er("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=Er("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=Er("div",[o.inputDiv,o.scrollbarH,o.scrollbarV,o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),Zr&&8>ti&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),ci&&(n.style.width="0px"),ei||(o.scroller.draggable=!0),si&&(o.inputDiv.style.height="1px",o.inputDiv.style.position="absolute"),Zr&&8>ti&&(o.scrollbarH.style.minHeight=o.scrollbarV.style.minWidth="18px"),t.appendChild?t.appendChild(o.wrapper):t(o.wrapper),o.viewFrom=o.viewTo=e.first,o.view=[],o.externalMeasured=null,o.viewOffset=0,o.lastSizeC=0,o.updateLineNumbers=null,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.prevInput="",o.alignWidgets=!1,o.pollingFast=!1,o.poll=new cr,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.inaccurateSelection=!1,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null}function o(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),n(e)}function n(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,St(t,100),t.state.modeGen++,t.curOp&&de(t)}function r(t){t.options.lineWrapping?(Br(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth=""):(wr(t.display.wrapper,"CodeMirror-wrap"),p(t)),s(t),de(t),Ht(t),setTimeout(function(){y(t)},100)}function i(t){var e=Qt(t.display),o=t.options.lineWrapping,n=o&&Math.max(5,t.display.scroller.clientWidth/Jt(t.display)-3);return function(r){if(on(t.doc,r))return 0;var i=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(i+=r.widgets[s].height);return o?i+(Math.ceil(r.text.length/n)||1)*e:i+e}}function s(t){var e=t.doc,o=i(t);e.iter(function(t){var e=o(t);e!=t.height&&Dn(t,e)})}function a(t){var e=Wi[t.options.keyMap],o=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(o?" cm-keymap-"+o:"")}function l(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ht(t)}function c(t){u(t),de(t),setTimeout(function(){_(t)},20)}function u(t){var e=t.display.gutters,o=t.options.gutters;Sr(e);for(var n=0;n<o.length;++n){var r=o[n],i=e.appendChild(Er("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=i,i.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none",g(t)}function g(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px",t.display.scrollbarH.style.left=t.options.fixedGutter?e+"px":0}function h(t){if(0==t.height)return 0;for(var e,o=t.text.length,n=t;e=Yo(n);){var r=e.find(0,!0);n=r.from.line,o+=r.from.ch-r.to.ch}for(n=t;e=$o(n);){var r=e.find(0,!0);o-=n.text.length-r.from.ch,n=r.to.line,o+=n.text.length-r.to.ch}return o}function p(t){var e=t.display,o=t.doc;e.maxLine=Nn(o,o.first),e.maxLineLength=h(e.maxLine),e.maxLineChanged=!0,o.iter(function(t){var o=h(t);o>e.maxLineLength&&(e.maxLineLength=o,e.maxLine=t)})}function d(t){var e=pr(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function f(t){return t.display.scroller.clientHeight-t.display.wrapper.clientHeight<ps-3}function m(t){var e=t.display.scroller;return{clientHeight:e.clientHeight,barHeight:t.display.scrollbarV.clientHeight,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,hScrollbarTakesSpace:f(t),barWidth:t.display.scrollbarH.clientWidth,docHeight:Math.round(t.doc.height+wt(t.display))}}function y(t,e){e||(e=m(t));var o=t.display,n=Rr(o.measure),r=e.docHeight+ps,i=e.scrollWidth>e.clientWidth;i&&e.scrollWidth<=e.clientWidth+1&&n>0&&!e.hScrollbarTakesSpace&&(i=!1);var s=r>e.clientHeight;if(s?(o.scrollbarV.style.display="block",o.scrollbarV.style.bottom=i?n+"px":"0",o.scrollbarV.firstChild.style.height=Math.max(0,r-e.clientHeight+(e.barHeight||o.scrollbarV.clientHeight))+"px"):(o.scrollbarV.style.display="",o.scrollbarV.firstChild.style.height="0"),i?(o.scrollbarH.style.display="block",o.scrollbarH.style.right=s?n+"px":"0",o.scrollbarH.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.barWidth||o.scrollbarH.clientWidth)+"px"):(o.scrollbarH.style.display="",o.scrollbarH.firstChild.style.width="0"),i&&s?(o.scrollbarFiller.style.display="block",o.scrollbarFiller.style.height=o.scrollbarFiller.style.width=n+"px"):o.scrollbarFiller.style.display="",i&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(o.gutterFiller.style.display="block",o.gutterFiller.style.height=n+"px",o.gutterFiller.style.width=o.gutters.offsetWidth+"px"):o.gutterFiller.style.display="",!t.state.checkedOverlayScrollbar&&e.clientHeight>0){if(0===n){var a=gi&&!ai?"12px":"18px";o.scrollbarV.style.minWidth=o.scrollbarH.style.minHeight=a;var l=function(e){er(e)!=o.scrollbarV&&er(e)!=o.scrollbarH&&ce(t,Le)(e)};cs(o.scrollbarV,"mousedown",l),cs(o.scrollbarH,"mousedown",l)}t.state.checkedOverlayScrollbar=!0}}function v(t,e,o){var n=o&&null!=o.top?Math.max(0,o.top):t.scroller.scrollTop;n=Math.floor(n-xt(t));var r=o&&null!=o.bottom?o.bottom:n+t.wrapper.clientHeight,i=jn(e,n),s=jn(e,r);if(o&&o.ensure){var a=o.ensure.from.line,l=o.ensure.to.line;if(i>a)return{from:a,to:jn(e,Mn(Nn(e,a))+t.wrapper.clientHeight)};if(Math.min(l,e.lastLine())>=s)return{from:jn(e,Mn(Nn(e,l))-t.wrapper.clientHeight),to:l}}return{from:i,to:Math.max(s,i+1)}}function _(t){var e=t.display,o=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=S(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,i=n+"px",s=0;s<o.length;s++)if(!o[s].hidden){t.options.fixedGutter&&o[s].gutter&&(o[s].gutter.style.left=i);var a=o[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=i}t.options.fixedGutter&&(e.gutters.style.left=n+r+"px")}}function b(t){if(!t.options.lineNumbers)return!1;var e=t.doc,o=E(t.options,e.first+e.size-1),n=t.display;if(o.length!=n.lineNumChars){var r=n.measure.appendChild(Er("div",[Er("div",o)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=r.firstChild.offsetWidth,s=r.offsetWidth-i;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(i,n.lineGutter.offsetWidth-s),n.lineNumWidth=n.lineNumInnerWidth+s,n.lineNumChars=n.lineNumInnerWidth?o.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",g(t),!0}return!1}function E(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function S(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function k(t,e,o){var n=t.display;this.viewport=e,this.visible=v(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=o,this.dims=N(t)}function T(t,e){var o=t.display,n=t.doc;if(e.editorIsHidden)return me(t),!1;if(!e.force&&e.visible.from>=o.viewFrom&&e.visible.to<=o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>=o.viewTo)&&0==be(t))return!1;b(t)&&(me(t),e.dims=N(t));var r=n.first+n.size,i=Math.max(e.visible.from-t.options.viewportMargin,n.first),s=Math.min(r,e.visible.to+t.options.viewportMargin);o.viewFrom<i&&i-o.viewFrom<20&&(i=Math.max(n.first,o.viewFrom)),o.viewTo>s&&o.viewTo-s<20&&(s=Math.min(r,o.viewTo)),yi&&(i=tn(t.doc,i),s=en(t.doc,s));var a=i!=o.viewFrom||s!=o.viewTo||o.lastSizeC!=e.wrapperHeight;_e(t,i,s),o.viewOffset=Mn(Nn(t.doc,o.viewFrom)),t.display.mover.style.top=o.viewOffset+"px";var l=be(t);if(!a&&0==l&&!e.force&&(null==o.updateLineNumbers||o.updateLineNumbers>=o.viewTo))return!1;var c=Cr();return l>4&&(o.lineDiv.style.display="none"),L(t,o.updateLineNumbers,e.dims),l>4&&(o.lineDiv.style.display=""),c&&Cr()!=c&&c.offsetHeight&&c.focus(),Sr(o.cursorDiv),Sr(o.selectionDiv),a&&(o.lastSizeC=e.wrapperHeight,St(t,400)),o.updateLineNumbers=null,!0}function C(t,e){for(var o=(e.force,e.viewport),n=!0;;n=!1){if(n&&t.options.lineWrapping&&e.oldScrollerWidth!=t.display.scroller.clientWidth)!0;else if(!1,o&&null!=o.top&&(o={top:Math.min(t.doc.height+wt(t.display)-ps-t.display.scroller.clientHeight,o.top)}),e.visible=v(t.display,t.doc,o),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!T(t,e))break;I(t);var r=m(t);vt(t),w(t,r),y(t,r)}nr(t,"update",t),(t.display.viewFrom!=e.oldViewFrom||t.display.viewTo!=e.oldViewTo)&&nr(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo)}function x(t,e){var o=new k(t,e);if(T(t,o)){I(t),C(t,o);var n=m(t);vt(t),w(t,n),y(t,n)}}function w(t,e){t.display.sizer.style.minHeight=t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=Math.max(e.docHeight,e.clientHeight-ps)+"px"}function B(t,e){t.display.sizer.offsetWidth+t.display.gutters.offsetWidth<t.display.scroller.clientWidth-1&&(t.display.sizer.style.minHeight=t.display.heightForcer.style.top="0px",t.display.gutters.style.height=e.docHeight+"px")}function I(t){for(var e=t.display,o=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var r,i=e.view[n];if(!i.hidden){if(Zr&&8>ti){var s=i.node.offsetTop+i.node.offsetHeight;r=s-o,o=s}else{var a=i.node.getBoundingClientRect();r=a.bottom-a.top}var l=i.line.height-r;if(2>r&&(r=Qt(e)),(l>.001||-.001>l)&&(Dn(i.line,r),A(i.line),i.rest))for(var c=0;c<i.rest.length;c++)A(i.rest[c])}}}function A(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function N(t){for(var e=t.display,o={},n={},r=e.gutters.clientLeft,i=e.gutters.firstChild,s=0;i;i=i.nextSibling,++s)o[t.options.gutters[s]]=i.offsetLeft+i.clientLeft+r,n[t.options.gutters[s]]=i.clientWidth;return{fixedPos:S(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:o,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function L(t,e,o){function n(e){var o=e.nextSibling;return ei&&gi&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),o}for(var r=t.display,i=t.options.lineNumbers,s=r.lineDiv,a=s.firstChild,l=r.view,c=r.viewFrom,u=0;u<l.length;u++){var g=l[u];if(g.hidden);else if(g.node){for(;a!=g.node;)a=n(a);var h=i&&null!=e&&c>=e&&g.lineNumber;g.changes&&(pr(g.changes,"gutter")>-1&&(h=!1),R(t,g,c,o)),h&&(Sr(g.lineNumber),g.lineNumber.appendChild(document.createTextNode(E(t.options,c)))),a=g.node.nextSibling}else{var p=U(t,g,c,o);s.insertBefore(p,a)}c+=g.size}for(;a;)a=n(a)}function R(t,e,o,n){for(var r=0;r<e.changes.length;r++){var i=e.changes[r];"text"==i?M(t,e):"gutter"==i?F(t,e,o,n):"class"==i?P(e):"widget"==i&&H(e,n)}e.changes=null}function D(t){return t.node==t.text&&(t.node=Er("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),Zr&&8>ti&&(t.node.style.zIndex=2)),t.node}function O(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var o=D(t);t.background=o.insertBefore(Er("div",null,e),o.firstChild)}}function j(t,e){var o=t.display.externalMeasured;return o&&o.line==e.line?(t.display.externalMeasured=null,e.measure=o.measure,o.built):vn(t,e)}function M(t,e){var o=e.text.className,n=j(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,P(e)):o&&(e.text.className=o)}function P(t){O(t),t.line.wrapClass?D(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function F(t,e,o,n){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var r=e.line.gutterMarkers;if(t.options.lineNumbers||r){var i=D(e),s=e.gutter=i.insertBefore(Er("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),e.text);if(!t.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(Er("div",E(t.options,o),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),r)for(var a=0;a<t.options.gutters.length;++a){var l=t.options.gutters[a],c=r.hasOwnProperty(l)&&r[l];c&&s.appendChild(Er("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function H(t,e){t.alignable&&(t.alignable=null);for(var o,n=t.node.firstChild;n;n=o){var o=n.nextSibling;"CodeMirror-linewidget"==n.className&&t.node.removeChild(n)}G(t,e)}function U(t,e,o,n){var r=j(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),P(e),F(t,e,o,n),G(e,n),e.node}function G(t,e){if(V(t.line,t,e,!0),t.rest)for(var o=0;o<t.rest.length;o++)V(t.rest[o],t,e,!1)}function V(t,e,o,n){if(t.widgets)for(var r=D(e),i=0,s=t.widgets;i<s.length;++i){var a=s[i],l=Er("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||(l.ignoreEvents=!0),W(a,l,e,o),n&&a.above?r.insertBefore(l,e.gutter||e.text):r.appendChild(l),nr(a,"redraw")}}function W(t,e,o,n){if(t.noHScroll){(o.alignable||(o.alignable=[])).push(e);var r=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(r-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function z(t){return vi(t.line,t.ch)}function q(t,e){return _i(t,e)<0?e:t}function X(t,e){return _i(t,e)<0?t:e}function K(t,e){this.ranges=t,this.primIndex=e}function Y(t,e){this.anchor=t,this.head=e}function $(t,e){var o=t[e];t.sort(function(t,e){return _i(t.from(),e.from())}),e=pr(t,o);for(var n=1;n<t.length;n++){var r=t[n],i=t[n-1];if(_i(i.to(),r.from())>=0){var s=X(i.from(),r.from()),a=q(i.to(),r.to()),l=i.empty()?r.from()==r.head:i.from()==i.head;e>=n&&--e,t.splice(--n,2,new Y(l?a:s,l?s:a))}}return new K(t,e)}function Q(t,e){return new K([new Y(t,e||t)],0)}function J(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Z(t,e){if(e.line<t.first)return vi(t.first,0);var o=t.first+t.size-1;return e.line>o?vi(o,Nn(t,o).text.length):tt(e,Nn(t,e.line).text.length)}function tt(t,e){var o=t.ch;return null==o||o>e?vi(t.line,e):0>o?vi(t.line,0):t}function et(t,e){return e>=t.first&&e<t.first+t.size}function ot(t,e){for(var o=[],n=0;n<e.length;n++)o[n]=Z(t,e[n]);return o}function nt(t,e,o,n){if(t.cm&&t.cm.display.shift||t.extend){var r=e.anchor;if(n){var i=_i(o,r)<0;i!=_i(n,r)<0?(r=o,o=n):i!=_i(o,n)<0&&(o=n)}return new Y(r,o)}return new Y(n||o,o)}function rt(t,e,o,n){ut(t,new K([nt(t,t.sel.primary(),e,o)],0),n)}function it(t,e,o){for(var n=[],r=0;r<t.sel.ranges.length;r++)n[r]=nt(t,t.sel.ranges[r],e[r],null);ut(t,$(n,t.sel.primIndex),o)}function st(t,e,o,n){var r=t.sel.ranges.slice(0);r[e]=o,ut(t,$(r,t.sel.primIndex),n)}function at(t,e,o,n){ut(t,Q(e,o),n)}function lt(t,e){var o={ranges:e.ranges,update:function(e){this.ranges=[];for(var o=0;o<e.length;o++)this.ranges[o]=new Y(Z(t,e[o].anchor),Z(t,e[o].head))}};return gs(t,"beforeSelectionChange",t,o),t.cm&&gs(t.cm,"beforeSelectionChange",t.cm,o),o.ranges!=e.ranges?$(o.ranges,o.ranges.length-1):e}function ct(t,e,o){var n=t.history.done,r=hr(n);r&&r.ranges?(n[n.length-1]=e,gt(t,e,o)):ut(t,e,o)}function ut(t,e,o){gt(t,e,o),zn(t,t.sel,t.cm?t.cm.curOp.id:NaN,o)}function gt(t,e,o){(ar(t,"beforeSelectionChange")||t.cm&&ar(t.cm,"beforeSelectionChange"))&&(e=lt(t,e)),ht(t,dt(t,e,o&&o.bias||(_i(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),o&&!1===o.scroll||!t.cm||_o(t.cm)}function ht(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,sr(t.cm)),nr(t,"cursorActivity",t))}function pt(t){ht(t,dt(t,t.sel,null,!1),fs)}function dt(t,e,o,n){for(var r,i=0;i<e.ranges.length;i++){var s=e.ranges[i],a=ft(t,s.anchor,o,n),l=ft(t,s.head,o,n);(r||a!=s.anchor||l!=s.head)&&(r||(r=e.ranges.slice(0,i)),r[i]=new Y(a,l))}return r?$(r,e.primIndex):e}function ft(t,e,o,n){var r=!1,i=e,s=o||1;t.cantEdit=!1;t:for(;;){var a=Nn(t,i.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=i.ch:c.from<i.ch))&&(null==c.to||(u.inclusiveRight?c.to>=i.ch:c.to>i.ch))){if(n&&(gs(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var g=u.find(0>s?-1:1);if(0==_i(g,i)&&(g.ch+=s,g.ch<0?g=g.line>t.first?Z(t,vi(g.line-1)):null:g.ch>a.text.length&&(g=g.line<t.first+t.size-1?vi(g.line+1,0):null),!g)){if(r)return n?(t.cantEdit=!0,vi(t.first,0)):ft(t,e,o,!0);r=!0,g=e,s=-s}i=g;continue t}}return i}}function mt(t){for(var e=t.display,o=t.doc,n={},r=n.cursors=document.createDocumentFragment(),i=n.selection=document.createDocumentFragment(),s=0;s<o.sel.ranges.length;s++){var a=o.sel.ranges[s],l=a.empty();(l||t.options.showCursorWhenSelecting)&&_t(t,a,r),l||bt(t,a,i)}if(t.options.moveInputWithCursor){var c=qt(t,o.sel.primary().head,"div"),u=e.wrapper.getBoundingClientRect(),g=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,c.top+g.top-u.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,c.left+g.left-u.left))}return n}function yt(t,e){kr(t.display.cursorDiv,e.cursors),kr(t.display.selectionDiv,e.selection),null!=e.teTop&&(t.display.inputDiv.style.top=e.teTop+"px",t.display.inputDiv.style.left=e.teLeft+"px")}function vt(t){yt(t,mt(t))}function _t(t,e,o){var n=qt(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),r=o.appendChild(Er("div"," ","CodeMirror-cursor"));if(r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var i=o.appendChild(Er("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));i.style.display="",i.style.left=n.other.left+"px",i.style.top=n.other.top+"px",i.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function bt(t,e,o){function n(t,e,o,n){0>e&&(e=0),e=Math.round(e),n=Math.round(n),a.appendChild(Er("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==o?u-t:o)+"px; height: "+(n-e)+"px"))}function r(e,o,r){function i(o,n){return zt(t,vi(e,o),"div",g,n)}var a,l,g=Nn(s,e),h=g.text.length;return Mr(Pn(g),o||0,null==r?h:r,function(t,e,s){var g,p,d,f=i(t,"left");if(t==e)g=f,p=d=f.left;else{if(g=i(e-1,"right"),"rtl"==s){var m=f;f=g,g=m}p=f.left,d=g.right}null==o&&0==t&&(p=c),g.top-f.top>3&&(n(p,f.top,null,f.bottom),p=c,f.bottom<g.top&&n(p,f.bottom,null,g.top)),null==r&&e==h&&(d=u),(!a||f.top<a.top||f.top==a.top&&f.left<a.left)&&(a=f),(!l||g.bottom>l.bottom||g.bottom==l.bottom&&g.right>l.right)&&(l=g),c+1>p&&(p=c),n(p,g.top,d-p,g.bottom)}),{start:a,end:l}}var i=t.display,s=t.doc,a=document.createDocumentFragment(),l=Bt(t.display),c=l.left,u=i.lineSpace.offsetWidth-l.right,g=e.from(),h=e.to();if(g.line==h.line)r(g.line,g.ch,h.ch);else{var p=Nn(s,g.line),d=Nn(s,h.line),f=Jo(p)==Jo(d),m=r(g.line,g.ch,f?p.text.length+1:null).end,y=r(h.line,f?0:null,h.ch).start;f&&(m.top<y.top-2?(n(m.right,m.top,null,m.bottom),n(c,y.top,y.left,y.bottom)):n(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&n(c,m.bottom,null,y.top)}o.appendChild(a)}function Et(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var o=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){e.cursorDiv.style.visibility=(o=!o)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function St(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,yr(kt,t))}function kt(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var o=+new Date+t.options.workTime,n=Ui(e.mode,Ct(t,e.frontier)),r=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(i){if(e.frontier>=t.display.viewFrom){var s=i.styles,a=dn(t,i,n,!0);i.styles=a.styles;var l=i.styleClasses,c=a.classes;c?i.styleClasses=c:l&&(i.styleClasses=null);for(var u=!s||s.length!=i.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),g=0;!u&&g<s.length;++g)u=s[g]!=i.styles[g];u&&r.push(e.frontier),i.stateAfter=Ui(e.mode,n)}else mn(t,i.text,n),i.stateAfter=0==e.frontier%5?Ui(e.mode,n):null;return++e.frontier,+new Date>o?(St(t,t.options.workDelay),!0):void 0}),r.length&&le(t,function(){for(var e=0;e<r.length;e++)fe(t,r[e],"text")})}}function Tt(t,e,o){for(var n,r,i=t.doc,s=o?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=i.first)return i.first;var l=Nn(i,a-1);if(l.stateAfter&&(!o||a<=i.frontier))return a;var c=vs(l.text,null,t.options.tabSize);(null==r||n>c)&&(r=a-1,n=c)}return r}function Ct(t,e,o){var n=t.doc,r=t.display;if(!n.mode.startState)return!0;var i=Tt(t,e,o),s=i>n.first&&Nn(n,i-1).stateAfter;return s=s?Ui(n.mode,s):Gi(n.mode),n.iter(i,e,function(o){mn(t,o.text,s);var a=i==e-1||0==i%5||i>=r.viewFrom&&i<r.viewTo;o.stateAfter=a?Ui(n.mode,s):null,++i}),o&&(n.frontier=i),s}function xt(t){return t.lineSpace.offsetTop}function wt(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Bt(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=kr(t.measure,Er("pre","x")),o=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(o.paddingLeft),right:parseInt(o.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function It(t,e,o){var n=t.options.lineWrapping,r=n&&t.display.scroller.clientWidth;if(!e.measure.heights||n&&e.measure.width!=r){var i=e.measure.heights=[];if(n){e.measure.width=r;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&i.push((l.bottom+c.top)/2-o.top)}}i.push(o.bottom-o.top)}}function At(t,e,o){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var n=0;n<t.rest.length;n++)if(On(t.rest[n])>o)return{map:t.measure.maps[n],cache:t.measure.caches[n],before:!0}}function Nt(t,e){e=Jo(e);var o=On(e),n=t.display.externalMeasured=new he(t.doc,e,o);n.lineN=o;var r=n.built=vn(t,n);return n.text=r.pre,kr(t.display.lineMeasure,r.pre),n}function Lt(t,e,o,n){return Ot(t,Dt(t,e),o,n)}function Rt(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ye(t,e)];var o=t.display.externalMeasured;return o&&e>=o.lineN&&e<o.lineN+o.size?o:void 0}function Dt(t,e){var o=On(e),n=Rt(t,o);n&&!n.text?n=null:n&&n.changes&&R(t,n,o,N(t)),n||(n=Nt(t,e));var r=At(n,e,o);return{line:e,view:n,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function Ot(t,e,o,n,r){e.before&&(o=-1);var i,s=o+(n||"");return e.cache.hasOwnProperty(s)?i=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(It(t,e.view,e.rect),e.hasHeights=!0),i=jt(t,e,o,n),i.bogus||(e.cache[s]=i)),{left:i.left,right:i.right,top:r?i.rtop:i.top,bottom:r?i.rbottom:i.bottom}}function jt(t,e,o,n){for(var r,i,s,a,l=e.map,c=0;c<l.length;c+=3){var u=l[c],g=l[c+1];if(u>o?(i=0,s=1,a="left"):g>o?(i=o-u,s=i+1):(c==l.length-3||o==g&&l[c+3]>o)&&(s=g-u,i=s-1,o>=g&&(a="right")),null!=i){if(r=l[c+2],u==g&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)r=l[2+(c-=3)],a="left";if("right"==n&&i==g-u)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)r=l[(c+=3)+2],a="right";break}}var h;if(3==r.nodeType){for(var c=0;4>c;c++){for(;i&&br(e.line.text.charAt(u+i));)--i;for(;g>u+s&&br(e.line.text.charAt(u+s));)++s;if(Zr&&9>ti&&0==i&&s==g-u)h=r.parentNode.getBoundingClientRect();else if(Zr&&t.options.lineWrapping){var p=Es(r,i,s).getClientRects();h=p.length?p["right"==n?p.length-1:0]:ki}else h=Es(r,i,s).getBoundingClientRect()||ki;if(h.left||h.right||0==i)break;s=i,i-=1,a="right"}Zr&&11>ti&&(h=Mt(t.display.measure,h))}else{i>0&&(a=n="right");var p;h=t.options.lineWrapping&&(p=r.getClientRects()).length>1?p["right"==n?p.length-1:0]:r.getBoundingClientRect()}if(Zr&&9>ti&&!i&&(!h||!h.left&&!h.right)){var d=r.parentNode.getClientRects()[0];h=d?{left:d.left,right:d.left+Jt(t.display),top:d.top,bottom:d.bottom}:ki}for(var f=h.top-e.rect.top,m=h.bottom-e.rect.top,y=(f+m)/2,v=e.view.measure.heights,c=0;c<v.length-1&&!(y<v[c]);c++);var _=c?v[c-1]:0,b=v[c],E={left:("right"==a?h.right:h.left)-e.rect.left,right:("left"==a?h.left:h.right)-e.rect.left,top:_,bottom:b};return h.left||h.right||(E.bogus=!0),t.options.singleCursorHeightPerLine||(E.rtop=f,E.rbottom=m),E}function Mt(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!jr(t))return e;var o=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*o,right:e.right*o,top:e.top*n,bottom:e.bottom*n}}function Pt(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Ft(t){t.display.externalMeasure=null,Sr(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Pt(t.display.view[e])}function Ht(t){Ft(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Ut(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Gt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Vt(t,e,o,n){if(e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var i=sn(e.widgets[r]);o.top+=i,o.bottom+=i}if("line"==n)return o;n||(n="local");var s=Mn(e);if("local"==n?s+=xt(t.display):s-=t.display.viewOffset,"page"==n||"window"==n){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==n?0:Gt());var l=a.left+("window"==n?0:Ut());o.left+=l,o.right+=l}return o.top+=s,o.bottom+=s,o}function Wt(t,e,o){if("div"==o)return e;var n=e.left,r=e.top;if("page"==o)n-=Ut(),r-=Gt();else if("local"==o||!o){var i=t.display.sizer.getBoundingClientRect();n+=i.left,r+=i.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:n-s.left,top:r-s.top}}function zt(t,e,o,n,r){return n||(n=Nn(t.doc,e.line)),Vt(t,n,Lt(t,n,e.ch,r),o)}function qt(t,e,o,n,r,i){function s(e,s){var a=Ot(t,r,e,s?"right":"left",i);return s?a.left=a.right:a.right=a.left,Vt(t,n,a,o)}function a(t,e){var o=l[e],n=o.level%2;return t==Pr(o)&&e&&o.level<l[e-1].level?(o=l[--e],t=Fr(o)-(o.level%2?0:1),n=!0):t==Fr(o)&&e<l.length-1&&o.level<l[e+1].level&&(o=l[++e],t=Pr(o)-o.level%2,n=!1),n&&t==o.to&&t>o.from?s(t-1):s(t,n)}n=n||Nn(t.doc,e.line),r||(r=Dt(t,n));var l=Pn(n),c=e.ch;if(!l)return s(c);var u=qr(l,c),g=a(c,u);return null!=Os&&(g.other=a(c,Os)),g}function Xt(t,e){var o=0,e=Z(t.doc,e);t.options.lineWrapping||(o=Jt(t.display)*e.ch);var n=Nn(t.doc,e.line),r=Mn(n)+xt(t.display);return{left:o,right:o,top:r,bottom:r+n.height}}function Kt(t,e,o,n){var r=vi(t,e);return r.xRel=n,o&&(r.outside=!0),r}function Yt(t,e,o){var n=t.doc;if(0>(o+=t.display.viewOffset))return Kt(n.first,0,!0,-1);var r=jn(n,o),i=n.first+n.size-1;if(r>i)return Kt(n.first+n.size-1,Nn(n,i).text.length,!0,1);0>e&&(e=0);for(var s=Nn(n,r);;){var a=$t(t,s,r,e,o),l=$o(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=On(s=c.to.line)}}function $t(t,e,o,n,r){function i(n){var r=qt(t,vi(o,n),"line",e,c);return a=!0,s>r.bottom?r.left-l:s<r.top?r.left+l:(a=!1,r.left)}var s=r-Mn(e),a=!1,l=2*t.display.wrapper.clientWidth,c=Dt(t,e),u=Pn(e),g=e.text.length,h=Hr(e),p=Ur(e),d=i(h),f=a,m=i(p),y=a;if(n>m)return Kt(o,p,y,1);for(;;){if(u?p==h||p==Kr(e,h,1):1>=p-h){for(var v=d>n||m-n>=n-d?h:p,_=n-(v==h?d:m);br(e.text.charAt(v));)++v;return Kt(o,v,v==h?f:y,-1>_?-1:_>1?1:0)}var b=Math.ceil(g/2),E=h+b;if(u){E=h;for(var S=0;b>S;++S)E=Kr(e,E,1)}var k=i(E);k>n?(p=E,m=k,(y=a)&&(m+=1e3),g=b):(h=E,d=k,f=a,g-=b)}}function Qt(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==bi){bi=Er("pre");for(var e=0;49>e;++e)bi.appendChild(document.createTextNode("x")),bi.appendChild(Er("br"));bi.appendChild(document.createTextNode("x"))}kr(t.measure,bi);var o=bi.offsetHeight/50;return o>3&&(t.cachedTextHeight=o),Sr(t.measure),o||1}function Jt(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=Er("span","xxxxxxxxxx"),o=Er("pre",[e]);kr(t.measure,o);var n=e.getBoundingClientRect(),r=(n.right-n.left)/10;return r>2&&(t.cachedCharWidth=r),r||10}function Zt(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Ci},Ti?Ti.ops.push(t.curOp):t.curOp.ownsGroup=Ti={ops:[t.curOp],delayedCallbacks:[]}}function te(t){var e=t.delayedCallbacks,o=0;do{for(;o<e.length;o++)e[o]();for(var n=0;n<t.ops.length;n++){var r=t.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++](r.cm)}}while(o<e.length)}function ee(t){var e=t.curOp,o=e.ownsGroup;if(o)try{te(o)}finally{Ti=null;for(var n=0;n<o.ops.length;n++)o.ops[n].cm.curOp=null;oe(o)}}function oe(t){for(var e=t.ops,o=0;o<e.length;o++)ne(e[o]);for(var o=0;o<e.length;o++)re(e[o]);for(var o=0;o<e.length;o++)ie(e[o]);for(var o=0;o<e.length;o++)se(e[o]);for(var o=0;o<e.length;o++)ae(e[o])}function ne(t){var e=t.cm,o=e.display;t.updateMaxLine&&p(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<o.viewFrom||t.scrollToPos.to.line>=o.viewTo)||o.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new k(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function re(t){t.updatedDisplay=t.mustUpdate&&T(t.cm,t.update)}function ie(t){var e=t.cm,o=e.display;t.updatedDisplay&&I(e),t.barMeasure=m(e),o.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Lt(e,o.maxLine,o.maxLine.text.length).left+3,t.maxScrollLeft=Math.max(0,o.sizer.offsetLeft+t.adjustWidthTo+ps-o.scroller.clientWidth)),(t.updatedDisplay||t.selectionChanged)&&(t.newSelectionNodes=mt(e))}function se(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Ue(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1),t.newSelectionNodes&&yt(e,t.newSelectionNodes),t.updatedDisplay&&w(e,t.barMeasure),(t.updatedDisplay||t.startHeight!=e.doc.height)&&y(e,t.barMeasure),t.selectionChanged&&Et(e),e.state.focused&&t.updateInput&&Te(e,t.typing)}function ae(t){var e=t.cm,o=e.display,n=e.doc;if(null!=t.adjustWidthTo&&Math.abs(t.barMeasure.scrollWidth-e.display.scroller.scrollWidth)>1&&y(e),t.updatedDisplay&&C(e,t.update),null==o.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(o.wheelStartX=o.wheelStartY=null),null!=t.scrollTop&&(o.scroller.scrollTop!=t.scrollTop||t.forceScroll)){var r=Math.max(0,Math.min(o.scroller.scrollHeight-o.scroller.clientHeight,t.scrollTop));o.scroller.scrollTop=o.scrollbarV.scrollTop=n.scrollTop=r}if(null!=t.scrollLeft&&(o.scroller.scrollLeft!=t.scrollLeft||t.forceScroll)){var i=Math.max(0,Math.min(o.scroller.scrollWidth-o.scroller.clientWidth,t.scrollLeft));o.scroller.scrollLeft=o.scrollbarH.scrollLeft=n.scrollLeft=i,_(e)}if(t.scrollToPos){var s=fo(e,Z(n,t.scrollToPos.from),Z(n,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&po(e,s)}var a=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(a)for(var c=0;c<a.length;++c)a[c].lines.length||gs(a[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&gs(l[c],"unhide");o.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.updatedDisplay&&ei&&(e.options.lineWrapping&&B(e,t.barMeasure),t.barMeasure.scrollWidth>t.barMeasure.clientWidth&&t.barMeasure.scrollWidth<t.barMeasure.clientWidth+1&&!f(e)&&y(e)),t.changeObjs&&gs(e,"changes",e,t.changeObjs)}function le(t,e){if(t.curOp)return e();Zt(t);try{return e()}finally{ee(t)}}function ce(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Zt(t);try{return e.apply(t,arguments)}finally{ee(t)}}}function ue(t){return function(){if(this.curOp)return t.apply(this,arguments);Zt(this);try{return t.apply(this,arguments)}finally{ee(this)}}}function ge(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Zt(e);try{return t.apply(this,arguments)}finally{ee(e)}}}function he(t,e,o){this.line=e,this.rest=Zo(e),this.size=this.rest?On(hr(this.rest))-o+1:1,this.node=this.text=null,this.hidden=on(t,e)}function pe(t,e,o){for(var n,r=[],i=e;o>i;i=n){var s=new he(t.doc,Nn(t.doc,i),i);n=i+s.size,r.push(s)}return r}function de(t,e,o,n){null==e&&(e=t.doc.first),null==o&&(o=t.doc.first+t.doc.size),n||(n=0);var r=t.display;if(n&&o<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)yi&&tn(t.doc,e)<r.viewTo&&me(t);else if(o<=r.viewFrom)yi&&en(t.doc,o+n)>r.viewFrom?me(t):(r.viewFrom+=n,r.viewTo+=n);else if(e<=r.viewFrom&&o>=r.viewTo)me(t);else if(e<=r.viewFrom){var i=ve(t,o,o+n,1);i?(r.view=r.view.slice(i.index),r.viewFrom=i.lineN,r.viewTo+=n):me(t)}else if(o>=r.viewTo){var i=ve(t,e,e,-1);i?(r.view=r.view.slice(0,i.index),r.viewTo=i.lineN):me(t)}else{var s=ve(t,e,e,-1),a=ve(t,o,o+n,1);s&&a?(r.view=r.view.slice(0,s.index).concat(pe(t,s.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=n):me(t)}var l=r.externalMeasured;l&&(o<l.lineN?l.lineN+=n:e<l.lineN+l.size&&(r.externalMeasured=null))}function fe(t,e,o){t.curOp.viewChanged=!0;var n=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var i=n.view[ye(t,e)];if(null!=i.node){var s=i.changes||(i.changes=[]);-1==pr(s,o)&&s.push(o)}}}function me(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ye(t,e){if(e>=t.display.viewTo)return null;if(0>(e-=t.display.viewFrom))return null;for(var o=t.display.view,n=0;n<o.length;n++)if(0>(e-=o[n].size))return n}function ve(t,e,o,n){var r,i=ye(t,e),s=t.display.view;if(!yi||o==t.doc.first+t.doc.size)return{index:i,lineN:o};for(var a=0,l=t.display.viewFrom;i>a;a++)l+=s[a].size;if(l!=e){if(n>0){if(i==s.length-1)return null;r=l+s[i].size-e,i++}else r=l-e;e+=r,o+=r}for(;tn(t.doc,o)!=o;){if(i==(0>n?0:s.length-1))return null;o+=n*s[i-(0>n?1:0)].size,i+=n}return{index:i,lineN:o}}function _e(t,e,o){var n=t.display;0==n.view.length||e>=n.viewTo||o<=n.viewFrom?(n.view=pe(t,e,o),n.viewFrom=e):(n.viewFrom>e?n.view=pe(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(ye(t,e))),n.viewFrom=e,n.viewTo<o?n.view=n.view.concat(pe(t,n.viewTo,o)):n.viewTo>o&&(n.view=n.view.slice(0,ye(t,o)))),n.viewTo=o}function be(t){for(var e=t.display.view,o=0,n=0;n<e.length;n++){var r=e[n];r.hidden||r.node&&!r.changes||++o}return o}function Ee(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){ke(t),t.state.focused&&Ee(t)})}function Se(t){function e(){ke(t)||o?(t.display.pollingFast=!1,Ee(t)):(o=!0,t.display.poll.set(60,e))}var o=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function ke(t){var e=t.display.input,o=t.display.prevInput,n=t.doc;if(!t.state.focused||Ns(e)&&!o||we(t)||t.options.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var r=e.value;if(r==o&&!t.somethingSelected())return!1;if(Zr&&ti>=9&&t.display.inputHasSelection===r||gi&&/[\uf700-\uf7ff]/.test(r))return Te(t),!1;var i=!t.curOp;i&&Zt(t),t.display.shift=!1,8203!=r.charCodeAt(0)||n.sel!=t.display.selForContextMenu||o||(o="​");for(var s=0,a=Math.min(o.length,r.length);a>s&&o.charCodeAt(s)==r.charCodeAt(s);)++s;var l=r.slice(s),c=As(l),u=null;t.state.pasteIncoming&&n.sel.ranges.length>1&&(xi&&xi.join("\n")==l?u=0==n.sel.ranges.length%xi.length&&dr(xi,As):c.length==n.sel.ranges.length&&(u=dr(c,function(t){return[t]})));for(var g=n.sel.ranges.length-1;g>=0;g--){var h=n.sel.ranges[g],p=h.from(),d=h.to();s<o.length?p=vi(p.line,p.ch-(o.length-s)):t.state.overwrite&&h.empty()&&!t.state.pasteIncoming&&(d=vi(d.line,Math.min(Nn(n,d.line).text.length,d.ch+hr(c).length)));var f=t.curOp.updateInput,m={from:p,to:d,text:u?u[g%u.length]:c,origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(so(t.doc,m),nr(t,"inputRead",t,m),l&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&h.head.ch<100&&(!g||n.sel.ranges[g-1].head.line!=h.head.line)){var y=t.getModeAt(h.head),v=Li(m);if(y.electricChars){for(var _=0;_<y.electricChars.length;_++)if(l.indexOf(y.electricChars.charAt(_))>-1){Eo(t,v.line,"smart");break}}else y.electricInput&&y.electricInput.test(Nn(n,v.line).text.slice(0,v.ch))&&Eo(t,v.line,"smart")}}return _o(t),t.curOp.updateInput=f,t.curOp.typing=!0,r.length>1e3||r.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=r,i&&ee(t),t.state.pasteIncoming=t.state.cutIncoming=!1,!0}function Te(t,e){var o,n,r=t.doc;if(t.somethingSelected()){t.display.prevInput="";var i=r.sel.primary();o=Ls&&(i.to().line-i.from().line>100||(n=t.getSelection()).length>1e3);var s=o?"-":n||t.getSelection();t.display.input.value=s,t.state.focused&&bs(t.display.input),Zr&&ti>=9&&(t.display.inputHasSelection=s)}else e||(t.display.prevInput=t.display.input.value="",Zr&&ti>=9&&(t.display.inputHasSelection=null));t.display.inaccurateSelection=o}function Ce(t){"nocursor"==t.options.readOnly||ui&&Cr()==t.display.input||t.display.input.focus()}function xe(t){t.state.focused||(Ce(t),Qe(t))}function we(t){return t.options.readOnly||t.doc.cantEdit}function Be(t){function e(){t.state.focused&&setTimeout(yr(Ce,t),0)}function o(e){ir(t,e)||ls(e)}function n(e){if(t.somethingSelected())xi=t.getSelections(),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,r.input.value=xi.join("\n"),bs(r.input));else{for(var o=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var s=t.doc.sel.ranges[i].head.line,a={anchor:vi(s,0),head:vi(s+1,0)};n.push(a),o.push(t.getRange(a.anchor,a.head))}"cut"==e.type?t.setSelections(n,null,fs):(r.prevInput="",r.input.value=o.join("\n"),bs(r.input)),xi=o}"cut"==e.type&&(t.state.cutIncoming=!0)}var r=t.display;cs(r.scroller,"mousedown",ce(t,Le)),Zr&&11>ti?cs(r.scroller,"dblclick",ce(t,function(e){if(!ir(t,e)){var o=Ne(t,e);if(o&&!Me(t,e)&&!Ae(t.display,e)){ss(e);var n=t.findWordAt(o);rt(t.doc,n.anchor,n.head)}}})):cs(r.scroller,"dblclick",function(e){ir(t,e)||ss(e)}),cs(r.lineSpace,"selectstart",function(t){Ae(r,t)||ss(t)}),fi||cs(r.scroller,"contextmenu",function(e){Ze(t,e)}),cs(r.scroller,"scroll",function(){r.scroller.clientHeight&&(He(t,r.scroller.scrollTop),Ue(t,r.scroller.scrollLeft,!0),gs(t,"scroll",t))}),cs(r.scrollbarV,"scroll",function(){r.scroller.clientHeight&&He(t,r.scrollbarV.scrollTop)}),cs(r.scrollbarH,"scroll",function(){r.scroller.clientHeight&&Ue(t,r.scrollbarH.scrollLeft)}),cs(r.scroller,"mousewheel",function(e){Ge(t,e)}),cs(r.scroller,"DOMMouseScroll",function(e){Ge(t,e)}),cs(r.scrollbarH,"mousedown",e),cs(r.scrollbarV,"mousedown",e),cs(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),cs(r.input,"keyup",function(e){Ye.call(t,e)}),cs(r.input,"input",function(){Zr&&ti>=9&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),Se(t)}),cs(r.input,"keydown",ce(t,Xe)),cs(r.input,"keypress",ce(t,$e)),cs(r.input,"focus",yr(Qe,t)),cs(r.input,"blur",yr(Je,t)),t.options.dragDrop&&(cs(r.scroller,"dragstart",function(e){Fe(t,e)}),cs(r.scroller,"dragenter",o),cs(r.scroller,"dragover",o),cs(r.scroller,"drop",ce(t,Pe))),cs(r.scroller,"paste",function(e){Ae(r,e)||(t.state.pasteIncoming=!0,Ce(t),Se(t))}),cs(r.input,"paste",function(){if(ei&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=r.input.selectionStart,o=r.input.selectionEnd;r.input.value+="$",r.input.selectionEnd=o,r.input.selectionStart=e,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,Se(t)}),cs(r.input,"cut",n),cs(r.input,"copy",n),si&&cs(r.sizer,"mouseup",function(){Cr()==r.input&&r.input.blur(),Ce(t)})}function Ie(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,t.setSize()}function Ae(t,e){for(var o=er(e);o!=t.wrapper;o=o.parentNode)if(!o||o.ignoreEvents||o.parentNode==t.sizer&&o!=t.mover)return!0}function Ne(t,e,o,n){var r=t.display;if(!o){var i=er(e);if(i==r.scrollbarH||i==r.scrollbarV||i==r.scrollbarFiller||i==r.gutterFiller)return null}var s,a,l=r.lineSpace.getBoundingClientRect();try{s=e.clientX-l.left,a=e.clientY-l.top}catch(e){return null}var c,u=Yt(t,s,a);if(n&&1==u.xRel&&(c=Nn(t.doc,u.line).text).length==u.ch){var g=vs(c,c.length,t.options.tabSize)-c.length;u=vi(u.line,Math.max(0,Math.round((s-Bt(t.display).left)/Jt(t.display))-g))}return u}function Le(t){if(!ir(this,t)){var e=this,o=e.display;if(o.shift=t.shiftKey,Ae(o,t))return void(ei||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)));if(!Me(e,t)){var n=Ne(e,t);switch(window.focus(),or(t)){case 1:n?Re(e,t,n):er(t)==o.scroller&&ss(t);break;case 2:ei&&(e.state.lastMiddleDown=+new Date),n&&rt(e.doc,n),setTimeout(yr(Ce,e),20),ss(t);break;case 3:fi&&Ze(e,t)}}}}function Re(t,e,o){setTimeout(yr(xe,t),0);var n,r=+new Date;Si&&Si.time>r-400&&0==_i(Si.pos,o)?n="triple":Ei&&Ei.time>r-400&&0==_i(Ei.pos,o)?(n="double",Si={time:r,pos:o}):(n="single",Ei={time:r,pos:o});var i=t.doc.sel,s=gi?e.metaKey:e.ctrlKey;t.options.dragDrop&&Is&&!we(t)&&"single"==n&&i.contains(o)>-1&&i.somethingSelected()?De(t,e,o,s):Oe(t,e,o,n,s)}function De(t,e,o,n){var r=t.display,i=ce(t,function(s){ei&&(r.scroller.draggable=!1),t.state.draggingText=!1,us(document,"mouseup",i),us(r.scroller,"drop",i),Math.abs(e.clientX-s.clientX)+Math.abs(e.clientY-s.clientY)<10&&(ss(s),n||rt(t.doc,o),Ce(t),Zr&&9==ti&&setTimeout(function(){document.body.focus(),Ce(t)},20))});ei&&(r.scroller.draggable=!0),t.state.draggingText=i,r.scroller.dragDrop&&r.scroller.dragDrop(),cs(document,"mouseup",i),cs(r.scroller,"drop",i)}function Oe(t,e,o,n,r){function i(e){if(0!=_i(f,e))if(f=e,"rect"==n){for(var r=[],i=t.options.tabSize,s=vs(Nn(c,o.line).text,o.ch,i),a=vs(Nn(c,e.line).text,e.ch,i),l=Math.min(s,a),p=Math.max(s,a),d=Math.min(o.line,e.line),m=Math.min(t.lastLine(),Math.max(o.line,e.line));m>=d;d++){var y=Nn(c,d).text,v=ur(y,l,i);l==p?r.push(new Y(vi(d,v),vi(d,v))):y.length>v&&r.push(new Y(vi(d,v),vi(d,ur(y,p,i))))}r.length||r.push(new Y(o,o)),ut(c,$(h.ranges.slice(0,g).concat(r),g),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var _=u,b=_.anchor,E=e;if("single"!=n){if("double"==n)var S=t.findWordAt(e);else var S=new Y(vi(e.line,0),Z(c,vi(e.line+1,0)));_i(S.anchor,b)>0?(E=S.head,b=X(_.from(),S.anchor)):(E=S.anchor,b=q(_.to(),S.head))}var r=h.ranges.slice(0);r[g]=new Y(Z(c,b),E),ut(c,$(r,g),ms)}}function s(e){var o=++y,r=Ne(t,e,!0,"rect"==n);if(r)if(0!=_i(r,f)){xe(t),i(r);var a=v(l,c);(r.line>=a.to||r.line<a.from)&&setTimeout(ce(t,function(){y==o&&s(e)}),150)}else{var u=e.clientY<m.top?-20:e.clientY>m.bottom?20:0;u&&setTimeout(ce(t,function(){y==o&&(l.scroller.scrollTop+=u,s(e))}),50)}}function a(e){y=1/0,ss(e),Ce(t),us(document,"mousemove",_),us(document,"mouseup",b),c.history.lastSelOrigin=null}var l=t.display,c=t.doc;ss(e);var u,g,h=c.sel;if(r&&!e.shiftKey?(g=c.sel.contains(o),u=g>-1?c.sel.ranges[g]:new Y(o,o)):u=c.sel.primary(),e.altKey)n="rect",r||(u=new Y(o,o)),o=Ne(t,e,!0,!0),g=-1;else if("double"==n){var p=t.findWordAt(o);u=t.display.shift||c.extend?nt(c,u,p.anchor,p.head):p}else if("triple"==n){var d=new Y(vi(o.line,0),Z(c,vi(o.line+1,0)));u=t.display.shift||c.extend?nt(c,u,d.anchor,d.head):d}else u=nt(c,u,o);r?g>-1?st(c,g,u,ms):(g=c.sel.ranges.length,ut(c,$(c.sel.ranges.concat([u]),g),{scroll:!1,origin:"*mouse"})):(g=0,ut(c,new K([u],0),ms),h=c.sel);var f=o,m=l.wrapper.getBoundingClientRect(),y=0,_=ce(t,function(t){or(t)?s(t):a(t)}),b=ce(t,a);cs(document,"mousemove",_),cs(document,"mouseup",b)}function je(t,e,o,n,r){try{var i=e.clientX,s=e.clientY}catch(e){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&ss(e);var a=t.display,l=a.lineDiv.getBoundingClientRect();if(s>l.bottom||!ar(t,o))return tr(e);s-=l.top-a.viewOffset;for(var c=0;c<t.options.gutters.length;++c){var u=a.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=i){return r(t,o,t,jn(t.doc,s),t.options.gutters[c],e),tr(e)}}}function Me(t,e){return je(t,e,"gutterClick",!0,nr)}function Pe(t){var e=this;if(!ir(e,t)&&!Ae(e.display,t)){ss(t),Zr&&(wi=+new Date);var o=Ne(e,t,!0),n=t.dataTransfer.files;if(o&&!we(e))if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,i=Array(r),s=0,a=0;r>a;++a)!function(t,n){var a=new FileReader;a.onload=ce(e,function(){if(i[n]=a.result,++s==r){o=Z(e.doc,o);var t={from:o,to:o,text:As(i.join("\n")),origin:"paste"};so(e.doc,t),ct(e.doc,Q(o,Li(t)))}}),a.readAsText(t)}(n[a],a);else{if(e.state.draggingText&&e.doc.sel.contains(o)>-1)return e.state.draggingText(t),void setTimeout(yr(Ce,e),20);try{var i=t.dataTransfer.getData("Text");if(i){if(e.state.draggingText&&!(gi?t.metaKey:t.ctrlKey))var l=e.listSelections();if(gt(e.doc,Q(o,o)),l)for(var a=0;a<l.length;++a)ho(e.doc,"",l[a].anchor,l[a].head,"drag");e.replaceSelection(i,"around","paste"),Ce(e)}}catch(t){}}}}function Fe(t,e){if(Zr&&(!t.state.draggingText||+new Date-wi<100))return void ls(e);if(!ir(t,e)&&!Ae(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!ii)){var o=Er("img",null,null,"position: fixed; left: 0; top: 0;");o.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ri&&(o.width=o.height=1,t.display.wrapper.appendChild(o),o._top=o.offsetTop),e.dataTransfer.setDragImage(o,0,0),ri&&o.parentNode.removeChild(o)}}function He(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,$r||x(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),$r&&x(t),St(t,100))}function Ue(t,e,o){(o?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,_(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function Ge(t,e){var o=e.wheelDeltaX,n=e.wheelDeltaY;null==o&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(o=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta);var r=t.display,i=r.scroller;if(o&&i.scrollWidth>i.clientWidth||n&&i.scrollHeight>i.clientHeight){if(n&&gi&&ei)t:for(var s=e.target,a=r.view;s!=i;s=s.parentNode)for(var l=0;l<a.length;l++)if(a[l].node==s){t.display.currentWheelTarget=s;break t}if(o&&!$r&&!ri&&null!=Ii)return n&&He(t,Math.max(0,Math.min(i.scrollTop+n*Ii,i.scrollHeight-i.clientHeight))),Ue(t,Math.max(0,Math.min(i.scrollLeft+o*Ii,i.scrollWidth-i.clientWidth))),ss(e),void(r.wheelStartX=null);if(n&&null!=Ii){var c=n*Ii,u=t.doc.scrollTop,g=u+r.wrapper.clientHeight;0>c?u=Math.max(0,u+c-50):g=Math.min(t.doc.height,g+c+50),x(t,{top:u,bottom:g})}20>Bi&&(null==r.wheelStartX?(r.wheelStartX=i.scrollLeft,r.wheelStartY=i.scrollTop,r.wheelDX=o,r.wheelDY=n,setTimeout(function(){if(null!=r.wheelStartX){var t=i.scrollLeft-r.wheelStartX,e=i.scrollTop-r.wheelStartY,o=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,o&&(Ii=(Ii*Bi+o)/(Bi+1),++Bi)}},200)):(r.wheelDX+=o,r.wheelDY+=n))}}function Ve(t,e,o){if("string"==typeof e&&!(e=Vi[e]))return!1;t.display.pollingFast&&ke(t)&&(t.display.pollingFast=!1);var n=t.display.shift,r=!1;try{we(t)&&(t.state.suppressEdits=!0),o&&(t.display.shift=!1),r=e(t)!=ds}finally{t.display.shift=n,t.state.suppressEdits=!1}return r}function We(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function ze(t,e){var o=wo(t.options.keyMap),n=o.auto;clearTimeout(Ai),n&&!qi(e)&&(Ai=setTimeout(function(){wo(t.options.keyMap)==o&&(t.options.keyMap=n.call?n.call(null,t):n,a(t))},50));var r=Xi(e,!0),i=!1;if(!r)return!1;var s=We(t);return i=e.shiftKey?zi("Shift-"+r,s,function(e){return Ve(t,e,!0)})||zi(r,s,function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?Ve(t,e):void 0}):zi(r,s,function(e){return Ve(t,e)}),i&&(ss(e),Et(t),nr(t,"keyHandled",t,r,e)),i}function qe(t,e,o){var n=zi("'"+o+"'",We(t),function(e){return Ve(t,e,!0)});return n&&(ss(e),Et(t),nr(t,"keyHandled",t,"'"+o+"'",e)),n}function Xe(t){var e=this;if(xe(e),!ir(e,t)){Zr&&11>ti&&27==t.keyCode&&(t.returnValue=!1);var o=t.keyCode;e.display.shift=16==o||t.shiftKey;var n=ze(e,t);ri&&(Ni=n?o:null,!n&&88==o&&!Ls&&(gi?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=o||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||Ke(e)}}function Ke(t){function e(t){18!=t.keyCode&&t.altKey||(wr(o,"CodeMirror-crosshair"),us(document,"keyup",e),us(document,"mouseover",e))}var o=t.display.lineDiv;Br(o,"CodeMirror-crosshair"),cs(document,"keyup",e),cs(document,"mouseover",e)}function Ye(t){16==t.keyCode&&(this.doc.sel.shift=!1),ir(this,t)}function $e(t){var e=this;if(!(ir(e,t)||t.ctrlKey&&!t.altKey||gi&&t.metaKey)){var o=t.keyCode,n=t.charCode;if(ri&&o==Ni)return Ni=null,void ss(t);if(!(ri&&(!t.which||t.which<10)||si)||!ze(e,t)){qe(e,t,String.fromCharCode(null==n?o:n))||(Zr&&ti>=9&&(e.display.inputHasSelection=null),Se(e))}}}function Qe(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(gs(t,"focus",t),t.state.focused=!0,Br(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(Te(t),ei&&setTimeout(yr(Te,t,!0),0))),Ee(t),Et(t))}function Je(t){t.state.focused&&(gs(t,"blur",t),t.state.focused=!1,wr(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150)}function Ze(t,e){function o(){if(null!=r.input.selectionStart){var e=t.somethingSelected(),o=r.input.value="​"+(e?r.input.value:"");r.prevInput=e?"":"​",r.input.selectionStart=1,r.input.selectionEnd=o.length,r.selForContextMenu=t.doc.sel}}function n(){if(r.inputDiv.style.position="relative",r.input.style.cssText=a,Zr&&9>ti&&(r.scrollbarV.scrollTop=r.scroller.scrollTop=s),Ee(t),null!=r.input.selectionStart){(!Zr||Zr&&9>ti)&&o();var e=0,n=function(){r.selForContextMenu==t.doc.sel&&0==r.input.selectionStart?ce(t,Vi.selectAll)(t):e++<10?r.detectingSelectAll=setTimeout(n,500):Te(t)};r.detectingSelectAll=setTimeout(n,200)}}if(!ir(t,e,"contextmenu")){var r=t.display;if(!Ae(r,e)&&!to(t,e)){var i=Ne(t,e),s=r.scroller.scrollTop;if(i&&!ri){t.options.resetSelectionOnContextMenu&&-1==t.doc.sel.contains(i)&&ce(t,ut)(t.doc,Q(i),fs);var a=r.input.style.cssText;if(r.inputDiv.style.position="absolute",r.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(Zr?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ei)var l=window.scrollY;if(Ce(t),ei&&window.scrollTo(null,l),Te(t),t.somethingSelected()||(r.input.value=r.prevInput=" "),r.selForContextMenu=t.doc.sel,clearTimeout(r.detectingSelectAll),Zr&&ti>=9&&o(),fi){ls(e);var c=function(){us(window,"mouseup",c),setTimeout(n,20)};cs(window,"mouseup",c)}else setTimeout(n,50)}}}}function to(t,e){return!!ar(t,"gutterContextMenu")&&je(t,e,"gutterContextMenu",!1,gs)}function eo(t,e){if(_i(t,e.from)<0)return t;if(_i(t,e.to)<=0)return Li(e);var o=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=Li(e).ch-e.to.ch),vi(o,n)}function oo(t,e){for(var o=[],n=0;n<t.sel.ranges.length;n++){var r=t.sel.ranges[n];o.push(new Y(eo(r.anchor,e),eo(r.head,e)))}return $(o,t.sel.primIndex)}function no(t,e,o){return t.line==e.line?vi(o.line,t.ch-e.ch+o.ch):vi(o.line+(t.line-e.line),t.ch)}function ro(t,e,o){for(var n=[],r=vi(t.first,0),i=r,s=0;s<e.length;s++){var a=e[s],l=no(a.from,r,i),c=no(Li(a),r,i);if(r=a.to,i=c,"around"==o){var u=t.sel.ranges[s],g=_i(u.head,u.anchor)<0;n[s]=new Y(g?c:l,g?l:c)}else n[s]=new Y(l,l)}return new K(n,t.sel.primIndex)}function io(t,e,o){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return o&&(n.update=function(e,o,n,r){e&&(this.from=Z(t,e)),o&&(this.to=Z(t,o)),n&&(this.text=n),void 0!==r&&(this.origin=r)}),gs(t,"beforeChange",t,n),t.cm&&gs(t.cm,"beforeChange",t.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function so(t,e,o){if(t.cm){if(!t.cm.curOp)return ce(t.cm,so)(t,e,o);if(t.cm.state.suppressEdits)return}if(!(ar(t,"beforeChange")||t.cm&&ar(t.cm,"beforeChange"))||(e=io(t,e,!0))){var n=mi&&!o&&Go(t,e.from,e.to);if(n)for(var r=n.length-1;r>=0;--r)ao(t,{from:n[r].from,to:n[r].to,text:r?[""]:e.text});else ao(t,e)}}function ao(t,e){if(1!=e.text.length||""!=e.text[0]||0!=_i(e.from,e.to)){var o=oo(t,e);Vn(t,e,o,t.cm?t.cm.curOp.id:NaN),uo(t,e,o,Fo(t,e));var n=[];In(t,function(t,o){o||-1!=pr(n,t.history)||(Zn(t.history,e),n.push(t.history)),uo(t,e,null,Fo(t,e))})}}function lo(t,e,o){if(!t.cm||!t.cm.state.suppressEdits){for(var n,r=t.history,i=t.sel,s="undo"==e?r.done:r.undone,a="undo"==e?r.undone:r.done,l=0;l<s.length&&(n=s[l],o?!n.ranges||n.equals(t.sel):n.ranges);l++);if(l!=s.length){for(r.lastOrigin=r.lastSelOrigin=null;n=s.pop(),n.ranges;){if(qn(n,a),o&&!n.equals(t.sel))return void ut(t,n,{clearRedo:!1});i=n}var c=[];qn(i,a),a.push({changes:c,generation:r.generation}),r.generation=n.generation||++r.maxGeneration;for(var u=ar(t,"beforeChange")||t.cm&&ar(t.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var g=n.changes[l];if(g.origin=e,u&&!io(t,g,!1))return void(s.length=0);c.push(Hn(t,g));var h=l?oo(t,g):hr(s);uo(t,g,h,Uo(t,g)),!l&&t.cm&&t.cm.scrollIntoView({from:g.from,to:Li(g)});var p=[];In(t,function(t,e){e||-1!=pr(p,t.history)||(Zn(t.history,g),p.push(t.history)),uo(t,g,null,Uo(t,g))})}}}}function co(t,e){if(0!=e&&(t.first+=e,t.sel=new K(dr(t.sel.ranges,function(t){return new Y(vi(t.anchor.line+e,t.anchor.ch),vi(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){de(t.cm,t.first,t.first-e,e);for(var o=t.cm.display,n=o.viewFrom;n<o.viewTo;n++)fe(t.cm,n,"gutter")}}function uo(t,e,o,n){if(t.cm&&!t.cm.curOp)return ce(t.cm,uo)(t,e,o,n);if(e.to.line<t.first)return void co(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);co(t,r),e={from:vi(t.first,0),to:vi(e.to.line+r,e.to.ch),text:[hr(e.text)],origin:e.origin}}var i=t.lastLine();e.to.line>i&&(e={from:e.from,to:vi(i,Nn(t,i).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Ln(t,e.from,e.to),o||(o=oo(t,e)),t.cm?go(t.cm,e,n):xn(t,e,n),gt(t,o,fs)}}function go(t,e,o){var n=t.doc,r=t.display,s=e.from,a=e.to,l=!1,c=s.line;t.options.lineWrapping||(c=On(Jo(Nn(n,s.line))),n.iter(c,a.line+1,function(t){return t==r.maxLine?(l=!0,!0):void 0})),n.sel.contains(e.from,e.to)>-1&&sr(t),xn(n,e,o,i(t)),t.options.lineWrapping||(n.iter(c,s.line+e.text.length,function(t){var e=h(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,s.line),St(t,400);var u=e.text.length-(a.line-s.line)-1;s.line!=a.line||1!=e.text.length||Cn(t.doc,e)?de(t,s.line,a.line+1,u):fe(t,s.line,"text");var g=ar(t,"changes"),p=ar(t,"change");if(p||g){var d={from:s,to:a,text:e.text,removed:e.removed,origin:e.origin};p&&nr(t,"change",t,d),g&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}function ho(t,e,o,n,r){if(n||(n=o),_i(n,o)<0){var i=n;n=o,o=i}"string"==typeof e&&(e=As(e)),so(t,{from:o,to:n,text:e,origin:r})}function po(t,e){var o=t.display,n=o.sizer.getBoundingClientRect(),r=null;if(e.top+n.top<0?r=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!li){var i=Er("div","​",null,"position: absolute; top: "+(e.top-o.viewOffset-xt(t.display))+"px; height: "+(e.bottom-e.top+ps)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(i),i.scrollIntoView(r),t.display.lineSpace.removeChild(i)}}function fo(t,e,o,n){null==n&&(n=0);for(var r=0;5>r;r++){var i=!1,s=qt(t,e),a=o&&o!=e?qt(t,o):s,l=yo(t,Math.min(s.left,a.left),Math.min(s.top,a.top)-n,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+n),c=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=l.scrollTop&&(He(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(i=!0)),null!=l.scrollLeft&&(Ue(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-u)>1&&(i=!0)),!i)return s}}function mo(t,e,o,n,r){var i=yo(t,e,o,n,r);null!=i.scrollTop&&He(t,i.scrollTop),null!=i.scrollLeft&&Ue(t,i.scrollLeft)}function yo(t,e,o,n,r){var i=t.display,s=Qt(t.display);0>o&&(o=0);var a=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:i.scroller.scrollTop,l=i.scroller.clientHeight-ps,c={};r-o>l&&(r=o+l);var u=t.doc.height+wt(i),g=s>o,h=r>u-s;if(a>o)c.scrollTop=g?0:o;else if(r>a+l){var p=Math.min(o,(h?u:r)-l);p!=a&&(c.scrollTop=p)}var d=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:i.scroller.scrollLeft,f=i.scroller.clientWidth-ps-i.gutters.offsetWidth,m=n-e>f;return m&&(n=e+f),10>e?c.scrollLeft=0:d>e?c.scrollLeft=Math.max(0,e-(m?0:10)):n>f+d-3&&(c.scrollLeft=n+(m?0:10)-f),c}function vo(t,e,o){(null!=e||null!=o)&&bo(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=o&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+o)}function _o(t){bo(t);var e=t.getCursor(),o=e,n=e;t.options.lineWrapping||(o=e.ch?vi(e.line,e.ch-1):e,n=vi(e.line,e.ch+1)),t.curOp.scrollToPos={from:o,to:n,margin:t.options.cursorScrollMargin,isCursor:!0}}function bo(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var o=Xt(t,e.from),n=Xt(t,e.to),r=yo(t,Math.min(o.left,n.left),Math.min(o.top,n.top)-e.margin,Math.max(o.right,n.right),Math.max(o.bottom,n.bottom)+e.margin);t.scrollTo(r.scrollLeft,r.scrollTop)}}function Eo(t,e,o,n){var r,i=t.doc;null==o&&(o="add"),"smart"==o&&(i.mode.indent?r=Ct(t,e):o="prev");var s=t.options.tabSize,a=Nn(i,e),l=vs(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==o&&((c=i.mode.indent(r,a.text.slice(u.length),a.text))==ds||c>150)){if(!n)return;o="prev"}}else c=0,o="not";"prev"==o?c=e>i.first?vs(Nn(i,e-1).text,null,s):0:"add"==o?c=l+t.options.indentUnit:"subtract"==o?c=l-t.options.indentUnit:"number"==typeof o&&(c=l+o),c=Math.max(0,c);var g="",h=0;if(t.options.indentWithTabs)for(var p=Math.floor(c/s);p;--p)h+=s,g+="\t";if(c>h&&(g+=gr(c-h)),g!=u)ho(i,g,vi(e,0),vi(e,u.length),"+input");else for(var p=0;p<i.sel.ranges.length;p++){var d=i.sel.ranges[p];if(d.head.line==e&&d.head.ch<u.length){var h=vi(e,u.length);st(i,p,new Y(h,h));break}}a.stateAfter=null}function So(t,e,o,n){var r=e,i=e;return"number"==typeof e?i=Nn(t,J(t,e)):r=On(e),null==r?null:(n(i,r)&&t.cm&&fe(t.cm,r,o),i)}function ko(t,e){for(var o=t.doc.sel.ranges,n=[],r=0;r<o.length;r++){for(var i=e(o[r]);n.length&&_i(i.from,hr(n).to)<=0;){var s=n.pop();if(_i(s.from,i.from)<0){i.from=s.from;break}}n.push(i)}le(t,function(){for(var e=n.length-1;e>=0;e--)ho(t.doc,"",n[e].from,n[e].to,"+delete");_o(t)})}function To(t,e,o,n,r){function i(){var e=a+o;return e<t.first||e>=t.first+t.size?g=!1:(a=e,u=Nn(t,e))}function s(t){var e=(r?Kr:Yr)(u,l,o,!0);if(null==e){if(t||!i())return g=!1;l=r?(0>o?Ur:Hr)(u):0>o?u.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,c=o,u=Nn(t,a),g=!0;if("char"==n)s();else if("column"==n)s(!0);else if("word"==n||"group"==n)for(var h=null,p="group"==n,d=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(0>o)||s(!f);f=!1){var m=u.text.charAt(l)||"\n",y=vr(m,d)?"w":p&&"\n"==m?"n":!p||/\s/.test(m)?null:"p";if(!p||f||y||(y="s"),h&&h!=y){0>o&&(o=1,s());break}if(y&&(h=y),o>0&&!s(!f))break}var v=ft(t,vi(a,l),c,!0);return g||(v.hitSide=!0),v}function Co(t,e,o,n){var r,i=t.doc,s=e.left;if("page"==n){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+o*(a-(0>o?1.5:.5)*Qt(t.display))}else"line"==n&&(r=o>0?e.bottom+3:e.top-3);for(;;){var l=Yt(t,s,r);if(!l.outside)break;if(0>o?0>=r:r>=i.height){l.hitSide=!0;break}r+=5*o}return l}function xo(e,o,n,r){t.defaults[e]=o,n&&(Di[e]=r?function(t,e,o){o!=Oi&&n(t,e,o)}:n)}function wo(t){return"string"==typeof t?Wi[t]:t}function Bo(t,e,o,n,r){if(n&&n.shared)return Io(t,e,o,n,r);if(t.cm&&!t.cm.curOp)return ce(t.cm,Bo)(t,e,o,n,r);var i=new Yi(t,r),s=_i(e,o);if(n&&mr(n,i,!1),s>0||0==s&&!1!==i.clearWhenEmpty)return i;if(i.replacedWith&&(i.collapsed=!0,i.widgetNode=Er("span",[i.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(i.widgetNode.ignoreEvents=!0),n.insertLeft&&(i.widgetNode.insertLeft=!0)),i.collapsed){if(Qo(t,e.line,e,o,i)||e.line!=o.line&&Qo(t,o.line,e,o,i))throw new Error("Inserting collapsed marker partially overlapping an existing one");yi=!0}i.addToHistory&&Vn(t,{from:e,to:o,origin:"markText"},t.sel,NaN);var a,l=e.line,c=t.cm;if(t.iter(l,o.line+1,function(t){c&&i.collapsed&&!c.options.lineWrapping&&Jo(t)==c.display.maxLine&&(a=!0),i.collapsed&&l!=e.line&&Dn(t,0),jo(t,new Ro(i,l==e.line?e.ch:null,l==o.line?o.ch:null)),++l}),i.collapsed&&t.iter(e.line,o.line+1,function(e){on(t,e)&&Dn(e,0)}),i.clearOnEnter&&cs(i,"beforeCursorEnter",function(){i.clear()}),i.readOnly&&(mi=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),i.collapsed&&(i.id=++$i,i.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),i.collapsed)de(c,e.line,o.line+1);else if(i.className||i.title||i.startStyle||i.endStyle)for(var u=e.line;u<=o.line;u++)fe(c,u,"text");i.atomic&&pt(c.doc),nr(c,"markerAdded",c,i)}return i}function Io(t,e,o,n,r){n=mr(n),n.shared=!1;var i=[Bo(t,e,o,n,r)],s=i[0],a=n.widgetNode;return In(t,function(t){a&&(n.widgetNode=a.cloneNode(!0)),i.push(Bo(t,Z(t,e),Z(t,o),n,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=hr(i)}),new Qi(i,s)}function Ao(t){return t.findMarks(vi(t.first,0),t.clipPos(vi(t.lastLine())),function(t){return t.parent})}function No(t,e){for(var o=0;o<e.length;o++){var n=e[o],r=n.find(),i=t.clipPos(r.from),s=t.clipPos(r.to);if(_i(i,s)){var a=Bo(t,i,s,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function Lo(t){for(var e=0;e<t.length;e++){var o=t[e],n=[o.primary.doc];In(o.primary.doc,function(t){n.push(t)});for(var r=0;r<o.markers.length;r++){var i=o.markers[r];-1==pr(n,i.doc)&&(i.parent=null,o.markers.splice(r--,1))}}}function Ro(t,e,o){this.marker=t,this.from=e,this.to=o}function Do(t,e){if(t)for(var o=0;o<t.length;++o){var n=t[o];if(n.marker==e)return n}}function Oo(t,e){for(var o,n=0;n<t.length;++n)t[n]!=e&&(o||(o=[])).push(t[n]);return o}function jo(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Mo(t,e,o){if(t)for(var n,r=0;r<t.length;++r){var i=t[r],s=i.marker,a=null==i.from||(s.inclusiveLeft?i.from<=e:i.from<e);if(a||i.from==e&&"bookmark"==s.type&&(!o||!i.marker.insertLeft)){var l=null==i.to||(s.inclusiveRight?i.to>=e:i.to>e);(n||(n=[])).push(new Ro(s,i.from,l?null:i.to))}}return n}function Po(t,e,o){if(t)for(var n,r=0;r<t.length;++r){var i=t[r],s=i.marker,a=null==i.to||(s.inclusiveRight?i.to>=e:i.to>e);if(a||i.from==e&&"bookmark"==s.type&&(!o||i.marker.insertLeft)){var l=null==i.from||(s.inclusiveLeft?i.from<=e:i.from<e);(n||(n=[])).push(new Ro(s,l?null:i.from-e,null==i.to?null:i.to-e))}}return n}function Fo(t,e){var o=et(t,e.from.line)&&Nn(t,e.from.line).markedSpans,n=et(t,e.to.line)&&Nn(t,e.to.line).markedSpans;if(!o&&!n)return null;var r=e.from.ch,i=e.to.ch,s=0==_i(e.from,e.to),a=Mo(o,r,s),l=Po(n,i,s),c=1==e.text.length,u=hr(e.text).length+(c?r:0);if(a)for(var g=0;g<a.length;++g){var h=a[g];if(null==h.to){var p=Do(l,h.marker);p?c&&(h.to=null==p.to?null:p.to+u):h.to=r}}if(l)for(var g=0;g<l.length;++g){var h=l[g];if(null!=h.to&&(h.to+=u),null==h.from){var p=Do(a,h.marker);p||(h.from=u,c&&(a||(a=[])).push(h))}else h.from+=u,c&&(a||(a=[])).push(h)}a&&(a=Ho(a)),l&&l!=a&&(l=Ho(l));var d=[a];if(!c){var f,m=e.text.length-2;if(m>0&&a)for(var g=0;g<a.length;++g)null==a[g].to&&(f||(f=[])).push(new Ro(a[g].marker,null,null));for(var g=0;m>g;++g)d.push(f);d.push(l)}return d}function Ho(t){for(var e=0;e<t.length;++e){var o=t[e];null!=o.from&&o.from==o.to&&!1!==o.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Uo(t,e){var o=Yn(t,e),n=Fo(t,e);if(!o)return n;if(!n)return o;for(var r=0;r<o.length;++r){var i=o[r],s=n[r];if(i&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<i.length;++c)if(i[c].marker==l.marker)continue t;i.push(l)}else s&&(o[r]=s)}return o}function Go(t,e,o){var n=null;if(t.iter(e.line,o.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var o=t.markedSpans[e].marker;!o.readOnly||n&&-1!=pr(n,o)||(n||(n=[])).push(o)}}),!n)return null;for(var r=[{from:e,to:o}],i=0;i<n.length;++i)for(var s=n[i],a=s.find(0),l=0;l<r.length;++l){var c=r[l];if(!(_i(c.to,a.from)<0||_i(c.from,a.to)>0)){var u=[l,1],g=_i(c.from,a.from),h=_i(c.to,a.to);(0>g||!s.inclusiveLeft&&!g)&&u.push({from:c.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function Vo(t){var e=t.markedSpans;if(e){for(var o=0;o<e.length;++o)e[o].marker.detachLine(t);t.markedSpans=null}}function Wo(t,e){if(e){for(var o=0;o<e.length;++o)e[o].marker.attachLine(t);t.markedSpans=e}}function zo(t){return t.inclusiveLeft?-1:0}function qo(t){return t.inclusiveRight?1:0}function Xo(t,e){var o=t.lines.length-e.lines.length;if(0!=o)return o;var n=t.find(),r=e.find(),i=_i(n.from,r.from)||zo(t)-zo(e);if(i)return-i;var s=_i(n.to,r.to)||qo(t)-qo(e);return s||e.id-t.id}function Ko(t,e){var o,n=yi&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)r=n[i],r.marker.collapsed&&null==(e?r.from:r.to)&&(!o||Xo(o,r.marker)<0)&&(o=r.marker);return o}function Yo(t){return Ko(t,!0)}function $o(t){return Ko(t,!1)}function Qo(t,e,o,n,r){var i=Nn(t,e),s=yi&&i.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=_i(c.from,o)||zo(l.marker)-zo(r),g=_i(c.to,n)||qo(l.marker)-qo(r);if(!(u>=0&&0>=g||0>=u&&g>=0)&&(0>=u&&(_i(c.to,o)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||u>=0&&(_i(c.from,n)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function Jo(t){for(var e;e=Yo(t);)t=e.find(-1,!0).line;return t}function Zo(t){for(var e,o;e=$o(t);)t=e.find(1,!0).line,(o||(o=[])).push(t);return o}function tn(t,e){var o=Nn(t,e),n=Jo(o);return o==n?e:On(n)}function en(t,e){if(e>t.lastLine())return e;var o,n=Nn(t,e);if(!on(t,n))return e;for(;o=$o(n);)n=o.find(1,!0).line;return On(n)+1}function on(t,e){var o=yi&&e.markedSpans;if(o)for(var n,r=0;r<o.length;++r)if(n=o[r],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&nn(t,e,n))return!0}}function nn(t,e,o){if(null==o.to){var n=o.marker.find(1,!0);return nn(t,n.line,Do(n.line.markedSpans,o.marker))}if(o.marker.inclusiveRight&&o.to==e.text.length)return!0;for(var r,i=0;i<e.markedSpans.length;++i)if(r=e.markedSpans[i],r.marker.collapsed&&!r.marker.widgetNode&&r.from==o.to&&(null==r.to||r.to!=o.from)&&(r.marker.inclusiveLeft||o.marker.inclusiveRight)&&nn(t,e,r))return!0}function rn(t,e,o){Mn(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&vo(t,null,o)}function sn(t){if(null!=t.height)return t.height;if(!Tr(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.getGutterElement().offsetWidth+"px;"),kr(t.cm.display.measure,Er("div",[t.node],null,e))}return t.height=t.node.offsetHeight}function an(t,e,o,n){var r=new Ji(t,o,n);return r.noHScroll&&(t.display.alignWidgets=!0),So(t.doc,e,"widget",function(e){var o=e.widgets||(e.widgets=[]);if(null==r.insertAt?o.push(r):o.splice(Math.min(o.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,!on(t.doc,e)){var n=Mn(e)<t.doc.scrollTop;Dn(e,e.height+sn(r)),n&&vo(t,null,r.height),t.curOp.forceUpdate=!0}return!0}),r}function ln(t,e,o,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Vo(t),Wo(t,o);var r=n?n(t):1;r!=t.height&&Dn(t,r)}function cn(t){t.parent=null,Vo(t)}function un(t,e){if(t)for(;;){var o=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!o)break;t=t.slice(0,o.index)+t.slice(o.index+o[0].length);var n=o[1]?"bgClass":"textClass";null==e[n]?e[n]=o[2]:new RegExp("(?:^|s)"+o[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+o[2])}return t}function gn(e,o){if(e.blankLine)return e.blankLine(o);if(e.innerMode){var n=t.innerMode(e,o);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function hn(t,e,o){for(var n=0;10>n;n++){var r=t.token(e,o);if(e.pos>e.start)return r}throw new Error("Mode "+t.name+" failed to advance stream.")}function pn(e,o,n,r,i,s,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var c,u=0,g=null,h=new Ki(o,e.options.tabSize);for(""==o&&un(gn(n,r),s);!h.eol();){if(h.pos>e.options.maxHighlightLength?(l=!1,a&&mn(e,o,r,h.pos),h.pos=o.length,c=null):c=un(hn(n,h,r),s),e.options.addModeClass){var p=t.innerMode(n,r).mode.name;p&&(c="m-"+(c?p+" "+c:p))}l&&g==c||(u<h.start&&i(h.start,g),u=h.start,g=c),h.start=h.pos}for(;u<h.pos;){var d=Math.min(h.pos,u+5e4);i(d,g),u=d}}function dn(t,e,o,n){var r=[t.state.modeGen],i={};pn(t,e.text,t.doc.mode,o,function(t,e){r.push(t,e)},i,n);for(var s=0;s<t.state.overlays.length;++s){var a=t.state.overlays[s],l=1,c=0;pn(t,e.text,a.mode,!0,function(t,e){for(var o=l;t>c;){var n=r[l];n>t&&r.splice(l,1,t,r[l+1],n),l+=2,c=Math.min(t,n)}if(e)if(a.opaque)r.splice(o,l-o,t,"cm-overlay "+e),l=o+2;else for(;l>o;o+=2){var i=r[o+1];r[o+1]=(i?i+" ":"")+"cm-overlay "+e}},i)}return{styles:r,classes:i.bgClass||i.textClass?i:null}}function fn(t,e){if(!e.styles||e.styles[0]!=t.state.modeGen){var o=dn(t,e,e.stateAfter=Ct(t,On(e)));e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null)}return e.styles}function mn(t,e,o,n){var r=t.doc.mode,i=new Ki(e,t.options.tabSize);for(i.start=i.pos=n||0,""==e&&gn(r,o);!i.eol()&&i.pos<=t.options.maxHighlightLength;)hn(r,i,o),i.start=i.pos}function yn(t,e){if(!t||/^\s*$/.test(t))return null;var o=e.addModeClass?es:ts;return o[t]||(o[t]=t.replace(/\S+/g,"cm-$&"))}function vn(t,e){var o=Er("span",null,null,ei?"padding-right: .1px":null),n={pre:Er("pre",[o]),content:o,col:0,pos:0,cm:t};e.measure={};for(var r=0;r<=(e.rest?e.rest.length:0);r++){var i,s=r?e.rest[r-1]:e.line;n.pos=0,n.addToken=bn,(Zr||ei)&&t.getOption("lineWrapping")&&(n.addToken=En(n.addToken)),Or(t.display.measure)&&(i=Pn(s))&&(n.addToken=Sn(n.addToken,i)),n.map=[],Tn(s,n,fn(t,s)),s.styleClasses&&(s.styleClasses.bgClass&&(n.bgClass=Ir(s.styleClasses.bgClass,n.bgClass||"")),s.styleClasses.textClass&&(n.textClass=Ir(s.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Dr(t.display.measure))),0==r?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return gs(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=Ir(n.pre.className,n.textClass||"")),n}function _n(t){var e=Er("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}function bn(t,e,o,n,r,i){if(e){var s=t.cm.options.specialChars,a=!1;if(s.test(e))for(var l=document.createDocumentFragment(),c=0;;){s.lastIndex=c;var u=s.exec(e),g=u?u.index-c:e.length-c;if(g){var h=document.createTextNode(e.slice(c,c+g));Zr&&9>ti?l.appendChild(Er("span",[h])):l.appendChild(h),t.map.push(t.pos,t.pos+g,h),t.col+=g,t.pos+=g}if(!u)break;if(c+=g+1,"\t"==u[0]){var p=t.cm.options.tabSize,d=p-t.col%p,h=l.appendChild(Er("span",gr(d),"cm-tab"));t.col+=d}else{var h=t.cm.options.specialCharPlaceholder(u[0]);Zr&&9>ti?l.appendChild(Er("span",[h])):l.appendChild(h),t.col+=1}t.map.push(t.pos,t.pos+1,h),t.pos++}else{t.col+=e.length;var l=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,l),Zr&&9>ti&&(a=!0),t.pos+=e.length}if(o||n||r||a){var f=o||"";n&&(f+=n),r&&(f+=r);var m=Er("span",[l],f);return i&&(m.title=i),t.content.appendChild(m)}t.content.appendChild(l)}}function En(t){function e(t){for(var e=" ",o=0;o<t.length-2;++o)e+=o%2?" ":" ";return e+=" "}return function(o,n,r,i,s,a){t(o,n.replace(/ {3,}/g,e),r,i,s,a)}}function Sn(t,e){return function(o,n,r,i,s,a){r=r?r+" cm-force-border":"cm-force-border";for(var l=o.pos,c=l+n.length;;){for(var u=0;u<e.length;u++){var g=e[u];if(g.to>l&&g.from<=l)break}if(g.to>=c)return t(o,n,r,i,s,a);t(o,n.slice(0,g.to-l),r,i,null,a),i=null,n=n.slice(g.to-l),l=g.to}}}function kn(t,e,o,n){var r=!n&&o.widgetNode;r&&(t.map.push(t.pos,t.pos+e,r),t.content.appendChild(r)),t.pos+=e}function Tn(t,e,o){var n=t.markedSpans,r=t.text,i=0;if(n)for(var s,a,l,c,u,g,h=r.length,p=0,d=1,f="",m=0;;){if(m==p){a=l=c=u="",g=null,m=1/0;for(var y=[],v=0;v<n.length;++v){var _=n[v],b=_.marker;_.from<=p&&(null==_.to||_.to>p)?(null!=_.to&&m>_.to&&(m=_.to,l=""),b.className&&(a+=" "+b.className),b.startStyle&&_.from==p&&(c+=" "+b.startStyle),b.endStyle&&_.to==m&&(l+=" "+b.endStyle),b.title&&!u&&(u=b.title),b.collapsed&&(!g||Xo(g.marker,b)<0)&&(g=_)):_.from>p&&m>_.from&&(m=_.from),"bookmark"==b.type&&_.from==p&&b.widgetNode&&y.push(b)}if(g&&(g.from||0)==p&&(kn(e,(null==g.to?h+1:g.to)-p,g.marker,null==g.from),null==g.to))return;if(!g&&y.length)for(var v=0;v<y.length;++v)kn(e,0,y[v])}if(p>=h)break;for(var E=Math.min(h,m);;){if(f){var S=p+f.length;if(!g){var k=S>E?f.slice(0,E-p):f;e.addToken(e,k,s?s+a:a,c,p+k.length==m?l:"",u)}if(S>=E){f=f.slice(E-p),p=E;break}p=S,c=""}f=r.slice(i,i=o[d++]),s=yn(o[d++],e.cm.options)}}else for(var d=1;d<o.length;d+=2)e.addToken(e,r.slice(i,i=o[d]),yn(o[d+1],e.cm.options))}function Cn(t,e){return 0==e.from.ch&&0==e.to.ch&&""==hr(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function xn(t,e,o,n){function r(t){return o?o[t]:null}function i(t,o,r){ln(t,o,r,n),nr(t,"change",t,e)}var s=e.from,a=e.to,l=e.text,c=Nn(t,s.line),u=Nn(t,a.line),g=hr(l),h=r(l.length-1),p=a.line-s.line;if(Cn(t,e)){for(var d=0,f=[];d<l.length-1;++d)f.push(new Zi(l[d],r(d),n));i(u,u.text,h),p&&t.remove(s.line,p),f.length&&t.insert(s.line,f)}else if(c==u)if(1==l.length)i(c,c.text.slice(0,s.ch)+g+c.text.slice(a.ch),h);else{for(var f=[],d=1;d<l.length-1;++d)f.push(new Zi(l[d],r(d),n));f.push(new Zi(g+c.text.slice(a.ch),h,n)),i(c,c.text.slice(0,s.ch)+l[0],r(0)),t.insert(s.line+1,f)}else if(1==l.length)i(c,c.text.slice(0,s.ch)+l[0]+u.text.slice(a.ch),r(0)),t.remove(s.line+1,p);else{i(c,c.text.slice(0,s.ch)+l[0],r(0)),i(u,g+u.text.slice(a.ch),h);for(var d=1,f=[];d<l.length-1;++d)f.push(new Zi(l[d],r(d),n));p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,f)}nr(t,"change",t,e)}function wn(t){this.lines=t,this.parent=null;for(var e=0,o=0;e<t.length;++e)t[e].parent=this,o+=t[e].height;this.height=o}function Bn(t){this.children=t;for(var e=0,o=0,n=0;n<t.length;++n){var r=t[n];e+=r.chunkSize(),o+=r.height,r.parent=this}this.size=e,this.height=o,this.parent=null}function In(t,e,o){function n(t,r,i){if(t.linked)for(var s=0;s<t.linked.length;++s){var a=t.linked[s];if(a.doc!=r){var l=i&&a.sharedHist;(!o||l)&&(e(a.doc,l),n(a.doc,t,l))}}}n(t,null,!0)}function An(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,s(t),o(t),t.options.lineWrapping||p(t),t.options.mode=e.modeOption,de(t)}function Nn(t,e){if(0>(e-=t.first)||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var o=t;!o.lines;)for(var n=0;;++n){var r=o.children[n],i=r.chunkSize();if(i>e){o=r;break}e-=i}return o.lines[e]}function Ln(t,e,o){var n=[],r=e.line;return t.iter(e.line,o.line+1,function(t){var i=t.text;r==o.line&&(i=i.slice(0,o.ch)),r==e.line&&(i=i.slice(e.ch)),n.push(i),++r}),n}function Rn(t,e,o){var n=[];return t.iter(e,o,function(t){n.push(t.text)}),n}function Dn(t,e){var o=e-t.height;if(o)for(var n=t;n;n=n.parent)n.height+=o}function On(t){if(null==t.parent)return null;for(var e=t.parent,o=pr(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var r=0;n.children[r]!=e;++r)o+=n.children[r].chunkSize();return o+e.first}function jn(t,e){var o=t.first;t:do{for(var n=0;n<t.children.length;++n){var r=t.children[n],i=r.height;if(i>e){t=r;continue t}e-=i,o+=r.chunkSize()}return o}while(!t.lines);for(var n=0;n<t.lines.length;++n){var s=t.lines[n],a=s.height;if(a>e)break;e-=a}return o+n}function Mn(t){t=Jo(t);for(var e=0,o=t.parent,n=0;n<o.lines.length;++n){var r=o.lines[n];if(r==t)break;e+=r.height}for(var i=o.parent;i;o=i,i=o.parent)for(var n=0;n<i.children.length;++n){var s=i.children[n];if(s==o)break;e+=s.height}return e}function Pn(t){var e=t.order;return null==e&&(e=t.order=js(t.text)),e}function Fn(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Hn(t,e){var o={from:z(e.from),to:Li(e),text:Ln(t,e.from,e.to)};return Xn(t,o,e.from.line,e.to.line+1),In(t,function(t){Xn(t,o,e.from.line,e.to.line+1)},!0),o}function Un(t){for(;t.length;){if(!hr(t).ranges)break;t.pop()}}function Gn(t,e){return e?(Un(t.done),hr(t.done)):t.done.length&&!hr(t.done).ranges?hr(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),hr(t.done)):void 0}function Vn(t,e,o,n){var r=t.history;r.undone.length=0;var i,s=+new Date;if((r.lastOp==n||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastModTime>s-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(i=Gn(r,r.lastOp==n))){var a=hr(i.changes);0==_i(e.from,e.to)&&0==_i(e.from,a.to)?a.to=Li(e):i.changes.push(Hn(t,e))}else{var l=hr(r.done);for(l&&l.ranges||qn(t.sel,r.done),i={changes:[Hn(t,e)],generation:r.generation},r.done.push(i);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(o),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=e.origin,a||gs(t,"historyAdded")}function Wn(t,e,o,n){var r=e.charAt(0);return"*"==r||"+"==r&&o.ranges.length==n.ranges.length&&o.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function zn(t,e,o,n){var r=t.history,i=n&&n.origin;o==r.lastSelOp||i&&r.lastSelOrigin==i&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==i||Wn(t,i,hr(r.done),e))?r.done[r.done.length-1]=e:qn(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=i,r.lastSelOp=o,n&&!1!==n.clearRedo&&Un(r.undone)}function qn(t,e){var o=hr(e);o&&o.ranges&&o.equals(t)||e.push(t)}function Xn(t,e,o,n){var r=e["spans_"+t.id],i=0;t.iter(Math.max(t.first,o),Math.min(t.first+t.size,n),function(o){o.markedSpans&&((r||(r=e["spans_"+t.id]={}))[i]=o.markedSpans),++i})}function Kn(t){if(!t)return null;for(var e,o=0;o<t.length;++o)t[o].marker.explicitlyCleared?e||(e=t.slice(0,o)):e&&e.push(t[o]);return e?e.length?e:null:t}function Yn(t,e){var o=e["spans_"+t.id];if(!o)return null;for(var n=0,r=[];n<e.text.length;++n)r.push(Kn(o[n]));return r}function $n(t,e,o){for(var n=0,r=[];n<t.length;++n){var i=t[n];if(i.ranges)r.push(o?K.prototype.deepCopy.call(i):i);else{var s=i.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c,u=s[l];if(a.push({from:u.from,to:u.to,text:u.text}),e)for(var g in u)(c=g.match(/^spans_(\d+)$/))&&pr(e,Number(c[1]))>-1&&(hr(a)[g]=u[g],delete u[g])}}}return r}function Qn(t,e,o,n){o<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function Jn(t,e,o,n){for(var r=0;r<t.length;++r){var i=t[r],s=!0;if(i.ranges){i.copied||(i=t[r]=i.deepCopy(),i.copied=!0);for(var a=0;a<i.ranges.length;a++)Qn(i.ranges[a].anchor,e,o,n),Qn(i.ranges[a].head,e,o,n)}else{for(var a=0;a<i.changes.length;++a){var l=i.changes[a];if(o<l.from.line)l.from=vi(l.from.line+n,l.from.ch),l.to=vi(l.to.line+n,l.to.ch);else if(e<=l.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function Zn(t,e){var o=e.from.line,n=e.to.line,r=e.text.length-(n-o)-1;Jn(t.done,o,n,r),Jn(t.undone,o,n,r)}function tr(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function er(t){return t.target||t.srcElement}function or(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),gi&&t.ctrlKey&&1==e&&(e=3),e}function nr(t,e){var o=t._handlers&&t._handlers[e];if(o){var n,r=Array.prototype.slice.call(arguments,2);Ti?n=Ti.delayedCallbacks:hs?n=hs:(n=hs=[],setTimeout(rr,0));for(var i=0;i<o.length;++i)n.push(function(t){return function(){t.apply(null,r)}}(o[i]))}}function rr(){var t=hs;hs=null;for(var e=0;e<t.length;++e)t[e]()}function ir(t,e,o){return gs(t,o||e.type,t,e),tr(e)||e.codemirrorIgnore}function sr(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var o=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)-1==pr(o,e[n])&&o.push(e[n])}function ar(t,e){var o=t._handlers&&t._handlers[e];return o&&o.length>0}function lr(t){t.prototype.on=function(t,e){cs(this,t,e)},t.prototype.off=function(t,e){us(this,t,e)}}function cr(){this.id=null}function ur(t,e,o){for(var n=0,r=0;;){var i=t.indexOf("\t",n);-1==i&&(i=t.length);var s=i-n;if(i==t.length||r+s>=e)return n+Math.min(s,e-r);if(r+=i-n,r+=o-r%o,n=i+1,r>=e)return n}}function gr(t){for(;_s.length<=t;)_s.push(hr(_s)+" ");return _s[t]}function hr(t){return t[t.length-1]}function pr(t,e){for(var o=0;o<t.length;++o)if(t[o]==e)return o;return-1}function dr(t,e){for(var o=[],n=0;n<t.length;n++)o[n]=e(t[n],n);return o}function fr(t,e){var o;if(Object.create)o=Object.create(t);else{var n=function(){};n.prototype=t,o=new n}return e&&mr(e,o),o}function mr(t,e,o){e||(e={});for(var n in t)!t.hasOwnProperty(n)||!1===o&&e.hasOwnProperty(n)||(e[n]=t[n]);return e}function yr(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function vr(t,e){return e?!!(e.source.indexOf("\\w")>-1&&ks(t))||e.test(t):ks(t)}function _r(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function br(t){return t.charCodeAt(0)>=768&&Ts.test(t)}function Er(t,e,o,n){var r=document.createElement(t);if(o&&(r.className=o),n&&(r.style.cssText=n),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var i=0;i<e.length;++i)r.appendChild(e[i]);return r}function Sr(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function kr(t,e){return Sr(t).appendChild(e)}function Tr(t,e){if(t.contains)return t.contains(e);for(;e=e.parentNode;)if(e==t)return!0}function Cr(){return document.activeElement}function xr(t){return new RegExp("\\b"+t+"\\b\\s*")}function wr(t,e){var o=xr(e);o.test(t.className)&&(t.className=t.className.replace(o,""))}function Br(t,e){xr(e).test(t.className)||(t.className+=" "+e)}function Ir(t,e){for(var o=t.split(" "),n=0;n<o.length;n++)o[n]&&!xr(o[n]).test(e)&&(e+=" "+o[n]);return e}function Ar(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),o=0;o<e.length;o++){var n=e[o].CodeMirror;n&&t(n)}}function Nr(){Bs||(Lr(),Bs=!0)}function Lr(){var t;cs(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Cs=null,Ar(Ie)},100))}),cs(window,"blur",function(){Ar(Je)})}function Rr(t){if(null!=Cs)return Cs;var e=Er("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return kr(t,e),e.offsetWidth&&(Cs=e.offsetHeight-e.clientHeight),Cs||0}function Dr(t){if(null==xs){var e=Er("span","​");kr(t,Er("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(xs=e.offsetWidth<=1&&e.offsetHeight>2&&!(Zr&&8>ti))}return xs?Er("span","​"):Er("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Or(t){if(null!=ws)return ws;var e=kr(t,document.createTextNode("AخA")),o=Es(e,0,1).getBoundingClientRect();if(!o||o.left==o.right)return!1;var n=Es(e,1,2).getBoundingClientRect();return ws=n.right-o.right<3}function jr(t){if(null!=Rs)return Rs;var e=kr(t,Er("span","x")),o=e.getBoundingClientRect(),n=Es(e,0,1).getBoundingClientRect();return Rs=Math.abs(o.left-n.left)>1}function Mr(t,e,o,n){if(!t)return n(e,o,"ltr");for(var r=!1,i=0;i<t.length;++i){var s=t[i];(s.from<o&&s.to>e||e==o&&s.to==e)&&(n(Math.max(s.from,e),Math.min(s.to,o),1==s.level?"rtl":"ltr"),r=!0)}r||n(e,o,"ltr")}function Pr(t){return t.level%2?t.to:t.from}function Fr(t){return t.level%2?t.from:t.to}function Hr(t){var e=Pn(t);return e?Pr(e[0]):0}function Ur(t){var e=Pn(t);return e?Fr(hr(e)):t.text.length}function Gr(t,e){var o=Nn(t.doc,e),n=Jo(o);n!=o&&(e=On(n));var r=Pn(n),i=r?r[0].level%2?Ur(n):Hr(n):0;return vi(e,i)}function Vr(t,e){for(var o,n=Nn(t.doc,e);o=$o(n);)n=o.find(1,!0).line,e=null;var r=Pn(n),i=r?r[0].level%2?Hr(n):Ur(n):n.text.length;return vi(null==e?On(n):e,i)}function Wr(t,e){var o=Gr(t,e.line),n=Nn(t.doc,o.line),r=Pn(n);if(!r||0==r[0].level){var i=Math.max(0,n.text.search(/\S/)),s=e.line==o.line&&e.ch<=i&&e.ch;return vi(o.line,s?0:i)}return o}function zr(t,e,o){var n=t[0].level;return e==n||o!=n&&o>e}function qr(t,e){Os=null;for(var o,n=0;n<t.length;++n){var r=t[n];if(r.from<e&&r.to>e)return n;if(r.from==e||r.to==e){if(null!=o)return zr(t,r.level,t[o].level)?(r.from!=r.to&&(Os=o),n):(r.from!=r.to&&(Os=n),o);o=n}}return o}function Xr(t,e,o,n){if(!n)return e+o;do{e+=o}while(e>0&&br(t.text.charAt(e)));return e}function Kr(t,e,o,n){var r=Pn(t);if(!r)return Yr(t,e,o,n);for(var i=qr(r,e),s=r[i],a=Xr(t,e,s.level%2?-o:o,n);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return qr(r,a)==i?a:(s=r[i+=o],o>0==s.level%2?s.to:s.from);if(!(s=r[i+=o]))return null;a=o>0==s.level%2?Xr(t,s.to,-1,n):Xr(t,s.from,1,n)}}function Yr(t,e,o,n){var r=e+o;if(n)for(;r>0&&br(t.text.charAt(r));)r+=o;return 0>r||r>t.text.length?null:r}var $r=/gecko\/\d/i.test(navigator.userAgent),Qr=/MSIE \d/.test(navigator.userAgent),Jr=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Zr=Qr||Jr,ti=Zr&&(Qr?document.documentMode||6:Jr[1]),ei=/WebKit\//.test(navigator.userAgent),oi=ei&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ni=/Chrome\//.test(navigator.userAgent),ri=/Opera\//.test(navigator.userAgent),ii=/Apple Computer/.test(navigator.vendor),si=/KHTML\//.test(navigator.userAgent),ai=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),li=/PhantomJS/.test(navigator.userAgent),ci=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ui=ci||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),gi=ci||/Mac/.test(navigator.platform),hi=/win/i.test(navigator.platform),pi=ri&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);pi&&(pi=Number(pi[1])),pi&&pi>=15&&(ri=!1,ei=!0);var di=gi&&(oi||ri&&(null==pi||12.11>pi)),fi=$r||Zr&&ti>=9,mi=!1,yi=!1,vi=t.Pos=function(t,e){return this instanceof vi?(this.line=t,void(this.ch=e)):new vi(t,e)},_i=t.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch};K.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var o=this.ranges[e],n=t.ranges[e];if(0!=_i(o.anchor,n.anchor)||0!=_i(o.head,n.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new Y(z(this.ranges[e].anchor),z(this.ranges[e].head));return new K(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var o=0;o<this.ranges.length;o++){var n=this.ranges[o];if(_i(e,n.from())>=0&&_i(t,n.to())<=0)return o}return-1}},Y.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return q(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var bi,Ei,Si,ki={left:0,right:0,top:0,bottom:0},Ti=null,Ci=0,xi=null,wi=0,Bi=0,Ii=null;Zr?Ii=-.53:$r?Ii=15:ni?Ii=-.7:ii&&(Ii=-1/3);var Ai,Ni=null,Li=t.changeEnd=function(t){return t.text?vi(t.from.line+t.text.length-1,hr(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.prototype={constructor:t,focus:function(){window.focus(),Ce(this),Se(this)},setOption:function(t,e){var o=this.options,n=o[t];(o[t]!=e||"mode"==t)&&(o[t]=e,Di.hasOwnProperty(t)&&ce(this,Di[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,o=0;o<e.length;++o)if(e[o]==t||"string"!=typeof e[o]&&e[o].name==t)return e.splice(o,1),!0},addOverlay:ue(function(e,o){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:o&&o.opaque}),this.state.modeGen++,de(this)}),removeOverlay:ue(function(t){for(var e=this.state.overlays,o=0;o<e.length;++o){var n=e[o].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(o,1),this.state.modeGen++,void de(this)}}),indentLine:ue(function(t,e,o){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),et(this.doc,t)&&Eo(this,t,e,o)}),indentSelection:ue(function(t){for(var e=this.doc.sel.ranges,o=-1,n=0;n<e.length;n++){var r=e[n];if(r.empty())r.head.line>o&&(Eo(this,r.head.line,t,!0),o=r.head.line,n==this.doc.sel.primIndex&&_o(this));else{var i=r.from(),s=r.to(),a=Math.max(o,i.line);o=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;o>l;++l)Eo(this,l,t);var c=this.doc.sel.ranges;0==i.ch&&e.length==c.length&&c[n].from().ch>0&&st(this.doc,n,new Y(i,c[n].to()),fs)}}}),getTokenAt:function(t,e){var o=this.doc;t=Z(o,t);for(var n=Ct(this,t.line,e),r=this.doc.mode,i=Nn(o,t.line),s=new Ki(i.text,this.options.tabSize);s.pos<t.ch&&!s.eol();){s.start=s.pos;var a=hn(r,s,n)}return{start:s.start,end:s.pos,string:s.current(),type:a||null,state:n}},getTokenTypeAt:function(t){t=Z(this.doc,t);var e,o=fn(this,Nn(this.doc,t.line)),n=0,r=(o.length-1)/2,i=t.ch;if(0==i)e=o[2];else for(;;){var s=n+r>>1;if((s?o[2*s-1]:0)>=i)r=s;else{if(!(o[2*s+1]<i)){e=o[2*s+2];break}n=s+1}}var a=e?e.indexOf("cm-overlay "):-1;return 0>a?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var o=this.doc.mode;return o.innerMode?t.innerMode(o,this.getTokenAt(e).state).mode:o},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var o=[];if(!Hi.hasOwnProperty(e))return Hi;var n=Hi[e],r=this.getModeAt(t);if("string"==typeof r[e])n[r[e]]&&o.push(n[r[e]]);else if(r[e])for(var i=0;i<r[e].length;i++){var s=n[r[e][i]];s&&o.push(s)}else r.helperType&&n[r.helperType]?o.push(n[r.helperType]):n[r.name]&&o.push(n[r.name]);for(var i=0;i<n._global.length;i++){var a=n._global[i];a.pred(r,this)&&-1==pr(o,a.val)&&o.push(a.val)}return o},getStateAfter:function(t,e){var o=this.doc;return t=J(o,null==t?o.first+o.size-1:t),Ct(this,t+1,e)},cursorCoords:function(t,e){var o,n=this.doc.sel.primary();return o=null==t?n.head:"object"==typeof t?Z(this.doc,t):t?n.from():n.to(),qt(this,o,e||"page")},charCoords:function(t,e){return zt(this,Z(this.doc,t),e||"page")},coordsChar:function(t,e){return t=Wt(this,t,e||"page"),Yt(this,t.left,t.top)},lineAtHeight:function(t,e){return t=Wt(this,{top:t,left:0},e||"page").top,jn(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var o=!1,n=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>n&&(t=n,o=!0);var r=Nn(this.doc,t);return Vt(this,r,{top:0,left:0},e||"page").top+(o?this.doc.height-Mn(r):0)},defaultTextHeight:function(){return Qt(this.display)},defaultCharWidth:function(){return Jt(this.display)},setGutterMarker:ue(function(t,e,o){return So(this.doc,t,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=o,!o&&_r(n)&&(t.gutterMarkers=null),!0})}),clearGutter:ue(function(t){var e=this,o=e.doc,n=o.first;o.iter(function(o){o.gutterMarkers&&o.gutterMarkers[t]&&(o.gutterMarkers[t]=null,fe(e,n,"gutter"),_r(o.gutterMarkers)&&(o.gutterMarkers=null)),++n})}),addLineWidget:ue(function(t,e,o){return an(this,t,e,o)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!et(this.doc,t))return null;var e=t;if(!(t=Nn(this.doc,t)))return null}else{var e=On(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,o,n,r){var i=this.display;t=qt(this,Z(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",i.sizer.appendChild(e),"over"==n)s=t.top;else if("above"==n||"near"==n){var l=Math.max(i.wrapper.clientHeight,this.doc.height),c=Math.max(i.sizer.clientWidth,i.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(a=i.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(i.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),o&&mo(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:ue(Xe),triggerOnKeyPress:ue($e),triggerOnKeyUp:Ye,execCommand:function(t){return Vi.hasOwnProperty(t)?Vi[t](this):void 0},findPosH:function(t,e,o,n){var r=1;0>e&&(r=-1,e=-e);for(var i=0,s=Z(this.doc,t);e>i&&(s=To(this.doc,s,r,o,n),!s.hitSide);++i);return s},moveH:ue(function(t,e){var o=this;o.extendSelectionsBy(function(n){return o.display.shift||o.doc.extend||n.empty()?To(o.doc,n.head,t,e,o.options.rtlMoveVisually):0>t?n.from():n.to()},ys)}),deleteH:ue(function(t,e){var o=this.doc.sel,n=this.doc;o.somethingSelected()?n.replaceSelection("",null,"+delete"):ko(this,function(o){var r=To(n,o.head,t,e,!1);return 0>t?{from:r,to:o.head}:{from:o.head,to:r}})}),findPosV:function(t,e,o,n){var r=1,i=n;0>e&&(r=-1,e=-e);for(var s=0,a=Z(this.doc,t);e>s;++s){var l=qt(this,a,"div");if(null==i?i=l.left:l.left=i,a=Co(this,l,r,o),a.hitSide)break}return a},moveV:ue(function(t,e){var o=this,n=this.doc,r=[],i=!o.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(s){if(i)return 0>t?s.from():s.to();var a=qt(o,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Co(o,a,t,e);return"page"==e&&s==n.sel.primary()&&vo(o,null,zt(o,l,"div").top-a.top),l},ys),r.length)for(var s=0;s<n.sel.ranges.length;s++)n.sel.ranges[s].goalColumn=r[s]}),findWordAt:function(t){var e=this.doc,o=Nn(e,t.line).text,n=t.ch,r=t.ch;if(o){var i=this.getHelper(t,"wordChars");(t.xRel<0||r==o.length)&&n?--n:++r;for(var s=o.charAt(n),a=vr(s,i)?function(t){return vr(t,i)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!vr(t)};n>0&&a(o.charAt(n-1));)--n;for(;r<o.length&&a(o.charAt(r));)++r}return new Y(vi(t.line,n),vi(t.line,r))},toggleOverwrite:function(t){(null==t||t!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Br(this.display.cursorDiv,"CodeMirror-overwrite"):wr(this.display.cursorDiv,"CodeMirror-overwrite"),gs(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Cr()==this.display.input},scrollTo:ue(function(t,e){(null!=t||null!=e)&&bo(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller,e=ps;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:ue(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:vi(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)bo(this),this.curOp.scrollToPos=t;else{var o=yo(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(o.scrollLeft,o.scrollTop)}}),setSize:ue(function(t,e){function o(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var n=this;null!=t&&(n.display.wrapper.style.width=o(t)),null!=e&&(n.display.wrapper.style.height=o(e)),n.options.lineWrapping&&Ft(this);var r=n.display.viewFrom;n.doc.iter(r,n.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){fe(n,r,"widget");break}++r}),n.curOp.forceUpdate=!0,gs(n,"refresh",this)}),operation:function(t){return le(this,t)},refresh:ue(function(){var t=this.display.cachedTextHeight;de(this),this.curOp.forceUpdate=!0,Ht(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),g(this),(null==t||Math.abs(t-Qt(this.display))>.5)&&s(this),gs(this,"refresh",this)}),swapDoc:ue(function(t){var e=this.doc;return e.cm=null,An(this,t),Ht(this),Te(this),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,nr(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},lr(t);var Ri=t.defaults={},Di=t.optionHandlers={},Oi=t.Init={toString:function(){return"CodeMirror.Init"}};xo("value","",function(t,e){t.setValue(e)},!0),xo("mode",null,function(t,e){t.doc.modeOption=e,o(t)},!0),xo("indentUnit",2,o,!0),xo("indentWithTabs",!1),xo("smartIndent",!0),xo("tabSize",4,function(t){n(t),Ht(t),de(t)},!0),xo("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()},!0),xo("specialCharPlaceholder",_n,function(t){t.refresh()},!0),xo("electricChars",!0),xo("rtlMoveVisually",!hi),xo("wholeLineUpdateBefore",!0),xo("theme","default",function(t){l(t),c(t)},!0),xo("keyMap","default",a),xo("extraKeys",null),xo("lineWrapping",!1,r,!0),xo("gutters",[],function(t){d(t.options),c(t)},!0),xo("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?S(t.display)+"px":"0",t.refresh()},!0),xo("coverGutterNextToScrollbar",!1,y,!0),xo("lineNumbers",!1,function(t){d(t.options),c(t)},!0),xo("firstLineNumber",1,c,!0),xo("lineNumberFormatter",function(t){return t},c,!0),xo("showCursorWhenSelecting",!1,vt,!0),xo("resetSelectionOnContextMenu",!0),xo("readOnly",!1,function(t,e){"nocursor"==e?(Je(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||Te(t))}),xo("disableInput",!1,function(t,e){e||Te(t)},!0),xo("dragDrop",!0),xo("cursorBlinkRate",530),xo("cursorScrollMargin",0),xo("cursorHeight",1,vt,!0),xo("singleCursorHeightPerLine",!0,vt,!0),xo("workTime",100),xo("workDelay",100),xo("flattenSpans",!0,n,!0),xo("addModeClass",!1,n,!0),xo("pollInterval",100),xo("undoDepth",200,function(t,e){t.doc.history.undoDepth=e}),xo("historyEventDelay",1250),xo("viewportMargin",10,function(t){t.refresh()},!0),xo("maxHighlightLength",1e4,n,!0),xo("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),xo("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),xo("autofocus",null);var ji=t.modes={},Mi=t.mimeModes={};t.defineMode=function(e,o){t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2&&(o.dependencies=Array.prototype.slice.call(arguments,2)),ji[e]=o},t.defineMIME=function(t,e){Mi[t]=e},t.resolveMode=function(e){if("string"==typeof e&&Mi.hasOwnProperty(e))e=Mi[e];else if(e&&"string"==typeof e.name&&Mi.hasOwnProperty(e.name)){var o=Mi[e.name];"string"==typeof o&&(o={name:o}),e=fr(o,e),e.name=o.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,o){var o=t.resolveMode(o),n=ji[o.name];if(!n)return t.getMode(e,"text/plain");var r=n(e,o);if(Pi.hasOwnProperty(o.name)){var i=Pi[o.name];for(var s in i)i.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s])}if(r.name=o.name,o.helperType&&(r.helperType=o.helperType),o.modeProps)for(var s in o.modeProps)r[s]=o.modeProps[s];return r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Pi=t.modeExtensions={};t.extendMode=function(t,e){mr(e,Pi.hasOwnProperty(t)?Pi[t]:Pi[t]={})},t.defineExtension=function(e,o){t.prototype[e]=o},t.defineDocExtension=function(t,e){ns.prototype[t]=e},t.defineOption=xo;var Fi=[];t.defineInitHook=function(t){Fi.push(t)};var Hi=t.helpers={};t.registerHelper=function(e,o,n){Hi.hasOwnProperty(e)||(Hi[e]=t[e]={_global:[]}),Hi[e][o]=n},t.registerGlobalHelper=function(e,o,n,r){t.registerHelper(e,o,r),Hi[e]._global.push({pred:n,val:r})};var Ui=t.copyState=function(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var o={};for(var n in e){var r=e[n];r instanceof Array&&(r=r.concat([])),o[n]=r}return o},Gi=t.startState=function(t,e,o){return!t.startState||t.startState(e,o)};t.innerMode=function(t,e){for(;t.innerMode;){var o=t.innerMode(e);if(!o||o.mode==t)break;e=o.state,t=o.mode}return o||{mode:t,state:e}};var Vi=t.commands={selectAll:function(t){t.setSelection(vi(t.firstLine(),0),vi(t.lastLine()),fs)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),fs)},killLine:function(t){ko(t,function(e){if(e.empty()){var o=Nn(t.doc,e.head.line).text.length;return e.head.ch==o&&e.head.line<t.lastLine()?{from:e.head,to:vi(e.head.line+1,0)}:{from:e.head,to:vi(e.head.line,o)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){ko(t,function(e){return{from:vi(e.from().line,0),to:Z(t.doc,vi(e.to().line+1,0))}})},delLineLeft:function(t){ko(t,function(t){return{from:vi(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){ko(t,function(e){var o=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:o},"div"),to:e.from()}})},delWrappedLineRight:function(t){ko(t,function(e){var o=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:o},"div");return{from:e.from(),to:n}})},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(vi(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(vi(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return Gr(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){return Wr(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return Vr(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){var o=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:o},"div")},ys)},goLineLeft:function(t){t.extendSelectionsBy(function(e){var o=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:o},"div")},ys)},goLineLeftSmart:function(t){t.extendSelectionsBy(function(e){var o=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:o},"div");return n.ch<t.getLine(n.line).search(/\S/)?Wr(t,e.head):n},ys)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],o=t.listSelections(),n=t.options.tabSize,r=0;r<o.length;r++){var i=o[r].from(),s=vs(t.getLine(i.line),i.ch,n);e.push(new Array(n-s%n+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){le(t,function(){for(var e=t.listSelections(),o=[],n=0;n<e.length;n++){var r=e[n].head,i=Nn(t.doc,r.line).text;if(i)if(r.ch==i.length&&(r=new vi(r.line,r.ch-1)),r.ch>0)r=new vi(r.line,r.ch+1),t.replaceRange(i.charAt(r.ch-1)+i.charAt(r.ch-2),vi(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=Nn(t.doc,r.line-1).text;s&&t.replaceRange(i.charAt(0)+"\n"+s.charAt(s.length-1),vi(r.line-1,s.length-1),vi(r.line,1),"+transpose")}o.push(new Y(r,r))}t.setSelections(o)})},newlineAndIndent:function(t){le(t,function(){for(var e=t.listSelections().length,o=0;e>o;o++){var n=t.listSelections()[o];t.replaceRange("\n",n.anchor,n.head,"+input"),t.indentLine(n.from().line+1,null,!0),_o(t)}})},toggleOverwrite:function(t){t.toggleOverwrite()}},Wi=t.keyMap={};Wi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Wi.default=gi?Wi.macDefault:Wi.pcDefault;var zi=t.lookupKey=function(t,e,o){function n(e){e=wo(e);var r=e[t];if(!1===r)return"stop";if(null!=r&&o(r))return!0;if(e.nofallthrough)return"stop";var i=e.fallthrough;if(null==i)return!1;if("[object Array]"!=Object.prototype.toString.call(i))return n(i);for(var s=0;s<i.length;++s){var a=n(i[s]);if(a)return a}return!1}for(var r=0;r<e.length;++r){var i=n(e[r]);if(i)return"stop"!=i}},qi=t.isModifierKey=function(t){var e=Ds[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},Xi=t.keyName=function(t,e){if(ri&&34==t.keyCode&&t.char)return!1;var o=Ds[t.keyCode];return null!=o&&!t.altGraphKey&&(t.altKey&&(o="Alt-"+o),(di?t.metaKey:t.ctrlKey)&&(o="Ctrl-"+o),(di?t.ctrlKey:t.metaKey)&&(o="Cmd-"+o),!e&&t.shiftKey&&(o="Shift-"+o),o)};t.fromTextArea=function(e,o){function n(){e.value=l.getValue()}if(o||(o={}),o.value=e.value,!o.tabindex&&e.tabindex&&(o.tabindex=e.tabindex),!o.placeholder&&e.placeholder&&(o.placeholder=e.placeholder),null==o.autofocus){var r=Cr();o.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(cs(e.form,"submit",n),!o.leaveSubmitMethodAlone)){var i=e.form,s=i.submit;try{var a=i.submit=function(){n(),i.submit=s,i.submit(),i.submit=a}}catch(t){}}e.style.display="none";var l=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},o);return l.save=n,l.getTextArea=function(){return e},l.toTextArea=function(){l.toTextArea=isNaN,n(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(us(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=s))},l};var Ki=t.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Ki.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var o=e==t;else var o=e&&(t.test?t.test(e):t(e));return o?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=vs(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?vs(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return vs(this.string,null,this.tabSize)-(this.lineStart?vs(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,o){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}var r=function(t){return o?t.toLowerCase():t};return r(this.string.substr(this.pos,t.length))==r(t)?(!1!==e&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var Yi=t.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t};lr(Yi),Yi.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Zt(t),ar(this,"clear")){var o=this.find();o&&nr(this,"clear",o.from,o.to)}for(var n=null,r=null,i=0;i<this.lines.length;++i){var s=this.lines[i],a=Do(s.markedSpans,this);t&&!this.collapsed?fe(t,On(s),"text"):t&&(null!=a.to&&(r=On(s)),null!=a.from&&(n=On(s))),s.markedSpans=Oo(s.markedSpans,a),null==a.from&&this.collapsed&&!on(this.doc,s)&&t&&Dn(s,Qt(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var i=0;i<this.lines.length;++i){var l=Jo(this.lines[i]),c=h(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&de(t,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&pt(t.doc)),t&&nr(t,"markerCleared",t,this),e&&ee(t),this.parent&&this.parent.clear()}},Yi.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var o,n,r=0;r<this.lines.length;++r){var i=this.lines[r],s=Do(i.markedSpans,this);if(null!=s.from&&(o=vi(e?i:On(i),s.from),-1==t))return o;if(null!=s.to&&(n=vi(e?i:On(i),s.to),1==t))return n}return o&&{from:o,to:n}},Yi.prototype.changed=function(){var t=this.find(-1,!0),e=this,o=this.doc.cm;t&&o&&le(o,function(){var n=t.line,r=On(t.line),i=Rt(o,r);if(i&&(Pt(i),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!on(e.doc,n)&&null!=e.height){var s=e.height;e.height=null;var a=sn(e)-s;a&&Dn(n,n.height+a)}})},Yi.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=pr(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Yi.prototype.detachLine=function(t){if(this.lines.splice(pr(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var $i=0,Qi=t.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var o=0;o<t.length;++o)t[o].parent=this};lr(Qi),Qi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();nr(this,"clear")}},Qi.prototype.find=function(t,e){return this.primary.find(t,e)};var Ji=t.LineWidget=function(t,e,o){if(o)for(var n in o)o.hasOwnProperty(n)&&(this[n]=o[n]);this.cm=t,this.node=e};lr(Ji),Ji.prototype.clear=function(){var t=this.cm,e=this.line.widgets,o=this.line,n=On(o);if(null!=n&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(o.widgets=null);var i=sn(this);le(t,function(){rn(t,o,-i),fe(t,n,"widget"),Dn(o,Math.max(0,o.height-i))})}},Ji.prototype.changed=function(){var t=this.height,e=this.cm,o=this.line;this.height=null;var n=sn(this)-t;n&&le(e,function(){e.curOp.forceUpdate=!0,rn(e,o,n),Dn(o,o.height+n)})};var Zi=t.Line=function(t,e,o){this.text=t,Wo(this,e),this.height=o?o(this):1};lr(Zi),Zi.prototype.lineNo=function(){return On(this)};var ts={},es={};wn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var o=t,n=t+e;n>o;++o){var r=this.lines[o];this.height-=r.height,cn(r),nr(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,o){this.height+=o,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,o){for(var n=t+e;n>t;++t)if(o(this.lines[t]))return!0}},Bn.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var o=0;o<this.children.length;++o){var n=this.children[o],r=n.chunkSize();if(r>t){var i=Math.min(e,r-t),s=n.height;if(n.removeInner(t,i),this.height-=s-n.height,r==i&&(this.children.splice(o--,1),n.parent=null),0==(e-=i))break;t=0}else t-=r}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof wn))){var a=[];this.collapse(a),this.children=[new wn(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,o){this.size+=e.length,this.height+=o;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>=t){if(r.insertInner(t,e,o),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var s=r.lines.splice(r.lines.length-25,25),a=new wn(s);r.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}t-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),o=new Bn(e);if(t.parent){t.size-=o.size,t.height-=o.height;var n=pr(t.parent.children,t);t.parent.children.splice(n+1,0,o)}else{var r=new Bn(t.children);r.parent=t,t.children=[r,o],t=r}o.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,o){for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>t){var s=Math.min(e,i-t);if(r.iterN(t,s,o))return!0;if(0==(e-=s))break;t=0}else t-=i}}};var os=0,ns=t.Doc=function(t,e,o){if(!(this instanceof ns))return new ns(t,e,o);null==o&&(o=0),Bn.call(this,[new wn([new Zi("",null)])]),this.first=o,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=o;var n=vi(o,0);this.sel=Q(n),this.history=new Fn(null),this.id=++os,this.modeOption=e,"string"==typeof t&&(t=As(t)),xn(this,{from:n,to:n,text:t}),ut(this,Q(n),fs)};ns.prototype=fr(Bn.prototype,{constructor:ns,iter:function(t,e,o){o?this.iterN(t-this.first,e-t,o):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var o=0,n=0;n<e.length;++n)o+=e[n].height;this.insertInner(t-this.first,e,o)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Rn(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:ge(function(t){var e=vi(this.first,0),o=this.first+this.size-1;so(this,{from:e,to:vi(o,Nn(this,o).text.length),text:As(t),origin:"setValue"},!0),ut(this,Q(e))}),replaceRange:function(t,e,o,n){e=Z(this,e),o=o?Z(this,o):e,ho(this,t,e,o,n)},getRange:function(t,e,o){var n=Ln(this,Z(this,t),Z(this,e));return!1===o?n:n.join(o||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){return et(this,t)?Nn(this,t):void 0},getLineNumber:function(t){return On(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Nn(this,t)),Jo(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Z(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ge(function(t,e,o){at(this,Z(this,"number"==typeof t?vi(t,e||0):t),null,o)}),setSelection:ge(function(t,e,o){at(this,Z(this,t),Z(this,e||t),o)}),extendSelection:ge(function(t,e,o){rt(this,Z(this,t),e&&Z(this,e),o)}),extendSelections:ge(function(t,e){it(this,ot(this,t))}),extendSelectionsBy:ge(function(t,e){it(this,dr(this.sel.ranges,t),e)}),setSelections:ge(function(t,e,o){if(t.length){for(var n=0,r=[];n<t.length;n++)r[n]=new Y(Z(this,t[n].anchor),Z(this,t[n].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),ut(this,$(r,e),o)}}),addSelection:ge(function(t,e,o){var n=this.sel.ranges.slice(0);n.push(new Y(Z(this,t),Z(this,e||t))),ut(this,$(n,n.length-1),o)}),getSelection:function(t){for(var e,o=this.sel.ranges,n=0;n<o.length;n++){var r=Ln(this,o[n].from(),o[n].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],o=this.sel.ranges,n=0;n<o.length;n++){var r=Ln(this,o[n].from(),o[n].to());!1!==t&&(r=r.join(t||"\n")),e[n]=r}return e},replaceSelection:function(t,e,o){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=t;this.replaceSelections(n,e,o||"+input")},replaceSelections:ge(function(t,e,o){for(var n=[],r=this.sel,i=0;i<r.ranges.length;i++){var s=r.ranges[i];n[i]={from:s.from(),to:s.to(),text:As(t[i]),origin:o}}for(var a=e&&"end"!=e&&ro(this,n,e),i=n.length-1;i>=0;i--)so(this,n[i]);a?ct(this,a):this.cm&&_o(this.cm)}),undo:ge(function(){lo(this,"undo")}),redo:ge(function(){lo(this,"redo")}),undoSelection:ge(function(){lo(this,"undo",!0)}),redoSelection:ge(function(){lo(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,o=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var n=0;n<t.undone.length;n++)t.undone[n].ranges||++o;return{undo:e,redo:o}},clearHistory:function(){this.history=new Fn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:$n(this.history.done),undone:$n(this.history.undone)}},setHistory:function(t){var e=this.history=new Fn(this.history.maxGeneration);e.done=$n(t.done.slice(0),null,!0),e.undone=$n(t.undone.slice(0),null,!0)},addLineClass:ge(function(t,e,o){return So(this,t,"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[n]){if(new RegExp("(?:^|\\s)"+o+"(?:$|\\s)").test(t[n]))return!1;t[n]+=" "+o}else t[n]=o;return!0})}),removeLineClass:ge(function(t,e,o){return So(this,t,"class",function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",r=t[n];if(!r)return!1;if(null==o)t[n]=null;else{var i=r.match(new RegExp("(?:^|\\s+)"+o+"(?:$|\\s+)"));if(!i)return!1;var s=i.index+i[0].length;t[n]=r.slice(0,i.index)+(i.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),markText:function(t,e,o){return Bo(this,Z(this,t),Z(this,e),o,"range")},setBookmark:function(t,e){var o={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return t=Z(this,t),Bo(this,t,t,o,"bookmark")},findMarksAt:function(t){t=Z(this,t);var e=[],o=Nn(this,t.line).markedSpans;if(o)for(var n=0;n<o.length;++n){var r=o[n];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,o){t=Z(this,t),e=Z(this,e);var n=[],r=t.line;return this.iter(t.line,e.line+1,function(i){var s=i.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];r==t.line&&t.ch>l.to||null==l.from&&r!=t.line||r==e.line&&l.from>e.ch||o&&!o(l.marker)||n.push(l.marker.parent||l.marker)}++r}),n},getAllMarks:function(){var t=[];return this.iter(function(e){var o=e.markedSpans;if(o)for(var n=0;n<o.length;++n)null!=o[n].from&&t.push(o[n].marker)}),t},posFromIndex:function(t){var e,o=this.first;return this.iter(function(n){var r=n.text.length+1;return r>t?(e=t,!0):(t-=r,void++o)}),Z(this,vi(o,e))},indexFromPos:function(t){t=Z(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new ns(Rn(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,o=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<o&&(o=t.to);var n=new ns(Rn(this,e,o),t.mode||this.modeOption,e);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],No(n,Ao(this)),n},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var o=0;o<this.linked.length;++o){var n=this.linked[o];if(n.doc==e){this.linked.splice(o,1),e.unlinkDoc(this),Lo(Ao(this));break}}if(e.history==this.history){var r=[e.id];In(e,function(t){r.push(t.id)},!0),e.history=new Fn(null),e.history.done=$n(this.history.done,r),e.history.undone=$n(this.history.undone,r)}},iterLinkedDocs:function(t){In(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ns.prototype.eachLine=ns.prototype.iter;var rs="iter insert remove copy getEditor".split(" ");for(var is in ns.prototype)ns.prototype.hasOwnProperty(is)&&pr(rs,is)<0&&(t.prototype[is]=function(t){return function(){return t.apply(this.doc,arguments)}}(ns.prototype[is]));lr(ns);var ss=t.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},as=t.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},ls=t.e_stop=function(t){ss(t),as(t)},cs=t.on=function(t,e,o){if(t.addEventListener)t.addEventListener(e,o,!1);else if(t.attachEvent)t.attachEvent("on"+e,o);else{var n=t._handlers||(t._handlers={}),r=n[e]||(n[e]=[]);r.push(o)}},us=t.off=function(t,e,o){if(t.removeEventListener)t.removeEventListener(e,o,!1);else if(t.detachEvent)t.detachEvent("on"+e,o);else{var n=t._handlers&&t._handlers[e];if(!n)return;for(var r=0;r<n.length;++r)if(n[r]==o){n.splice(r,1);break}}},gs=t.signal=function(t,e){var o=t._handlers&&t._handlers[e];if(o)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<o.length;++r)o[r].apply(null,n)},hs=null,ps=30,ds=t.Pass={toString:function(){return"CodeMirror.Pass"}},fs={scroll:!1},ms={origin:"*mouse"},ys={origin:"+move"};cr.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var vs=t.countColumn=function(t,e,o,n,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var i=n||0,s=r||0;;){var a=t.indexOf("\t",i);if(0>a||a>=e)return s+(e-i);s+=a-i,s+=o-s%o,i=a+1}},_s=[""],bs=function(t){t.select()};ci?bs=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:Zr&&(bs=function(t){try{t.select()}catch(t){}}),[].indexOf&&(pr=function(t,e){return t.indexOf(e)}),[].map&&(dr=function(t,e){return t.map(e)});var Es,Ss=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ks=t.isWordChar=function(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Ss.test(t))},Ts=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Es=document.createRange?function(t,e,o){var n=document.createRange();return n.setEnd(t,o),n.setStart(t,e),n}:function(t,e,o){var n=document.body.createTextRange();return n.moveToElementText(t.parentNode),n.collapse(!0),n.moveEnd("character",o),n.moveStart("character",e),n},Zr&&11>ti&&(Cr=function(){try{return document.activeElement}catch(t){return document.body}});var Cs,xs,ws,Bs=!1,Is=function(){if(Zr&&9>ti)return!1;var t=Er("div");return"draggable"in t||"dragDrop"in t}(),As=t.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,o=[],n=t.length;n>=e;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var i=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=i.indexOf("\r");-1!=s?(o.push(i.slice(0,s)),e+=s+1):(o.push(i),e=r+1)}return o}:function(t){return t.split(/\r\n?|\n/)},Ns=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Ls=function(){var t=Er("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),Rs=null,Ds={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};t.keyNames=Ds,function(){for(var t=0;10>t;t++)Ds[t+48]=Ds[t+96]=String(t);for(var t=65;90>=t;t++)Ds[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)Ds[t+111]=Ds[t+63235]="F"+t}();var Os,js=function(){function t(t){return 247>=t?o.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1773>=t?n.charAt(t-1536):t>=1774&&2220>=t?"r":t>=8192&&8203>=t?"w":8204==t?"b":"L"}function e(t,e,o){this.level=t,this.from=e,this.to=o}var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(o){if(!r.test(o))return!1;for(var n,u=o.length,g=[],h=0;u>h;++h)g.push(n=t(o.charCodeAt(h)));for(var h=0,p=c;u>h;++h){var n=g[h];"m"==n?g[h]=p:p=n}for(var h=0,d=c;u>h;++h){var n=g[h];"1"==n&&"r"==d?g[h]="n":s.test(n)&&(d=n,"r"==n&&(g[h]="R"))}for(var h=1,p=g[0];u-1>h;++h){var n=g[h];"+"==n&&"1"==p&&"1"==g[h+1]?g[h]="1":","!=n||p!=g[h+1]||"1"!=p&&"n"!=p||(g[h]=p),p=n}for(var h=0;u>h;++h){var n=g[h];if(","==n)g[h]="N";else if("%"==n){for(var f=h+1;u>f&&"%"==g[f];++f);for(var m=h&&"!"==g[h-1]||u>f&&"1"==g[f]?"1":"N",y=h;f>y;++y)g[y]=m;h=f-1}}for(var h=0,d=c;u>h;++h){var n=g[h];"L"==d&&"1"==n?g[h]="L":s.test(n)&&(d=n)}for(var h=0;u>h;++h)if(i.test(g[h])){for(var f=h+1;u>f&&i.test(g[f]);++f);for(var v="L"==(h?g[h-1]:c),_="L"==(u>f?g[f]:c),m=v||_?"L":"R",y=h;f>y;++y)g[y]=m;h=f-1}for(var b,E=[],h=0;u>h;)if(a.test(g[h])){var S=h;for(++h;u>h&&a.test(g[h]);++h);E.push(new e(0,S,h))}else{var k=h,T=E.length;for(++h;u>h&&"L"!=g[h];++h);for(var y=k;h>y;)if(l.test(g[y])){y>k&&E.splice(T,0,new e(1,k,y));var C=y;for(++y;h>y&&l.test(g[y]);++y);E.splice(T,0,new e(2,C,y)),k=y}else++y;h>k&&E.splice(T,0,new e(1,k,h))}return 1==E[0].level&&(b=o.match(/^\s+/))&&(E[0].from=b[0].length,E.unshift(new e(0,0,b[0].length))),1==hr(E).level&&(b=o.match(/\s+$/))&&(hr(E).to-=b[0].length,E.push(new e(0,u-b[0].length,u))),E[0].level!=hr(E).level&&E.push(new e(E[0].level,u,u)),E}}();return t.version="4.7.0",t}),function(t){t(o(4))}(function(t){"use strict";function e(t){for(var e={},o=t.split(" "),n=0;n<o.length;++n)e[o[n]]=!0;return e}function o(t,e){if(!e.startOfLine)return!1;for(;;){if(!t.skipTo("\\")){t.skipToEnd(),e.tokenize=null;break}if(t.next(),t.eol()){e.tokenize=o;break}}return"meta"}function n(t,e){if(t.backUp(1),t.match(/(R|u8R|uR|UR|LR)/)){var o=t.match(/"([^\s\\()]{0,16})\(/);return!!o&&(e.cpp11RawStringDelim=o[1],e.tokenize=i,i(t,e))}return t.match(/(u8|u|U|L)/)?!!t.match(/["']/,!1)&&"string":(t.next(),!1)}function r(t,e){for(var o;null!=(o=t.next());)if('"'==o&&!t.eat('"')){e.tokenize=null;break}return"string"}function i(t,e){var o=e.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return t.match(new RegExp(".*?\\)"+o+'"'))?e.tokenize=null:t.skipToEnd(),"string"}function s(e,o){function n(t){if(t)for(var e in t)t.hasOwnProperty(e)&&r.push(e)}"string"==typeof e&&(e=[e]);var r=[];n(o.keywords),n(o.builtin),n(o.atoms),r.length&&(o.helperType=e[0],t.registerHelper("hintWords",e[0],r));for(var i=0;i<e.length;++i)t.defineMIME(e[i],o)}function a(t,e){for(var o=!1;!t.eol();){if(!o&&t.match('"""')){e.tokenize=null;break}o="\\"!=t.next()&&!o}return"string"}t.defineMode("clike",function(e,o){function n(t,e){var o=t.next();if(y[o]){var n=y[o](t,e);if(!1!==n)return n}if('"'==o||"'"==o)return e.tokenize=r(o),e.tokenize(t,e);if(/[\[\]{}\(\),;\:\.]/.test(o))return c=o,null;if(/\d/.test(o))return t.eatWhile(/[\w\.]/),"number";if("/"==o){if(t.eat("*"))return e.tokenize=i,i(t,e);if(t.eat("/"))return t.skipToEnd(),"comment"}if(b.test(o))return t.eatWhile(b),"operator";t.eatWhile(/[\w\$_\xa1-\uffff]/);var s=t.current();return p.propertyIsEnumerable(s)?(f.propertyIsEnumerable(s)&&(c="newstatement"),"keyword"):d.propertyIsEnumerable(s)?(f.propertyIsEnumerable(s)&&(c="newstatement"),"builtin"):m.propertyIsEnumerable(s)?"atom":"variable"}function r(t){return function(e,o){for(var n,r=!1,i=!1;null!=(n=e.next());){if(n==t&&!r){i=!0;break}r=!r&&"\\"==n}return(i||!r&&!v)&&(o.tokenize=null),"string"}}function i(t,e){for(var o,n=!1;o=t.next();){if("/"==o&&n){e.tokenize=null;break}n="*"==o}return"comment"}function s(t,e,o,n,r){this.indented=t,this.column=e,this.type=o,this.align=n,this.prev=r}function a(t,e,o){var n=t.indented;return t.context&&"statement"==t.context.type&&(n=t.context.indented),t.context=new s(n,e,o,null,t.context)}function l(t){var e=t.context.type;return(")"==e||"]"==e||"}"==e)&&(t.indented=t.context.indented),t.context=t.context.prev}var c,u=e.indentUnit,g=o.statementIndentUnit||u,h=o.dontAlignCalls,p=o.keywords||{},d=o.builtin||{},f=o.blockKeywords||{},m=o.atoms||{},y=o.hooks||{},v=o.multiLineStrings,_=!1!==o.indentStatements,b=/[+\-*&%=<>!?|\/]/;return{startState:function(t){return{tokenize:null,context:new s((t||0)-u,0,"top",!1),indented:0,startOfLine:!0}},token:function(t,e){var o=e.context;if(t.sol()&&(null==o.align&&(o.align=!1),e.indented=t.indentation(),e.startOfLine=!0),t.eatSpace())return null;c=null;var r=(e.tokenize||n)(t,e);if("comment"==r||"meta"==r)return r;if(null==o.align&&(o.align=!0),";"!=c&&":"!=c&&","!=c||"statement"!=o.type)if("{"==c)a(e,t.column(),"}");else if("["==c)a(e,t.column(),"]");else if("("==c)a(e,t.column(),")");else if("}"==c){for(;"statement"==o.type;)o=l(e);for("}"==o.type&&(o=l(e));"statement"==o.type;)o=l(e)}else c==o.type?l(e):_&&(("}"==o.type||"top"==o.type)&&";"!=c||"statement"==o.type&&"newstatement"==c)&&a(e,t.column(),"statement");else l(e);return e.startOfLine=!1,r},indent:function(e,o){if(e.tokenize!=n&&null!=e.tokenize)return t.Pass;var r=e.context,i=o&&o.charAt(0);"statement"==r.type&&"}"==i&&(r=r.prev);var s=i==r.type;return"statement"==r.type?r.indented+("{"==i?0:g):!r.align||h&&")"==r.type?")"!=r.type||s?r.indented+(s?0:u):r.indented+g:r.column+(s?0:1)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var l="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";s(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:e(l),blockKeywords:e("case do else for if switch while struct"),atoms:e("null"),hooks:{"#":o},modeProps:{fold:["brace","include"]}}),s(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:e(l+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),blockKeywords:e("catch class do else finally for if struct switch try while"),atoms:e("true false null"),hooks:{"#":o,u:n,U:n,L:n,R:n},modeProps:{fold:["brace","include"]}}),s("text/x-java",{name:"clike",keywords:e("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:e("catch class do else finally for if switch try while"),atoms:e("true false null"),hooks:{"@":function(t){return t.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),s("text/x-csharp",{name:"clike",keywords:e("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:e("catch class do else finally for foreach if struct switch try while"),builtin:e("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:e("true false null"),hooks:{"@":function(t,e){return t.eat('"')?(e.tokenize=r,r(t,e)):(t.eatWhile(/[\w\$_]/),"meta")}}}),s("text/x-scala",{name:"clike",keywords:e("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:e("catch class do else finally for forSome if match switch try while"),atoms:e("true false null"),indentStatements:!1,hooks:{"@":function(t){return t.eatWhile(/[\w\$_]/),"meta"},'"':function(t,e){return!!t.match('""')&&(e.tokenize=a,e.tokenize(t,e))}}}),s(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:e("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:e("for while do if else struct"),builtin:e("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:e("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":o},modeProps:{fold:["brace","include"]}}),s("text/x-nesc",{name:"clike",keywords:e(l+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),blockKeywords:e("case do else for if switch while struct"),atoms:e("null"),hooks:{"#":o},modeProps:{fold:["brace","include"]}})})}).call(e,o(0))},function(t,e,o){var n,r,i;/*! jQuery UI - v1.11.1+CommonJS - 2014-09-17
* http://jqueryui.com
* Includes: widget.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
!function(s){r=[o(0)],n=s,void 0!==(i="function"==typeof n?n.apply(e,r):n)&&(t.exports=i)}(function(t){/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var e=0,o=Array.prototype.slice;t.cleanData=function(e){return function(o){var n,r,i;for(i=0;null!=(r=o[i]);i++)try{n=t._data(r,"events"),n&&n.remove&&t(r).triggerHandler("remove")}catch(t){}e(o)}}(t.cleanData),t.widget=function(e,o,n){var r,i,s,a,l={},c=e.split(".")[0];return e=e.split(".")[1],r=c+"-"+e,n||(n=o,o=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[c]=t[c]||{},i=t[c][e],s=t[c][e]=function(t,e){if(!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},t.extend(s,i,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new o,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){if(!t.isFunction(n))return void(l[e]=n);l[e]=function(){var t=function(){return o.prototype[e].apply(this,arguments)},r=function(t){return o.prototype[e].apply(this,t)};return function(){var e,o=this._super,i=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=o,this._superApply=i,e}}()}),s.prototype=t.widget.extend(a,{widgetEventPrefix:i?a.widgetEventPrefix||e:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:r}),i?(t.each(i._childConstructors,function(e,o){var n=o.prototype;t.widget(n.namespace+"."+n.widgetName,s,o._proto)}),delete i._childConstructors):o._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var n,r,i=o.call(arguments,1),s=0,a=i.length;s<a;s++)for(n in i[s])r=i[s][n],i[s].hasOwnProperty(n)&&void 0!==r&&(t.isPlainObject(r)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],r):t.widget.extend({},r):e[n]=r);return e},t.widget.bridge=function(e,n){var r=n.prototype.widgetFullName||e;t.fn[e]=function(i){var s="string"==typeof i,a=o.call(arguments,1),l=this;return i=!s&&a.length?t.widget.extend.apply(null,[i].concat(a)):i,s?this.each(function(){var o,n=t.data(this,r);return"instance"===i?(l=n,!1):n?t.isFunction(n[i])&&"_"!==i.charAt(0)?(o=n[i].apply(n,a),o!==n&&void 0!==o?(l=o&&o.jquery?l.pushStack(o.get()):o,!1):void 0):t.error("no such method '"+i+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+i+"'")}):this.each(function(){var e=t.data(this,r);e?(e.option(i||{}),e._init&&e._init()):t.data(this,r,new n(i,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(o,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),o),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,o){var n,r,i,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(r=s[e]=t.widget.extend({},this.options[e]),i=0;i<n.length-1;i++)r[n[i]]=r[n[i]]||{},r=r[n[i]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=o}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=o}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,o,n){var r,i=this;"boolean"!=typeof e&&(n=o,o=e,e=!1),n?(o=r=t(o),this.bindings=this.bindings.add(o)):(n=o,o=this.element,r=this.widget()),t.each(n,function(n,s){function a(){if(e||!0!==i.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof s?i[s]:s).apply(i,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+i.eventNamespace,u=l[2];u?r.delegate(u,c,a):o.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function o(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(o,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,o,n){var r,i,s=this.options[e];if(n=n||{},o=t.Event(o),o.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),o.target=this.element[0],i=o.originalEvent)for(r in i)r in o||(o[r]=i[r]);return this.element.trigger(o,n),!(t.isFunction(s)&&!1===s.apply(this.element[0],[o].concat(n))||o.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,o){t.Widget.prototype["_"+e]=function(n,r,i){"string"==typeof r&&(r={effect:r});var s,a=r?!0===r||"number"==typeof r?o:r.effect||o:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=i,r.delay&&n.delay(r.delay),s&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,i):n.queue(function(o){t(this)[e](),i&&i.call(n[0]),o()})}});t.widget})},function(t,e,o){var n=o(10);window.$=n,window.jQuery=n;o(41);var r=o(11);window.jQuerySvg=r,o(40),o(37),o(42),o(44),o(43),o(35),o(39),o(5),o(36),o(34),o(38),o(30),o(15),o(31),o(32),o(27),o(33),o(14),o(45);var i=o(17);window.Raphael=i;var s=o(4);window.CodeMirror=s,o(48),o(47),o(46);var a=o(18);window._=a;var l=o(16);window.jsondiffpatch=l,window.goog=window.goog||{provide:function(t){console.log('goog.provide("'+t+'")')},require:function(t){console.log('goog.provide("'+t+'")')}};var c=o(20);window.Blockly=c;var u=o(29);window.PxtPromise=u,window.SVGtoPDF=o(49),window.blobStream=o(28),o(22),o(21)},function(t,e,o){o(53),o(51),o(52),o(73),o(72),o(85),o(81),o(78),o(79),o(80),o(83),o(82),o(76),o(69),o(66),o(67),o(87),o(86),o(56),o(68),o(75),o(70),o(71),o(84),o(19);var n=o(13);window.Spinner=n,o(65),o(57),o(60),o(59),o(58),o(61),o(63),o(64),o(62),o(54),o(55),o(77),o(74)},function(t,e,o){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=t.indexOf("=");return-1===o&&(o=e),[o,o===e?0:4-o%4]}function r(t){var e=n(t),o=e[0],r=e[1];return 3*(o+r)/4-r}function i(t,e,o){return 3*(e+o)/4-o}function s(t){var e,o,r=n(t),s=r[0],a=r[1],l=new h(i(t,s,a)),c=0,u=a>0?s-4:s;for(o=0;o<u;o+=4)e=g[t.charCodeAt(o)]<<18|g[t.charCodeAt(o+1)]<<12|g[t.charCodeAt(o+2)]<<6|g[t.charCodeAt(o+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;return 2===a&&(e=g[t.charCodeAt(o)]<<2|g[t.charCodeAt(o+1)]>>4,l[c++]=255&e),1===a&&(e=g[t.charCodeAt(o)]<<10|g[t.charCodeAt(o+1)]<<4|g[t.charCodeAt(o+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e),l}function a(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function l(t,e,o){for(var n,r=[],i=e;i<o;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),r.push(a(n));return r.join("")}function c(t){for(var e,o=t.length,n=o%3,r=[],i=0,s=o-n;i<s;i+=16383)r.push(l(t,i,i+16383>s?s:i+16383));return 1===n?(e=t[o-1],r.push(u[e>>2]+u[e<<4&63]+"==")):2===n&&(e=(t[o-2]<<8)+t[o-1],r.push(u[e>>10]+u[e>>4&63]+u[e<<2&63]+"=")),r.join("")}e.byteLength=r,e.toByteArray=s,e.fromByteArray=c;for(var u=[],g=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,f=p.length;d<f;++d)u[d]=p[d],g[p.charCodeAt(d)]=d;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63},function(t,e,o){"use strict";(function(t){function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=i.prototype):(null===t&&(t=new i(e)),t.length=e),t}function i(t,e,o){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(t,e,o);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,e,o)}function s(t,e,o,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?h(t,e,o,n):"string"==typeof e?u(t,e,o):p(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,o,n){return a(e),e<=0?r(t,e):void 0!==o?"string"==typeof n?r(t,e).fill(o,n):r(t,e).fill(o):r(t,e)}function c(t,e){if(a(e),t=r(t,e<0?0:0|d(e)),!i.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)t[o]=0;return t}function u(t,e,o){if("string"==typeof o&&""!==o||(o="utf8"),!i.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(e,o);t=r(t,n);var s=t.write(e,o);return s!==n&&(t=t.slice(0,s)),t}function g(t,e){var o=e.length<0?0:0|d(e.length);t=r(t,o);for(var n=0;n<o;n+=1)t[n]=255&e[n];return t}function h(t,e,o,n){if(e.byteLength,o<0||e.byteLength<o)throw new RangeError("'offset' is out of bounds");if(e.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===o&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,o):new Uint8Array(e,o,n),i.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=i.prototype):t=g(t,e),t}function p(t,e){if(i.isBuffer(e)){var o=0|d(e.length);return t=r(t,o),0===t.length?t:(e.copy(t,0,0,o),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Y(e.length)?r(t,0):g(t,e);if("Buffer"===e.type&&J(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function f(t){return+t!=t&&(t=0),i.alloc(+t)}function m(t,e){if(i.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var o=t.length;if(0===o)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return X(t).length;default:if(n)return W(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,o){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if(o>>>=0,e>>>=0,o<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,o);case"utf8":case"utf-8":return B(this,e,o);case"ascii":return A(this,e,o);case"latin1":case"binary":return N(this,e,o);case"base64":return w(this,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,o);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}function _(t,e,o,n,r){if(0===t.length)return-1;if("string"==typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=r?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(r)return-1;o=t.length-1}else if(o<0){if(!r)return-1;o=0}if("string"==typeof e&&(e=i.from(e,n)),i.isBuffer(e))return 0===e.length?-1:b(t,e,o,n,r);if("number"==typeof e)return e&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,o):Uint8Array.prototype.lastIndexOf.call(t,e,o):b(t,[e],o,n,r);throw new TypeError("val must be string, number or Buffer")}function b(t,e,o,n,r){function i(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,o/=2}var c;if(r){var u=-1;for(c=o;c<a;c++)if(i(t,c)===i(e,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===l)return u*s}else-1!==u&&(c-=c-u),u=-1}else for(o+l>a&&(o=a-l),c=o;c>=0;c--){for(var g=!0,h=0;h<l;h++)if(i(t,c+h)!==i(e,h)){g=!1;break}if(g)return c}return-1}function E(t,e,o,n){o=Number(o)||0;var r=t.length-o;n?(n=Number(n))>r&&(n=r):n=r;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[o+s]=a}return s}function S(t,e,o,n){return K(W(e,t.length-o),t,o,n)}function k(t,e,o,n){return K(z(e),t,o,n)}function T(t,e,o,n){return k(t,e,o,n)}function C(t,e,o,n){return K(X(e),t,o,n)}function x(t,e,o,n){return K(q(e,t.length-o),t,o,n)}function w(t,e,o){return 0===e&&o===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,o))}function B(t,e,o){o=Math.min(t.length,o);for(var n=[],r=e;r<o;){var i=t[r],s=null,a=i>239?4:i>223?3:i>191?2:1;if(r+a<=o){var l,c,u,g;switch(a){case 1:i<128&&(s=i);break;case 2:l=t[r+1],128==(192&l)&&(g=(31&i)<<6|63&l)>127&&(s=g);break;case 3:l=t[r+1],c=t[r+2],128==(192&l)&&128==(192&c)&&(g=(15&i)<<12|(63&l)<<6|63&c)>2047&&(g<55296||g>57343)&&(s=g);break;case 4:l=t[r+1],c=t[r+2],u=t[r+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(g=(15&i)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&g<1114112&&(s=g)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),r+=a}return I(n)}function I(t){var e=t.length;if(e<=Z)return String.fromCharCode.apply(String,t);for(var o="",n=0;n<e;)o+=String.fromCharCode.apply(String,t.slice(n,n+=Z));return o}function A(t,e,o){var n="";o=Math.min(t.length,o);for(var r=e;r<o;++r)n+=String.fromCharCode(127&t[r]);return n}function N(t,e,o){var n="";o=Math.min(t.length,o);for(var r=e;r<o;++r)n+=String.fromCharCode(t[r]);return n}function L(t,e,o){var n=t.length;(!e||e<0)&&(e=0),(!o||o<0||o>n)&&(o=n);for(var r="",i=e;i<o;++i)r+=V(t[i]);return r}function R(t,e,o){for(var n=t.slice(e,o),r="",i=0;i<n.length;i+=2)r+=String.fromCharCode(n[i]+256*n[i+1]);return r}function D(t,e,o){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>o)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,o,n,r,s){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(o+n>t.length)throw new RangeError("Index out of range")}function j(t,e,o,n){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-o,2);r<i;++r)t[o+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function M(t,e,o,n){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-o,4);r<i;++r)t[o+r]=e>>>8*(n?r:3-r)&255}function P(t,e,o,n,r,i){if(o+n>t.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function F(t,e,o,n,r){return r||P(t,e,o,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(t,e,o,n,23,4),o+4}function H(t,e,o,n,r){return r||P(t,e,o,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(t,e,o,n,52,8),o+8}function U(t){if(t=G(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function G(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var o,n=t.length,r=null,i=[],s=0;s<n;++s){if((o=t.charCodeAt(s))>55295&&o<57344){if(!r){if(o>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}r=o;continue}if(o<56320){(e-=3)>-1&&i.push(239,191,189),r=o;continue}o=65536+(r-55296<<10|o-56320)}else r&&(e-=3)>-1&&i.push(239,191,189);if(r=null,o<128){if((e-=1)<0)break;i.push(o)}else if(o<2048){if((e-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((e-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function z(t){for(var e=[],o=0;o<t.length;++o)e.push(255&t.charCodeAt(o));return e}function q(t,e){for(var o,n,r,i=[],s=0;s<t.length&&!((e-=2)<0);++s)o=t.charCodeAt(s),n=o>>8,r=o%256,i.push(r),i.push(n);return i}function X(t){return $.toByteArray(U(t))}function K(t,e,o,n){for(var r=0;r<n&&!(r+o>=e.length||r>=t.length);++r)e[r+o]=t[r];return r}function Y(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var $=o(8),Q=o(12),J=o(23);e.Buffer=i,e.SlowBuffer=f,e.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=n(),i.poolSize=8192,i._augment=function(t){return t.__proto__=i.prototype,t},i.from=function(t,e,o){return s(null,t,e,o)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(t,e,o){return l(null,t,e,o)},i.allocUnsafe=function(t){return c(null,t)},i.allocUnsafeSlow=function(t){return c(null,t)},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var o=t.length,n=e.length,r=0,s=Math.min(o,n);r<s;++r)if(t[r]!==e[r]){o=t[r],n=e[r];break}return o<n?-1:n<o?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!J(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var o;if(void 0===e)for(e=0,o=0;o<t.length;++o)e+=t[o].length;var n=i.allocUnsafe(e),r=0;for(o=0;o<t.length;++o){var s=t[o];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},i.byteLength=m,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},i.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?B(this,0,t):y.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",o=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,o).match(/.{2}/g).join(" "),this.length>o&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t,e,o,n,r){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===o&&(o=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||o>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=o)return 0;if(n>=r)return-1;if(e>=o)return 1;if(e>>>=0,o>>>=0,n>>>=0,r>>>=0,this===t)return 0;for(var s=r-n,a=o-e,l=Math.min(s,a),c=this.slice(n,r),u=t.slice(e,o),g=0;g<l;++g)if(c[g]!==u[g]){s=c[g],a=u[g];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(t,e,o){return-1!==this.indexOf(t,e,o)},i.prototype.indexOf=function(t,e,o){return _(this,t,e,o,!0)},i.prototype.lastIndexOf=function(t,e,o){return _(this,t,e,o,!1)},i.prototype.write=function(t,e,o,n){if(void 0===e)n="utf8",o=this.length,e=0;else if(void 0===o&&"string"==typeof e)n=e,o=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var r=this.length-e;if((void 0===o||o>r)&&(o=r),t.length>0&&(o<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return E(this,t,e,o);case"utf8":case"utf-8":return S(this,t,e,o);case"ascii":return k(this,t,e,o);case"latin1":case"binary":return T(this,t,e,o);case"base64":return C(this,t,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,o);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(t,e){var o=this.length;t=~~t,e=void 0===e?o:~~e,t<0?(t+=o)<0&&(t=0):t>o&&(t=o),e<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t);var n;if(i.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=i.prototype;else{var r=e-t;n=new i(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+t]}return n},i.prototype.readUIntLE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=this[t],r=1,i=0;++i<e&&(r*=256);)n+=this[t+i]*r;return n},i.prototype.readUIntBE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},i.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=this[t],r=1,i=0;++i<e&&(r*=256);)n+=this[t+i]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},i.prototype.readIntBE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=e,r=1,i=this[t+--n];n>0&&(r*=256);)i+=this[t+--n]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var o=this[t]|this[t+1]<<8;return 32768&o?4294901760|o:o},i.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var o=this[t+1]|this[t]<<8;return 32768&o?4294901760|o:o},i.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),Q.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),Q.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),Q.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),Q.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,o,n){if(t=+t,e|=0,o|=0,!n){O(this,t,e,o,Math.pow(2,8*o)-1,0)}var r=1,i=0;for(this[e]=255&t;++i<o&&(r*=256);)this[e+i]=t/r&255;return e+o},i.prototype.writeUIntBE=function(t,e,o,n){if(t=+t,e|=0,o|=0,!n){O(this,t,e,o,Math.pow(2,8*o)-1,0)}var r=o-1,i=1;for(this[e+r]=255&t;--r>=0&&(i*=256);)this[e+r]=t/i&255;return e+o},i.prototype.writeUInt8=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,1,255,0),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},i.prototype.writeUInt16BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},i.prototype.writeUInt32LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},i.prototype.writeUInt32BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},i.prototype.writeIntLE=function(t,e,o,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*o-1);O(this,t,e,o,r-1,-r)}var i=0,s=1,a=0;for(this[e]=255&t;++i<o&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+o},i.prototype.writeIntBE=function(t,e,o,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*o-1);O(this,t,e,o,r-1,-r)}var i=o-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+o},i.prototype.writeInt8=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,1,127,-128),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},i.prototype.writeInt16BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},i.prototype.writeInt32LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},i.prototype.writeInt32BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},i.prototype.writeFloatLE=function(t,e,o){return F(this,t,e,!0,o)},i.prototype.writeFloatBE=function(t,e,o){return F(this,t,e,!1,o)},i.prototype.writeDoubleLE=function(t,e,o){return H(this,t,e,!0,o)},i.prototype.writeDoubleBE=function(t,e,o){return H(this,t,e,!1,o)},i.prototype.copy=function(t,e,o,n){if(o||(o=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-o&&(n=t.length-e+o);var r,s=n-o;if(this===t&&o<e&&e<n)for(r=s-1;r>=0;--r)t[r+e]=this[r+o];else if(s<1e3||!i.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+s),e);return s},i.prototype.fill=function(t,e,o,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<o)throw new RangeError("Out of range index");if(o<=e)return this;e>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<o;++s)this[s]=t;else{var a=i.isBuffer(t)?t:W(new i(t,n).toString()),l=a.length;for(s=0;s<o-e;++s)this[s+e]=a[s%l]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,o(1))},function(t,e,o){(function(n){var r,i;/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(e,o){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?o(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return o(t)}:o(e)}("undefined"!=typeof window?window:this,function(n,s){function a(t){var e=t.length,o=rt.type(t);return"function"!==o&&!rt.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===o||0===e||"number"==typeof e&&e>0&&e-1 in t))}function l(t,e,o){if(rt.isFunction(e))return rt.grep(t,function(t,n){return!!e.call(t,n,t)!==o});if(e.nodeType)return rt.grep(t,function(t){return t===e!==o});if("string"==typeof e){if(ht.test(e))return rt.filter(e,t,o);e=rt.filter(e,t)}return rt.grep(t,function(t){return Q.call(e,t)>=0!==o})}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function u(t){var e=vt[t]={};return rt.each(t.match(yt)||[],function(t,o){e[o]=!0}),e}function g(){ot.removeEventListener("DOMContentLoaded",g,!1),n.removeEventListener("load",g,!1),rt.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=rt.expando+Math.random()}function p(t,e,o){var n;if(void 0===o&&1===t.nodeType)if(n="data-"+e.replace(Tt,"-$1").toLowerCase(),"string"==typeof(o=t.getAttribute(n))){try{o="true"===o||"false"!==o&&("null"===o?null:+o+""===o?+o:kt.test(o)?rt.parseJSON(o):o)}catch(t){}St.set(t,e,o)}else o=void 0;return o}function d(){return!0}function f(){return!1}function m(){try{return ot.activeElement}catch(t){}}function y(t,e){return rt.nodeName(t,"table")&&rt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function v(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function _(t){var e=Ht.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){for(var o=0,n=t.length;n>o;o++)Et.set(t[o],"globalEval",!e||Et.get(e[o],"globalEval"))}function E(t,e){var o,n,r,i,s,a,l,c;if(1===e.nodeType){if(Et.hasData(t)&&(i=Et.access(t),s=Et.set(e,i),c=i.events)){delete s.handle,s.events={};for(r in c)for(o=0,n=c[r].length;n>o;o++)rt.event.add(e,r,c[r][o])}St.hasData(t)&&(a=St.access(t),l=rt.extend({},a),St.set(e,l))}}function S(t,e){var o=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&rt.nodeName(t,e)?rt.merge([t],o):o}function k(t,e){var o=e.nodeName.toLowerCase();"input"===o&&Bt.test(t.type)?e.checked=t.checked:("input"===o||"textarea"===o)&&(e.defaultValue=t.defaultValue)}function T(t,e){var o,r=rt(e.createElement(t)).appendTo(e.body),i=n.getDefaultComputedStyle&&(o=n.getDefaultComputedStyle(r[0]))?o.display:rt.css(r[0],"display");return r.detach(),i}function C(t){var e=ot,o=Wt[t];return o||(o=T(t,e),"none"!==o&&o||(Vt=(Vt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Vt[0].contentDocument,e.write(),e.close(),o=T(t,e),Vt.detach()),Wt[t]=o),o}function x(t,e,o){var n,r,i,s,a=t.style;return o=o||Xt(t),o&&(s=o.getPropertyValue(e)||o[e]),o&&(""!==s||rt.contains(t.ownerDocument,t)||(s=rt.style(t,e)),qt.test(s)&&zt.test(e)&&(n=a.width,r=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=o.width,a.width=n,a.minWidth=r,a.maxWidth=i)),void 0!==s?s+"":s}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function B(t,e){if(e in t)return e;for(var o=e[0].toUpperCase()+e.slice(1),n=e,r=Zt.length;r--;)if((e=Zt[r]+o)in t)return e;return n}function I(t,e,o){var n=Yt.exec(e);return n?Math.max(0,n[1]-(o||0))+(n[2]||"px"):e}function A(t,e,o,n,r){for(var i=o===(n?"border":"content")?4:"width"===e?1:0,s=0;4>i;i+=2)"margin"===o&&(s+=rt.css(t,o+xt[i],!0,r)),n?("content"===o&&(s-=rt.css(t,"padding"+xt[i],!0,r)),"margin"!==o&&(s-=rt.css(t,"border"+xt[i]+"Width",!0,r))):(s+=rt.css(t,"padding"+xt[i],!0,r),"padding"!==o&&(s+=rt.css(t,"border"+xt[i]+"Width",!0,r)));return s}function N(t,e,o){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,i=Xt(t),s="border-box"===rt.css(t,"boxSizing",!1,i);if(0>=r||null==r){if(r=x(t,e,i),(0>r||null==r)&&(r=t.style[e]),qt.test(r))return r;n=s&&(et.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+A(t,e,o||(s?"border":"content"),n,i)+"px"}function L(t,e){for(var o,n,r,i=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(i[s]=Et.get(n,"olddisplay"),o=n.style.display,e?(i[s]||"none"!==o||(n.style.display=""),""===n.style.display&&wt(n)&&(i[s]=Et.access(n,"olddisplay",C(n.nodeName)))):(r=wt(n),"none"===o&&r||Et.set(n,"olddisplay",r?o:rt.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?i[s]||"":"none"));return t}function R(t,e,o,n,r){return new R.prototype.init(t,e,o,n,r)}function D(){return setTimeout(function(){te=void 0}),te=rt.now()}function O(t,e){var o,n=0,r={height:t};for(e=e?1:0;4>n;n+=2-e)o=xt[n],r["margin"+o]=r["padding"+o]=t;return e&&(r.opacity=r.width=t),r}function j(t,e,o){for(var n,r=(se[e]||[]).concat(se["*"]),i=0,s=r.length;s>i;i++)if(n=r[i].call(o,e,t))return n}function M(t,e,o){var n,r,i,s,a,l,c,u=this,g={},h=t.style,p=t.nodeType&&wt(t),d=Et.get(t,"fxshow");o.queue||(a=rt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,rt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(o.overflow=[h.overflow,h.overflowX,h.overflowY],c=rt.css(t,"display"),"inline"===("none"===c?Et.get(t,"olddisplay")||C(t.nodeName):c)&&"none"===rt.css(t,"float")&&(h.display="inline-block")),o.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=o.overflow[0],h.overflowX=o.overflow[1],h.overflowY=o.overflow[2]}));for(n in e)if(r=e[n],oe.exec(r)){if(delete e[n],i=i||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!d||void 0===d[n])continue;p=!0}g[n]=d&&d[n]||rt.style(t,n)}else c=void 0;if(rt.isEmptyObject(g))"inline"===("none"===c?C(t.nodeName):c)&&(h.display=c);else{d?"hidden"in d&&(p=d.hidden):d=Et.access(t,"fxshow",{}),i&&(d.hidden=!p),p?rt(t).show():u.done(function(){rt(t).hide()}),u.done(function(){var e;Et.remove(t,"fxshow");for(e in g)rt.style(t,e,g[e])});for(n in g)s=j(p?d[n]:0,n,u),n in d||(d[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function P(t,e){var o,n,r,i,s;for(o in t)if(n=rt.camelCase(o),r=e[n],i=t[o],rt.isArray(i)&&(r=i[1],i=t[o]=i[0]),o!==n&&(t[n]=i,delete t[o]),(s=rt.cssHooks[n])&&"expand"in s){i=s.expand(i),delete t[n];for(o in i)o in t||(t[o]=i[o],e[o]=r)}else e[n]=r}function F(t,e,o){var n,r,i=0,s=ie.length,a=rt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=te||D(),o=Math.max(0,c.startTime+c.duration-e),n=o/c.duration||0,i=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(i);return a.notifyWith(t,[c,i,o]),1>i&&l?o:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:rt.extend({},e),opts:rt.extend(!0,{specialEasing:{}},o),originalProperties:e,originalOptions:o,startTime:te||D(),duration:o.duration,tweens:[],createTween:function(e,o){var n=rt.Tween(t,c.opts,e,o,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var o=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;n>o;o++)c.tweens[o].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(P(u,c.opts.specialEasing);s>i;i++)if(n=ie[i].call(c,t,u,c.opts))return n;return rt.map(u,j,c),rt.isFunction(c.opts.start)&&c.opts.start.call(t,c),rt.fx.timer(rt.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(t){return function(e,o){"string"!=typeof e&&(o=e,e="*");var n,r=0,i=e.toLowerCase().match(yt)||[];if(rt.isFunction(o))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(o)):(t[n]=t[n]||[]).push(o)}}function U(t,e,o,n){function r(a){var l;return i[a]=!0,rt.each(t[a]||[],function(t,a){var c=a(e,o,n);return"string"!=typeof c||s||i[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var i={},s=t===Te;return r(e.dataTypes[0])||!i["*"]&&r("*")}function G(t,e){var o,n,r=rt.ajaxSettings.flatOptions||{};for(o in e)void 0!==e[o]&&((r[o]?t:n||(n={}))[o]=e[o]);return n&&rt.extend(!0,t,n),t}function V(t,e,o){for(var n,r,i,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in o)i=l[0];else{for(r in o){if(!l[0]||t.converters[r+" "+l[0]]){i=r;break}s||(s=r)}i=i||s}return i?(i!==l[0]&&l.unshift(i),o[i]):void 0}function W(t,e,o,n){var r,i,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(i=u.shift();i;)if(t.responseFields[i]&&(o[t.responseFields[i]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(s=c[l+" "+i]||c["* "+i]))for(r in c)if(a=r.split(" "),a[1]===i&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(i=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+i}}}return{state:"success",data:e}}function z(t,e,o,n){var r;if(rt.isArray(e))rt.each(e,function(e,r){o||we.test(t)?n(t,r):z(t+"["+("object"==typeof r?e:"")+"]",r,o,n)});else if(o||"object"!==rt.type(e))n(t,e);else for(r in e)z(t+"["+r+"]",e[r],o,n)}function q(t){return rt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var X=[],K=X.slice,Y=X.concat,$=X.push,Q=X.indexOf,J={},Z=J.toString,tt=J.hasOwnProperty,et={},ot=n.document,nt="2.1.1",rt=function(t,e){return new rt.fn.init(t,e)},it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,at=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};rt.fn=rt.prototype={jquery:nt,constructor:rt,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=rt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return rt.each(this,t,e)},map:function(t){return this.pushStack(rt.map(this,function(e,o){return t.call(e,o,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,o=+t+(0>t?e:0);return this.pushStack(o>=0&&e>o?[this[o]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:X.sort,splice:X.splice},rt.extend=rt.fn.extend=function(){var t,e,o,n,r,i,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||rt.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)o=s[e],n=t[e],s!==n&&(c&&n&&(rt.isPlainObject(n)||(r=rt.isArray(n)))?(r?(r=!1,i=o&&rt.isArray(o)?o:[]):i=o&&rt.isPlainObject(o)?o:{},s[e]=rt.extend(c,i,n)):void 0!==n&&(s[e]=n));return s},rt.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===rt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!rt.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"===rt.type(t)&&!t.nodeType&&!rt.isWindow(t)&&!(t.constructor&&!tt.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?J[Z.call(t)]||"object":typeof t},globalEval:function(t){var e,o=eval;(t=rt.trim(t))&&(1===t.indexOf("use strict")?(e=ot.createElement("script"),e.text=t,ot.head.appendChild(e).parentNode.removeChild(e)):o(t))},camelCase:function(t){return t.replace(st,"ms-").replace(at,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,o){var n=0,r=t.length,i=a(t);if(o){if(i)for(;r>n&&!1!==e.apply(t[n],o);n++);else for(n in t)if(!1===e.apply(t[n],o))break}else if(i)for(;r>n&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(it,"")},makeArray:function(t,e){var o=e||[];return null!=t&&(a(Object(t))?rt.merge(o,"string"==typeof t?[t]:t):$.call(o,t)),o},inArray:function(t,e,o){return null==e?-1:Q.call(e,t,o)},merge:function(t,e){for(var o=+e.length,n=0,r=t.length;o>n;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,o){for(var n=[],r=0,i=t.length,s=!o;i>r;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,o){var n,r=0,i=t.length,s=a(t),l=[];if(s)for(;i>r;r++)null!=(n=e(t[r],r,o))&&l.push(n);else for(r in t)null!=(n=e(t[r],r,o))&&l.push(n);return Y.apply([],l)},guid:1,proxy:function(t,e){var o,n,r;return"string"==typeof e&&(o=t[e],e=t,t=o),rt.isFunction(t)?(n=K.call(arguments,2),r=function(){return t.apply(e||this,n.concat(K.call(arguments)))},r.guid=t.guid=t.guid||rt.guid++,r):void 0},now:Date.now,support:et}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,o,n){var r,i,s,a,c,g,h,p,d,f;if((e?e.ownerDocument||e:P)!==A&&I(e),e=e||A,o=o||[],!t||"string"!=typeof t)return o;if(1!==(a=e.nodeType)&&9!==a)return[];if(L&&!n){if(r=mt.exec(t))if(s=r[1]){if(9===a){if(!(i=e.getElementById(s))||!i.parentNode)return o;if(i.id===s)return o.push(i),o}else if(e.ownerDocument&&(i=e.ownerDocument.getElementById(s))&&j(e,i)&&i.id===s)return o.push(i),o}else{if(r[2])return Q.apply(o,e.getElementsByTagName(t)),o;if((s=r[3])&&_.getElementsByClassName&&e.getElementsByClassName)return Q.apply(o,e.getElementsByClassName(s)),o}if(_.qsa&&(!R||!R.test(t))){if(p=h=M,d=e,f=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(g=k(t),(h=e.getAttribute("id"))?p=h.replace(vt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",c=g.length;c--;)g[c]=p+u(g[c]);d=yt.test(t)&&l(e.parentNode)||e,f=g.join(",")}if(f)try{return Q.apply(o,d.querySelectorAll(f)),o}catch(t){}finally{h||e.removeAttribute("id")}}}return C(t.replace(st,"$1"),e,o,n)}function o(){function t(o,n){return e.push(o+" ")>b.cacheLength&&delete t[e.shift()],t[o+" "]=n}var e=[];return t}function n(t){return t[M]=!0,t}function r(t){var e=A.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function i(t,e){for(var o=t.split("|"),n=t.length;n--;)b.attrHandle[o[n]]=e}function s(t,e){var o=e&&t,n=o&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||q)-(~t.sourceIndex||q);if(n)return n;if(o)for(;o=o.nextSibling;)if(o===e)return-1;return t?1:-1}function a(t){return n(function(e){return e=+e,n(function(o,n){for(var r,i=t([],o.length,e),s=i.length;s--;)o[r=i[s]]&&(o[r]=!(n[r]=o[r]))})})}function l(t){return t&&typeof t.getElementsByTagName!==z&&t}function c(){}function u(t){for(var e=0,o=t.length,n="";o>e;e++)n+=t[e].value;return n}function g(t,e,o){var n=e.dir,r=o&&"parentNode"===n,i=H++;return e.first?function(e,o,i){for(;e=e[n];)if(1===e.nodeType||r)return t(e,o,i)}:function(e,o,s){var a,l,c=[F,i];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,o,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[M]||(e[M]={}),(a=l[n])&&a[0]===F&&a[1]===i)return c[2]=a[2];if(l[n]=c,c[2]=t(e,o,s))return!0}}}function h(t){return t.length>1?function(e,o,n){for(var r=t.length;r--;)if(!t[r](e,o,n))return!1;return!0}:t[0]}function p(t,o,n){for(var r=0,i=o.length;i>r;r++)e(t,o[r],n);return n}function d(t,e,o,n,r){for(var i,s=[],a=0,l=t.length,c=null!=e;l>a;a++)(i=t[a])&&(!o||o(i,n,r))&&(s.push(i),c&&e.push(a));return s}function f(t,e,o,r,i,s){return r&&!r[M]&&(r=f(r)),i&&!i[M]&&(i=f(i,s)),n(function(n,s,a,l){var c,u,g,h=[],f=[],m=s.length,y=n||p(e||"*",a.nodeType?[a]:a,[]),v=!t||!n&&e?y:d(y,h,t,a,l),_=o?i||(n?t:m||r)?[]:s:v;if(o&&o(v,_,a,l),r)for(c=d(_,f),r(c,[],a,l),u=c.length;u--;)(g=c[u])&&(_[f[u]]=!(v[f[u]]=g));if(n){if(i||t){if(i){for(c=[],u=_.length;u--;)(g=_[u])&&c.push(v[u]=g);i(null,_=[],c,l)}for(u=_.length;u--;)(g=_[u])&&(c=i?Z.call(n,g):h[u])>-1&&(n[c]=!(s[c]=g))}}else _=d(_===s?_.splice(m,_.length):_),i?i(null,s,_,l):Q.apply(s,_)})}function m(t){for(var e,o,n,r=t.length,i=b.relative[t[0].type],s=i||b.relative[" "],a=i?1:0,l=g(function(t){return t===e},s,!0),c=g(function(t){return Z.call(e,t)>-1},s,!0),p=[function(t,o,n){return!i&&(n||o!==x)||((e=o).nodeType?l(t,o,n):c(t,o,n))}];r>a;a++)if(o=b.relative[t[a].type])p=[g(h(p),o)];else{if(o=b.filter[t[a].type].apply(null,t[a].matches),o[M]){for(n=++a;r>n&&!b.relative[t[n].type];n++);return f(a>1&&h(p),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(st,"$1"),o,n>a&&m(t.slice(a,n)),r>n&&m(t=t.slice(n)),r>n&&u(t))}p.push(o)}return h(p)}function y(t,o){var r=o.length>0,i=t.length>0,s=function(n,s,a,l,c){var u,g,h,p=0,f="0",m=n&&[],y=[],v=x,_=n||i&&b.find.TAG("*",c),E=F+=null==v?1:Math.random()||.1,S=_.length;for(c&&(x=s!==A&&s);f!==S&&null!=(u=_[f]);f++){if(i&&u){for(g=0;h=t[g++];)if(h(u,s,a)){l.push(u);break}c&&(F=E)}r&&((u=!h&&u)&&p--,n&&m.push(u))}if(p+=f,r&&f!==p){for(g=0;h=o[g++];)h(m,y,s,a);if(n){if(p>0)for(;f--;)m[f]||y[f]||(y[f]=Y.call(l));y=d(y)}Q.apply(l,y),c&&!n&&y.length>0&&p+o.length>1&&e.uniqueSort(l)}return c&&(F=E,x=v),m};return r?n(s):s}var v,_,b,E,S,k,T,C,x,w,B,I,A,N,L,R,D,O,j,M="sizzle"+-new Date,P=t.document,F=0,H=0,U=o(),G=o(),V=o(),W=function(t,e){return t===e&&(B=!0),0},z="undefined",q=1<<31,X={}.hasOwnProperty,K=[],Y=K.pop,$=K.push,Q=K.push,J=K.slice,Z=K.indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(this[e]===t)return e;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",et="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=ot.replace("w","w#"),rt="\\["+et+"*("+ot+")(?:"+et+"*([*^$|!~]?=)"+et+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+et+"*\\]",it=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),at=new RegExp("^"+et+"*,"+et+"*"),lt=new RegExp("^"+et+"*([>+~]|"+et+")"+et+"*"),ct=new RegExp("="+et+"*([^\\]'\"]*?)"+et+"*\\]","g"),ut=new RegExp(it),gt=new RegExp("^"+nt+"$"),ht={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,dt=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,vt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+et+"?|("+et+")|.)","ig"),bt=function(t,e,o){var n="0x"+e-65536;return n!==n||o?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(K=J.call(P.childNodes),P.childNodes),K[P.childNodes.length].nodeType}catch(t){Q={apply:K.length?function(t,e){$.apply(t,J.call(e))}:function(t,e){for(var o=t.length,n=0;t[o++]=e[n++];);t.length=o-1}}}_=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},I=e.setDocument=function(t){var e,o=t?t.ownerDocument||t:P,n=o.defaultView;return o!==A&&9===o.nodeType&&o.documentElement?(A=o,N=o.documentElement,L=!S(o),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){I()},!1):n.attachEvent&&n.attachEvent("onunload",function(){I()})),_.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=r(function(t){return t.appendChild(o.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=ft.test(o.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),_.getById=r(function(t){return N.appendChild(t).id=M,!o.getElementsByName||!o.getElementsByName(M).length}),_.getById?(b.find.ID=function(t,e){if(typeof e.getElementById!==z&&L){var o=e.getElementById(t);return o&&o.parentNode?[o]:[]}},b.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){var o=typeof t.getAttributeNode!==z&&t.getAttributeNode("id");return o&&o.value===e}}),b.find.TAG=_.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==z?e.getElementsByTagName(t):void 0}:function(t,e){var o,n=[],r=0,i=e.getElementsByTagName(t);if("*"===t){for(;o=i[r++];)1===o.nodeType&&n.push(o);return n}return i},b.find.CLASS=_.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==z&&L?e.getElementsByClassName(t):void 0},D=[],R=[],(_.qsa=ft.test(o.querySelectorAll))&&(r(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&R.push("[*^$]="+et+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+et+"*(?:value|"+tt+")"),t.querySelectorAll(":checked").length||R.push(":checked")}),r(function(t){var e=o.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+et+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(_.matchesSelector=ft.test(O=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(t){_.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),D.push("!=",it)}),R=R.length&&new RegExp(R.join("|")),D=D.length&&new RegExp(D.join("|")),e=ft.test(N.compareDocumentPosition),j=e||ft.test(N.contains)?function(t,e){var o=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(o.contains?o.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return B=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===o||t.ownerDocument===P&&j(P,t)?-1:e===o||e.ownerDocument===P&&j(P,e)?1:w?Z.call(w,t)-Z.call(w,e):0:4&n?-1:1)}:function(t,e){if(t===e)return B=!0,0;var n,r=0,i=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!i||!a)return t===o?-1:e===o?1:i?-1:a?1:w?Z.call(w,t)-Z.call(w,e):0;if(i===a)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?s(l[r],c[r]):l[r]===P?-1:c[r]===P?1:0},o):A},e.matches=function(t,o){return e(t,null,null,o)},e.matchesSelector=function(t,o){if((t.ownerDocument||t)!==A&&I(t),o=o.replace(ct,"='$1']"),!(!_.matchesSelector||!L||D&&D.test(o)||R&&R.test(o)))try{var n=O.call(t,o);if(n||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(o,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&I(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&I(t);var o=b.attrHandle[e.toLowerCase()],n=o&&X.call(b.attrHandle,e.toLowerCase())?o(t,e,!L):void 0;return void 0!==n?n:_.attributes||!L?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,o=[],n=0,r=0;if(B=!_.detectDuplicates,w=!_.sortStable&&t.slice(0),t.sort(W),B){for(;e=t[r++];)e===t[r]&&(n=o.push(r));for(;n--;)t.splice(o[n],1)}return w=null,t},E=e.getText=function(t){var e,o="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)o+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)o+=E(e);return o},b=e.selectors={cacheLength:50,createPseudo:n,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,o=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":o&&ut.test(o)&&(e=k(o,!0))&&(e=o.indexOf(")",o.length-e)-o.length)&&(t[0]=t[0].slice(0,e),t[2]=o.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+et+")"+t+"("+et+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==z&&t.getAttribute("class")||"")})},ATTR:function(t,o,n){return function(r){var i=e.attr(r,t);return null==i?"!="===o:!o||(i+="","="===o?i===n:"!="===o?i!==n:"^="===o?n&&0===i.indexOf(n):"*="===o?n&&i.indexOf(n)>-1:"$="===o?n&&i.slice(-n.length)===n:"~="===o?(" "+i+" ").indexOf(n)>-1:"|="===o&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,o,n,r){var i="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,o,l){var c,u,g,h,p,d,f=i!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(m){if(i){for(;f;){for(g=e;g=g[f];)if(a?g.nodeName.toLowerCase()===y:1===g.nodeType)return!1;d=f="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?m.firstChild:m.lastChild],s&&v){for(u=m[M]||(m[M]={}),c=u[t]||[],p=c[0]===F&&c[1],h=c[0]===F&&c[2],g=p&&m.childNodes[p];g=++p&&g&&g[f]||(h=p=0)||d.pop();)if(1===g.nodeType&&++h&&g===e){u[t]=[F,p,h];break}}else if(v&&(c=(e[M]||(e[M]={}))[t])&&c[0]===F)h=c[1];else for(;(g=++p&&g&&g[f]||(h=p=0)||d.pop())&&((a?g.nodeName.toLowerCase()!==y:1!==g.nodeType)||!++h||(v&&((g[M]||(g[M]={}))[t]=[F,h]),g!==e)););return(h-=r)===n||h%n==0&&h/n>=0}}},PSEUDO:function(t,o){var r,i=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[M]?i(o):i.length>1?(r=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=i(t,o),s=r.length;s--;)n=Z.call(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:n(function(t){var e=[],o=[],r=T(t.replace(st,"$1"));return r[M]?n(function(t,e,o,n){for(var i,s=r(t,null,n,[]),a=t.length;a--;)(i=s[a])&&(t[a]=!(e[a]=i))}):function(t,n,i){return e[0]=t,r(e,null,i,o),!o.pop()}}),has:n(function(t){return function(o){return e(t,o).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:n(function(t){return gt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,bt).toLowerCase(),function(e){var o;do{if(o=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(o=o.toLowerCase())===t||0===o.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var o=t.location&&t.location.hash;return o&&o.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return dt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,o){return[0>o?o+e:o]}),even:a(function(t,e){for(var o=0;e>o;o+=2)t.push(o);return t}),odd:a(function(t,e){for(var o=1;e>o;o+=2)t.push(o);return t}),lt:a(function(t,e,o){for(var n=0>o?o+e:o;--n>=0;)t.push(n);return t}),gt:a(function(t,e,o){for(var n=0>o?o+e:o;++n<e;)t.push(n);return t})}},b.pseudos.nth=b.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[v]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(v);for(v in{submit:!0,reset:!0})b.pseudos[v]=function(t){return function(e){var o=e.nodeName.toLowerCase();return("input"===o||"button"===o)&&e.type===t}}(v);return c.prototype=b.filters=b.pseudos,b.setFilters=new c,k=e.tokenize=function(t,o){var n,r,i,s,a,l,c,u=G[t+" "];if(u)return o?0:u.slice(0);for(a=t,l=[],c=b.preFilter;a;){(!n||(r=at.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),n=!1,(r=lt.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(st," ")}),a=a.slice(n.length));for(s in b.filter)!(r=ht[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return o?a.length:a?e.error(t):G(t,l).slice(0)},T=e.compile=function(t,e){var o,n=[],r=[],i=V[t+" "];if(!i){for(e||(e=k(t)),o=e.length;o--;)i=m(e[o]),i[M]?n.push(i):r.push(i);i=V(t,y(r,n)),i.selector=t}return i},C=e.select=function(t,e,o,n){var r,i,s,a,c,g="function"==typeof t&&t,h=!n&&k(t=g.selector||t);if(o=o||[],1===h.length){if(i=h[0]=h[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&_.getById&&9===e.nodeType&&L&&b.relative[i[1].type]){if(!(e=(b.find.ID(s.matches[0].replace(_t,bt),e)||[])[0]))return o;g&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(r=ht.needsContext.test(t)?0:i.length;r--&&(s=i[r],!b.relative[a=s.type]);)if((c=b.find[a])&&(n=c(s.matches[0].replace(_t,bt),yt.test(i[0].type)&&l(e.parentNode)||e))){if(i.splice(r,1),!(t=n.length&&u(i)))return Q.apply(o,n),o;break}}return(g||T(t,h))(n,e,!L,o,yt.test(t)&&l(e.parentNode)||e),o},_.sortStable=M.split("").sort(W).join("")===M,_.detectDuplicates=!!B,I(),_.sortDetached=r(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||i("type|href|height|width",function(t,e,o){return o?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||i("value",function(t,e,o){return o||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||i(tt,function(t,e,o){var n;return o?void 0:!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(n);rt.find=ct,rt.expr=ct.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ct.uniqueSort,rt.text=ct.getText,rt.isXMLDoc=ct.isXML,rt.contains=ct.contains;var ut=rt.expr.match.needsContext,gt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ht=/^.[^:#\[\.,]*$/;rt.filter=function(t,e,o){var n=e[0];return o&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?rt.find.matchesSelector(n,t)?[n]:[]:rt.find.matches(t,rt.grep(e,function(t){return 1===t.nodeType}))},rt.fn.extend({find:function(t){var e,o=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(rt(t).filter(function(){for(e=0;o>e;e++)if(rt.contains(r[e],this))return!0}));for(e=0;o>e;e++)rt.find(t,r[e],n);return n=this.pushStack(o>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(l(this,t||[],!1))},not:function(t){return this.pushStack(l(this,t||[],!0))},is:function(t){return!!l(this,"string"==typeof t&&ut.test(t)?rt(t):t||[],!1).length}});var pt,dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(rt.fn.init=function(t,e){var o,n;if(!t)return this;if("string"==typeof t){if(!(o="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:dt.exec(t))||!o[1]&&e)return!e||e.jquery?(e||pt).find(t):this.constructor(e).find(t);if(o[1]){if(e=e instanceof rt?e[0]:e,rt.merge(this,rt.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:ot,!0)),gt.test(o[1])&&rt.isPlainObject(e))for(o in e)rt.isFunction(this[o])?this[o](e[o]):this.attr(o,e[o]);return this}return n=ot.getElementById(o[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=ot,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):rt.isFunction(t)?void 0!==pt.ready?pt.ready(t):t(rt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),rt.makeArray(t,this))}).prototype=rt.fn,pt=rt(ot);var ft=/^(?:parents|prev(?:Until|All))/,mt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(t,e,o){for(var n=[],r=void 0!==o;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&rt(t).is(o))break;n.push(t)}return n},sibling:function(t,e){for(var o=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&o.push(t);return o}}),rt.fn.extend({has:function(t){var e=rt(t,this),o=e.length;return this.filter(function(){for(var t=0;o>t;t++)if(rt.contains(this,e[t]))return!0})},closest:function(t,e){for(var o,n=0,r=this.length,i=[],s=ut.test(t)||"string"!=typeof t?rt(t,e||this.context):0;r>n;n++)for(o=this[n];o&&o!==e;o=o.parentNode)if(o.nodeType<11&&(s?s.index(o)>-1:1===o.nodeType&&rt.find.matchesSelector(o,t))){i.push(o);break}return this.pushStack(i.length>1?rt.unique(i):i)},index:function(t){return t?"string"==typeof t?Q.call(rt(t),this[0]):Q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(rt.unique(rt.merge(this.get(),rt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return rt.dir(t,"parentNode")},parentsUntil:function(t,e,o){return rt.dir(t,"parentNode",o)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return rt.dir(t,"nextSibling")},prevAll:function(t){return rt.dir(t,"previousSibling")},nextUntil:function(t,e,o){return rt.dir(t,"nextSibling",o)},prevUntil:function(t,e,o){return rt.dir(t,"previousSibling",o)},siblings:function(t){return rt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return rt.sibling(t.firstChild)},contents:function(t){return t.contentDocument||rt.merge([],t.childNodes)}},function(t,e){rt.fn[t]=function(o,n){var r=rt.map(this,e,o);return"Until"!==t.slice(-5)&&(n=o),n&&"string"==typeof n&&(r=rt.filter(n,r)),this.length>1&&(mt[t]||rt.unique(r),ft.test(t)&&r.reverse()),this.pushStack(r)}});var yt=/\S+/g,vt={};rt.Callbacks=function(t){t="string"==typeof t?vt[t]||u(t):rt.extend({},t);var e,o,n,r,i,s,a=[],l=!t.once&&[],c=function(u){for(e=t.memory&&u,o=!0,s=r||0,r=0,i=a.length,n=!0;a&&i>s;s++)if(!1===a[s].apply(u[0],u[1])&&t.stopOnFalse){e=!1;break}n=!1,a&&(l?l.length&&c(l.shift()):e?a=[]:g.disable())},g={add:function(){if(a){var o=a.length;!function e(o){rt.each(o,function(o,n){var r=rt.type(n);"function"===r?t.unique&&g.has(n)||a.push(n):n&&n.length&&"string"!==r&&e(n)})}(arguments),n?i=a.length:e&&(r=o,c(e))}return this},remove:function(){return a&&rt.each(arguments,function(t,e){for(var o;(o=rt.inArray(e,a,o))>-1;)a.splice(o,1),n&&(i>=o&&i--,s>=o&&s--)}),this},has:function(t){return t?rt.inArray(t,a)>-1:!(!a||!a.length)},empty:function(){return a=[],i=0,this},disable:function(){return a=l=e=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,e||g.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!a||o&&!l||(e=e||[],e=[t,e.slice?e.slice():e],n?l.push(e):c(e)),this},fire:function(){return g.fireWith(this,arguments),this},fired:function(){return!!o}};return g},rt.extend({Deferred:function(t){var e=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],o="pending",n={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return rt.Deferred(function(o){rt.each(e,function(e,i){var s=rt.isFunction(t[e])&&t[e];r[i[1]](function(){var t=s&&s.apply(this,arguments);t&&rt.isFunction(t.promise)?t.promise().done(o.resolve).fail(o.reject).progress(o.notify):o[i[0]+"With"](this===n?o.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?rt.extend(t,n):n}},r={};return n.pipe=n.then,rt.each(e,function(t,i){var s=i[2],a=i[3];n[i[1]]=s.add,a&&s.add(function(){o=a},e[1^t][2].disable,e[2][2].lock),r[i[0]]=function(){return r[i[0]+"With"](this===r?n:this,arguments),this},r[i[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,o,n,r=0,i=K.call(arguments),s=i.length,a=1!==s||t&&rt.isFunction(t.promise)?s:0,l=1===a?t:rt.Deferred(),c=function(t,o,n){return function(r){o[t]=this,n[t]=arguments.length>1?K.call(arguments):r,n===e?l.notifyWith(o,n):--a||l.resolveWith(o,n)}};if(s>1)for(e=new Array(s),o=new Array(s),n=new Array(s);s>r;r++)i[r]&&rt.isFunction(i[r].promise)?i[r].promise().done(c(r,n,i)).fail(l.reject).progress(c(r,o,e)):--a;return a||l.resolveWith(n,i),l.promise()}});var _t;rt.fn.ready=function(t){return rt.ready.promise().done(t),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?rt.readyWait++:rt.ready(!0)},ready:function(t){(!0===t?--rt.readyWait:rt.isReady)||(rt.isReady=!0,!0!==t&&--rt.readyWait>0||(_t.resolveWith(ot,[rt]),rt.fn.triggerHandler&&(rt(ot).triggerHandler("ready"),rt(ot).off("ready"))))}}),rt.ready.promise=function(t){return _t||(_t=rt.Deferred(),"complete"===ot.readyState?setTimeout(rt.ready):(ot.addEventListener("DOMContentLoaded",g,!1),n.addEventListener("load",g,!1))),_t.promise(t)},rt.ready.promise();var bt=rt.access=function(t,e,o,n,r,i,s){var a=0,l=t.length,c=null==o;if("object"===rt.type(o)){r=!0;for(a in o)rt.access(t,e,a,o[a],!0,i,s)}else if(void 0!==n&&(r=!0,rt.isFunction(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,o){return c.call(rt(t),o)})),e))for(;l>a;a++)e(t[a],o,s?n:n.call(t[a],a,e(t[a],o)));return r?t:c?e.call(t):l?e(t[0],o):i};rt.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},h.uid=1,h.accepts=rt.acceptData,h.prototype={key:function(t){if(!h.accepts(t))return 0;var e={},o=t[this.expando];if(!o){o=h.uid++;try{e[this.expando]={value:o},Object.defineProperties(t,e)}catch(n){e[this.expando]=o,rt.extend(t,e)}}return this.cache[o]||(this.cache[o]={}),o},set:function(t,e,o){var n,r=this.key(t),i=this.cache[r];if("string"==typeof e)i[e]=o;else if(rt.isEmptyObject(i))rt.extend(this.cache[r],e);else for(n in e)i[n]=e[n];return i},get:function(t,e){var o=this.cache[this.key(t)];return void 0===e?o:o[e]},access:function(t,e,o){var n;return void 0===e||e&&"string"==typeof e&&void 0===o?(n=this.get(t,e),void 0!==n?n:this.get(t,rt.camelCase(e))):(this.set(t,e,o),void 0!==o?o:e)},remove:function(t,e){var o,n,r,i=this.key(t),s=this.cache[i];if(void 0===e)this.cache[i]={};else{rt.isArray(e)?n=e.concat(e.map(rt.camelCase)):(r=rt.camelCase(e),e in s?n=[e,r]:(n=r,n=n in s?[n]:n.match(yt)||[])),o=n.length;for(;o--;)delete s[n[o]]}},hasData:function(t){return!rt.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var Et=new h,St=new h,kt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tt=/([A-Z])/g;rt.extend({hasData:function(t){return St.hasData(t)||Et.hasData(t)},data:function(t,e,o){return St.access(t,e,o)},removeData:function(t,e){St.remove(t,e)},_data:function(t,e,o){return Et.access(t,e,o)},_removeData:function(t,e){Et.remove(t,e)}}),rt.fn.extend({data:function(t,e){var o,n,r,i=this[0],s=i&&i.attributes;if(void 0===t){if(this.length&&(r=St.get(i),1===i.nodeType&&!Et.get(i,"hasDataAttrs"))){for(o=s.length;o--;)s[o]&&(n=s[o].name,0===n.indexOf("data-")&&(n=rt.camelCase(n.slice(5)),p(i,n,r[n])));Et.set(i,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){St.set(this,t)}):bt(this,function(e){var o,n=rt.camelCase(t);if(i&&void 0===e){if(void 0!==(o=St.get(i,t)))return o;if(void 0!==(o=St.get(i,n)))return o;if(void 0!==(o=p(i,n,void 0)))return o}else this.each(function(){var o=St.get(this,n);St.set(this,n,e),-1!==t.indexOf("-")&&void 0!==o&&St.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){St.remove(this,t)})}}),rt.extend({queue:function(t,e,o){var n;return t?(e=(e||"fx")+"queue",n=Et.get(t,e),o&&(!n||rt.isArray(o)?n=Et.access(t,e,rt.makeArray(o)):n.push(o)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var o=rt.queue(t,e),n=o.length,r=o.shift(),i=rt._queueHooks(t,e),s=function(){rt.dequeue(t,e)};"inprogress"===r&&(r=o.shift(),n--),r&&("fx"===e&&o.unshift("inprogress"),delete i.stop,r.call(t,s,i)),!n&&i&&i.empty.fire()},_queueHooks:function(t,e){var o=e+"queueHooks";return Et.get(t,o)||Et.access(t,o,{empty:rt.Callbacks("once memory").add(function(){Et.remove(t,[e+"queue",o])})})}}),rt.fn.extend({queue:function(t,e){var o=2;return"string"!=typeof t&&(e=t,t="fx",o--),arguments.length<o?rt.queue(this[0],t):void 0===e?this:this.each(function(){var o=rt.queue(this,t,e);rt._queueHooks(this,t),"fx"===t&&"inprogress"!==o[0]&&rt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){rt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var o,n=1,r=rt.Deferred(),i=this,s=this.length,a=function(){--n||r.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(o=Et.get(i[s],t+"queueHooks"))&&o.empty&&(n++,o.empty.add(a));return a(),r.promise(e)}});var Ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=["Top","Right","Bottom","Left"],wt=function(t,e){return t=e||t,"none"===rt.css(t,"display")||!rt.contains(t.ownerDocument,t)},Bt=/^(?:checkbox|radio)$/i;!function(){var t=ot.createDocumentFragment(),e=t.appendChild(ot.createElement("div")),o=ot.createElement("input");o.setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),e.appendChild(o),et.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",et.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var It="undefined";et.focusinBubbles="onfocusin"in n;var At=/^key/,Nt=/^(?:mouse|pointer|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,Rt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(t,e,o,n,r){var i,s,a,l,c,u,g,h,p,d,f,m=Et.get(t);if(m)for(o.handler&&(i=o,o=i.handler,r=i.selector),o.guid||(o.guid=rt.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(e){return typeof rt!==It&&rt.event.triggered!==e.type?rt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(yt)||[""],c=e.length;c--;)a=Rt.exec(e[c])||[],p=f=a[1],d=(a[2]||"").split(".").sort(),p&&(g=rt.event.special[p]||{},p=(r?g.delegateType:g.bindType)||p,g=rt.event.special[p]||{},u=rt.extend({type:p,origType:f,data:n,handler:o,guid:o.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:d.join(".")},i),(h=l[p])||(h=l[p]=[],h.delegateCount=0,g.setup&&!1!==g.setup.call(t,n,d,s)||t.addEventListener&&t.addEventListener(p,s,!1)),g.add&&(g.add.call(t,u),u.handler.guid||(u.handler.guid=o.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),rt.event.global[p]=!0)},remove:function(t,e,o,n,r){var i,s,a,l,c,u,g,h,p,d,f,m=Et.hasData(t)&&Et.get(t);if(m&&(l=m.events)){for(e=(e||"").match(yt)||[""],c=e.length;c--;)if(a=Rt.exec(e[c])||[],p=f=a[1],d=(a[2]||"").split(".").sort(),p){for(g=rt.event.special[p]||{},p=(n?g.delegateType:g.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=h.length;i--;)u=h[i],!r&&f!==u.origType||o&&o.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(h.splice(i,1),u.selector&&h.delegateCount--,g.remove&&g.remove.call(t,u));s&&!h.length&&(g.teardown&&!1!==g.teardown.call(t,d,m.handle)||rt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)rt.event.remove(t,p+e[c],o,n,!0);rt.isEmptyObject(l)&&(delete m.handle,Et.remove(t,"events"))}},trigger:function(t,e,o,r){var i,s,a,l,c,u,g,h=[o||ot],p=tt.call(t,"type")?t.type:t,d=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=a=o=o||ot,3!==o.nodeType&&8!==o.nodeType&&!Lt.test(p+rt.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[rt.expando]?t:new rt.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=o),e=null==e?[t]:rt.makeArray(e,[t]),g=rt.event.special[p]||{},r||!g.trigger||!1!==g.trigger.apply(o,e))){if(!r&&!g.noBubble&&!rt.isWindow(o)){for(l=g.delegateType||p,Lt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(o.ownerDocument||ot)&&h.push(a.defaultView||a.parentWindow||n)}for(i=0;(s=h[i++])&&!t.isPropagationStopped();)t.type=i>1?l:g.bindType||p,u=(Et.get(s,"events")||{})[t.type]&&Et.get(s,"handle"),u&&u.apply(s,e),(u=c&&s[c])&&u.apply&&rt.acceptData(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||g._default&&!1!==g._default.apply(h.pop(),e)||!rt.acceptData(o)||c&&rt.isFunction(o[p])&&!rt.isWindow(o)&&(a=o[c],a&&(o[c]=null),rt.event.triggered=p,o[p](),rt.event.triggered=void 0,a&&(o[c]=a)),t.result}},dispatch:function(t){t=rt.event.fix(t);var e,o,n,r,i,s=[],a=K.call(arguments),l=(Et.get(this,"events")||{})[t.type]||[],c=rt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(s=rt.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,void 0!==(n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,a))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var o,n,r,i,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(n=[],o=0;a>o;o++)i=e[o],r=i.selector+" ",void 0===n[r]&&(n[r]=i.needsContext?rt(r,this).index(l)>=0:rt.find(r,this,null,[l]).length),n[r]&&n.push(i);n.length&&s.push({elem:l,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var o,n,r,i=e.button;return null==t.pageX&&null!=e.clientX&&(o=t.target.ownerDocument||ot,n=o.documentElement,r=o.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===i||(t.which=1&i?1:2&i?3:4&i?2:0),t}},fix:function(t){if(t[rt.expando])return t;var e,o,n,r=t.type,i=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Nt.test(r)?this.mouseHooks:At.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new rt.Event(i),e=n.length;e--;)o=n[e],t[o]=i[o];return t.target||(t.target=ot),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,i):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&rt.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return rt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,o,n){var r=rt.extend(new rt.Event,o,{type:t,isSimulated:!0,originalEvent:{}});n?rt.event.trigger(r,null,e):rt.event.dispatch.call(e,r),r.isDefaultPrevented()&&o.preventDefault()}},rt.removeEvent=function(t,e,o){t.removeEventListener&&t.removeEventListener(e,o,!1)},rt.Event=function(t,e){return this instanceof rt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?d:f):this.type=t,e&&rt.extend(this,e),this.timeStamp=t&&t.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(t,e)},rt.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){rt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var o,n=this,r=t.relatedTarget,i=t.handleObj;return(!r||r!==n&&!rt.contains(n,r))&&(t.type=i.origType,o=i.handler.apply(this,arguments),t.type=e),o}}}),et.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(t,e){var o=function(t){rt.event.simulate(e,t.target,rt.event.fix(t),!0)};rt.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=Et.access(n,e);r||n.addEventListener(t,o,!0),Et.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Et.access(n,e)-1;r?Et.access(n,e,r):(n.removeEventListener(t,o,!0),Et.remove(n,e))}}}),rt.fn.extend({on:function(t,e,o,n,r){var i,s;if("object"==typeof t){"string"!=typeof e&&(o=o||e,e=void 0);for(s in t)this.on(s,e,o,t[s],r);return this}if(null==o&&null==n?(n=e,o=e=void 0):null==n&&("string"==typeof e?(n=o,o=void 0):(n=o,o=e,e=void 0)),!1===n)n=f;else if(!n)return this;return 1===r&&(i=n,n=function(t){return rt().off(t),i.apply(this,arguments)},n.guid=i.guid||(i.guid=rt.guid++)),this.each(function(){rt.event.add(this,t,n,o,e)})},one:function(t,e,o,n){return this.on(t,e,o,n,1)},off:function(t,e,o){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,rt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(!1===e||"function"==typeof e)&&(o=e,e=void 0),!1===o&&(o=f),this.each(function(){rt.event.remove(this,t,o,e)})},trigger:function(t,e){return this.each(function(){rt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var o=this[0];return o?rt.event.trigger(t,e,o,!0):void 0}});var Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,jt=/<|&#?\w+;/,Mt=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ft=/^$|\/(?:java|ecma)script/i,Ht=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Gt.optgroup=Gt.option,Gt.tbody=Gt.tfoot=Gt.colgroup=Gt.caption=Gt.thead,Gt.th=Gt.td,rt.extend({clone:function(t,e,o){var n,r,i,s,a=t.cloneNode(!0),l=rt.contains(t.ownerDocument,t);if(!(et.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||rt.isXMLDoc(t)))for(s=S(a),i=S(t),n=0,r=i.length;r>n;n++)k(i[n],s[n]);if(e)if(o)for(i=i||S(t),s=s||S(a),n=0,r=i.length;r>n;n++)E(i[n],s[n]);else E(t,a);return s=S(a,"script"),s.length>0&&b(s,!l&&S(t,"script")),a},buildFragment:function(t,e,o,n){for(var r,i,s,a,l,c,u=e.createDocumentFragment(),g=[],h=0,p=t.length;p>h;h++)if((r=t[h])||0===r)if("object"===rt.type(r))rt.merge(g,r.nodeType?[r]:r);else if(jt.test(r)){for(i=i||u.appendChild(e.createElement("div")),s=(Ot.exec(r)||["",""])[1].toLowerCase(),a=Gt[s]||Gt._default,i.innerHTML=a[1]+r.replace(Dt,"<$1></$2>")+a[2],c=a[0];c--;)i=i.lastChild;rt.merge(g,i.childNodes),i=u.firstChild,i.textContent=""}else g.push(e.createTextNode(r));for(u.textContent="",h=0;r=g[h++];)if((!n||-1===rt.inArray(r,n))&&(l=rt.contains(r.ownerDocument,r),i=S(u.appendChild(r),"script"),l&&b(i),o))for(c=0;r=i[c++];)Ft.test(r.type||"")&&o.push(r);return u},cleanData:function(t){for(var e,o,n,r,i=rt.event.special,s=0;void 0!==(o=t[s]);s++){if(rt.acceptData(o)&&(r=o[Et.expando])&&(e=Et.cache[r])){if(e.events)for(n in e.events)i[n]?rt.event.remove(o,n):rt.removeEvent(o,n,e.handle);Et.cache[r]&&delete Et.cache[r]}delete St.cache[o[St.expando]]}}}),rt.fn.extend({text:function(t){return bt(this,function(t){return void 0===t?rt.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){y(this,t).appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var o,n=t?rt.filter(t,this):this,r=0;null!=(o=n[r]);r++)e||1!==o.nodeType||rt.cleanData(S(o)),o.parentNode&&(e&&rt.contains(o.ownerDocument,o)&&b(S(o,"script")),o.parentNode.removeChild(o));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(rt.cleanData(S(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return rt.clone(this,t,e)})},html:function(t){return bt(this,function(t){var e=this[0]||{},o=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Mt.test(t)&&!Gt[(Ot.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Dt,"<$1></$2>");try{for(;n>o;o++)e=this[o]||{},1===e.nodeType&&(rt.cleanData(S(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,rt.cleanData(S(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var o,n,r,i,s,a,l=0,c=this.length,u=this,g=c-1,h=t[0],p=rt.isFunction(h);if(p||c>1&&"string"==typeof h&&!et.checkClone&&Pt.test(h))return this.each(function(o){var n=u.eq(o);p&&(t[0]=h.call(this,o,n.html())),n.domManip(t,e)});if(c&&(o=rt.buildFragment(t,this[0].ownerDocument,!1,this),n=o.firstChild,1===o.childNodes.length&&(o=n),n)){for(r=rt.map(S(o,"script"),v),i=r.length;c>l;l++)s=o,l!==g&&(s=rt.clone(s,!0,!0),i&&rt.merge(r,S(s,"script"))),e.call(this[l],s,l);if(i)for(a=r[r.length-1].ownerDocument,rt.map(r,_),l=0;i>l;l++)s=r[l],Ft.test(s.type||"")&&!Et.access(s,"globalEval")&&rt.contains(a,s)&&(s.src?rt._evalUrl&&rt._evalUrl(s.src):rt.globalEval(s.textContent.replace(Ut,"")))}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){rt.fn[t]=function(t){for(var o,n=[],r=rt(t),i=r.length-1,s=0;i>=s;s++)o=s===i?this:this.clone(!0),rt(r[s])[e](o),$.apply(n,o.get());return this.pushStack(n)}});var Vt,Wt={},zt=/^margin/,qt=new RegExp("^("+Ct+")(?!px)[a-z%]+$","i"),Xt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var t=n.getComputedStyle(s,null);e="1%"!==t.top,o="4px"===t.width,r.removeChild(i)}var e,o,r=ot.documentElement,i=ot.createElement("div"),s=ot.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",et.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s),n.getComputedStyle&&rt.extend(et,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==o&&t(),o},reliableMarginRight:function(){var t,e=s.appendChild(ot.createElement("div"));return e.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",s.style.width="1px",r.appendChild(i),t=!parseFloat(n.getComputedStyle(e,null).marginRight),r.removeChild(i),t}}))}(),rt.swap=function(t,e,o,n){var r,i,s={};for(i in e)s[i]=t.style[i],t.style[i]=e[i];r=o.apply(t,n||[]);for(i in e)t.style[i]=s[i];return r};var Kt=/^(none|table(?!-c[ea]).+)/,Yt=new RegExp("^("+Ct+")(.*)$","i"),$t=new RegExp("^([+-])=("+Ct+")","i"),Qt={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var o=x(t,"opacity");return""===o?"1":o}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,o,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,i,s,a=rt.camelCase(e),l=t.style;return e=rt.cssProps[a]||(rt.cssProps[a]=B(l,a)),s=rt.cssHooks[e]||rt.cssHooks[a],void 0===o?s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e]:(i=typeof o,"string"===i&&(r=$t.exec(o))&&(o=(r[1]+1)*r[2]+parseFloat(rt.css(t,e)),i="number"),void(null!=o&&o===o&&("number"!==i||rt.cssNumber[a]||(o+="px"),et.clearCloneStyle||""!==o||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(o=s.set(t,o,n))||(l[e]=o))))}},css:function(t,e,o,n){var r,i,s,a=rt.camelCase(e);return e=rt.cssProps[a]||(rt.cssProps[a]=B(t.style,a)),s=rt.cssHooks[e]||rt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,o)),void 0===r&&(r=x(t,e,n)),"normal"===r&&e in Jt&&(r=Jt[e]),""===o||o?(i=parseFloat(r),!0===o||rt.isNumeric(i)?i||0:r):r}}),rt.each(["height","width"],function(t,e){rt.cssHooks[e]={get:function(t,o,n){return o?Kt.test(rt.css(t,"display"))&&0===t.offsetWidth?rt.swap(t,Qt,function(){return N(t,e,n)}):N(t,e,n):void 0},set:function(t,o,n){var r=n&&Xt(t);return I(t,o,n?A(t,e,n,"border-box"===rt.css(t,"boxSizing",!1,r),r):0)}}}),rt.cssHooks.marginRight=w(et.reliableMarginRight,function(t,e){return e?rt.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(t,e){rt.cssHooks[t+e]={expand:function(o){for(var n=0,r={},i="string"==typeof o?o.split(" "):[o];4>n;n++)r[t+xt[n]+e]=i[n]||i[n-2]||i[0];return r}},zt.test(t)||(rt.cssHooks[t+e].set=I)}),rt.fn.extend({css:function(t,e){return bt(this,function(t,e,o){var n,r,i={},s=0;if(rt.isArray(e)){for(n=Xt(t),r=e.length;r>s;s++)i[e[s]]=rt.css(t,e[s],!1,n);return i}return void 0!==o?rt.style(t,e,o):rt.css(t,e)},t,e,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){wt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=R,R.prototype={constructor:R,init:function(t,e,o,n,r,i){this.elem=t,this.prop=o,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=i||(rt.cssNumber[o]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,o=R.propHooks[this.prop];return this.pos=e=this.options.duration?rt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),o&&o.set?o.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=rt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){rt.fx.step[t.prop]?rt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[rt.cssProps[t.prop]]||rt.cssHooks[t.prop])?rt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},rt.fx=R.prototype.init,rt.fx.step={};var te,ee,oe=/^(?:toggle|show|hide)$/,ne=new RegExp("^(?:([+-])=|)("+Ct+")([a-z%]*)$","i"),re=/queueHooks$/,ie=[M],se={"*":[function(t,e){var o=this.createTween(t,e),n=o.cur(),r=ne.exec(e),i=r&&r[3]||(rt.cssNumber[t]?"":"px"),s=(rt.cssNumber[t]||"px"!==i&&+n)&&ne.exec(rt.css(o.elem,t)),a=1,l=20;if(s&&s[3]!==i){i=i||s[3],r=r||[],s=+n||1;do{a=a||".5",s/=a,rt.style(o.elem,t,s+i)}while(a!==(a=o.cur()/n)&&1!==a&&--l)}return r&&(s=o.start=+s||+n||0,o.unit=i,o.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),o}]};rt.Animation=rt.extend(F,{tweener:function(t,e){rt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var o,n=0,r=t.length;r>n;n++)o=t[n],se[o]=se[o]||[],se[o].unshift(e)},prefilter:function(t,e){e?ie.unshift(t):ie.push(t)}}),rt.speed=function(t,e,o){var n=t&&"object"==typeof t?rt.extend({},t):{complete:o||!o&&e||rt.isFunction(t)&&t,duration:t,easing:o&&e||e&&!rt.isFunction(e)&&e};return n.duration=rt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in rt.fx.speeds?rt.fx.speeds[n.duration]:rt.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){rt.isFunction(n.old)&&n.old.call(this),n.queue&&rt.dequeue(this,n.queue)},n},rt.fn.extend({fadeTo:function(t,e,o,n){return this.filter(wt).css("opacity",0).show().end().animate({opacity:e},t,o,n)},animate:function(t,e,o,n){var r=rt.isEmptyObject(t),i=rt.speed(e,o,n),s=function(){var e=F(this,rt.extend({},t),i);(r||Et.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(t,e,o){var n=function(t){var e=t.stop;delete t.stop,e(o)};return"string"!=typeof t&&(o=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",i=rt.timers,s=Et.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&re.test(r)&&n(s[r]);for(r=i.length;r--;)i[r].elem!==this||null!=t&&i[r].queue!==t||(i[r].anim.stop(o),e=!1,i.splice(r,1));(e||!o)&&rt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,o=Et.get(this),n=o[t+"queue"],r=o[t+"queueHooks"],i=rt.timers,s=n?n.length:0;for(o.finish=!0,rt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete o.finish})}}),rt.each(["toggle","show","hide"],function(t,e){var o=rt.fn[e];rt.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(O(e,!0),t,n,r)}}),rt.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){rt.fn[t]=function(t,o,n){return this.animate(e,t,o,n)}}),rt.timers=[],rt.fx.tick=function(){var t,e=0,o=rt.timers;for(te=rt.now();e<o.length;e++)(t=o[e])()||o[e]!==t||o.splice(e--,1);o.length||rt.fx.stop(),te=void 0},rt.fx.timer=function(t){rt.timers.push(t),t()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){ee||(ee=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(ee),ee=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(t,e){return t=rt.fx?rt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,o){var n=setTimeout(e,t);o.stop=function(){clearTimeout(n)}})},function(){var t=ot.createElement("input"),e=ot.createElement("select"),o=e.appendChild(ot.createElement("option"));t.type="checkbox",et.checkOn=""!==t.value,et.optSelected=o.selected,e.disabled=!0,et.optDisabled=!o.disabled,t=ot.createElement("input"),t.value="t",t.type="radio",et.radioValue="t"===t.value}();var ae,le=rt.expr.attrHandle;rt.fn.extend({attr:function(t,e){return bt(this,rt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){rt.removeAttr(this,t)})}}),rt.extend({attr:function(t,e,o){var n,r,i=t.nodeType;if(t&&3!==i&&8!==i&&2!==i)return typeof t.getAttribute===It?rt.prop(t,e,o):(1===i&&rt.isXMLDoc(t)||(e=e.toLowerCase(),n=rt.attrHooks[e]||(rt.expr.match.bool.test(e)?ae:void 0)),void 0===o?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=rt.find.attr(t,e),null==r?void 0:r):null!==o?n&&"set"in n&&void 0!==(r=n.set(t,o,e))?r:(t.setAttribute(e,o+""),o):void rt.removeAttr(t,e))},removeAttr:function(t,e){var o,n,r=0,i=e&&e.match(yt);if(i&&1===t.nodeType)for(;o=i[r++];)n=rt.propFix[o]||o,rt.expr.match.bool.test(o)&&(t[n]=!1),t.removeAttribute(o)},attrHooks:{type:{set:function(t,e){if(!et.radioValue&&"radio"===e&&rt.nodeName(t,"input")){var o=t.value;return t.setAttribute("type",e),o&&(t.value=o),e}}}}}),ae={set:function(t,e,o){return!1===e?rt.removeAttr(t,o):t.setAttribute(o,o),o}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(t,e){var o=le[e]||rt.find.attr;le[e]=function(t,e,n){var r,i;return n||(i=le[e],le[e]=r,r=null!=o(t,e,n)?e.toLowerCase():null,le[e]=i),r}});var ce=/^(?:input|select|textarea|button)$/i;rt.fn.extend({prop:function(t,e){return bt(this,rt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[rt.propFix[t]||t]})}}),rt.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,o){var n,r,i,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return i=1!==s||!rt.isXMLDoc(t),i&&(e=rt.propFix[e]||e,r=rt.propHooks[e]),void 0!==o?r&&"set"in r&&void 0!==(n=r.set(t,o,e))?n:t[e]=o:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ce.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),et.optSelected||(rt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this});var ue=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(t){var e,o,n,r,i,s,a="string"==typeof t&&t,l=0,c=this.length;if(rt.isFunction(t))return this.each(function(e){rt(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(yt)||[];c>l;l++)if(o=this[l],n=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(ue," "):" ")){for(i=0;r=e[i++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=rt.trim(n),o.className!==s&&(o.className=s)}return this},removeClass:function(t){var e,o,n,r,i,s,a=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(rt.isFunction(t))return this.each(function(e){rt(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(yt)||[];c>l;l++)if(o=this[l],n=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(ue," "):"")){for(i=0;r=e[i++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=t?rt.trim(n):"",o.className!==s&&(o.className=s)}return this},toggleClass:function(t,e){var o=typeof t;return"boolean"==typeof e&&"string"===o?e?this.addClass(t):this.removeClass(t):this.each(rt.isFunction(t)?function(o){rt(this).toggleClass(t.call(this,o,this.className,e),e)}:function(){if("string"===o)for(var e,n=0,r=rt(this),i=t.match(yt)||[];e=i[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(o===It||"boolean"===o)&&(this.className&&Et.set(this,"__className__",this.className),this.className=this.className||!1===t?"":Et.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",o=0,n=this.length;n>o;o++)if(1===this[o].nodeType&&(" "+this[o].className+" ").replace(ue," ").indexOf(e)>=0)return!0;return!1}});var ge=/\r/g;rt.fn.extend({val:function(t){var e,o,n,r=this[0];return arguments.length?(n=rt.isFunction(t),this.each(function(o){var r;1===this.nodeType&&(r=n?t.call(this,o,rt(this).val()):t,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(t){return null==t?"":t+""})),(e=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(o=e.get(r,"value"))?o:(o=r.value,"string"==typeof o?o.replace(ge,""):null==o?"":o)):void 0}}),rt.extend({valHooks:{option:{get:function(t){var e=rt.find.attr(t,"value");return null!=e?e:rt.trim(rt.text(t))}},select:{get:function(t){for(var e,o,n=t.options,r=t.selectedIndex,i="select-one"===t.type||0>r,s=i?null:[],a=i?r+1:n.length,l=0>r?a:i?r:0;a>l;l++)if(o=n[l],!(!o.selected&&l!==r||(et.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&rt.nodeName(o.parentNode,"optgroup"))){if(e=rt(o).val(),i)return e;s.push(e)}return s},set:function(t,e){for(var o,n,r=t.options,i=rt.makeArray(e),s=r.length;s--;)n=r[s],(n.selected=rt.inArray(n.value,i)>=0)&&(o=!0);return o||(t.selectedIndex=-1),i}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(t,e){return rt.isArray(e)?t.checked=rt.inArray(rt(t).val(),e)>=0:void 0}},et.checkOn||(rt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){rt.fn[e]=function(t,o){return arguments.length>0?this.on(e,null,t,o):this.trigger(e)}}),rt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,o){return this.on(t,null,e,o)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,o,n){return this.on(e,t,o,n)},undelegate:function(t,e,o){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",o)}});var he=rt.now(),pe=/\?/;rt.parseJSON=function(t){return JSON.parse(t+"")},rt.parseXML=function(t){var e,o;if(!t||"string"!=typeof t)return null;try{o=new DOMParser,e=o.parseFromString(t,"text/xml")}catch(t){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&rt.error("Invalid XML: "+t),e};var de,fe,me=/#.*$/,ye=/([?&])_=[^&]*/,ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,_e=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,be=/^(?:GET|HEAD)$/,Ee=/^\/\//,Se=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ke={},Te={},Ce="*/".concat("*");try{fe=location.href}catch(t){fe=ot.createElement("a"),fe.href="",fe=fe.href}de=Se.exec(fe.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fe,type:"GET",isLocal:_e.test(de[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ce,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?G(G(t,rt.ajaxSettings),e):G(rt.ajaxSettings,t)},ajaxPrefilter:H(ke),ajaxTransport:H(Te),ajax:function(t,e){function o(t,e,o,s){var l,u,y,v,b,S=e;2!==_&&(_=2,a&&clearTimeout(a),n=void 0,i=s||"",E.readyState=t>0?4:0,l=t>=200&&300>t||304===t,o&&(v=V(g,E,o)),v=W(g,v,E,l),l?(g.ifModified&&(b=E.getResponseHeader("Last-Modified"),b&&(rt.lastModified[r]=b),(b=E.getResponseHeader("etag"))&&(rt.etag[r]=b)),204===t||"HEAD"===g.type?S="nocontent":304===t?S="notmodified":(S=v.state,u=v.data,y=v.error,l=!y)):(y=S,(t||!S)&&(S="error",0>t&&(t=0))),E.status=t,E.statusText=(e||S)+"",l?d.resolveWith(h,[u,S,E]):d.rejectWith(h,[E,S,y]),E.statusCode(m),m=void 0,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[E,g,l?u:y]),f.fireWith(h,[E,S]),c&&(p.trigger("ajaxComplete",[E,g]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,i,s,a,l,c,u,g=rt.ajaxSetup({},e),h=g.context||g,p=g.context&&(h.nodeType||h.jquery)?rt(h):rt.event,d=rt.Deferred(),f=rt.Callbacks("once memory"),m=g.statusCode||{},y={},v={},_=0,b="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!s)for(s={};e=ve.exec(i);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?i:null},setRequestHeader:function(t,e){var o=t.toLowerCase();return _||(t=v[o]=v[o]||t,y[t]=e),this},overrideMimeType:function(t){return _||(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)m[e]=[m[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||b;return n&&n.abort(e),o(0,e),this}};if(d.promise(E).complete=f.add,E.success=E.done,E.error=E.fail,g.url=((t||g.url||fe)+"").replace(me,"").replace(Ee,de[1]+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=rt.trim(g.dataType||"*").toLowerCase().match(yt)||[""],null==g.crossDomain&&(l=Se.exec(g.url.toLowerCase()),g.crossDomain=!(!l||l[1]===de[1]&&l[2]===de[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(de[3]||("http:"===de[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=rt.param(g.data,g.traditional)),U(ke,g,e,E),2===_)return E;c=g.global,c&&0==rt.active++&&rt.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!be.test(g.type),r=g.url,g.hasContent||(g.data&&(r=g.url+=(pe.test(r)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=ye.test(r)?r.replace(ye,"$1_="+he++):r+(pe.test(r)?"&":"?")+"_="+he++)),g.ifModified&&(rt.lastModified[r]&&E.setRequestHeader("If-Modified-Since",rt.lastModified[r]),rt.etag[r]&&E.setRequestHeader("If-None-Match",rt.etag[r])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&E.setRequestHeader("Content-Type",g.contentType),E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ce+"; q=0.01":""):g.accepts["*"]);for(u in g.headers)E.setRequestHeader(u,g.headers[u]);if(g.beforeSend&&(!1===g.beforeSend.call(h,E,g)||2===_))return E.abort();b="abort";for(u in{success:1,error:1,complete:1})E[u](g[u]);if(n=U(Te,g,e,E)){E.readyState=1,c&&p.trigger("ajaxSend",[E,g]),g.async&&g.timeout>0&&(a=setTimeout(function(){E.abort("timeout")},g.timeout));try{_=1,n.send(y,o)}catch(t){if(!(2>_))throw t;o(-1,t)}}else o(-1,"No Transport");return E},getJSON:function(t,e,o){return rt.get(t,e,o,"json")},getScript:function(t,e){return rt.get(t,void 0,e,"script")}}),rt.each(["get","post"],function(t,e){rt[e]=function(t,o,n,r){return rt.isFunction(o)&&(r=r||n,n=o,o=void 0),rt.ajax({url:t,type:e,dataType:r,data:o,success:n})}}),rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){rt.fn[e]=function(t){return this.on(e,t)}}),rt._evalUrl=function(t){return rt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},rt.fn.extend({wrapAll:function(t){var e;return rt.isFunction(t)?this.each(function(e){rt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=rt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(rt.isFunction(t)?function(e){rt(this).wrapInner(t.call(this,e))}:function(){var e=rt(this),o=e.contents();o.length?o.wrapAll(t):e.append(t)})},wrap:function(t){var e=rt.isFunction(t);return this.each(function(o){rt(this).wrapAll(e?t.call(this,o):t)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},rt.expr.filters.visible=function(t){return!rt.expr.filters.hidden(t)};var xe=/%20/g,we=/\[\]$/,Be=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;rt.param=function(t,e){var o,n=[],r=function(t,e){e=rt.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(t)||t.jquery&&!rt.isPlainObject(t))rt.each(t,function(){r(this.name,this.value)});else for(o in t)z(o,t[o],e,r);return n.join("&").replace(xe,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rt.prop(this,"elements");return t?rt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rt(this).is(":disabled")&&Ae.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!Bt.test(t))}).map(function(t,e){var o=rt(this).val();return null==o?null:rt.isArray(o)?rt.map(o,function(t){return{name:e.name,value:t.replace(Be,"\r\n")}}):{name:e.name,value:o.replace(Be,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ne=0,Le={},Re={0:200,1223:204},De=rt.ajaxSettings.xhr();n.ActiveXObject&&rt(n).on("unload",function(){for(var t in Le)Le[t]()}),et.cors=!!De&&"withCredentials"in De,et.ajax=De=!!De,rt.ajaxTransport(function(t){var e;return et.cors||De&&!t.crossDomain?{send:function(o,n){var r,i=t.xhr(),s=++Ne;if(i.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)i[r]=t.xhrFields[r];t.mimeType&&i.overrideMimeType&&i.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(r in o)i.setRequestHeader(r,o[r]);e=function(t){return function(){e&&(delete Le[s],e=i.onload=i.onerror=null,"abort"===t?i.abort():"error"===t?n(i.status,i.statusText):n(Re[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=e(),i.onerror=e("error"),e=Le[s]=e("abort");try{i.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}:void 0}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return rt.globalEval(t),t}}}),rt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),rt.ajaxTransport("script",function(t){if(t.crossDomain){var e,o;return{send:function(n,r){e=rt("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",o=function(t){e.remove(),o=null,t&&r("error"===t.type?404:200,t.type)}),ot.head.appendChild(e[0])},abort:function(){o&&o()}}}});var Oe=[],je=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Oe.pop()||rt.expando+"_"+he++;return this[t]=!0,t}}),rt.ajaxPrefilter("json jsonp",function(t,e,o){var r,i,s,a=!1!==t.jsonp&&(je.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&je.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(je,"$1"+r):!1!==t.jsonp&&(t.url+=(pe.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||rt.error(r+" was not called"),s[0]},t.dataTypes[0]="json",i=n[r],n[r]=function(){s=arguments},o.always(function(){n[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,Oe.push(r)),s&&rt.isFunction(i)&&i(s[0]),s=i=void 0}),"script"):void 0}),rt.parseHTML=function(t,e,o){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(o=e,e=!1),e=e||ot;var n=gt.exec(t),r=!o&&[];return n?[e.createElement(n[1])]:(n=rt.buildFragment([t],e,r),r&&r.length&&rt(r).remove(),rt.merge([],n.childNodes))};var Me=rt.fn.load;rt.fn.load=function(t,e,o){if("string"!=typeof t&&Me)return Me.apply(this,arguments);var n,r,i,s=this,a=t.indexOf(" ");return a>=0&&(n=rt.trim(t.slice(a)),t=t.slice(0,a)),rt.isFunction(e)?(o=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&rt.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){i=arguments,s.html(n?rt("<div>").append(rt.parseHTML(t)).find(n):t)}).complete(o&&function(t,e){s.each(o,i||[t.responseText,e,t])}),this},rt.expr.filters.animated=function(t){return rt.grep(rt.timers,function(e){return t===e.elem}).length};var Pe=n.document.documentElement;rt.offset={setOffset:function(t,e,o){var n,r,i,s,a,l,c,u=rt.css(t,"position"),g=rt(t),h={};"static"===u&&(t.style.position="relative"),a=g.offset(),i=rt.css(t,"top"),l=rt.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(i+l).indexOf("auto")>-1,c?(n=g.position(),s=n.top,r=n.left):(s=parseFloat(i)||0,r=parseFloat(l)||0),rt.isFunction(e)&&(e=e.call(t,o,a)),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):g.css(h)}},rt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){rt.offset.setOffset(this,t,e)});var e,o,n=this[0],r={top:0,left:0},i=n&&n.ownerDocument;return i?(e=i.documentElement,rt.contains(e,n)?(typeof n.getBoundingClientRect!==It&&(r=n.getBoundingClientRect()),o=q(i),{top:r.top+o.pageYOffset-e.clientTop,left:r.left+o.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,o=this[0],n={top:0,left:0};return"fixed"===rt.css(o,"position")?e=o.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),rt.nodeName(t[0],"html")||(n=t.offset()),n.top+=rt.css(t[0],"borderTopWidth",!0),n.left+=rt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-rt.css(o,"marginTop",!0),left:e.left-n.left-rt.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Pe;t&&!rt.nodeName(t,"html")&&"static"===rt.css(t,"position");)t=t.offsetParent;return t||Pe})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var o="pageYOffset"===e;rt.fn[t]=function(r){return bt(this,function(t,r,i){var s=q(t);return void 0===i?s?s[e]:t[r]:void(s?s.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):t[r]=i)},t,r,arguments.length,null)}}),rt.each(["top","left"],function(t,e){rt.cssHooks[e]=w(et.pixelPosition,function(t,o){return o?(o=x(t,e),qt.test(o)?rt(t).position()[e]+"px":o):void 0})}),rt.each({Height:"height",Width:"width"},function(t,e){rt.each({padding:"inner"+t,content:e,"":"outer"+t},function(o,n){rt.fn[n]=function(n,r){var i=arguments.length&&(o||"boolean"!=typeof n),s=o||(!0===n||!0===r?"margin":"border");return bt(this,function(e,o,n){var r;return rt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?rt.css(e,o,s):rt.style(e,o,n,s)},e,i?n:void 0,i,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,o(2)&&(r=[],void 0!==(i=function(){return rt}.apply(e,r))&&(t.exports=i));var Fe=n.jQuery,He=n.$;return rt.noConflict=function(t){return n.$===rt&&(n.$=He),t&&n.jQuery===rt&&(n.jQuery=Fe),rt},typeof s===It&&(n.jQuery=n.$=rt),rt}),t.exports=n}).call(e,o(0))},function(t,e,o){(function(e){var o={};!function(t){function e(){this._settings=[],this._extensions=[],this.regional=[],this.regional[""]={errorLoadingText:"Error loading",notSupportedText:"This browser does not support SVG"},this.local=this.regional[""],this._uuid=(new Date).getTime(),this._renesis=n("RenesisX.RenesisCtrl")}function n(t){try{return!(!window.ActiveXObject||!new ActiveXObject(t))}catch(t){return!1}}function r(e,o){this._svg=e,this._container=o;for(var n=0;n<t.svg._extensions.length;n++){var r=t.svg._extensions[n];this[r[0]]=new r[1](this)}}function i(){this._path=""}function s(){this._parts=[]}function a(t){return t&&t.constructor==Array}t.extend(e.prototype,{markerClassName:"hasSVG",svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_wrapperClass:r,_attrNames:{class_:"class",in_:"in",alignmentBaseline:"alignment-baseline",baselineShift:"baseline-shift",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorRendering:"color-rendering",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",vertAdvY:"vert-adv-y",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode"},_attachSVG:function(e,o){var n=e.namespaceURI==this.svgNS?e:null,e=n?null:e;if(!t(e||n).hasClass(this.markerClassName)){"string"==typeof o?o={loadURL:o}:"function"==typeof o&&(o={onLoad:o}),t(e||n).addClass(this.markerClassName);try{n||(n=document.createElementNS(this.svgNS,"svg"),n.setAttribute("version","1.1"),e.clientWidth>0&&n.setAttribute("width",e.clientWidth),e.clientHeight>0&&n.setAttribute("height",e.clientHeight),e.appendChild(n)),this._afterLoad(e,n,o||{})}catch(n){t.browser.msie?(e.id||(e.id="svg"+this._uuid++),this._settings[e.id]=o,e.innerHTML='<embed type="image/svg+xml" width="100%" height="100%" src="'+(o.initPath||"")+'blank.svg" pluginspage="http://www.adobe.com/svg/viewer/install/main.html"/>'):e.innerHTML='<p class="svg_error">'+this.local.notSupportedText+"</p>"}}},_registerSVG:function(){for(var e=0;e<document.embeds.length;e++){var o=document.embeds[e].parentNode;if(t(o).hasClass(t.svg.markerClassName)&&!t.data(o,"svgwrapper")){var n=null;try{n=document.embeds[e].getSVGDocument()}catch(e){return void setTimeout(t.svg._registerSVG,250)}n=n?n.documentElement:null,n&&t.svg._afterLoad(o,n)}}},_afterLoad:function(e,o,n){var n=n||this._settings[e.id];this._settings[e?e.id:""]=null;var r=new this._wrapperClass(o,e);t.data(e||o,"svgwrapper",r);try{n.loadURL&&r.load(n.loadURL,n),n.settings&&r.configure(n.settings),n.onLoad&&!n.loadURL&&n.onLoad.apply(e||o,[r])}catch(t){alert(t)}},_getSVG:function(e){return e="string"==typeof e?t(e)[0]:e.jquery?e[0]:e,t.data(e,"svgwrapper")},_destroySVG:function(e){var o=t(e);o.hasClass(this.markerClassName)&&(o.removeClass(this.markerClassName),e.namespaceURI!=this.svgNS&&o.empty(),t.removeData(e,"svgwrapper"))},addExtension:function(t,e){this._extensions.push([t,e])},isSVGElem:function(e){return 1==e.nodeType&&e.namespaceURI==t.svg.svgNS}}),t.extend(r.prototype,{_width:function(){return this._container?this._container.clientWidth:this._svg.width},_height:function(){return this._container?this._container.clientHeight:this._svg.height},root:function(){return this._svg},configure:function(e,o,n){if(e.nodeName||(n=o,o=e,e=this._svg),n)for(var r=e.attributes.length-1;r>=0;r--){var i=e.attributes.item(r);"onload"!=i.nodeName&&"version"!=i.nodeName&&"xmlns"!=i.nodeName.substring(0,5)&&e.attributes.removeNamedItem(i.nodeName)}for(var s in o)e.setAttribute(t.svg._attrNames[s]||s,o[s]);return this},getElementById:function(t){return this._svg.ownerDocument.getElementById(t)},change:function(e,o){if(e)for(var n in o)null==o[n]?e.removeAttribute(t.svg._attrNames[n]||n):e.setAttribute(t.svg._attrNames[n]||n,o[n]);return this},_args:function(e,o,n){o.splice(0,0,"parent"),o.splice(o.length,0,"settings");var r={},i=0;null!=e[0]&&e[0].jquery&&(e[0]=e[0][0]),null==e[0]||"object"==typeof e[0]&&e[0].nodeName||(r.parent=null,i=1);for(var s=0;s<e.length;s++)r[o[s+i]]=e[s];return n&&t.each(n,function(t,e){"object"==typeof r[e]&&(r.settings=r[e],r[e]=null)}),r},title:function(t,e,o){var n=this._args(arguments,["text"]),r=this._makeNode(n.parent,"title",n.settings||{});return r.appendChild(this._svg.ownerDocument.createTextNode(n.text)),r},describe:function(t,e,o){var n=this._args(arguments,["text"]),r=this._makeNode(n.parent,"desc",n.settings||{});return r.appendChild(this._svg.ownerDocument.createTextNode(n.text)),r},defs:function(e,o,n){var r=this._args(arguments,["id"],["id"]);return this._makeNode(r.parent,"defs",t.extend(r.id?{id:r.id}:{},r.settings||{}))},symbol:function(e,o,n,r,i,s,a){var l=this._args(arguments,["id","x1","y1","width","height"]);return this._makeNode(l.parent,"symbol",t.extend({id:l.id,viewBox:l.x1+" "+l.y1+" "+l.width+" "+l.height},l.settings||{}))},marker:function(e,o,n,r,i,s,a,l){var c=this._args(arguments,["id","refX","refY","mWidth","mHeight","orient"],["orient"]);return this._makeNode(c.parent,"marker",t.extend({id:c.id,refX:c.refX,refY:c.refY,markerWidth:c.mWidth,markerHeight:c.mHeight,orient:c.orient||"auto"},c.settings||{}))},style:function(e,o,n){var r=this._args(arguments,["styles"]),i=this._makeNode(r.parent,"style",t.extend({type:"text/css"},r.settings||{}));return i.appendChild(this._svg.ownerDocument.createTextNode(r.styles)),t.browser.opera&&t("head").append('<style type="text/css">'+r.styles+"</style>"),i},script:function(e,o,n,r){var i=this._args(arguments,["script","type"],["type"]),s=this._makeNode(i.parent,"script",t.extend({type:i.type||"text/javascript"},i.settings||{}));return s.appendChild(this._svg.ownerDocument.createTextNode(i.script)),t.browser.mozilla||t.globalEval(i.script),s},linearGradient:function(e,o,n,r,i,s,a,l){var c=this._args(arguments,["id","stops","x1","y1","x2","y2"],["x1"]),u=t.extend({id:c.id},null!=c.x1?{x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2}:{});return this._gradient(c.parent,"linearGradient",t.extend(u,c.settings||{}),c.stops)},radialGradient:function(e,o,n,r,i,s,a,l,c){var u=this._args(arguments,["id","stops","cx","cy","r","fx","fy"],["cx"]),g=t.extend({id:u.id},null!=u.cx?{cx:u.cx,cy:u.cy,r:u.r,fx:u.fx,fy:u.fy}:{});return this._gradient(u.parent,"radialGradient",t.extend(g,u.settings||{}),u.stops)},_gradient:function(e,o,n,r){for(var i=this._makeNode(e,o,n),s=0;s<r.length;s++){var a=r[s];this._makeNode(i,"stop",t.extend({offset:a[0],stopColor:a[1]},null!=a[2]?{stopOpacity:a[2]}:{}))}return i},pattern:function(e,o,n,r,i,s,a,l,c,u,g){var h=this._args(arguments,["id","x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),p=t.extend({id:h.id,x:h.x,y:h.y,width:h.width,height:h.height},null!=h.vx?{viewBox:h.vx+" "+h.vy+" "+h.vwidth+" "+h.vheight}:{});return this._makeNode(h.parent,"pattern",t.extend(p,h.settings||{}))},clipPath:function(e,o,n,r){var i=this._args(arguments,["id","units"]);return i.units=i.units||"userSpaceOnUse",this._makeNode(i.parent,"clipPath",t.extend({id:i.id,clipPathUnits:i.units},i.settings||{}))},mask:function(e,o,n,r,i,s,a){var l=this._args(arguments,["id","x","y","width","height"]);return this._makeNode(l.parent,"mask",t.extend({id:l.id,x:l.x,y:l.y,width:l.width,height:l.height},l.settings||{}))},createPath:function(){return new i},createText:function(){return new s},svg:function(e,o,n,r,i,s,a,l,c,u){var g=this._args(arguments,["x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),h=t.extend({x:g.x,y:g.y,width:g.width,height:g.height},null!=g.vx?{viewBox:g.vx+" "+g.vy+" "+g.vwidth+" "+g.vheight}:{});return this._makeNode(g.parent,"svg",t.extend(h,g.settings||{}))},group:function(e,o,n){var r=this._args(arguments,["id"],["id"]);return this._makeNode(r.parent,"g",t.extend({id:r.id},r.settings||{}))},use:function(e,o,n,r,i,s,a){var l=this._args(arguments,["x","y","width","height","ref"]);"string"==typeof l.x&&(l.ref=l.x,l.settings=l.y,l.x=l.y=l.width=l.height=null);var c=this._makeNode(l.parent,"use",t.extend({x:l.x,y:l.y,width:l.width,height:l.height},l.settings||{}));return c.setAttributeNS(t.svg.xlinkNS,"href",l.ref),c},link:function(e,o,n){var r=this._args(arguments,["ref"]),i=this._makeNode(r.parent,"a",r.settings);return i.setAttributeNS(t.svg.xlinkNS,"href",r.ref),i},image:function(e,o,n,r,i,s,a){var l=this._args(arguments,["x","y","width","height","ref"]),c=this._makeNode(l.parent,"image",t.extend({x:l.x,y:l.y,width:l.width,height:l.height},l.settings||{}));return c.setAttributeNS(t.svg.xlinkNS,"href",l.ref),c},path:function(e,o,n){var r=this._args(arguments,["path"]);return this._makeNode(r.parent,"path",t.extend({d:r.path.path?r.path.path():r.path},r.settings||{}))},rect:function(e,o,n,r,i,s,a,l){var c=this._args(arguments,["x","y","width","height","rx","ry"],["rx"]);return this._makeNode(c.parent,"rect",t.extend({x:c.x,y:c.y,width:c.width,height:c.height},c.rx?{rx:c.rx,ry:c.ry}:{},c.settings||{}))},circle:function(e,o,n,r,i){var s=this._args(arguments,["cx","cy","r"]);return this._makeNode(s.parent,"circle",t.extend({cx:s.cx,cy:s.cy,r:s.r},s.settings||{}))},ellipse:function(e,o,n,r,i,s){var a=this._args(arguments,["cx","cy","rx","ry"]);return this._makeNode(a.parent,"ellipse",t.extend({cx:a.cx,cy:a.cy,rx:a.rx,ry:a.ry},a.settings||{}))},line:function(e,o,n,r,i,s){var a=this._args(arguments,["x1","y1","x2","y2"]);return this._makeNode(a.parent,"line",t.extend({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},a.settings||{}))},polyline:function(t,e,o){var n=this._args(arguments,["points"]);return this._poly(n.parent,"polyline",n.points,n.settings)},polygon:function(t,e,o){var n=this._args(arguments,["points"]);return this._poly(n.parent,"polygon",n.points,n.settings)},_poly:function(e,o,n,r){for(var i="",s=0;s<n.length;s++)i+=n[s].join()+" ";return this._makeNode(e,o,t.extend({points:t.trim(i)},r||{}))},text:function(e,o,n,r,i){var s=this._args(arguments,["x","y","value"]);return"string"==typeof s.x&&arguments.length<4&&(s.value=s.x,s.settings=s.y,s.x=s.y=null),this._text(s.parent,"text",s.value,t.extend({x:s.x&&a(s.x)?s.x.join(" "):s.x,y:s.y&&a(s.y)?s.y.join(" "):s.y},s.settings||{}))},textpath:function(e,o,n,r){var i=this._args(arguments,["path","value"]),s=this._text(i.parent,"textPath",i.value,i.settings||{});return s.setAttributeNS(t.svg.xlinkNS,"href",i.path),s},_text:function(e,o,n,r){var i=this._makeNode(e,o,r);if("string"==typeof n)i.appendChild(i.ownerDocument.createTextNode(n));else for(var s=0;s<n._parts.length;s++){var a=n._parts[s];if("tspan"==a[0]){var l=this._makeNode(i,a[0],a[2]);l.appendChild(i.ownerDocument.createTextNode(a[1])),i.appendChild(l)}else if("tref"==a[0]){var l=this._makeNode(i,a[0],a[2]);l.setAttributeNS(t.svg.xlinkNS,"href",a[1]),i.appendChild(l)}else if("textpath"==a[0]){var c=t.extend({},a[2]);c.href=null;var l=this._makeNode(i,a[0],c);l.setAttributeNS(t.svg.xlinkNS,"href",a[2].href),l.appendChild(i.ownerDocument.createTextNode(a[1])),i.appendChild(l)}else i.appendChild(i.ownerDocument.createTextNode(a[1]))}return i},other:function(t,e,o){var n=this._args(arguments,["name"]);return this._makeNode(n.parent,n.name,n.settings||{})},_makeNode:function(e,o,n){e=e||this._svg;var r=this._svg.ownerDocument.createElementNS(t.svg.svgNS,o);for(var o in n){var i=n[o];null==i||null==i||"string"==typeof i&&""==i||r.setAttribute(t.svg._attrNames[o]||o,i)}return e.appendChild(r),r},add:function(e,o){var n=this._args(1==arguments.length?[null,e]:arguments,["node"]),r=this;n.parent=n.parent||this._svg,n.node=n.node.jquery?n.node:t(n.node);try{if(t.svg._renesis)throw"Force traversal";n.parent.appendChild(n.node.cloneNode(!0))}catch(t){n.node.each(function(){var t=r._cloneAsSVG(this);t&&n.parent.appendChild(t)})}return this},clone:function(e,o){var n=this,r=this._args(1==arguments.length?[null,e]:arguments,["node"]);r.parent=r.parent||this._svg,r.node=r.node.jquery?r.node:t(r.node);var i=[];return r.node.each(function(){var t=n._cloneAsSVG(this);t&&(t.id="",r.parent.appendChild(t),i.push(t))}),i},_cloneAsSVG:function(e){var o=null;if(1==e.nodeType){o=this._svg.ownerDocument.createElementNS(t.svg.svgNS,this._checkName(e.nodeName));for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);"xmlns"!=r.nodeName&&r.nodeValue&&("xlink"==r.prefix?o.setAttributeNS(t.svg.xlinkNS,r.localName||r.baseName,r.nodeValue):o.setAttribute(this._checkName(r.nodeName),r.nodeValue))}for(var n=0;n<e.childNodes.length;n++){var i=this._cloneAsSVG(e.childNodes[n]);i&&o.appendChild(i)}}else if(3==e.nodeType)t.trim(e.nodeValue)&&(o=this._svg.ownerDocument.createTextNode(e.nodeValue));else if(4==e.nodeType&&t.trim(e.nodeValue))try{o=this._svg.ownerDocument.createCDATASection(e.nodeValue)}catch(t){o=this._svg.ownerDocument.createTextNode(e.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}return o},_checkName:function(t){return t=t.substring(0,1)>="A"&&t.substring(0,1)<="Z"?t.toLowerCase():t,"svg:"==t.substring(0,4)?t.substring(4):t},load:function(e,o){o="boolean"==typeof o?{addTo:o}:"function"==typeof o?{onLoad:o}:"string"==typeof o?{parent:o}:"object"==typeof o&&o.nodeName?{parent:o}:"object"==typeof o&&o.jquery?{parent:o}:o||{},o.parent||o.addTo||this.clear(!1);var n=[this._svg.getAttribute("width"),this._svg.getAttribute("height")],r=this,i=function(e){e=t.svg.local.errorLoadingText+": "+e,o.onLoad?o.onLoad.apply(r._container||r._svg,[r,e]):r.text(null,10,20,e)},s=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.validateOnParse=!1,e.resolveExternals=!1,e.async=!1,e.loadXML(t),0!=e.parseError.errorCode?(i(e.parseError.reason),null):e},a=function(e){if(e){if("svg"!=e.documentElement.nodeName){var s=e.getElementsByTagName("parsererror"),a=s.length?s[0].getElementsByTagName("div"):[];return void i(s.length?(a.length?a[0]:s[0]).firstChild.nodeValue:"???")}for(var l=o.parent?t(o.parent)[0]:r._svg,c={},u=0;u<e.documentElement.attributes.length;u++){var g=e.documentElement.attributes.item(u);"version"!=g.nodeName&&"xmlns"!=g.nodeName.substring(0,5)&&(c[g.nodeName]=g.nodeValue)}r.configure(l,c,!o.parent);for(var h=e.documentElement.childNodes,u=0;u<h.length;u++)try{if(t.svg._renesis)throw"Force traversal";l.appendChild(r._svg.ownerDocument.importNode(h[u],!0)),"script"==h[u].nodeName&&t.globalEval(h[u].textContent)}catch(t){r.add(l,h[u])}o.changeSize||r.configure(l,{width:n[0],height:n[1]}),o.onLoad&&o.onLoad.apply(r._container||r._svg,[r])}};return e.match("<svg")?a(t.browser.msie?s(e):(new DOMParser).parseFromString(e,"text/xml")):t.ajax({url:e,dataType:t.browser.msie?"text":"xml",success:function(e){a(t.browser.msie?s(e):e)},error:function(t,e,o){i(e+(o?" "+o.message:""))}}),this},remove:function(t){return t=t.jquery?t[0]:t,t.parentNode.removeChild(t),this},clear:function(t){for(t&&this.configure({},!0);this._svg.firstChild;)this._svg.removeChild(this._svg.firstChild);return this},toSVG:function(t){return t=t||this._svg,"undefined"==typeof XMLSerializer?this._toSVG(t):(new XMLSerializer).serializeToString(t)},_toSVG:function(e){var o="";if(!e)return o;if(3==e.nodeType)o=e.nodeValue;else if(4==e.nodeType)o="<![CDATA["+e.nodeValue+"]]>";else{if(o="<"+e.nodeName,e.attributes)for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);""==t.trim(r.nodeValue)||r.nodeValue.match(/^\[object/)||r.nodeValue.match(/^function/)||(o+=" "+(r.namespaceURI==t.svg.xlinkNS?"xlink:":"")+r.nodeName+'="'+r.nodeValue+'"')}if(e.firstChild){o+=">";for(var i=e.firstChild;i;)o+=this._toSVG(i),i=i.nextSibling;o+="</"+e.nodeName+">"}else o+="/>"}return o}}),o.SVGPath=i,t.extend(i.prototype,{reset:function(){return this._path="",this},move:function(t,e,o){return o=a(t)?e:o,this._coords(o?"m":"M",t,e)},line:function(t,e,o){return o=a(t)?e:o,this._coords(o?"l":"L",t,e)},horiz:function(t,e){return this._path+=(e?"h":"H")+(a(t)?t.join(" "):t),this},vert:function(t,e){return this._path+=(e?"v":"V")+(a(t)?t.join(" "):t),this},curveC:function(t,e,o,n,r,i,s){return s=a(t)?e:s,this._coords(s?"c":"C",t,e,o,n,r,i)},smoothC:function(t,e,o,n,r){return r=a(t)?e:r,this._coords(r?"s":"S",t,e,o,n)},curveQ:function(t,e,o,n,r){return r=a(t)?e:r,this._coords(r?"q":"Q",t,e,o,n)},smoothQ:function(t,e,o){return o=a(t)?e:o,this._coords(o?"t":"T",t,e)},_coords:function(t,e,o,n,r,i,s){if(a(e))for(var l=0;l<e.length;l++){var c=e[l];this._path+=(0==l?t:" ")+c[0]+","+c[1]+(c.length<4?"":" "+c[2]+","+c[3]+(c.length<6?"":" "+c[4]+","+c[5]))}else this._path+=t+e+","+o+(null==n?"":" "+n+","+r+(null==i?"":" "+i+","+s));return this},arc:function(t,e,o,n,r,i,s,l){if(l=a(t)?e:l,this._path+=l?"a":"A",a(t))for(var c=0;c<t.length;c++){var u=t[c];this._path+=(0==c?"":" ")+u[0]+","+u[1]+" "+u[2]+" "+(u[3]?"1":"0")+","+(u[4]?"1":"0")+" "+u[5]+","+u[6]}else this._path+=t+","+e+" "+o+" "+(n?"1":"0")+","+(r?"1":"0")+" "+i+","+s;return this},close:function(){return this._path+="z",this},path:function(){return this._path}}),i.prototype.moveTo=i.prototype.move,i.prototype.lineTo=i.prototype.line,i.prototype.horizTo=i.prototype.horiz,i.prototype.vertTo=i.prototype.vert,i.prototype.curveCTo=i.prototype.curveC,i.prototype.smoothCTo=i.prototype.smoothC,i.prototype.curveQTo=i.prototype.curveQ,i.prototype.smoothQTo=i.prototype.smoothQ,i.prototype.arcTo=i.prototype.arc,t.extend(s.prototype,{reset:function(){return this._parts=[],this},string:function(t){return this._parts[this._parts.length]=["text",t],this},span:function(t,e){return this._parts[this._parts.length]=["tspan",t,e],this},ref:function(t,e){return this._parts[this._parts.length]=["tref",t,e],this},path:function(e,o,n){return this._parts[this._parts.length]=["textpath",o,t.extend({href:e},n||{})],this}}),t.fn.svg=function(e){var o=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&"get"==e?t.svg["_"+e+"SVG"].apply(t.svg,[this[0]].concat(o)):this.each(function(){"string"==typeof e?t.svg["_"+e+"SVG"].apply(t.svg,[this].concat(o)):t.svg._attachSVG(this,e||{})})},t.svg=new e}(e),t.exports=o}).call(e,o(0))},function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,o,n,r){var i,s,a=8*r-n-1,l=(1<<a)-1,c=l>>1,u=-7,g=o?r-1:0,h=o?-1:1,p=t[e+g];for(g+=h,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=256*i+t[e+g],g+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=256*s+t[e+g],g+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},e.write=function(t,e,o,n,r,i){var s,a,l,c=8*i-r-1,u=(1<<c)-1,g=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+g>=1?h/l:h*Math.pow(2,1-g),e*l>=2&&(s++,l/=2),s+g>=u?(a=0,s=u):s+g>=1?(a=(e*l-1)*Math.pow(2,r),s+=g):(a=e*Math.pow(2,g-1)*Math.pow(2,r),s=0));r>=8;t[o+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[o+p]=255&s,p+=d,s/=256,c-=8);t[o+p-d]|=128*f}},function(t,e,o){(function(e){(function(){!function(t,e,o){t.spinner_options={options:{lines:7,length:0,width:5,radius:7,corners:1,rotate:0,direction:1,color:"#3b8ed7",speed:1.2,trail:100,shadow:!1,hwaccel:!0,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}}}(window.circuitsGui=window.circuitsGui||{});var e=function(){"use strict";function t(t,e){var o,n=document.createElement(t||"div");for(o in e)n[o]=e[o];return n}function e(t){for(var e=1,o=arguments.length;e<o;e++)t.appendChild(arguments[e]);return t}function o(t,e,o,n){var r=["opacity",e,~~(100*t),o,n].join("-"),i=.01+o/n*100,s=Math.max(1-(1-t)/e*(100-i),t),a=l.substring(0,l.indexOf("Animation")).toLowerCase(),c=a&&"-"+a+"-"||"";return u[r]||(g.insertRule("@"+c+"keyframes "+r+"{0%{opacity:"+s+"}"+i+"%{opacity:"+t+"}"+(i+.01)+"%{opacity:1}"+(i+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",g.cssRules.length),u[r]=1),r}function n(t,e){var o,n,r=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<c.length;n++)if(o=c[n]+e,void 0!==r[o])return o;if(void 0!==r[e])return e}function r(t,e){for(var o in e)t.style[n(t,o)||o]=e[o];return t}function i(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)void 0===t[n]&&(t[n]=o[n])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=i(t||{},a.defaults,h)}var l,c=["webkit","Moz","ms","O"],u={},g=function(){var o=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],o),o.sheet||o.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};a.defaults={},i(a.prototype,{spin:function(e){this.stop();var o=this,n=o.opts,i=o.el=r(t(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex});n.radius,n.length,n.width;if(r(i,{left:n.left,top:n.top}),e&&e.insertBefore(i,e.firstChild||null),i.setAttribute("role","progressbar"),o.lines(i,o.opts),!l){var s,a=0,c=(n.lines-1)*(1-n.direction)/2,u=n.fps,g=u/n.speed,h=(1-n.opacity)/(g*n.trail/100),p=g/n.lines;!function t(){a++;for(var e=0;e<n.lines;e++)s=Math.max(1-(a+(n.lines-e)*p)%g*h,n.opacity),o.opacity(i,e*n.direction+c,s,n);o.timeout=o.el&&setTimeout(t,~~(1e3/u))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,i){function a(e,o){return r(t(),{position:"absolute",width:i.length+i.width+"px",height:i.width+"px",background:e,boxShadow:o,transformOrigin:"left",transform:"rotate("+~~(360/i.lines*u+i.rotate)+"deg) translate("+i.radius+"px,0)",borderRadius:(i.corners*i.width>>1)+"px"})}for(var c,u=0,g=(i.lines-1)*(1-i.direction)/2;u<i.lines;u++)c=r(t(),{position:"absolute",top:1+~(i.width/2)+"px",transform:i.hwaccel?"translate3d(0,0,0)":"",opacity:i.opacity,animation:l&&o(i.opacity,i.trail,g+u*i.direction,i.lines)+" "+1/i.speed+"s linear infinite"}),i.shadow&&e(c,r(a("#000","0 0 4px #000"),{top:"2px"})),e(n,e(c,a(s(i.color,u),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,o){e<t.childNodes.length&&(t.childNodes[e].style.opacity=o)}});var p=r(t("group"),{behavior:"url(#default#VML)"});return!n(p,"transform")&&p.adj?function(){function o(e,o){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',o)}g.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,n){function i(){return r(o("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function a(t,a,l){e(h,e(r(i(),{rotation:360/n.lines*t+"deg",left:~~a}),e(r(o("roundrect",{arcsize:n.corners}),{width:c,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),o("fill",{color:s(n.color,t),opacity:n.opacity}),o("stroke",{opacity:0}))))}var l,c=n.length+n.width,u=2*c,g=2*-(n.width+n.length)+"px",h=r(i(),{position:"absolute",top:g,left:g});if(n.shadow)for(l=1;l<=n.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)a(l);return e(t,h)},a.prototype.opacity=function(t,e,o,n){var r=t.firstChild;n=n.shadow&&n.lines||0,r&&e+n<r.childNodes.length&&(r=r.childNodes[e+n],r=r&&r.firstChild,(r=r&&r.firstChild)&&(r.opacity=o))}}():l=n(p,"animation"),a}();t.exports=e}).call(window)}).call(e,o(0))},function(t,e){(function(){window.Modernizr=function(t,e,o){function n(t){d.cssText=t}function r(t,e){return typeof t===e}function i(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var n in t){var r=t[n];if(!i(r,"-")&&d[r]!==o)return"pfx"!=e||r}return!1}function a(t,e,n){for(var i in t){var s=e[t[i]];if(s!==o)return!1===n?t[i]:r(s,"function")?s.bind(n||e):s}return!1}function l(t,e,o){var n=t.charAt(0).toUpperCase()+t.slice(1),i=(t+" "+y.join(n+" ")+n).split(" ");return r(e,"string")||r(e,"undefined")?s(i,e):(i=(t+" "+v.join(n+" ")+n).split(" "),a(i,e,o))}var c,u,g={},h=e.documentElement,p=e.createElement("modernizr"),d=p.style,f={}.toString,m="Webkit Moz O ms",y=m.split(" "),v=m.toLowerCase().split(" "),_={svg:"http://www.w3.org/2000/svg"},b={},E=[],S=E.slice,k=function(){function t(t,i){i=i||e.createElement(n[t]||"div"),t="on"+t;var s=t in i;return s||(i.setAttribute||(i=e.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(t,""),s=r(i[t],"function"),r(i[t],"undefined")||(i[t]=o),i.removeAttribute(t))),i=null,s}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),T={}.hasOwnProperty;u=r(T,"undefined")||r(T.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return T.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var o=S.call(arguments,1),n=function(){if(this instanceof n){var r=function(){};r.prototype=e.prototype;var i=new r,s=e.apply(i,o.concat(S.call(arguments)));return Object(s)===s?s:i}return e.apply(t,o.concat(S.call(arguments)))};return n}),b.hashchange=function(){return k("hashchange",t)&&(e.documentMode===o||e.documentMode>7)},b.cssanimations=function(){return l("animationName")},b.webworkers=function(){return!!t.Worker},b.svg=function(){return!!e.createElementNS&&!!e.createElementNS(_.svg,"svg").createSVGRect},b.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(f.call(e.createElementNS(_.svg,"clipPath")))};for(var C in b)u(b,C)&&(c=C.toLowerCase(),g[c]=b[C](),E.push((g[c]?"":"no-")+c));return g.addTest=function(t,e){if("object"==typeof t)for(var n in t)u(t,n)&&g.addTest(n,t[n]);else{if(t=t.toLowerCase(),g[t]!==o)return g;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(h.className+=" "+(e?"":"no-")+t),g[t]=e}return g},n(""),p=null,function(t,e){function o(t,e){var o=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return o.innerHTML="x<style>"+e+"</style>",n.insertBefore(o.lastChild,n.firstChild)}function n(){var t=y.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e=m[t[d]];return e||(e={},f++,t[d]=f,m[f]=e),e}function i(t,o,n){if(o||(o=e),u)return o.createElement(t);n||(n=r(o));var i;return i=n.cache[t]?n.cache[t].cloneNode():p.test(t)?(n.cache[t]=n.createElem(t)).cloneNode():n.createElem(t),!i.canHaveChildren||h.test(t)||i.tagUrn?i:n.frag.appendChild(i)}function s(t,o){if(t||(t=e),u)return t.createDocumentFragment();o=o||r(t);for(var i=o.frag.cloneNode(),s=0,a=n(),l=a.length;s<l;s++)i.createElement(a[s]);return i}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(o){return y.shivMethods?i(o,t,e):e.createElem(o)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(y,e.frag)}function l(t){t||(t=e);var n=r(t);return y.shivCSS&&!c&&!n.hasCSS&&(n.hasCSS=!!o(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||a(t,n),t}var c,u,g=t.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,d="_html5shiv",f=0,m={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",c="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return void 0===t.cloneNode||void 0===t.createDocumentFragment||void 0===t.createElement}()}catch(t){c=!0,u=!0}}();var y={elements:g.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==g.shivCSS,supportsUnknownElements:u,shivMethods:!1!==g.shivMethods,type:"default",shivDocument:l,createElement:i,createDocumentFragment:s};t.html5=y,l(e)}(this,e),g._version="2.7.1",g._domPrefixes=v,g._cssomPrefixes=y,g.hasEvent=k,g.testProp=function(t){return s([t])},g.testAllProps=l,g}(this,this.document),function(t,e,o){function n(t){return"[object Function]"==m.call(t)}function r(t){return"string"==typeof t}function i(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=y.shift();v=1,t?t.t?d(function(){("c"==t.t?h.injectCss:h.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):v=0}function l(t,o,n,r,i,l,c){function u(e){if(!p&&s(g.readyState)&&(_.r=p=1,!v&&a(),g.onload=g.onreadystatechange=null,e)){"img"!=t&&d(function(){E.removeChild(g)},50);for(var n in x[o])x[o].hasOwnProperty(n)&&x[o][n].onload()}}var c=c||h.errorTimeout,g=e.createElement(t),p=0,m=0,_={t:n,s:o,e:i,a:l,x:c};1===x[o]&&(m=1,x[o]=[]),"object"==t?g.data=o:(g.src=o,g.type=t),g.width=g.height="0",g.onerror=g.onload=g.onreadystatechange=function(){u.call(this,m)},y.splice(r,0,_),"img"!=t&&(m||2===x[o]?(E.insertBefore(g,b?null:f),d(u,c)):x[o].push(g))}function c(t,e,o,n,i){return v=0,e=e||"j",r(t)?l("c"==e?k:S,t,e,this.i++,o,n,i):(y.splice(this.i++,0,t),1==y.length&&a()),this}function u(){var t=h;return t.loader={load:c,i:0},t}var g,h,p=e.documentElement,d=t.setTimeout,f=e.getElementsByTagName("script")[0],m={}.toString,y=[],v=0,_="MozAppearance"in p.style,b=_&&!!e.createRange().compareNode,E=b?p:f.parentNode,p=t.opera&&"[object Opera]"==m.call(t.opera),p=!!e.attachEvent&&!p,S=_?"object":p?"script":"img",k=p?"script":S,T=Array.isArray||function(t){return"[object Array]"==m.call(t)},C=[],x={},w={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};h=function(t){function e(t){var e,o,n,t=t.split("!"),r=C.length,i=t.pop(),s=t.length,i={url:i,origUrl:i,prefixes:t};for(o=0;o<s;o++)n=t[o].split("="),(e=w[n.shift()])&&(i=e(i,n));for(o=0;o<r;o++)i=C[o](i);return i}function s(t,r,i,s,a){var l=e(t),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=n(r)?r:r[t]||r[s]||r[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,r,i,s,a):(x[l.url]?l.noexec=!0:x[l.url]=1,i.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":o,l.noexec,l.attrs,l.timeout),(n(r)||n(c))&&i.load(function(){u(),r&&r(l.origUrl,a,s),c&&c(l.origUrl,a,s),x[l.url]=2})))}function a(t,e){function o(t,o){if(t){if(r(t))o||(g=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}),s(t,g,e,0,c);else if(Object(t)===t)for(l in a=function(){var e,o=0;for(e in t)t.hasOwnProperty(e)&&o++;return o}(),t)t.hasOwnProperty(l)&&(!o&&!--a&&(n(g)?g=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}:g[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(h[l])),s(t[l],g,e,l,c))}else!o&&p()}var a,l,c=!!t.test,u=t.load||t.both,g=t.callback||i,h=g,p=t.complete||i;o(c?t.yep:t.nope,!!u),u&&o(u)}var l,c,g=this.yepnope.loader;if(r(t))s(t,0,g,0);else if(T(t))for(l=0;l<t.length;l++)c=t[l],r(c)?s(c,0,g,0):T(c)?h(c):Object(c)===c&&a(c,g);else Object(t)===t&&a(t,g)},h.addPrefix=function(t,e){w[t]=e},h.addFilter=function(t){C.push(t)},h.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",g=function(){e.removeEventListener("DOMContentLoaded",g,0),e.readyState="complete"},0)),t.yepnope=u(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,o,n,r,l,c){var u,g,p=e.createElement("script"),r=r||h.errorTimeout;p.src=t;for(g in n)p.setAttribute(g,n[g]);o=c?a:o||i,p.onreadystatechange=p.onload=function(){!u&&s(p.readyState)&&(u=1,o(),p.onload=p.onreadystatechange=null)},d(function(){u||(u=1,o(1))},r),l?p.onload():f.parentNode.insertBefore(p,f)},t.yepnope.injectCss=function(t,o,n,r,s,l){var c,r=e.createElement("link"),o=l?a:o||i;r.href=t,r.rel="stylesheet",r.type="text/css";for(c in n)r.setAttribute(c,n[c]);s||(f.parentNode.insertBefore(r,f),d(o,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},t.exports=window.Modernizr}).call(window)},function(module,exports,__webpack_require__){(function(jQuery){(function(){/*! seamless.js 2015-04-30 */
var NO_JQUERY={};!function(t,e,o){if(!("console"in t)){var n=t.console={};n.log=n.warn=n.error=n.debug=function(){}}e===NO_JQUERY&&(e={fn:{},extend:function(){for(var t=arguments[0],e=1,o=arguments.length;o>e;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}}),e.fn.pm=function(){return console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])"),this},e.pm=t.pm=function(t){r.send(t)},e.pm.bind=t.pm.bind=function(t,e,o,n,i){r.bind(t,e,o,n,!0===i)},e.pm.unbind=t.pm.unbind=function(t,e){r.unbind(t,e)},e.pm.origin=t.pm.origin=null,e.pm.poll=t.pm.poll=200;var r={send:function(t){var o=e.extend({},r.defaults,t),n=o.target;if(!o.target)return void console.warn("postmessage target window required");if(!o.type)return void console.warn("postmessage type required");var i={data:o.data,type:o.type};o.success&&(i.callback=r._callback(o.success)),o.error&&(i.errback=r._callback(o.error)),"postMessage"in n&&!o.hash?(r._bind(),n.postMessage(JSON.stringify(i),o.origin||"*")):(r.hash._bind(),r.hash.send(o,i))},bind:function(t,e,o,n,i){r._replyBind(t,e,o,n,i)},_replyBind:function(o,n,i,s,a){"postMessage"in t&&!s?r._bind():r.hash._bind();var l=r.data("listeners.postmessage");l||(l={},r.data("listeners.postmessage",l));var c=l[o];c||(c=[],l[o]=c),c.push({fn:n,callback:a,origin:i||e.pm.origin})},unbind:function(t,e){var o=r.data("listeners.postmessage");if(o)if(t)if(e){var n=o[t];if(n){for(var i=[],s=0,a=n.length;a>s;s++){var l=n[s];l.fn!==e&&i.push(l)}o[t]=i}}else delete o[t];else for(var s in o)delete o[s]},data:function(t,e){return void 0===e?r._data[t]:(r._data[t]=e,e)},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var t=[],e=0;32>e;e++)t[e]=r._CHARS[0|32*Math.random()];return t.join("")},_callback:function(t){var e=r.data("callbacks.postmessage");e||(e={},r.data("callbacks.postmessage",e));var o=r._random();return e[o]=t,o},_bind:function(){r.data("listening.postmessage")||(t.addEventListener?t.addEventListener("message",r._dispatch,!1):t.attachEvent&&t.attachEvent("onmessage",r._dispatch),r.data("listening.postmessage",1))},_dispatch:function(t){function e(e){o.callback&&r.send({target:t.source,data:e,type:o.callback})}try{var o=JSON.parse(t.data)}catch(t){return void console.warn("postmessage data invalid json: ",t)}if(!o.type)return void console.warn("postmessage message type required");var n=r.data("callbacks.postmessage")||{},i=n[o.type];if(i)i(o.data);else for(var s=r.data("listeners.postmessage")||{},a=s[o.type]||[],l=0,c=a.length;c>l;l++){var u=a[l];if(u.origin&&"*"!==u.origin&&t.origin!==u.origin){if(console.warn("postmessage message origin mismatch",t.origin,u.origin),o.errback){var g={message:"postmessage origin mismatch",origin:[t.origin,u.origin]};r.send({target:t.source,data:g,type:o.errback})}}else try{u.callback?u.fn(o.data,e,t):e(u.fn(o.data,t))}catch(e){if(!o.errback)throw e;r.send({target:t.source,data:e,type:o.errback})}}}};r.hash={send:function(e,o){var n=e.target,i=e.url;if(!i)return void console.warn("postmessage target window url is required");i=r.hash._url(i);var s,a=r.hash._url(t.location.href);if(t==n.parent)s="parent";else try{for(var l=0,c=parent.frames.length;c>l;l++){if(parent.frames[l]==t){s=l;break}}}catch(e){s=t.name}if(null==s)return void console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list");var u={"x-requested-with":"postmessage",source:{name:s,url:a},postmessage:o},g="#x-postmessage-id="+r._random();n.location=i+g+encodeURIComponent(JSON.stringify(u))},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:"#x-postmessage-id=".length+32,_bind:function(){r.data("polling.postmessage")||(setInterval(function(){var e=""+t.location.hash,o=r.hash._regex.exec(e);if(o){var n=o[1];r.hash._last!==n&&(r.hash._last=n,r.hash._dispatch(e.substring(r.hash._regex_len)))}},e.pm.poll||200),r.data("polling.postmessage",1))},_dispatch:function(e){function o(t){n.callback&&r.send({target:a,data:t,type:n.callback,hash:!0,url:e.source.url})}if(e){try{if(e=JSON.parse(decodeURIComponent(e)),!("postmessage"===e["x-requested-with"]&&e.source&&null!=e.source.name&&e.source.url&&e.postmessage))return}catch(t){return}var n=e.postmessage,i=r.data("callbacks.postmessage")||{},s=i[n.type];if(s)s(n.data);else{var a;a="parent"===e.source.name?t.parent:t.frames[e.source.name];for(var l=r.data("listeners.postmessage")||{},c=l[n.type]||[],u=0,g=c.length;g>u;u++){var h=c[u];if(h.origin){var p=/https?\:\/\/[^\/]*/.exec(e.source.url)[0];if("*"!==h.origin&&p!==h.origin){if(console.warn("postmessage message origin mismatch",p,h.origin),n.errback){var d={message:"postmessage origin mismatch",origin:[p,h.origin]};r.send({target:a,data:d,type:n.errback,hash:!0,url:e.source.url})}continue}}try{h.callback?h.fn(n.data,o):o(h.fn(n.data))}catch(t){if(!n.errback)throw t;r.send({target:a,data:t,type:n.errback,hash:!0,url:e.source.url})}}}}},_url:function(t){return(""+t).replace(/#.*$/,"")}},e.extend(r,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})}(this,void 0===jQuery?NO_JQUERY:jQuery),"JSON"in window&&window.JSON||(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var o,n,r,i,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,o=0;i>o;o+=1)s[o]=str(o,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(i=rep.length,o=0;i>o;o+=1)"string"==typeof(n=rep[o])&&(r=str(n,l))&&s.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.hasOwnProperty.call(l,n)&&(r=str(n,l))&&s.push(quote(n)+(gap?": ":":")+r);return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,o){var n;if(gap="",indent="","number"==typeof o)for(n=0;o>n;n+=1)indent+=" ";else"string"==typeof o&&(indent=o);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var o,n,r=t[e];if(r&&"object"==typeof r)for(o in r)Object.hasOwnProperty.call(r,o)&&(n=walk(r,o),void 0!==n?r[o]=n:delete r[o]);return reviver.call(t,e,r)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e,o,n){o.SeamlessBase={getParam:function(e,o){o=o||t.location.search;var n="[?&]"+e+"=([^&#]*)",r=new RegExp(n),i=r.exec(o);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},filterText:function(t){return t.replace(/[<>]/g,"")},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},setStyle:function(t,e){e.length>0&&(e="string"==typeof e?e:e.join(" "),e=o.SeamlessBase.filterText(e),t.styleSheet?t.styleSheet.cssText=e:o(t).html(e))},injectStyles:function(t){var n=o("style#injected-styles");if(n.length>0)o.SeamlessBase.setStyle(n[0],t);else{var r=o(e.createElement("style")).attr({type:"text/css",id:"injected-styles"});o.SeamlessBase.setStyle(r[0],t),o("head").append(r)}},injectAppendedStyles:function(t){var n=o(e.createElement("style")).attr({type:"text/css",id:"injected-styles"});o.SeamlessBase.setStyle(n[0],t),o("head").append(n)}}}(window,document,jQuery),function(t,e,o,n){o.SeamlessConnection=function(t,e){this.id=0,this.target=t,this.url=e,this.active=!1,this.queue=[]},o.SeamlessConnection.prototype.send=function(t){this.active&&this.target?(t=t||{},t.hasOwnProperty("data")||(t={data:t}),t.target=this.target,t.url=this.url,t.type=t.type||"seamless_data",t.data=t.data||{},t.data.__id=this.id,o.pm(t)):this.queue.push(t)},o.SeamlessConnection.prototype.receive=function(t,e){"function"==typeof t&&(e=t,t="seamless_data");var n=this;o.pm.bind(t,function(t,o){return!(!t.__id||t.__id!==n.id)&&e(t,o)})},o.SeamlessConnection.prototype.setActive=function(t){if(this.active=t,this.queue.length>0){for(var e in this.queue)this.send(this.queue[e]);this.queue=[],this.queue.length=0}}}(window,document,jQuery),function(t,e,o,n){if(!o.hasOwnProperty("pm"))return void console.log("You must install the jQuery.pm module to use seamless.js.");o.pm.bind("seamless_noiframe",function(e){e.href=e.href.replace(/noiframe\=[^&?#]+/,""),t.location.replace(e.href)}),t.seamlessOpenFallback=function(e,o,n,r){r.preventDefault?(r.preventDefault(),r.stopPropagation()):r.returnValue=!1,t.open(e,"",["width="+o,"height="+n,"menubar=no","titlebar=no","toolbar=no","status=no","scrollbars=yes","chrome=yes"].join(","))};var r=[],i=!1,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=function(){for(var t=[],e=0;32>e;e++)t[e]=s[0|32*Math.random()];return t.join("")};o.pm.bind("seamless_ready",function(t,e){if(!i){i=!0;for(var o in r)r.hasOwnProperty(o)&&r[o].seamless_ready(t,e);i=!1}}),o.pm.bind("seamless_update",function(t,e){for(var o in r)if(r.hasOwnProperty(o)){var n=r[o];if(n.connection.id===t.__id)return n.seamless_update(t,e)}return t.height=0,t}),o.pm.bind("seamless_error",function(t,e){for(var o in r)r.hasOwnProperty(o)&&r[o].seamless_error(t,e)}),o.fn.seamless=function(n){var i={showLoadingIndicator:!0,loading:"Loading ...",spinner:"http://www.travistidwell.com/seamless.js/src/loader.gif",onConnect:null,styles:[],fallback:!0,fallbackParams:"",fallbackText:"",fallbackLinkText:"Click here",fallbackLinkAfter:" to open in a separate window.",fallbackStyles:["padding: 15px","border: 1px solid transparent","border-radius: 4px","color: #3a87ad","background-color: #d9edf7","border-color: #bce8f1"],fallbackLinkStyles:["display: inline-block","color: #333","border: 1px solid #ccc","background-color: #fff","padding: 5px 10px","text-decoration: none","font-size: 12px","line-height: 1.5","border-radius: 6px","font-weight: 400","cursor: pointer","-webkit-user-select: none","-moz-user-select: none","-ms-user-select: none","user-select: none"],fallbackLinkHoverStyles:["background-color:#ebebeb","border-color:#adadad"],fallbackWindowWidth:960,fallbackWindowHeight:800};n=n||{};for(var s in i)n.hasOwnProperty(s)||(n[s]=i[s]);var l=o(this).eq(0);l.seamless_options=n,r.push(l);var c=(l.attr("name")||l.attr("id"),l.attr("src"));if(l.connection=new o.SeamlessConnection(l[0].contentWindow,c),l.send=function(t){l.connection.send.call(l.connection,t)},l.receive=function(t,e){l.connection.receive.call(l.connection,t,e)},l.attr({scrolling:"no",seamless:"seamless",width:"100%",height:"0px",marginheight:"0",marginwidth:"0",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no"}).css({border:"none",overflowY:"hidden"}),n.showLoadingIndicator){var u=o(e.createElement("div"));u.css({background:"url("+n.spinner+") no-repeat 10px 13px",padding:"10px 10px 10px 60px",width:"100%"}),u.append(n.loading),l.before(u)}var g=!0,h=function(){g=!1,void 0!==u&&u.remove()};if(n.fallback){n.fallbackParams&&(c+=-1===c.search(/\?/)?"?":"&",c+=n.fallbackParams);var p=o("#seamless-fallback-styles");if(!p.length){var d=function(t){return o.SeamlessBase.filterText(t.join(";"))};p=o(e.createElement("style")).attr({id:"seamless-fallback-styles",type:"text/css"}),o.SeamlessBase.setStyle(p[0],".seamless-fallback.seamless-styles {"+d(n.fallbackStyles)+"}.seamless-fallback em { padding: 5px; }.seamless-fallback-link.seamless-styles {"+d(n.fallbackLinkStyles)+"}.seamless-fallback-link.seamless-styles:hover {"+d(n.fallbackLinkHoverStyles)+"}"),l.before(p)}var f=['"'+c+'"',n.fallbackWindowWidth,n.fallbackWindowHeight],m=o(e.createElement("a")).attr({class:"seamless-fallback-link",href:"#",onclick:"seamlessOpenFallback("+f.join(",")+", event)"}),y=o(e.createElement("div")).attr({class:"seamless-fallback"});y.append(o(e.createElement("em"))),l.after(y);var v=function(t,e,n,r){r?(y.addClass("seamless-styles"),m.addClass("seamless-styles")):(y.removeClass("seamless-styles"),m.removeClass("seamless-styles")),y.find("em").text(o.SeamlessBase.filterText(t)+" ").append(m.text(o.SeamlessBase.filterText(e))).append(o.SeamlessBase.filterText(n))};n.fallbackText&&v(n.fallbackText,n.fallbackLinkText,n.fallbackLinkAfter,!1),o(t).error(function(){var t="An error has been detected on this page, ";t+="which may cause problems with the operation of this application.",v(t,n.fallbackLinkText,n.fallbackLinkAfter,!0)}),setTimeout(function(){g&&(h(),v("An error has been detected on this page.",n.fallbackLinkText,n.fallbackLinkAfter,!0))},3e4)}return l.seamless_ready=function(t,e){l.connection.id||(l.connection.id=a());var n={id:l.connection.id,styles:l.seamless_options.styles};l.connection.target||(l.connection.target=l[0].contentWindow),o.pm({type:"seamless_connect",target:l.connection.target,url:l.connection.url,data:n,success:function(t){l.seamless_options.onConnect&&l.seamless_options.onConnect(t)}}),l.trigger("connected")},l.seamless_update=function(t,e){return g&&(h(),l.connection.setActive(!0)),t.height>=0&&l.height(t.height).attr("height",t.height+"px"),t},l.seamless_error=function(t,e){h(),l.hide(),v(t.msg,t.linkText,t.afterText,!0)},l}}(window,document,jQuery)}).call(window)}).call(exports,__webpack_require__(0))},function(t,e,o){(function(){!function(){"use strict";var e={};void 0!==o&&(e=o);var o=e;e.version="0.0.7",e.config={textDiffMinLength:60,detectArrayMove:!0,includeValueOnArrayMove:!1};var n={diff:function(t,o,n,r){for(var i,s,a,l=0,c=0,u=t.length,g=o.length,h=[],p=[],d="function"==typeof n?function(t,e,o,r){if(t===e)return!0;if("object"!=typeof t||"object"!=typeof e)return!1;var i,s;return"number"==typeof o?void 0===(i=h[o])&&(h[o]=i=n(t)):i=n(t),"number"==typeof r?void 0===(s=p[r])&&(p[r]=s=n(e)):s=n(e),i===s}:function(t,e){return t===e},f=function(e,n){return d(t[e],o[n],e,n)},m=function(e,n){if(r&&"object"==typeof t[e]&&"object"==typeof o[n]){var i=r(t[e],o[n]);void 0!==i&&(a||(a={_t:"a"}),a[n]=i)}};l<u&&l<g&&f(l,l);)m(l,l),l++;for(;c+l<u&&c+l<g&&f(u-1-c,g-1-c);)m(u-1-c,g-1-c),c++;if(l+c===u){if(u===g)return a;for(a=a||{_t:"a"},i=l;i<g-c;i++)a[i]=[o[i]];return a}if(l+c===g){for(a=a||{_t:"a"},i=l;i<u-c;i++)a["_"+i]=[t[i],0,0];return a}var y=this.lcs(t.slice(l,u-c),o.slice(l,g-c),{areTheSameByIndex:function(t,e){return f(t+l,e+l)}});a=a||{_t:"a"};var v=[];for(i=l;i<u-c;i++)y.indices1.indexOf(i-l)<0&&(a["_"+i]=[t[i],0,0],v.push(i));var _=v.length;for(i=l;i<g-c;i++){var b=y.indices2.indexOf(i-l);if(b<0){var E=!1;if(e.config.detectArrayMove&&_>0)for(s=0;s<_;s++)if(f(v[s],i)){a["_"+v[s]].splice(1,2,i,3),e.config.includeValueOnArrayMove||(a["_"+v[s]][0]=""),m(v[s],i),v.splice(s,1),E=!0;break}E||(a[i]=[o[i]])}else m(y.indices1[b]+l,y.indices2[b]+l)}return a},getArrayIndexBefore:function(t,e){var o,n=e;for(var r in t)if(t.hasOwnProperty(r)&&i(t[r]))if(o="_"===r.slice(0,1)?parseInt(r.slice(1),10):parseInt(r,10),1===t[r].length){if(o<e)n--;else if(o===e)return-1}else if(3===t[r].length)if(0===t[r][2])o<=e&&n++;else if(3===t[r][2])if(o<=e&&n++,t[r][1]>e)n--;else if(t[r][1]===e)return o;return n},patch:function(t,e,o,n){var r,i,s=function(t,e){return t-e},a=[],l=[],c=[];for(r in e)if("_t"!==r)if("_"==r[0]){if(0!==e[r][2]&&3!==e[r][2])throw new Error("only removal or move can be applied at original array indices, invalid diff type: "+e[r][2]);a.push(parseInt(r.slice(1),10))}else 1===e[r].length?l.push({index:parseInt(r,10),value:e[r][0]}):c.push({index:parseInt(r,10),diff:e[r]});for(a=a.sort(s),r=a.length-1;r>=0;r--){i=a[r];var u=e["_"+i],g=t.splice(i,1)[0];3===u[2]&&l.push({index:u[1],value:g})}l=l.sort(function(t){return function(e,o){return e[t]-o[t]}}("index"));var h=l.length;for(r=0;r<h;r++){var p=l[r];t.splice(p.index,0,p.value)}var d=c.length;if(d>0){if("function"!=typeof o)throw new Error("to patch items in the array an objectInnerPatch function must be provided");for(r=0;r<d;r++){var f=c[r];o(t,f.index.toString(),f.diff,n)}}return t},lcs:function(t,e,o){o.areTheSameByIndex=o.areTheSameByIndex||function(o,n){return t[o]===e[n]};var n=this.lengthMatrix(t,e,o),r=this.backtrack(n,t,e,t.length,e.length);return"string"==typeof t&&"string"==typeof e&&(r.sequence=r.sequence.join("")),r},lengthMatrix:function(t,e,o){var n,r,i=t.length,s=e.length,a=[i+1];for(n=0;n<i+1;n++)for(a[n]=[s+1],r=0;r<s+1;r++)a[n][r]=0;for(a.options=o,n=1;n<i+1;n++)for(r=1;r<s+1;r++)o.areTheSameByIndex(n-1,r-1)?a[n][r]=a[n-1][r-1]+1:a[n][r]=Math.max(a[n-1][r],a[n][r-1]);return a},backtrack:function(t,e,o,n,r){if(0===n||0===r)return{sequence:[],indices1:[],indices2:[]};if(t.options.areTheSameByIndex(n-1,r-1)){var i=this.backtrack(t,e,o,n-1,r-1);return i.sequence.push(e[n-1]),i.indices1.push(n-1),i.indices2.push(r-1),i}return t[n][r-1]>t[n-1][r]?this.backtrack(t,e,o,n,r-1):this.backtrack(t,e,o,n-1,r)}};e.sequenceDiffer=n,e.dateReviver=function(t,e){var o;return"string"==typeof e&&(o=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/.exec(e))?new Date(Date.UTC(+o[1],+o[2]-1,+o[3],+o[4],+o[5],+o[6])):e};var r=function(){var t;if(e.config.diff_match_patch&&(t=new e.config.diff_match_patch.diff_match_patch),"undefined"!=typeof diff_match_patch&&("function"==typeof diff_match_patch?t=new diff_match_patch:"object"==typeof diff_match_patch&&"function"==typeof diff_match_patch.diff_match_patch&&(t=new diff_match_patch.diff_match_patch)),t)return e.config.textDiff=function(e,o){return t.patch_toText(t.patch_make(e,o))},e.config.textPatch=function(e,o){for(var n=t.patch_apply(t.patch_fromText(o),e),r=0;r<n[1].length;r++)if(!n[1][r])throw new Error("text patch failed");return n[0]},!0},i=e.isArray="function"==typeof Array.isArray?Array.isArray:function(t){return"object"==typeof t&&t instanceof Array},s=e.isDate=function(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)},a=function(t,o){return n.diff(t,o,e.config.objectHash,e.diff)},l=function(t,e){var o,n,r,i;i=function(r){void 0!==(n=c(t[r],e[r]))&&(void 0===o&&(o={}),o[r]=n)};for(r in e)e.hasOwnProperty(r)&&i(r);for(r in t)t.hasOwnProperty(r)&&void 0===e[r]&&i(r);return o},c=e.diff=function(t,o){var n,c,u,g,h;if(t!==o&&(t===t||o===o)&&(n=typeof o,c=typeof t,u=null===o,g=null===t,"object"==c&&s(t)&&(c="date"),"object"!=n||!s(o)||(n="date","date"!=c||t.getTime()!==o.getTime()))){if(u||g||"undefined"==n||n!=c||"number"==n||"number"==c||"boolean"==n||"boolean"==c||"string"==n||"string"==c||"date"==n||"date"==c||"object"===n&&i(o)!=i(t)){if(h=[],void 0!==t)if(void 0!==o){var p="string"==n&&"string"==c&&Math.min(t.length,o.length)>e.config.textDiffMinLength;p&&!e.config.textDiff&&r(),p&&e.config.textDiff?h.push(e.config.textDiff(t,o),0,2):(h.push(t),h.push(o))}else h.push(t),h.push(0,0);else h.push(o);return h}return i(o)?a(t,o):l(t,o)}},u=function(t,e){return i(t)?t[parseInt(e,10)]:t[e]};e.getByKey=u;var g=function(t,e,o){if(i(t)&&t._key){var n=t._key;"function"!=typeof t._key&&(n=function(e){return e[t._key]});for(var r=0;r<t.length;r++)if(n(t[r])===e)return void(void 0===o?(t.splice(r,1),r--):t[r]=o);return void(void 0!==o&&t.push(o))}void 0===o?i(t)?t.splice(e,1):delete t[e]:t[e]=o},h=function(t){return e.config.textDiffReverse||(e.config.textDiffReverse=function(t){var e,o,n,r,i,s=null,a=/^@@ +\-(\d+),(\d+) +\+(\d+),(\d+) +@@$/;for(n=t.split("\n"),e=0,o=n.length;e<o;e++){r=n[e];var l=r.slice(0,1);"@"===l?(s=a.exec(r),i=e,null,null,n[i]="@@ -"+s[3]+","+s[4]+" +"+s[1]+","+s[2]+" @@"):"+"==l?(e,n[e]="-"+n[e].slice(1)):"-"==l&&(e,n[e]="+"+n[e].slice(1))}return n.join("\n")}),e.config.textDiffReverse(t)},p=e.reverse=function(t){var e,o;if(void 0!==t){if(null===t)return null;if("object"==typeof t&&!s(t)){if(i(t)){if(t.length<3)return 1===t.length?[t[0],0,0]:[t[1],t[0]];if(0===t[2])return[t[0]];if(2===t[2])return[h(t[0]),0,2];throw new Error("invalid diff type")}if(o={},"a"===t._t){for(e in t)if(t.hasOwnProperty(e)&&"_t"!==e){var r,a=e;if(r="_"===e.slice(0,1)?parseInt(e.slice(1),10):parseInt(e,10),i(t[e]))if(1===t[e].length)a="_"+r;else if(2===t[e].length)a=n.getArrayIndexBefore(t,r);else if(0===t[e][2])a=r.toString();else{if(3===t[e][2]){a="_"+t[e][1],o[a]=[t[e][0],r,3];continue}a=n.getArrayIndexBefore(t,r)}else a=n.getArrayIndexBefore(t,r);o[a]=p(t[e])}o._t="a"}else for(e in t)t.hasOwnProperty(e)&&(o[e]=p(t[e]));return o}return"string"==typeof t&&"@@"===t.slice(0,2)?h(t):t}},d=e.patch=function(t,s,a,l){var c,h,p,f="";if("string"!=typeof s?(l=a,a=s,s=null):"object"!=typeof t&&(s=null),l&&(f+=l),f+="/",null!==s&&(f+=s),"object"==typeof a)if(i(a)){if(a.length<3)return h=a[a.length-1],null!==s&&g(t,s,h),h;if(0!==a[2]){if(2===a[2]){if(e.config.textPatch||r(),!e.config.textPatch)throw new Error("textPatch function not found");try{h=e.config.textPatch(u(t,s),a[0])}catch(t){throw new Error('cannot apply patch at "'+f+'": '+t)}return null!==s&&g(t,s,h),h}throw 3===a[2]?new Error("Not implemented diff type: "+a[2]):new Error("invalid diff type: "+a[2])}if(null===s)return;g(t,s)}else if("a"==a._t){if("object"!=typeof(p=null===s?t:u(t,s))||!i(p))throw new Error('cannot apply patch at "'+f+'": array expected');n.patch(p,a,o.patch,f)}else{if("object"!=typeof(p=null===s?t:u(t,s))||i(p))throw new Error('cannot apply patch at "'+f+'": object expected');for(c in a)a.hasOwnProperty(c)&&d(p,c,a[c],f)}return t};e.unpatch=function(t,e,o,n){return"string"!=typeof e?d(t,p(e),o):d(t,e,p(o),n)};t.exports=e}()}).call(window)},function(t,e,o){(function(e){(function(){!function(e,o){t.exports=o()}(0,function(){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){var n,r;n=[o(1),o(3),o(4)],void 0!==(r=function(t){return t}.apply(e,n))&&(t.exports=r)},function(t,e,o){var n,r;n=[o(2)],void 0!==(r=function(t){function e(o){if(e.is(o,"function"))return _?o():t.on("raphael.DOMload",o);if(e.is(o,q))return e._engine.create[B](e,o.splice(0,3+e.is(o[0],W))).add(o);var n=Array.prototype.slice.call(arguments,0);if(e.is(n[n.length-1],"function")){var r=n.pop();return _?r.call(e._engine.create[B](e,n)):t.on("raphael.DOMload",function(){r.call(e._engine.create[B](e,n))})}return e._engine.create[B](e,arguments)}function o(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[T](n)&&(e[n]=o(t[n]));return e}function n(t,e){for(var o=0,n=t.length;o<n;o++)if(t[o]===e)return t.push(t.splice(o,1)[0])}function r(t,e,o){function r(){var i=Array.prototype.slice.call(arguments,0),s=i.join("␀"),a=r.cache=r.cache||{},l=r.count=r.count||[];return a[T](s)?(n(l,s),o?o(a[s]):a[s]):(l.length>=1e3&&delete a[l.shift()],l.push(s),a[s]=t[B](e,i),o?o(a[s]):a[s])}return r}function i(){return this.hex}function s(t,e){for(var o=[],n=0,r=t.length;r-2*!e>n;n+=2){var i=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?r-4==n?i[3]={x:+t[0],y:+t[1]}:r-2==n&&(i[2]={x:+t[0],y:+t[1]},i[3]={x:+t[2],y:+t[3]}):i[0]={x:+t[r-2],y:+t[r-1]}:r-4==n?i[3]=i[2]:n||(i[0]={x:+t[n],y:+t[n+1]}),o.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return o}function a(t,e,o,n,r){return t*(t*(-3*e+9*o-9*n+3*r)+6*e-12*o+6*n)-3*e+3*o}function l(t,e,o,n,r,i,s,l,c){null==c&&(c=1),c=c>1?1:c<0?0:c;for(var u=c/2,g=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var f=u*g[d]+u,m=a(f,t,o,r,s),y=a(f,e,n,i,l),v=m*m+y*y;p+=h[d]*P.sqrt(v)}return u*p}function c(t,e,o,n,r,i,s,a,c){if(!(c<0||l(t,e,o,n,r,i,s,a)<c)){var u,g=.5,h=1-g;for(u=l(t,e,o,n,r,i,s,a,h);U(u-c)>.01;)g/=2,h+=(u<c?1:-1)*g,u=l(t,e,o,n,r,i,s,a,h);return h}}function u(t,e,o,n,r,i,s,a){if(!(F(t,o)<H(r,s)||H(t,o)>F(r,s)||F(e,n)<H(i,a)||H(e,n)>F(i,a))){var l=(t*n-e*o)*(r-s)-(t-o)*(r*a-i*s),c=(t*n-e*o)*(i-a)-(e-n)*(r*a-i*s),u=(t-o)*(i-a)-(e-n)*(r-s);if(u){var g=l/u,h=c/u,p=+g.toFixed(2),d=+h.toFixed(2);if(!(p<+H(t,o).toFixed(2)||p>+F(t,o).toFixed(2)||p<+H(r,s).toFixed(2)||p>+F(r,s).toFixed(2)||d<+H(e,n).toFixed(2)||d>+F(e,n).toFixed(2)||d<+H(i,a).toFixed(2)||d>+F(i,a).toFixed(2)))return{x:g,y:h}}}}function g(t,o,n){var r=e.bezierBBox(t),i=e.bezierBBox(o);if(!e.isBBoxIntersect(r,i))return n?0:[];for(var s=l.apply(0,t),a=l.apply(0,o),c=F(~~(s/5),1),g=F(~~(a/5),1),h=[],p=[],d={},f=n?0:[],m=0;m<c+1;m++){var y=e.findDotsAtSegment.apply(e,t.concat(m/c));h.push({x:y.x,y:y.y,t:m/c})}for(m=0;m<g+1;m++)y=e.findDotsAtSegment.apply(e,o.concat(m/g)),p.push({x:y.x,y:y.y,t:m/g});for(m=0;m<c;m++)for(var v=0;v<g;v++){var _=h[m],b=h[m+1],E=p[v],S=p[v+1],k=U(b.x-_.x)<.001?"y":"x",T=U(S.x-E.x)<.001?"y":"x",C=u(_.x,_.y,b.x,b.y,E.x,E.y,S.x,S.y);if(C){if(d[C.x.toFixed(4)]==C.y.toFixed(4))continue;d[C.x.toFixed(4)]=C.y.toFixed(4);var x=_.t+U((C[k]-_[k])/(b[k]-_[k]))*(b.t-_.t),w=E.t+U((C[T]-E[T])/(S[T]-E[T]))*(S.t-E.t);x>=0&&x<=1.001&&w>=0&&w<=1.001&&(n?f++:f.push({x:C.x,y:C.y,t1:H(x,1),t2:H(w,1)}))}}return f}function h(t,o,n){t=e._path2curve(t),o=e._path2curve(o);for(var r,i,s,a,l,c,u,h,p,d,f=n?0:[],m=0,y=t.length;m<y;m++){var v=t[m];if("M"==v[0])r=l=v[1],i=c=v[2];else{"C"==v[0]?(p=[r,i].concat(v.slice(1)),r=p[6],i=p[7]):(p=[r,i,r,i,l,c,l,c],r=l,i=c);for(var _=0,b=o.length;_<b;_++){var E=o[_];if("M"==E[0])s=u=E[1],a=h=E[2];else{"C"==E[0]?(d=[s,a].concat(E.slice(1)),s=d[6],a=d[7]):(d=[s,a,s,a,u,h,u,h],s=u,a=h);var S=g(p,d,n);if(n)f+=S;else{for(var k=0,T=S.length;k<T;k++)S[k].segment1=m,S[k].segment2=_,S[k].bez1=p,S[k].bez2=d;f=f.concat(S)}}}}}return f}function p(t,e,o,n,r,i){null!=t?(this.a=+t,this.b=+e,this.c=+o,this.d=+n,this.e=+r,this.f=+i):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function d(){return this.x+L+this.y+L+this.width+" × "+this.height}function f(t,e,o,n,r,i){function s(t){return((u*t+c)*t+l)*t}function a(t,e){var o,n,r,i,a,g;for(r=t,g=0;g<8;g++){if(i=s(r)-t,U(i)<e)return r;if(a=(3*u*r+2*c)*r+l,U(a)<1e-6)break;r-=i/a}if(o=0,n=1,(r=t)<o)return o;if(r>n)return n;for(;o<n;){if(i=s(r),U(i-t)<e)return r;t>i?o=r:n=r,r=(n-o)/2+o}return r}var l=3*e,c=3*(n-e)-l,u=1-l-c,g=3*o,h=3*(r-o)-g,p=1-g-h;return function(t,e){var o=a(t,e);return((p*o+h)*o+g)*o}(t,1/(200*i))}function m(t,e){var o=[],n={};if(this.ms=e,this.times=1,t){for(var r in t)t[T](r)&&(n[J(r)]=t[r],o.push(J(r)));o.sort(ut)}this.anim=n,this.top=o[o.length-1],this.percents=o}function y(o,n,r,i,s,a){r=J(r);var l,c,u,g,h,d,m=o.ms,y={},v={},_={};if(i)for(S=0,k=ie.length;S<k;S++){var b=ie[S];if(b.el.id==n.id&&b.anim==o){b.percent!=r?(ie.splice(S,1),u=1):c=b,n.attr(b.totalOrigin);break}}else i=+v;for(var S=0,k=o.percents.length;S<k;S++){if(o.percents[S]==r||o.percents[S]>i*o.top){r=o.percents[S],h=o.percents[S-1]||0,m=m/o.top*(r-h),g=o.percents[S+1],l=o.anim[r];break}i&&n.attr(o.anim[o.percents[S]])}if(l){if(c)c.initstatus=i,c.start=new Date-c.ms*i;else{for(var C in l)if(l[T](C)&&(ot[T](C)||n.paper.customAttributes[T](C)))switch(y[C]=n.attr(C),null==y[C]&&(y[C]=et[C]),v[C]=l[C],ot[C]){case W:_[C]=(v[C]-y[C])/m;break;case"colour":y[C]=e.getRGB(y[C]);var x=e.getRGB(v[C]);_[C]={r:(x.r-y[C].r)/m,g:(x.g-y[C].g)/m,b:(x.b-y[C].b)/m};break;case"path":var w=Dt(y[C],v[C]),B=w[1];for(y[C]=w[0],_[C]=[],S=0,k=y[C].length;S<k;S++){_[C][S]=[0];for(var A=1,N=y[C][S].length;A<N;A++)_[C][S][A]=(B[S][A]-y[C][S][A])/m}break;case"transform":var L=n._,O=Ft(L[C],v[C]);if(O)for(y[C]=O.from,v[C]=O.to,_[C]=[],_[C].real=!0,S=0,k=y[C].length;S<k;S++)for(_[C][S]=[y[C][S][0]],A=1,N=y[C][S].length;A<N;A++)_[C][S][A]=(v[C][S][A]-y[C][S][A])/m;else{var j=n.matrix||new p,M={_:{transform:L.transform},getBBox:function(){return n.getBBox(1)}};y[C]=[j.a,j.b,j.c,j.d,j.e,j.f],Mt(M,v[C]),v[C]=M._.transform,_[C]=[(M.matrix.a-j.a)/m,(M.matrix.b-j.b)/m,(M.matrix.c-j.c)/m,(M.matrix.d-j.d)/m,(M.matrix.e-j.e)/m,(M.matrix.f-j.f)/m]}break;case"csv":var P=R(l[C])[D](E),F=R(y[C])[D](E);if("clip-rect"==C)for(y[C]=F,_[C]=[],S=F.length;S--;)_[C][S]=(P[S]-y[C][S])/m;v[C]=P;break;default:for(P=[][I](l[C]),F=[][I](y[C]),_[C]=[],S=n.paper.customAttributes[C].length;S--;)_[C][S]=((P[S]||0)-(F[S]||0))/m}var H=l.easing,U=e.easing_formulas[H];if(!U)if((U=R(H).match($))&&5==U.length){var G=U;U=function(t){return f(t,+G[1],+G[2],+G[3],+G[4],m)}}else U=gt;if(d=l.start||o.start||+new Date,b={anim:o,percent:r,timestamp:d,start:d+(o.del||0),status:0,initstatus:i||0,stop:!1,ms:m,easing:U,from:y,diff:_,to:v,el:n,callback:l.callback,prev:h,next:g,repeat:a||o.times,origin:n.attr(),totalOrigin:s},ie.push(b),i&&!c&&!u&&(b.stop=!0,b.start=new Date-m*i,1==ie.length))return ae();u&&(b.start=new Date-b.ms*i),1==ie.length&&se(ae)}t("raphael.anim.start."+n.id,n,o)}}function v(t){for(var e=0;e<ie.length;e++)ie[e].el.paper==t&&ie.splice(e--,1)}e.version="2.2.0",e.eve=t;var _,b,E=/[, ]+/,S={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},k=/\{(\d+)\}/g,T="hasOwnProperty",C={doc:document,win:window},x={was:Object.prototype[T].call(C.win,"Raphael"),is:C.win.Raphael},w=function(){this.ca=this.customAttributes={}},B="apply",I="concat",A="ontouchstart"in C.win||C.win.DocumentTouch&&C.doc instanceof DocumentTouch,N="",L=" ",R=String,D="split",O="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[D](L),j={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},M=R.prototype.toLowerCase,P=Math,F=P.max,H=P.min,U=P.abs,G=P.pow,V=P.PI,W="number",z="string",q="array",X=Object.prototype.toString,K=(e._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Y={NaN:1,Infinity:1,"-Infinity":1},$=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=P.round,J=parseFloat,Z=parseInt,tt=R.prototype.toUpperCase,et=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},ot=e._availableAnimAttrs={blur:W,"clip-rect":"csv",cx:W,cy:W,fill:"colour","fill-opacity":W,"font-size":W,height:W,opacity:W,path:"path",r:W,rx:W,ry:W,stroke:"colour","stroke-opacity":W,"stroke-width":W,transform:"transform",width:W,x:W,y:W},nt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,rt={hs:1,rg:1},it=/,?([achlmqrstvxz]),?/gi,st=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,at=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,lt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ct=(e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ut=function(t,e){return J(t)-J(e)},gt=function(t){return t},ht=e._rectPath=function(t,e,o,n,r){return r?[["M",t+r,e],["l",o-2*r,0],["a",r,r,0,0,1,r,r],["l",0,n-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-o,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-n],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",o,0],["l",0,n],["l",-o,0],["z"]]},pt=function(t,e,o,n){return null==n&&(n=o),[["M",t,e],["m",0,-n],["a",o,n,0,1,1,0,2*n],["a",o,n,0,1,1,0,-2*n],["z"]]},dt=e._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return pt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ht(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ht(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return ht(e.x,e.y,e.width,e.height)}},ft=e.mapPath=function(t,e){if(!e)return t;var o,n,r,i,s,a,l;for(t=Dt(t),r=0,s=t.length;r<s;r++)for(l=t[r],i=1,a=l.length;i<a;i+=2)o=e.x(l[i],l[i+1]),n=e.y(l[i],l[i+1]),l[i]=o,l[i+1]=n;return t};if(e._g=C,e.type=C.win.SVGAngle||C.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var mt,yt=C.doc.createElement("div");if(yt.innerHTML='<v:shape adj="1"/>',mt=yt.firstChild,mt.style.behavior="url(#default#VML)",!mt||"object"!=typeof mt.adj)return e.type=N;yt=null}e.svg=!(e.vml="VML"==e.type),e._Paper=w,e.fn=b=w.prototype=e.prototype,e._id=0,e.is=function(t,e){return e=M.call(e),"finite"==e?!Y[T](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||X.call(t).slice(8,-1).toLowerCase()==e},e.angle=function(t,o,n,r,i,s){if(null==i){var a=t-n,l=o-r;return a||l?(180+180*P.atan2(-l,-a)/V+360)%360:0}return e.angle(t,o,i,s)-e.angle(n,r,i,s)},e.rad=function(t){return t%360*V/180},e.deg=function(t){return Math.round(180*t/V%360*1e3)/1e3},e.snapTo=function(t,o,n){if(n=e.is(n,"finite")?n:10,e.is(t,q)){for(var r=t.length;r--;)if(U(t[r]-o)<=n)return t[r]}else{t=+t;var i=o%t;if(i<n)return o-i;if(i>t-n)return o-i+t}return o};e.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*P.random()|0;return("x"==t?e:3&e|8).toString(16)});e.setWindow=function(o){t("raphael.setWindow",e,C.win,o),C.win=o,C.doc=C.win.document,e._engine.initWin&&e._engine.initWin(C.win)};var vt=function(t){if(e.vml){var o,n=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),o=i.body}catch(t){o=createPopup().document.body}var s=o.createTextRange();vt=r(function(t){try{o.style.color=R(t).replace(n,N);var e=s.queryCommandValue("ForeColor");return e=(255&e)<<16|65280&e|(16711680&e)>>>16,"#"+("000000"+e.toString(16)).slice(-6)}catch(t){return"none"}})}else{var a=C.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",C.doc.body.appendChild(a),vt=r(function(t){return a.style.color=t,C.doc.defaultView.getComputedStyle(a,N).getPropertyValue("color")})}return vt(t)},_t=function(){return"hsb("+[this.h,this.s,this.b]+")"},bt=function(){return"hsl("+[this.h,this.s,this.l]+")"},Et=function(){return this.hex},St=function(t,o,n){if(null==o&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,o=t.g,t=t.r),null==o&&e.is(t,z)){var r=e.getRGB(t);t=r.r,o=r.g,n=r.b}return(t>1||o>1||n>1)&&(t/=255,o/=255,n/=255),[t,o,n]},kt=function(t,o,n,r){t*=255,o*=255,n*=255;var i={r:t,g:o,b:n,hex:e.rgb(t,o,n),toString:Et};return e.is(r,"finite")&&(i.opacity=r),i};e.color=function(t){var o;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(o=e.hsb2rgb(t),t.r=o.r,t.g=o.g,t.b=o.b,t.hex=o.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(o=e.hsl2rgb(t),t.r=o.r,t.g=o.g,t.b=o.b,t.hex=o.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(o=e.rgb2hsl(t),t.h=o.h,t.s=o.s,t.l=o.l,o=e.rgb2hsb(t),t.v=o.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=Et,t},e.hsb2rgb=function(t,e,o,n){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(o=t.b,e=t.s,n=t.o,t=t.h),t*=360;var r,i,s,a,l;return t=t%360/60,l=o*e,a=l*(1-U(t%2-1)),r=i=s=o-l,t=~~t,r+=[l,a,0,0,a,l][t],i+=[a,l,l,a,0,0][t],s+=[0,0,a,l,l,a][t],kt(r,i,s,n)},e.hsl2rgb=function(t,e,o,n){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(o=t.l,e=t.s,t=t.h),(t>1||e>1||o>1)&&(t/=360,e/=100,o/=100),t*=360;var r,i,s,a,l;return t=t%360/60,l=2*e*(o<.5?o:1-o),a=l*(1-U(t%2-1)),r=i=s=o-l/2,t=~~t,r+=[l,a,0,0,a,l][t],i+=[a,l,l,a,0,0][t],s+=[0,0,a,l,l,a][t],kt(r,i,s,n)},e.rgb2hsb=function(t,e,o){o=St(t,e,o),t=o[0],e=o[1],o=o[2];var n,r,i,s;return i=F(t,e,o),s=i-H(t,e,o),n=0==s?null:i==t?(e-o)/s:i==e?(o-t)/s+2:(t-e)/s+4,n=(n+360)%6*60/360,r=0==s?0:s/i,{h:n,s:r,b:i,toString:_t}},e.rgb2hsl=function(t,e,o){o=St(t,e,o),t=o[0],e=o[1],o=o[2];var n,r,i,s,a,l;return s=F(t,e,o),a=H(t,e,o),l=s-a,n=0==l?null:s==t?(e-o)/l:s==e?(o-t)/l+2:(t-e)/l+4,n=(n+360)%6*60/360,i=(s+a)/2,r=0==l?0:i<.5?l/(2*i):l/(2-2*i),{h:n,s:r,l:i,toString:bt}},e._path2string=function(){return this.join(",").replace(it,"$1")};e._preload=function(t,e){var o=C.doc.createElement("img");o.style.cssText="position:absolute;left:-9999em;top:-9999em",o.onload=function(){e.call(this),this.onload=null,C.doc.body.removeChild(this)},o.onerror=function(){C.doc.body.removeChild(this)},C.doc.body.appendChild(o),o.src=t};e.getRGB=r(function(t){if(!t||(t=R(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:i};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:i};!(rt[T](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=vt(t));var o,n,r,s,a,l,c=t.match(K);return c?(c[2]&&(r=Z(c[2].substring(5),16),n=Z(c[2].substring(3,5),16),o=Z(c[2].substring(1,3),16)),c[3]&&(r=Z((a=c[3].charAt(3))+a,16),n=Z((a=c[3].charAt(2))+a,16),o=Z((a=c[3].charAt(1))+a,16)),c[4]&&(l=c[4][D](nt),o=J(l[0]),"%"==l[0].slice(-1)&&(o*=2.55),n=J(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),r=J(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(s=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100)),c[5]?(l=c[5][D](nt),o=J(l[0]),"%"==l[0].slice(-1)&&(o*=2.55),n=J(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),r=J(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(o/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(s=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),e.hsb2rgb(o,n,r,s)):c[6]?(l=c[6][D](nt),o=J(l[0]),"%"==l[0].slice(-1)&&(o*=2.55),n=J(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),r=J(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(o/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(s=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),e.hsl2rgb(o,n,r,s)):(c={r:o,g:n,b:r,toString:i},c.hex="#"+(16777216|r|n<<8|o<<16).toString(16).slice(1),e.is(s,"finite")&&(c.opacity=s),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:i}},e),e.hsb=r(function(t,o,n){return e.hsb2rgb(t,o,n).hex}),e.hsl=r(function(t,o,n){return e.hsl2rgb(t,o,n).hex}),e.rgb=r(function(t,e,o){function n(t){return t+.5|0}return"#"+(16777216|n(o)|n(e)<<8|n(t)<<16).toString(16).slice(1)}),e.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},o=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),o.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var o=Tt(t);if(o.arr)return xt(o.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[];return e.is(t,q)&&e.is(t[0],q)&&(r=xt(t)),r.length||R(t).replace(st,function(t,e,o){var i=[],s=e.toLowerCase();if(o.replace(lt,function(t,e){e&&i.push(+e)}),"m"==s&&i.length>2&&(r.push([e][I](i.splice(0,2))),s="l",e="m"==e?"l":"L"),"r"==s)r.push([e][I](i));else for(;i.length>=n[s]&&(r.push([e][I](i.splice(0,n[s]))),n[s]););}),r.toString=e._path2string,o.arr=xt(r),r},e.parseTransformString=r(function(t){if(!t)return null;var o=[];return e.is(t,q)&&e.is(t[0],q)&&(o=xt(t)),o.length||R(t).replace(at,function(t,e,n){var r=[];M.call(e);n.replace(lt,function(t,e){e&&r.push(+e)}),o.push([e][I](r))}),o.toString=e._path2string,o});var Tt=function(t){var e=Tt.ps=Tt.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var o in e)e[T](o)&&o!=t&&!--e[o].sleep&&delete e[o]}),e[t]};e.findDotsAtSegment=function(t,e,o,n,r,i,s,a,l){var c=1-l,u=G(c,3),g=G(c,2),h=l*l,p=h*l,d=u*t+3*g*l*o+3*c*l*l*r+p*s,f=u*e+3*g*l*n+3*c*l*l*i+p*a,m=t+2*l*(o-t)+h*(r-2*o+t),y=e+2*l*(n-e)+h*(i-2*n+e),v=o+2*l*(r-o)+h*(s-2*r+o),_=n+2*l*(i-n)+h*(a-2*i+n),b=c*t+l*o,E=c*e+l*n,S=c*r+l*s,k=c*i+l*a,T=90-180*P.atan2(m-v,y-_)/V;return(m>v||y<_)&&(T+=180),{x:d,y:f,m:{x:m,y:y},n:{x:v,y:_},start:{x:b,y:E},end:{x:S,y:k},alpha:T}},e.bezierBBox=function(t,o,n,r,i,s,a,l){e.is(t,"array")||(t=[t,o,n,r,i,s,a,l]);var c=Rt.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},e.isPointInsideBBox=function(t,e,o){return e>=t.x&&e<=t.x2&&o>=t.y&&o<=t.y2},e.isBBoxIntersect=function(t,o){var n=e.isPointInsideBBox;return n(o,t.x,t.y)||n(o,t.x2,t.y)||n(o,t.x,t.y2)||n(o,t.x2,t.y2)||n(t,o.x,o.y)||n(t,o.x2,o.y)||n(t,o.x,o.y2)||n(t,o.x2,o.y2)||(t.x<o.x2&&t.x>o.x||o.x<t.x2&&o.x>t.x)&&(t.y<o.y2&&t.y>o.y||o.y<t.y2&&o.y>t.y)},e.pathIntersection=function(t,e){return h(t,e)},e.pathIntersectionNumber=function(t,e){return h(t,e,1)},e.isPointInsidePath=function(t,o,n){var r=e.pathBBox(t);return e.isPointInsideBBox(r,o,n)&&h(t,[["M",o,n],["H",r.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){t("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Ct=e.pathBBox=function(t){var e=Tt(t);if(e.bbox)return o(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Dt(t);for(var n,r=0,i=0,s=[],a=[],l=0,c=t.length;l<c;l++)if(n=t[l],"M"==n[0])r=n[1],i=n[2],s.push(r),a.push(i);else{var u=Rt(r,i,n[1],n[2],n[3],n[4],n[5],n[6]);s=s[I](u.min.x,u.max.x),a=a[I](u.min.y,u.max.y),r=n[5],i=n[6]}var g=H[B](0,s),h=H[B](0,a),p=F[B](0,s),d=F[B](0,a),f=p-g,m=d-h,y={x:g,y:h,x2:p,y2:d,width:f,height:m,cx:g+f/2,cy:h+m/2};return e.bbox=o(y),y},xt=function(t){var n=o(t);return n.toString=e._path2string,n},wt=e._pathToRelative=function(t){var o=Tt(t);if(o.rel)return xt(o.rel);e.is(t,q)&&e.is(t&&t[0],q)||(t=e.parsePathString(t));var n=[],r=0,i=0,s=0,a=0,l=0;"M"==t[0][0]&&(r=t[0][1],i=t[0][2],s=r,a=i,l++,n.push(["M",r,i]));for(var c=l,u=t.length;c<u;c++){var g=n[c]=[],h=t[c];if(h[0]!=M.call(h[0]))switch(g[0]=M.call(h[0]),g[0]){case"a":g[1]=h[1],g[2]=h[2],g[3]=h[3],g[4]=h[4],g[5]=h[5],g[6]=+(h[6]-r).toFixed(3),g[7]=+(h[7]-i).toFixed(3);break;case"v":g[1]=+(h[1]-i).toFixed(3);break;case"m":s=h[1],a=h[2];default:for(var p=1,d=h.length;p<d;p++)g[p]=+(h[p]-(p%2?r:i)).toFixed(3)}else{g=n[c]=[],"m"==h[0]&&(s=h[1]+r,a=h[2]+i);for(var f=0,m=h.length;f<m;f++)n[c][f]=h[f]}var y=n[c].length;switch(n[c][0]){case"z":r=s,i=a;break;case"h":r+=+n[c][y-1];break;case"v":i+=+n[c][y-1];break;default:r+=+n[c][y-2],i+=+n[c][y-1]}}return n.toString=e._path2string,o.rel=xt(n),n},Bt=e._pathToAbsolute=function(t){var o=Tt(t);if(o.abs)return xt(o.abs);if(e.is(t,q)&&e.is(t&&t[0],q)||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],r=0,i=0,a=0,l=0,c=0;"M"==t[0][0]&&(r=+t[0][1],i=+t[0][2],a=r,l=i,c++,n[0]=["M",r,i]);for(var u,g,h=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=c,d=t.length;p<d;p++){if(n.push(u=[]),g=t[p],g[0]!=tt.call(g[0]))switch(u[0]=tt.call(g[0]),u[0]){case"A":u[1]=g[1],u[2]=g[2],u[3]=g[3],u[4]=g[4],u[5]=g[5],u[6]=+(g[6]+r),u[7]=+(g[7]+i);break;case"V":u[1]=+g[1]+i;break;case"H":u[1]=+g[1]+r;break;case"R":for(var f=[r,i][I](g.slice(1)),m=2,y=f.length;m<y;m++)f[m]=+f[m]+r,f[++m]=+f[m]+i;n.pop(),n=n[I](s(f,h));break;case"M":a=+g[1]+r,l=+g[2]+i;default:for(m=1,y=g.length;m<y;m++)u[m]=+g[m]+(m%2?r:i)}else if("R"==g[0])f=[r,i][I](g.slice(1)),n.pop(),n=n[I](s(f,h)),u=["R"][I](g.slice(-2));else for(var v=0,_=g.length;v<_;v++)u[v]=g[v];switch(u[0]){case"Z":r=a,i=l;break;case"H":r=u[1];break;case"V":i=u[1];break;case"M":a=u[u.length-2],l=u[u.length-1];default:r=u[u.length-2],i=u[u.length-1]}}return n.toString=e._path2string,o.abs=xt(n),n},It=function(t,e,o,n){return[t,e,o,n,o,n]},At=function(t,e,o,n,r,i){var s=1/3,a=2/3;return[s*t+a*o,s*e+a*n,s*r+a*o,s*i+a*n,r,i]},Nt=function(t,e,o,n,i,s,a,l,c,u){var g,h=120*V/180,p=V/180*(+i||0),d=[],f=r(function(t,e,o){return{x:t*P.cos(o)-e*P.sin(o),y:t*P.sin(o)+e*P.cos(o)}});if(u)T=u[0],C=u[1],S=u[2],k=u[3];else{g=f(t,e,-p),t=g.x,e=g.y,g=f(l,c,-p),l=g.x,c=g.y;var m=(P.cos(V/180*i),P.sin(V/180*i),(t-l)/2),y=(e-c)/2,v=m*m/(o*o)+y*y/(n*n);v>1&&(v=P.sqrt(v),o*=v,n*=v);var _=o*o,b=n*n,E=(s==a?-1:1)*P.sqrt(U((_*b-_*y*y-b*m*m)/(_*y*y+b*m*m))),S=E*o*y/n+(t+l)/2,k=E*-n*m/o+(e+c)/2,T=P.asin(((e-k)/n).toFixed(9)),C=P.asin(((c-k)/n).toFixed(9));T=t<S?V-T:T,C=l<S?V-C:C,T<0&&(T=2*V+T),C<0&&(C=2*V+C),a&&T>C&&(T-=2*V),!a&&C>T&&(C-=2*V)}var x=C-T;if(U(x)>h){var w=C,B=l,A=c;C=T+h*(a&&C>T?1:-1),l=S+o*P.cos(C),c=k+n*P.sin(C),d=Nt(l,c,o,n,i,0,a,B,A,[C,w,S,k])}x=C-T;var N=P.cos(T),L=P.sin(T),R=P.cos(C),O=P.sin(C),j=P.tan(x/4),M=4/3*o*j,F=4/3*n*j,H=[t,e],G=[t+M*L,e-F*N],W=[l+M*O,c-F*R],z=[l,c];if(G[0]=2*H[0]-G[0],G[1]=2*H[1]-G[1],u)return[G,W,z][I](d);d=[G,W,z][I](d).join()[D](",");for(var q=[],X=0,K=d.length;X<K;X++)q[X]=X%2?f(d[X-1],d[X],p).y:f(d[X],d[X+1],p).x;return q},Lt=function(t,e,o,n,r,i,s,a,l){var c=1-l;return{x:G(c,3)*t+3*G(c,2)*l*o+3*c*l*l*r+G(l,3)*s,y:G(c,3)*e+3*G(c,2)*l*n+3*c*l*l*i+G(l,3)*a}},Rt=r(function(t,e,o,n,r,i,s,a){var l,c=r-2*o+t-(s-2*r+o),u=2*(o-t)-2*(r-o),g=t-o,h=(-u+P.sqrt(u*u-4*c*g))/2/c,p=(-u-P.sqrt(u*u-4*c*g))/2/c,d=[e,a],f=[t,s];return U(h)>"1e12"&&(h=.5),U(p)>"1e12"&&(p=.5),h>0&&h<1&&(l=Lt(t,e,o,n,r,i,s,a,h),f.push(l.x),d.push(l.y)),p>0&&p<1&&(l=Lt(t,e,o,n,r,i,s,a,p),f.push(l.x),d.push(l.y)),c=i-2*n+e-(a-2*i+n),u=2*(n-e)-2*(i-n),g=e-n,h=(-u+P.sqrt(u*u-4*c*g))/2/c,p=(-u-P.sqrt(u*u-4*c*g))/2/c,U(h)>"1e12"&&(h=.5),U(p)>"1e12"&&(p=.5),h>0&&h<1&&(l=Lt(t,e,o,n,r,i,s,a,h),f.push(l.x),d.push(l.y)),p>0&&p<1&&(l=Lt(t,e,o,n,r,i,s,a,p),f.push(l.x),d.push(l.y)),{min:{x:H[B](0,f),y:H[B](0,d)},max:{x:F[B](0,f),y:F[B](0,d)}}}),Dt=e._path2curve=r(function(t,e){var o=!e&&Tt(t);if(!e&&o.curve)return xt(o.curve);for(var n=Bt(t),r=e&&Bt(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=(function(t,e,o){var n,r,i={T:1,Q:1};if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in i)&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][I](Nt[B](0,[e.x,e.y][I](t.slice(1))));break;case"S":"C"==o||"S"==o?(n=2*e.x-e.bx,r=2*e.y-e.by):(n=e.x,r=e.y),t=["C",n,r][I](t.slice(1));break;case"T":"Q"==o||"T"==o?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][I](At(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][I](At(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][I](It(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][I](It(e.x,e.y,t[1],e.y));break;case"V":t=["C"][I](It(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][I](It(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)u[e]="A",r&&(g[e]="A"),t.splice(e++,0,["C"][I](o.splice(0,6)));t.splice(e,1),f=F(n.length,r&&r.length||0)}},c=function(t,e,o,i,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",i.x,i.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],f=F(n.length,r&&r.length||0))},u=[],g=[],h="",p="",d=0,f=F(n.length,r&&r.length||0);d<f;d++){n[d]&&(h=n[d][0]),"C"!=h&&(u[d]=h,d&&(p=u[d-1])),n[d]=a(n[d],i,p),"A"!=u[d]&&"C"==h&&(u[d]="C"),l(n,d),r&&(r[d]&&(h=r[d][0]),"C"!=h&&(g[d]=h,d&&(p=g[d-1])),r[d]=a(r[d],s,p),"A"!=g[d]&&"C"==h&&(g[d]="C"),l(r,d)),c(n,r,i,s,d),c(r,n,s,i,d);var m=n[d],y=r&&r[d],v=m.length,_=r&&y.length;i.x=m[v-2],i.y=m[v-1],i.bx=J(m[v-4])||i.x,i.by=J(m[v-3])||i.y,s.bx=r&&(J(y[_-4])||s.x),s.by=r&&(J(y[_-3])||s.y),s.x=r&&y[_-2],s.y=r&&y[_-1]}return r||(o.curve=xt(n)),r?[n,r]:n},null,xt),Ot=(e._parseDots=r(function(t){for(var o=[],n=0,r=t.length;n<r;n++){var i={},s=t[n].match(/^([^:]*):?([\d\.]*)/);if(i.color=e.getRGB(s[1]),i.color.error)return null;i.opacity=i.color.opacity,i.color=i.color.hex,s[2]&&(i.offset=s[2]+"%"),o.push(i)}for(n=1,r=o.length-1;n<r;n++)if(!o[n].offset){for(var a=J(o[n-1].offset||0),l=0,c=n+1;c<r;c++)if(o[c].offset){l=o[c].offset;break}l||(l=100,c=r),l=J(l);for(var u=(l-a)/(c-n+1);n<c;n++)a+=u,o[n].offset=a+"%"}return o}),e._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),jt=(e._tofront=function(t,e){e.top!==t&&(Ot(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},e._toback=function(t,e){e.bottom!==t&&(Ot(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},e._insertafter=function(t,e,o){Ot(t,o),e==o.top&&(o.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},e._insertbefore=function(t,e,o){Ot(t,o),e==o.bottom&&(o.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},e.toMatrix=function(t,e){var o=Ct(t),n={_:{transform:N},getBBox:function(){return o}};return Mt(n,e),n.matrix}),Mt=(e.transformPath=function(t,e){return ft(t,jt(t,e))},e._extractTransform=function(t,o){if(null==o)return t._.transform;o=R(o).replace(/\.{3}|\u2026/g,t._.transform||N);var n=e.parseTransformString(o),r=0,i=0,s=0,a=1,l=1,c=t._,u=new p;if(c.transform=n||[],n)for(var g=0,h=n.length;g<h;g++){var d,f,m,y,v,_=n[g],b=_.length,E=R(_[0]).toLowerCase(),S=_[0]!=E,k=S?u.invert():0;"t"==E&&3==b?S?(d=k.x(0,0),f=k.y(0,0),m=k.x(_[1],_[2]),y=k.y(_[1],_[2]),u.translate(m-d,y-f)):u.translate(_[1],_[2]):"r"==E?2==b?(v=v||t.getBBox(1),u.rotate(_[1],v.x+v.width/2,v.y+v.height/2),r+=_[1]):4==b&&(S?(m=k.x(_[2],_[3]),y=k.y(_[2],_[3]),u.rotate(_[1],m,y)):u.rotate(_[1],_[2],_[3]),r+=_[1]):"s"==E?2==b||3==b?(v=v||t.getBBox(1),u.scale(_[1],_[b-1],v.x+v.width/2,v.y+v.height/2),a*=_[1],l*=_[b-1]):5==b&&(S?(m=k.x(_[3],_[4]),y=k.y(_[3],_[4]),u.scale(_[1],_[2],m,y)):u.scale(_[1],_[2],_[3],_[4]),a*=_[1],l*=_[2]):"m"==E&&7==b&&u.add(_[1],_[2],_[3],_[4],_[5],_[6]),c.dirtyT=1,t.matrix=u}t.matrix=u,c.sx=a,c.sy=l,c.deg=r,c.dx=i=u.e,c.dy=s=u.f,1==a&&1==l&&!r&&c.bbox?(c.bbox.x+=+i,c.bbox.y+=+s):c.dirtyT=1}),Pt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},Ft=e._equaliseTransform=function(t,o){o=R(o).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],o=e.parseTransformString(o)||[];for(var n,r,i,s,a=F(t.length,o.length),l=[],c=[],u=0;u<a;u++){if(i=t[u]||Pt(o[u]),s=o[u]||Pt(i),i[0]!=s[0]||"r"==i[0].toLowerCase()&&(i[2]!=s[2]||i[3]!=s[3])||"s"==i[0].toLowerCase()&&(i[3]!=s[3]||i[4]!=s[4]))return;for(l[u]=[],c[u]=[],n=0,r=F(i.length,s.length);n<r;n++)n in i&&(l[u][n]=i[n]),n in s&&(c[u][n]=s[n])}return{from:l,to:c}};e._getContainer=function(t,o,n,r){var i;if(null!=(i=null!=r||e.is(t,"object")?t:C.doc.getElementById(t)))return i.tagName?null==o?{container:i,width:i.style.pixelWidth||i.offsetWidth,height:i.style.pixelHeight||i.offsetHeight}:{container:i,width:o,height:n}:{container:1,x:t,y:o,width:n,height:r}},e.pathToRelative=wt,e._engine={},e.path2curve=Dt,e.matrix=function(t,e,o,n,r,i){return new p(t,e,o,n,r,i)},function(t){function o(t){return t[0]*t[0]+t[1]*t[1]}function n(t){var e=P.sqrt(o(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}t.add=function(t,e,o,n,r,i){var s,a,l,c,u=[[],[],[]],g=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[t,o,r],[e,n,i],[0,0,1]];for(t&&t instanceof p&&(h=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),s=0;s<3;s++)for(a=0;a<3;a++){for(c=0,l=0;l<3;l++)c+=g[s][l]*h[l][a];u[s][a]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new p(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new p(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,o,n){null==e&&(e=t),(o||n)&&this.add(1,0,0,1,o,n),this.add(t,0,0,e,0,0),(o||n)&&this.add(1,0,0,1,-o,-n)},t.rotate=function(t,o,n){t=e.rad(t),o=o||0,n=n||0;var r=+P.cos(t).toFixed(9),i=+P.sin(t).toFixed(9);this.add(r,i,-i,r,o,n),this.add(1,0,0,1,-o,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[R.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var r=[[this.a,this.c],[this.b,this.d]];t.scalex=P.sqrt(o(r[0])),n(r[0]),t.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*t.shear,r[1][1]-r[0][1]*t.shear],t.scaley=P.sqrt(o(r[1])),n(r[1]),t.shear/=t.scaley;var i=-r[0][1],s=r[1][1];return s<0?(t.rotate=e.deg(P.acos(s)),i<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(P.asin(i)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[D]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:N)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:N)+(e.rotate?"r"+[e.rotate,0,0]:N)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(p.prototype);for(var Ht=function(){this.returnValue=!1},Ut=function(){return this.originalEvent.preventDefault()},Gt=function(){this.cancelBubble=!0},Vt=function(){return this.originalEvent.stopPropagation()},Wt=function(t){var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,o=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;return{x:t.clientX+o,y:t.clientY+e}},zt=function(){return C.doc.addEventListener?function(t,e,o,n){var r=function(t){var e=Wt(t);return o.call(n,t,e.x,e.y)};if(t.addEventListener(e,r,!1),A&&j[e]){var i=function(e){for(var r=Wt(e),i=e,s=0,a=e.targetTouches&&e.targetTouches.length;s<a;s++)if(e.targetTouches[s].target==t){e=e.targetTouches[s],e.originalEvent=i,e.preventDefault=Ut,e.stopPropagation=Vt;break}return o.call(n,e,r.x,r.y)};t.addEventListener(j[e],i,!1)}return function(){return t.removeEventListener(e,r,!1),A&&j[e]&&t.removeEventListener(j[e],i,!1),!0}}:C.doc.attachEvent?function(t,e,o,n){var r=function(t){t=t||C.win.event;var e=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,r=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,i=t.clientX+r,s=t.clientY+e;return t.preventDefault=t.preventDefault||Ht,t.stopPropagation=t.stopPropagation||Gt,o.call(n,t,i,s)};return t.attachEvent("on"+e,r),function(){return t.detachEvent("on"+e,r),!0}}:void 0}(),qt=[],Xt=function(e){for(var o,n=e.clientX,r=e.clientY,i=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,s=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft,a=qt.length;a--;){if(o=qt[a],A&&e.touches){for(var l,c=e.touches.length;c--;)if(l=e.touches[c],l.identifier==o.el._drag.id){n=l.clientX,r=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var u,g=o.el.node,h=g.nextSibling,p=g.parentNode,d=g.style.display;C.win.opera&&p.removeChild(g),g.style.display="none",u=o.el.paper.getElementByPoint(n,r),g.style.display=d,C.win.opera&&(h?p.insertBefore(g,h):p.appendChild(g)),u&&t("raphael.drag.over."+o.el.id,o.el,u),n+=s,r+=i,t("raphael.drag.move."+o.el.id,o.move_scope||o.el,n-o.el._drag.x,r-o.el._drag.y,n,r,e)}},Kt=function(o){e.unmousemove(Xt).unmouseup(Kt);for(var n,r=qt.length;r--;)n=qt[r],n.el._drag={},t("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,o);qt=[]},Yt=e.el={},$t=O.length;$t--;)!function(t){e[t]=Yt[t]=function(o,n){return e.is(o,"function")&&(this.events=this.events||[],this.events.push({name:t,f:o,unbind:zt(this.shape||this.node||C.doc,t,o,n||this)})),this},e["un"+t]=Yt["un"+t]=function(o){for(var n=this.events||[],r=n.length;r--;)n[r].name!=t||!e.is(o,"undefined")&&n[r].f!=o||(n[r].unbind(),n.splice(r,1),!n.length&&delete this.events);return this}}(O[$t]);Yt.data=function(o,n){var r=ct[this.id]=ct[this.id]||{};if(0==arguments.length)return r;if(1==arguments.length){if(e.is(o,"object")){for(var i in o)o[T](i)&&this.data(i,o[i]);return this}return t("raphael.data.get."+this.id,this,r[o],o),r[o]}return r[o]=n,t("raphael.data.set."+this.id,this,n,o),this},Yt.removeData=function(t){return null==t?ct[this.id]={}:ct[this.id]&&delete ct[this.id][t],this},Yt.getData=function(){return o(ct[this.id]||{})},Yt.hover=function(t,e,o,n){return this.mouseover(t,o).mouseout(e,n||o)},Yt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var Qt=[];Yt.drag=function(o,n,r,i,s,a){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,u=l.clientY,g=C.doc.documentElement.scrollTop||C.doc.body.scrollTop,h=C.doc.documentElement.scrollLeft||C.doc.body.scrollLeft;if(this._drag.id=l.identifier,A&&l.touches)for(var p,d=l.touches.length;d--;)if(p=l.touches[d],this._drag.id=p.identifier,p.identifier==this._drag.id){c=p.clientX,u=p.clientY;break}this._drag.x=c+h,this._drag.y=u+g,!qt.length&&e.mousemove(Xt).mouseup(Kt),qt.push({el:this,move_scope:i,start_scope:s,end_scope:a}),n&&t.on("raphael.drag.start."+this.id,n),o&&t.on("raphael.drag.move."+this.id,o),r&&t.on("raphael.drag.end."+this.id,r),t("raphael.drag.start."+this.id,s||i||this,l.clientX+h,l.clientY+g,l)}return this._drag={},Qt.push({el:this,start:l}),this.mousedown(l),this},Yt.onDragOver=function(e){e?t.on("raphael.drag.over."+this.id,e):t.unbind("raphael.drag.over."+this.id)},Yt.undrag=function(){for(var o=Qt.length;o--;)Qt[o].el==this&&(this.unmousedown(Qt[o].start),Qt.splice(o,1),t.unbind("raphael.drag.*."+this.id));!Qt.length&&e.unmousemove(Xt).unmouseup(Kt),qt=[]},b.circle=function(t,o,n){var r=e._engine.circle(this,t||0,o||0,n||0);return this.__set__&&this.__set__.push(r),r},b.rect=function(t,o,n,r,i){var s=e._engine.rect(this,t||0,o||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},b.ellipse=function(t,o,n,r){var i=e._engine.ellipse(this,t||0,o||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},b.path=function(t){t&&!e.is(t,z)&&!e.is(t[0],q)&&(t+=N);var o=e._engine.path(e.format[B](e,arguments),this);return this.__set__&&this.__set__.push(o),o},b.image=function(t,o,n,r,i){var s=e._engine.image(this,t||"about:blank",o||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},b.text=function(t,o,n){var r=e._engine.text(this,t||0,o||0,R(n));return this.__set__&&this.__set__.push(r),r},b.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var o=new ce(t);return this.__set__&&this.__set__.push(o),o.paper=this,o.type="set",o},b.setStart=function(t){this.__set__=t||this.set()},b.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},b.getSize=function(){var t=this.canvas.parentNode;return{width:t.offsetWidth,height:t.offsetHeight}},b.setSize=function(t,o){return e._engine.setSize.call(this,t,o)},b.setViewBox=function(t,o,n,r,i){return e._engine.setViewBox.call(this,t,o,n,r,i)},b.top=b.bottom=null,b.raphael=e;var Jt=function(t){var e=t.getBoundingClientRect(),o=t.ownerDocument,n=o.body,r=o.documentElement,i=r.clientTop||n.clientTop||0,s=r.clientLeft||n.clientLeft||0;return{y:e.top+(C.win.pageYOffset||r.scrollTop||n.scrollTop)-i,x:e.left+(C.win.pageXOffset||r.scrollLeft||n.scrollLeft)-s}};b.getElementByPoint=function(t,e){var o=this,n=o.canvas,r=C.doc.elementFromPoint(t,e);if(C.win.opera&&"svg"==r.tagName){var i=Jt(n),s=n.createSVGRect();s.x=t-i.x,s.y=e-i.y,s.width=s.height=1;var a=n.getIntersectionList(s,null);a.length&&(r=a[a.length-1])}if(!r)return null;for(;r.parentNode&&r!=n.parentNode&&!r.raphael;)r=r.parentNode;return r==o.canvas.parentNode&&(r=n),r=r&&r.raphael?o.getById(r.raphaelid):null},b.getElementsByBBox=function(t){var o=this.set();return this.forEach(function(n){e.isBBoxIntersect(n.getBBox(),t)&&o.push(n)}),o},b.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},b.forEach=function(t,e){for(var o=this.bottom;o;){if(!1===t.call(e,o))return this;o=o.next}return this},b.getElementsByPoint=function(t,e){var o=this.set();return this.forEach(function(n){n.isPointInside(t,e)&&o.push(n)}),o},Yt.isPointInside=function(t,o){var n=this.realPath=dt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(n=e.transformPath(n,this.attr("transform"))),e.isPointInsidePath(n,t,o)},Yt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=dt[this.type](this),e.bboxwt=Ct(this.realPath),e.bboxwt.toString=d,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=dt[this.type](this)),e.bbox=Ct(ft(this.realPath,this.matrix)),e.bbox.toString=d,e.dirty=e.dirtyT=0),e.bbox)},Yt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Yt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:null==t.opacity?.5:t.opacity,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},o=e.width/2,n=this.paper,r=n.set(),i=this.realPath||dt[this.type](this);i=this.matrix?ft(i,this.matrix):i;for(var s=1;s<o+1;s++)r.push(n.path(i).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/o*s).toFixed(3),opacity:+(e.opacity/o).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var Zt=function(t,o,n,r,i,s,a,u,g){return null==g?l(t,o,n,r,i,s,a,u):e.findDotsAtSegment(t,o,n,r,i,s,a,u,c(t,o,n,r,i,s,a,u,g))},te=function(t,o){return function(n,r,i){n=Dt(n);for(var s,a,l,c,u,g="",h={},p=0,d=0,f=n.length;d<f;d++){if(l=n[d],"M"==l[0])s=+l[1],a=+l[2];else{if(c=Zt(s,a,l[1],l[2],l[3],l[4],l[5],l[6]),p+c>r){if(o&&!h.start){if(u=Zt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p),g+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],i)return g;h.start=g,g=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),p+=c,s=+l[5],a=+l[6];continue}if(!t&&!o)return u=Zt(s,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p),{x:u.x,y:u.y,alpha:u.alpha}}p+=c,s=+l[5],a=+l[6]}g+=l.shift()+l}return h.end=g,u=t?p:o?h:e.findDotsAtSegment(s,a,l[0],l[1],l[2],l[3],l[4],l[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},ee=te(1),oe=te(),ne=te(0,1);e.getTotalLength=ee,e.getPointAtLength=oe,e.getSubpath=function(t,e,o){if(this.getTotalLength(t)-o<1e-6)return ne(t,e).end;var n=ne(t,o,1);return e?ne(n,e).end:n},Yt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ee(t)},Yt.getPointAtLength=function(t){var e=this.getPath();if(e)return oe(e,t)},Yt.getPath=function(){var t,o=e._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return o&&(t=o(this)),t},Yt.getSubpath=function(t,o){var n=this.getPath();if(n)return e.getSubpath(n,t,o)};var re=e.easing_formulas={linear:function(t){return t},"<":function(t){return G(t,1.7)},">":function(t){return G(t,.48)},"<>":function(t){var e=.48-t/1.04,o=P.sqrt(.1734+e*e),n=o-e,r=G(U(n),1/3)*(n<0?-1:1),i=-o-e,s=G(U(i),1/3)*(i<0?-1:1),a=r+s+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:G(2,-10*t)*P.sin(2*V*(t-.075)/.3)+1},bounce:function(t){var e,o=7.5625,n=2.75;return t<1/n?e=o*t*t:t<2/n?(t-=1.5/n,e=o*t*t+.75):t<2.5/n?(t-=2.25/n,e=o*t*t+.9375):(t-=2.625/n,e=o*t*t+.984375),e}};re.easeIn=re["ease-in"]=re["<"],re.easeOut=re["ease-out"]=re[">"],re.easeInOut=re["ease-in-out"]=re["<>"],re["back-in"]=re.backIn,re["back-out"]=re.backOut;var ie=[],se=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},ae=function(){for(var o=+new Date,n=0;n<ie.length;n++){var r=ie[n];if(!r.el.removed&&!r.paused){var i,s,a=o-r.start,l=r.ms,c=r.easing,u=r.from,g=r.diff,h=r.to,p=(r.t,r.el),d={},f={};if(r.initstatus?(a=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*l,r.status=r.initstatus,delete r.initstatus,r.stop&&ie.splice(n--,1)):r.status=(r.prev+(r.percent-r.prev)*(a/l))/r.anim.top,!(a<0))if(a<l){var m=c(a/l);for(var v in u)if(u[T](v)){switch(ot[v]){case W:i=+u[v]+m*l*g[v];break;case"colour":i="rgb("+[le(Q(u[v].r+m*l*g[v].r)),le(Q(u[v].g+m*l*g[v].g)),le(Q(u[v].b+m*l*g[v].b))].join(",")+")";break;case"path":i=[];for(var _=0,b=u[v].length;_<b;_++){i[_]=[u[v][_][0]];for(var E=1,S=u[v][_].length;E<S;E++)i[_][E]=+u[v][_][E]+m*l*g[v][_][E];i[_]=i[_].join(L)}i=i.join(L);break;case"transform":if(g[v].real)for(i=[],_=0,b=u[v].length;_<b;_++)for(i[_]=[u[v][_][0]],E=1,S=u[v][_].length;E<S;E++)i[_][E]=u[v][_][E]+m*l*g[v][_][E];else{var k=function(t){return+u[v][t]+m*l*g[v][t]};i=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==v)for(i=[],_=4;_--;)i[_]=+u[v][_]+m*l*g[v][_];break;default:var C=[][I](u[v]);for(i=[],_=p.paper.customAttributes[v].length;_--;)i[_]=+C[_]+m*l*g[v][_]}d[v]=i}p.attr(d),function(e,o,n){setTimeout(function(){t("raphael.anim.frame."+e,o,n)})}(p.id,p,r.anim)}else{if(function(o,n,r){setTimeout(function(){t("raphael.anim.frame."+n.id,n,r),t("raphael.anim.finish."+n.id,n,r),e.is(o,"function")&&o.call(n)})}(r.callback,p,r.anim),p.attr(h),ie.splice(n--,1),r.repeat>1&&!r.next){for(s in h)h[T](s)&&(f[s]=r.totalOrigin[s]);r.el.attr(f),y(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&y(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat)}}}ie.length&&se(ae)},le=function(t){return t>255?255:t<0?0:t};Yt.animateWith=function(t,o,n,r,i,s){var a=this;if(a.removed)return s&&s.call(a),a;var l=n instanceof m?n:e.animation(n,r,i,s);y(l,a,l.percents[0],null,a.attr());for(var c=0,u=ie.length;c<u;c++)if(ie[c].anim==o&&ie[c].el==t){ie[u-1].start=ie[c].start;break}return a},Yt.onAnimation=function(e){return e?t.on("raphael.anim.frame."+this.id,e):t.unbind("raphael.anim.frame."+this.id),this},m.prototype.delay=function(t){var e=new m(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},m.prototype.repeat=function(t){var e=new m(this.anim,this.ms);return e.del=this.del,e.times=P.floor(F(t,0))||1,e},e.animation=function(t,o,n,r){if(t instanceof m)return t;!e.is(n,"function")&&n||(r=r||n||null,n=null),t=Object(t),o=+o||0;var i,s,a={};for(s in t)t[T](s)&&J(s)!=s&&J(s)+"%"!=s&&(i=!0,a[s]=t[s]);if(i)return n&&(a.easing=n),r&&(a.callback=r),new m({100:a},o);if(r){var l=0;for(var c in t){var u=Z(c);t[T](c)&&u>l&&(l=u)}l+="%",!t[l].callback&&(t[l].callback=r)}return new m(t,o)},Yt.animate=function(t,o,n,r){var i=this;if(i.removed)return r&&r.call(i),i;var s=t instanceof m?t:e.animation(t,o,n,r);return y(s,i,s.percents[0],null,i.attr()),i},Yt.setTime=function(t,e){return t&&null!=e&&this.status(t,H(e,t.ms)/t.ms),this},Yt.status=function(t,e){var o,n,r=[],i=0;if(null!=e)return y(t,this,-1,H(e,1)),this;for(o=ie.length;i<o;i++)if(n=ie[i],n.el.id==this.id&&(!t||n.anim==t)){if(t)return n.status;r.push({anim:n.anim,status:n.status})}return t?0:r},Yt.pause=function(e){for(var o=0;o<ie.length;o++)ie[o].el.id!=this.id||e&&ie[o].anim!=e||!1!==t("raphael.anim.pause."+this.id,this,ie[o].anim)&&(ie[o].paused=!0);return this},Yt.resume=function(e){for(var o=0;o<ie.length;o++)if(ie[o].el.id==this.id&&(!e||ie[o].anim==e)){var n=ie[o];!1!==t("raphael.anim.resume."+this.id,this,n.anim)&&(delete n.paused,this.status(n.anim,n.status))}return this},Yt.stop=function(e){for(var o=0;o<ie.length;o++)ie[o].el.id!=this.id||e&&ie[o].anim!=e||!1!==t("raphael.anim.stop."+this.id,this,ie[o].anim)&&ie.splice(o--,1);return this},t.on("raphael.remove",v),t.on("raphael.clear",v),Yt.toString=function(){return"Raphaël’s object"};var ce=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,o=t.length;e<o;e++)!t[e]||t[e].constructor!=Yt.constructor&&t[e].constructor!=ce||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},ue=ce.prototype;ue.push=function(){for(var t,e,o=0,n=arguments.length;o<n;o++)!(t=arguments[o])||t.constructor!=Yt.constructor&&t.constructor!=ce||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},ue.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ue.forEach=function(t,e){for(var o=0,n=this.items.length;o<n;o++)if(!1===t.call(e,this.items[o],o))return this;return this};for(var ge in Yt)Yt[T](ge)&&(ue[ge]=function(t){return function(){var e=arguments;return this.forEach(function(o){o[t][B](o,e)})}}(ge));return ue.attr=function(t,o){if(t&&e.is(t,q)&&e.is(t[0],"object"))for(var n=0,r=t.length;n<r;n++)this.items[n].attr(t[n]);else for(var i=0,s=this.items.length;i<s;i++)this.items[i].attr(t,o);return this},ue.clear=function(){for(;this.length;)this.pop()},ue.splice=function(t,e,o){t=t<0?F(this.length+t,0):t,e=F(0,H(this.length-t,e));var n,r=[],i=[],s=[];for(n=2;n<arguments.length;n++)s.push(arguments[n]);for(n=0;n<e;n++)i.push(this[t+n]);for(;n<this.length-t;n++)r.push(this[t+n]);var a=s.length;for(n=0;n<a+r.length;n++)this.items[t+n]=this[t+n]=n<a?s[n]:r[n-a];for(n=this.items.length=this.length-=e-a;this[n];)delete this[n++];return new ce(i)},ue.exclude=function(t){for(var e=0,o=this.length;e<o;e++)if(this[e]==t)return this.splice(e,1),!0},ue.animate=function(t,o,n,r){(e.is(n,"function")||!n)&&(r=n||null);var i,s,a=this.items.length,l=a,c=this;if(!a)return this;r&&(s=function(){!--a&&r.call(c)}),n=e.is(n,z)?n:s;var u=e.animation(t,o,n,s);for(i=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(i,u,u),this.items[l]&&!this.items[l].removed||a--;return this},ue.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},ue.getBBox=function(){for(var t=[],e=[],o=[],n=[],r=this.items.length;r--;)if(!this.items[r].removed){var i=this.items[r].getBBox();t.push(i.x),e.push(i.y),o.push(i.x+i.width),n.push(i.y+i.height)}return t=H[B](0,t),e=H[B](0,e),o=F[B](0,o),n=F[B](0,n),{x:t,y:e,x2:o,y2:n,width:o-t,height:n-e}},ue.clone=function(t){t=this.paper.set();for(var e=0,o=this.items.length;e<o;e++)t.push(this.items[e].clone());return t},ue.toString=function(){return"Raphaël‘s set"},ue.glow=function(t){var e=this.paper.set();return this.forEach(function(o,n){var r=o.glow(t);null!=r&&r.forEach(function(t,o){e.push(t)})}),e},ue.isPointInside=function(t,e){var o=!1;return this.forEach(function(n){if(n.isPointInside(t,e))return o=!0,!1}),o},e.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},o=t.face["font-family"];for(var n in t.face)t.face[T](n)&&(e.face[n]=t.face[n]);if(this.fonts[o]?this.fonts[o].push(e):this.fonts[o]=[e],!t.svg){e.face["units-per-em"]=Z(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[T](r)){var i=t.glyphs[r];if(e.glyphs[r]={w:i.w,k:{},d:i.d&&"M"+i.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},i.k)for(var s in i.k)i[T](s)&&(e.glyphs[r].k[s]=i.k[s])}}return t},b.getFont=function(t,o,n,r){if(r=r||"normal",n=n||"normal",o=+o||{normal:400,bold:700,lighter:300,bolder:800}[o]||400,e.fonts){var i=e.fonts[t];if(!i){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,N)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[T](a)&&s.test(a)){i=e.fonts[a];break}}var l;if(i)for(var c=0,u=i.length;c<u&&(l=i[c],l.face["font-weight"]!=o||l.face["font-style"]!=n&&l.face["font-style"]||l.face["font-stretch"]!=r);c++);return l}},b.print=function(t,o,n,r,i,s,a,l){s=s||"middle",a=F(H(a||0,1),-1),l=F(H(l||1,3),1);var c,u=R(n)[D](N),g=0,h=0,p=N;if(e.is(r,"string")&&(r=this.getFont(r)),r){c=(i||16)/r.face["units-per-em"];for(var d=r.face.bbox[D](E),f=+d[0],m=d[3]-d[1],y=0,v=+d[1]+("baseline"==s?m+ +r.face.descent:m/2),_=0,b=u.length;_<b;_++){if("\n"==u[_])g=0,k=0,h=0,y+=m*l;else{var S=h&&r.glyphs[u[_-1]]||{},k=r.glyphs[u[_]];g+=h?(S.w||r.w)+(S.k&&S.k[u[_]]||0)+r.w*a:0,h=1}k&&k.d&&(p+=e.transformPath(k.d,["t",g*c,y*c,"s",c,c,f,v,"t",(t-f)/c,(o-v)/c]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},b.add=function(t){if(e.is(t,"array"))for(var o,n=this.set(),r=0,i=t.length;r<i;r++)o=t[r]||{},S[T](o.type)&&n.push(this[o.type]().attr(o));return n},e.format=function(t,o){var n=e.is(o,q)?[0][I](o):arguments;return t&&e.is(t,z)&&n.length-1&&(t=t.replace(k,function(t,e){return null==n[++e]?N:n[e]})),t||N},e.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,o=function(t,o,n){var r=n;return o.replace(e,function(t,e,o,n,i){e=e||n,r&&(e in r&&(r=r[e]),"function"==typeof r&&i&&(r=r()))}),r=(null==r||r==n?t:r)+""};return function(e,n){return String(e).replace(t,function(t,e){return o(t,e,n)})}}(),e.ninja=function(){if(x.was)C.win.Raphael=x.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(t){}}return e},e.st=ue,t.on("raphael.DOMload",function(){_=!0}),function(t,o,n){function r(){/in/.test(t.readyState)?setTimeout(r,9):e.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(o,n=function(){t.removeEventListener(o,n,!1),t.readyState="complete"},!1),t.readyState="loading"),r()}(document,"DOMContentLoaded"),e}.apply(e,n))&&(t.exports=r)},function(t,e,o){var n,r;!function(o){var i,s,a="0.5.0",l="hasOwnProperty",c=/[\.\/]/,u=/\s*,\s*/,g=function(t,e){return t-e},h={n:{}},p=function(){for(var t=0,e=this.length;t<e;t++)if(void 0!==this[t])return this[t]},d=function(){for(var t=this.length;--t;)if(void 0!==this[t])return this[t]},f=Object.prototype.toString,m=String,y=Array.isArray||function(t){return t instanceof Array||"[object Array]"==f.call(t)};eve=function(t,e){var o,n=s,r=Array.prototype.slice.call(arguments,2),a=eve.listeners(t),l=0,c=[],u={},h=[],f=i;h.firstDefined=p,h.lastDefined=d,i=t,s=0;for(var m=0,y=a.length;m<y;m++)"zIndex"in a[m]&&(c.push(a[m].zIndex),a[m].zIndex<0&&(u[a[m].zIndex]=a[m]));for(c.sort(g);c[l]<0;)if(o=u[c[l++]],h.push(o.apply(e,r)),s)return s=n,h;for(m=0;m<y;m++)if("zIndex"in(o=a[m]))if(o.zIndex==c[l]){if(h.push(o.apply(e,r)),s)break;do{if(l++,o=u[c[l]],o&&h.push(o.apply(e,r)),s)break}while(o)}else u[o.zIndex]=o;else if(h.push(o.apply(e,r)),s)break;return s=n,i=f,h},eve._events=h,eve.listeners=function(t){var e,o,n,r,i,s,a,l,u=y(t)?t:t.split(c),g=h,p=[g],d=[];for(r=0,i=u.length;r<i;r++){for(l=[],s=0,a=p.length;s<a;s++)for(g=p[s].n,o=[g[u[r]],g["*"]],n=2;n--;)(e=o[n])&&(l.push(e),d=d.concat(e.f||[]));p=l}return d},eve.separator=function(t){t?(t=m(t).replace(/(?=[\.\^\]\[\-])/g,"\\"),t="["+t+"]",c=new RegExp(t)):c=/[\.\/]/},eve.on=function(t,e){if("function"!=typeof e)return function(){};for(var o=y(t)?y(t[0])?t:[t]:m(t).split(u),n=0,r=o.length;n<r;n++)!function(t){for(var o,n=y(t)?t:m(t).split(c),r=h,i=0,s=n.length;i<s;i++)r=r.n,r=r.hasOwnProperty(n[i])&&r[n[i]]||(r[n[i]]={n:{}});for(r.f=r.f||[],i=0,s=r.f.length;i<s;i++)if(r.f[i]==e){o=!0;break}!o&&r.f.push(e)}(o[n]);return function(t){+t==+t&&(e.zIndex=+t)}},eve.f=function(t){var e=[].slice.call(arguments,1);return function(){eve.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},eve.stop=function(){s=1},eve.nt=function(t){var e=y(i)?i.join("."):i;return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},eve.nts=function(){return y(i)?i:i.split(c)},eve.off=eve.unbind=function(t,e){if(!t)return void(eve._events=h={n:{}});var o=y(t)?y(t[0])?t:[t]:m(t).split(u);if(o.length>1)for(var n=0,r=o.length;n<r;n++)eve.off(o[n],e);else{o=y(t)?t:m(t).split(c);var i,s,a,n,r,g,p,d=[h];for(n=0,r=o.length;n<r;n++)for(g=0;g<d.length;g+=a.length-2){if(a=[g,1],i=d[g].n,"*"!=o[n])i[o[n]]&&a.push(i[o[n]]);else for(s in i)i[l](s)&&a.push(i[s]);d.splice.apply(d,a)}for(n=0,r=d.length;n<r;n++)for(i=d[n];i.n;){if(e){if(i.f){for(g=0,p=i.f.length;g<p;g++)if(i.f[g]==e){i.f.splice(g,1);break}!i.f.length&&delete i.f}for(s in i.n)if(i.n[l](s)&&i.n[s].f){var f=i.n[s].f;for(g=0,p=f.length;g<p;g++)if(f[g]==e){f.splice(g,1);break}!f.length&&delete i.n[s].f}}else{delete i.f;for(s in i.n)i.n[l](s)&&i.n[s].f&&delete i.n[s].f}i=i.n}}},eve.once=function(t,e){var o=function(){return eve.off(t,o),e.apply(this,arguments)};return eve.on(t,o)},eve.version=a,eve.toString=function(){return"You are running Eve "+a},void 0!==t&&t.exports?t.exports=eve:(n=[],void 0!==(r=function(){return eve}.apply(e,n))&&(t.exports=r))}()},function(t,e,o){var n,r;n=[o(1)],void 0!==(r=function(t){if(!t||t.svg){var e="hasOwnProperty",o=String,n=parseFloat,r=parseInt,i=Math,s=i.max,a=i.abs,l=i.pow,c=/[, ]+/,u=t.eve,g="",h=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},f={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(n,r){if(r){"string"==typeof n&&(n=m(n));for(var i in r)r[e](i)&&("xlink:"==i.substring(0,6)?n.setAttributeNS(p,i.substring(6),o(r[i])):n.setAttribute(i,o(r[i])))}else n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},y=function(e,r){var c="linear",u=e.id+r,h=.5,p=.5,d=e.node,f=e.paper,y=d.style,v=t._g.doc.getElementById(u);if(!v){if(r=o(r).replace(t._radial_gradient,function(t,e,o){if(c="radial",e&&o){h=n(e),p=n(o);var r=2*(p>.5)-1;l(h-.5,2)+l(p-.5,2)>.25&&(p=i.sqrt(.25-l(h-.5,2))*r+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*r)}return g}),r=r.split(/\s*\-\s*/),"linear"==c){var b=r.shift();if(b=-n(b),isNaN(b))return null;var E=[0,0,i.cos(t.rad(b)),i.sin(t.rad(b))],S=1/(s(a(E[2]),a(E[3]))||1);E[2]*=S,E[3]*=S,E[2]<0&&(E[0]=-E[2],E[2]=0),E[3]<0&&(E[1]=-E[3],E[3]=0)}var k=t._parseDots(r);if(!k)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&u!=e.gradient.id&&(f.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){v=m(c+"Gradient",{id:u}),e.gradient=v,m(v,"radial"==c?{fx:h,fy:p}:{x1:E[0],y1:E[1],x2:E[2],y2:E[3],gradientTransform:e.matrix.invert()}),f.defs.appendChild(v);for(var T=0,C=k.length;T<C;T++)v.appendChild(m("stop",{offset:k[T].offset?k[T].offset:T?"100%":"0%","stop-color":k[T].color||"#fff","stop-opacity":isFinite(k[T].opacity)?k[T].opacity:1}))}}return m(d,{fill:_(u),opacity:1,"fill-opacity":1}),y.fill=g,y.opacity=1,y.fillOpacity=1,1},v=function(){var t=document.documentMode;return t&&(9===t||10===t)},_=function(t){if(v())return"url('#"+t+"')";var e=document.location;return"url('"+e.protocol+"//"+e.host+e.pathname+e.search+"#"+t+"')"},b=function(t){var e=t.getBBox(1);m(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},E=function(n,r,i){if("path"==n.type){for(var s,a,l,c,u,h=o(r).toLowerCase().split("-"),p=n.paper,y=i?"end":"start",v=n.node,_=n.attrs,b=_["stroke-width"],E=h.length,S="classic",k=3,T=3,C=5;E--;)switch(h[E]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":S=h[E];break;case"wide":T=5;break;case"narrow":T=2;break;case"long":k=5;break;case"short":k=2}if("open"==S?(k+=2,T+=2,C+=2,l=1,c=i?4:1,u={fill:"none",stroke:_.stroke}):(c=l=k/2,u={fill:_.stroke,stroke:"none"}),n._.arrows?i?(n._.arrows.endPath&&f[n._.arrows.endPath]--,n._.arrows.endMarker&&f[n._.arrows.endMarker]--):(n._.arrows.startPath&&f[n._.arrows.startPath]--,n._.arrows.startMarker&&f[n._.arrows.startMarker]--):n._.arrows={},"none"!=S){var x="raphael-marker-"+S,w="raphael-marker-"+y+S+k+T+"-obj"+n.id;t._g.doc.getElementById(x)?f[x]++:(p.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:d[S],id:x})),f[x]=1);var B,I=t._g.doc.getElementById(w);I?(f[w]++,B=I.getElementsByTagName("use")[0]):(I=m(m("marker"),{id:w,markerHeight:T,markerWidth:k,orient:"auto",refX:c,refY:T/2}),B=m(m("use"),{"xlink:href":"#"+x,transform:(i?"rotate(180 "+k/2+" "+T/2+") ":g)+"scale("+k/C+","+T/C+")","stroke-width":(1/((k/C+T/C)/2)).toFixed(4)}),I.appendChild(B),p.defs.appendChild(I),f[w]=1),m(B,u);var A=l*("diamond"!=S&&"oval"!=S);i?(s=n._.arrows.startdx*b||0,a=t.getTotalLength(_.path)-A*b):(s=A*b,a=t.getTotalLength(_.path)-(n._.arrows.enddx*b||0)),u={},u["marker-"+y]="url(#"+w+")",(a||s)&&(u.d=t.getSubpath(_.path,s,a)),m(v,u),n._.arrows[y+"Path"]=x,n._.arrows[y+"Marker"]=w,n._.arrows[y+"dx"]=A,n._.arrows[y+"Type"]=S,n._.arrows[y+"String"]=r}else i?(s=n._.arrows.startdx*b||0,a=t.getTotalLength(_.path)-s):(s=0,a=t.getTotalLength(_.path)-(n._.arrows.enddx*b||0)),n._.arrows[y+"Path"]&&m(v,{d:t.getSubpath(_.path,s,a)}),delete n._.arrows[y+"Path"],delete n._.arrows[y+"Marker"],delete n._.arrows[y+"dx"],delete n._.arrows[y+"Type"],delete n._.arrows[y+"String"];for(u in f)if(f[e](u)&&!f[u]){var N=t._g.doc.getElementById(u);N&&N.parentNode.removeChild(N)}}},S={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},k=function(t,e,n){if(e=S[o(e).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",i={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,s=[],a=e.length;a--;)s[a]=e[a]*r+(a%2?1:-1)*i;m(t.node,{"stroke-dasharray":s.join(",")})}else m(t.node,{"stroke-dasharray":"none"})},T=function(n,i){var l=n.node,u=n.attrs,h=l.style.visibility;l.style.visibility="hidden";for(var d in i)if(i[e](d)){if(!t._availableAttrs[e](d))continue;var f=i[d];switch(u[d]=f,d){case"blur":n.blur(f);break;case"title":var v=l.getElementsByTagName("title");if(v.length&&(v=v[0]))v.firstChild.nodeValue=f;else{v=m("title");var _=t._g.doc.createTextNode(f);v.appendChild(_),l.appendChild(v)}break;case"href":case"target":var S=l.parentNode;if("a"!=S.tagName.toLowerCase()){var T=m("a");S.insertBefore(T,l),T.appendChild(l),S=T}"target"==d?S.setAttributeNS(p,"show","blank"==f?"new":f):S.setAttributeNS(p,d,f);break;case"cursor":l.style.cursor=f;break;case"transform":n.transform(f);break;case"arrow-start":E(n,f);break;case"arrow-end":E(n,f,1);break;case"clip-rect":var x=o(f).split(c);if(4==x.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var w=m("clipPath"),B=m("rect");w.id=t.createUUID(),m(B,{x:x[0],y:x[1],width:x[2],height:x[3]}),w.appendChild(B),n.paper.defs.appendChild(w),m(l,{"clip-path":"url(#"+w.id+")"}),n.clip=B}if(!f){var I=l.getAttribute("clip-path");if(I){var A=t._g.doc.getElementById(I.replace(/(^url\(#|\)$)/g,g));A&&A.parentNode.removeChild(A),m(l,{"clip-path":g}),delete n.clip}}break;case"path":"path"==n.type&&(m(l,{d:f?u.path=t._pathToAbsolute(f):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&E(n,n._.arrows.startString),"endString"in n._.arrows&&E(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(d,f),n._.dirty=1,!u.fx)break;d="x",f=u.x;case"x":u.fx&&(f=-u.x-(u.width||0));case"rx":if("rx"==d&&"rect"==n.type)break;case"cx":l.setAttribute(d,f),n.pattern&&b(n),n._.dirty=1;break;case"height":if(l.setAttribute(d,f),n._.dirty=1,!u.fy)break;d="y",f=u.y;case"y":u.fy&&(f=-u.y-(u.height||0));case"ry":if("ry"==d&&"rect"==n.type)break;case"cy":l.setAttribute(d,f),n.pattern&&b(n),n._.dirty=1;break;case"r":"rect"==n.type?m(l,{rx:f,ry:f}):l.setAttribute(d,f),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(p,"href",f);break;case"stroke-width":1==n._.sx&&1==n._.sy||(f/=s(a(n._.sx),a(n._.sy))||1),l.setAttribute(d,f),u["stroke-dasharray"]&&k(n,u["stroke-dasharray"],i),n._.arrows&&("startString"in n._.arrows&&E(n,n._.arrows.startString),"endString"in n._.arrows&&E(n,n._.arrows.endString,1));break;case"stroke-dasharray":k(n,f,i);break;case"fill":var N=o(f).match(t._ISURL);if(N){w=m("pattern");var L=m("image");w.id=t.createUUID(),m(w,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(L,{x:0,y:0,"xlink:href":N[1]}),w.appendChild(L),function(e){t._preload(N[1],function(){var t=this.offsetWidth,o=this.offsetHeight;m(e,{width:t,height:o}),m(L,{width:t,height:o})})}(w),n.paper.defs.appendChild(w),m(l,{fill:"url(#"+w.id+")"}),n.pattern=w,n.pattern&&b(n);break}var R=t.getRGB(f);if(R.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=o(f).charAt())&&y(n,f)){if("opacity"in u||"fill-opacity"in u){var D=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,g));if(D){var O=D.getElementsByTagName("stop");m(O[O.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=f,u.fill="none";break}}else delete i.gradient,delete u.gradient,!t.is(u.opacity,"undefined")&&t.is(i.opacity,"undefined")&&m(l,{opacity:u.opacity}),!t.is(u["fill-opacity"],"undefined")&&t.is(i["fill-opacity"],"undefined")&&m(l,{"fill-opacity":u["fill-opacity"]});R[e]("opacity")&&m(l,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=t.getRGB(f),l.setAttribute(d,R.hex),"stroke"==d&&R[e]("opacity")&&m(l,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity}),"stroke"==d&&n._.arrows&&("startString"in n._.arrows&&E(n,n._.arrows.startString),"endString"in n._.arrows&&E(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=o(f).charAt())&&y(n,f);break;case"opacity":u.gradient&&!u[e]("stroke-opacity")&&m(l,{"stroke-opacity":f>1?f/100:f});case"fill-opacity":if(u.gradient){(D=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,g)))&&(O=D.getElementsByTagName("stop"),m(O[O.length-1],{"stop-opacity":f}));break}default:"font-size"==d&&(f=r(f,10)+"px");var j=d.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[j]=f,n._.dirty=1,l.setAttribute(d,f)}}C(n,i),l.style.visibility=h},C=function(n,i){if("text"==n.type&&(i[e]("text")||i[e]("font")||i[e]("font-size")||i[e]("x")||i[e]("y"))){var s=n.attrs,a=n.node,l=a.firstChild?r(t._g.doc.defaultView.getComputedStyle(a.firstChild,g).getPropertyValue("font-size"),10):10;if(i[e]("text")){for(s.text=i.text;a.firstChild;)a.removeChild(a.firstChild);for(var c,u=o(i.text).split("\n"),h=[],p=0,d=u.length;p<d;p++)c=m("tspan"),p&&m(c,{dy:1.2*l,x:s.x}),c.appendChild(t._g.doc.createTextNode(u[p])),a.appendChild(c),h[p]=c}else for(h=a.getElementsByTagName("tspan"),p=0,d=h.length;p<d;p++)p?m(h[p],{dy:1.2*l,x:s.x}):m(h[0],{dy:0});m(a,{x:s.x,y:s.y}),n._.dirty=1;var f=n._getBBox(),y=s.y-(f.y+f.height/2);y&&t.is(y,"finite")&&m(h[0],{dy:y})}},x=function(t){return t.parentNode&&"a"===t.parentNode.tagName.toLowerCase()?t.parentNode:t},w=function(e,o){this[0]=this.node=e,e.raphael=!0,this.id=function(){return("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5)}(),e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=o,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!o.bottom&&(o.bottom=this),this.prev=o.top,o.top&&(o.top.next=this),o.top=this,this.next=null},B=t.el;w.prototype=B,B.constructor=w,t._engine.path=function(t,e){var o=m("path");e.canvas&&e.canvas.appendChild(o);var n=new w(o,e);return n.type="path",T(n,{fill:"none",stroke:"#000",path:t}),n},B.rotate=function(t,e,r){if(this.removed)return this;if(t=o(t).split(c),t.length-1&&(e=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(e=r),null==e||null==r){var i=this.getBBox(1);e=i.x+i.width/2,r=i.y+i.height/2}return this.transform(this._.transform.concat([["r",t,e,r]])),this},B.scale=function(t,e,r,i){if(this.removed)return this;if(t=o(t).split(c),t.length-1&&(e=n(t[1]),r=n(t[2]),i=n(t[3])),t=n(t[0]),null==e&&(e=t),null==i&&(r=i),null==r||null==i)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,i=null==i?s.y+s.height/2:i,this.transform(this._.transform.concat([["s",t,e,r,i]])),this},B.translate=function(t,e){return this.removed?this:(t=o(t).split(c),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},B.transform=function(o){var n=this._;if(null==o)return n.transform;if(t._extractTransform(this,o),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&m(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var r=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},B.hide=function(){return this.removed||(this.node.style.display="none"),this},B.show=function(){return this.removed||(this.node.style.display=""),this},B.remove=function(){var e=x(this.node);if(!this.removed&&e.parentNode){var o=this.paper;o.__set__&&o.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&o.defs.removeChild(this.gradient),t._tear(this,o),e.parentNode.removeChild(e),this.removeData();for(var n in this)this[n]="function"==typeof this[n]?t._removedFactory(n):null;this.removed=!0}},B._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e,o=!1;this.paper.canvas.parentElement?e=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(e=this.paper.canvas.parentNode.style),e&&"none"==e.display&&(o=!0,e.display="");var n={};try{n=this.node.getBBox()}catch(t){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{n=n||{},o&&(e.display="none")}return t&&this.hide(),n},B.attr=function(o,n){if(this.removed)return this;if(null==o){var r={};for(var i in this.attrs)this.attrs[e](i)&&(r[i]=this.attrs[i]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&t.is(o,"string")){if("fill"==o&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==o)return this._.transform;for(var s=o.split(c),a={},l=0,g=s.length;l<g;l++)o=s[l],o in this.attrs?a[o]=this.attrs[o]:t.is(this.paper.customAttributes[o],"function")?a[o]=this.paper.customAttributes[o].def:a[o]=t._availableAttrs[o];return g-1?a:a[s[0]]}if(null==n&&t.is(o,"array")){for(a={},l=0,g=o.length;l<g;l++)a[o[l]]=this.attr(o[l]);return a}if(null!=n){var h={};h[o]=n}else null!=o&&t.is(o,"object")&&(h=o);for(var p in h)u("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&h[e](p)&&t.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var f in d)d[e](f)&&(h[f]=d[f])}return T(this,h),this},B.toFront=function(){if(this.removed)return this;var e=x(this.node);e.parentNode.appendChild(e);var o=this.paper;return o.top!=this&&t._tofront(this,o),this},B.toBack=function(){if(this.removed)return this;var e=x(this.node),o=e.parentNode;o.insertBefore(e,o.firstChild),t._toback(this,this.paper);this.paper;return this},B.insertAfter=function(e){if(this.removed||!e)return this;var o=x(this.node),n=x(e.node||e[e.length-1].node);return n.nextSibling?n.parentNode.insertBefore(o,n.nextSibling):n.parentNode.appendChild(o),t._insertafter(this,e,this.paper),this},B.insertBefore=function(e){if(this.removed||!e)return this;var o=x(this.node),n=x(e.node||e[0].node);return n.parentNode.insertBefore(o,n),t._insertbefore(this,e,this.paper),this},B.blur=function(e){var o=this;if(0!=+e){var n=m("filter"),r=m("feGaussianBlur");o.attrs.blur=e,n.id=t.createUUID(),m(r,{stdDeviation:+e||1.5}),n.appendChild(r),o.paper.defs.appendChild(n),o._blur=n,m(o.node,{filter:"url(#"+n.id+")"})}else o._blur&&(o._blur.parentNode.removeChild(o._blur),delete o._blur,delete o.attrs.blur),o.node.removeAttribute("filter");return o},t._engine.circle=function(t,e,o,n){var r=m("circle");t.canvas&&t.canvas.appendChild(r);var i=new w(r,t);return i.attrs={cx:e,cy:o,r:n,fill:"none",stroke:"#000"},i.type="circle",m(r,i.attrs),i},t._engine.rect=function(t,e,o,n,r,i){var s=m("rect");t.canvas&&t.canvas.appendChild(s);var a=new w(s,t);return a.attrs={x:e,y:o,width:n,height:r,rx:i||0,ry:i||0,fill:"none",stroke:"#000"},a.type="rect",m(s,a.attrs),a},t._engine.ellipse=function(t,e,o,n,r){var i=m("ellipse");t.canvas&&t.canvas.appendChild(i);var s=new w(i,t);return s.attrs={cx:e,cy:o,rx:n,ry:r,fill:"none",stroke:"#000"},s.type="ellipse",m(i,s.attrs),s},t._engine.image=function(t,e,o,n,r,i){var s=m("image");m(s,{x:o,y:n,width:r,height:i,preserveAspectRatio:"none"}),s.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(s);var a=new w(s,t);return a.attrs={x:o,y:n,width:r,height:i,src:e},a.type="image",a},t._engine.text=function(e,o,n,r){var i=m("text");e.canvas&&e.canvas.appendChild(i);var s=new w(i,e);return s.attrs={x:o,y:n,"text-anchor":"middle",text:r,"font-family":t._availableAttrs["font-family"],"font-size":t._availableAttrs["font-size"],stroke:"none",fill:"#000"},s.type="text",T(s,s.attrs),s},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),o=e&&e.container,n=e.x,r=e.y,i=e.width,s=e.height;if(!o)throw new Error("SVG container not found.");var a,l=m("svg"),c="overflow:hidden;";return n=n||0,r=r||0,i=i||512,s=s||342,m(l,{height:s,version:1.1,width:i,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==o?(l.style.cssText=c+"position:absolute;left:"+n+"px;top:"+r+"px",t._g.doc.body.appendChild(l),a=1):(l.style.cssText=c+"position:relative",o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l)),o=new t._Paper,o.width=i,o.height=s,o.canvas=l,o.clear(),o._left=o._top=0,a&&(o.renderfix=function(){}),o.renderfix(),o},t._engine.setViewBox=function(t,e,o,n,r){u("raphael.setViewBox",this,this._viewBox,[t,e,o,n,r]);var i,a,l=this.getSize(),c=s(o/l.width,n/l.height),g=this.top,p=r?"xMidYMid meet":"xMinYMin";for(null==t?(this._vbSize&&(c=1),delete this._vbSize,i="0 0 "+this.width+h+this.height):(this._vbSize=c,i=t+h+e+h+o+h+n),m(this.canvas,{viewBox:i,preserveAspectRatio:p});c&&g;)a="stroke-width"in g.attrs?g.attrs["stroke-width"]:1,g.attr({"stroke-width":a}),g._.dirty=1,g._.dirtyT=1,g=g.prev;return this._viewBox=[t,e,o,n,!!r],this},t.prototype.renderfix=function(){var t,e=this.canvas,o=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(o){t=e.createSVGMatrix()}var n=-t.e%1,r=-t.f%1;(n||r)&&(n&&(this._left=(this._left+n)%1,o.left=this._left+"px"),r&&(this._top=(this._top+r)%1,o.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(t._g.doc.createTextNode("Created with Raphaël "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=m("defs"))},t.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var I=t.st;for(var A in B)B[e](A)&&!I[e](A)&&(I[A]=function(t){return function(){var e=arguments;return this.forEach(function(o){o[t].apply(o,e)})}}(A))}}.apply(e,n))&&(t.exports=r)},function(t,e,o){var n,r;n=[o(1)],void 0!==(r=function(t){if(!t||t.vml){var e="hasOwnProperty",o=String,n=parseFloat,r=Math,i=r.round,s=r.max,a=r.min,l=r.abs,c="fill",u=/[, ]+/,g=t.eve,h=" ",p="",d={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},f=/([clmz]),?([^clmz]*)/gi,m=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,v="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",_=21600,b={path:1,rect:1,image:1},E={circle:1,ellipse:1},S=function(e){var n=/[ahqstv]/gi,r=t._pathToAbsolute;if(o(e).match(n)&&(r=t._path2curve),n=/[clmz]/g,r==t._pathToAbsolute&&!o(e).match(n)){var s=o(e).replace(f,function(t,e,o){var n=[],r="m"==e.toLowerCase(),s=d[e];return o.replace(y,function(t){r&&2==n.length&&(s+=n+d["m"==e?"l":"L"],n=[]),n.push(i(t*_))}),s+n});return s}var a,l,c=r(e);s=[];for(var u=0,g=c.length;u<g;u++){a=c[u],"z"==(l=c[u][0].toLowerCase())&&(l="x");for(var m=1,v=a.length;m<v;m++)l+=i(a[m]*_)+(m!=v-1?",":p);s.push(l)}return s.join(h)},k=function(e,o,n){var r=t.matrix();return r.rotate(-e,.5,.5),{dx:r.x(o,n),dy:r.y(o,n)}},T=function(t,e,o,n,r,i){var s=t._,a=t.matrix,u=s.fillpos,g=t.node,p=g.style,d=1,f="",m=_/e,y=_/o;if(p.visibility="hidden",e&&o){if(g.coordsize=l(m)+h+l(y),p.rotation=i*(e*o<0?-1:1),i){var v=k(i,n,r);n=v.dx,r=v.dy}if(e<0&&(f+="x"),o<0&&(f+=" y")&&(d=-1),p.flip=f,g.coordorigin=n*-m+h+r*-y,u||s.fillsize){var b=g.getElementsByTagName(c);b=b&&b[0],g.removeChild(b),u&&(v=k(i,a.x(u[0],u[1]),a.y(u[0],u[1])),b.position=v.dx*d+h+v.dy*d),s.fillsize&&(b.size=s.fillsize[0]*l(e)+h+s.fillsize[1]*l(o)),g.appendChild(b)}p.visibility="visible"}};t.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var C=function(t,e,n){for(var r=o(e).toLowerCase().split("-"),i=n?"end":"start",s=r.length,a="classic",l="medium",c="medium";s--;)switch(r[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=r[s];break;case"wide":case"narrow":c=r[s];break;case"long":case"short":l=r[s]}var u=t.node.getElementsByTagName("stroke")[0];u[i+"arrow"]=a,u[i+"arrowlength"]=l,u[i+"arrowwidth"]=c},x=function(r,l){r.attrs=r.attrs||{};var g=r.node,d=r.attrs,f=g.style,m=b[r.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),y=E[r.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),v=r;for(var k in l)l[e](k)&&(d[k]=l[k]);if(m&&(d.path=t._getPath[r.type](r),r._.dirty=1),l.href&&(g.href=l.href),l.title&&(g.title=l.title),l.target&&(g.target=l.target),l.cursor&&(f.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||m)&&(g.path=S(~o(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),r._.dirty=1,"image"==r.type&&(r._.fillpos=[d.x,d.y],r._.fillsize=[d.width,d.height],T(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),y){var x=+d.cx,B=+d.cy,I=+d.rx||+d.r||0,N=+d.ry||+d.r||0;g.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",i((x-I)*_),i((B-N)*_),i((x+I)*_),i((B+N)*_),i(x*_)),r._.dirty=1}if("clip-rect"in l){var L=o(l["clip-rect"]).split(u);if(4==L.length){L[2]=+L[2]+ +L[0],L[3]=+L[3]+ +L[1];var R=g.clipRect||t._g.doc.createElement("div"),D=R.style;D.clip=t.format("rect({1}px {2}px {3}px {0}px)",L),g.clipRect||(D.position="absolute",D.top=0,D.left=0,D.width=r.paper.width+"px",D.height=r.paper.height+"px",g.parentNode.insertBefore(R,g),R.appendChild(g),g.clipRect=R)}l["clip-rect"]||g.clipRect&&(g.clipRect.style.clip="auto")}if(r.textpath){var O=r.textpath.style;l.font&&(O.font=l.font),l["font-family"]&&(O.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(O.fontSize=l["font-size"]),l["font-weight"]&&(O.fontWeight=l["font-weight"]),l["font-style"]&&(O.fontStyle=l["font-style"])}if("arrow-start"in l&&C(v,l["arrow-start"]),"arrow-end"in l&&C(v,l["arrow-end"],1),null!=l.opacity||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var j=g.getElementsByTagName(c);if(j=j&&j[0],!j&&(j=A(c)),"image"==r.type&&l.src&&(j.src=l.src),l.fill&&(j.on=!0),null!=j.on&&"none"!=l.fill&&null!==l.fill||(j.on=!1),j.on&&l.fill){var M=o(l.fill).match(t._ISURL);if(M){j.parentNode==g&&g.removeChild(j),j.rotate=!0,j.src=M[1],j.type="tile";var P=r.getBBox(1);j.position=P.x+h+P.y,r._.fillpos=[P.x,P.y],t._preload(M[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else j.color=t.getRGB(l.fill).hex,j.src=p,j.type="solid",t.getRGB(l.fill).error&&(v.type in{circle:1,ellipse:1}||"r"!=o(l.fill).charAt())&&w(v,l.fill,j)&&(d.fill="none",d.gradient=l.fill,j.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var F=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);F=a(s(F,0),1),j.opacity=F,j.src&&(j.color="none")}g.appendChild(j);var H=g.getElementsByTagName("stroke")&&g.getElementsByTagName("stroke")[0],U=!1;!H&&(U=H=A("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(H.on=!0),("none"==l.stroke||null===l.stroke||null==H.on||0==l.stroke||0==l["stroke-width"])&&(H.on=!1);var G=t.getRGB(l.stroke);H.on&&l.stroke&&(H.color=G.hex),F=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+G.o+1||2)-1);var V=.75*(n(l["stroke-width"])||1);if(F=a(s(F,0),1),null==l["stroke-width"]&&(V=d["stroke-width"]),l["stroke-width"]&&(H.weight=V),V&&V<1&&(F*=V)&&(H.weight=1),H.opacity=F,l["stroke-linejoin"]&&(H.joinstyle=l["stroke-linejoin"]||"miter"),H.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(H.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};H.dashstyle=W[e](l["stroke-dasharray"])?W[l["stroke-dasharray"]]:p}U&&g.appendChild(H)}if("text"==v.type){v.paper.canvas.style.display=p;var z=v.paper.span,q=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);f=z.style,d.font&&(f.font=d.font),d["font-family"]&&(f.fontFamily=d["font-family"]),d["font-weight"]&&(f.fontWeight=d["font-weight"]),d["font-style"]&&(f.fontStyle=d["font-style"]),q=n(d["font-size"]||q&&q[0])||10,f.fontSize=100*q+"px",v.textpath.string&&(z.innerHTML=o(v.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=z.getBoundingClientRect();v.W=d.w=(X.right-X.left)/100,v.H=d.h=(X.bottom-X.top)/100,v.X=d.x,v.Y=d.y+v.H/2,("x"in l||"y"in l)&&(v.path.v=t.format("m{0},{1}l{2},{1}",i(d.x*_),i(d.y*_),i(d.x*_)+1));for(var K=["x","y","text","font","font-family","font-weight","font-style","font-size"],Y=0,$=K.length;Y<$;Y++)if(K[Y]in l){v._.dirty=1;break}switch(d["text-anchor"]){case"start":v.textpath.style["v-text-align"]="left",v.bbx=v.W/2;break;case"end":v.textpath.style["v-text-align"]="right",v.bbx=-v.W/2;break;default:v.textpath.style["v-text-align"]="center",v.bbx=0}v.textpath.style["v-text-kern"]=!0}},w=function(e,i,s){e.attrs=e.attrs||{};var a=(e.attrs,Math.pow),l="linear",c=".5 .5";if(e.attrs.gradient=i,i=o(i).replace(t._radial_gradient,function(t,e,o){return l="radial",e&&o&&(e=n(e),o=n(o),a(e-.5,2)+a(o-.5,2)>.25&&(o=r.sqrt(.25-a(e-.5,2))*(2*(o>.5)-1)+.5),c=e+h+o),p}),i=i.split(/\s*\-\s*/),"linear"==l){var u=i.shift();if(u=-n(u),isNaN(u))return null}var g=t._parseDots(i);if(!g)return null;if(e=e.shape||e.node,g.length){e.removeChild(s),s.on=!0,s.method="none",s.color=g[0].color,s.color2=g[g.length-1].color;for(var d=[],f=0,m=g.length;f<m;f++)g[f].offset&&d.push(g[f].offset+h+g[f].color);s.colors=d.length?d.join():"0% "+s.color,"radial"==l?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=c,s.angle=0):(s.type="gradient",s.angle=(270-u)%360),e.appendChild(s)}return 1},B=function(e,o){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=o,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!o.bottom&&(o.bottom=this),this.prev=o.top,o.top&&(o.top.next=this),o.top=this,this.next=null},I=t.el;B.prototype=I,I.constructor=B,I.transform=function(e){if(null==e)return this._.transform;var n,r=this.paper._viewBoxShift,i=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:p;r&&(n=e=o(e).replace(/\.{3}|\u2026/g,this._.transform||p)),t._extractTransform(this,i+e);var s,a=this.matrix.clone(),l=this.skew,c=this.node,u=~o(this.attrs.fill).indexOf("-"),g=!o(this.attrs.fill).indexOf("url(");if(a.translate(1,1),g||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",s=a.split(),u&&s.noRotation||!s.isSimple){c.style.filter=a.toFilter();var d=this.getBBox(),f=this.getBBox(1),m=d.x-f.x,y=d.y-f.y;c.coordorigin=m*-_+h+y*-_,T(this,1,1,m,y,0)}else c.style.filter=p,T(this,s.scalex,s.scaley,s.dx,s.dy,s.rotate);else c.style.filter=p,l.matrix=o(a),l.offset=a.offset();return null!==n&&(this._.transform=n,t._extractTransform(this,n)),this},I.rotate=function(t,e,r){if(this.removed)return this;if(null!=t){if(t=o(t).split(u),t.length-1&&(e=n(t[1]),r=n(t[2])),t=n(t[0]),null==r&&(e=r),null==e||null==r){var i=this.getBBox(1);e=i.x+i.width/2,r=i.y+i.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,r]])),this}},I.translate=function(t,e){return this.removed?this:(t=o(t).split(u),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},I.scale=function(t,e,r,i){if(this.removed)return this;if(t=o(t).split(u),t.length-1&&(e=n(t[1]),r=n(t[2]),i=n(t[3]),isNaN(r)&&(r=null),isNaN(i)&&(i=null)),t=n(t[0]),null==e&&(e=t),null==i&&(r=i),null==r||null==i)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,i=null==i?s.y+s.height/2:i,this.transform(this._.transform.concat([["s",t,e,r,i]])),this._.dirtyT=1,this},I.hide=function(){return!this.removed&&(this.node.style.display="none"),this},I.show=function(){return!this.removed&&(this.node.style.display=p),this},I.auxGetBBox=t.el.getBBox,I.getBBox=function(){var t=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var e={},o=1/this.paper._viewBoxShift.scale;return e.x=t.x-this.paper._viewBoxShift.dx,e.x*=o,e.y=t.y-this.paper._viewBoxShift.dy,e.y*=o,e.width=t.width*o,e.height=t.height*o,e.x2=e.x+e.width,e.y2=e.y+e.height,e}return t},I._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},I.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},I.attr=function(o,n){if(this.removed)return this;if(null==o){var r={};for(var i in this.attrs)this.attrs[e](i)&&(r[i]=this.attrs[i]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&t.is(o,"string")){if(o==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=o.split(u),a={},l=0,h=s.length;l<h;l++)o=s[l],o in this.attrs?a[o]=this.attrs[o]:t.is(this.paper.customAttributes[o],"function")?a[o]=this.paper.customAttributes[o].def:a[o]=t._availableAttrs[o];return h-1?a:a[s[0]]}if(this.attrs&&null==n&&t.is(o,"array")){for(a={},l=0,h=o.length;l<h;l++)a[o[l]]=this.attr(o[l]);return a}var p;null!=n&&(p={},p[o]=n),null==n&&t.is(o,"object")&&(p=o);for(var d in p)g("raphael.attr."+d+"."+this.id,this,p[d]);if(p){for(d in this.paper.customAttributes)if(this.paper.customAttributes[e](d)&&p[e](d)&&t.is(this.paper.customAttributes[d],"function")){var f=this.paper.customAttributes[d].apply(this,[].concat(p[d]));this.attrs[d]=p[d];for(var m in f)f[e](m)&&(p[m]=f[m])}p.text&&"text"==this.type&&(this.textpath.string=p.text),x(this,p)}return this},I.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},I.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},I.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},I.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},I.blur=function(e){var o=this.node.runtimeStyle,n=o.filter;return n=n.replace(m,p),0!=+e?(this.attrs.blur=e,o.filter=n+h+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+e||1.5)+")",o.margin=t.format("-{0}px 0 0 -{0}px",i(+e||1.5))):(o.filter=n,o.margin=0,delete this.attrs.blur),this},t._engine.path=function(t,e){var o=A("shape");o.style.cssText=v,o.coordsize=_+h+_,o.coordorigin=e.coordorigin;var n=new B(o,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),n.type="path",n.path=[],n.Path=p,x(n,r),e.canvas&&e.canvas.appendChild(o);var i=A("skew");return i.on=!0,o.appendChild(i),n.skew=i,n.transform(p),n},t._engine.rect=function(e,o,n,r,i,s){var a=t._rectPath(o,n,r,i,s),l=e.path(a),c=l.attrs;return l.X=c.x=o,l.Y=c.y=n,l.W=c.width=r,l.H=c.height=i,c.r=s,c.path=a,l.type="rect",l},t._engine.ellipse=function(t,e,o,n,r){var i=t.path();i.attrs;return i.X=e-n,i.Y=o-r,i.W=2*n,i.H=2*r,i.type="ellipse",x(i,{cx:e,cy:o,rx:n,ry:r}),i},t._engine.circle=function(t,e,o,n){var r=t.path();r.attrs;return r.X=e-n,r.Y=o-n,r.W=r.H=2*n,r.type="circle",x(r,{cx:e,cy:o,r:n}),r},t._engine.image=function(e,o,n,r,i,s){var a=t._rectPath(n,r,i,s),l=e.path(a).attr({stroke:"none"}),u=l.attrs,g=l.node,h=g.getElementsByTagName(c)[0];return u.src=o,l.X=u.x=n,l.Y=u.y=r,l.W=u.width=i,l.H=u.height=s,u.path=a,l.type="image",h.parentNode==g&&g.removeChild(h),h.rotate=!0,h.src=o,h.type="tile",l._.fillpos=[n,r],l._.fillsize=[i,s],g.appendChild(h),T(l,1,1,0,0,0),l},t._engine.text=function(e,n,r,s){var a=A("shape"),l=A("path"),c=A("textpath");n=n||0,r=r||0,s=s||"",l.v=t.format("m{0},{1}l{2},{1}",i(n*_),i(r*_),i(n*_)+1),l.textpathok=!0,c.string=o(s),c.on=!0,a.style.cssText=v,a.coordsize=_+h+_,a.coordorigin="0 0";var u=new B(a,e),g={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:s};u.shape=a,u.path=l,u.textpath=c,u.type="text",u.attrs.text=o(s),u.attrs.x=n,u.attrs.y=r,u.attrs.w=1,u.attrs.h=1,x(u,g),a.appendChild(c),a.appendChild(l),e.canvas.appendChild(a);var d=A("skew");return d.on=!0,a.appendChild(d),u.skew=d,u.transform(p),u},t._engine.setSize=function(e,o){var n=this.canvas.style;return this.width=e,this.height=o,e==+e&&(e+="px"),o==+o&&(o+="px"),n.width=e,n.height=o,n.clip="rect(0 "+e+" "+o+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,o,n,r,i){t.eve("raphael.setViewBox",this,this._viewBox,[e,o,n,r,i]);var s,a,l=this.getSize(),c=l.width,u=l.height;return i&&(s=u/r,a=c/n,n*s<c&&(e-=(c-n*s)/2/s),r*a<u&&(o-=(u-r*a)/2/a)),this._viewBox=[e,o,n,r,!!i],this._viewBoxShift={dx:-e,dy:-o,scale:l},this.forEach(function(t){t.transform("...")}),this};var A;t._engine.initWin=function(t){var e=t.document;e.styleSheets.length<31?e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):e.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){A=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),o=e.container,n=e.height,r=e.width,i=e.x,s=e.y;if(!o)throw new Error("VML container not found.");var a=new t._Paper,l=a.canvas=t._g.doc.createElement("div"),c=l.style;return i=i||0,s=s||0,r=r||512,n=n||342,a.width=r,a.height=n,r==+r&&(r+="px"),n==+n&&(n+="px"),a.coordsize=216e5+h+216e5,a.coordorigin="0 0",a.span=t._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(a.span),c.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,n),1==o?(t._g.doc.body.appendChild(l),c.left=i+"px",c.top=s+"px",c.position="absolute"):o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l),a.renderfix=function(){},a},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var N=t.st;for(var L in I)I[e](L)&&!N[e](L)&&(N[L]=function(t){return function(){var e=arguments;return this.forEach(function(o){o[t].apply(o,e)})}}(L))}}.apply(e,n))&&(t.exports=r)}])})}).call(window)}).call(e,o(0))},function(t,e,o){var n,r;(function(){(function(){var i=this,s=i._,a=Array.prototype,l=Object.prototype,c=Function.prototype,u=a.push,g=a.slice,h=a.concat,p=l.toString,d=l.hasOwnProperty,f=Array.isArray,m=Object.keys,y=c.bind,v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};void 0!==t&&t.exports&&(e=t.exports=v),e._=v,v.VERSION="1.7.0";var _=function(t,e,o){if(void 0===e)return t;switch(null==o?3:o){case 1:return function(o){return t.call(e,o)};case 2:return function(o,n){return t.call(e,o,n)};case 3:return function(o,n,r){return t.call(e,o,n,r)};case 4:return function(o,n,r,i){return t.call(e,o,n,r,i)}}return function(){return t.apply(e,arguments)}};v.iteratee=function(t,e,o){return null==t?v.identity:v.isFunction(t)?_(t,e,o):v.isObject(t)?v.matches(t):v.property(t)},v.each=v.forEach=function(t,e,o){if(null==t)return t;e=_(e,o);var n,r=t.length;if(r===+r)for(n=0;r>n;n++)e(t[n],n,t);else{var i=v.keys(t);for(n=0,r=i.length;r>n;n++)e(t[i[n]],i[n],t)}return t},v.map=v.collect=function(t,e,o){if(null==t)return[];e=v.iteratee(e,o);for(var n,r=t.length!==+t.length&&v.keys(t),i=(r||t).length,s=Array(i),a=0;i>a;a++)n=r?r[a]:a,s[a]=e(t[n],n,t);return s};var b="Reduce of empty array with no initial value";v.reduce=v.foldl=v.inject=function(t,e,o,n){null==t&&(t=[]),e=_(e,n,4);var r,i=t.length!==+t.length&&v.keys(t),s=(i||t).length,a=0;if(arguments.length<3){if(!s)throw new TypeError(b);o=t[i?i[a++]:a++]}for(;s>a;a++)r=i?i[a]:a,o=e(o,t[r],r,t);return o},v.reduceRight=v.foldr=function(t,e,o,n){null==t&&(t=[]),e=_(e,n,4);var r,i=t.length!==+t.length&&v.keys(t),s=(i||t).length;if(arguments.length<3){if(!s)throw new TypeError(b);o=t[i?i[--s]:--s]}for(;s--;)r=i?i[s]:s,o=e(o,t[r],r,t);return o},v.find=v.detect=function(t,e,o){var n;return e=v.iteratee(e,o),v.some(t,function(t,o,r){return e(t,o,r)?(n=t,!0):void 0}),n},v.filter=v.select=function(t,e,o){var n=[];return null==t?n:(e=v.iteratee(e,o),v.each(t,function(t,o,r){e(t,o,r)&&n.push(t)}),n)},v.reject=function(t,e,o){return v.filter(t,v.negate(v.iteratee(e)),o)},v.every=v.all=function(t,e,o){if(null==t)return!0;e=v.iteratee(e,o);var n,r,i=t.length!==+t.length&&v.keys(t),s=(i||t).length;for(n=0;s>n;n++)if(r=i?i[n]:n,!e(t[r],r,t))return!1;return!0},v.some=v.any=function(t,e,o){if(null==t)return!1;e=v.iteratee(e,o);var n,r,i=t.length!==+t.length&&v.keys(t),s=(i||t).length;for(n=0;s>n;n++)if(r=i?i[n]:n,e(t[r],r,t))return!0;return!1},v.contains=v.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=v.values(t)),v.indexOf(t,e)>=0)},v.invoke=function(t,e){var o=g.call(arguments,2),n=v.isFunction(e);return v.map(t,function(t){return(n?e:t[e]).apply(t,o)})},v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matches(e))},v.findWhere=function(t,e){return v.find(t,v.matches(e))},v.max=function(t,e,o){var n,r,i=-1/0,s=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:v.values(t);for(var a=0,l=t.length;l>a;a++)(n=t[a])>i&&(i=n)}else e=v.iteratee(e,o),v.each(t,function(t,o,n){((r=e(t,o,n))>s||r===-1/0&&i===-1/0)&&(i=t,s=r)});return i},v.min=function(t,e,o){var n,r,i=1/0,s=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:v.values(t);for(var a=0,l=t.length;l>a;a++)n=t[a],i>n&&(i=n)}else e=v.iteratee(e,o),v.each(t,function(t,o,n){r=e(t,o,n),(s>r||1/0===r&&1/0===i)&&(i=t,s=r)});return i},v.shuffle=function(t){for(var e,o=t&&t.length===+t.length?t:v.values(t),n=o.length,r=Array(n),i=0;n>i;i++)e=v.random(0,i),e!==i&&(r[i]=r[e]),r[e]=o[i];return r},v.sample=function(t,e,o){return null==e||o?(t.length!==+t.length&&(t=v.values(t)),t[v.random(t.length-1)]):v.shuffle(t).slice(0,Math.max(0,e))},v.sortBy=function(t,e,o){return e=v.iteratee(e,o),v.pluck(v.map(t,function(t,o,n){return{value:t,index:o,criteria:e(t,o,n)}}).sort(function(t,e){var o=t.criteria,n=e.criteria;if(o!==n){if(o>n||void 0===o)return 1;if(n>o||void 0===n)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,o,n){var r={};return o=v.iteratee(o,n),v.each(e,function(n,i){var s=o(n,i,e);t(r,n,s)}),r}};v.groupBy=E(function(t,e,o){v.has(t,o)?t[o].push(e):t[o]=[e]}),v.indexBy=E(function(t,e,o){t[o]=e}),v.countBy=E(function(t,e,o){v.has(t,o)?t[o]++:t[o]=1}),v.sortedIndex=function(t,e,o,n){o=v.iteratee(o,n,1);for(var r=o(e),i=0,s=t.length;s>i;){var a=i+s>>>1;o(t[a])<r?i=a+1:s=a}return i},v.toArray=function(t){return t?v.isArray(t)?g.call(t):t.length===+t.length?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:t.length===+t.length?t.length:v.keys(t).length},v.partition=function(t,e,o){e=v.iteratee(e,o);var n=[],r=[];return v.each(t,function(t,o,i){(e(t,o,i)?n:r).push(t)}),[n,r]},v.first=v.head=v.take=function(t,e,o){return null==t?void 0:null==e||o?t[0]:0>e?[]:g.call(t,0,e)},v.initial=function(t,e,o){return g.call(t,0,Math.max(0,t.length-(null==e||o?1:e)))},v.last=function(t,e,o){return null==t?void 0:null==e||o?t[t.length-1]:g.call(t,Math.max(t.length-e,0))},v.rest=v.tail=v.drop=function(t,e,o){return g.call(t,null==e||o?1:e)},v.compact=function(t){return v.filter(t,v.identity)};var S=function(t,e,o,n){if(e&&v.every(t,v.isArray))return h.apply(n,t);for(var r=0,i=t.length;i>r;r++){var s=t[r];v.isArray(s)||v.isArguments(s)?e?u.apply(n,s):S(s,e,o,n):o||n.push(s)}return n};v.flatten=function(t,e){return S(t,e,!1,[])},v.without=function(t){return v.difference(t,g.call(arguments,1))},v.uniq=v.unique=function(t,e,o,n){if(null==t)return[];v.isBoolean(e)||(n=o,o=e,e=!1),null!=o&&(o=v.iteratee(o,n));for(var r=[],i=[],s=0,a=t.length;a>s;s++){var l=t[s];if(e)s&&i===l||r.push(l),i=l;else if(o){var c=o(l,s,t);v.indexOf(i,c)<0&&(i.push(c),r.push(l))}else v.indexOf(r,l)<0&&r.push(l)}return r},v.union=function(){return v.uniq(S(arguments,!0,!0,[]))},v.intersection=function(t){if(null==t)return[];for(var e=[],o=arguments.length,n=0,r=t.length;r>n;n++){var i=t[n];if(!v.contains(e,i)){for(var s=1;o>s&&v.contains(arguments[s],i);s++);s===o&&e.push(i)}}return e},v.difference=function(t){var e=S(g.call(arguments,1),!0,!0,[]);return v.filter(t,function(t){return!v.contains(e,t)})},v.zip=function(t){if(null==t)return[];for(var e=v.max(arguments,"length").length,o=Array(e),n=0;e>n;n++)o[n]=v.pluck(arguments,n);return o},v.object=function(t,e){if(null==t)return{};for(var o={},n=0,r=t.length;r>n;n++)e?o[t[n]]=e[n]:o[t[n][0]]=t[n][1];return o},v.indexOf=function(t,e,o){if(null==t)return-1;var n=0,r=t.length;if(o){if("number"!=typeof o)return n=v.sortedIndex(t,e),t[n]===e?n:-1;n=0>o?Math.max(0,r+o):o}for(;r>n;n++)if(t[n]===e)return n;return-1},v.lastIndexOf=function(t,e,o){if(null==t)return-1;var n=t.length;for("number"==typeof o&&(n=0>o?n+o+1:Math.min(n,o+1));--n>=0;)if(t[n]===e)return n;return-1},v.range=function(t,e,o){arguments.length<=1&&(e=t||0,t=0),o=o||1;for(var n=Math.max(Math.ceil((e-t)/o),0),r=Array(n),i=0;n>i;i++,t+=o)r[i]=t;return r};var k=function(){};v.bind=function(t,e){var o,n;if(y&&t.bind===y)return y.apply(t,g.call(arguments,1));if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");return o=g.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,o.concat(g.call(arguments)));k.prototype=t.prototype;var r=new k;k.prototype=null;var i=t.apply(r,o.concat(g.call(arguments)));return v.isObject(i)?i:r}},v.partial=function(t){var e=g.call(arguments,1);return function(){for(var o=0,n=e.slice(),r=0,i=n.length;i>r;r++)n[r]===v&&(n[r]=arguments[o++]);for(;o<arguments.length;)n.push(arguments[o++]);return t.apply(this,n)}},v.bindAll=function(t){var e,o,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)o=arguments[e],t[o]=v.bind(t[o],t);return t},v.memoize=function(t,e){var o=function(n){var r=o.cache,i=e?e.apply(this,arguments):n;return v.has(r,i)||(r[i]=t.apply(this,arguments)),r[i]};return o.cache={},o},v.delay=function(t,e){var o=g.call(arguments,2);return setTimeout(function(){return t.apply(null,o)},e)},v.defer=function(t){return v.delay.apply(v,[t,1].concat(g.call(arguments,1)))},v.throttle=function(t,e,o){var n,r,i,s=null,a=0;o||(o={});var l=function(){a=!1===o.leading?0:v.now(),s=null,i=t.apply(n,r),s||(n=r=null)};return function(){var c=v.now();a||!1!==o.leading||(a=c);var u=e-(c-a);return n=this,r=arguments,0>=u||u>e?(clearTimeout(s),s=null,a=c,i=t.apply(n,r),s||(n=r=null)):s||!1===o.trailing||(s=setTimeout(l,u)),i}},v.debounce=function(t,e,o){var n,r,i,s,a,l=function(){var c=v.now()-s;e>c&&c>0?n=setTimeout(l,e-c):(n=null,o||(a=t.apply(i,r),n||(i=r=null)))};return function(){i=this,r=arguments,s=v.now();var c=o&&!n;return n||(n=setTimeout(l,e)),c&&(a=t.apply(i,r),i=r=null),a}},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var o=e,n=t[e].apply(this,arguments);o--;)n=t[o].call(this,n);return n}},v.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},v.before=function(t,e){var o;return function(){return--t>0?o=e.apply(this,arguments):e=null,o}},v.once=v.partial(v.before,2),v.keys=function(t){if(!v.isObject(t))return[];if(m)return m(t);var e=[];for(var o in t)v.has(t,o)&&e.push(o);return e},v.values=function(t){for(var e=v.keys(t),o=e.length,n=Array(o),r=0;o>r;r++)n[r]=t[e[r]];return n},v.pairs=function(t){for(var e=v.keys(t),o=e.length,n=Array(o),r=0;o>r;r++)n[r]=[e[r],t[e[r]]];return n},v.invert=function(t){for(var e={},o=v.keys(t),n=0,r=o.length;r>n;n++)e[t[o[n]]]=o[n];return e},v.functions=v.methods=function(t){var e=[];for(var o in t)v.isFunction(t[o])&&e.push(o);return e.sort()},v.extend=function(t){if(!v.isObject(t))return t;for(var e,o,n=1,r=arguments.length;r>n;n++){e=arguments[n];for(o in e)d.call(e,o)&&(t[o]=e[o])}return t},v.pick=function(t,e,o){var n,r={};if(null==t)return r;if(v.isFunction(e)){e=_(e,o);for(n in t){var i=t[n];e(i,n,t)&&(r[n]=i)}}else{var s=h.apply([],g.call(arguments,1));t=new Object(t);for(var a=0,l=s.length;l>a;a++)(n=s[a])in t&&(r[n]=t[n])}return r},v.omit=function(t,e,o){if(v.isFunction(e))e=v.negate(e);else{var n=v.map(h.apply([],g.call(arguments,1)),String);e=function(t,e){return!v.contains(n,e)}}return v.pick(t,e,o)},v.defaults=function(t){if(!v.isObject(t))return t;for(var e=1,o=arguments.length;o>e;e++){var n=arguments[e];for(var r in n)void 0===t[r]&&(t[r]=n[r])}return t},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t};var T=function(t,e,o,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var r=p.call(t);if(r!==p.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var i=o.length;i--;)if(o[i]===t)return n[i]===e;var s=t.constructor,a=e.constructor;if(s!==a&&"constructor"in t&&"constructor"in e&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(a)&&a instanceof a))return!1;o.push(t),n.push(e);var l,c;if("[object Array]"===r){if(l=t.length,c=l===e.length)for(;l--&&(c=T(t[l],e[l],o,n)););}else{var u,g=v.keys(t);if(l=g.length,c=v.keys(e).length===l)for(;l--&&(u=g[l],c=v.has(e,u)&&T(t[u],e[u],o,n)););}return o.pop(),n.pop(),c};v.isEqual=function(t,e){return T(t,e,[],[])},v.isEmpty=function(t){if(null==t)return!0;if(v.isArray(t)||v.isString(t)||v.isArguments(t))return 0===t.length;for(var e in t)if(v.has(t,e))return!1;return!0},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=f||function(t){return"[object Array]"===p.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){v["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return v.has(t,"callee")}),"function"!=typeof/./&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&t!==+t},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===p.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){return null!=t&&d.call(t,e)},v.noConflict=function(){return i._=s,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=function(t){return function(e){return e[t]}},v.matches=function(t){var e=v.pairs(t),o=e.length;return function(t){if(null==t)return!o;t=new Object(t);for(var n=0;o>n;n++){var r=e[n],i=r[0];if(r[1]!==t[i]||!(i in t))return!1}return!0}},v.times=function(t,e,o){var n=Array(Math.max(0,t));e=_(e,o,1);for(var r=0;t>r;r++)n[r]=e(r);return n},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},x=v.invert(C),w=function(t){var e=function(e){return t[e]},o="(?:"+v.keys(t).join("|")+")",n=RegExp(o),r=RegExp(o,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};v.escape=w(C),v.unescape=w(x),v.result=function(t,e){if(null!=t){var o=t[e];return v.isFunction(o)?t[e]():o}};var B=0;v.uniqueId=function(t){var e=++B+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,A={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,L=function(t){return"\\"+A[t]};v.template=function(t,e,o){!e&&o&&(e=o),e=v.defaults({},e,v.templateSettings);var n=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),r=0,i="__p+='";t.replace(n,function(e,o,n,s,a){return i+=t.slice(r,a).replace(N,L),r=a+e.length,o?i+="'+\n((__t=("+o+"))==null?'':_.escape(__t))+\n'":n?i+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(i+="';\n"+s+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var s=new Function(e.variable||"obj","_",i)}catch(t){throw t.source=i,t}var a=function(t){return s.call(this,t,v)};return a.source="function("+(e.variable||"obj")+"){\n"+i+"}",a},v.chain=function(t){var e=v(t);return e._chain=!0,e};var R=function(t){return this._chain?v(t).chain():t};v.mixin=function(t){v.each(v.functions(t),function(e){var o=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),R.call(this,o.apply(v,t))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];v.prototype[t]=function(){var o=this._wrapped;return e.apply(o,arguments),"shift"!==t&&"splice"!==t||0!==o.length||delete o[0],R.call(this,o)}}),v.each(["concat","join","slice"],function(t){var e=a[t];v.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},o(2)&&(n=[],void 0!==(r=function(){return v}.apply(e,n))&&(t.exports=r))}).call(this)}).call(window)},function(t,e,o){(function(t){(function(){!function(e,o,n){e.spinner=function(e,n,r){var i='<div class="circuits_spinner"><div class="circuits_spinner__bounce1"></div><div class="circuits_spinner__bounce2"></div><div class="circuits_spinner__bounce3"></div></div>';t?(e=o(e),e.html(i),n&&o(".circuits_spinner > div",e).css("background-color",n),r&&(o(".circuits_spinner > div",e).css("width",r),o(".circuits_spinner > div",e).css("height",r))):e.innerHTML=i}}(window.cSite=window.cSite||{},t)}).call(window)}).call(e,o(0))},function(module,exports){(function(){var goog=window.goog,$jscomp=$jscomp||{};$jscomp.scope={};var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(t){return void 0!==t},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.exportPath_=function(t,e,o){t=t.split("."),o=o||goog.global,t[0]in o||!o.execScript||o.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)!t.length&&goog.isDef(e)?o[n]=e:o=o[n]&&o[n]!==Object.prototype[n]?o[n]:o[n]={}},goog.define=function(t,e){var o=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&void 0===goog.global.CLOSURE_UNCOMPILED_DEFINES.nodeType&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?o=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&void 0===goog.global.CLOSURE_DEFINES.nodeType&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(o=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,o)},goog.DEBUG=!1,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(t){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)},goog.constructNamespace_=function(t,e){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var o=t;(o=o.substring(0,o.lastIndexOf(".")))&&!goog.getObjectByName(o);)goog.implicitNamespaces_[o]=!0}goog.exportPath_(t,e)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(!goog.isString(t)||!t||-1==t.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){if(!COMPILED){if(t in goog.loadedModules_)return goog.loadedModules_[t];if(!goog.implicitNamespaces_[t])return t=goog.getObjectByName(t),null!=t?t:null}return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,e){for(var o,n=t.split("."),r=e||goog.global;o=n.shift();){if(!goog.isDefAndNotNull(r[o]))return null;r=r[o]}return r},goog.globalize=function(t,e){var o,n=e||goog.global;for(o in t)n[o]=t[o]},goog.addDependency=function(t,e,o,n){if(goog.DEPENDENCIES_ENABLED){var r;t=t.replace(/\\/g,"/");var i=goog.dependencies_;n&&"boolean"!=typeof n||(n=n?{module:"goog"}:{});for(var s=0;r=e[s];s++)i.nameToPath[r]=t,i.loadFlags[t]=n;for(n=0;e=o[n];n++)t in i.requires||(i.requires[t]={}),i.requires[t][e]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(t),goog.isProvided_(t)){if(goog.isInModuleLoader_())return goog.module.getInternal_(t)}else if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(!e)throw t="goog.require could not find: "+t,goog.logToConsole_(t),Error(t);goog.writeScripts_(e)}return null}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.instance_=void 0,t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.TRANSPILER="transpile.js",goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return null!=t&&"write"in t},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var t=goog.global.document,e=t.currentScript;for(t=e?[e]:t.getElementsByTagName("SCRIPT"),e=t.length-1;0<=e;--e){var o=t[e].src,n=o.lastIndexOf("?");if(n=-1==n?o.length:n,"base.js"==o.substr(n-7,7)){goog.basePath=o.substr(0,n-7);break}}}},goog.importScript_=function(t,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(t,e)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.oldIeWaiting_=!1,goog.importProcessedScript_=function(t,e,o){goog.importScript_("",'goog.retrieveAndExec_("'+t+'", '+e+", "+o+");")},goog.queuedModules_=[],goog.wrapModule_=function(t,e){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(0<t){var e=goog.queuedModules_;goog.queuedModules_=[];for(var o=0;o<t;o++)goog.maybeProcessDeferredPath_(e[o])}goog.oldIeWaiting_=!1},goog.maybeProcessDeferredDep_=function(t){goog.isDeferredModule_(t)&&goog.allDepsAreAvailable_(t)&&(t=goog.getPathFromDeps_(t),goog.maybeProcessDeferredPath_(goog.basePath+t))},goog.isDeferredModule_=function(t){var e=(t=goog.getPathFromDeps_(t))&&goog.dependencies_.loadFlags[t]||{},o=e.lang||"es3";return!(!t||"goog"!=e.module&&!goog.needsTranspile_(o))&&goog.basePath+t in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(t){if((t=goog.getPathFromDeps_(t))&&t in goog.dependencies_.requires)for(var e in goog.dependencies_.requires[t])if(!goog.isProvided_(e)&&!goog.isDeferredModule_(e))return!1;return!0},goog.maybeProcessDeferredPath_=function(t){if(t in goog.dependencies_.deferred){var e=goog.dependencies_.deferred[t];delete goog.dependencies_.deferred[t],goog.globalEval(e)}},goog.loadModuleFromUrl=function(t){goog.retrieveAndExec_(t,!0,!1)},goog.writeScriptSrcNode_=function(t){goog.global.document.write('<script type="text/javascript" src="'+t+'"><\/script>')},goog.appendScriptSrcNode_=function(t){var e=goog.global.document,o=e.createElement("script");o.type="text/javascript",o.src=t,o.defer=!1,o.async=!1,e.head.appendChild(o)},goog.writeScriptTag_=function(t,e){if(goog.inHtmlDocument_()){var o=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==o.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}if(void 0===e)if(goog.IS_OLD_IE_){goog.oldIeWaiting_=!0;var n=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";o.write('<script type="text/javascript" src="'+t+'"'+n+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(t):goog.writeScriptSrcNode_(t);else o.write('<script type="text/javascript">'+goog.protectScriptTag_(e)+"<\/script>");return!0}return!1},goog.protectScriptTag_=function(t){return t.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.needsTranspile_=function(t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(goog.requiresTranspilation_||(goog.requiresTranspilation_=goog.createRequiresTranspilation_()),t in goog.requiresTranspilation_)return goog.requiresTranspilation_[t];throw Error("Unknown language mode: "+t)},goog.requiresTranspilation_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,e){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(t){function e(t){if(!(t in r.written||t in r.visited)){if(r.visited[t]=!0,t in r.requires)for(var i in r.requires[t])if(!goog.isProvided_(i)){if(!(i in r.nameToPath))throw Error("Undefined nameToPath for "+i);e(r.nameToPath[i])}t in n||(n[t]=!0,o.push(t))}}var o=[],n={},r=goog.dependencies_;e(t);for(var i=0;i<o.length;i++)t=o[i],goog.dependencies_.written[t]=!0;var s=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,i=0;i<o.length;i++){if(!(t=o[i]))throw goog.moduleLoaderState_=s,Error("Undefined script input");var a=r.loadFlags[t]||{},l=goog.needsTranspile_(a.lang||"es3");"goog"==a.module||l?goog.importProcessedScript_(goog.basePath+t,"goog"==a.module,l):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(t){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(t){return"(function(){"+t+"\n;})();\n"},goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(t))var o=t.call(void 0,{});else{if(!goog.isString(t))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(t=goog.workaroundSafari10EvalBug(t)),o=goog.loadModuleFromSource_.call(void 0,t)}var n=goog.moduleLoaderState_.moduleName;if(!goog.isString(n)||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof o&&null!=o&&Object.seal(o),goog.loadedModules_[n]=o}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(t){t=t.split("/");for(var e=0;e<t.length;)"."==t[e]?t.splice(e,1):e&&".."==t[e]&&t[e-1]&&".."!=t[e-1]?t.splice(--e,2):e++;return t.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),0==e.status||200==e.status?e.responseText:null}catch(t){return null}},goog.retrieveAndExec_=function(t,e,o){if(!COMPILED){var n=t;t=goog.normalizePath_(t);var r=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,i=goog.loadFileSync_(t);if(null==i)throw Error('Load of "'+t+'" failed');o&&(i=goog.transpile_.call(goog.global,i,t)),i=e?goog.wrapModule_(t,i):i+"\n//# sourceURL="+t,goog.IS_OLD_IE_&&goog.oldIeWaiting_?(goog.dependencies_.deferred[n]=i,goog.queuedModules_.push(n)):r(t,i)}},goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,f=goog.loadFileSync_(e);if(f){if(eval(f+"\n//# sourceURL="+e),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,c=goog.global.$jscomp,d=c.transpile}}return d||(d=c.transpile=function(t,e){return goog.logToConsole_(e+" requires transpilation but no transpiler was found."),t}),d(a,b)},goog.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var o=Object.prototype.toString.call(t);if("[object Window]"==o)return"object";if("[object Array]"==o||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==o||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){null!==t&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){var e=goog.typeOf(t);if("object"==e||"array"==e){if(t.clone)return t.clone();e="array"==e?[]:{};for(var o in t)e[o]=goog.cloneObject(t[o]);return e}return t},goog.bindNative_=function(t,e,o){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,o){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,n),t.apply(e,o)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,o){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var o=Array.prototype.slice.call(arguments,1);return function(){var e=o.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(t,e){for(var o in e)t[o]=e[o]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,o=e.createElement("SCRIPT");o.type="text/javascript",o.defer=!1,o.appendChild(e.createTextNode(t)),e.body.appendChild(o),e.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){if("."==String(t).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+t);var o=function(t){return goog.cssNameMapping_[t]||t},n=function(t){t=t.split("-");for(var e=[],n=0;n<t.length;n++)e.push(o(t[n]));return e.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:n:function(t){return t},n=e?t+"-"+n(e):n(t),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(n):n},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){return e&&(t=t.replace(/\{\$([^}]+)}/g,function(t,o){return null!=e&&o in e?e[o]:t})),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,o){goog.exportPath_(t,e,o)},goog.exportProperty=function(t,e,o){t[e]=o},goog.inherits=function(t,e){function o(){}o.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new o,t.prototype.constructor=t,t.base=function(t,o,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return e.prototype[o].apply(t,r)}},goog.base=function(t,e,o){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_){for(var r=Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return n.superClass_.constructor.apply(t,r)}for(r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];i=!1;for(var s=t.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[e]===n)i=!0;else if(i)return s.prototype[e].apply(t,r);if(t[e]===n)return t.constructor.prototype[e].apply(t,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var o=e.constructor,n=e.statics;return o&&o!=Object.prototype.constructor||(o=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),o=goog.defineClass.createSealingConstructor_(o,t),t&&goog.inherits(o,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(o.prototype,e),null!=n&&(n instanceof Function?n(o):goog.defineClass.applyProperties_(o,n)),o},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var o=!goog.defineClass.isUnsealable_(e),n=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===n&&o&&Object.seal instanceof Function&&Object.seal(e),e};return n},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)o=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.createRequiresTranspilation_=function(){function a(t,e){d?c[t]=!0:e()?c[t]=!1:d=c[t]=!0}function b(a){try{return!!eval(a)}catch(t){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){var t=e.match(/Edge\/(\d+)(\.\d)*/i);return!(t&&15>Number(t[1]))&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es6-impl",function(){return!0}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),c},goog.debug={},goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},goog.string.endsWith=function(t,e){var o=t.length-e.length;return 0<=o&&t.indexOf(e,o)==o},goog.string.caseInsensitiveStartsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(0,e.length))},goog.string.caseInsensitiveEndsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))},goog.string.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},goog.string.subs=function(t,e){for(var o=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<o.length;)n+=o.shift()+r.shift();return n+o.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.isEmptyString=function(t){return 0==t.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(t){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return" "==t},goog.string.isUnicodeChar=function(t){return 1==t.length&&" "<=t&&"~">=t||""<=t&&"�">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(t,e){var o=String(t).toLowerCase(),n=String(e).toLowerCase();return o<n?-1:o==n?0:1},goog.string.numberAwareCompare_=function(t,e,o){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=t.toLowerCase().match(o),r=e.toLowerCase().match(o),i=Math.min(n.length,r.length),s=0;s<i;s++){o=n[s];var a=r[s];if(o!=a)return t=parseInt(o,10),!isNaN(t)&&(e=parseInt(a,10),!isNaN(e)&&t-e)?t-e:o<a?-1:1}return n.length!=r.length?n.length-r.length:t<e?-1:1},goog.string.intAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.htmlEscape=function(t,e){if(e)t=t.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(goog.string.AMP_RE_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(goog.string.LT_RE_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(goog.string.GT_RE_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(goog.string.QUOT_RE_,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=t.indexOf("e")&&(t=t.replace(goog.string.E_RE_,"&#101;"))}return t},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,e){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,e):t},goog.string.unescapeEntitiesUsingDom_=function(t,e){var o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=e?e.createElement("div"):goog.global.document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,function(t,e){var r=o[t];if(r)return r;if("#"==e.charAt(0)){var i=Number("0"+e.substr(1));isNaN(i)||(r=String.fromCharCode(i))}return r||(n.innerHTML=t+" ",r=n.firstChild.nodeValue.slice(0,-1)),o[t]=r})},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var o=Number("0"+e.substr(1));if(!isNaN(o))return String.fromCharCode(o)}return t}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,e){for(var o=e.length,n=0;n<o;n++){var r=1==o?e:e.charAt(n);if(t.charAt(0)==r&&t.charAt(t.length-1)==r)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,o){return o&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),o&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,o,n){if(o&&(t=goog.string.unescapeEntities(t)),n&&t.length>e){n>e&&(n=e);var r=t.length-n;t=t.substring(0,e-n)+"..."+t.substring(r)}else t.length>e&&(n=Math.floor(e/2),r=t.length-n,t=t.substring(0,n+e%2)+"..."+t.substring(r));return o&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){t=String(t);for(var e=['"'],o=0;o<t.length;o++){var n=t.charAt(o),r=n.charCodeAt(0);e[o+1]=goog.string.specialEscapeChars_[n]||(31<r&&127>r?n:goog.string.escapeChar(n))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],o=0;o<t.length;o++)e[o]=goog.string.escapeChar(t.charAt(o));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t.charCodeAt(0);if(31<e&&127>e)var o=t;else 256>e?(o="\\x",(16>e||256<e)&&(o+="0")):(o="\\u",4096>e&&(o+="0")),o+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[t]=o},goog.string.contains=function(t,e){return-1!=t.indexOf(e)},goog.string.caseInsensitiveContains=function(t,e){return goog.string.contains(t.toLowerCase(),e.toLowerCase())},goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,o){var n=t;return 0<=e&&e<t.length&&0<o&&(n=t.substr(0,e)+t.substr(e+o,t.length-e-o)),n},goog.string.remove=function(t,e){return t.replace(e,"")},goog.string.removeAll=function(t,e){var o=new RegExp(goog.string.regExpEscape(e),"g");return t.replace(o,"")},goog.string.replaceAll=function(t,e,o){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,o.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,o){return t=goog.isDef(o)?t.toFixed(o):String(t),o=t.indexOf("."),-1==o&&(o=t.length),goog.string.repeat("0",Math.max(0,e-o))+t},goog.string.makeSafe=function(t){return null==t?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(t,e){for(var o=0,n=goog.string.trim(String(t)).split("."),r=goog.string.trim(String(e)).split("."),i=Math.max(n.length,r.length),s=0;0==o&&s<i;s++){var a=n[s]||"",l=r[s]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;o=0==a[1].length?0:parseInt(a[1],10);var c=0==l[1].length?0:parseInt(l[1],10);o=goog.string.compareElements_(o,c)||goog.string.compareElements_(0==a[2].length,0==l[2].length)||goog.string.compareElements_(a[2],l[2]),a=a[3],l=l[3]}while(0==o)}return o},goog.string.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.string.hashCode=function(t){for(var e=0,o=0;o<t.length;++o)e=31*e+t.charCodeAt(o)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return 0==e&&goog.string.isEmptyOrWhitespace(t)?NaN:e},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){var o=goog.isString(e)?goog.string.regExpEscape(e):"\\s";return t.replace(new RegExp("(^"+(o?"|["+o+"]+":"")+")([a-z])","g"),function(t,e,o){return e+o.toUpperCase()})},goog.string.capitalize=function(t){return String(t.charAt(0)).toUpperCase()+String(t.substr(1)).toLowerCase()},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),goog.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,e,o){t=t.split(e);for(var n=[];0<o&&t.length;)n.push(t.shift()),o--;return t.length&&n.push(t.join(e)),n},goog.string.lastComponent=function(t,e){if(!e)return t;"string"==typeof e&&(e=[e]);for(var o=-1,n=0;n<e.length;n++)if(""!=e[n]){var r=t.lastIndexOf(e[n]);r>o&&(o=r)}return-1==o?t:t.slice(o+1)},goog.string.editDistance=function(t,e){var o=[],n=[];if(t==e)return 0;if(!t.length||!e.length)return Math.max(t.length,e.length);for(var r=0;r<e.length+1;r++)o[r]=r;for(r=0;r<t.length;r++){n[0]=r+1;for(var i=0;i<e.length;i++)n[i+1]=Math.min(n[i]+1,o[i+1]+1,o[i]+Number(t[r]!=e[i]));for(i=0;i<o.length;i++)o[i]=n[i]}return n[e.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){e.unshift(t),goog.debug.Error.call(this,goog.string.subs.apply(null,e)),e.shift(),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER;goog.asserts.doAssertFailure_=function(t,e,o,n){var r="Assertion failed";if(o){r+=": "+o;var i=n}else t&&(r+=": "+t,i=e);t=new goog.asserts.AssertionError(""+r,i||[]),goog.asserts.errorHandler_(t)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(t)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(t)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(t)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,e,o){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,o,n){return!goog.asserts.ENABLE_ASSERTS||t instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(t)],o,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):null===t?"null":typeof t},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(t){return t[t.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(t,e,o){return goog.asserts.assert(null!=t.length),Array.prototype.indexOf.call(t,e,o)}:function(t,e,o){if(o=null==o?0:0>o?Math.max(0,t.length+o):o,goog.isString(t))return goog.isString(e)&&1==e.length?t.indexOf(e,o):-1;for(;o<t.length;o++)if(o in t&&t[o]===e)return o;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(t,e,o){return goog.asserts.assert(null!=t.length),Array.prototype.lastIndexOf.call(t,e,null==o?t.length-1:o)}:function(t,e,o){if(o=null==o?t.length-1:o,0>o&&(o=Math.max(0,t.length+o)),goog.isString(t))return goog.isString(e)&&1==e.length?t.lastIndexOf(e,o):-1;for(;0<=o;o--)if(o in t&&t[o]===e)return o;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(t,e,o){goog.asserts.assert(null!=t.length),Array.prototype.forEach.call(t,e,o)}:function(t,e,o){for(var n=t.length,r=goog.isString(t)?t.split(""):t,i=0;i<n;i++)i in r&&e.call(o,r[i],i,t)},goog.array.forEachRight=function(t,e,o){var n=t.length,r=goog.isString(t)?t.split(""):t;for(--n;0<=n;--n)n in r&&e.call(o,r[n],n,t)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(t,e,o){return goog.asserts.assert(null!=t.length),Array.prototype.filter.call(t,e,o)}:function(t,e,o){for(var n=t.length,r=[],i=0,s=goog.isString(t)?t.split(""):t,a=0;a<n;a++)if(a in s){var l=s[a];e.call(o,l,a,t)&&(r[i++]=l)}return r},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(t,e,o){return goog.asserts.assert(null!=t.length),Array.prototype.map.call(t,e,o)}:function(t,e,o){for(var n=t.length,r=Array(n),i=goog.isString(t)?t.split(""):t,s=0;s<n;s++)s in i&&(r[s]=e.call(o,i[s],s,t));return r},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(t,e,o,n){return goog.asserts.assert(null!=t.length),n&&(e=goog.bind(e,n)),Array.prototype.reduce.call(t,e,o)}:function(t,e,o,n){var r=o;return goog.array.forEach(t,function(o,i){r=e.call(n,r,o,i,t)}),r},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(t,e,o,n){return goog.asserts.assert(null!=t.length),goog.asserts.assert(null!=e),n&&(e=goog.bind(e,n)),Array.prototype.reduceRight.call(t,e,o)}:function(t,e,o,n){var r=o;return goog.array.forEachRight(t,function(o,i){r=e.call(n,r,o,i,t)}),r},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(t,e,o){return goog.asserts.assert(null!=t.length),Array.prototype.some.call(t,e,o)}:function(t,e,o){for(var n=t.length,r=goog.isString(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(o,r[i],i,t))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(t,e,o){return goog.asserts.assert(null!=t.length),Array.prototype.every.call(t,e,o)}:function(t,e,o){for(var n=t.length,r=goog.isString(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&!e.call(o,r[i],i,t))return!1;return!0},goog.array.count=function(t,e,o){var n=0;return goog.array.forEach(t,function(t,r,i){e.call(o,t,r,i)&&++n},o),n},goog.array.find=function(t,e,o){return e=goog.array.findIndex(t,e,o),0>e?null:goog.isString(t)?t.charAt(e):t[e]},goog.array.findIndex=function(t,e,o){for(var n=t.length,r=goog.isString(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(o,r[i],i,t))return i;return-1},goog.array.findRight=function(t,e,o){return e=goog.array.findIndexRight(t,e,o),0>e?null:goog.isString(t)?t.charAt(e):t[e]},goog.array.findIndexRight=function(t,e,o){var n=t.length,r=goog.isString(t)?t.split(""):t;for(--n;0<=n;n--)if(n in r&&e.call(o,r[n],n,t))return n;return-1},goog.array.contains=function(t,e){return 0<=goog.array.indexOf(t,e)},goog.array.isEmpty=function(t){return 0==t.length},goog.array.clear=function(t){if(!goog.isArray(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0},goog.array.insert=function(t,e){goog.array.contains(t,e)||t.push(e)},goog.array.insertAt=function(t,e,o){goog.array.splice(t,o,0,e)},goog.array.insertArrayAt=function(t,e,o){goog.partial(goog.array.splice,t,o,0).apply(null,e)},goog.array.insertBefore=function(t,e,o){var n;2==arguments.length||0>(n=goog.array.indexOf(t,o))?t.push(e):goog.array.insertAt(t,e,n)},goog.array.remove=function(t,e){var o,n=goog.array.indexOf(t,e);return(o=0<=n)&&goog.array.removeAt(t,n),o},goog.array.removeLast=function(t,e){var o=goog.array.lastIndexOf(t,e);return 0<=o&&(goog.array.removeAt(t,o),!0)},goog.array.removeAt=function(t,e){return goog.asserts.assert(null!=t.length),1==Array.prototype.splice.call(t,e,1).length},goog.array.removeIf=function(t,e,o){return 0<=(e=goog.array.findIndex(t,e,o))&&(goog.array.removeAt(t,e),!0)},goog.array.removeAllIf=function(t,e,o){var n=0;return goog.array.forEachRight(t,function(r,i){e.call(o,r,i,t)&&goog.array.removeAt(t,i)&&n++}),n},goog.array.concat=function(t){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(t){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(t){var e=t.length;if(0<e){for(var o=Array(e),n=0;n<e;n++)o[n]=t[n];return o}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(t,e){for(var o=1;o<arguments.length;o++){var n=arguments[o];if(goog.isArrayLike(n)){var r=t.length||0,i=n.length||0;t.length=r+i;for(var s=0;s<i;s++)t[r+s]=n[s]}else t.push(n)}},goog.array.splice=function(t,e,o,n){return goog.asserts.assert(null!=t.length),Array.prototype.splice.apply(t,goog.array.slice(arguments,1))},goog.array.slice=function(t,e,o){return goog.asserts.assert(null!=t.length),2>=arguments.length?Array.prototype.slice.call(t,e):Array.prototype.slice.call(t,e,o)},goog.array.removeDuplicates=function(t,e,o){e=e||t;var n=function(t){return goog.isObject(t)?"o"+goog.getUid(t):(typeof t).charAt(0)+t};o=o||n,n={};for(var r=0,i=0;i<t.length;){var s=t[i++],a=o(s);Object.prototype.hasOwnProperty.call(n,a)||(n[a]=!0,e[r++]=s)}e.length=r},goog.array.binarySearch=function(t,e,o){return goog.array.binarySearch_(t,o||goog.array.defaultCompare,!1,e)},goog.array.binarySelect=function(t,e,o){return goog.array.binarySearch_(t,e,!0,void 0,o)},goog.array.binarySearch_=function(t,e,o,n,r){for(var i,s=0,a=t.length;s<a;){var l=s+a>>1,c=o?e.call(r,t[l],l,t):e(n,t[l]);0<c?s=l+1:(a=l,i=!c)}return i?s:~s},goog.array.sort=function(t,e){t.sort(e||goog.array.defaultCompare)},goog.array.stableSort=function(t,e){for(var o=Array(t.length),n=0;n<t.length;n++)o[n]={index:n,value:t[n]};var r=e||goog.array.defaultCompare;for(goog.array.sort(o,function(t,e){return r(t.value,e.value)||t.index-e.index}),n=0;n<t.length;n++)t[n]=o[n].value},goog.array.sortByKey=function(t,e,o){var n=o||goog.array.defaultCompare;goog.array.sort(t,function(t,o){return n(e(t),e(o))})},goog.array.sortObjectsByKey=function(t,e,o){goog.array.sortByKey(t,function(t){return t[e]},o)},goog.array.isSorted=function(t,e,o){e=e||goog.array.defaultCompare;for(var n=1;n<t.length;n++){var r=e(t[n-1],t[n]);if(0<r||0==r&&o)return!1}return!0},goog.array.equals=function(t,e,o){if(!goog.isArrayLike(t)||!goog.isArrayLike(e)||t.length!=e.length)return!1;var n=t.length;o=o||goog.array.defaultCompareEquality;for(var r=0;r<n;r++)if(!o(t[r],e[r]))return!1;return!0},goog.array.compare3=function(t,e,o){o=o||goog.array.defaultCompare;for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=o(t[r],e[r]);if(0!=i)return i}return goog.array.defaultCompare(t.length,e.length)},goog.array.defaultCompare=function(t,e){return t>e?1:t<e?-1:0},goog.array.inverseDefaultCompare=function(t,e){return-goog.array.defaultCompare(t,e)},goog.array.defaultCompareEquality=function(t,e){return t===e},goog.array.binaryInsert=function(t,e,o){return 0>(o=goog.array.binarySearch(t,e,o))&&(goog.array.insertAt(t,e,-(o+1)),!0)},goog.array.binaryRemove=function(t,e,o){return 0<=(e=goog.array.binarySearch(t,e,o))&&goog.array.removeAt(t,e)},goog.array.bucket=function(t,e,o){for(var n={},r=0;r<t.length;r++){var i=t[r],s=e.call(o,i,r,t);goog.isDef(s)&&(n[s]||(n[s]=[])).push(i)}return n},goog.array.toObject=function(t,e,o){var n={};return goog.array.forEach(t,function(r,i){n[e.call(o,r,i,t)]=r}),n},goog.array.range=function(t,e,o){var n=[],r=0,i=t;if(o=o||1,void 0!==e&&(r=t,i=e),0>o*(i-r))return[];if(0<o)for(t=r;t<i;t+=o)n.push(t);else for(t=r;t>i;t+=o)n.push(t);return n},goog.array.repeat=function(t,e){for(var o=[],n=0;n<e;n++)o[n]=t;return o},goog.array.flatten=function(t){for(var e=[],o=0;o<arguments.length;o++){var n=arguments[o];if(goog.isArray(n))for(var r=0;r<n.length;r+=8192){var i=goog.array.slice(n,r,r+8192);i=goog.array.flatten.apply(null,i);for(var s=0;s<i.length;s++)e.push(i[s])}else e.push(n)}return e},goog.array.rotate=function(t,e){return goog.asserts.assert(null!=t.length),t.length&&(e%=t.length,0<e?Array.prototype.unshift.apply(t,t.splice(-e,e)):0>e&&Array.prototype.push.apply(t,t.splice(0,-e))),t},goog.array.moveItem=function(t,e,o){goog.asserts.assert(0<=e&&e<t.length),goog.asserts.assert(0<=o&&o<t.length),e=Array.prototype.splice.call(t,e,1),Array.prototype.splice.call(t,o,0,e[0])},goog.array.zip=function(t){if(!arguments.length)return[];for(var e=[],o=arguments[0].length,n=1;n<arguments.length;n++)arguments[n].length<o&&(o=arguments[n].length);for(n=0;n<o;n++){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i][n]);e.push(r)}return e},goog.array.shuffle=function(t,e){for(var o=e||Math.random,n=t.length-1;0<n;n--){var r=Math.floor(o()*(n+1)),i=t[n];t[n]=t[r],t[r]=i}},goog.array.copyByIndex=function(t,e){var o=[];return goog.array.forEach(e,function(e){o.push(t[e])}),o},goog.array.concatMap=function(t,e,o){return goog.array.concat.apply([],goog.array.map(t,e,o))},goog.math={},goog.math.randomInt=function(t){return Math.floor(Math.random()*t)},goog.math.uniformRandom=function(t,e){return t+Math.random()*(e-t)},goog.math.clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},goog.math.modulo=function(t,e){var o=t%e;return 0>o*e?o+e:o},goog.math.lerp=function(t,e,o){return t+o*(e-t)},goog.math.nearlyEquals=function(t,e,o){return Math.abs(t-e)<=(o||1e-6)},goog.math.standardAngle=function(t){return goog.math.modulo(t,360)},goog.math.standardAngleInRadians=function(t){return goog.math.modulo(t,2*Math.PI)},goog.math.toRadians=function(t){return t*Math.PI/180},goog.math.toDegrees=function(t){return 180*t/Math.PI},goog.math.angleDx=function(t,e){return e*Math.cos(goog.math.toRadians(t))},goog.math.angleDy=function(t,e){return e*Math.sin(goog.math.toRadians(t))},goog.math.angle=function(t,e,o,n){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(n-e,o-t)))},goog.math.angleDifference=function(t,e){var o=goog.math.standardAngle(e)-goog.math.standardAngle(t);return 180<o?o-=360:-180>=o&&(o=360+o),o},goog.math.sign=function(t){return 0<t?1:0>t?-1:t},goog.math.longestCommonSubsequence=function(t,e,o,n){o=o||function(t,e){return t==e},n=n||function(e,o){return t[e]};for(var r=t.length,i=e.length,s=[],a=0;a<r+1;a++)s[a]=[],s[a][0]=0;for(var l=0;l<i+1;l++)s[0][l]=0;for(a=1;a<=r;a++)for(l=1;l<=i;l++)o(t[a-1],e[l-1])?s[a][l]=s[a-1][l-1]+1:s[a][l]=Math.max(s[a-1][l],s[a][l-1]);var c=[];for(a=r,l=i;0<a&&0<l;)o(t[a-1],e[l-1])?(c.unshift(n(a-1,l-1)),a--,l--):s[a-1][l]>s[a][l-1]?a--:l--;return c},goog.math.sum=function(t){return goog.array.reduce(arguments,function(t,e){return t+e},0)},goog.math.average=function(t){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.sampleVariance=function(t){var e=arguments.length;if(2>e)return 0;var o=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,function(t){return Math.pow(t-o,2)}))/(e-1)},goog.math.standardDeviation=function(t){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))},goog.math.isInt=function(t){return isFinite(t)&&0==t%1},goog.math.isFiniteNumber=function(t){return isFinite(t)},goog.math.isNegativeZero=function(t){return 0==t&&0>1/t},goog.math.log10Floor=function(t){if(0<t){var e=Math.round(Math.log(t)*Math.LOG10E);return e-(parseFloat("1e"+e)>t?1:0)}return 0==t?-1/0:NaN},goog.math.safeFloor=function(t,e){return goog.asserts.assert(!goog.isDef(e)||0<e),Math.floor(t+(e||2e-15))},goog.math.safeCeil=function(t,e){return goog.asserts.assert(!goog.isDef(e)||0<e),Math.ceil(t-(e||2e-15))},goog.math.Coordinate=function(t,e){this.x=goog.isDef(t)?t:0,this.y=goog.isDef(e)?e:0},goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)},goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),goog.math.Coordinate.prototype.equals=function(t){return t instanceof goog.math.Coordinate&&goog.math.Coordinate.equals(this,t)},goog.math.Coordinate.equals=function(t,e){return t==e||!(!t||!e)&&(t.x==e.x&&t.y==e.y)},goog.math.Coordinate.distance=function(t,e){var o=t.x-e.x,n=t.y-e.y;return Math.sqrt(o*o+n*n)},goog.math.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},goog.math.Coordinate.azimuth=function(t){return goog.math.angle(0,0,t.x,t.y)},goog.math.Coordinate.squaredDistance=function(t,e){var o=t.x-e.x,n=t.y-e.y;return o*o+n*n},goog.math.Coordinate.difference=function(t,e){return new goog.math.Coordinate(t.x-e.x,t.y-e.y)},goog.math.Coordinate.sum=function(t,e){return new goog.math.Coordinate(t.x+e.x,t.y+e.y)},goog.math.Coordinate.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},goog.math.Coordinate.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},goog.math.Coordinate.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},goog.math.Coordinate.prototype.translate=function(t,e){return t instanceof goog.math.Coordinate?(this.x+=t.x,this.y+=t.y):(this.x+=Number(t),goog.isNumber(e)&&(this.y+=e)),this},goog.math.Coordinate.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.x*=t,this.y*=o,this},goog.math.Coordinate.prototype.rotateRadians=function(t,e){var o=e||new goog.math.Coordinate(0,0),n=this.x,r=this.y,i=Math.cos(t),s=Math.sin(t);this.x=(n-o.x)*i-(r-o.y)*s+o.x,this.y=(n-o.x)*s+(r-o.y)*i+o.y},goog.math.Coordinate.prototype.rotateDegrees=function(t,e){this.rotateRadians(goog.math.toRadians(t),e)},goog.Thenable=function(){},goog.Thenable.prototype.then=function(t,e,o){},goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable",goog.Thenable.addImplementation=function(t){t.prototype.then=t.prototype.then,COMPILED?t.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0:t.prototype.$goog_Thenable=!0},goog.Thenable.isImplementedBy=function(t){if(!t)return!1;try{return COMPILED?!!t[goog.Thenable.IMPLEMENTED_BY_PROP]:!!t.$goog_Thenable}catch(t){return!1}},goog.async={},goog.async.FreeList=function(t,e,o){this.limit_=o,this.create_=t,this.reset_=e,this.occupants_=0,this.head_=null},goog.async.FreeList.prototype.get=function(){if(0<this.occupants_){this.occupants_--;var t=this.head_;this.head_=t.next,t.next=null}else t=this.create_();return t},goog.async.FreeList.prototype.put=function(t){this.reset_(t),this.occupants_<this.limit_&&(this.occupants_++,t.next=this.head_,this.head_=t)},goog.async.FreeList.prototype.occupants=function(){return this.occupants_},goog.async.WorkQueue=function(){this.workTail_=this.workHead_=null},goog.async.WorkQueue.DEFAULT_MAX_UNUSED=100,goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem},function(t){t.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED),goog.async.WorkQueue.prototype.add=function(t,e){var o=this.getUnusedItem_();o.set(t,e),this.workTail_?this.workTail_.next=o:(goog.asserts.assert(!this.workHead_),this.workHead_=o),this.workTail_=o},goog.async.WorkQueue.prototype.remove=function(){var t=null;return this.workHead_&&(t=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),t.next=null),t},goog.async.WorkQueue.prototype.returnUnused=function(t){goog.async.WorkQueue.freelist_.put(t)},goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()},goog.async.WorkItem=function(){this.next=this.scope=this.fn=null},goog.async.WorkItem.prototype.set=function(t,e){this.fn=t,this.scope=e,this.next=null},goog.async.WorkItem.prototype.reset=function(){this.next=this.scope=this.fn=null},goog.debug.entryPointRegistry={},goog.debug.EntryPointMonitor=function(){},goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(t){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=t,goog.debug.entryPointRegistry.monitorsMayExist_)for(var e=goog.debug.entryPointRegistry.monitors_,o=0;o<e.length;o++)t(goog.bind(e[o].wrap,e[o]))},goog.debug.entryPointRegistry.monitorAll=function(t){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var e=goog.bind(t.wrap,t),o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](e);goog.debug.entryPointRegistry.monitors_.push(t)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(t){var e=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(t==e[e.length-1],"Only the most recent monitor can be unwrapped."),t=goog.bind(t.unwrap,t);for(var o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](t);e.length--},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(t){this.tagName_=t},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT");goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.functions={},goog.functions.constant=function(t){return function(){return t}},goog.functions.FALSE=goog.functions.constant(!1),goog.functions.TRUE=goog.functions.constant(!0),goog.functions.NULL=goog.functions.constant(null),goog.functions.identity=function(t,e){return t},goog.functions.error=function(t){return function(){throw Error(t)}},goog.functions.fail=function(t){return function(){throw t}},goog.functions.lock=function(t,e){return e=e||0,function(){return t.apply(this,Array.prototype.slice.call(arguments,0,e))}},goog.functions.nth=function(t){return function(){return arguments[t]}},goog.functions.partialRight=function(t,e){var o=Array.prototype.slice.call(arguments,1);return function(){var e=Array.prototype.slice.call(arguments);return e.push.apply(e,o),t.apply(this,e)}},goog.functions.withReturnValue=function(t,e){return goog.functions.sequence(t,goog.functions.constant(e))},goog.functions.equalTo=function(t,e){return function(o){return e?t==o:t===o}},goog.functions.compose=function(t,e){var o=arguments,n=o.length;return function(){var t;n&&(t=o[n-1].apply(this,arguments));for(var e=n-2;0<=e;e--)t=o[e].call(this,t);return t}},goog.functions.sequence=function(t){var e=arguments,o=e.length;return function(){for(var t,n=0;n<o;n++)t=e[n].apply(this,arguments);return t}},goog.functions.and=function(t){var e=arguments,o=e.length;return function(){for(var t=0;t<o;t++)if(!e[t].apply(this,arguments))return!1;return!0}},goog.functions.or=function(t){var e=arguments,o=e.length;return function(){for(var t=0;t<o;t++)if(e[t].apply(this,arguments))return!0;return!1}},goog.functions.not=function(t){return function(){return!t.apply(this,arguments)}},goog.functions.create=function(t,e){var o=function(){};return o.prototype=t.prototype,o=new o,t.apply(o,Array.prototype.slice.call(arguments,1)),o},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(t){var e,o=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(o||(e=t(),o=!0),e):t()}},goog.functions.once=function(t){var e=t;return function(){if(e){var t=e;e=null,t()}}},goog.functions.debounce=function(t,e,o){var n=0;return function(r){goog.global.clearTimeout(n);var i=arguments;n=goog.global.setTimeout(function(){t.apply(o,i)},e)}},goog.functions.throttle=function(t,e,o){var n=0,r=!1,i=[],s=function(){n=0,r&&(r=!1,a())},a=function(){n=goog.global.setTimeout(s,e),t.apply(o,i)};return function(t){i=arguments,n?r=!0:a()}},goog.functions.rateLimit=function(t,e,o){var n=0,r=function(){n=0};return function(i){n||(n=goog.global.setTimeout(r,e),t.apply(o,arguments))}},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var t=goog.labs.userAgent.util.getNavigator_();return t&&(t=t.userAgent)?t:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(t){goog.labs.userAgent.util.userAgent_=t||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(t){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(e,t)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(t){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(e,t)},goog.labs.userAgent.util.extractVersionTuples=function(t){for(var e,o=RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),n=[];e=o.exec(t);)n.push([e[1],e[2],e[3]||void 0]);return n},goog.object={},goog.object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e},goog.object.forEach=function(t,e,o){for(var n in t)e.call(o,t[n],n,t)},goog.object.filter=function(t,e,o){var n,r={};for(n in t)e.call(o,t[n],n,t)&&(r[n]=t[n]);return r},goog.object.map=function(t,e,o){var n,r={};for(n in t)r[n]=e.call(o,t[n],n,t);return r},goog.object.some=function(t,e,o){for(var n in t)if(e.call(o,t[n],n,t))return!0;return!1},goog.object.every=function(t,e,o){for(var n in t)if(!e.call(o,t[n],n,t))return!1;return!0},goog.object.getCount=function(t){var e,o=0;for(e in t)o++;return o},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,o=[],n=0;for(e in t)o[n++]=t[e];return o},goog.object.getKeys=function(t){var e,o=[],n=0;for(e in t)o[n++]=e;return o},goog.object.getValueByKeys=function(t,e){var o=goog.isArrayLike(e),n=o?e:arguments;for(o=o?0:1;o<n.length&&(t=t[n[o]],goog.isDef(t));o++);return t},goog.object.containsKey=function(t,e){return null!==t&&e in t},goog.object.containsValue=function(t,e){for(var o in t)if(t[o]==e)return!0;return!1},goog.object.findKey=function(t,e,o){for(var n in t)if(e.call(o,t[n],n,t))return n},goog.object.findValue=function(t,e,o){return(e=goog.object.findKey(t,e,o))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var o;return(o=e in t)&&delete t[e],o},goog.object.add=function(t,e,o){if(null!==t&&e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,o)},goog.object.get=function(t,e,o){return null!==t&&e in t?t[e]:o},goog.object.set=function(t,e,o){t[e]=o},goog.object.setIfUndefined=function(t,e,o){return e in t?t[e]:t[e]=o},goog.object.setWithReturnValueIfNotSet=function(t,e,o){return e in t?t[e]:(o=o(),t[e]=o)},goog.object.equals=function(t,e){for(var o in t)if(!(o in e)||t[o]!==e[o])return!1;for(o in e)if(!(o in t))return!1;return!0},goog.object.clone=function(t){var e,o={};for(e in t)o[e]=t[e];return o},goog.object.unsafeClone=function(t){var e=goog.typeOf(t);if("object"==e||"array"==e){if(goog.isFunction(t.clone))return t.clone();e="array"==e?[]:{};for(var o in t)e[o]=goog.object.unsafeClone(t[o]);return e}return t},goog.object.transpose=function(t){var e,o={};for(e in t)o[t[e]]=e;return o},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t,e){for(var o,n,r=1;r<arguments.length;r++){n=arguments[r];for(o in n)t[o]=n[o];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)o=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}},goog.object.create=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var o={},n=0;n<e;n+=2)o[arguments[n]]=arguments[n+1];return o},goog.object.createSet=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var o={},n=0;n<e;n++)o[arguments[n]]=!0;return o},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.object.getAllPropertyNames=function(t,e,o){if(!t)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(t);for(var n={};t&&(t!==Object.prototype||e)&&(t!==Function.prototype||o);){for(var r=Object.getOwnPropertyNames(t),i=0;i<r.length;i++)n[r[i]]=!0;t=Object.getPrototypeOf(t)}return goog.object.getKeys(n)},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function t(t){return t=goog.array.find(t,n),o[t]||""}var e=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(e);e=goog.labs.userAgent.util.extractVersionTuples(e);var o={};goog.array.forEach(e,function(t){o[t[0]]=t[1]});var n=goog.partial(goog.object.containsKey,o);return goog.labs.userAgent.browser.isOpera()?t(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?t(["Edge"]):goog.labs.userAgent.browser.isChrome()?t(["Chrome","CriOS"]):(e=e[2])&&e[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(t){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),t)},goog.labs.userAgent.browser.getIEVersion_=function(t){var e=/rv: *([\d\.]*)/.exec(t);if(e&&e[1])return e[1];e="";var o=/MSIE +([\d\.]+)/.exec(t);if(o&&o[1])if(t=/Trident\/(\d.\d)/.exec(t),"7.0"==o[1])if(t&&t[1])switch(t[1]){case"4.0":e="8.0";break;case"5.0":e="9.0";break;case"6.0":e="10.0";break;case"7.0":e="11.0"}else e="7.0";else e=o[1];return e},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var t=goog.labs.userAgent.util.getUserAgent();if(t){t=goog.labs.userAgent.util.extractVersionTuples(t);var e=goog.labs.userAgent.engine.getEngineTuple_(t);if(e)return"Gecko"==e[0]?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):e[1];t=t[0];var o;if(t&&(o=t[2])&&(o=/Trident\/([^\s;]+)/.exec(o)))return o[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(t){if(!goog.labs.userAgent.engine.isEdge())return t[1];for(var e=0;e<t.length;e++){var o=t[e];if("Edge"==o[0])return o}},goog.labs.userAgent.engine.isVersionOrHigher=function(t){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),t)},goog.labs.userAgent.engine.getVersionForKey_=function(t,e){var o=goog.array.find(t,function(t){return e==t[0]});return o&&o[1]||""},goog.async.throwException=function(t){goog.global.setTimeout(function(){throw t},0)},goog.async.nextTick=function(t,e,o){var n=t;e&&(n=goog.bind(t,e)),n=goog.async.nextTick.wrapCallback_(n),goog.isFunction(goog.global.setImmediate)&&(o||goog.async.nextTick.useSetImmediate_())?goog.global.setImmediate(n):(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(n))},goog.async.nextTick.useSetImmediate_=function(){return!(goog.global.Window&&goog.global.Window.prototype&&!goog.labs.userAgent.browser.isEdge()&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate)},goog.async.nextTick.getSetImmediateEmulator_=function(){var t=goog.global.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.write(""),t.close();var o="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=goog.bind(function(t){"*"!=n&&t.origin!=n||t.data!=o||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(o,n)}}}),void 0!==t&&!goog.labs.userAgent.browser.isIE()){var e=new t,o={},n=o;return e.port1.onmessage=function(){if(goog.isDef(o.next)){o=o.next;var t=o.cb;o.cb=null,t()}},function(t){n.next={cb:t},n=n.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){goog.global.setTimeout(t,0)}},goog.async.nextTick.wrapCallback_=goog.functions.identity,goog.debug.entryPointRegistry.register(function(t){goog.async.nextTick.wrapCallback_=t}),goog.async.run=function(t,e){goog.async.run.schedule_||goog.async.run.initializeRunner_(),goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0),goog.async.run.workQueue_.add(t,e)},goog.async.run.initializeRunner_=function(){if(-1!=String(goog.global.Promise).indexOf("[native code]")){var t=goog.global.Promise.resolve(void 0);goog.async.run.schedule_=function(){t.then(goog.async.run.processWorkQueue)}}else goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}},goog.async.run.forceNextTick=function(t){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue),t&&t(goog.async.run.processWorkQueue)}},goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue,goog.DEBUG&&(goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue});goog.async.run.processWorkQueue=function(){for(var t;t=goog.async.run.workQueue_.remove();){try{t.fn.call(t.scope)}catch(t){goog.async.throwException(t)}goog.async.run.workQueue_.returnUnused(t)}goog.async.run.workQueueScheduled_=!1},goog.promise={},goog.promise.Resolver=function(){},goog.Promise=function(t,e){if(this.state_=goog.Promise.State_.PENDING,this.result_=void 0,this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null,this.executing_=!1,0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1),goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0),t!=goog.nullFunction)try{var o=this;t.call(e,function(t){o.resolve_(goog.Promise.State_.FULFILLED,t)},function(t){if(goog.DEBUG&&!(t instanceof goog.Promise.CancellationError))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}o.resolve_(goog.Promise.State_.REJECTED,t)})}catch(t){this.resolve_(goog.Promise.State_.REJECTED,t)}},goog.Promise.LONG_STACK_TRACES=!1,goog.Promise.UNHANDLED_REJECTION_DELAY=0,goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.DEFAULT_MAX_UNUSED=100,goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(t){t.reset()},goog.Promise.DEFAULT_MAX_UNUSED),goog.Promise.getCallbackEntry_=function(t,e,o){var n=goog.Promise.freelist_.get();return n.onFulfilled=t,n.onRejected=e,n.context=o,n},goog.Promise.returnEntry_=function(t){goog.Promise.freelist_.put(t)},goog.Promise.resolve=function(t){if(t instanceof goog.Promise)return t;var e=new goog.Promise(goog.nullFunction);return e.resolve_(goog.Promise.State_.FULFILLED,t),e},goog.Promise.reject=function(t){return new goog.Promise(function(e,o){o(t)})},goog.Promise.resolveThen_=function(t,e,o){goog.Promise.maybeThen_(t,e,o,null)||goog.async.run(goog.partial(e,t))},goog.Promise.race=function(t){return new goog.Promise(function(e,o){t.length||e(void 0);for(var n,r=0;r<t.length;r++)n=t[r],goog.Promise.resolveThen_(n,e,o)})},goog.Promise.all=function(t){return new goog.Promise(function(e,o){var n=t.length,r=[];if(n)for(var i,s=function(t,o){n--,r[t]=o,0==n&&e(r)},a=function(t){o(t)},l=0;l<t.length;l++)i=t[l],goog.Promise.resolveThen_(i,goog.partial(s,l),a);else e(r)})},goog.Promise.allSettled=function(t){return new goog.Promise(function(e,o){var n=t.length,r=[];if(n)for(var i,s=function(t,o,i){n--,r[t]=o?{fulfilled:!0,value:i}:{fulfilled:!1,reason:i},0==n&&e(r)},a=0;a<t.length;a++)i=t[a],goog.Promise.resolveThen_(i,goog.partial(s,a,!0),goog.partial(s,a,!1));else e(r)})},goog.Promise.firstFulfilled=function(t){return new goog.Promise(function(e,o){var n=t.length,r=[];if(n)for(var i,s=function(t){e(t)},a=function(t,e){n--,r[t]=e,0==n&&o(r)},l=0;l<t.length;l++)i=t[l],goog.Promise.resolveThen_(i,s,goog.partial(a,l));else e(void 0)})},goog.Promise.withResolver=function(){var t,e,o=new goog.Promise(function(o,n){t=o,e=n});return new goog.Promise.Resolver_(o,t,e)},goog.Promise.prototype.then=function(t,e,o){return null!=t&&goog.asserts.assertFunction(t,"opt_onFulfilled should be a function."),null!=e&&goog.asserts.assertFunction(e,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addChildPromise_(goog.isFunction(t)?t:null,goog.isFunction(e)?e:null,o)},goog.Thenable.addImplementation(goog.Promise),goog.Promise.prototype.thenVoid=function(t,e,o){null!=t&&goog.asserts.assertFunction(t,"opt_onFulfilled should be a function."),null!=e&&goog.asserts.assertFunction(e,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addCallbackEntry_(goog.Promise.getCallbackEntry_(t||goog.nullFunction,e||null,o))},goog.Promise.prototype.thenAlways=function(t,e){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenAlways"));var o=goog.Promise.getCallbackEntry_(t,t,e);return o.always=!0,this.addCallbackEntry_(o),this},goog.Promise.prototype.thenCatch=function(t,e){return goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch")),this.addChildPromise_(null,t,e)},goog.Promise.prototype.cancel=function(t){this.state_==goog.Promise.State_.PENDING&&goog.async.run(function(){var e=new goog.Promise.CancellationError(t);this.cancelInternal_(e)},this)},goog.Promise.prototype.cancelInternal_=function(t){this.state_==goog.Promise.State_.PENDING&&(this.parent_?(this.parent_.cancelChild_(this,t),this.parent_=null):this.resolve_(goog.Promise.State_.REJECTED,t))},goog.Promise.prototype.cancelChild_=function(t,e){if(this.callbackEntries_){for(var o=0,n=null,r=null,i=this.callbackEntries_;i&&(i.always||(o++,i.child==t&&(n=i),!(n&&1<o)));i=i.next)n||(r=i);n&&(this.state_==goog.Promise.State_.PENDING&&1==o?this.cancelInternal_(e):(r?this.removeEntryAfter_(r):this.popEntry_(),this.executeCallback_(n,goog.Promise.State_.REJECTED,e)))}},goog.Promise.prototype.addCallbackEntry_=function(t){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_(),this.queueEntry_(t)},goog.Promise.prototype.addChildPromise_=function(t,e,o){var n=goog.Promise.getCallbackEntry_(null,null,null);return n.child=new goog.Promise(function(r,i){n.onFulfilled=t?function(e){try{var n=t.call(o,e);r(n)}catch(t){i(t)}}:r,n.onRejected=e?function(t){try{var n=e.call(o,t);!goog.isDef(n)&&t instanceof goog.Promise.CancellationError?i(t):r(n)}catch(t){i(t)}}:i}),n.child.parent_=this,this.addCallbackEntry_(n),n.child},goog.Promise.prototype.unblockAndFulfill_=function(t){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.FULFILLED,t)},goog.Promise.prototype.unblockAndReject_=function(t){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.REJECTED,t)},goog.Promise.prototype.resolve_=function(t,e){this.state_==goog.Promise.State_.PENDING&&(this===e&&(t=goog.Promise.State_.REJECTED,e=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(e,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=e,this.state_=t,this.parent_=null,this.scheduleCallbacks_(),t!=goog.Promise.State_.REJECTED||e instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,e)))},goog.Promise.maybeThen_=function(t,e,o,n){if(t instanceof goog.Promise)return t.thenVoid(e,o,n),!0;if(goog.Thenable.isImplementedBy(t))return t.then(e,o,n),!0;if(goog.isObject(t))try{var r=t.then;if(goog.isFunction(r))return goog.Promise.tryThen_(t,r,e,o,n),!0}catch(t){return o.call(n,t),!0}return!1},goog.Promise.tryThen_=function(t,e,o,n,r){var i=!1,s=function(t){i||(i=!0,o.call(r,t))},a=function(t){i||(i=!0,n.call(r,t))};try{e.call(t,s,a)}catch(t){a(t)}},goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))},goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_},goog.Promise.prototype.queueEntry_=function(t){goog.asserts.assert(null!=t.onFulfilled),this.callbackEntriesTail_?this.callbackEntriesTail_.next=t:this.callbackEntries_=t,this.callbackEntriesTail_=t},goog.Promise.prototype.popEntry_=function(){var t=null;return this.callbackEntries_&&(t=this.callbackEntries_,this.callbackEntries_=t.next,t.next=null),this.callbackEntries_||(this.callbackEntriesTail_=null),null!=t&&goog.asserts.assert(null!=t.onFulfilled),t},goog.Promise.prototype.removeEntryAfter_=function(t){goog.asserts.assert(this.callbackEntries_),goog.asserts.assert(null!=t),t.next==this.callbackEntriesTail_&&(this.callbackEntriesTail_=t),t.next=t.next.next},goog.Promise.prototype.executeCallbacks_=function(){for(var t;t=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(t,this.state_,this.result_);this.executing_=!1},goog.Promise.prototype.executeCallback_=function(t,e,o){if(e==goog.Promise.State_.REJECTED&&t.onRejected&&!t.always&&this.removeUnhandledRejection_(),t.child)t.child.parent_=null,goog.Promise.invokeCallback_(t,e,o);else try{t.always?t.onFulfilled.call(t.context):goog.Promise.invokeCallback_(t,e,o)}catch(t){goog.Promise.handleRejection_.call(null,t)}goog.Promise.returnEntry_(t)},goog.Promise.invokeCallback_=function(t,e,o){e==goog.Promise.State_.FULFILLED?t.onFulfilled.call(t.context,o):t.onRejected&&t.onRejected.call(t.context,o)},goog.Promise.prototype.addStackTrace_=function(t){if(goog.Promise.LONG_STACK_TRACES&&goog.isString(t.stack)){var e=t.stack.split("\n",4)[3];t=t.message,t+=Array(11-t.length).join(" "),this.stack_.push(t+e)}},goog.Promise.prototype.appendLongStack_=function(t){if(goog.Promise.LONG_STACK_TRACES&&t&&goog.isString(t.stack)&&this.stack_.length){for(var e=["Promise trace:"],o=this;o;o=o.parent_){for(var n=this.currentStep_;0<=n;n--)e.push(o.stack_[n]);e.push("Value: ["+(o.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(o.result_)+">")}t.stack+="\n\n"+e.join("\n")}},goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var t=this;t&&t.unhandledRejectionId_;t=t.parent_)goog.global.clearTimeout(t.unhandledRejectionId_),t.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(t=this;t&&t.hadUnhandledRejection_;t=t.parent_)t.hadUnhandledRejection_=!1},goog.Promise.addUnhandledRejection_=function(t,e){0<goog.Promise.UNHANDLED_REJECTION_DELAY?t.unhandledRejectionId_=goog.global.setTimeout(function(){t.appendLongStack_(e),goog.Promise.handleRejection_.call(null,e)},goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(t.hadUnhandledRejection_=!0,goog.async.run(function(){t.hadUnhandledRejection_&&(t.appendLongStack_(e),goog.Promise.handleRejection_.call(null,e))}))},goog.Promise.handleRejection_=goog.async.throwException,goog.Promise.setUnhandledRejectionHandler=function(t){goog.Promise.handleRejection_=t},goog.Promise.CancellationError=function(t){goog.debug.Error.call(this,t)},goog.inherits(goog.Promise.CancellationError,goog.debug.Error),goog.Promise.CancellationError.prototype.name="cancel",goog.Promise.Resolver_=function(t,e,o){this.promise=t,this.resolve=e,this.reject=o},goog.disposable={},goog.disposable.IDisposable=function(){},goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod,goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod,goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.Disposable.MONITORING_MODE=0,goog.Disposable.INCLUDE_STACK_ON_CREATION=!0,goog.Disposable.instances_={},goog.Disposable.getUndisposedObjects=function(){var t,e=[];for(t in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(t)&&e.push(goog.Disposable.instances_[Number(t)]);return e},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var t=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(t))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[t]}},goog.Disposable.prototype.registerDisposable=function(t){this.addOnDisposeCallback(goog.partial(goog.dispose,t))},goog.Disposable.prototype.addOnDisposeCallback=function(t,e){this.disposed_?goog.isDef(e)?t.call(e):t():(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.isDef(e)?goog.bind(t,e):t))},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(t){return!(!t||"function"!=typeof t.isDisposed)&&t.isDisposed()},goog.dispose=function(t){t&&"function"==typeof t.dispose&&t.dispose()},goog.disposeAll=function(t){for(var e=0,o=arguments.length;e<o;++e){var n=arguments[e];goog.isArrayLike(n)?goog.disposeAll.apply(null,n):goog.dispose(n)}},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.getVersion=function(){var t=goog.labs.userAgent.util.getUserAgent(),e="";return goog.labs.userAgent.platform.isWindows()?(e=/Windows (?:NT|Phone) ([0-9.]+)/,e=(t=e.exec(t))?t[1]:"0.0"):goog.labs.userAgent.platform.isIos()?(e=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,e=(t=e.exec(t))&&t[1].replace(/_/g,".")):goog.labs.userAgent.platform.isMacintosh()?(e=/Mac OS X ([0-9_.]+)/,e=(t=e.exec(t))?t[1].replace(/_/g,"."):"10"):goog.labs.userAgent.platform.isAndroid()?(e=/Android\s+([^\);]+)(\)|;)/,e=(t=e.exec(t))&&t[1]):goog.labs.userAgent.platform.isChromeOS()&&(e=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,e=(t=e.exec(t))&&t[1]),e||""},goog.labs.userAgent.platform.isVersionOrHigher=function(t){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),t)},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.objectProperty=function(t,e){return t},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch(t){}return!1},goog.reflect.cache=function(t,e,o,n){return n=n?n(e):e,Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=o(e)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var t=goog.userAgent.getNavigator();return t&&t.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var t=goog.userAgent.getNavigator();return!!t&&goog.string.contains(t.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.determineVersion_=function(){var t="",e=goog.userAgent.getVersionRegexResult_();return e&&(t=e?e[1]:""),goog.userAgent.IE&&null!=(e=goog.userAgent.getDocumentMode_())&&e>parseFloat(t)?String(e):t},goog.userAgent.getVersionRegexResult_=function(){var t=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv\:([^\);]+)(\)|;)/.exec(t):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(t):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(t):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(t):void 0},goog.userAgent.getDocumentMode_=function(){var t=goog.global.document;return t?t.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(t,e){return goog.string.compareVersions(t,e)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(t){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,t,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,t)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(t){return Number(goog.userAgent.DOCUMENT_MODE)>=t},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var t=goog.global.document,e=goog.userAgent.getDocumentMode_();if(t&&goog.userAgent.IE)return e||("CSS1Compat"==t.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.events={},$jscomp.scope.purify=function(t){return t()},goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints),PASSIVE_EVENTS:(0,$jscomp.scope.purify)(function(){if(!goog.global.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return goog.global.addEventListener("test",goog.nullFunction,e),goog.global.removeEventListener("test",goog.nullFunction,e),t})},goog.events.EventId=function(t){this.id=t},goog.events.EventId.prototype.toString=function(){return this.id},goog.events.Event=function(t,e){this.type=t instanceof goog.events.EventId?String(t):t,this.currentTarget=this.target=e,this.defaultPrevented=this.propagationStopped_=!1,this.returnValue_=!0},goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(t){t.stopPropagation()},goog.events.Event.preventDefault=function(t){t.preventDefault()},goog.events.getVendorPrefixedName_=function(t){return goog.userAgent.WEBKIT?"webkit"+t:goog.userAgent.OPERA?"o"+t.toLowerCase():t.toLowerCase()},goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SELECTIONCHANGE:"selectionchange",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DEVICEMOTION:"devicemotion",DEVICEORIENTATION:"deviceorientation",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",DURATIONCHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",LOADEDDATA:"loadeddata",LOADEDMETADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",RATECHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",WAITING:"waiting",SOURCEOPEN:"sourceopen",SOURCEENDED:"sourceended",SOURCECLOSED:"sourceclosed",ABORT:"abort",UPDATE:"update",UPDATESTART:"updatestart",UPDATEEND:"updateend",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",INSTALL:"install",ACTIVATE:"activate",FETCH:"fetch",FOREIGNFETCH:"foreignfetch",MESSAGEERROR:"messageerror",STATECHANGE:"statechange",UPDATEFOUND:"updatefound",CONTROLLERCHANGE:"controllerchange",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:goog.userAgent.IE?"textinput":"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",BEFOREINPUT:"beforeinput",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint"},goog.events.BrowserEvent=function(t,e){goog.events.Event.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.platformModifierKey=!1,this.event_=null,t&&this.init(t,e)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.IEButtonMap=[1,4,2],goog.events.BrowserEvent.prototype.init=function(t,e){var o=this.type=t.type,n=t.changedTouches?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.currentTarget=e;var r=t.relatedTarget;r?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(r,"nodeName")||(r=null)):o==goog.events.EventType.MOUSEOVER?r=t.fromElement:o==goog.events.EventType.MOUSEOUT&&(r=t.toElement),this.relatedTarget=r,goog.isNull(n)?(this.offsetX=goog.userAgent.WEBKIT||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==o?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.platformModifierKey=goog.userAgent.MAC?t.metaKey:t.ctrlKey,this.state=t.state,this.event_=t,t.defaultPrevented&&this.preventDefault()},goog.events.BrowserEvent.prototype.isButton=function(t){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==t:"click"==this.type?t==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[t])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var t=this.event_;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.events.Listenable=function(){},goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0),goog.events.Listenable.addImplementation=function(t){t.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0},goog.events.Listenable.isImplementedBy=function(t){return!(!t||!t[goog.events.Listenable.IMPLEMENTED_BY_PROP])},goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.Listener=function(t,e,o,n,r,i){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack),this.listener=t,this.proxy=e,this.src=o,this.type=n,this.capture=!!r,this.handler=i,this.key=goog.events.ListenableKey.reserveKey(),this.removed=this.callOnce=!1},goog.events.Listener.ENABLE_MONITORING=!1,goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0,this.handler=this.src=this.proxy=this.listener=null},goog.events.ListenerMap=function(t){this.src=t,this.listeners={},this.typeCount_=0},goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_},goog.events.ListenerMap.prototype.getListenerCount=function(){var t,e=0;for(t in this.listeners)e+=this.listeners[t].length;return e},goog.events.ListenerMap.prototype.add=function(t,e,o,n,r){var i=t.toString();(t=this.listeners[i])||(t=this.listeners[i]=[],this.typeCount_++);var s=goog.events.ListenerMap.findListenerIndex_(t,e,n,r);return-1<s?(e=t[s],o||(e.callOnce=!1)):(e=new goog.events.Listener(e,null,this.src,i,!!n,r),e.callOnce=o,t.push(e)),e},goog.events.ListenerMap.prototype.remove=function(t,e,o,n){if(!((t=t.toString())in this.listeners))return!1;var r=this.listeners[t];return-1<(e=goog.events.ListenerMap.findListenerIndex_(r,e,o,n))&&(r[e].markAsRemoved(),goog.array.removeAt(r,e),0==r.length&&(delete this.listeners[t],this.typeCount_--),!0)},goog.events.ListenerMap.prototype.removeByKey=function(t){var e=t.type;if(!(e in this.listeners))return!1;var o=goog.array.remove(this.listeners[e],t);return o&&(t.markAsRemoved(),0==this.listeners[e].length&&(delete this.listeners[e],this.typeCount_--)),o},goog.events.ListenerMap.prototype.removeAll=function(t){t=t&&t.toString();var e,o=0;for(e in this.listeners)if(!t||e==t){for(var n=this.listeners[e],r=0;r<n.length;r++)++o,n[r].markAsRemoved();delete this.listeners[e],this.typeCount_--}return o},goog.events.ListenerMap.prototype.getListeners=function(t,e){var o=this.listeners[t.toString()],n=[];if(o)for(var r=0;r<o.length;++r){var i=o[r];i.capture==e&&n.push(i)}return n},goog.events.ListenerMap.prototype.getListener=function(t,e,o,n){t=this.listeners[t.toString()];var r=-1;return t&&(r=goog.events.ListenerMap.findListenerIndex_(t,e,o,n)),-1<r?t[r]:null},goog.events.ListenerMap.prototype.hasListener=function(t,e){var o=goog.isDef(t),n=o?t.toString():"",r=goog.isDef(e);return goog.object.some(this.listeners,function(t,i){for(var s=0;s<t.length;++s)if(!(o&&t[s].type!=n||r&&t[s].capture!=e))return!0;return!1})},goog.events.ListenerMap.findListenerIndex_=function(t,e,o,n){for(var r=0;r<t.length;++r){var i=t[r];if(!i.removed&&i.listener==e&&i.capture==!!o&&i.handler==n)return r}return-1},goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0),goog.events.onString_="on",goog.events.onStringMap_={},goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2},goog.events.CAPTURE_SIMULATION_MODE=2,goog.events.listenerCountEstimate_=0,goog.events.listen=function(t,e,o,n,r){if(n&&n.once)return goog.events.listenOnce(t,e,o,n,r);if(goog.isArray(e)){for(var i=0;i<e.length;i++)goog.events.listen(t,e[i],o,n,r);return null}return o=goog.events.wrapListener(o),goog.events.Listenable.isImplementedBy(t)?(n=goog.isObject(n)?!!n.capture:!!n,t.listen(e,o,n,r)):goog.events.listen_(t,e,o,!1,n,r)},goog.events.listen_=function(t,e,o,n,r,i){if(!e)throw Error("Invalid event type");var s=goog.isObject(r)?!!r.capture:!!r;if(s&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var a=goog.events.getListenerMap_(t);if(a||(t[goog.events.LISTENER_MAP_PROP_]=a=new goog.events.ListenerMap(t)),o=a.add(e,o,n,s,i),o.proxy)return o;if(n=goog.events.getProxy(),o.proxy=n,n.src=t,n.listener=o,t.addEventListener)goog.events.BrowserFeature.PASSIVE_EVENTS||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),n,r);else{if(!t.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");t.attachEvent(goog.events.getOnString_(e.toString()),n)}return goog.events.listenerCountEstimate_++,o},goog.events.getProxy=function(){var t=goog.events.handleBrowserEvent_,e=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(o){return t.call(e.src,e.listener,o)}:function(o){if(!(o=t.call(e.src,e.listener,o)))return o};return e},goog.events.listenOnce=function(t,e,o,n,r){if(goog.isArray(e)){for(var i=0;i<e.length;i++)goog.events.listenOnce(t,e[i],o,n,r);return null}return o=goog.events.wrapListener(o),goog.events.Listenable.isImplementedBy(t)?(n=goog.isObject(n)?!!n.capture:!!n,t.listenOnce(e,o,n,r)):goog.events.listen_(t,e,o,!0,n,r)};goog.events.listenWithWrapper=function(t,e,o,n,r){e.listen(t,o,n,r)},goog.events.unlisten=function(t,e,o,n,r){if(goog.isArray(e)){for(var i=0;i<e.length;i++)goog.events.unlisten(t,e[i],o,n,r);return null}return n=goog.isObject(n)?!!n.capture:!!n,o=goog.events.wrapListener(o),goog.events.Listenable.isImplementedBy(t)?t.unlisten(e,o,n,r):!!t&&(!(!(t=goog.events.getListenerMap_(t))||!(e=t.getListener(e,o,n,r)))&&goog.events.unlistenByKey(e))},goog.events.unlistenByKey=function(t){if(goog.isNumber(t)||!t||t.removed)return!1;var e=t.src;if(goog.events.Listenable.isImplementedBy(e))return e.unlistenByKey(t);var o=t.type,n=t.proxy;return e.removeEventListener?e.removeEventListener(o,n,t.capture):e.detachEvent&&e.detachEvent(goog.events.getOnString_(o),n),goog.events.listenerCountEstimate_--,(o=goog.events.getListenerMap_(e))?(o.removeByKey(t),0==o.getTypeCount()&&(o.src=null,e[goog.events.LISTENER_MAP_PROP_]=null)):t.markAsRemoved(),!0},goog.events.unlistenWithWrapper=function(t,e,o,n,r){e.unlisten(t,o,n,r)},goog.events.removeAll=function(t,e){if(!t)return 0;if(goog.events.Listenable.isImplementedBy(t))return t.removeAllListeners(e);var o=goog.events.getListenerMap_(t);if(!o)return 0;var n,r=0,i=e&&e.toString();for(n in o.listeners)if(!i||n==i)for(var s=o.listeners[n].concat(),a=0;a<s.length;++a)goog.events.unlistenByKey(s[a])&&++r;return r},goog.events.getListeners=function(t,e,o){return goog.events.Listenable.isImplementedBy(t)?t.getListeners(e,o):t&&(t=goog.events.getListenerMap_(t))?t.getListeners(e,o):[]},goog.events.getListener=function(t,e,o,n,r){return o=goog.events.wrapListener(o),n=!!n,goog.events.Listenable.isImplementedBy(t)?t.getListener(e,o,n,r):t&&(t=goog.events.getListenerMap_(t))?t.getListener(e,o,n,r):null},goog.events.hasListener=function(t,e,o){return goog.events.Listenable.isImplementedBy(t)?t.hasListener(e,o):!!(t=goog.events.getListenerMap_(t))&&t.hasListener(e,o)},goog.events.expose=function(t){var e,o=[];for(e in t)t[e]&&t[e].id?o.push(e+" = "+t[e]+" ("+t[e].id+")"):o.push(e+" = "+t[e]);return o.join("\n")},goog.events.getOnString_=function(t){return t in goog.events.onStringMap_?goog.events.onStringMap_[t]:goog.events.onStringMap_[t]=goog.events.onString_+t},goog.events.fireListeners=function(t,e,o,n){return goog.events.Listenable.isImplementedBy(t)?t.fireListeners(e,o,n):goog.events.fireListeners_(t,e,o,n)},goog.events.fireListeners_=function(t,e,o,n){var r=!0;if((t=goog.events.getListenerMap_(t))&&(e=t.listeners[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var i=e[t];i&&i.capture==o&&!i.removed&&(i=goog.events.fireListener(i,n),r=r&&!1!==i)}return r},goog.events.fireListener=function(t,e){var o=t.listener,n=t.handler||t.src;return t.callOnce&&goog.events.unlistenByKey(t),o.call(n,e)},goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_},goog.events.dispatchEvent=function(t,e){return goog.asserts.assert(goog.events.Listenable.isImplementedBy(t),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),t.dispatchEvent(e)},goog.events.protectBrowserEventEntryPoint=function(t){goog.events.handleBrowserEvent_=t.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(t,e){var o;if(t.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var n=e||goog.getObjectByName("window.event"),r=new goog.events.BrowserEvent(n,this),i=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(n)){for(goog.events.markIeEvent_(n),n=[],o=r.currentTarget;o;o=o.parentNode)n.push(o);for(var s=t.type,a=n.length-1;!r.propagationStopped_&&0<=a;a--)r.currentTarget=n[a],o=goog.events.fireListeners_(n[a],s,!0,r),i=i&&o;for(a=0;!r.propagationStopped_&&a<n.length;a++)r.currentTarget=n[a],o=goog.events.fireListeners_(n[a],s,!1,r),i=i&&o}}else i=goog.events.fireListener(t,r);return i}return goog.events.fireListener(t,new goog.events.BrowserEvent(e,this))},goog.events.markIeEvent_=function(t){var e=!1;if(0==t.keyCode)try{return void(t.keyCode=-1)}catch(t){e=!0}(e||void 0==t.returnValue)&&(t.returnValue=!0)},goog.events.isMarkedIeEvent_=function(t){return 0>t.keyCode||void 0!=t.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(t){return t+"_"+goog.events.uniqueIdCounter_++},goog.events.getListenerMap_=function(t){return t=t[goog.events.LISTENER_MAP_PROP_],t instanceof goog.events.ListenerMap?t:null},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener=function(t){return goog.asserts.assert(t,"Listener can not be null."),goog.isFunction(t)?t:(goog.asserts.assert(t.handleEvent,"An object listener must have handleEvent method."),t[goog.events.LISTENER_WRAPPER_PROP_]||(t[goog.events.LISTENER_WRAPPER_PROP_]=function(e){return t.handleEvent(e)}),t[goog.events.LISTENER_WRAPPER_PROP_])},goog.debug.entryPointRegistry.register(function(t){goog.events.handleBrowserEvent_=t(goog.events.handleBrowserEvent_)}),goog.events.EventTarget=function(){goog.Disposable.call(this),this.eventTargetListeners_=new goog.events.ListenerMap(this),this.actualEventTarget_=this,this.parentEventTarget_=null},goog.inherits(goog.events.EventTarget,goog.Disposable),goog.events.Listenable.addImplementation(goog.events.EventTarget),goog.events.EventTarget.MAX_ANCESTORS_=1e3,goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_},goog.events.EventTarget.prototype.setParentEventTarget=function(t){this.parentEventTarget_=t},goog.events.EventTarget.prototype.addEventListener=function(t,e,o,n){goog.events.listen(this,t,e,o,n)},goog.events.EventTarget.prototype.removeEventListener=function(t,e,o,n){goog.events.unlisten(this,t,e,o,n)},goog.events.EventTarget.prototype.dispatchEvent=function(t){this.assertInitialized_();var e=this.getParentEventTarget();if(e)for(var o=[],n=1;e;e=e.getParentEventTarget())o.push(e),goog.asserts.assert(++n<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop");return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,t,o)},goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this),this.removeAllListeners(),this.parentEventTarget_=null},goog.events.EventTarget.prototype.listen=function(t,e,o,n){return this.assertInitialized_(),this.eventTargetListeners_.add(String(t),e,!1,o,n)},goog.events.EventTarget.prototype.listenOnce=function(t,e,o,n){return this.eventTargetListeners_.add(String(t),e,!0,o,n)},goog.events.EventTarget.prototype.unlisten=function(t,e,o,n){return this.eventTargetListeners_.remove(String(t),e,o,n)},goog.events.EventTarget.prototype.unlistenByKey=function(t){return this.eventTargetListeners_.removeByKey(t)},goog.events.EventTarget.prototype.removeAllListeners=function(t){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(t):0},goog.events.EventTarget.prototype.fireListeners=function(t,e,o){if(!(t=this.eventTargetListeners_.listeners[String(t)]))return!0;t=t.concat();for(var n=!0,r=0;r<t.length;++r){var i=t[r];if(i&&!i.removed&&i.capture==e){var s=i.listener,a=i.handler||i.src;i.callOnce&&this.unlistenByKey(i),n=!1!==s.call(a,o)&&n}}return n&&0!=o.returnValue_},goog.events.EventTarget.prototype.getListeners=function(t,e){return this.eventTargetListeners_.getListeners(String(t),e)},goog.events.EventTarget.prototype.getListener=function(t,e,o,n){return this.eventTargetListeners_.getListener(String(t),e,o,n)},goog.events.EventTarget.prototype.hasListener=function(t,e){var o=goog.isDef(t)?String(t):void 0;return this.eventTargetListeners_.hasListener(o,e)},goog.events.EventTarget.prototype.setTargetForTesting=function(t){this.actualEventTarget_=t},goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},goog.events.EventTarget.dispatchEventInternal_=function(t,e,o){var n=e.type||e;if(goog.isString(e))e=new goog.events.Event(e,t);else if(e instanceof goog.events.Event)e.target=e.target||t;else{var r=e;e=new goog.events.Event(n,t),goog.object.extend(e,r)}if(r=!0,o)for(var i=o.length-1;!e.propagationStopped_&&0<=i;i--){var s=e.currentTarget=o[i];r=s.fireListeners(n,!0,e)&&r}if(e.propagationStopped_||(s=e.currentTarget=t,r=s.fireListeners(n,!0,e)&&r,e.propagationStopped_||(r=s.fireListeners(n,!1,e)&&r)),o)for(i=0;!e.propagationStopped_&&i<o.length;i++)s=e.currentTarget=o[i],r=s.fireListeners(n,!1,e)&&r;return r},goog.Timer=function(t,e){goog.events.EventTarget.call(this),this.interval_=t||1,this.timerObject_=e||goog.Timer.defaultTimerObject,this.boundTick_=goog.bind(this.tick_,this),this.last_=goog.now()},goog.inherits(goog.Timer,goog.events.EventTarget),goog.Timer.MAX_TIMEOUT_=2147483647,goog.Timer.INVALID_TIMEOUT_ID_=-1,goog.Timer.prototype.enabled=!1,goog.Timer.defaultTimerObject=goog.global,goog.Timer.intervalScale=.8,goog.Timer.prototype.timer_=null,goog.Timer.prototype.getInterval=function(){return this.interval_},goog.Timer.prototype.setInterval=function(t){this.interval_=t,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()},goog.Timer.prototype.tick_=function(){if(this.enabled){var t=goog.now()-this.last_;0<t&&t<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-t):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}},goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)},goog.Timer.prototype.start=function(){this.enabled=!0,this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())},goog.Timer.prototype.stop=function(){this.enabled=!1,this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)},goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this),this.stop(),delete this.timerObject_},goog.Timer.TICK="tick",goog.Timer.callOnce=function(t,e,o){if(goog.isFunction(t))o&&(t=goog.bind(t,o));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=goog.bind(t.handleEvent,t)}return Number(e)>goog.Timer.MAX_TIMEOUT_?goog.Timer.INVALID_TIMEOUT_ID_:goog.Timer.defaultTimerObject.setTimeout(t,e||0)},goog.Timer.clear=function(t){goog.Timer.defaultTimerObject.clearTimeout(t)},goog.Timer.promise=function(t,e){var o=null;return new goog.Promise(function(n,r){(o=goog.Timer.callOnce(function(){n(e)},t))==goog.Timer.INVALID_TIMEOUT_ID_&&r(Error("Failed to schedule timer."))}).thenCatch(function(t){throw goog.Timer.clear(o),t})},goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.Location&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.Location||!(t instanceof e.Element)),"Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLAnchorElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLAnchorElement&&void 0!==e.Location&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLAnchorElement||!(t instanceof e.Location||t instanceof e.Element)),"Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLLinkElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLLinkElement&&void 0!==e.Location&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLLinkElement||!(t instanceof e.Location||t instanceof e.Element)),"Argument is not a HTMLLinkElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLImageElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLImageElement&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLImageElement||!(t instanceof e.Element)),"Argument is not a HTMLImageElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLEmbedElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLEmbedElement&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLEmbedElement||!(t instanceof e.Element)),"Argument is not a HTMLEmbedElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLFrameElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLFrameElement&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLFrameElement||!(t instanceof e.Element)),"Argument is not a HTMLFrameElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLIFrameElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLIFrameElement&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLIFrameElement||!(t instanceof e.Element)),"Argument is not a HTMLIFrameElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLObjectElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLObjectElement&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLObjectElement||!(t instanceof e.Element)),"Argument is not a HTMLObjectElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsHTMLScriptElement=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);void 0!==e.HTMLScriptElement&&void 0!==e.Element&&goog.asserts.assert(t&&(t instanceof e.HTMLScriptElement||!(t instanceof e.Element)),"Argument is not a HTMLScriptElement (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.debugStringForType_=function(t){return goog.isObject(t)?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):void 0===t?"undefined":null===t?"null":typeof t},goog.dom.asserts.getWindow_=function(t){return(t=t&&t.ownerDocument)&&(t.defaultView||t.parentWindow)||goog.global},goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(t){return!0===goog.dom.tags.VOID_TAGS_[t]},goog.string.TypedString=function(){},goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(t){return t instanceof goog.string.Const&&t.constructor===goog.string.Const&&t.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?t.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+t+"'"),"type_error:Const")},goog.string.Const.from=function(t){return goog.string.Const.create__googStringSecurityPrivate_(t)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.create__googStringSecurityPrivate_=function(t){var e=new goog.string.Const;return e.stringConstValueWithSecurityContract__googStringSecurityPrivate_=t,e},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html={},goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(t){return t=goog.string.Const.unwrap(t),0===t.length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(t){return t instanceof goog.html.SafeScript&&t.constructor===goog.html.SafeScript&&t.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeScript")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(t){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=t,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(t){return goog.fs.url.getUrlObject_().createObjectURL(t)},goog.fs.url.revokeObjectUrl=function(t){goog.fs.url.getUrlObject_().revokeObjectURL(t)},goog.fs.url.getUrlObject_=function(){var t=goog.fs.url.findUrlObject_();if(null!=t)return t;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(t,e){return"number"==typeof t?0<t?goog.i18n.bidi.Dir.LTR:0>t?goog.i18n.bidi.Dir.RTL:e?null:goog.i18n.bidi.Dir.NEUTRAL:null==t?null:t?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-߿‏יִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(t,e){return e?t.replace(goog.i18n.bidi.htmlSkipReg_,""):t},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(t,e){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(t,e){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(t){return goog.i18n.bidi.rtlRe_.test(t)},goog.i18n.bidi.isLtrChar=function(t){return goog.i18n.bidi.ltrRe_.test(t)},goog.i18n.bidi.isNeutralChar=function(t){return!goog.i18n.bidi.isLtrChar(t)&&!goog.i18n.bidi.isRtlChar(t)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(t,e){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(t,e){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(t,e){return t=goog.i18n.bidi.stripHtmlIfNeeded_(t,e),goog.i18n.bidi.isRequiredLtrRe_.test(t)||!goog.i18n.bidi.hasAnyLtr(t)&&!goog.i18n.bidi.hasAnyRtl(t)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(t,e){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(t,e){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(t){return goog.i18n.bidi.rtlLocalesRe_.test(t)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(t,e){var o=(void 0===e?goog.i18n.bidi.hasAnyRtl(t):e)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return t.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(t){return"<"==t.charAt(0)?t.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+t+"</span>"},goog.i18n.bidi.enforceRtlInText=function(t){return goog.i18n.bidi.Format.RLE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(t){return"<"==t.charAt(0)?t.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+t+"</span>"},goog.i18n.bidi.enforceLtrInText=function(t){return goog.i18n.bidi.Format.LRE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(t){return t.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(t){return t.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(t,e){for(var o=0,n=0,r=!1,i=goog.i18n.bidi.stripHtmlIfNeeded_(t,e).split(goog.i18n.bidi.wordSeparatorRe_),s=0;s<i.length;s++){var a=i[s];goog.i18n.bidi.startsWithRtl(a)?(o++,n++):goog.i18n.bidi.isRequiredLtrRe_.test(a)?r=!0:goog.i18n.bidi.hasAnyLtr(a)?n++:goog.i18n.bidi.hasNumeralsRe_.test(a)&&(r=!0)}return 0==n?r?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:o/n>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(t,e){return goog.i18n.bidi.estimateDirection(t,e)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(t,e){t&&(e=goog.i18n.bidi.toDir(e))&&(t.style.textAlign=e==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,t.dir=e==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(t,e){switch(goog.i18n.bidi.estimateDirection(e)){case goog.i18n.bidi.Dir.LTR:t.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:t.dir="rtl";break;default:t.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(t){return t instanceof goog.html.TrustedResourceUrl&&t.constructor===goog.html.TrustedResourceUrl&&t.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+t+"' of type "+goog.typeOf(t)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(t,e){var o=goog.html.TrustedResourceUrl.format_(t,e);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(o)},goog.html.TrustedResourceUrl.format_=function(t,e){var o=goog.string.Const.unwrap(t);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(o))throw Error("Invalid TrustedResourceUrl format: "+o);return o.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(t,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw Error('Found marker, "'+n+'", in format string, "'+o+'", but no valid label mapping found in args: '+JSON.stringify(e));var r=e[n];return r instanceof goog.string.Const?goog.string.Const.unwrap(r):encodeURIComponent(String(r))})},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,goog.html.TrustedResourceUrl.formatWithParams=function(t,e,o){t=goog.html.TrustedResourceUrl.format_(t,e),e=/\?/.test(t)?"&":"?";for(var n in o)null!=o[n]&&(t+=e+encodeURIComponent(n)+"="+encodeURIComponent(String(o[n])),e="&");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.fromConstant=function(t){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(t))},goog.html.TrustedResourceUrl.fromConstants=function(t){for(var e="",o=0;o<t.length;o++)e+=goog.string.Const.unwrap(t[o]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(t){var e=new goog.html.TrustedResourceUrl;return e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=t,e},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(t){return t instanceof goog.html.SafeUrl&&t.constructor===goog.html.SafeUrl&&t.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(t){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(t))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp|3gpp2|aac|midi|mp4|mpeg|ogg|x-m4a|x-wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|text\/csv|video\/(?:mpeg|mp4|ogg|webm))$/i,goog.html.SafeUrl.fromBlob=function(t){return t=goog.html.SAFE_MIME_TYPE_PATTERN_.test(t.type)?goog.fs.url.createObjectUrl(t):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)};goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(t){var e=t.match(goog.html.DATA_URL_PATTERN_);return e=e&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(e[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e?t:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(t){return goog.string.caseInsensitiveStartsWith(t,"tel:")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(t){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(t))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.sanitize=function(t){return t instanceof goog.html.SafeUrl?t:(t=t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.html.SAFE_URL_PATTERN_.test(t)||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(t){return t instanceof goog.html.SafeUrl?t:(t=t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(t))||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(t){var e=new goog.html.SafeUrl;return e.privateDoNotAccessOrElseSafeHtmlWrappedValue_=t,e},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(t){return t=goog.string.Const.unwrap(t),0===t.length?goog.html.SafeStyle.EMPTY:(goog.html.SafeStyle.checkStyle_(t),goog.asserts.assert(goog.string.endsWith(t,";"),"Last character of style string is not ';': "+t),goog.asserts.assert(goog.string.contains(t,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+t),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyle.checkStyle_=function(t){goog.asserts.assert(!/[<>]/.test(t),"Forbidden characters in style string: "+t)},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(t){return t instanceof goog.html.SafeStyle&&t.constructor===goog.html.SafeStyle&&t.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(t){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=t,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(t){var e,o="";for(e in t){if(!/^[-_a-zA-Z0-9]+$/.test(e))throw Error("Name allows only [-_a-zA-Z0-9], got: "+e);var n=t[e];null!=n&&(n=goog.isArray(n)?goog.array.map(n,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(n),o+=e+":"+n+";")}return o?(goog.html.SafeStyle.checkStyle_(o),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(o)):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(t){return t instanceof goog.html.SafeUrl?'url("'+goog.html.SafeUrl.unwrap(t).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")':(t=t instanceof goog.string.Const?goog.string.Const.unwrap(t):goog.html.SafeStyle.sanitizePropertyValueString_(String(t)),goog.asserts.assert(!/[{;}]/.test(t),"Value does not allow [{;}]."),t)},goog.html.SafeStyle.sanitizePropertyValueString_=function(t){var e=t.replace(goog.html.SafeUrl.FUNCTIONS_RE_,"$1").replace(goog.html.SafeUrl.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(e)?goog.html.SafeStyle.hasBalancedQuotes_(t)?goog.html.SafeStyle.sanitizeUrl_(t):(goog.asserts.fail("String value requires balanced quotes, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(t){for(var e=!0,o=!0,n=0;n<t.length;n++){var r=t.charAt(n);"'"==r&&o?e=!e:'"'==r&&e&&(o=!o)}return e&&o},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeUrl.URL_RE_=RegExp("\\b(url\\([ \t\n]*)('[ -&(-\\[\\]-~]*'|\"[ !#-\\[\\]-~]*\"|[!#-&*-\\[\\]-~]*)([ \t\n]*\\))","g"),goog.html.SafeUrl.FUNCTIONS_RE_=RegExp("\\b(hsl|hsla|rgb|rgba|(rotate|scale|translate)(X|Y|Z|3d)?)\\([-0-9a-z.%, ]+\\)","g"),goog.html.SafeStyle.sanitizeUrl_=function(t){return t.replace(goog.html.SafeUrl.URL_RE_,function(t,e,o,n){var r="";return o=o.replace(/^(['"])(.*)\1$/,function(t,e,o){return r=e,o}),t=goog.html.SafeUrl.sanitize(o).getTypedStringValue(),e+r+t+r+n})},goog.html.SafeStyle.concat=function(t){var e="",o=function(t){goog.isArray(t)?goog.array.forEach(t,o):e+=goog.html.SafeStyle.unwrap(t)};return goog.array.forEach(arguments,o),e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(t,e){if(goog.string.contains(t,"<"))throw Error("Selector does not allow '<', got: "+t);var o=t.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(o))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+t);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(o))throw Error("() and [] in selector must be balanced, got: "+t);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),o=t+"{"+goog.html.SafeStyle.unwrap(e)+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(o)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(t){for(var e={"(":")","[":"]"},o=[],n=0;n<t.length;n++){var r=t[n];if(e[r])o.push(e[r]);else if(goog.object.contains(e,r)&&o.pop()!=r)return!1}return 0==o.length},goog.html.SafeStyleSheet.concat=function(t){var e="",o=function(t){goog.isArray(t)?goog.array.forEach(t,o):e+=goog.html.SafeStyleSheet.unwrap(t)};return goog.array.forEach(arguments,o),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.fromConstant=function(t){return t=goog.string.Const.unwrap(t),0===t.length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.contains(t,"<"),"Forbidden '<' character in style sheet string: "+t),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(t){return t instanceof goog.html.SafeStyleSheet&&t.constructor===goog.html.SafeStyleSheet&&t.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(t){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=t,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(t){return t instanceof goog.html.SafeHtml&&t.constructor===goog.html.SafeHtml&&t.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(t){if(t instanceof goog.html.SafeHtml)return t;var e=null;return t.implementsGoogI18nBidiDirectionalString&&(e=t.getDirection()),t=t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(t),e)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(t){return t instanceof goog.html.SafeHtml?t:(t=goog.html.SafeHtml.htmlEscape(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(t)),t.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(t){return t instanceof goog.html.SafeHtml?t:(t=goog.html.SafeHtml.htmlEscape(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(t)),t.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(t,e,o){return goog.html.SafeHtml.verifyTagName(String(t)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(t),e,o)},goog.html.SafeHtml.verifyTagName=function(t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(t))throw Error("Invalid tag name <"+t+">.");if(t.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+t+"> is not allowed for SafeHtml.")},goog.html.SafeHtml.createIframe=function(t,e,o,n){t&&goog.html.TrustedResourceUrl.unwrap(t);var r={};return r.src=t||null,r.srcdoc=e&&goog.html.SafeHtml.unwrap(e),t=goog.html.SafeHtml.combineAttributes(r,{sandbox:""},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",t,n)},goog.html.SafeHtml.createSandboxIframe=function(t,e,o,n){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var r={};return r.src=t?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t)):null,r.srcdoc=e||null,r.sandbox="",t=goog.html.SafeHtml.combineAttributes(r,{},o),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",t,n)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(t,e){goog.html.TrustedResourceUrl.unwrap(t);var o=goog.html.SafeHtml.combineAttributes({src:t},{},e);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",o)},goog.html.SafeHtml.createScript=function(t,e){for(var o in e){var n=o.toLowerCase();if("language"==n||"src"==n||"text"==n||"type"==n)throw Error('Cannot set "'+n+'" attribute')}for(o="",t=goog.array.concat(t),n=0;n<t.length;n++)o+=goog.html.SafeScript.unwrap(t[n]);return o=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e,o)},goog.html.SafeHtml.createStyle=function(t,e){var o=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},e),n="";t=goog.array.concat(t);for(var r=0;r<t.length;r++)n+=goog.html.SafeStyleSheet.unwrap(t[r]);return n=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",o,n)},goog.html.SafeHtml.createMetaRefresh=function(t,e){var o=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t));return(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.contains(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(e||0)+"; url="+o})},goog.html.SafeHtml.getAttrNameAndValue_=function(t,e,o){if(o instanceof goog.string.Const)o=goog.string.Const.unwrap(o);else if("style"==e.toLowerCase())o=goog.html.SafeHtml.getStyleValue_(o);else{if(/^on/i.test(e))throw Error('Attribute "'+e+'" requires goog.string.Const value, "'+o+'" given.');if(e.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(o instanceof goog.html.TrustedResourceUrl)o=goog.html.TrustedResourceUrl.unwrap(o);else if(o instanceof goog.html.SafeUrl)o=goog.html.SafeUrl.unwrap(o);else{if(!goog.isString(o))throw Error('Attribute "'+e+'" on tag "'+t+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+o+'" given.');o=goog.html.SafeUrl.sanitize(o).getTypedStringValue()}}return o.implementsGoogStringTypedString&&(o=o.getTypedStringValue()),goog.asserts.assert(goog.isString(o)||goog.isNumber(o),"String or number value expected, got "+typeof o+" with value: "+o),e+'="'+goog.string.htmlEscape(String(o))+'"'},goog.html.SafeHtml.getStyleValue_=function(t){if(!goog.isObject(t))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof t+" given: "+t);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),goog.html.SafeStyle.unwrap(t)},goog.html.SafeHtml.createWithDir=function(t,e,o,n){return e=goog.html.SafeHtml.create(e,o,n),e.dir_=t,e},goog.html.SafeHtml.concat=function(t){var e=goog.i18n.bidi.Dir.NEUTRAL,o="",n=function(t){goog.isArray(t)?goog.array.forEach(t,n):(t=goog.html.SafeHtml.htmlEscape(t),o+=goog.html.SafeHtml.unwrap(t),t=t.getDirection(),e==goog.i18n.bidi.Dir.NEUTRAL?e=t:t!=goog.i18n.bidi.Dir.NEUTRAL&&e!=t&&(e=null))};return goog.array.forEach(arguments,n),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,e)},goog.html.SafeHtml.concatWithDir=function(t,e){var o=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return o.dir_=t,o},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(t,e){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(t,e)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t,e){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=t,this.dir_=e,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(t,e,o){var n=null,r="<"+t+goog.html.SafeHtml.stringifyAttributes(t,e);return goog.isDefAndNotNull(o)?goog.isArray(o)||(o=[o]):o=[],goog.dom.tags.isVoidTag(t.toLowerCase())?(goog.asserts.assert(!o.length,"Void tag <"+t+"> does not allow content."),r+=">"):(n=goog.html.SafeHtml.concat(o),r+=">"+goog.html.SafeHtml.unwrap(n)+"</"+t+">",n=n.getDirection()),(t=e&&e.dir)&&(n=/^(ltr|rtl|auto)$/i.test(t)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,n)},goog.html.SafeHtml.stringifyAttributes=function(t,e){var o="";if(e)for(var n in e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(n))throw Error('Invalid attribute name "'+n+'".');var r=e[n];goog.isDefAndNotNull(r)&&(o+=" "+goog.html.SafeHtml.getAttrNameAndValue_(t,n,r))}return o},goog.html.SafeHtml.combineAttributes=function(t,e,o){var n,r={};for(n in t)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),r[n]=t[n];for(n in e)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),r[n]=e[n];for(n in o){var i=n.toLowerCase();if(i in t)throw Error('Cannot override "'+i+'" attribute, got "'+n+'" with value "'+o[n]+'"');i in e&&delete r[i],r[n]=o[n]}return r},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(t,e,o){t.insertAdjacentHTML(e,goog.html.SafeHtml.unwrap(o))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.setInnerHtml=function(t,e){if(goog.asserts.ENABLE_ASSERTS){var o=t.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[o])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+t.tagName+".")}t.innerHTML=goog.html.SafeHtml.unwrap(e)},goog.dom.safe.setOuterHtml=function(t,e){t.outerHTML=goog.html.SafeHtml.unwrap(e)},goog.dom.safe.setStyle=function(t,e){t.style.cssText=goog.html.SafeStyle.unwrap(e)},goog.dom.safe.documentWrite=function(t,e){t.write(goog.html.SafeHtml.unwrap(e))},goog.dom.safe.setAnchorHref=function(t,e){goog.dom.asserts.assertIsHTMLAnchorElement(t);var o=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e);t.href=goog.html.SafeUrl.unwrap(o)},goog.dom.safe.setImageSrc=function(t,e){goog.dom.asserts.assertIsHTMLImageElement(t);var o=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e);t.src=goog.html.SafeUrl.unwrap(o)},goog.dom.safe.setEmbedSrc=function(t,e){goog.dom.asserts.assertIsHTMLEmbedElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setFrameSrc=function(t,e){goog.dom.asserts.assertIsHTMLFrameElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrc=function(t,e){goog.dom.asserts.assertIsHTMLIFrameElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrcdoc=function(t,e){goog.dom.asserts.assertIsHTMLIFrameElement(t),t.srcdoc=goog.html.SafeHtml.unwrap(e)},goog.dom.safe.setLinkHrefAndRel=function(t,e,o){goog.dom.asserts.assertIsHTMLLinkElement(t),t.rel=o,goog.string.caseInsensitiveContains(o,"stylesheet")?(goog.asserts.assert(e instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),t.href=goog.html.TrustedResourceUrl.unwrap(e)):t.href=e instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(e):e instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(e):goog.html.SafeUrl.sanitizeAssertUnchanged(e).getTypedStringValue()},goog.dom.safe.setObjectData=function(t,e){goog.dom.asserts.assertIsHTMLObjectElement(t),t.data=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setScriptSrc=function(t,e){goog.dom.asserts.assertIsHTMLScriptElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setScriptContent=function(t,e){goog.dom.asserts.assertIsHTMLScriptElement(t),t.text=goog.html.SafeScript.unwrap(e)},goog.dom.safe.setLocationHref=function(t,e){goog.dom.asserts.assertIsLocation(t);var o=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e);t.href=goog.html.SafeUrl.unwrap(o)},goog.dom.safe.openInWindow=function(t,e,o,n,r){return t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),(e||window).open(goog.html.SafeUrl.unwrap(t),o?goog.string.Const.unwrap(o):"",n,r)},goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(t,e,o){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e,o||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.math.Size=function(t,e){this.width=t,this.height=e},goog.math.Size.equals=function(t,e){return t==e||!(!t||!e)&&(t.width==e.width&&t.height==e.height)},goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)},goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)},goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)},goog.math.Size.prototype.area=function(){return this.width*this.height},goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)},goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height},goog.math.Size.prototype.isEmpty=function(){return!this.area()},goog.math.Size.prototype.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Size.prototype.fitsInside=function(t){return this.width<=t.width&&this.height<=t.height},goog.math.Size.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Size.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Size.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.width*=t,this.height*=o,this},goog.math.Size.prototype.scaleToCover=function(t){return t=this.aspectRatio()<=t.aspectRatio()?t.width/this.width:t.height/this.height,this.scale(t)},goog.math.Size.prototype.scaleToFit=function(t){return t=this.aspectRatio()>t.aspectRatio()?t.width/this.width:t.height/this.height,this.scale(t)},goog.dom.ASSUME_QUIRKS_MODE=!1,goog.dom.ASSUME_STANDARDS_MODE=!1,goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE,goog.dom.getDomHelper=function(t){return t?new goog.dom.DomHelper(goog.dom.getOwnerDocument(t)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)},goog.dom.getDocument=function(){return document},goog.dom.getElement=function(t){return goog.dom.getElementHelper_(document,t)},goog.dom.getElementHelper_=function(t,e){return goog.isString(e)?t.getElementById(e):e},goog.dom.getRequiredElement=function(t){return goog.dom.getRequiredElementHelper_(document,t)},goog.dom.getRequiredElementHelper_=function(t,e){goog.asserts.assertString(e);var o=goog.dom.getElementHelper_(t,e);return o=goog.asserts.assertElement(o,"No element found with id: "+e)},goog.dom.$=goog.dom.getElement,goog.dom.getElementsByTagName=function(t,e){return(e||document).getElementsByTagName(String(t))},goog.dom.getElementsByTagNameAndClass=function(t,e,o){return goog.dom.getElementsByTagNameAndClass_(document,t,e,o)},goog.dom.getElementByTagNameAndClass=function(t,e,o){return goog.dom.getElementByTagNameAndClass_(document,t,e,o)},goog.dom.getElementsByClass=function(t,e){var o=e||document;return goog.dom.canUseQuerySelector_(o)?o.querySelectorAll("."+t):goog.dom.getElementsByTagNameAndClass_(document,"*",t,e)},goog.dom.getElementByClass=function(t,e){var o=e||document;return(o.getElementsByClassName?o.getElementsByClassName(t)[0]:goog.dom.getElementByTagNameAndClass_(document,"*",t,e))||null},goog.dom.getRequiredElementByClass=function(t,e){var o=goog.dom.getElementByClass(t,e);return goog.asserts.assert(o,"No element found with className: "+t)},goog.dom.canUseQuerySelector_=function(t){return!(!t.querySelectorAll||!t.querySelector)},goog.dom.getElementsByTagNameAndClass_=function(t,e,o,n){t=n||t;var r=e&&"*"!=e?String(e).toUpperCase():"";if(goog.dom.canUseQuerySelector_(t)&&(r||o))return t.querySelectorAll(r+(o?"."+o:""));if(o&&t.getElementsByClassName){if(n=t.getElementsByClassName(o),r){t={};for(var i,s=e=0;i=n[s];s++)r==i.nodeName&&(t[e++]=i);return t.length=e,t}return n}if(n=t.getElementsByTagName(r||"*"),o){for(t={},s=e=0;i=n[s];s++)r=i.className,"function"==typeof r.split&&goog.array.contains(r.split(/\s+/),o)&&(t[e++]=i);return t.length=e,t}return n},goog.dom.getElementByTagNameAndClass_=function(t,e,o,n){var r=n||t,i=e&&"*"!=e?String(e).toUpperCase():"";return goog.dom.canUseQuerySelector_(r)&&(i||o)?r.querySelector(i+(o?"."+o:"")):goog.dom.getElementsByTagNameAndClass_(t,e,o,n)[0]||null},goog.dom.$$=goog.dom.getElementsByTagNameAndClass,goog.dom.setProperties=function(t,e){goog.object.forEach(e,function(e,o){e&&e.implementsGoogStringTypedString&&(e=e.getTypedStringValue()),"style"==o?t.style.cssText=e:"class"==o?t.className=e:"for"==o?t.htmlFor=e:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(o)?t.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[o],e):goog.string.startsWith(o,"aria-")||goog.string.startsWith(o,"data-")?t.setAttribute(o,e):t[o]=e})},goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},goog.dom.getViewportSize=function(t){return goog.dom.getViewportSize_(t||window)},goog.dom.getViewportSize_=function(t){return t=t.document,t=goog.dom.isCss1CompatMode_(t)?t.documentElement:t.body,new goog.math.Size(t.clientWidth,t.clientHeight)},goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)},goog.dom.getDocumentHeightForWindow=function(t){return goog.dom.getDocumentHeight_(t)},goog.dom.getDocumentHeight_=function(t){var e=t.document,o=0;if(e){o=e.body;var n=e.documentElement;if(!n||!o)return 0;if(t=goog.dom.getViewportSize_(t).height,goog.dom.isCss1CompatMode_(e)&&n.scrollHeight)o=n.scrollHeight!=t?n.scrollHeight:n.offsetHeight;else{e=n.scrollHeight;var r=n.offsetHeight;n.clientHeight!=r&&(e=o.scrollHeight,r=o.offsetHeight),o=e>t?e>r?e:r:e<r?e:r}}return o},goog.dom.getPageScroll=function(t){return goog.dom.getDomHelper((t||goog.global||window).document).getDocumentScroll()},goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)},goog.dom.getDocumentScroll_=function(t){var e=goog.dom.getDocumentScrollElement_(t);return t=goog.dom.getWindow_(t),goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&t.pageYOffset!=e.scrollTop?new goog.math.Coordinate(e.scrollLeft,e.scrollTop):new goog.math.Coordinate(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)},goog.dom.getDocumentScrollElement_=function(t){return t.scrollingElement?t.scrollingElement:!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(t)?t.documentElement:t.body||t.documentElement},goog.dom.getWindow=function(t){return t?goog.dom.getWindow_(t):window},goog.dom.getWindow_=function(t){return t.parentWindow||t.defaultView},goog.dom.createDom=function(t,e,o){return goog.dom.createDom_(document,arguments)},goog.dom.createDom_=function(t,e){var o=String(e[0]),n=e[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&n&&(n.name||n.type)){if(o=["<",o],n.name&&o.push(' name="',goog.string.htmlEscape(n.name),'"'),n.type){o.push(' type="',goog.string.htmlEscape(n.type),'"');var r={};goog.object.extend(r,n),delete r.type,n=r}o.push(">"),o=o.join("")}return o=t.createElement(o),n&&(goog.isString(n)?o.className=n:goog.isArray(n)?o.className=n.join(" "):goog.dom.setProperties(o,n)),2<e.length&&goog.dom.append_(t,o,e,2),o},goog.dom.append_=function(t,e,o,n){function r(o){o&&e.appendChild(goog.isString(o)?t.createTextNode(o):o)}for(;n<o.length;n++){var i=o[n];goog.isArrayLike(i)&&!goog.dom.isNodeLike(i)?goog.array.forEach(goog.dom.isNodeList(i)?goog.array.toArray(i):i,r):r(i)}},goog.dom.$dom=goog.dom.createDom,goog.dom.createElement=function(t){return goog.dom.createElement_(document,t)},goog.dom.createElement_=function(t,e){return t.createElement(String(e))},goog.dom.createTextNode=function(t){return document.createTextNode(String(t))},goog.dom.createTable=function(t,e,o){return goog.dom.createTable_(document,t,e,!!o)},goog.dom.createTable_=function(t,e,o,n){for(var r=goog.dom.createElement_(t,"TABLE"),i=r.appendChild(goog.dom.createElement_(t,"TBODY")),s=0;s<e;s++){for(var a=goog.dom.createElement_(t,"TR"),l=0;l<o;l++){var c=goog.dom.createElement_(t,"TD");n&&goog.dom.setTextContent(c,goog.string.Unicode.NBSP),a.appendChild(c)}i.appendChild(a)}return r},goog.dom.constHtmlToNode=function(t){var e=goog.array.map(arguments,goog.string.Const.unwrap);return e=goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."),e.join("")),goog.dom.safeHtmlToNode(e)},goog.dom.safeHtmlToNode=function(t){return goog.dom.safeHtmlToNode_(document,t)},goog.dom.safeHtmlToNode_=function(t,e){var o=goog.dom.createElement_(t,"DIV");return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(o,goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,e)),o.removeChild(o.firstChild)):goog.dom.safe.setInnerHtml(o,e),goog.dom.childrenToNode_(t,o)},goog.dom.childrenToNode_=function(t,e){if(1==e.childNodes.length)return e.removeChild(e.firstChild);for(var o=t.createDocumentFragment();e.firstChild;)o.appendChild(e.firstChild);return o},goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)},goog.dom.isCss1CompatMode_=function(t){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==t.compatMode},goog.dom.canHaveChildren=function(t){if(t.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(t.tagName){case"APPLET":case"AREA":case"BASE":case"BR":case"COL":case"COMMAND":case"EMBED":case"FRAME":case"HR":case"IMG":case"INPUT":case"IFRAME":case"ISINDEX":case"KEYGEN":case"LINK":case"NOFRAMES":case"NOSCRIPT":case"META":case"OBJECT":case"PARAM":case"SCRIPT":case"SOURCE":case"STYLE":case"TRACK":case"WBR":return!1}return!0},goog.dom.appendChild=function(t,e){t.appendChild(e)},goog.dom.append=function(t,e){goog.dom.append_(goog.dom.getOwnerDocument(t),t,arguments,1)},goog.dom.removeChildren=function(t){for(var e;e=t.firstChild;)t.removeChild(e)},goog.dom.insertSiblingBefore=function(t,e){e.parentNode&&e.parentNode.insertBefore(t,e)},goog.dom.insertSiblingAfter=function(t,e){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)},goog.dom.insertChildAt=function(t,e,o){t.insertBefore(e,t.childNodes[o]||null)},goog.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},goog.dom.replaceNode=function(t,e){var o=e.parentNode;o&&o.replaceChild(t,e)},goog.dom.flattenElement=function(t){var e,o=t.parentNode;if(o&&o.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(t.removeNode)return t.removeNode(!1);for(;e=t.firstChild;)o.insertBefore(e,t);return goog.dom.removeNode(t)}},goog.dom.getChildren=function(t){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=t.children?t.children:goog.array.filter(t.childNodes,function(t){return t.nodeType==goog.dom.NodeType.ELEMENT})},goog.dom.getFirstElementChild=function(t){return goog.isDef(t.firstElementChild)?t.firstElementChild:goog.dom.getNextElementNode_(t.firstChild,!0)},goog.dom.getLastElementChild=function(t){return goog.isDef(t.lastElementChild)?t.lastElementChild:goog.dom.getNextElementNode_(t.lastChild,!1)},goog.dom.getNextElementSibling=function(t){return goog.isDef(t.nextElementSibling)?t.nextElementSibling:goog.dom.getNextElementNode_(t.nextSibling,!0)},goog.dom.getPreviousElementSibling=function(t){return goog.isDef(t.previousElementSibling)?t.previousElementSibling:goog.dom.getNextElementNode_(t.previousSibling,!1)},goog.dom.getNextElementNode_=function(t,e){for(;t&&t.nodeType!=goog.dom.NodeType.ELEMENT;)t=e?t.nextSibling:t.previousSibling;return t},goog.dom.getNextNode=function(t){if(!t)return null;if(t.firstChild)return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},goog.dom.getPreviousNode=function(t){if(!t)return null;if(!t.previousSibling)return t.parentNode;for(t=t.previousSibling;t&&t.lastChild;)t=t.lastChild;return t},goog.dom.isNodeLike=function(t){return goog.isObject(t)&&0<t.nodeType},goog.dom.isElement=function(t){return goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT},goog.dom.isWindow=function(t){return goog.isObject(t)&&t.window==t},goog.dom.getParentElement=function(t){var e;return!goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&t instanceof goog.global.SVGElement||!(e=t.parentElement)?(e=t.parentNode,goog.dom.isElement(e)?e:null):e},goog.dom.contains=function(t,e){if(!t||!e)return!1;if(t.contains&&e.nodeType==goog.dom.NodeType.ELEMENT)return t==e||t.contains(e);if(void 0!==t.compareDocumentPosition)return t==e||!!(16&t.compareDocumentPosition(e));for(;e&&t!=e;)e=e.parentNode;return e==t},goog.dom.compareNodeOrder=function(t,e){if(t==e)return 0;if(t.compareDocumentPosition)return 2&t.compareDocumentPosition(e)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(t.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(e.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in t||t.parentNode&&"sourceIndex"in t.parentNode){var o=t.nodeType==goog.dom.NodeType.ELEMENT,n=e.nodeType==goog.dom.NodeType.ELEMENT;if(o&&n)return t.sourceIndex-e.sourceIndex;var r=t.parentNode,i=e.parentNode;return r==i?goog.dom.compareSiblingOrder_(t,e):!o&&goog.dom.contains(r,e)?-1*goog.dom.compareParentsDescendantNodeIe_(t,e):!n&&goog.dom.contains(i,t)?goog.dom.compareParentsDescendantNodeIe_(e,t):(o?t.sourceIndex:r.sourceIndex)-(n?e.sourceIndex:i.sourceIndex)}return n=goog.dom.getOwnerDocument(t),o=n.createRange(),o.selectNode(t),o.collapse(!0),n=n.createRange(),n.selectNode(e),n.collapse(!0),o.compareBoundaryPoints(goog.global.Range.START_TO_END,n)},goog.dom.compareParentsDescendantNodeIe_=function(t,e){var o=t.parentNode;if(o==e)return-1;for(var n=e;n.parentNode!=o;)n=n.parentNode;return goog.dom.compareSiblingOrder_(n,t)};goog.dom.compareSiblingOrder_=function(t,e){for(var o=e;o=o.previousSibling;)if(o==t)return-1;return 1},goog.dom.findCommonAncestor=function(t){var e,o=arguments.length;if(!o)return null;if(1==o)return arguments[0];var n=[],r=1/0;for(e=0;e<o;e++){for(var i=[],s=arguments[e];s;)i.unshift(s),s=s.parentNode;n.push(i),r=Math.min(r,i.length)}for(i=null,e=0;e<r;e++){s=n[0][e];for(var a=1;a<o;a++)if(s!=n[a][e])return i;i=s}return i},goog.dom.getOwnerDocument=function(t){return goog.asserts.assert(t,"Node cannot be null or undefined."),t.nodeType==goog.dom.NodeType.DOCUMENT?t:t.ownerDocument||t.document},goog.dom.getFrameContentDocument=function(t){return t.contentDocument||t.contentWindow.document},goog.dom.getFrameContentWindow=function(t){try{return t.contentWindow||(t.contentDocument?goog.dom.getWindow(t.contentDocument):null)}catch(t){}return null},goog.dom.setTextContent=function(t,e){if(goog.asserts.assert(null!=t,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in t)t.textContent=e;else if(t.nodeType==goog.dom.NodeType.TEXT)t.data=String(e);else if(t.firstChild&&t.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;t.lastChild!=t.firstChild;)t.removeChild(t.lastChild);t.firstChild.data=String(e)}else{goog.dom.removeChildren(t);var o=goog.dom.getOwnerDocument(t);t.appendChild(o.createTextNode(String(e)))}},goog.dom.getOuterHtml=function(t){if(goog.asserts.assert(null!==t,"goog.dom.getOuterHtml expects a non-null value for element"),"outerHTML"in t)return t.outerHTML;var e=goog.dom.getOwnerDocument(t);return e=goog.dom.createElement_(e,"DIV"),e.appendChild(t.cloneNode(!0)),e.innerHTML},goog.dom.findNode=function(t,e){var o=[];return goog.dom.findNodes_(t,e,o,!0)?o[0]:void 0},goog.dom.findNodes=function(t,e){var o=[];return goog.dom.findNodes_(t,e,o,!1),o},goog.dom.findNodes_=function(t,e,o,n){if(null!=t)for(t=t.firstChild;t;){if(e(t)&&(o.push(t),n)||goog.dom.findNodes_(t,e,o,n))return!0;t=t.nextSibling}return!1},goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"},goog.dom.isFocusableTabIndex=function(t){return goog.dom.hasSpecifiedTabIndex_(t)&&goog.dom.isTabIndexFocusable_(t)},goog.dom.setFocusableTabIndex=function(t,e){e?t.tabIndex=0:(t.tabIndex=-1,t.removeAttribute("tabIndex"))},goog.dom.isFocusable=function(t){var e;return(e=goog.dom.nativelySupportsFocus_(t)?!t.disabled&&(!goog.dom.hasSpecifiedTabIndex_(t)||goog.dom.isTabIndexFocusable_(t)):goog.dom.isFocusableTabIndex(t))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(t):e},goog.dom.hasSpecifiedTabIndex_=function(t){return goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9")?(t=t.getAttributeNode("tabindex"),goog.isDefAndNotNull(t)&&t.specified):t.hasAttribute("tabindex")},goog.dom.isTabIndexFocusable_=function(t){return t=t.tabIndex,goog.isNumber(t)&&0<=t&&32768>t},goog.dom.nativelySupportsFocus_=function(t){return"A"==t.tagName||"INPUT"==t.tagName||"TEXTAREA"==t.tagName||"SELECT"==t.tagName||"BUTTON"==t.tagName},goog.dom.hasNonZeroBoundingRect_=function(t){return t=!goog.isFunction(t.getBoundingClientRect)||goog.userAgent.IE&&null==t.parentElement?{height:t.offsetHeight,width:t.offsetWidth}:t.getBoundingClientRect(),goog.isDefAndNotNull(t)&&0<t.height&&0<t.width},goog.dom.getTextContent=function(t){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&null!==t&&"innerText"in t)t=goog.string.canonicalizeNewlines(t.innerText);else{var e=[];goog.dom.getTextContent_(t,e,!0),t=e.join("")}return t=t.replace(/ \xAD /g," ").replace(/\xAD/g,""),t=t.replace(/\u200B/g,""),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(t=t.replace(/ +/g," "))," "!=t&&(t=t.replace(/^\s*/,"")),t},goog.dom.getRawTextContent=function(t){var e=[];return goog.dom.getTextContent_(t,e,!1),e.join("")},goog.dom.getTextContent_=function(t,e,o){if(!(t.nodeName in goog.dom.TAGS_TO_IGNORE_))if(t.nodeType==goog.dom.NodeType.TEXT)o?e.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(t.nodeValue);else if(t.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)e.push(goog.dom.PREDEFINED_TAG_VALUES_[t.nodeName]);else for(t=t.firstChild;t;)goog.dom.getTextContent_(t,e,o),t=t.nextSibling},goog.dom.getNodeTextLength=function(t){return goog.dom.getTextContent(t).length},goog.dom.getNodeTextOffset=function(t,e){for(var o=e||goog.dom.getOwnerDocument(t).body,n=[];t&&t!=o;){for(var r=t;r=r.previousSibling;)n.unshift(goog.dom.getTextContent(r));t=t.parentNode}return goog.string.trimLeft(n.join("")).replace(/ +/g," ").length},goog.dom.getNodeAtOffset=function(t,e,o){t=[t];for(var n=0,r=null;0<t.length&&n<e;)if(r=t.pop(),!(r.nodeName in goog.dom.TAGS_TO_IGNORE_))if(r.nodeType==goog.dom.NodeType.TEXT){var i=r.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");n+=i.length}else if(r.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)n+=goog.dom.PREDEFINED_TAG_VALUES_[r.nodeName].length;else for(i=r.childNodes.length-1;0<=i;i--)t.push(r.childNodes[i]);return goog.isObject(o)&&(o.remainder=r?r.nodeValue.length+e-n-1:0,o.node=r),r},goog.dom.isNodeList=function(t){if(t&&"number"==typeof t.length){if(goog.isObject(t))return"function"==typeof t.item||"string"==typeof t.item;if(goog.isFunction(t))return"function"==typeof t.item}return!1},goog.dom.getAncestorByTagNameAndClass=function(t,e,o,n){if(!e&&!o)return null;var r=e?String(e).toUpperCase():null;return goog.dom.getAncestor(t,function(t){return(!r||t.nodeName==r)&&(!o||goog.isString(t.className)&&goog.array.contains(t.className.split(/\s+/),o))},!0,n)},goog.dom.getAncestorByClass=function(t,e,o){return goog.dom.getAncestorByTagNameAndClass(t,null,e,o)},goog.dom.getAncestor=function(t,e,o,n){for(t&&!o&&(t=t.parentNode),o=0;t&&(null==n||o<=n);){if(goog.asserts.assert("parentNode"!=t.name),e(t))return t;t=t.parentNode,o++}return null},goog.dom.getActiveElement=function(t){try{return t&&t.activeElement}catch(t){}return null},goog.dom.getPixelRatio=function(){var t=goog.dom.getWindow();return goog.isDef(t.devicePixelRatio)?t.devicePixelRatio:t.matchMedia?goog.dom.matchesPixelRatio_(3)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(1)||.75:1},goog.dom.matchesPixelRatio_=function(t){return goog.dom.getWindow().matchMedia("(min-resolution: "+t+"dppx),(min--moz-device-pixel-ratio: "+t+"),(min-resolution: "+96*t+"dpi)").matches?t:0},goog.dom.getCanvasContext2D=function(t){return t.getContext("2d")},goog.dom.DomHelper=function(t){this.document_=t||goog.global.document||document},goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper,goog.dom.DomHelper.prototype.setDocument=function(t){this.document_=t},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.getElement=function(t){return goog.dom.getElementHelper_(this.document_,t)},goog.dom.DomHelper.prototype.getRequiredElement=function(t){return goog.dom.getRequiredElementHelper_(this.document_,t)},goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement,goog.dom.DomHelper.prototype.getElementsByTagName=function(t,e){return(e||this.document_).getElementsByTagName(String(t))},goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(t,e,o){return goog.dom.getElementsByTagNameAndClass_(this.document_,t,e,o)},goog.dom.DomHelper.prototype.getElementByTagNameAndClass=function(t,e,o){return goog.dom.getElementByTagNameAndClass_(this.document_,t,e,o)},goog.dom.DomHelper.prototype.getElementsByClass=function(t,e){return goog.dom.getElementsByClass(t,e||this.document_)},goog.dom.DomHelper.prototype.getElementByClass=function(t,e){return goog.dom.getElementByClass(t,e||this.document_)},goog.dom.DomHelper.prototype.getRequiredElementByClass=function(t,e){return goog.dom.getRequiredElementByClass(t,e||this.document_)},goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass,goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties,goog.dom.DomHelper.prototype.getViewportSize=function(t){return goog.dom.getViewportSize(t||this.getWindow())},goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())},goog.dom.DomHelper.prototype.createDom=function(t,e,o){return goog.dom.createDom_(this.document_,arguments)},goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom,goog.dom.DomHelper.prototype.createElement=function(t){return goog.dom.createElement_(this.document_,t)},goog.dom.DomHelper.prototype.createTextNode=function(t){return this.document_.createTextNode(String(t))},goog.dom.DomHelper.prototype.createTable=function(t,e,o){return goog.dom.createTable_(this.document_,t,e,!!o)},goog.dom.DomHelper.prototype.safeHtmlToNode=function(t){return goog.dom.safeHtmlToNode_(this.document_,t)},goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)},goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)},goog.dom.DomHelper.prototype.getActiveElement=function(t){return goog.dom.getActiveElement(t||this.document_)},goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild,goog.dom.DomHelper.prototype.append=goog.dom.append,goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren,goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren,goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore,goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter,goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt,goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode,goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode,goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement,goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren,goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild,goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild,goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling,goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling,goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode,goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode,goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike,goog.dom.DomHelper.prototype.isElement=goog.dom.isElement,goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow,goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement,goog.dom.DomHelper.prototype.contains=goog.dom.contains,goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder,goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor,goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument,goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument,goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow,goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent,goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml,goog.dom.DomHelper.prototype.findNode=goog.dom.findNode,goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes,goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex,goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex,goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable,goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent,goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength,goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset,goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset,goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList,goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass,goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass,goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor,goog.dom.DomHelper.prototype.getCanvasContext2D=goog.dom.getCanvasContext2D,goog.color={},goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},goog.color.parse=function(t){var e={};t=String(t);var o=goog.color.prependHashIfNecessaryHelper(t);if(goog.color.isValidHexColor_(o))return e.hex=goog.color.normalizeHex(o),e.type="hex",e;if(o=goog.color.isValidRgbColor_(t),o.length)return e.hex=goog.color.rgbArrayToHex(o),e.type="rgb",e;if(goog.color.names&&(o=goog.color.names[t.toLowerCase()]))return e.hex=o,e.type="named",e;throw Error(t+" is not a valid color string")},goog.color.isValidColor=function(t){var e=goog.color.prependHashIfNecessaryHelper(t);return!!(goog.color.isValidHexColor_(e)||goog.color.isValidRgbColor_(t).length||goog.color.names&&goog.color.names[t.toLowerCase()])},goog.color.parseRgb=function(t){var e=goog.color.isValidRgbColor_(t);if(!e.length)throw Error(t+" is not a valid RGB color");return e},goog.color.hexToRgbStyle=function(t){return goog.color.rgbStyle_(goog.color.hexToRgb(t))},goog.color.hexTripletRe_=/#(.)(.)(.)/,goog.color.normalizeHex=function(t){if(!goog.color.isValidHexColor_(t))throw Error("'"+t+"' is not a valid hex color");return 4==t.length&&(t=t.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3")),t.toLowerCase()},goog.color.hexToRgb=function(t){t=goog.color.normalizeHex(t);var e=parseInt(t.substr(1,2),16),o=parseInt(t.substr(3,2),16);return t=parseInt(t.substr(5,2),16),[e,o,t]},goog.color.rgbToHex=function(t,e,o){if(t=Number(t),e=Number(e),o=Number(o),t!=(255&t)||e!=(255&e)||o!=(255&o))throw Error('"('+t+","+e+","+o+'") is not a valid RGB color');return t=goog.color.prependZeroIfNecessaryHelper(t.toString(16)),e=goog.color.prependZeroIfNecessaryHelper(e.toString(16)),o=goog.color.prependZeroIfNecessaryHelper(o.toString(16)),"#"+t+e+o},goog.color.rgbArrayToHex=function(t){return goog.color.rgbToHex(t[0],t[1],t[2])},goog.color.rgbToHsl=function(t,e,o){t/=255,e/=255,o/=255;var n=Math.max(t,e,o),r=Math.min(t,e,o),i=0,s=0,a=.5*(n+r);return n!=r&&(n==t?i=60*(e-o)/(n-r):n==e?i=60*(o-t)/(n-r)+120:n==o&&(i=60*(t-e)/(n-r)+240),s=0<a&&.5>=a?(n-r)/(2*a):(n-r)/(2-2*a)),[Math.round(i+360)%360,s,a]},goog.color.rgbArrayToHsl=function(t){return goog.color.rgbToHsl(t[0],t[1],t[2])},goog.color.hueToRgb_=function(t,e,o){return 0>o?o+=1:1<o&&--o,1>6*o?t+6*(e-t)*o:1>2*o?e:2>3*o?t+(e-t)*(2/3-o)*6:t},goog.color.hslToRgb=function(t,e,o){if(t/=360,0==e)o=e=t=255*o;else{var n=.5>o?o*(1+e):o+e-e*o,r=2*o-n;o=255*goog.color.hueToRgb_(r,n,t+1/3),e=255*goog.color.hueToRgb_(r,n,t),t=255*goog.color.hueToRgb_(r,n,t-1/3)}return[Math.round(o),Math.round(e),Math.round(t)]},goog.color.hslArrayToRgb=function(t){return goog.color.hslToRgb(t[0],t[1],t[2])},goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i,goog.color.isValidHexColor_=function(t){return goog.color.validHexColorRe_.test(t)},goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/,goog.color.isNormalizedHexColor_=function(t){return goog.color.normalizedHexColorRe_.test(t)},goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,goog.color.isValidRgbColor_=function(t){var e=t.match(goog.color.rgbColorRe_);if(e){t=Number(e[1]);var o=Number(e[2]);if(e=Number(e[3]),0<=t&&255>=t&&0<=o&&255>=o&&0<=e&&255>=e)return[t,o,e]}return[]},goog.color.prependZeroIfNecessaryHelper=function(t){return 1==t.length?"0"+t:t},goog.color.prependHashIfNecessaryHelper=function(t){return"#"==t.charAt(0)?t:"#"+t},goog.color.rgbStyle_=function(t){return"rgb("+t.join(",")+")"},goog.color.hsvToRgb=function(t,e,o){var n=0,r=0,i=0;if(0==e)i=r=n=o;else{var s=Math.floor(t/60),a=t/60-s;t=o*(1-e);var l=o*(1-e*a);switch(e=o*(1-e*(1-a)),s){case 1:n=l,r=o,i=t;break;case 2:n=t,r=o,i=e;break;case 3:n=t,r=l,i=o;break;case 4:n=e,r=t,i=o;break;case 5:n=o,r=t,i=l;break;case 6:case 0:n=o,r=e,i=t}}return[Math.floor(n),Math.floor(r),Math.floor(i)]},goog.color.rgbToHsv=function(t,e,o){var n=Math.max(Math.max(t,e),o),r=Math.min(Math.min(t,e),o);if(r==n)r=t=0;else{var i=n-r;r=i/n,t=60*(t==n?(e-o)/i:e==n?2+(o-t)/i:4+(t-e)/i),0>t&&(t+=360),360<t&&(t-=360)}return[t,r,n]},goog.color.rgbArrayToHsv=function(t){return goog.color.rgbToHsv(t[0],t[1],t[2])},goog.color.hsvArrayToRgb=function(t){return goog.color.hsvToRgb(t[0],t[1],t[2])},goog.color.hexToHsl=function(t){return t=goog.color.hexToRgb(t),goog.color.rgbToHsl(t[0],t[1],t[2])},goog.color.hslToHex=function(t,e,o){return goog.color.rgbArrayToHex(goog.color.hslToRgb(t,e,o))},goog.color.hslArrayToHex=function(t){return goog.color.rgbArrayToHex(goog.color.hslToRgb(t[0],t[1],t[2]))},goog.color.hexToHsv=function(t){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(t))},goog.color.hsvToHex=function(t,e,o){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(t,e,o))},goog.color.hsvArrayToHex=function(t){return goog.color.hsvToHex(t[0],t[1],t[2])},goog.color.hslDistance=function(t,e){var o=.5>=t[2]?t[1]*t[2]:t[1]*(1-t[2]),n=.5>=e[2]?e[1]*e[2]:e[1]*(1-e[2]);return(t[2]-e[2])*(t[2]-e[2])+o*o+n*n-2*o*n*Math.cos(2*(t[0]/360-e[0]/360)*Math.PI)},goog.color.blend=function(t,e,o){return o=goog.math.clamp(o,0,1),[Math.round(o*t[0]+(1-o)*e[0]),Math.round(o*t[1]+(1-o)*e[1]),Math.round(o*t[2]+(1-o)*e[2])]},goog.color.darken=function(t,e){return goog.color.blend([0,0,0],t,e)},goog.color.lighten=function(t,e){return goog.color.blend([255,255,255],t,e)},goog.color.highContrast=function(t,e){for(var o=[],n=0;n<e.length;n++)o.push({color:e[n],diff:goog.color.yiqBrightnessDiff_(e[n],t)+goog.color.colorDiff_(e[n],t)});return o.sort(function(t,e){return e.diff-t.diff}),o[0].color},goog.color.yiqBrightness_=function(t){return Math.round((299*t[0]+587*t[1]+114*t[2])/1e3)},goog.color.yiqBrightnessDiff_=function(t,e){return Math.abs(goog.color.yiqBrightness_(t)-goog.color.yiqBrightness_(e))},goog.color.colorDiff_=function(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])+Math.abs(t[2]-e[2])},goog.dom.vendor={},goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null},goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null},goog.dom.vendor.getPrefixedPropertyName=function(t,e){if(e&&t in e)return t;var o=goog.dom.vendor.getVendorJsPrefix();return o?(o=o.toLowerCase(),o+=goog.string.toTitleCase(t),!goog.isDef(e)||o in e?o:null):null},goog.dom.vendor.getPrefixedEventType=function(t){return((goog.dom.vendor.getVendorJsPrefix()||"")+t).toLowerCase()},goog.html.legacyconversions={},goog.html.legacyconversions.safeHtmlFromString=function(t){return goog.html.legacyconversions.reportCallback_(),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,null)},goog.html.legacyconversions.safeScriptFromString=function(t){return goog.html.legacyconversions.reportCallback_(),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.legacyconversions.safeStyleFromString=function(t){return goog.html.legacyconversions.reportCallback_(),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.legacyconversions.safeStyleSheetFromString=function(t){return goog.html.legacyconversions.reportCallback_(),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.legacyconversions.safeUrlFromString=function(t){return goog.html.legacyconversions.reportCallback_(),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.legacyconversions.trustedResourceUrlFromString=function(t){return goog.html.legacyconversions.reportCallback_(),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.legacyconversions.reportCallback_=goog.nullFunction,goog.html.legacyconversions.setReportCallback=function(t){goog.html.legacyconversions.reportCallback_=t},goog.math.Box=function(t,e,o,n){this.top=t,this.right=e,this.bottom=o,this.left=n},goog.math.Box.boundingBox=function(t){for(var e=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),o=1;o<arguments.length;o++)e.expandToIncludeCoordinate(arguments[o]);return e},goog.math.Box.prototype.getWidth=function(){return this.right-this.left},goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top},goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)},goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}),goog.math.Box.prototype.contains=function(t){return goog.math.Box.contains(this,t)},goog.math.Box.prototype.expand=function(t,e,o,n){return goog.isObject(t)?(this.top-=t.top,this.right+=t.right,this.bottom+=t.bottom,this.left-=t.left):(this.top-=t,this.right+=Number(e),this.bottom+=Number(o),this.left-=Number(n)),this},goog.math.Box.prototype.expandToInclude=function(t){this.left=Math.min(this.left,t.left),this.top=Math.min(this.top,t.top),this.right=Math.max(this.right,t.right),this.bottom=Math.max(this.bottom,t.bottom)},goog.math.Box.prototype.expandToIncludeCoordinate=function(t){this.top=Math.min(this.top,t.y),this.right=Math.max(this.right,t.x),this.bottom=Math.max(this.bottom,t.y),this.left=Math.min(this.left,t.x)},goog.math.Box.equals=function(t,e){return t==e||!(!t||!e)&&(t.top==e.top&&t.right==e.right&&t.bottom==e.bottom&&t.left==e.left)},goog.math.Box.contains=function(t,e){return!(!t||!e)&&(e instanceof goog.math.Box?e.left>=t.left&&e.right<=t.right&&e.top>=t.top&&e.bottom<=t.bottom:e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)},goog.math.Box.relativePositionX=function(t,e){return e.x<t.left?e.x-t.left:e.x>t.right?e.x-t.right:0},goog.math.Box.relativePositionY=function(t,e){return e.y<t.top?e.y-t.top:e.y>t.bottom?e.y-t.bottom:0},goog.math.Box.distance=function(t,e){var o=goog.math.Box.relativePositionX(t,e),n=goog.math.Box.relativePositionY(t,e);return Math.sqrt(o*o+n*n)},goog.math.Box.intersects=function(t,e){return t.left<=e.right&&e.left<=t.right&&t.top<=e.bottom&&e.top<=t.bottom},goog.math.Box.intersectsWithPadding=function(t,e,o){return t.left<=e.right+o&&e.left<=t.right+o&&t.top<=e.bottom+o&&e.top<=t.bottom+o},goog.math.Box.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},goog.math.Box.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},goog.math.Box.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this},goog.math.Box.prototype.translate=function(t,e){return t instanceof goog.math.Coordinate?(this.left+=t.x,this.right+=t.x,this.top+=t.y,this.bottom+=t.y):(goog.asserts.assertNumber(t),this.left+=t,this.right+=t,goog.isNumber(e)&&(this.top+=e,this.bottom+=e)),this},goog.math.Box.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.left*=t,this.right*=t,this.top*=o,this.bottom*=o,this},goog.math.IRect=function(){},goog.math.Rect=function(t,e,o,n){this.left=t,this.top=e,this.width=o,this.height=n},goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)},goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)},goog.math.Rect.createFromPositionAndSize=function(t,e){return new goog.math.Rect(t.x,t.y,e.width,e.height)},goog.math.Rect.createFromBox=function(t){return new goog.math.Rect(t.left,t.top,t.right-t.left,t.bottom-t.top)},goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}),goog.math.Rect.equals=function(t,e){return t==e||!(!t||!e)&&(t.left==e.left&&t.width==e.width&&t.top==e.top&&t.height==e.height)},goog.math.Rect.prototype.intersection=function(t){var e=Math.max(this.left,t.left),o=Math.min(this.left+this.width,t.left+t.width);if(e<=o){var n=Math.max(this.top,t.top);if(t=Math.min(this.top+this.height,t.top+t.height),n<=t)return this.left=e,this.top=n,this.width=o-e,this.height=t-n,!0}return!1},goog.math.Rect.intersection=function(t,e){var o=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width);if(o<=n){var r=Math.max(t.top,e.top),i=Math.min(t.top+t.height,e.top+e.height);if(r<=i)return new goog.math.Rect(o,r,n-o,i-r)}return null},goog.math.Rect.intersects=function(t,e){return t.left<=e.left+e.width&&e.left<=t.left+t.width&&t.top<=e.top+e.height&&e.top<=t.top+t.height},goog.math.Rect.prototype.intersects=function(t){return goog.math.Rect.intersects(this,t)},goog.math.Rect.difference=function(t,e){var o=goog.math.Rect.intersection(t,e);if(!o||!o.height||!o.width)return[t.clone()];o=[];var n=t.top,r=t.height,i=t.left+t.width,s=t.top+t.height,a=e.left+e.width,l=e.top+e.height;return e.top>t.top&&(o.push(new goog.math.Rect(t.left,t.top,t.width,e.top-t.top)),n=e.top,r-=e.top-t.top),l<s&&(o.push(new goog.math.Rect(t.left,l,t.width,s-l)),r=l-n),e.left>t.left&&o.push(new goog.math.Rect(t.left,n,e.left-t.left,r)),a<i&&o.push(new goog.math.Rect(a,n,i-a,r)),o},goog.math.Rect.prototype.difference=function(t){return goog.math.Rect.difference(this,t)},goog.math.Rect.prototype.boundingRect=function(t){var e=Math.max(this.left+this.width,t.left+t.width),o=Math.max(this.top+this.height,t.top+t.height);this.left=Math.min(this.left,t.left),this.top=Math.min(this.top,t.top),this.width=e-this.left,this.height=o-this.top},goog.math.Rect.boundingRect=function(t,e){if(!t||!e)return null;var o=new goog.math.Rect(t.left,t.top,t.width,t.height);return o.boundingRect(e),o},goog.math.Rect.prototype.contains=function(t){return t instanceof goog.math.Coordinate?t.x>=this.left&&t.x<=this.left+this.width&&t.y>=this.top&&t.y<=this.top+this.height:this.left<=t.left&&this.left+this.width>=t.left+t.width&&this.top<=t.top&&this.top+this.height>=t.top+t.height};goog.math.Rect.prototype.squaredDistance=function(t){var e=t.x<this.left?this.left-t.x:Math.max(t.x-(this.left+this.width),0);return t=t.y<this.top?this.top-t.y:Math.max(t.y-(this.top+this.height),0),e*e+t*t},goog.math.Rect.prototype.distance=function(t){return Math.sqrt(this.squaredDistance(t))},goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)},goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)},goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)},goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)},goog.math.Rect.prototype.ceil=function(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Rect.prototype.floor=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Rect.prototype.round=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Rect.prototype.translate=function(t,e){return t instanceof goog.math.Coordinate?(this.left+=t.x,this.top+=t.y):(this.left+=goog.asserts.assertNumber(t),goog.isNumber(e)&&(this.top+=e)),this},goog.math.Rect.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.left*=t,this.width*=t,this.top*=o,this.height*=o,this},goog.style={},goog.style.setStyle=function(t,e,o){if(goog.isString(e))goog.style.setStyle_(t,o,e);else for(var n in e)goog.style.setStyle_(t,e[n],n)},goog.style.setStyle_=function(t,e,o){(o=goog.style.getVendorJsStyleName_(t,o))&&(t.style[o]=e)},goog.style.styleNameCache_={},goog.style.getVendorJsStyleName_=function(t,e){var o=goog.style.styleNameCache_[e];if(!o){var n=goog.string.toCamelCase(e);o=n,void 0===t.style[n]&&(n=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(n),void 0!==t.style[n]&&(o=n)),goog.style.styleNameCache_[e]=o}return o},goog.style.getVendorStyleName_=function(t,e){var o=goog.string.toCamelCase(e);return void 0===t.style[o]&&(o=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(o),void 0!==t.style[o])?goog.dom.vendor.getVendorPrefix()+"-"+e:e},goog.style.getStyle=function(t,e){var o=t.style[goog.string.toCamelCase(e)];return void 0!==o?o:t.style[goog.style.getVendorJsStyleName_(t,e)]||""},goog.style.getComputedStyle=function(t,e){var o=goog.dom.getOwnerDocument(t);return o.defaultView&&o.defaultView.getComputedStyle&&(o=o.defaultView.getComputedStyle(t,null))?o[e]||o.getPropertyValue(e)||"":""},goog.style.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},goog.style.getStyle_=function(t,e){return goog.style.getComputedStyle(t,e)||goog.style.getCascadedStyle(t,e)||t.style&&t.style[e]},goog.style.getComputedBoxSizing=function(t){return goog.style.getStyle_(t,"boxSizing")||goog.style.getStyle_(t,"MozBoxSizing")||goog.style.getStyle_(t,"WebkitBoxSizing")||null},goog.style.getComputedPosition=function(t){return goog.style.getStyle_(t,"position")},goog.style.getBackgroundColor=function(t){return goog.style.getStyle_(t,"backgroundColor")},goog.style.getComputedOverflowX=function(t){return goog.style.getStyle_(t,"overflowX")},goog.style.getComputedOverflowY=function(t){return goog.style.getStyle_(t,"overflowY")},goog.style.getComputedZIndex=function(t){return goog.style.getStyle_(t,"zIndex")},goog.style.getComputedTextAlign=function(t){return goog.style.getStyle_(t,"textAlign")},goog.style.getComputedCursor=function(t){return goog.style.getStyle_(t,"cursor")},goog.style.getComputedTransform=function(t){var e=goog.style.getVendorStyleName_(t,"transform");return goog.style.getStyle_(t,e)||goog.style.getStyle_(t,"transform")},goog.style.setPosition=function(t,e,o){if(e instanceof goog.math.Coordinate){var n=e.x;e=e.y}else n=e,e=o;t.style.left=goog.style.getPixelStyleValue_(n,!1),t.style.top=goog.style.getPixelStyleValue_(e,!1)},goog.style.getPosition=function(t){return new goog.math.Coordinate(t.offsetLeft,t.offsetTop)},goog.style.getClientViewportElement=function(t){return t=t?goog.dom.getOwnerDocument(t):goog.dom.getDocument(),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(t).isCss1CompatMode()?t.documentElement:t.body},goog.style.getViewportPageOffset=function(t){var e=t.body;return t=t.documentElement,new goog.math.Coordinate(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},goog.style.getBoundingClientRect_=function(t){try{var e=t.getBoundingClientRect()}catch(t){return{left:0,top:0,right:0,bottom:0}}return goog.userAgent.IE&&t.ownerDocument.body&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop),e},goog.style.getOffsetParent=function(t){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return goog.asserts.assert(t&&"offsetParent"in t),t.offsetParent;var e=goog.dom.getOwnerDocument(t),o=goog.style.getStyle_(t,"position"),n="fixed"==o||"absolute"==o;for(t=t.parentNode;t&&t!=e;t=t.parentNode)if(t.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&t.host&&(t=t.host),o=goog.style.getStyle_(t,"position"),!(n=n&&"static"==o&&t!=e.documentElement&&t!=e.body)&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight||"fixed"==o||"absolute"==o||"relative"==o))return t;return null},goog.style.getVisibleRectForElement=function(t){for(var e=new goog.math.Box(0,1/0,1/0,0),o=goog.dom.getDomHelper(t),n=o.getDocument().body,r=o.getDocument().documentElement,i=o.getDocumentScrollElement();t=goog.style.getOffsetParent(t);)if(!(goog.userAgent.IE&&0==t.clientWidth||goog.userAgent.WEBKIT&&0==t.clientHeight&&t==n)&&t!=n&&t!=r&&"visible"!=goog.style.getStyle_(t,"overflow")){var s=goog.style.getPageOffset(t),a=goog.style.getClientLeftTop(t);s.x+=a.x,s.y+=a.y,e.top=Math.max(e.top,s.y),e.right=Math.min(e.right,s.x+t.clientWidth),e.bottom=Math.min(e.bottom,s.y+t.clientHeight),e.left=Math.max(e.left,s.x)}return n=i.scrollLeft,i=i.scrollTop,e.left=Math.max(e.left,n),e.top=Math.max(e.top,i),o=o.getViewportSize(),e.right=Math.min(e.right,n+o.width),e.bottom=Math.min(e.bottom,i+o.height),0<=e.top&&0<=e.left&&e.bottom>e.top&&e.right>e.left?e:null},goog.style.getContainerOffsetToScrollInto=function(t,e,o){var n=e||goog.dom.getDocumentScrollElement(),r=goog.style.getPageOffset(t),i=goog.style.getPageOffset(n),s=goog.style.getBorderBox(n);return n==goog.dom.getDocumentScrollElement()?(e=r.x-n.scrollLeft,r=r.y-n.scrollTop,goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)&&(e+=s.left,r+=s.top)):(e=r.x-i.x-s.left,r=r.y-i.y-s.top),s=goog.style.getSizeWithDisplay_(t),t=n.clientWidth-s.width,s=n.clientHeight-s.height,i=n.scrollLeft,n=n.scrollTop,o?(i+=e-t/2,n+=r-s/2):(i+=Math.min(e,Math.max(e-t,0)),n+=Math.min(r,Math.max(r-s,0))),new goog.math.Coordinate(i,n)},goog.style.scrollIntoContainerView=function(t,e,o){e=e||goog.dom.getDocumentScrollElement(),t=goog.style.getContainerOffsetToScrollInto(t,e,o),e.scrollLeft=t.x,e.scrollTop=t.y},goog.style.getClientLeftTop=function(t){return new goog.math.Coordinate(t.clientLeft,t.clientTop)},goog.style.getPageOffset=function(t){var e=goog.dom.getOwnerDocument(t);goog.asserts.assertObject(t,"Parameter is required");var o=new goog.math.Coordinate(0,0);return t==goog.style.getClientViewportElement(e)?o:(t=goog.style.getBoundingClientRect_(t),e=goog.dom.getDomHelper(e).getDocumentScroll(),o.x=t.left+e.x,o.y=t.top+e.y,o)},goog.style.getPageOffsetLeft=function(t){return goog.style.getPageOffset(t).x},goog.style.getPageOffsetTop=function(t){return goog.style.getPageOffset(t).y},goog.style.getFramedPageOffset=function(t,e){var o=new goog.math.Coordinate(0,0),n=goog.dom.getWindow(goog.dom.getOwnerDocument(t));if(!goog.reflect.canAccessProperty(n,"parent"))return o;var r=t;do{var i=n==e?goog.style.getPageOffset(r):goog.style.getClientPositionForElement_(goog.asserts.assert(r));o.x+=i.x,o.y+=i.y}while(n&&n!=e&&n!=n.parent&&(r=n.frameElement)&&(n=n.parent));return o},goog.style.translateRectForAnotherFrame=function(t,e,o){if(e.getDocument()!=o.getDocument()){var n=e.getDocument().body;o=goog.style.getFramedPageOffset(n,o.getWindow()),o=goog.math.Coordinate.difference(o,goog.style.getPageOffset(n)),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||e.isCss1CompatMode()||(o=goog.math.Coordinate.difference(o,e.getDocumentScroll())),t.left+=o.x,t.top+=o.y}},goog.style.getRelativePosition=function(t,e){var o=goog.style.getClientPosition(t),n=goog.style.getClientPosition(e);return new goog.math.Coordinate(o.x-n.x,o.y-n.y)},goog.style.getClientPositionForElement_=function(t){return t=goog.style.getBoundingClientRect_(t),new goog.math.Coordinate(t.left,t.top)},goog.style.getClientPosition=function(t){return goog.asserts.assert(t),t.nodeType==goog.dom.NodeType.ELEMENT?goog.style.getClientPositionForElement_(t):(t=t.changedTouches?t.changedTouches[0]:t,new goog.math.Coordinate(t.clientX,t.clientY))},goog.style.setPageOffset=function(t,e,o){var n=goog.style.getPageOffset(t);e instanceof goog.math.Coordinate&&(o=e.y,e=e.x),e=goog.asserts.assertNumber(e)-n.x,goog.style.setPosition(t,t.offsetLeft+e,t.offsetTop+(Number(o)-n.y))},goog.style.setSize=function(t,e,o){if(e instanceof goog.math.Size)o=e.height,e=e.width;else if(void 0==o)throw Error("missing height argument");goog.style.setWidth(t,e),goog.style.setHeight(t,o)},goog.style.getPixelStyleValue_=function(t,e){return"number"==typeof t&&(t=(e?Math.round(t):t)+"px"),t},goog.style.setHeight=function(t,e){t.style.height=goog.style.getPixelStyleValue_(e,!0)},goog.style.setWidth=function(t,e){t.style.width=goog.style.getPixelStyleValue_(e,!0)},goog.style.getSize=function(t){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,t)},goog.style.evaluateWithTemporaryDisplay_=function(t,e){if("none"!=goog.style.getStyle_(e,"display"))return t(e);var o=e.style,n=o.display,r=o.visibility,i=o.position;o.visibility="hidden",o.position="absolute",o.display="inline";var s=t(e);return o.display=n,o.position=i,o.visibility=r,s},goog.style.getSizeWithDisplay_=function(t){var e=t.offsetWidth,o=t.offsetHeight,n=goog.userAgent.WEBKIT&&!e&&!o;return goog.isDef(e)&&!n||!t.getBoundingClientRect?new goog.math.Size(e,o):(t=goog.style.getBoundingClientRect_(t),new goog.math.Size(t.right-t.left,t.bottom-t.top))},goog.style.getTransformedSize=function(t){return t.getBoundingClientRect?(t=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,t),new goog.math.Size(t.right-t.left,t.bottom-t.top)):null},goog.style.getBounds=function(t){var e=goog.style.getPageOffset(t);return t=goog.style.getSize(t),new goog.math.Rect(e.x,e.y,t.width,t.height)},goog.style.toCamelCase=function(t){return goog.string.toCamelCase(String(t))},goog.style.toSelectorCase=function(t){return goog.string.toSelectorCase(t)},goog.style.getOpacity=function(t){goog.asserts.assert(t);var e=t.style;return t="","opacity"in e?t=e.opacity:"MozOpacity"in e?t=e.MozOpacity:"filter"in e&&(e=e.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(t=String(e[1]/100)),""==t?t:Number(t)},goog.style.setOpacity=function(t,e){goog.asserts.assert(t);var o=t.style;"opacity"in o?o.opacity=e:"MozOpacity"in o?o.MozOpacity=e:"filter"in o&&(o.filter=""===e?"":"alpha(opacity="+100*Number(e)+")")},goog.style.setTransparentBackgroundImage=function(t,e){var o=t.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?o.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'", sizingMethod="crop")':(o.backgroundImage="url("+e+")",o.backgroundPosition="top left",o.backgroundRepeat="no-repeat")},goog.style.clearTransparentBackgroundImage=function(t){t=t.style,"filter"in t?t.filter="":t.backgroundImage="none"},goog.style.showElement=function(t,e){goog.style.setElementShown(t,e)},goog.style.setElementShown=function(t,e){t.style.display=e?"":"none"},goog.style.isElementShown=function(t){return"none"!=t.style.display},goog.style.installStyles=function(t,e){return goog.style.installSafeStyleSheet(goog.html.legacyconversions.safeStyleSheetFromString(t),e)},goog.style.installSafeStyleSheet=function(t,e){var o=goog.dom.getDomHelper(e),n=o.getDocument();if(goog.userAgent.IE&&n.createStyleSheet){var r=n.createStyleSheet();goog.style.setSafeStyleSheet(r,t)}else n=o.getElementsByTagNameAndClass("HEAD")[0],n||(r=o.getElementsByTagNameAndClass("BODY")[0],n=o.createDom("HEAD"),r.parentNode.insertBefore(n,r)),r=o.createDom("STYLE"),goog.style.setSafeStyleSheet(r,t),o.appendChild(n,r);return r},goog.style.uninstallStyles=function(t){goog.dom.removeNode(t.ownerNode||t.owningElement||t)},goog.style.setStyles=function(t,e){goog.style.setSafeStyleSheet(t,goog.html.legacyconversions.safeStyleSheetFromString(e))},goog.style.setSafeStyleSheet=function(t,e){var o=goog.html.SafeStyleSheet.unwrap(e);goog.userAgent.IE&&goog.isDef(t.cssText)?t.cssText=o:t.innerHTML=o},goog.style.setPreWrap=function(t){t=t.style,goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(t.whiteSpace="pre",t.wordWrap="break-word"):t.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"},goog.style.setInlineBlock=function(t){t=t.style,t.position="relative",goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(t.zoom="1",t.display="inline"):t.display="inline-block"},goog.style.isRightToLeft=function(t){return"rtl"==goog.style.getStyle_(t,"direction")},goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT||goog.userAgent.EDGE?"WebkitUserSelect":null,goog.style.isUnselectable=function(t){return goog.style.unselectableStyle_?"none"==t.style[goog.style.unselectableStyle_].toLowerCase():!(!goog.userAgent.IE&&!goog.userAgent.OPERA)&&"on"==t.getAttribute("unselectable")},goog.style.setUnselectable=function(t,e,o){o=o?null:t.getElementsByTagName("*");var n=goog.style.unselectableStyle_;if(n){if(e=e?"none":"",t.style&&(t.style[n]=e),o){t=0;for(var r;r=o[t];t++)r.style&&(r.style[n]=e)}}else if((goog.userAgent.IE||goog.userAgent.OPERA)&&(e=e?"on":"",t.setAttribute("unselectable",e),o))for(t=0;r=o[t];t++)r.setAttribute("unselectable",e)},goog.style.getBorderBoxSize=function(t){return new goog.math.Size(t.offsetWidth,t.offsetHeight)},goog.style.setBorderBoxSize=function(t,e){var o=goog.dom.getOwnerDocument(t),n=goog.dom.getDomHelper(o).isCss1CompatMode();if(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||n&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(t,e,"border-box");else if(o=t.style,n){n=goog.style.getPaddingBox(t);var r=goog.style.getBorderBox(t);o.pixelWidth=e.width-r.left-n.left-n.right-r.right,o.pixelHeight=e.height-r.top-n.top-n.bottom-r.bottom}else o.pixelWidth=e.width,o.pixelHeight=e.height},goog.style.getContentBoxSize=function(t){var e=goog.dom.getOwnerDocument(t),o=goog.userAgent.IE&&t.currentStyle;return o&&goog.dom.getDomHelper(e).isCss1CompatMode()&&"auto"!=o.width&&"auto"!=o.height&&!o.boxSizing?(e=goog.style.getIePixelValue_(t,o.width,"width","pixelWidth"),t=goog.style.getIePixelValue_(t,o.height,"height","pixelHeight"),new goog.math.Size(e,t)):(o=goog.style.getBorderBoxSize(t),e=goog.style.getPaddingBox(t),t=goog.style.getBorderBox(t),new goog.math.Size(o.width-t.left-e.left-e.right-t.right,o.height-t.top-e.top-e.bottom-t.bottom))},goog.style.setContentBoxSize=function(t,e){var o=goog.dom.getOwnerDocument(t),n=goog.dom.getDomHelper(o).isCss1CompatMode();if(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||n&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(t,e,"content-box");else if(o=t.style,n)o.pixelWidth=e.width,o.pixelHeight=e.height;else{n=goog.style.getPaddingBox(t);var r=goog.style.getBorderBox(t);o.pixelWidth=e.width+r.left+n.left+n.right+r.right,o.pixelHeight=e.height+r.top+n.top+n.bottom+r.bottom}},goog.style.setBoxSizingSize_=function(t,e,o){t=t.style,goog.userAgent.GECKO?t.MozBoxSizing=o:goog.userAgent.WEBKIT?t.WebkitBoxSizing=o:t.boxSizing=o,t.width=Math.max(e.width,0)+"px",t.height=Math.max(e.height,0)+"px"},goog.style.getIePixelValue_=function(t,e,o,n){if(/^\d+px?$/.test(e))return parseInt(e,10);var r=t.style[o],i=t.runtimeStyle[o];return t.runtimeStyle[o]=t.currentStyle[o],t.style[o]=e,e=t.style[n],t.style[o]=r,t.runtimeStyle[o]=i,+e},goog.style.getIePixelDistance_=function(t,e){var o=goog.style.getCascadedStyle(t,e);return o?goog.style.getIePixelValue_(t,o,"left","pixelLeft"):0},goog.style.getBox_=function(t,e){if(goog.userAgent.IE){var o=goog.style.getIePixelDistance_(t,e+"Left"),n=goog.style.getIePixelDistance_(t,e+"Right"),r=goog.style.getIePixelDistance_(t,e+"Top"),i=goog.style.getIePixelDistance_(t,e+"Bottom");return new goog.math.Box(r,n,i,o)}return o=goog.style.getComputedStyle(t,e+"Left"),n=goog.style.getComputedStyle(t,e+"Right"),r=goog.style.getComputedStyle(t,e+"Top"),i=goog.style.getComputedStyle(t,e+"Bottom"),new goog.math.Box(parseFloat(r),parseFloat(n),parseFloat(i),parseFloat(o))},goog.style.getPaddingBox=function(t){return goog.style.getBox_(t,"padding")},goog.style.getMarginBox=function(t){return goog.style.getBox_(t,"margin")},goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6},goog.style.getIePixelBorder_=function(t,e){if("none"==goog.style.getCascadedStyle(t,e+"Style"))return 0;var o=goog.style.getCascadedStyle(t,e+"Width");return o in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[o]:goog.style.getIePixelValue_(t,o,"left","pixelLeft")},goog.style.getBorderBox=function(t){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var e=goog.style.getIePixelBorder_(t,"borderLeft"),o=goog.style.getIePixelBorder_(t,"borderRight"),n=goog.style.getIePixelBorder_(t,"borderTop");return t=goog.style.getIePixelBorder_(t,"borderBottom"),new goog.math.Box(n,o,t,e)}return e=goog.style.getComputedStyle(t,"borderLeftWidth"),o=goog.style.getComputedStyle(t,"borderRightWidth"),n=goog.style.getComputedStyle(t,"borderTopWidth"),t=goog.style.getComputedStyle(t,"borderBottomWidth"),new goog.math.Box(parseFloat(n),parseFloat(o),parseFloat(t),parseFloat(e))},goog.style.getFontFamily=function(t){var e=goog.dom.getOwnerDocument(t),o="";if(e.body.createTextRange&&goog.dom.contains(e,t)){e=e.body.createTextRange(),e.moveToElementText(t);try{o=e.queryCommandValue("FontName")}catch(t){o=""}}return o||(o=goog.style.getStyle_(t,"fontFamily")),t=o.split(","),1<t.length&&(o=t[0]),goog.string.stripQuotes(o,"\"'")},goog.style.lengthUnitRegex_=/[^\d]+$/,goog.style.getLengthUnits=function(t){return(t=t.match(goog.style.lengthUnitRegex_))&&t[0]||null},goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,in:1,mm:1,pc:1,pt:1},goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1},goog.style.getFontSize=function(t){var e=goog.style.getStyle_(t,"fontSize"),o=goog.style.getLengthUnits(e);if(e&&"px"==o)return parseInt(e,10);if(goog.userAgent.IE){if(String(o)in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(t,e,"left","pixelLeft");if(t.parentNode&&t.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&String(o)in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return t=t.parentNode,o=goog.style.getStyle_(t,"fontSize"),goog.style.getIePixelValue_(t,e==o?"1em":e,"left","pixelLeft")}return o=goog.dom.createDom("SPAN",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"}),goog.dom.appendChild(t,o),e=o.offsetHeight,goog.dom.removeNode(o),e},goog.style.parseStyleAttribute=function(t){var e={};return goog.array.forEach(t.split(/\s*;\s*/),function(t){var o=t.match(/\s*([\w-]+)\s*\:(.+)/);o&&(t=o[1],o=goog.string.trim(o[2]),e[goog.string.toCamelCase(t.toLowerCase())]=o)}),e},goog.style.toStyleAttribute=function(t){var e=[];return goog.object.forEach(t,function(t,o){e.push(goog.string.toSelectorCase(o),":",t,";")}),e.join("")},goog.style.setFloat=function(t,e){t.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=e},goog.style.getFloat=function(t){return t.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""},goog.style.getScrollbarWidth=function(t){var e=goog.dom.createElement("DIV");return t&&(e.className=t),e.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px",t=goog.dom.createElement("DIV"),goog.style.setSize(t,"200px","200px"),e.appendChild(t),goog.dom.appendChild(goog.dom.getDocument().body,e),t=e.offsetWidth-e.clientWidth,goog.dom.removeNode(e),t},goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/,goog.style.getCssTranslation=function(t){return t=goog.style.getComputedTransform(t),t&&(t=t.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(t[1]),parseFloat(t[2])):new goog.math.Coordinate(0,0)},goog.events.EventHandler=function(t){goog.Disposable.call(this),this.handler_=t,this.keys_={}},goog.inherits(goog.events.EventHandler,goog.Disposable),goog.events.EventHandler.typeArray_=[],goog.events.EventHandler.prototype.listen=function(t,e,o,n){return this.listen_(t,e,o,n)},goog.events.EventHandler.prototype.listenWithScope=function(t,e,o,n,r){return this.listen_(t,e,o,n,r)},goog.events.EventHandler.prototype.listen_=function(t,e,o,n,r){goog.isArray(e)||(e&&(goog.events.EventHandler.typeArray_[0]=e.toString()),e=goog.events.EventHandler.typeArray_);for(var i=0;i<e.length;i++){var s=goog.events.listen(t,e[i],o||this.handleEvent,n||!1,r||this.handler_||this);if(!s)break;this.keys_[s.key]=s}return this},goog.events.EventHandler.prototype.listenOnce=function(t,e,o,n){return this.listenOnce_(t,e,o,n)},goog.events.EventHandler.prototype.listenOnceWithScope=function(t,e,o,n,r){return this.listenOnce_(t,e,o,n,r)},goog.events.EventHandler.prototype.listenOnce_=function(t,e,o,n,r){if(goog.isArray(e))for(var i=0;i<e.length;i++)this.listenOnce_(t,e[i],o,n,r);else{if(!(t=goog.events.listenOnce(t,e,o||this.handleEvent,n,r||this.handler_||this)))return this;this.keys_[t.key]=t}return this},goog.events.EventHandler.prototype.listenWithWrapper=function(t,e,o,n){return this.listenWithWrapper_(t,e,o,n)},goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(t,e,o,n,r){return this.listenWithWrapper_(t,e,o,n,r)},goog.events.EventHandler.prototype.listenWithWrapper_=function(t,e,o,n,r){return e.listen(t,o,n,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.getListenerCount=function(){var t,e=0;for(t in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,t)&&e++;return e},goog.events.EventHandler.prototype.unlisten=function(t,e,o,n,r){if(goog.isArray(e))for(var i=0;i<e.length;i++)this.unlisten(t,e[i],o,n,r);else n=goog.isObject(n)?!!n.capture:!!n,(t=goog.events.getListener(t,e,o||this.handleEvent,n,r||this.handler_||this))&&(goog.events.unlistenByKey(t),delete this.keys_[t.key]);return this},goog.events.EventHandler.prototype.unlistenWithWrapper=function(t,e,o,n,r){return e.unlisten(t,o,n,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(t,e){this.keys_.hasOwnProperty(e)&&goog.events.unlistenByKey(t)},this),this.keys_={}},goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this),this.removeAll()},goog.events.EventHandler.prototype.handleEvent=function(t){throw Error("EventHandler.handleEvent not implemented")},goog.ui={},goog.ui.IdGenerator=function(){},goog.addSingletonGetter(goog.ui.IdGenerator),goog.ui.IdGenerator.prototype.nextId_=0,goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)},goog.ui.Component=function(t){goog.events.EventTarget.call(this),this.dom_=t||goog.dom.getDomHelper(),this.rightToLeft_=goog.ui.Component.defaultRightToLeft_,this.id_=null,this.inDocument_=!1,this.element_=null,this.googUiComponentHandler_=void 0,this.childIndex_=this.children_=this.parent_=this.model_=null,this.wasDecorated_=!1},goog.inherits(goog.ui.Component,goog.events.EventTarget),goog.ui.Component.ALLOW_DETACHED_DECORATION=!1,goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance(),goog.ui.Component.DEFAULT_BIDI_DIR=0,goog.ui.Component.defaultRightToLeft_=1!=goog.ui.Component.DEFAULT_BIDI_DIR&&(-1==goog.ui.Component.DEFAULT_BIDI_DIR||null),goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"},goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"},goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64},goog.ui.Component.getStateTransitionEvent=function(t,e){switch(t){case goog.ui.Component.State.DISABLED:return e?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return e?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return e?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return e?goog.ui.Component.EventType.SELECT:goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return e?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return e?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return e?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID)},goog.ui.Component.setDefaultRightToLeft=function(t){goog.ui.Component.defaultRightToLeft_=t},goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())},goog.ui.Component.prototype.setId=function(t){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,t,this)),this.id_=t},goog.ui.Component.prototype.getElement=function(){return this.element_},goog.ui.Component.prototype.getElementStrict=function(){var t=this.element_;return goog.asserts.assert(t,"Can not call getElementStrict before rendering/decorating."),t},goog.ui.Component.prototype.setElementInternal=function(t){this.element_=t},goog.ui.Component.prototype.getElementsByClass=function(t){return this.element_?this.dom_.getElementsByClass(t,this.element_):[]},goog.ui.Component.prototype.getElementByClass=function(t){return this.element_?this.dom_.getElementByClass(t,this.element_):null},goog.ui.Component.prototype.getRequiredElementByClass=function(t){var e=this.getElementByClass(t);return goog.asserts.assert(e,"Expected element in component with class: %s",t),e},goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this)),this.googUiComponentHandler_},goog.ui.Component.prototype.setParent=function(t){if(this==t)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(t&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=t)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=t,goog.ui.Component.superClass_.setParentEventTarget.call(this,t)},goog.ui.Component.prototype.getParent=function(){return this.parent_},goog.ui.Component.prototype.setParentEventTarget=function(t){if(this.parent_&&this.parent_!=t)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,t)},goog.ui.Component.prototype.getDomHelper=function(){return this.dom_},goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_},goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("DIV")},goog.ui.Component.prototype.render=function(t){this.render_(t)},goog.ui.Component.prototype.renderBefore=function(t){this.render_(t.parentNode,t)},goog.ui.Component.prototype.render_=function(t,e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),t?t.insertBefore(this.element_,e||null):this.dom_.getDocument().body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},goog.ui.Component.prototype.decorate=function(t){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(!t||!this.canDecorate(t))throw Error(goog.ui.Component.Error.DECORATE_INVALID);this.wasDecorated_=!0;var e=goog.dom.getOwnerDocument(t);this.dom_&&this.dom_.getDocument()==e||(this.dom_=goog.dom.getDomHelper(t)),this.decorateInternal(t),goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(e,t)||this.enterDocument()},goog.ui.Component.prototype.canDecorate=function(t){return!0},goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_},goog.ui.Component.prototype.decorateInternal=function(t){this.element_=t},goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild(function(t){!t.isInDocument()&&t.getElement()&&t.enterDocument()})},goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(t){t.isInDocument()&&t.exitDocument()}),this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll(),this.inDocument_=!1},goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_),this.forEachChild(function(t){t.dispose()}),!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_),this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null,goog.ui.Component.superClass_.disposeInternal.call(this)},goog.ui.Component.prototype.makeId=function(t){return this.getId()+"."+t},goog.ui.Component.prototype.makeIds=function(t){var e,o={};for(e in t)o[e]=this.makeId(t[e]);return o},goog.ui.Component.prototype.getModel=function(){return this.model_},goog.ui.Component.prototype.setModel=function(t){this.model_=t},goog.ui.Component.prototype.getFragmentFromId=function(t){return t.substring(this.getId().length+1)},goog.ui.Component.prototype.getElementByFragment=function(t){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(t))},goog.ui.Component.prototype.addChild=function(t,e){this.addChildAt(t,this.getChildCount(),e)},goog.ui.Component.prototype.addChildAt=function(t,e,o){if(goog.asserts.assert(!!t,"Provided element must not be null."),t.inDocument_&&(o||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>e||e>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]),t.getParent()==this?(goog.object.set(this.childIndex_,t.getId(),t),goog.array.remove(this.children_,t)):goog.object.add(this.childIndex_,t.getId(),t),t.setParent(this),goog.array.insertAt(this.children_,t,e),t.inDocument_&&this.inDocument_&&t.getParent()==this?(o=this.getContentElement(),(e=o.childNodes[e]||null)!=t.getElement()&&o.insertBefore(t.getElement(),e)):o?(this.element_||this.createDom(),e=this.getChildAt(e+1),t.render_(this.getContentElement(),e?e.element_:null)):this.inDocument_&&!t.inDocument_&&t.element_&&t.element_.parentNode&&t.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&t.enterDocument()},goog.ui.Component.prototype.getContentElement=function(){return this.element_},goog.ui.Component.prototype.isRightToLeft=function(){return null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body)),this.rightToLeft_},goog.ui.Component.prototype.setRightToLeft=function(t){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=t},goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length},goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0},goog.ui.Component.prototype.getChildIds=function(){var t=[];return this.forEachChild(function(e){t.push(e.getId())}),t},goog.ui.Component.prototype.getChild=function(t){return this.childIndex_&&t?goog.object.get(this.childIndex_,t)||null:null},goog.ui.Component.prototype.getChildAt=function(t){return this.children_?this.children_[t]||null:null},goog.ui.Component.prototype.forEachChild=function(t,e){this.children_&&goog.array.forEach(this.children_,t,e)},goog.ui.Component.prototype.indexOfChild=function(t){return this.children_&&t?goog.array.indexOf(this.children_,t):-1},goog.ui.Component.prototype.removeChild=function(t,e){if(t){var o=goog.isString(t)?t:t.getId();t=this.getChild(o),o&&t&&(goog.object.remove(this.childIndex_,o),goog.array.remove(this.children_,t),e&&(t.exitDocument(),t.element_&&goog.dom.removeNode(t.element_)),t.setParent(null))}if(!t)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return t},goog.ui.Component.prototype.removeChildAt=function(t,e){return this.removeChild(this.getChildAt(t),e)},goog.ui.Component.prototype.removeChildren=function(t){for(var e=[];this.hasChildren();)e.push(this.removeChildAt(0,t));return e},goog.a11y={},goog.a11y.aria={},goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"},goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"},goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"},goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"},goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"},goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"},goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"},goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"},goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.datatables={},goog.a11y.aria.datatables.getDefaultValuesMap=function(){return goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false")),goog.a11y.aria.DefaultStateValueMap_},goog.a11y.aria.ARIA_PREFIX_="aria-",goog.a11y.aria.ROLE_ATTRIBUTE_="role",goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=goog.object.createSet("A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(" ")),goog.a11y.aria.CONTAINER_ROLES_=[goog.a11y.aria.Role.COMBOBOX,goog.a11y.aria.Role.GRID,goog.a11y.aria.Role.GROUP,goog.a11y.aria.Role.LISTBOX,goog.a11y.aria.Role.MENU,goog.a11y.aria.Role.MENUBAR,goog.a11y.aria.Role.RADIOGROUP,goog.a11y.aria.Role.ROW,goog.a11y.aria.Role.ROWGROUP,goog.a11y.aria.Role.TAB_LIST,goog.a11y.aria.Role.TEXTBOX,goog.a11y.aria.Role.TOOLBAR,goog.a11y.aria.Role.TREE,goog.a11y.aria.Role.TREEGRID],goog.a11y.aria.setRole=function(t,e){e?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,e),"No such ARIA role "+e),t.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,e)):goog.a11y.aria.removeRole(t)},goog.a11y.aria.getRole=function(t){return t.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null},goog.a11y.aria.removeRole=function(t){t.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)},goog.a11y.aria.setState=function(t,e,o){goog.isArray(o)&&(o=o.join(" "));var n=goog.a11y.aria.getAriaAttributeName_(e);""===o||void 0==o?(o=goog.a11y.aria.datatables.getDefaultValuesMap(),e in o?t.setAttribute(n,o[e]):t.removeAttribute(n)):t.setAttribute(n,o)},goog.a11y.aria.toggleState=function(t,e){var o=goog.a11y.aria.getState(t,e);goog.string.isEmptyOrWhitespace(goog.string.makeSafe(o))||"true"==o||"false"==o?goog.a11y.aria.setState(t,e,"true"==o?"false":"true"):goog.a11y.aria.removeState(t,e)},goog.a11y.aria.removeState=function(t,e){t.removeAttribute(goog.a11y.aria.getAriaAttributeName_(e))},goog.a11y.aria.getState=function(t,e){var o=t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e));return null==o||void 0==o?"":String(o)},goog.a11y.aria.getActiveDescendant=function(t){var e=goog.a11y.aria.getState(t,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(t).getElementById(e)},goog.a11y.aria.setActiveDescendant=function(t,e){var o="";e&&(o=e.id,goog.asserts.assert(o,"The active element should have an id.")),goog.a11y.aria.setState(t,goog.a11y.aria.State.ACTIVEDESCENDANT,o)},goog.a11y.aria.getLabel=function(t){return goog.a11y.aria.getState(t,goog.a11y.aria.State.LABEL)},goog.a11y.aria.setLabel=function(t,e){goog.a11y.aria.setState(t,goog.a11y.aria.State.LABEL,e)},goog.a11y.aria.assertRoleIsSetInternalUtil=function(t,e){if(!goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[t.tagName]){var o=goog.a11y.aria.getRole(t);goog.asserts.assert(null!=o,"The element ARIA role cannot be null."),goog.asserts.assert(goog.array.contains(e,o),'Non existing or incorrect role set for element.The role set is "'+o+'". The role should be any of "'+e+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.')}},goog.a11y.aria.getStateBoolean=function(t,e){var o=t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e));return goog.asserts.assert(goog.isBoolean(o)||null==o||"true"==o||"false"==o),null==o?o:goog.isBoolean(o)?o:"true"==o},goog.a11y.aria.getStateNumber=function(t,e){var o=t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e));return goog.asserts.assert(!(null!=o&&isNaN(Number(o))||goog.isBoolean(o))),null==o?null:Number(o)},goog.a11y.aria.getStateString=function(t,e){var o=t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e));return goog.asserts.assert((null==o||goog.isString(o))&&(""==o||isNaN(Number(o)))&&"true"!=o&&"false"!=o),null==o||""==o?null:o},goog.a11y.aria.getStringArrayStateInternalUtil=function(t,e){var o=t.getAttribute(goog.a11y.aria.getAriaAttributeName_(e));return goog.a11y.aria.splitStringOnWhitespace_(o)},goog.a11y.aria.hasState=function(t,e){return t.hasAttribute(goog.a11y.aria.getAriaAttributeName_(e))},goog.a11y.aria.isContainerRole=function(t){return t=goog.a11y.aria.getRole(t),goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_,t)},goog.a11y.aria.splitStringOnWhitespace_=function(t){return t?t.split(/\s+/):[]},goog.a11y.aria.getAriaAttributeName_=function(t){return goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(t,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,t),"No such ARIA attribute "+t)),goog.a11y.aria.ARIA_PREFIX_+t},goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},goog.events.KeyCodes.isTextModifyingKeyEvent=function(t){if(t.altKey&&!t.ctrlKey||t.metaKey||t.keyCode>=goog.events.KeyCodes.F1&&t.keyCode<=goog.events.KeyCodes.F12)return!1;switch(t.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;default:return t.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||t.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}},goog.events.KeyCodes.firesKeyPressEvent=function(t,e,o,n,r,i){if(!(goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&r)return goog.events.KeyCodes.isCharacterKey(t);if(r&&!n)return!1;if(goog.isNumber(e)&&(e=goog.events.KeyCodes.normalizeKeyCode(e)),r=e==goog.events.KeyCodes.CTRL||e==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&e==goog.events.KeyCodes.META,i=e==goog.events.KeyCodes.SHIFT&&(n||i),(!o||goog.userAgent.MAC)&&r||goog.userAgent.MAC&&i)return!1;if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&n&&o)switch(t){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&n&&e==t)return!1;switch(t){case goog.events.KeyCodes.ENTER:return!0;case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE)}return goog.events.KeyCodes.isCharacterKey(t)},goog.events.KeyCodes.isCharacterKey=function(t){if(t>=goog.events.KeyCodes.ZERO&&t<=goog.events.KeyCodes.NINE||t>=goog.events.KeyCodes.NUM_ZERO&&t<=goog.events.KeyCodes.NUM_MULTIPLY||t>=goog.events.KeyCodes.A&&t<=goog.events.KeyCodes.Z||(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&0==t)return!0;switch(t){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.PLUS_SIGN:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},goog.events.KeyCodes.normalizeKeyCode=function(t){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(t):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(t):t},goog.events.KeyCodes.normalizeGeckoKeyCode=function(t){switch(t){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return t}},goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(t){switch(t){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return t}},goog.events.KeyHandler=function(t,e){goog.events.EventTarget.call(this),t&&this.attach(t,e)},goog.inherits(goog.events.KeyHandler,goog.events.EventTarget),goog.events.KeyHandler.prototype.element_=null,goog.events.KeyHandler.prototype.keyPressKey_=null,goog.events.KeyHandler.prototype.keyDownKey_=null,goog.events.KeyHandler.prototype.keyUpKey_=null,goog.events.KeyHandler.prototype.lastKey_=-1,goog.events.KeyHandler.prototype.keyCode_=-1,goog.events.KeyHandler.prototype.altKey_=!1,goog.events.KeyHandler.EventType={KEY:"key"},goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525"),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO,goog.events.KeyHandler.prototype.handleKeyDown_=function(t){(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!t.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!t.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!t.metaKey)&&this.resetState(),-1==this.lastKey_&&(t.ctrlKey&&t.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:t.altKey&&t.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:t.metaKey&&t.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META)),goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(t.keyCode,this.lastKey_,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey)?this.handleEvent(t):(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(t.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=t.altKey))},goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.handleKeyup_=function(t){this.resetState(),this.altKey_=t.altKey},goog.events.KeyHandler.prototype.handleEvent=function(t){var e=t.getBrowserEvent(),o=e.altKey;if(goog.userAgent.IE&&t.type==goog.events.EventType.KEYPRESS)var n=this.keyCode_,r=n!=goog.events.KeyCodes.ENTER&&n!=goog.events.KeyCodes.ESC?e.keyCode:0;else(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&t.type==goog.events.EventType.KEYPRESS?(n=this.keyCode_,r=0<=e.charCode&&63232>e.charCode&&goog.events.KeyCodes.isCharacterKey(n)?e.charCode:0):goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?(n=this.keyCode_,r=goog.events.KeyCodes.isCharacterKey(n)?e.keyCode:0):(n=e.keyCode||this.keyCode_,r=e.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(o=this.altKey_),goog.userAgent.MAC&&r==goog.events.KeyCodes.QUESTION_MARK&&n==goog.events.KeyCodes.WIN_KEY&&(n=goog.events.KeyCodes.SLASH));var i=n=goog.events.KeyCodes.normalizeKeyCode(n);n?63232<=n&&n in goog.events.KeyHandler.safariKey_?i=goog.events.KeyHandler.safariKey_[n]:25==n&&t.shiftKey&&(i=9):e.keyIdentifier&&e.keyIdentifier in goog.events.KeyHandler.keyIdentifier_&&(i=goog.events.KeyHandler.keyIdentifier_[e.keyIdentifier]),t=i==this.lastKey_,this.lastKey_=i,e=new goog.events.KeyEvent(i,r,t,e),e.altKey=o,this.dispatchEvent(e)},goog.events.KeyHandler.prototype.getElement=function(){return this.element_},goog.events.KeyHandler.prototype.attach=function(t,e){this.keyUpKey_&&this.detach(),this.element_=t,this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,e),this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,e,this),this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,e,this)},goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null),this.element_=null,this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this),this.detach()},goog.events.KeyEvent=function(t,e,o,n){goog.events.BrowserEvent.call(this,n),this.type=goog.events.KeyHandler.EventType.KEY,this.keyCode=t,this.charCode=e,this.repeat=o},goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent),goog.dom.classlist={},goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1,goog.dom.classlist.get=function(t){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList?t.classList:(t=t.className,goog.isString(t)&&t.match(/\S+/g)||[])},goog.dom.classlist.set=function(t,e){t.className=e},goog.dom.classlist.contains=function(t,e){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList?t.classList.contains(e):goog.array.contains(goog.dom.classlist.get(t),e)},goog.dom.classlist.add=function(t,e){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList?t.classList.add(e):goog.dom.classlist.contains(t,e)||(t.className+=0<t.className.length?" "+e:e)},goog.dom.classlist.addAll=function(t,e){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList)goog.array.forEach(e,function(e){goog.dom.classlist.add(t,e)});else{var o={};goog.array.forEach(goog.dom.classlist.get(t),function(t){o[t]=!0}),goog.array.forEach(e,function(t){o[t]=!0}),t.className="";for(var n in o)t.className+=0<t.className.length?" "+n:n}},goog.dom.classlist.remove=function(t,e){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList?t.classList.remove(e):goog.dom.classlist.contains(t,e)&&(t.className=goog.array.filter(goog.dom.classlist.get(t),function(t){return t!=e}).join(" "))},goog.dom.classlist.removeAll=function(t,e){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList?goog.array.forEach(e,function(e){goog.dom.classlist.remove(t,e)}):t.className=goog.array.filter(goog.dom.classlist.get(t),function(t){return!goog.array.contains(e,t)}).join(" ")},goog.dom.classlist.enable=function(t,e,o){o?goog.dom.classlist.add(t,e):goog.dom.classlist.remove(t,e)},goog.dom.classlist.enableAll=function(t,e,o){(o?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(t,e)},goog.dom.classlist.swap=function(t,e,o){return!!goog.dom.classlist.contains(t,e)&&(goog.dom.classlist.remove(t,e),goog.dom.classlist.add(t,o),!0)},goog.dom.classlist.toggle=function(t,e){var o=!goog.dom.classlist.contains(t,e);return goog.dom.classlist.enable(t,e,o),o},goog.dom.classlist.addRemove=function(t,e,o){goog.dom.classlist.remove(t,e),goog.dom.classlist.add(t,o)},goog.ui.registry={},goog.ui.registry.getDefaultRenderer=function(t){for(var e;t&&(e=goog.getUid(t),!(e=goog.ui.registry.defaultRenderers_[e]));)t=t.superClass_?t.superClass_.constructor:null;return e?goog.isFunction(e.getInstance)?e.getInstance():new e:null},goog.ui.registry.setDefaultRenderer=function(t,e){if(!goog.isFunction(t))throw Error("Invalid component class "+t);if(!goog.isFunction(e))throw Error("Invalid renderer class "+e);var o=goog.getUid(t);goog.ui.registry.defaultRenderers_[o]=e},goog.ui.registry.getDecoratorByClassName=function(t){return t in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[t]():null},goog.ui.registry.setDecoratorByClassName=function(t,e){if(!t)throw Error("Invalid class name "+t);if(!goog.isFunction(e))throw Error("Invalid decorator function "+e);goog.ui.registry.decoratorFunctions_[t]=e},goog.ui.registry.getDecorator=function(t){goog.asserts.assert(t);for(var e=goog.dom.classlist.get(t),o=0,n=e.length;o<n;o++)if(t=goog.ui.registry.getDecoratorByClassName(e[o]))return t;return null},goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={}},goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={},goog.ui.ContainerRenderer=function(t){this.ariaRole_=t},goog.addSingletonGetter(goog.ui.ContainerRenderer),goog.ui.ContainerRenderer.getCustomRenderer=function(t,e){var o=new t;return o.getCssClass=function(){return e},o},goog.ui.ContainerRenderer.CSS_CLASS="goog-container",goog.ui.ContainerRenderer.prototype.getAriaRole=function(){return this.ariaRole_},goog.ui.ContainerRenderer.prototype.enableTabIndex=function(t,e){t&&(t.tabIndex=e?0:-1)},goog.ui.ContainerRenderer.prototype.createDom=function(t){return t.getDomHelper().createDom("DIV",this.getClassNames(t).join(" "))},goog.ui.ContainerRenderer.prototype.getContentElement=function(t){return t},goog.ui.ContainerRenderer.prototype.canDecorate=function(t){return"DIV"==t.tagName},goog.ui.ContainerRenderer.prototype.decorate=function(t,e){e.id&&t.setId(e.id);var o=this.getCssClass(),n=!1,r=goog.dom.classlist.get(e);return r&&goog.array.forEach(r,function(e){e==o?n=!0:e&&this.setStateFromClassName(t,e,o)},this),n||goog.dom.classlist.add(e,o),this.decorateChildren(t,this.getContentElement(e)),e},goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(t,e,o){e==o+"-disabled"?t.setEnabled(!1):e==o+"-horizontal"?t.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):e==o+"-vertical"&&t.setOrientation(goog.ui.Container.Orientation.VERTICAL)},goog.ui.ContainerRenderer.prototype.decorateChildren=function(t,e,o){if(e){o=o||e.firstChild;for(var n;o&&o.parentNode==e;){if(n=o.nextSibling,o.nodeType==goog.dom.NodeType.ELEMENT){var r=this.getDecoratorForChild(o);r&&(r.setElementInternal(o),t.isEnabled()||r.setEnabled(!1),t.addChild(r),r.decorate(o))}else o.nodeValue&&""!=goog.string.trim(o.nodeValue)||e.removeChild(o);o=n}}},goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(t){return goog.ui.registry.getDecorator(t)},goog.ui.ContainerRenderer.prototype.initializeDom=function(t){t=t.getElement(),goog.asserts.assert(t,"The container DOM element cannot be null."),goog.style.setUnselectable(t,!0,goog.userAgent.GECKO),goog.userAgent.IE&&(t.hideFocus=!0);var e=this.getAriaRole();e&&goog.a11y.aria.setRole(t,e)},goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(t){return t.getElement()},goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS},goog.ui.ContainerRenderer.prototype.getClassNames=function(t){var e=this.getCssClass(),o=t.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL;return o=[e,o?e+"-horizontal":e+"-vertical"],t.isEnabled()||o.push(e+"-disabled"),o},goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL},goog.ui.ControlRenderer=function(){},goog.addSingletonGetter(goog.ui.ControlRenderer),goog.tagUnsealableClass(goog.ui.ControlRenderer),goog.ui.ControlRenderer.getCustomRenderer=function(t,e){var o=new t;return o.getCssClass=function(){return e},o},goog.ui.ControlRenderer.CSS_CLASS="goog-control",goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[],goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_=goog.object.create(goog.a11y.aria.Role.BUTTON,goog.a11y.aria.State.PRESSED,goog.a11y.aria.Role.CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.MENU_ITEM_CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM_RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.TAB,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.TREEITEM,goog.a11y.aria.State.SELECTED),goog.ui.ControlRenderer.prototype.getAriaRole=function(){},goog.ui.ControlRenderer.prototype.createDom=function(t){return t.getDomHelper().createDom("DIV",this.getClassNames(t).join(" "),t.getContent())},goog.ui.ControlRenderer.prototype.getContentElement=function(t){return t},goog.ui.ControlRenderer.prototype.enableClassName=function(t,e,o){if(t=t.getElement?t.getElement():t){var n=[e];goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&(n=this.getAppliedCombinedClassNames_(goog.dom.classlist.get(t),e),n.push(e)),goog.dom.classlist.enableAll(t,n,o)}},goog.ui.ControlRenderer.prototype.enableExtraClassName=function(t,e,o){this.enableClassName(t,e,o)},goog.ui.ControlRenderer.prototype.canDecorate=function(t){return!0},goog.ui.ControlRenderer.prototype.decorate=function(t,e){e.id&&t.setId(e.id);var o=this.getContentElement(e);o&&o.firstChild?t.setContentInternal(o.firstChild.nextSibling?goog.array.clone(o.childNodes):o.firstChild):t.setContentInternal(null);var n=0,r=this.getCssClass(),i=this.getStructuralCssClass(),s=!1,a=!1,l=!1,c=goog.array.toArray(goog.dom.classlist.get(e));goog.array.forEach(c,function(t){s||t!=r?a||t!=i?n|=this.getStateFromClass(t):a=!0:(s=!0,i==r&&(a=!0)),this.getStateFromClass(t)==goog.ui.Component.State.DISABLED&&(goog.asserts.assertElement(o),goog.dom.isFocusableTabIndex(o)&&goog.dom.setFocusableTabIndex(o,!1))},this),t.setStateInternal(n),s||(c.push(r),i==r&&(a=!0)),a||c.push(i);var u=t.getExtraClassNames();if(u&&c.push.apply(c,u),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var g=this.getAppliedCombinedClassNames_(c);0<g.length&&(c.push.apply(c,g),l=!0)}return s&&a&&!u&&!l||goog.dom.classlist.set(e,c.join(" ")),e},goog.ui.ControlRenderer.prototype.initializeDom=function(t){t.isRightToLeft()&&this.setRightToLeft(t.getElement(),!0),t.isEnabled()&&this.setFocusable(t,t.isVisible())},goog.ui.ControlRenderer.prototype.setAriaRole=function(t,e){var o=e||this.getAriaRole();if(o){goog.asserts.assert(t,"The element passed as a first parameter cannot be null.");o!=goog.a11y.aria.getRole(t)&&goog.a11y.aria.setRole(t,o)}},goog.ui.ControlRenderer.prototype.setAriaStates=function(t,e){goog.asserts.assert(t),goog.asserts.assert(e);var o=t.getAriaLabel();goog.isDefAndNotNull(o)&&this.setAriaLabel(e,o),t.isVisible()||goog.a11y.aria.setState(e,goog.a11y.aria.State.HIDDEN,!t.isVisible()),t.isEnabled()||this.updateAriaState(e,goog.ui.Component.State.DISABLED,!t.isEnabled()),t.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(e,goog.ui.Component.State.SELECTED,t.isSelected()),t.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(e,goog.ui.Component.State.CHECKED,t.isChecked()),t.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(e,goog.ui.Component.State.OPENED,t.isOpen())},goog.ui.ControlRenderer.prototype.setAriaLabel=function(t,e){goog.a11y.aria.setLabel(t,e)},goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(t,e){goog.style.setUnselectable(t,!e,!goog.userAgent.IE&&!goog.userAgent.OPERA)},goog.ui.ControlRenderer.prototype.setRightToLeft=function(t,e){this.enableClassName(t,this.getStructuralCssClass()+"-rtl",e)},goog.ui.ControlRenderer.prototype.isFocusable=function(t){var e;return!(!t.isSupportedState(goog.ui.Component.State.FOCUSED)||!(e=t.getKeyEventTarget()))&&goog.dom.isFocusableTabIndex(e)},goog.ui.ControlRenderer.prototype.setFocusable=function(t,e){var o;if(t.isSupportedState(goog.ui.Component.State.FOCUSED)&&(o=t.getKeyEventTarget())){if(!e&&t.isFocused()){try{o.blur()}catch(t){}t.isFocused()&&t.handleBlur(null)}goog.dom.isFocusableTabIndex(o)!=e&&goog.dom.setFocusableTabIndex(o,e)}},goog.ui.ControlRenderer.prototype.setVisible=function(t,e){goog.style.setElementShown(t,e),t&&goog.a11y.aria.setState(t,goog.a11y.aria.State.HIDDEN,!e)},goog.ui.ControlRenderer.prototype.setState=function(t,e,o){var n=t.getElement();if(n){var r=this.getClassForState(e);r&&this.enableClassName(t,r,o),this.updateAriaState(n,e,o)}},goog.ui.ControlRenderer.prototype.updateAriaState=function(t,e,o){goog.ui.ControlRenderer.ariaAttributeMap_||(goog.ui.ControlRenderer.ariaAttributeMap_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED)),goog.asserts.assert(t,"The element passed as a first parameter cannot be null."),(e=goog.ui.ControlRenderer.getAriaStateForAriaRole_(t,goog.ui.ControlRenderer.ariaAttributeMap_[e]))&&goog.a11y.aria.setState(t,e,o)},goog.ui.ControlRenderer.getAriaStateForAriaRole_=function(t,e){var o=goog.a11y.aria.getRole(t);return o?(o=goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[o]||e,goog.ui.ControlRenderer.isAriaState_(e)?o:e):e},goog.ui.ControlRenderer.isAriaState_=function(t){return t==goog.a11y.aria.State.CHECKED||t==goog.a11y.aria.State.SELECTED},goog.ui.ControlRenderer.prototype.setContent=function(t,e){var o=this.getContentElement(t);if(o&&(goog.dom.removeChildren(o),e))if(goog.isString(e))goog.dom.setTextContent(o,e);else{var n=function(t){if(t){var e=goog.dom.getOwnerDocument(o);o.appendChild(goog.isString(t)?e.createTextNode(t):t)}};goog.isArray(e)?goog.array.forEach(e,n):!goog.isArrayLike(e)||"nodeType"in e?n(e):goog.array.forEach(goog.array.clone(e),n)}},goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(t){return t.getElement()},goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS},goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]},goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()},goog.ui.ControlRenderer.prototype.getClassNames=function(t){var e=this.getCssClass(),o=[e],n=this.getStructuralCssClass();return n!=e&&o.push(n),e=this.getClassNamesForState(t.getState()),o.push.apply(o,e),(t=t.getExtraClassNames())&&o.push.apply(o,t),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&o.push.apply(o,this.getAppliedCombinedClassNames_(o)),o},goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(t,e){var o=[];return e&&(t=goog.array.concat(t,[e])),goog.array.forEach(this.getIe6ClassCombinations(),function(n){!goog.array.every(n,goog.partial(goog.array.contains,t))||e&&!goog.array.contains(n,e)||o.push(n.join("_"))}),o},goog.ui.ControlRenderer.prototype.getClassNamesForState=function(t){for(var e=[];t;){var o=t&-t;e.push(this.getClassForState(o)),t&=~o}return e},goog.ui.ControlRenderer.prototype.getClassForState=function(t){return this.classByState_||this.createClassByStateMap_(),this.classByState_[t]},goog.ui.ControlRenderer.prototype.getStateFromClass=function(t){return this.stateByClass_||this.createStateByClassMap_(),t=parseInt(this.stateByClass_[t],10),isNaN(t)?0:t},goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var t=this.getStructuralCssClass(),e=!goog.string.contains(goog.string.normalizeWhitespace(t)," ");goog.asserts.assert(e,"ControlRenderer has an invalid css class: '"+t+"'"),this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,t+"-disabled",goog.ui.Component.State.HOVER,t+"-hover",goog.ui.Component.State.ACTIVE,t+"-active",goog.ui.Component.State.SELECTED,t+"-selected",goog.ui.Component.State.CHECKED,t+"-checked",goog.ui.Component.State.FOCUSED,t+"-focused",goog.ui.Component.State.OPENED,t+"-open")},goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_(),this.stateByClass_=goog.object.transpose(this.classByState_)},goog.ui.Control=function(t,e,o){goog.ui.Component.call(this,o),this.renderer_=e||goog.ui.registry.getDefaultRenderer(this.constructor),this.setContentInternal(goog.isDef(t)?t:null),this.ariaLabel_=null},goog.inherits(goog.ui.Control,goog.ui.Component),goog.tagUnsealableClass(goog.ui.Control),goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName,goog.ui.Control.getDecorator=goog.ui.registry.getDecorator,goog.ui.Control.prototype.content_=null,goog.ui.Control.prototype.state_=0,goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED,goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL,goog.ui.Control.prototype.statesWithTransitionEvents_=0,goog.ui.Control.prototype.visible_=!0,goog.ui.Control.prototype.extraClassNames_=null,goog.ui.Control.prototype.handleMouseEvents_=!0,goog.ui.Control.prototype.allowTextSelection_=!1,goog.ui.Control.prototype.preferredAriaRole_=null,goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_},goog.ui.Control.prototype.setHandleMouseEvents=function(t){this.isInDocument()&&t!=this.handleMouseEvents_&&this.enableMouseEventHandling_(t),this.handleMouseEvents_=t},goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)},goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)},goog.ui.Control.prototype.getRenderer=function(){return this.renderer_},goog.ui.Control.prototype.setRenderer=function(t){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null),this.renderer_=t},goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_},goog.ui.Control.prototype.addClassName=function(t){t&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,t)||this.extraClassNames_.push(t):this.extraClassNames_=[t],this.renderer_.enableExtraClassName(this,t,!0))},goog.ui.Control.prototype.removeClassName=function(t){t&&this.extraClassNames_&&goog.array.remove(this.extraClassNames_,t)&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,t,!1))},goog.ui.Control.prototype.enableClassName=function(t,e){e?this.addClassName(t):this.removeClassName(t)},goog.ui.Control.prototype.createDom=function(){var t=this.renderer_.createDom(this);this.setElementInternal(t),this.renderer_.setAriaRole(t,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(t,!1),this.isVisible()||this.renderer_.setVisible(t,!1)},goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_},goog.ui.Control.prototype.setPreferredAriaRole=function(t){this.preferredAriaRole_=t},goog.ui.Control.prototype.getAriaLabel=function(){return this.ariaLabel_},goog.ui.Control.prototype.setAriaLabel=function(t){this.ariaLabel_=t;var e=this.getElement();e&&this.renderer_.setAriaLabel(e,t)},goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Control.prototype.canDecorate=function(t){return this.renderer_.canDecorate(t)},goog.ui.Control.prototype.decorateInternal=function(t){t=this.renderer_.decorate(this,t),this.setElementInternal(t),this.renderer_.setAriaRole(t,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(t,!1),this.visible_="none"!=t.style.display},goog.ui.Control.prototype.enterDocument=function(){if(goog.ui.Control.superClass_.enterDocument.call(this),this.renderer_.setAriaStates(this,this.getElementStrict()),this.renderer_.initializeDom(this),this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var t=this.getKeyEventTarget();if(t){var e=this.getKeyHandler();e.attach(t),this.getHandler().listen(e,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(t,goog.events.EventType.FOCUS,this.handleFocus).listen(t,goog.events.EventType.BLUR,this.handleBlur)}}},goog.ui.Control.prototype.enableMouseEventHandling_=function(t){var e=this.getHandler(),o=this.getElement();t?(e.listen(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(o,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(o,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&e.listen(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||e.listen(o,goog.events.EventType.DBLCLICK,this.handleDblClick),this.ieMouseEventSequenceSimulator_||(this.ieMouseEventSequenceSimulator_=new goog.ui.Control.IeMouseEventSequenceSimulator_(this),this.registerDisposable(this.ieMouseEventSequenceSimulator_)))):(e.unlisten(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(o,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(o,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&e.unlisten(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||e.unlisten(o,goog.events.EventType.DBLCLICK,this.handleDblClick),goog.dispose(this.ieMouseEventSequenceSimulator_),this.ieMouseEventSequenceSimulator_=null))},goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this),this.keyHandler_&&this.keyHandler_.detach(),this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)},goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),delete this.renderer_,this.ieMouseEventSequenceSimulator_=this.extraClassNames_=this.content_=null},goog.ui.Control.prototype.getContent=function(){return this.content_},goog.ui.Control.prototype.setContent=function(t){this.renderer_.setContent(this.getElement(),t),this.setContentInternal(t)},goog.ui.Control.prototype.setContentInternal=function(t){this.content_=t},goog.ui.Control.prototype.getCaption=function(){var t=this.getContent();return t?(t=goog.isString(t)?t:goog.isArray(t)?goog.array.map(t,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(t),goog.string.collapseBreakingSpaces(t)):""},goog.ui.Control.prototype.setCaption=function(t){this.setContent(t)},goog.ui.Control.prototype.setRightToLeft=function(t){goog.ui.Control.superClass_.setRightToLeft.call(this,t);var e=this.getElement();e&&this.renderer_.setRightToLeft(e,t)},goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_},goog.ui.Control.prototype.setAllowTextSelection=function(t){this.allowTextSelection_=t;var e=this.getElement();e&&this.renderer_.setAllowTextSelection(e,t)},goog.ui.Control.prototype.isVisible=function(){return this.visible_},goog.ui.Control.prototype.setVisible=function(t,e){if(e||this.visible_!=t&&this.dispatchEvent(t?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var o=this.getElement();return o&&this.renderer_.setVisible(o,t),this.isEnabled()&&this.renderer_.setFocusable(this,t),this.visible_=t,!0}return!1},goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)},goog.ui.Control.prototype.isParentDisabled_=function(){var t=this.getParent();return!!t&&"function"==typeof t.isEnabled&&!t.isEnabled()},goog.ui.Control.prototype.setEnabled=function(t){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!t)&&(t||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,t),this.setState(goog.ui.Component.State.DISABLED,!t,!0))},goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)},goog.ui.Control.prototype.setHighlighted=function(t){this.isTransitionAllowed(goog.ui.Component.State.HOVER,t)&&this.setState(goog.ui.Component.State.HOVER,t)},goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)},goog.ui.Control.prototype.setActive=function(t){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,t)&&this.setState(goog.ui.Component.State.ACTIVE,t)},goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)},goog.ui.Control.prototype.setSelected=function(t){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,t)&&this.setState(goog.ui.Component.State.SELECTED,t)},goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)},goog.ui.Control.prototype.setChecked=function(t){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,t)&&this.setState(goog.ui.Component.State.CHECKED,t)},goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)},goog.ui.Control.prototype.setFocused=function(t){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,t)&&this.setState(goog.ui.Component.State.FOCUSED,t)},goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)},goog.ui.Control.prototype.setOpen=function(t){this.isTransitionAllowed(goog.ui.Component.State.OPENED,t)&&this.setState(goog.ui.Component.State.OPENED,t)},goog.ui.Control.prototype.getState=function(){return this.state_};goog.ui.Control.prototype.hasState=function(t){return!!(this.state_&t)},goog.ui.Control.prototype.setState=function(t,e,o){o||t!=goog.ui.Component.State.DISABLED?this.isSupportedState(t)&&e!=this.hasState(t)&&(this.renderer_.setState(this,t,e),this.state_=e?this.state_|t:this.state_&~t):this.setEnabled(!e)},goog.ui.Control.prototype.setStateInternal=function(t){this.state_=t},goog.ui.Control.prototype.isSupportedState=function(t){return!!(this.supportedStates_&t)},goog.ui.Control.prototype.setSupportedState=function(t,e){if(this.isInDocument()&&this.hasState(t)&&!e)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!e&&this.hasState(t)&&this.setState(t,!1),this.supportedStates_=e?this.supportedStates_|t:this.supportedStates_&~t},goog.ui.Control.prototype.isAutoState=function(t){return!!(this.autoStates_&t)&&this.isSupportedState(t)},goog.ui.Control.prototype.setAutoStates=function(t,e){this.autoStates_=e?this.autoStates_|t:this.autoStates_&~t},goog.ui.Control.prototype.isDispatchTransitionEvents=function(t){return!!(this.statesWithTransitionEvents_&t)&&this.isSupportedState(t)},goog.ui.Control.prototype.setDispatchTransitionEvents=function(t,e){this.statesWithTransitionEvents_=e?this.statesWithTransitionEvents_|t:this.statesWithTransitionEvents_&~t},goog.ui.Control.prototype.isTransitionAllowed=function(t,e){return this.isSupportedState(t)&&this.hasState(t)!=e&&(!(this.statesWithTransitionEvents_&t)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(t,e)))&&!this.isDisposed()},goog.ui.Control.prototype.handleMouseOver=function(t){!goog.ui.Control.isMouseEventWithinElement_(t,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)},goog.ui.Control.prototype.handleMouseOut=function(t){!goog.ui.Control.isMouseEventWithinElement_(t,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))},goog.ui.Control.prototype.handleContextMenu=goog.nullFunction,goog.ui.Control.isMouseEventWithinElement_=function(t,e){return!!t.relatedTarget&&goog.dom.contains(e,t.relatedTarget)},goog.ui.Control.prototype.handleMouseDown=function(t){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),t.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_&&this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus())),!this.isAllowTextSelection()&&t.isMouseActionButton()&&t.preventDefault()},goog.ui.Control.prototype.handleMouseUp=function(t){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&this.performActionInternal(t)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1))},goog.ui.Control.prototype.handleDblClick=function(t){this.isEnabled()&&this.performActionInternal(t)},goog.ui.Control.prototype.performActionInternal=function(t){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked()),this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0),this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var e=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);return t&&(e.altKey=t.altKey,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.platformModifierKey=t.platformModifierKey),this.dispatchEvent(e)},goog.ui.Control.prototype.handleFocus=function(t){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)},goog.ui.Control.prototype.handleBlur=function(t){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)},goog.ui.Control.prototype.handleKeyEvent=function(t){return!!(this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(t))&&(t.preventDefault(),t.stopPropagation(),!0)},goog.ui.Control.prototype.handleKeyEventInternal=function(t){return t.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(t)},goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer),goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)}),goog.ui.Control.IeMouseEventSequenceSimulator_=function(t){goog.Disposable.call(this),this.control_=t,this.clickExpected_=!1,this.handler_=new goog.events.EventHandler(this),this.registerDisposable(this.handler_),t=this.control_.getElementStrict(),this.handler_.listen(t,goog.events.EventType.MOUSEDOWN,this.handleMouseDown_).listen(t,goog.events.EventType.MOUSEUP,this.handleMouseUp_).listen(t,goog.events.EventType.CLICK,this.handleClick_)},goog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_,goog.Disposable),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_=!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_=function(){this.clickExpected_=!1},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_=function(){this.clickExpected_=!0},goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_=function(t,e){if(!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_)return t.button=goog.events.BrowserEvent.MouseButton.LEFT,t.type=e,t;var o=document.createEvent("MouseEvents");return o.initMouseEvent(e,t.bubbles,t.cancelable,t.view||null,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,goog.events.BrowserEvent.MouseButton.LEFT,t.relatedTarget||null),o},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_=function(t){if(this.clickExpected_)this.clickExpected_=!1;else{var e=t.getBrowserEvent(),o=e.button,n=e.type,r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(e,goog.events.EventType.MOUSEDOWN);this.control_.handleMouseDown(new goog.events.BrowserEvent(r,t.currentTarget)),r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(e,goog.events.EventType.MOUSEUP),this.control_.handleMouseUp(new goog.events.BrowserEvent(r,t.currentTarget)),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_||(e.button=o,e.type=n)}},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal=function(){this.control_=null,goog.ui.Control.IeMouseEventSequenceSimulator_.superClass_.disposeInternal.call(this)},goog.ui.Container=function(t,e,o){goog.ui.Component.call(this,o),this.renderer_=e||goog.ui.ContainerRenderer.getInstance(),this.orientation_=t||this.renderer_.getDefaultOrientation()},goog.inherits(goog.ui.Container,goog.ui.Component),goog.tagUnsealableClass(goog.ui.Container),goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"},goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"},goog.ui.Container.prototype.keyEventTarget_=null,goog.ui.Container.prototype.keyHandler_=null,goog.ui.Container.prototype.renderer_=null,goog.ui.Container.prototype.orientation_=null,goog.ui.Container.prototype.visible_=!0,goog.ui.Container.prototype.enabled_=!0,goog.ui.Container.prototype.focusable_=!0,goog.ui.Container.prototype.highlightedIndex_=-1,goog.ui.Container.prototype.openItem_=null,goog.ui.Container.prototype.mouseButtonPressed_=!1,goog.ui.Container.prototype.allowFocusableChildren_=!1,goog.ui.Container.prototype.openFollowsHighlight_=!0,goog.ui.Container.prototype.childElementIdMap_=null,goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)},goog.ui.Container.prototype.setKeyEventTarget=function(t){if(!this.focusable_)throw Error("Can't set key event target for container that doesn't support keyboard focus!");var e=this.getKeyEventTarget(),o=this.isInDocument();this.keyEventTarget_=t;var n=this.getKeyEventTarget();o&&(this.keyEventTarget_=e,this.enableFocusHandling_(!1),this.keyEventTarget_=t,this.getKeyHandler().attach(n),this.enableFocusHandling_(!0))},goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))},goog.ui.Container.prototype.getRenderer=function(){return this.renderer_},goog.ui.Container.prototype.setRenderer=function(t){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=t},goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))},goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Container.prototype.canDecorate=function(t){return this.renderer_.canDecorate(t)},goog.ui.Container.prototype.decorateInternal=function(t){this.setElementInternal(this.renderer_.decorate(this,t)),"none"==t.style.display&&(this.visible_=!1)},goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this),this.forEachChild(function(t){t.isInDocument()&&this.registerChildId_(t)},this);var t=this.getElement();this.renderer_.initializeDom(this),this.setVisible(this.visible_,!0),this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(t,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(t),goog.events.EventType.MOUSEUP,this.handleDocumentMouseUp).listen(t,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.MOUSEUP,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents),this.isFocusable()&&this.enableFocusHandling_(!0)},goog.ui.Container.prototype.enableFocusHandling_=function(t){var e=this.getHandler(),o=this.getKeyEventTarget();t?e.listen(o,goog.events.EventType.FOCUS,this.handleFocus).listen(o,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):e.unlisten(o,goog.events.EventType.FOCUS,this.handleFocus).unlisten(o,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)},goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1),this.openItem_&&this.openItem_.setOpen(!1),this.mouseButtonPressed_=!1,goog.ui.Container.superClass_.exitDocument.call(this)},goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null),this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null},goog.ui.Container.prototype.handleEnterItem=function(t){return!0},goog.ui.Container.prototype.handleHighlightItem=function(t){var e=this.indexOfChild(t.target);if(-1<e&&e!=this.highlightedIndex_){var o=this.getHighlighted();o&&o.setHighlighted(!1),this.highlightedIndex_=e,o=this.getHighlighted(),this.isMouseButtonPressed()&&o.setActive(!0),this.openFollowsHighlight_&&this.openItem_&&o!=this.openItem_&&(o.isSupportedState(goog.ui.Component.State.OPENED)?o.setOpen(!0):this.openItem_.setOpen(!1))}e=this.getElement(),goog.asserts.assert(e,"The DOM element for the container cannot be null."),null!=t.target.getElement()&&goog.a11y.aria.setState(e,goog.a11y.aria.State.ACTIVEDESCENDANT,t.target.getElement().id)},goog.ui.Container.prototype.handleUnHighlightItem=function(t){t.target==this.getHighlighted()&&(this.highlightedIndex_=-1),t=this.getElement(),goog.asserts.assert(t,"The DOM element for the container cannot be null."),goog.a11y.aria.removeState(t,goog.a11y.aria.State.ACTIVEDESCENDANT)},goog.ui.Container.prototype.handleOpenItem=function(t){(t=t.target)&&t!=this.openItem_&&t.getParent()==this&&(this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=t)},goog.ui.Container.prototype.handleCloseItem=function(t){t.target==this.openItem_&&(this.openItem_=null);var e=this.getElement(),o=t.target.getElement();e&&t.target.isHighlighted()&&o&&goog.a11y.aria.setActiveDescendant(e,o)},goog.ui.Container.prototype.handleMouseDown=function(t){this.enabled_&&this.setMouseButtonPressed(!0);var e=this.getKeyEventTarget();e&&goog.dom.isFocusableTabIndex(e)?e.focus():t.preventDefault()},goog.ui.Container.prototype.handleDocumentMouseUp=function(t){this.setMouseButtonPressed(!1)},goog.ui.Container.prototype.handleChildMouseEvents=function(t){var e=this.getOwnerControl(t.target);if(e)switch(t.type){case goog.events.EventType.MOUSEDOWN:e.handleMouseDown(t);break;case goog.events.EventType.MOUSEUP:e.handleMouseUp(t);break;case goog.events.EventType.MOUSEOVER:e.handleMouseOver(t);break;case goog.events.EventType.MOUSEOUT:e.handleMouseOut(t);break;case goog.events.EventType.CONTEXTMENU:e.handleContextMenu(t)}},goog.ui.Container.prototype.getOwnerControl=function(t){if(this.childElementIdMap_)for(var e=this.getElement();t&&t!==e;){var o=t.id;if(o in this.childElementIdMap_)return this.childElementIdMap_[o];t=t.parentNode}return null},goog.ui.Container.prototype.handleFocus=function(t){},goog.ui.Container.prototype.handleBlur=function(t){this.setHighlightedIndex(-1),this.setMouseButtonPressed(!1),this.openItem_&&this.openItem_.setOpen(!1)},goog.ui.Container.prototype.handleKeyEvent=function(t){return!(!this.isEnabled()||!this.isVisible()||0==this.getChildCount()&&!this.keyEventTarget_||!this.handleKeyEventInternal(t))&&(t.preventDefault(),t.stopPropagation(),!0)},goog.ui.Container.prototype.handleKeyEventInternal=function(t){var e=this.getHighlighted();if(e&&"function"==typeof e.handleKeyEvent&&e.handleKeyEvent(t)||this.openItem_&&this.openItem_!=e&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(t))return!0;if(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)return!1;switch(t.keyCode){case goog.events.KeyCodes.ESC:if(!this.isFocusable())return!1;this.getKeyEventTarget().blur();break;case goog.events.KeyCodes.HOME:this.highlightFirst();break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_!=goog.ui.Container.Orientation.VERTICAL)return!1;this.highlightPrevious();break;case goog.events.KeyCodes.LEFT:if(this.orientation_!=goog.ui.Container.Orientation.HORIZONTAL)return!1;this.isRightToLeft()?this.highlightNext():this.highlightPrevious();break;case goog.events.KeyCodes.DOWN:if(this.orientation_!=goog.ui.Container.Orientation.VERTICAL)return!1;this.highlightNext();break;case goog.events.KeyCodes.RIGHT:if(this.orientation_!=goog.ui.Container.Orientation.HORIZONTAL)return!1;this.isRightToLeft()?this.highlightPrevious():this.highlightNext();break;default:return!1}return!0},goog.ui.Container.prototype.registerChildId_=function(t){var e=t.getElement();e=e.id||(e.id=t.getId()),this.childElementIdMap_||(this.childElementIdMap_={}),this.childElementIdMap_[e]=t},goog.ui.Container.prototype.addChild=function(t,e){goog.asserts.assertInstanceof(t,goog.ui.Control,"The child of a container must be a control"),goog.ui.Container.superClass_.addChild.call(this,t,e)},goog.ui.Container.prototype.addChildAt=function(t,e,o){goog.asserts.assertInstanceof(t,goog.ui.Control),t.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0),t.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0),!this.isFocusable()&&this.isFocusableChildrenAllowed()||t.setSupportedState(goog.ui.Component.State.FOCUSED,!1),t.setHandleMouseEvents(!1);var n=t.getParent()==this?this.indexOfChild(t):-1;goog.ui.Container.superClass_.addChildAt.call(this,t,e,o),t.isInDocument()&&this.isInDocument()&&this.registerChildId_(t),this.updateHighlightedIndex_(n,e)},goog.ui.Container.prototype.updateHighlightedIndex_=function(t,e){-1==t&&(t=this.getChildCount()),t==this.highlightedIndex_?this.highlightedIndex_=Math.min(this.getChildCount()-1,e):t>this.highlightedIndex_&&e<=this.highlightedIndex_?this.highlightedIndex_++:t<this.highlightedIndex_&&e>this.highlightedIndex_&&this.highlightedIndex_--},goog.ui.Container.prototype.removeChild=function(t,e){if(t=goog.isString(t)?this.getChild(t):t,goog.asserts.assertInstanceof(t,goog.ui.Control),t){var o=this.indexOfChild(t);-1!=o&&(o==this.highlightedIndex_?(t.setHighlighted(!1),this.highlightedIndex_=-1):o<this.highlightedIndex_&&this.highlightedIndex_--),(o=t.getElement())&&o.id&&this.childElementIdMap_&&goog.object.remove(this.childElementIdMap_,o.id)}return t=goog.ui.Container.superClass_.removeChild.call(this,t,e),t.setHandleMouseEvents(!0),t},goog.ui.Container.prototype.getOrientation=function(){return this.orientation_},goog.ui.Container.prototype.setOrientation=function(t){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=t},goog.ui.Container.prototype.isVisible=function(){return this.visible_},goog.ui.Container.prototype.setVisible=function(t,e){if(e||this.visible_!=t&&this.dispatchEvent(t?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=t;var o=this.getElement();return o&&(goog.style.setElementShown(o,t),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),e||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE)),!0}return!1},goog.ui.Container.prototype.isEnabled=function(){return this.enabled_},goog.ui.Container.prototype.setEnabled=function(t){this.enabled_!=t&&this.dispatchEvent(t?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(t?(this.enabled_=!0,this.forEachChild(function(t){t.wasDisabled?delete t.wasDisabled:t.setEnabled(!0)})):(this.forEachChild(function(t){t.isEnabled()?t.setEnabled(!1):t.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),t&&this.visible_))},goog.ui.Container.prototype.isFocusable=function(){return this.focusable_},goog.ui.Container.prototype.setFocusable=function(t){t!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(t),this.focusable_=t,this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),t)},goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_},goog.ui.Container.prototype.setFocusableChildrenAllowed=function(t){this.allowFocusableChildren_=t},goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_},goog.ui.Container.prototype.setOpenFollowsHighlight=function(t){this.openFollowsHighlight_=t},goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_},goog.ui.Container.prototype.setHighlightedIndex=function(t){(t=this.getChildAt(t))?t.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)},goog.ui.Container.prototype.setHighlighted=function(t){this.setHighlightedIndex(this.indexOfChild(t))},goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)},goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(t,e){return(t+1)%e},this.getChildCount()-1)},goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(t,e){return t--,0>t?e-1:t},0)},goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(t,e){return(t+1)%e},this.highlightedIndex_)},goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(t,e){return t--,0>t?e-1:t},this.highlightedIndex_)},goog.ui.Container.prototype.highlightHelper=function(t,e){var o=0>e?this.indexOfChild(this.openItem_):e,n=this.getChildCount();o=t.call(this,o,n);for(var r=0;r<=n;){var i=this.getChildAt(o);if(i&&this.canHighlightItem(i))return this.setHighlightedIndexFromKeyEvent(o),!0;r++,o=t.call(this,o,n)}return!1},goog.ui.Container.prototype.canHighlightItem=function(t){return t.isVisible()&&t.isEnabled()&&t.isSupportedState(goog.ui.Component.State.HOVER)},goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(t){this.setHighlightedIndex(t)},goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_},goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_},goog.ui.Container.prototype.setMouseButtonPressed=function(t){this.mouseButtonPressed_=t},goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuHeaderRenderer),goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader",goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS},goog.ui.MenuHeader=function(t,e,o){goog.ui.Control.call(this,t,o||goog.ui.MenuHeaderRenderer.getInstance(),e),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.MenuHeader,goog.ui.Control),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)}),goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this),this.classNameCache_=[]},goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuItemRenderer),goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem",goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2},goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(t){var e=this.classNameCache_[t];if(!e){switch(t){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:e=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:e=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:e=this.getStructuralCssClass()+"-content"}this.classNameCache_[t]=e}return e},goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU_ITEM},goog.ui.MenuItemRenderer.prototype.createDom=function(t){var e=t.getDomHelper().createDom("DIV",this.getClassNames(t).join(" "),this.createContent(t.getContent(),t.getDomHelper()));return this.setEnableCheckBoxStructure(t,e,t.isSupportedState(goog.ui.Component.State.SELECTED)||t.isSupportedState(goog.ui.Component.State.CHECKED)),e},goog.ui.MenuItemRenderer.prototype.getContentElement=function(t){return t&&t.firstChild},goog.ui.MenuItemRenderer.prototype.decorate=function(t,e){return goog.asserts.assert(e),this.hasContentStructure(e)||e.appendChild(this.createContent(e.childNodes,t.getDomHelper())),goog.dom.classlist.contains(e,"goog-option")&&(t.setCheckable(!0),this.setCheckable(t,e,!0)),goog.ui.MenuItemRenderer.superClass_.decorate.call(this,t,e)},goog.ui.MenuItemRenderer.prototype.setContent=function(t,e){var o=this.getContentElement(t),n=this.hasCheckBoxStructure(t)?o.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,t,e),n&&!this.hasCheckBoxStructure(t)&&o.insertBefore(n,o.firstChild||null)},goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(t){t=goog.dom.getFirstElementChild(t);var e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return!!t&&goog.dom.classlist.contains(t,e)},goog.ui.MenuItemRenderer.prototype.createContent=function(t,e){var o=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return e.createDom("DIV",o,t)},goog.ui.MenuItemRenderer.prototype.setSelectable=function(t,e,o){t&&e&&this.setEnableCheckBoxStructure(t,e,o)},goog.ui.MenuItemRenderer.prototype.setCheckable=function(t,e,o){t&&e&&this.setEnableCheckBoxStructure(t,e,o)},goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(t){if(t=this.getContentElement(t)){t=t.firstChild;var e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return!!t&&goog.dom.isElement(t)&&goog.dom.classlist.contains(t,e)}return!1},goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(t,e,o){this.setAriaRole(e,t.getPreferredAriaRole()),this.setAriaStates(t,e),o!=this.hasCheckBoxStructure(e)&&(goog.dom.classlist.enable(e,"goog-option",o),e=this.getContentElement(e),o?(o=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),e.insertBefore(t.getDomHelper().createDom("DIV",o),e.firstChild||null)):e.removeChild(e.firstChild))},goog.ui.MenuItemRenderer.prototype.getClassForState=function(t){switch(t){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,t)}},goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(t){var e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(t){case"goog-option-selected":return goog.ui.Component.State.CHECKED;case e:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,t)}},goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS},goog.ui.MenuItem=function(t,e,o,n){goog.ui.Control.call(this,t,n||goog.ui.MenuItemRenderer.getInstance(),o),this.setValue(e)},goog.inherits(goog.ui.MenuItem,goog.ui.Control),goog.tagUnsealableClass(goog.ui.MenuItem),goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator",goog.ui.MenuItem.ACCELERATOR_CLASS="goog-menuitem-accel",goog.ui.MenuItem.prototype.getValue=function(){var t=this.getModel();return null!=t?t:this.getCaption()},goog.ui.MenuItem.prototype.setValue=function(t){this.setModel(t)},goog.ui.MenuItem.prototype.setSupportedState=function(t,e){switch(goog.ui.MenuItem.superClass_.setSupportedState.call(this,t,e),t){case goog.ui.Component.State.SELECTED:this.setSelectableInternal_(e);break;case goog.ui.Component.State.CHECKED:this.setCheckableInternal_(e)}},goog.ui.MenuItem.prototype.setSelectable=function(t){this.setSupportedState(goog.ui.Component.State.SELECTED,t)},goog.ui.MenuItem.prototype.setSelectableInternal_=function(t){this.isChecked()&&!t&&this.setChecked(!1);var e=this.getElement();e&&this.getRenderer().setSelectable(this,e,t)},goog.ui.MenuItem.prototype.setCheckable=function(t){this.setSupportedState(goog.ui.Component.State.CHECKED,t)},goog.ui.MenuItem.prototype.setCheckableInternal_=function(t){var e=this.getElement();e&&this.getRenderer().setCheckable(this,e,t)},goog.ui.MenuItem.prototype.getCaption=function(){var t=this.getContent();if(goog.isArray(t)){var e=goog.ui.MenuItem.ACCELERATOR_CLASS,o=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_;return t=goog.array.map(t,function(t){return goog.dom.isElement(t)&&(goog.dom.classlist.contains(t,e)||goog.dom.classlist.contains(t,o))?"":goog.dom.getRawTextContent(t)}).join(""),goog.string.collapseBreakingSpaces(t)}return goog.ui.MenuItem.superClass_.getCaption.call(this)},goog.ui.MenuItem.prototype.getAccelerator=function(){var t=this.getDomHelper(),e=this.getContent();return goog.isArray(e)&&(e=goog.array.find(e,function(t){return goog.dom.classlist.contains(t,goog.ui.MenuItem.ACCELERATOR_CLASS)}))?t.getTextContent(e):null},goog.ui.MenuItem.prototype.handleMouseUp=function(t){var e=this.getParent();if(e){var o=e.openingCoords;if(e.openingCoords=null,o&&goog.isNumber(t.clientX)&&(e=new goog.math.Coordinate(t.clientX,t.clientY),goog.math.Coordinate.equals(o,e)))return}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,t)},goog.ui.MenuItem.prototype.handleKeyEventInternal=function(t){return!(t.keyCode!=this.getMnemonic()||!this.performActionInternal(t))||goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,t)},goog.ui.MenuItem.prototype.setMnemonic=function(t){this.mnemonicKey_=t},goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)}),goog.ui.MenuItem.prototype.getPreferredAriaRole=function(){return this.isSupportedState(goog.ui.Component.State.CHECKED)?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.isSupportedState(goog.ui.Component.State.SELECTED)?goog.a11y.aria.Role.MENU_ITEM_RADIO:goog.ui.MenuItem.superClass_.getPreferredAriaRole.call(this)},goog.ui.MenuItem.prototype.getParent=function(){return goog.ui.Control.prototype.getParent.call(this)},goog.ui.MenuItem.prototype.getParentEventTarget=function(){return goog.ui.Control.prototype.getParentEventTarget.call(this)},goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer),goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator",goog.ui.MenuSeparatorRenderer.prototype.createDom=function(t){return t.getDomHelper().createDom("DIV",this.getCssClass())},goog.ui.MenuSeparatorRenderer.prototype.decorate=function(t,e){if(e.id&&t.setId(e.id),"HR"==e.tagName){var o=e;e=this.createDom(t),goog.dom.insertSiblingBefore(e,o),goog.dom.removeNode(o)}else goog.dom.classlist.add(e,this.getCssClass());return e},goog.ui.MenuSeparatorRenderer.prototype.setContent=function(t,e){},goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS},goog.ui.Separator=function(t,e){goog.ui.Control.call(this,null,t||goog.ui.MenuSeparatorRenderer.getInstance(),e),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.Separator,goog.ui.Control),goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var t=this.getElement();goog.asserts.assert(t,"The DOM element for the separator cannot be null."),goog.a11y.aria.setRole(t,"separator")},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),goog.ui.MenuRenderer=function(t){goog.ui.ContainerRenderer.call(this,t||goog.a11y.aria.Role.MENU)},goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer),goog.addSingletonGetter(goog.ui.MenuRenderer),goog.ui.MenuRenderer.CSS_CLASS="goog-menu",goog.ui.MenuRenderer.prototype.canDecorate=function(t){return"UL"==t.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,t)},goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(t){return"HR"==t.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,t)},goog.ui.MenuRenderer.prototype.containsElement=function(t,e){return goog.dom.contains(t.getElement(),e)},goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS},goog.ui.MenuRenderer.prototype.initializeDom=function(t){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,t),t=t.getElement(),goog.asserts.assert(t,"The menu DOM element cannot be null."),goog.a11y.aria.setState(t,goog.a11y.aria.State.HASPOPUP,"true")},goog.ui.MenuSeparator=function(t){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),t)},goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),goog.ui.Menu=function(t,e){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,e||goog.ui.MenuRenderer.getInstance(),t),this.setFocusable(!1)},goog.inherits(goog.ui.Menu,goog.ui.Container),goog.tagUnsealableClass(goog.ui.Menu),goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE},goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS,goog.ui.Menu.prototype.allowAutoFocus_=!0,goog.ui.Menu.prototype.allowHighlightDisabled_=!1,goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()},goog.ui.Menu.prototype.containsElement=function(t){if(this.getRenderer().containsElement(this,t))return!0;for(var e=0,o=this.getChildCount();e<o;e++){var n=this.getChildAt(e);if("function"==typeof n.containsElement&&n.containsElement(t))return!0}return!1},goog.ui.Menu.prototype.addItem=function(t){this.addChild(t,!0)},goog.ui.Menu.prototype.addItemAt=function(t,e){this.addChildAt(t,e,!0)},goog.ui.Menu.prototype.removeItem=function(t){(t=this.removeChild(t,!0))&&t.dispose()},goog.ui.Menu.prototype.removeItemAt=function(t){(t=this.removeChildAt(t,!0))&&t.dispose()},goog.ui.Menu.prototype.getItemAt=function(t){return this.getChildAt(t)},goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()},goog.ui.Menu.prototype.getItems=function(){var t=[];return this.forEachChild(function(e){t.push(e)}),t},goog.ui.Menu.prototype.setPosition=function(t,e){var o=this.isVisible();o||goog.style.setElementShown(this.getElement(),!0),goog.style.setPageOffset(this.getElement(),t,e),o||goog.style.setElementShown(this.getElement(),!1)},goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null},goog.ui.Menu.prototype.setAllowAutoFocus=function(t){(this.allowAutoFocus_=t)&&this.setFocusable(!0)};goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_},goog.ui.Menu.prototype.setAllowHighlightDisabled=function(t){this.allowHighlightDisabled_=t},goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_},goog.ui.Menu.prototype.setVisible=function(t,e,o){return(e=goog.ui.Menu.superClass_.setVisible.call(this,t,e))&&t&&this.isInDocument()&&this.allowAutoFocus_&&this.getKeyEventTarget().focus(),t&&o&&goog.isNumber(o.clientX)?this.openingCoords=new goog.math.Coordinate(o.clientX,o.clientY):this.openingCoords=null,e},goog.ui.Menu.prototype.handleEnterItem=function(t){return this.allowAutoFocus_&&this.getKeyEventTarget().focus(),goog.ui.Menu.superClass_.handleEnterItem.call(this,t)},goog.ui.Menu.prototype.highlightNextPrefix=function(t){var e=new RegExp("^"+goog.string.regExpEscape(t),"i");return this.highlightHelper(function(t,o){var n=0>t?0:t,r=!1;do{++t,t==o&&(t=0,r=!0);var i=this.getChildAt(t).getCaption();if(i&&i.match(e))return t}while(!r||t!=n);return this.getHighlightedIndex()},this.getHighlightedIndex())},goog.ui.Menu.prototype.canHighlightItem=function(t){return(this.allowHighlightDisabled_||t.isEnabled())&&t.isVisible()&&t.isSupportedState(goog.ui.Component.State.HOVER)},goog.ui.Menu.prototype.decorateInternal=function(t){this.decorateContent(t),goog.ui.Menu.superClass_.decorateInternal.call(this,t)},goog.ui.Menu.prototype.handleKeyEventInternal=function(t){var e=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,t);return e||this.forEachChild(function(o){!e&&o.getMnemonic&&o.getMnemonic()==t.keyCode&&(this.isEnabled()&&this.setHighlighted(o),e=o.handleKeyEvent(t))},this),e},goog.ui.Menu.prototype.setHighlightedIndex=function(t){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,t),(t=this.getChildAt(t))&&goog.style.scrollIntoContainerView(t.getElement(),this.getElement())},goog.ui.Menu.prototype.decorateContent=function(t){var e=this.getRenderer();t=this.getDomHelper().getElementsByTagNameAndClass("DIV",e.getCssClass()+"-content",t);for(var o=t.length,n=0;n<o;n++)e.decorateChildren(this,t[n])},goog.iter={},goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:{message:"StopIteration",stack:""},goog.iter.Iterator=function(){},goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration},goog.iter.Iterator.prototype.__iterator__=function(t){return this},goog.iter.toIterator=function(t){if(t instanceof goog.iter.Iterator)return t;if("function"==typeof t.__iterator__)return t.__iterator__(!1);if(goog.isArrayLike(t)){var e=0,o=new goog.iter.Iterator;return o.next=function(){for(;;){if(e>=t.length)throw goog.iter.StopIteration;if(e in t)return t[e++];e++}},o}throw Error("Not implemented")},goog.iter.forEach=function(t,e,o){if(goog.isArrayLike(t))try{goog.array.forEach(t,e,o)}catch(t){if(t!==goog.iter.StopIteration)throw t}else{t=goog.iter.toIterator(t);try{for(;;)e.call(o,t.next(),void 0,t)}catch(t){if(t!==goog.iter.StopIteration)throw t}}},goog.iter.filter=function(t,e,o){var n=goog.iter.toIterator(t);return t=new goog.iter.Iterator,t.next=function(){for(;;){var t=n.next();if(e.call(o,t,void 0,n))return t}},t},goog.iter.filterFalse=function(t,e,o){return goog.iter.filter(t,goog.functions.not(e),o)},goog.iter.range=function(t,e,o){var n=0,r=t,i=o||1;if(1<arguments.length&&(n=t,r=e),0==i)throw Error("Range step argument must not be zero");var s=new goog.iter.Iterator;return s.next=function(){if(0<i&&n>=r||0>i&&n<=r)throw goog.iter.StopIteration;var t=n;return n+=i,t},s},goog.iter.join=function(t,e){return goog.iter.toArray(t).join(e)},goog.iter.map=function(t,e,o){var n=goog.iter.toIterator(t);return t=new goog.iter.Iterator,t.next=function(){var t=n.next();return e.call(o,t,void 0,n)},t},goog.iter.reduce=function(t,e,o,n){var r=o;return goog.iter.forEach(t,function(t){r=e.call(n,r,t)}),r},goog.iter.some=function(t,e,o){t=goog.iter.toIterator(t);try{for(;;)if(e.call(o,t.next(),void 0,t))return!0}catch(t){if(t!==goog.iter.StopIteration)throw t}return!1},goog.iter.every=function(t,e,o){t=goog.iter.toIterator(t);try{for(;;)if(!e.call(o,t.next(),void 0,t))return!1}catch(t){if(t!==goog.iter.StopIteration)throw t}return!0},goog.iter.chain=function(t){return goog.iter.chainFromIterable(arguments)},goog.iter.chainFromIterable=function(t){var e=goog.iter.toIterator(t);t=new goog.iter.Iterator;var o=null;return t.next=function(){for(;;){if(null==o){var t=e.next();o=goog.iter.toIterator(t)}try{return o.next()}catch(t){if(t!==goog.iter.StopIteration)throw t;o=null}}},t},goog.iter.dropWhile=function(t,e,o){var n=goog.iter.toIterator(t);t=new goog.iter.Iterator;var r=!0;return t.next=function(){for(;;){var t=n.next();if(!r||!e.call(o,t,void 0,n))return r=!1,t}},t},goog.iter.takeWhile=function(t,e,o){var n=goog.iter.toIterator(t);return t=new goog.iter.Iterator,t.next=function(){var t=n.next();if(e.call(o,t,void 0,n))return t;throw goog.iter.StopIteration},t},goog.iter.toArray=function(t){if(goog.isArrayLike(t))return goog.array.toArray(t);t=goog.iter.toIterator(t);var e=[];return goog.iter.forEach(t,function(t){e.push(t)}),e},goog.iter.equals=function(t,e,o){t=goog.iter.zipLongest({},t,e);var n=o||goog.array.defaultCompareEquality;return goog.iter.every(t,function(t){return n(t[0],t[1])})},goog.iter.nextOrValue=function(t,e){try{return goog.iter.toIterator(t).next()}catch(t){if(t!=goog.iter.StopIteration)throw t;return e}},goog.iter.product=function(t){if(goog.array.some(arguments,function(t){return!t.length})||!arguments.length)return new goog.iter.Iterator;var e=new goog.iter.Iterator,o=arguments,n=goog.array.repeat(0,o.length);return e.next=function(){if(n){for(var t=goog.array.map(n,function(t,e){return o[e][t]}),e=n.length-1;0<=e;e--){if(goog.asserts.assert(n),n[e]<o[e].length-1){n[e]++;break}if(0==e){n=null;break}n[e]=0}return t}throw goog.iter.StopIteration},e},goog.iter.cycle=function(t){var e=goog.iter.toIterator(t),o=[],n=0;t=new goog.iter.Iterator;var r=!1;return t.next=function(){var t=null;if(!r)try{return t=e.next(),o.push(t),t}catch(t){if(t!=goog.iter.StopIteration||goog.array.isEmpty(o))throw t;r=!0}return t=o[n],n=(n+1)%o.length,t},t},goog.iter.count=function(t,e){var o=t||0,n=goog.isDef(e)?e:1,r=new goog.iter.Iterator;return r.next=function(){var t=o;return o+=n,t},r},goog.iter.repeat=function(t){var e=new goog.iter.Iterator;return e.next=goog.functions.constant(t),e},goog.iter.accumulate=function(t){var e=goog.iter.toIterator(t),o=0;return t=new goog.iter.Iterator,t.next=function(){return o+=e.next()},t},goog.iter.zip=function(t){var e=arguments,o=new goog.iter.Iterator;if(0<e.length){var n=goog.array.map(e,goog.iter.toIterator);o.next=function(){return goog.array.map(n,function(t){return t.next()})}}return o},goog.iter.zipLongest=function(t,e){var o=goog.array.slice(arguments,1),n=new goog.iter.Iterator;if(0<o.length){var r=goog.array.map(o,goog.iter.toIterator);n.next=function(){var e=!1,o=goog.array.map(r,function(o){try{var n=o.next();e=!0}catch(e){if(e!==goog.iter.StopIteration)throw e;n=t}return n});if(!e)throw goog.iter.StopIteration;return o}}return n},goog.iter.compress=function(t,e){var o=goog.iter.toIterator(e);return goog.iter.filter(t,function(){return!!o.next()})},goog.iter.GroupByIterator_=function(t,e){this.iterator=goog.iter.toIterator(t),this.keyFunc=e||goog.functions.identity},goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator),goog.iter.GroupByIterator_.prototype.next=function(){for(;this.currentKey==this.targetKey;)this.currentValue=this.iterator.next(),this.currentKey=this.keyFunc(this.currentValue);return this.targetKey=this.currentKey,[this.currentKey,this.groupItems_(this.targetKey)]},goog.iter.GroupByIterator_.prototype.groupItems_=function(t){for(var e=[];this.currentKey==t;){e.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(t){if(t!==goog.iter.StopIteration)throw t;break}this.currentKey=this.keyFunc(this.currentValue)}return e},goog.iter.groupBy=function(t,e){return new goog.iter.GroupByIterator_(t,e)},goog.iter.starMap=function(t,e,o){var n=goog.iter.toIterator(t);return t=new goog.iter.Iterator,t.next=function(){var t=goog.iter.toArray(n.next());return e.apply(o,goog.array.concat(t,void 0,n))},t},goog.iter.tee=function(t,e){var o=goog.iter.toIterator(t),n=goog.isNumber(e)?e:2,r=goog.array.map(goog.array.range(n),function(){return[]}),i=function(){var t=o.next();goog.array.forEach(r,function(e){e.push(t)})};return goog.array.map(r,function(t){var e=new goog.iter.Iterator;return e.next=function(){return goog.array.isEmpty(t)&&i(),goog.asserts.assert(!goog.array.isEmpty(t)),t.shift()},e})},goog.iter.enumerate=function(t,e){return goog.iter.zip(goog.iter.count(e),t)},goog.iter.limit=function(t,e){goog.asserts.assert(goog.math.isInt(e)&&0<=e);var o=goog.iter.toIterator(t),n=new goog.iter.Iterator,r=e;return n.next=function(){if(0<r--)return o.next();throw goog.iter.StopIteration},n},goog.iter.consume=function(t,e){goog.asserts.assert(goog.math.isInt(e)&&0<=e);for(var o=goog.iter.toIterator(t);0<e--;)goog.iter.nextOrValue(o,null);return o},goog.iter.slice=function(t,e,o){return goog.asserts.assert(goog.math.isInt(e)&&0<=e),t=goog.iter.consume(t,e),goog.isNumber(o)&&(goog.asserts.assert(goog.math.isInt(o)&&o>=e),t=goog.iter.limit(t,o-e)),t},goog.iter.hasDuplicates_=function(t){var e=[];return goog.array.removeDuplicates(t,e),t.length!=e.length},goog.iter.permutations=function(t,e){var o=goog.iter.toArray(t),n=goog.isNumber(e)?e:o.length;return o=goog.array.repeat(o,n),o=goog.iter.product.apply(void 0,o),goog.iter.filter(o,function(t){return!goog.iter.hasDuplicates_(t)})},goog.iter.combinations=function(t,e){function o(t){return n[t]}var n=goog.iter.toArray(t),r=goog.iter.range(n.length);r=goog.iter.permutations(r,e);var i=goog.iter.filter(r,function(t){return goog.array.isSorted(t)});return r=new goog.iter.Iterator,r.next=function(){return goog.array.map(i.next(),o)},r},goog.iter.combinationsWithReplacement=function(t,e){function o(t){return n[t]}var n=goog.iter.toArray(t),r=goog.array.range(n.length);r=goog.array.repeat(r,e),r=goog.iter.product.apply(void 0,r);var i=goog.iter.filter(r,function(t){return goog.array.isSorted(t)});return r=new goog.iter.Iterator,r.next=function(){return goog.array.map(i.next(),o)},r},goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1},goog.dom.TagIterator=function(t,e,o,n,r){this.reversed=!!e,this.node=null,this.tagType=goog.dom.TagWalkType.OTHER,this.started_=!1,this.constrained=!o,t&&this.setPosition(t,n),this.depth=void 0!=r?r:this.tagType||0,this.reversed&&(this.depth*=-1)},goog.inherits(goog.dom.TagIterator,goog.iter.Iterator),goog.dom.TagIterator.prototype.setPosition=function(t,e,o){(this.node=t)&&(goog.isNumber(e)?this.tagType=e:this.tagType=this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG),goog.isNumber(o)&&(this.depth=o)},goog.dom.TagIterator.prototype.copyFrom=function(t){this.node=t.node,this.tagType=t.tagType,this.depth=t.depth,this.reversed=t.reversed,this.constrained=t.constrained},goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)},goog.dom.TagIterator.prototype.skipTag=function(){var t=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==t&&(this.tagType=-1*t,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.restartTag=function(){var t=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==t&&(this.tagType=-1*t,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.next=function(){if(this.started_){if(!this.node||this.constrained&&0==this.depth)throw goog.iter.StopIteration;var t=this.node,e=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==e){var o=this.reversed?t.lastChild:t.firstChild;o?this.setPosition(o):this.setPosition(t,-1*e)}else(o=this.reversed?t.previousSibling:t.nextSibling)?this.setPosition(o):this.setPosition(t.parentNode,-1*e);this.depth+=this.tagType*(this.reversed?-1:1)}else this.started_=!0;if(t=this.node,!this.node)throw goog.iter.StopIteration;return t},goog.dom.TagIterator.prototype.isStarted=function(){return this.started_},goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG},goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG},goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER},goog.dom.TagIterator.prototype.equals=function(t){return t.node==this.node&&(!this.node||t.tagType==this.tagType)},goog.dom.TagIterator.prototype.splice=function(t){var e=this.node;this.restartTag(),this.reversed=!this.reversed,goog.dom.TagIterator.prototype.next.call(this),this.reversed=!this.reversed;for(var o=goog.isArrayLike(arguments[0])?arguments[0]:arguments,n=o.length-1;0<=n;n--)goog.dom.insertSiblingAfter(o[n],e);goog.dom.removeNode(e)},goog.dom.NodeIterator=function(t,e,o,n){goog.dom.TagIterator.call(this,t,e,o,null,n)},goog.inherits(goog.dom.NodeIterator,goog.dom.TagIterator),goog.dom.NodeIterator.prototype.next=function(){do{goog.dom.NodeIterator.superClass_.next.call(this)}while(this.isEndTag());return this.node},goog.ui.PaletteRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.PaletteRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.PaletteRenderer),goog.ui.PaletteRenderer.cellId_=0,goog.ui.PaletteRenderer.CSS_CLASS="goog-palette",goog.ui.PaletteRenderer.prototype.createDom=function(t){var e=this.getClassNames(t);return t=t.getDomHelper().createDom("DIV",e,this.createGrid(t.getContent(),t.getSize(),t.getDomHelper())),goog.a11y.aria.setRole(t,goog.a11y.aria.Role.GRID),t},goog.ui.PaletteRenderer.prototype.createGrid=function(t,e,o){for(var n=[],r=0,i=0;r<e.height;r++){for(var s=[],a=0;a<e.width;a++){var l=t&&t[i++];s.push(this.createCell(l,o))}n.push(this.createRow(s,o))}return this.createTable(n,o)},goog.ui.PaletteRenderer.prototype.createTable=function(t,e){var o=e.createDom("TABLE",this.getCssClass()+"-table",e.createDom("TBODY",this.getCssClass()+"-body",t));return o.cellSpacing="0",o.cellPadding="0",o},goog.ui.PaletteRenderer.prototype.createRow=function(t,e){var o=e.createDom("TR",this.getCssClass()+"-row",t);return goog.a11y.aria.setRole(o,goog.a11y.aria.Role.ROW),o},goog.ui.PaletteRenderer.prototype.createCell=function(t,e){var o=e.createDom("TD",{class:this.getCssClass()+"-cell",id:this.getCssClass()+"-cell-"+goog.ui.PaletteRenderer.cellId_++},t);if(goog.a11y.aria.setRole(o,goog.a11y.aria.Role.GRIDCELL),goog.a11y.aria.setState(o,goog.a11y.aria.State.SELECTED,!1),!goog.dom.getTextContent(o)&&!goog.a11y.aria.getLabel(o)){var n=this.findAriaLabelForCell_(o);n&&goog.a11y.aria.setLabel(o,n)}return o},goog.ui.PaletteRenderer.prototype.findAriaLabelForCell_=function(t){t=new goog.dom.NodeIterator(t);for(var e,o="";!o&&(e=goog.iter.nextOrValue(t,null));)e.nodeType==goog.dom.NodeType.ELEMENT&&(o=goog.a11y.aria.getLabel(e)||e.title);return o},goog.ui.PaletteRenderer.prototype.canDecorate=function(t){return!1},goog.ui.PaletteRenderer.prototype.decorate=function(t,e){return null},goog.ui.PaletteRenderer.prototype.setContent=function(t,e){if(t){var o=goog.dom.getElementsByTagNameAndClass("TBODY",this.getCssClass()+"-body",t)[0];if(o){var n=0;if(goog.array.forEach(o.rows,function(t){goog.array.forEach(t.cells,function(t){if(goog.dom.removeChildren(t),e){var o=e[n++];o&&goog.dom.appendChild(t,o)}})}),n<e.length){for(var r=[],i=goog.dom.getDomHelper(t),s=o.rows[0].cells.length;n<e.length;){var a=e[n++];r.push(this.createCell(a,i)),r.length==s&&(a=this.createRow(r,i),goog.dom.appendChild(o,a),r.length=0)}if(0<r.length){for(;r.length<s;)r.push(this.createCell("",i));a=this.createRow(r,i),goog.dom.appendChild(o,a)}}}goog.style.setUnselectable(t,!0,goog.userAgent.GECKO)}},goog.ui.PaletteRenderer.prototype.getContainingItem=function(t,e){for(var o=t.getElement();e&&e.nodeType==goog.dom.NodeType.ELEMENT&&e!=o;){if("TD"==e.tagName&&goog.dom.classlist.contains(e,this.getCssClass()+"-cell"))return e.firstChild;e=e.parentNode}return null},goog.ui.PaletteRenderer.prototype.highlightCell=function(t,e,o){e&&(e=this.getCellForItem(e),goog.asserts.assert(e),goog.dom.classlist.enable(e,this.getCssClass()+"-cell-hover",o),o?goog.a11y.aria.setState(t.getElementStrict(),goog.a11y.aria.State.ACTIVEDESCENDANT,e.id):e.id==goog.a11y.aria.getState(t.getElementStrict(),goog.a11y.aria.State.ACTIVEDESCENDANT)&&goog.a11y.aria.removeState(t.getElementStrict(),goog.a11y.aria.State.ACTIVEDESCENDANT))},goog.ui.PaletteRenderer.prototype.getCellForItem=function(t){return t?t.parentNode:null},goog.ui.PaletteRenderer.prototype.selectCell=function(t,e,o){e&&(t=e.parentNode,goog.dom.classlist.enable(t,this.getCssClass()+"-cell-selected",o),goog.a11y.aria.setState(t,goog.a11y.aria.State.SELECTED,o))},goog.ui.PaletteRenderer.prototype.getCssClass=function(){return goog.ui.PaletteRenderer.CSS_CLASS},goog.ui.SelectionModel=function(t){goog.events.EventTarget.call(this),this.items_=[],this.addItems(t)},goog.inherits(goog.ui.SelectionModel,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.SelectionModel),goog.ui.SelectionModel.prototype.selectedItem_=null,goog.ui.SelectionModel.prototype.selectionHandler_=null,goog.ui.SelectionModel.prototype.getSelectionHandler=function(){return this.selectionHandler_},goog.ui.SelectionModel.prototype.setSelectionHandler=function(t){this.selectionHandler_=t},goog.ui.SelectionModel.prototype.getItemCount=function(){return this.items_.length},goog.ui.SelectionModel.prototype.indexOfItem=function(t){return t?goog.array.indexOf(this.items_,t):-1},goog.ui.SelectionModel.prototype.getFirst=function(){return this.items_[0]},goog.ui.SelectionModel.prototype.getLast=function(){return this.items_[this.items_.length-1]},goog.ui.SelectionModel.prototype.getItemAt=function(t){return this.items_[t]||null},goog.ui.SelectionModel.prototype.addItems=function(t){t&&(goog.array.forEach(t,function(t){this.selectItem_(t,!1)},this),goog.array.extend(this.items_,t))},goog.ui.SelectionModel.prototype.addItem=function(t){this.addItemAt(t,this.getItemCount())},goog.ui.SelectionModel.prototype.addItemAt=function(t,e){t&&(this.selectItem_(t,!1),goog.array.insertAt(this.items_,t,e))},goog.ui.SelectionModel.prototype.removeItem=function(t){t&&goog.array.remove(this.items_,t)&&t==this.selectedItem_&&(this.selectedItem_=null,this.dispatchEvent(goog.events.EventType.SELECT))},goog.ui.SelectionModel.prototype.removeItemAt=function(t){this.removeItem(this.getItemAt(t))},goog.ui.SelectionModel.prototype.getSelectedItem=function(){return this.selectedItem_},goog.ui.SelectionModel.prototype.getItems=function(){return goog.array.clone(this.items_)},goog.ui.SelectionModel.prototype.setSelectedItem=function(t){t!=this.selectedItem_&&(this.selectItem_(this.selectedItem_,!1),this.selectedItem_=t,this.selectItem_(t,!0)),this.dispatchEvent(goog.events.EventType.SELECT)},goog.ui.SelectionModel.prototype.getSelectedIndex=function(){return this.indexOfItem(this.selectedItem_)},goog.ui.SelectionModel.prototype.setSelectedIndex=function(t){this.setSelectedItem(this.getItemAt(t))},goog.ui.SelectionModel.prototype.clear=function(){goog.array.clear(this.items_),this.selectedItem_=null},goog.ui.SelectionModel.prototype.disposeInternal=function(){goog.ui.SelectionModel.superClass_.disposeInternal.call(this),delete this.items_,this.selectedItem_=null},goog.ui.SelectionModel.prototype.selectItem_=function(t,e){t&&("function"==typeof this.selectionHandler_?this.selectionHandler_(t,e):"function"==typeof t.setSelected&&t.setSelected(e))},goog.ui.Palette=function(t,e,o){goog.ui.Control.call(this,t,e||goog.ui.PaletteRenderer.getInstance(),o),this.setAutoStates(goog.ui.Component.State.CHECKED|goog.ui.Component.State.SELECTED|goog.ui.Component.State.OPENED,!1),this.currentCellControl_=new goog.ui.Palette.CurrentCell_,this.currentCellControl_.setParentEventTarget(this),this.lastHighlightedIndex_=-1},goog.inherits(goog.ui.Palette,goog.ui.Control),goog.tagUnsealableClass(goog.ui.Palette),goog.ui.Palette.EventType={AFTER_HIGHLIGHT:goog.events.getUniqueId("afterhighlight")},goog.ui.Palette.prototype.size_=null,goog.ui.Palette.prototype.highlightedIndex_=-1,goog.ui.Palette.prototype.selectionModel_=null,goog.ui.Palette.prototype.disposeInternal=function(){goog.ui.Palette.superClass_.disposeInternal.call(this),this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null),this.size_=null,this.currentCellControl_.dispose()},goog.ui.Palette.prototype.setContentInternal=function(t){goog.ui.Palette.superClass_.setContentInternal.call(this,t),this.adjustSize_(),this.selectionModel_?(this.selectionModel_.clear(),this.selectionModel_.addItems(t)):(this.selectionModel_=new goog.ui.SelectionModel(t),this.selectionModel_.setSelectionHandler(goog.bind(this.selectItem_,this)),this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange)),this.highlightedIndex_=-1},goog.ui.Palette.prototype.getCaption=function(){return""},goog.ui.Palette.prototype.setCaption=function(t){},goog.ui.Palette.prototype.handleMouseOver=function(t){goog.ui.Palette.superClass_.handleMouseOver.call(this,t);var e=this.getRenderer().getContainingItem(this,t.target);e&&t.relatedTarget&&goog.dom.contains(e,t.relatedTarget)||e!=this.getHighlightedItem()&&this.setHighlightedItem(e)},goog.ui.Palette.prototype.handleMouseDown=function(t){goog.ui.Palette.superClass_.handleMouseDown.call(this,t),this.isActive()&&(t=this.getRenderer().getContainingItem(this,t.target))!=this.getHighlightedItem()&&this.setHighlightedItem(t)},goog.ui.Palette.prototype.performActionInternal=function(t){var e=this.getHighlightedItem();return!!e&&(t&&this.shouldSelectHighlightedItem_(t)&&this.setSelectedItem(e),goog.ui.Palette.superClass_.performActionInternal.call(this,t))},goog.ui.Palette.prototype.shouldSelectHighlightedItem_=function(t){return!this.getSelectedItem()||("mouseup"!=t.type||!!this.getRenderer().getContainingItem(this,t.target))},goog.ui.Palette.prototype.handleKeyEvent=function(t){var e=this.getContent();e=e?e.length:0;var o=this.size_.width;if(0==e||!this.isEnabled())return!1;if(t.keyCode==goog.events.KeyCodes.ENTER||t.keyCode==goog.events.KeyCodes.SPACE)return this.performActionInternal(t);if(t.keyCode==goog.events.KeyCodes.HOME)return this.setHighlightedIndex(0),!0;if(t.keyCode==goog.events.KeyCodes.END)return this.setHighlightedIndex(e-1),!0;var n=0>this.highlightedIndex_?this.getSelectedIndex():this.highlightedIndex_;switch(t.keyCode){case goog.events.KeyCodes.LEFT:return-1!=n&&0!=n||(n=e),this.setHighlightedIndex(n-1),t.preventDefault(),!0;case goog.events.KeyCodes.RIGHT:return n==e-1&&(n=-1),this.setHighlightedIndex(n+1),t.preventDefault(),!0;case goog.events.KeyCodes.UP:if(-1==n&&(n=e+o-1),n>=o)return this.setHighlightedIndex(n-o),t.preventDefault(),!0;break;case goog.events.KeyCodes.DOWN:if(-1==n&&(n=-o),n<e-o)return this.setHighlightedIndex(n+o),t.preventDefault(),!0}return!1},goog.ui.Palette.prototype.handleSelectionChange=function(t){},goog.ui.Palette.prototype.getSize=function(){return this.size_},goog.ui.Palette.prototype.setSize=function(t,e){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.size_=goog.isNumber(t)?new goog.math.Size(t,e):t,this.adjustSize_()},goog.ui.Palette.prototype.getHighlightedIndex=function(){return this.highlightedIndex_},goog.ui.Palette.prototype.getHighlightedItem=function(){var t=this.getContent();return t&&t[this.highlightedIndex_]},goog.ui.Palette.prototype.getHighlightedCellElement_=function(){return this.getRenderer().getCellForItem(this.getHighlightedItem())},goog.ui.Palette.prototype.setHighlightedIndex=function(t){t!=this.highlightedIndex_&&(this.highlightIndex_(this.highlightedIndex_,!1),this.lastHighlightedIndex_=this.highlightedIndex_,this.highlightedIndex_=t,this.highlightIndex_(t,!0),this.dispatchEvent(goog.ui.Palette.EventType.AFTER_HIGHLIGHT))},goog.ui.Palette.prototype.setHighlightedItem=function(t){var e=this.getContent();this.setHighlightedIndex(e&&t?goog.array.indexOf(e,t):-1)},goog.ui.Palette.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1},goog.ui.Palette.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null},goog.ui.Palette.prototype.setSelectedIndex=function(t){this.selectionModel_&&this.selectionModel_.setSelectedIndex(t)},goog.ui.Palette.prototype.setSelectedItem=function(t){this.selectionModel_&&this.selectionModel_.setSelectedItem(t)},goog.ui.Palette.prototype.highlightIndex_=function(t,e){if(this.getElement()){var o=this.getContent();if(o&&0<=t&&t<o.length){var n=this.getHighlightedCellElement_();this.currentCellControl_.getElement()!=n&&this.currentCellControl_.setElementInternal(n),this.currentCellControl_.tryHighlight(e)&&this.getRenderer().highlightCell(this,o[t],e)}}},goog.ui.Palette.prototype.setHighlighted=function(t){t&&-1==this.highlightedIndex_?this.setHighlightedIndex(-1<this.lastHighlightedIndex_?this.lastHighlightedIndex_:0):t||this.setHighlightedIndex(-1),goog.ui.Palette.superClass_.setHighlighted.call(this,t)},goog.ui.Palette.prototype.selectItem_=function(t,e){this.getElement()&&this.getRenderer().selectCell(this,t,e)},goog.ui.Palette.prototype.adjustSize_=function(){var t=this.getContent();t?this.size_&&this.size_.width?(t=Math.ceil(t.length/this.size_.width),(!goog.isNumber(this.size_.height)||this.size_.height<t)&&(this.size_.height=t)):(t=Math.ceil(Math.sqrt(t.length)),this.size_=new goog.math.Size(t,t)):this.size_=new goog.math.Size(0,0)},goog.ui.Palette.CurrentCell_=function(){goog.ui.Control.call(this,null),this.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0)},goog.inherits(goog.ui.Palette.CurrentCell_,goog.ui.Control),goog.ui.Palette.CurrentCell_.prototype.tryHighlight=function(t){return this.setHighlighted(t),this.isHighlighted()==t},goog.ui.ColorPalette=function(t,e,o){this.colors_=t||[],goog.ui.Palette.call(this,null,e||goog.ui.PaletteRenderer.getInstance(),o),this.setColors(this.colors_)},goog.inherits(goog.ui.ColorPalette,goog.ui.Palette),goog.tagUnsealableClass(goog.ui.ColorPalette),goog.ui.ColorPalette.prototype.normalizedColors_=null,goog.ui.ColorPalette.prototype.labels_=null,goog.ui.ColorPalette.prototype.getColors=function(){return this.colors_},goog.ui.ColorPalette.prototype.setColors=function(t,e){this.colors_=t,this.labels_=e||null,this.normalizedColors_=null,this.setContent(this.createColorNodes())},goog.ui.ColorPalette.prototype.getSelectedColor=function(){var t=this.getSelectedItem();return t?(t=goog.style.getStyle(t,"background-color"),goog.ui.ColorPalette.parseColor_(t)):null},goog.ui.ColorPalette.prototype.setSelectedColor=function(t){t=goog.ui.ColorPalette.parseColor_(t),this.normalizedColors_||(this.normalizedColors_=goog.array.map(this.colors_,function(t){return goog.ui.ColorPalette.parseColor_(t)})),this.setSelectedIndex(t?goog.array.indexOf(this.normalizedColors_,t):-1)},goog.ui.ColorPalette.prototype.createColorNodes=function(){return goog.array.map(this.colors_,function(t,e){var o=this.getDomHelper().createDom("DIV",{class:this.getRenderer().getCssClass()+"-colorswatch",style:"background-color:"+t});return o.title=this.labels_&&this.labels_[e]?this.labels_[e]:"#"==t.charAt(0)?"RGB ("+goog.color.hexToRgb(t).join(", ")+")":t,o},this)},goog.ui.ColorPalette.parseColor_=function(t){if(t)try{return goog.color.parse(t).hex}catch(t){}return null},goog.ui.ColorPicker=function(t,e){goog.ui.Component.call(this,t),this.colorPalette_=e||null,this.getHandler().listen(this,goog.ui.Component.EventType.ACTION,this.onColorPaletteAction_)},goog.inherits(goog.ui.ColorPicker,goog.ui.Component),goog.ui.ColorPicker.DEFAULT_NUM_COLS=5,goog.ui.ColorPicker.EventType={CHANGE:"change"},goog.ui.ColorPicker.prototype.focusable_=!0,goog.ui.ColorPicker.prototype.getColors=function(){return this.colorPalette_?this.colorPalette_.getColors():null},goog.ui.ColorPicker.prototype.setColors=function(t){this.colorPalette_?this.colorPalette_.setColors(t):this.createColorPalette_(t)},goog.ui.ColorPicker.prototype.addColors=function(t){this.setColors(t)},goog.ui.ColorPicker.prototype.setSize=function(t){this.colorPalette_||this.createColorPalette_([]),this.colorPalette_.setSize(t)},goog.ui.ColorPicker.prototype.getSize=function(){return this.colorPalette_?this.colorPalette_.getSize():null},goog.ui.ColorPicker.prototype.setColumnCount=function(t){this.setSize(t)},goog.ui.ColorPicker.prototype.getSelectedIndex=function(){return this.colorPalette_?this.colorPalette_.getSelectedIndex():-1},goog.ui.ColorPicker.prototype.setSelectedIndex=function(t){this.colorPalette_&&this.colorPalette_.setSelectedIndex(t)},goog.ui.ColorPicker.prototype.getSelectedColor=function(){return this.colorPalette_?this.colorPalette_.getSelectedColor():null},goog.ui.ColorPicker.prototype.setSelectedColor=function(t){this.colorPalette_&&this.colorPalette_.setSelectedColor(t)},goog.ui.ColorPicker.prototype.isFocusable=function(){return this.focusable_},goog.ui.ColorPicker.prototype.setFocusable=function(t){this.focusable_=t,this.colorPalette_&&this.colorPalette_.setSupportedState(goog.ui.Component.State.FOCUSED,t)},goog.ui.ColorPicker.prototype.canDecorate=function(t){return!1},goog.ui.ColorPicker.prototype.enterDocument=function(){goog.ui.ColorPicker.superClass_.enterDocument.call(this),this.colorPalette_&&this.colorPalette_.render(this.getElement()),this.getElement().unselectable="on"},goog.ui.ColorPicker.prototype.disposeInternal=function(){goog.ui.ColorPicker.superClass_.disposeInternal.call(this),this.colorPalette_&&(this.colorPalette_.dispose(),this.colorPalette_=null)},goog.ui.ColorPicker.prototype.focus=function(){this.colorPalette_&&this.colorPalette_.getElement().focus()},goog.ui.ColorPicker.prototype.onColorPaletteAction_=function(t){t.stopPropagation(),this.dispatchEvent(goog.ui.ColorPicker.EventType.CHANGE)},goog.ui.ColorPicker.prototype.createColorPalette_=function(t){t=new goog.ui.ColorPalette(t,null,this.getDomHelper()),t.setSize(goog.ui.ColorPicker.DEFAULT_NUM_COLS),t.setSupportedState(goog.ui.Component.State.FOCUSED,this.focusable_),this.addChild(t),this.colorPalette_=t,this.isInDocument()&&this.colorPalette_.render(this.getElement())},goog.ui.ColorPicker.createSimpleColorGrid=function(t){return t=new goog.ui.ColorPicker(t),t.setSize(7),t.setColors(goog.ui.ColorPicker.SIMPLE_GRID_COLORS),t},goog.ui.ColorPicker.SIMPLE_GRID_COLORS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),goog.events.FocusHandler=function(t){goog.events.EventTarget.call(this),this.element_=t,t=goog.userAgent.IE?"focusout":"blur",this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE),this.listenKeyOut_=goog.events.listen(this.element_,t,this,!goog.userAgent.IE)},goog.inherits(goog.events.FocusHandler,goog.events.EventTarget),goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"},goog.events.FocusHandler.prototype.handleEvent=function(t){var e=t.getBrowserEvent();e=new goog.events.BrowserEvent(e),e.type="focusin"==t.type||"focus"==t.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT,this.dispatchEvent(e)},goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.listenKeyIn_),goog.events.unlistenByKey(this.listenKeyOut_),delete this.element_},goog.debug.errorcontext={},goog.debug.errorcontext.addErrorContext=function(t,e,o){t[goog.debug.errorcontext.CONTEXT_KEY_]||(t[goog.debug.errorcontext.CONTEXT_KEY_]={}),t[goog.debug.errorcontext.CONTEXT_KEY_][e]=o},goog.debug.errorcontext.getErrorContext=function(t){return t[goog.debug.errorcontext.CONTEXT_KEY_]||{}},goog.debug.errorcontext.CONTEXT_KEY_="__closure__error__context__984382",goog.debug.LOGGING_ENABLED=goog.DEBUG,goog.debug.FORCE_SLOPPY_STACKS=!1;goog.debug.catchErrors=function(t,e,o){o=o||goog.global;var n=o.onerror,r=!!e;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(r=!r),o.onerror=function(e,o,i,s,a){return n&&n(e,o,i,s,a),t({message:e,fileName:o,line:i,col:s,error:a}),r}},goog.debug.expose=function(t,e){if(void 0===t)return"undefined";if(null==t)return"NULL";var o,n=[];for(o in t)if(e||!goog.isFunction(t[o])){var r=o+" = ";try{r+=t[o]}catch(t){r+="*** "+t+" ***"}n.push(r)}return n.join("\n")},goog.debug.deepExpose=function(t,e){var o=[],n=[],r={},i=function(t,s){var a=s+"  ";try{if(goog.isDef(t))if(goog.isNull(t))o.push("NULL");else if(goog.isString(t))o.push('"'+t.replace(/\n/g,"\n"+s)+'"');else if(goog.isFunction(t))o.push(String(t).replace(/\n/g,"\n"+s));else if(goog.isObject(t)){goog.hasUid(t)||n.push(t);var l=goog.getUid(t);if(r[l])o.push("*** reference loop detected (id="+l+") ***");else{r[l]=!0,o.push("{");for(var c in t)!e&&goog.isFunction(t[c])||(o.push("\n"),o.push(a),o.push(c+" = "),i(t[c],a));o.push("\n"+s+"}"),delete r[l]}}else o.push(t);else o.push("undefined")}catch(t){o.push("*** "+t+" ***")}};i(t,"");for(var s=0;s<n.length;s++)goog.removeUid(n[s]);return o.join("")},goog.debug.exposeArray=function(t){for(var e=[],o=0;o<t.length;o++)goog.isArray(t[o])?e.push(goog.debug.exposeArray(t[o])):e.push(t[o]);return"[ "+e.join(", ")+" ]"},goog.debug.normalizeErrorObject=function(t){var e=goog.getObjectByName("window.location.href");if(goog.isString(t))return{message:t,name:"Unknown error",lineNumber:"Not available",fileName:e,stack:"Not available"};var o=!1;try{var n=t.lineNumber||t.line||"Not available"}catch(t){n="Not available",o=!0}try{var r=t.fileName||t.filename||t.sourceURL||goog.global.$googDebugFname||e}catch(t){r="Not available",o=!0}return!o&&t.lineNumber&&t.fileName&&t.stack&&t.message&&t.name?t:{message:t.message||"Not available",name:t.name||"UnknownError",lineNumber:n,fileName:r,stack:t.stack||"Not available"}},goog.debug.enhanceError=function(t,e){if(t instanceof Error)var o=t;else o=Error(t),Error.captureStackTrace&&Error.captureStackTrace(o,goog.debug.enhanceError);if(o.stack||(o.stack=goog.debug.getStacktrace(goog.debug.enhanceError)),e){for(var n=0;o["message"+n];)++n;o["message"+n]=String(e)}return o},goog.debug.enhanceErrorWithContext=function(t,e){var o=goog.debug.enhanceError(t);if(e)for(var n in e)goog.debug.errorcontext.addErrorContext(o,n,e[n]);return o},goog.debug.getStacktraceSimple=function(t){if(!goog.debug.FORCE_SLOPPY_STACKS){var e=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(e)return e}e=[];for(var o=arguments.callee.caller,n=0;o&&(!t||n<t);){e.push(goog.debug.getFunctionName(o)),e.push("()\n");try{o=o.caller}catch(t){e.push("[exception trying to get caller]\n");break}if(++n>=goog.debug.MAX_STACK_DEPTH){e.push("[...long stack...]");break}}return t&&n>=t?e.push("[...reached max depth limit...]"):e.push("[end]"),e.join("")},goog.debug.MAX_STACK_DEPTH=50,goog.debug.getNativeStackTrace_=function(t){var e=Error();if(Error.captureStackTrace)return Error.captureStackTrace(e,t),String(e.stack);try{throw e}catch(t){e=t}return(t=e.stack)?String(t):null},goog.debug.getStacktrace=function(t){var e;return goog.debug.FORCE_SLOPPY_STACKS||(e=goog.debug.getNativeStackTrace_(t||goog.debug.getStacktrace)),e||(e=goog.debug.getStacktraceHelper_(t||arguments.callee.caller,[])),e},goog.debug.getStacktraceHelper_=function(t,e){var o=[];if(goog.array.contains(e,t))o.push("[...circular reference...]");else if(t&&e.length<goog.debug.MAX_STACK_DEPTH){o.push(goog.debug.getFunctionName(t)+"(");for(var n=t.arguments,r=0;n&&r<n.length;r++){0<r&&o.push(", ");var i=n[r];switch(typeof i){case"object":i=i?"object":"null";break;case"string":break;case"number":i=String(i);break;case"boolean":i=i?"true":"false";break;case"function":i=(i=goog.debug.getFunctionName(i))?i:"[fn]";break;default:i=typeof i}40<i.length&&(i=i.substr(0,40)+"..."),o.push(i)}e.push(t),o.push(")\n");try{o.push(goog.debug.getStacktraceHelper_(t.caller,e))}catch(t){o.push("[exception trying to get caller]\n")}}else t?o.push("[...long stack...]"):o.push("[end]");return o.join("")},goog.debug.setFunctionResolver=function(t){goog.debug.fnNameResolver_=t},goog.debug.getFunctionName=function(t){if(goog.debug.fnNameCache_[t])return goog.debug.fnNameCache_[t];if(goog.debug.fnNameResolver_){var e=goog.debug.fnNameResolver_(t);if(e)return goog.debug.fnNameCache_[t]=e}return t=String(t),goog.debug.fnNameCache_[t]||(e=/function ([^\(]+)/.exec(t),goog.debug.fnNameCache_[t]=e?e[1]:"[Anonymous]"),goog.debug.fnNameCache_[t]},goog.debug.makeWhitespaceVisible=function(t){return t.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")},goog.debug.runtimeType=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):null===t?"null":typeof t},goog.debug.fnNameCache_={},goog.debug.LogRecord=function(t,e,o,n,r){this.reset(t,e,o,n,r)},goog.debug.LogRecord.prototype.sequenceNumber_=0,goog.debug.LogRecord.prototype.exception_=null,goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0,goog.debug.LogRecord.nextSequenceNumber_=0,goog.debug.LogRecord.prototype.reset=function(t,e,o,n,r){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof r?r:goog.debug.LogRecord.nextSequenceNumber_++),this.time_=n||goog.now(),this.level_=t,this.msg_=e,this.loggerName_=o,delete this.exception_},goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_},goog.debug.LogRecord.prototype.getException=function(){return this.exception_},goog.debug.LogRecord.prototype.setException=function(t){this.exception_=t},goog.debug.LogRecord.prototype.setLoggerName=function(t){this.loggerName_=t},goog.debug.LogRecord.prototype.getLevel=function(){return this.level_},goog.debug.LogRecord.prototype.setLevel=function(t){this.level_=t},goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_},goog.debug.LogRecord.prototype.setMessage=function(t){this.msg_=t},goog.debug.LogRecord.prototype.getMillis=function(){return this.time_},goog.debug.LogRecord.prototype.setMillis=function(t){this.time_=t},goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_},goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY."),this.clear()},goog.debug.LogBuffer.getInstance=function(){return goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer),goog.debug.LogBuffer.instance_},goog.debug.LogBuffer.CAPACITY=0,goog.debug.LogBuffer.prototype.addRecord=function(t,e,o){var n=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;return this.curIndex_=n,this.isFull_?(n=this.buffer_[n],n.reset(t,e,o),n):(this.isFull_=n==goog.debug.LogBuffer.CAPACITY-1,this.buffer_[n]=new goog.debug.LogRecord(t,e,o))},goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY},goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY),this.curIndex_=-1,this.isFull_=!1},goog.debug.LogBuffer.prototype.forEachRecord=function(t){var e=this.buffer_;if(e[0]){var o=this.curIndex_,n=this.isFull_?o:-1;do{n=(n+1)%goog.debug.LogBuffer.CAPACITY,t(e[n])}while(n!=o)}},goog.debug.Logger=function(t){this.name_=t,this.handlers_=this.children_=this.level_=this.parent_=null},goog.debug.Logger.ROOT_LOGGER_NAME="",goog.debug.Logger.ENABLE_HIERARCHY=!0,goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]),goog.debug.Logger.Level=function(t,e){this.name=t,this.value=e},goog.debug.Logger.Level.prototype.toString=function(){return this.name},goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",1/0),goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200),goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1e3),goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900),goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800),goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700),goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500),goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400),goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300),goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0),goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL],goog.debug.Logger.Level.predefinedLevelsCache_=null,goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var t,e=0;t=goog.debug.Logger.Level.PREDEFINED_LEVELS[e];e++)goog.debug.Logger.Level.predefinedLevelsCache_[t.value]=t,goog.debug.Logger.Level.predefinedLevelsCache_[t.name]=t},goog.debug.Logger.Level.getPredefinedLevel=function(t){return goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_(),goog.debug.Logger.Level.predefinedLevelsCache_[t]||null},goog.debug.Logger.Level.getPredefinedLevelByValue=function(t){if(goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_(),t in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[t];for(var e=0;e<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++e){var o=goog.debug.Logger.Level.PREDEFINED_LEVELS[e];if(o.value<=t)return o}return null},goog.debug.Logger.getLogger=function(t){return goog.debug.LogManager.getLogger(t)},goog.debug.Logger.logToProfilers=function(t){var e=goog.global.console;e&&e.timeStamp&&e.timeStamp(t),(e=goog.global.msWriteProfilerMark)&&e(t)},goog.debug.Logger.prototype.getName=function(){return this.name_},goog.debug.Logger.prototype.addHandler=function(t){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(t)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(t)))},goog.debug.Logger.prototype.removeHandler=function(t){if(goog.debug.LOGGING_ENABLED){var e=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!e&&goog.array.remove(e,t)}return!1},goog.debug.Logger.prototype.getParent=function(){return this.parent_},goog.debug.Logger.prototype.getChildren=function(){return this.children_||(this.children_={}),this.children_},goog.debug.Logger.prototype.setLevel=function(t){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?this.level_=t:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=t))},goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF},goog.debug.Logger.prototype.getEffectiveLevel=function(){return goog.debug.LOGGING_ENABLED?goog.debug.Logger.ENABLE_HIERARCHY?this.level_?this.level_:this.parent_?this.parent_.getEffectiveLevel():(goog.asserts.fail("Root logger has no level set."),null):goog.debug.Logger.rootLevel_:goog.debug.Logger.Level.OFF},goog.debug.Logger.prototype.isLoggable=function(t){return goog.debug.LOGGING_ENABLED&&t.value>=this.getEffectiveLevel().value},goog.debug.Logger.prototype.log=function(t,e,o){goog.debug.LOGGING_ENABLED&&this.isLoggable(t)&&(goog.isFunction(e)&&(e=e()),this.doLogRecord_(this.getLogRecord(t,e,o)))},goog.debug.Logger.prototype.getLogRecord=function(t,e,o){return t=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(t,e,this.name_):new goog.debug.LogRecord(t,String(e),this.name_),o&&t.setException(o),t},goog.debug.Logger.prototype.shout=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SHOUT,t,e)},goog.debug.Logger.prototype.severe=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SEVERE,t,e)},goog.debug.Logger.prototype.warning=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.WARNING,t,e)},goog.debug.Logger.prototype.info=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.INFO,t,e)},goog.debug.Logger.prototype.config=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.CONFIG,t,e)},goog.debug.Logger.prototype.fine=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINE,t,e)},goog.debug.Logger.prototype.finer=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINER,t,e)},goog.debug.Logger.prototype.finest=function(t,e){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINEST,t,e)},goog.debug.Logger.prototype.logRecord=function(t){goog.debug.LOGGING_ENABLED&&this.isLoggable(t.getLevel())&&this.doLogRecord_(t)},goog.debug.Logger.prototype.doLogRecord_=function(t){if(goog.debug.Logger.logToProfilers("log:"+t.getMessage()),goog.debug.Logger.ENABLE_HIERARCHY)for(var e=this;e;)e.callPublish_(t),e=e.getParent();else{e=0;for(var o;o=goog.debug.Logger.rootHandlers_[e++];)o(t)}},goog.debug.Logger.prototype.callPublish_=function(t){if(this.handlers_)for(var e,o=0;e=this.handlers_[o];o++)e(t)},goog.debug.Logger.prototype.setParent_=function(t){this.parent_=t},goog.debug.Logger.prototype.addChild_=function(t,e){this.getChildren()[t]=e},goog.debug.LogManager={},goog.debug.LogManager.loggers_={},goog.debug.LogManager.rootLogger_=null,goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME),goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))},goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_},goog.debug.LogManager.getRoot=function(){return goog.debug.LogManager.initialize(),goog.debug.LogManager.rootLogger_},goog.debug.LogManager.getLogger=function(t){return goog.debug.LogManager.initialize(),goog.debug.LogManager.loggers_[t]||goog.debug.LogManager.createLogger_(t)},goog.debug.LogManager.createFunctionForCatchErrors=function(t){return function(e){(t||goog.debug.LogManager.getRoot()).severe("Error: "+e.message+" ("+e.fileName+" @ Line: "+e.line+")")}},goog.debug.LogManager.createLogger_=function(t){var e=new goog.debug.Logger(t);if(goog.debug.Logger.ENABLE_HIERARCHY){var o=t.lastIndexOf("."),n=t.substr(0,o);o=t.substr(o+1),n=goog.debug.LogManager.getLogger(n),n.addChild_(o,e),e.setParent_(n)}return goog.debug.LogManager.loggers_[t]=e},goog.log={},goog.log.ENABLED=goog.debug.LOGGING_ENABLED,goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME,goog.log.Logger=goog.debug.Logger,goog.log.Level=goog.debug.Logger.Level,goog.log.LogRecord=goog.debug.LogRecord,goog.log.getLogger=function(t,e){if(goog.log.ENABLED){var o=goog.debug.LogManager.getLogger(t);return e&&o&&o.setLevel(e),o}return null},goog.log.addHandler=function(t,e){goog.log.ENABLED&&t&&t.addHandler(e)},goog.log.removeHandler=function(t,e){return!(!goog.log.ENABLED||!t)&&t.removeHandler(e)},goog.log.log=function(t,e,o,n){goog.log.ENABLED&&t&&t.log(e,o,n)},goog.log.error=function(t,e,o){goog.log.ENABLED&&t&&t.severe(e,o)},goog.log.warning=function(t,e,o){goog.log.ENABLED&&t&&t.warning(e,o)},goog.log.info=function(t,e,o){goog.log.ENABLED&&t&&t.info(e,o)},goog.log.fine=function(t,e,o){goog.log.ENABLED&&t&&t.fine(e,o)},goog.string.StringBuffer=function(t,e){null!=t&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(t){this.buffer_=""+t},goog.string.StringBuffer.prototype.append=function(t,e,o){if(this.buffer_+=String(t),null!=e)for(var n=1;n<arguments.length;n++)this.buffer_+=arguments[n];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_},goog.ui.tree={},goog.ui.tree.BaseNode=function(t,e,o){goog.ui.Component.call(this,o),this.config_=e||goog.ui.tree.BaseNode.defaultConfig,this.html_=goog.html.SafeHtml.htmlEscapePreservingNewlines(t),this.expanded_=this.selected_=!1,this.toolTip_=null,this.afterLabelHtml_=goog.html.SafeHtml.EMPTY,this.isUserCollapsible_=!0,this.depth_=-1},goog.inherits(goog.ui.tree.BaseNode,goog.ui.Component),goog.ui.tree.BaseNode.EventType={BEFORE_EXPAND:"beforeexpand",EXPAND:"expand",BEFORE_COLLAPSE:"beforecollapse",COLLAPSE:"collapse"},goog.ui.tree.BaseNode.allNodes={},goog.ui.tree.BaseNode.prototype.disposeInternal=function(){goog.ui.tree.BaseNode.superClass_.disposeInternal.call(this),this.tree&&(this.tree.removeNode(this),this.tree=null),this.setElementInternal(null)},goog.ui.tree.BaseNode.prototype.initAccessibility=function(){var t=this.getElement();if(t){var e=this.getLabelElement();if(e&&!e.id&&(e.id=this.getId()+".label"),goog.a11y.aria.setRole(t,"treeitem"),goog.a11y.aria.setState(t,"selected",!1),goog.a11y.aria.setState(t,"level",this.getDepth()),e&&goog.a11y.aria.setState(t,"labelledby",e.id),(e=this.getIconElement())&&goog.a11y.aria.setRole(e,"presentation"),(e=this.getExpandIconElement())&&goog.a11y.aria.setRole(e,"presentation"),(e=this.getChildrenElement())&&(goog.a11y.aria.setRole(e,"group"),e.hasChildNodes()))for(goog.a11y.aria.setState(t,goog.a11y.aria.State.EXPANDED,!1),t=this.getChildCount(),e=1;e<=t;e++){var o=this.getChildAt(e-1).getElement();goog.asserts.assert(o,"The child element cannot be null"),goog.a11y.aria.setState(o,"setsize",t),goog.a11y.aria.setState(o,"posinset",e)}}},goog.ui.tree.BaseNode.prototype.createDom=function(){var t=this.getDomHelper().safeHtmlToNode(this.toSafeHtml());this.setElementInternal(t)},goog.ui.tree.BaseNode.prototype.enterDocument=function(){goog.ui.tree.BaseNode.superClass_.enterDocument.call(this),goog.ui.tree.BaseNode.allNodes[this.getId()]=this,this.initAccessibility()},goog.ui.tree.BaseNode.prototype.exitDocument=function(){goog.ui.tree.BaseNode.superClass_.exitDocument.call(this),delete goog.ui.tree.BaseNode.allNodes[this.getId()]},goog.ui.tree.BaseNode.prototype.addChildAt=function(t,e,o){goog.asserts.assert(!t.getParent()),goog.asserts.assertInstanceof(t,goog.ui.tree.BaseNode),o=this.getChildAt(e-1);var n=this.getChildAt(e);if(goog.ui.tree.BaseNode.superClass_.addChildAt.call(this,t,e),t.previousSibling_=o,t.nextSibling_=n,o?o.nextSibling_=t:this.firstChild_=t,n?n.previousSibling_=t:this.lastChild_=t,(e=this.getTree())&&t.setTreeInternal(e),t.setDepth_(this.getDepth()+1),(e=this.getElement())&&(this.updateExpandIcon(),goog.a11y.aria.setState(e,goog.a11y.aria.State.EXPANDED,this.getExpanded()),this.getExpanded())){e=this.getChildrenElement(),t.getElement()||t.createDom();var r=t.getElement(),i=n&&n.getElement();e.insertBefore(r,i),this.isInDocument()&&t.enterDocument(),n||(o?o.updateExpandIcon():(goog.style.setElementShown(e,!0),this.setExpanded(this.getExpanded())))}},goog.ui.tree.BaseNode.prototype.add=function(t,e){return goog.asserts.assert(!e||e.getParent()==this,"Can only add nodes before siblings"),t.getParent()&&t.getParent().removeChild(t),this.addChildAt(t,e?this.indexOfChild(e):this.getChildCount()),t},goog.ui.tree.BaseNode.prototype.removeChild=function(t,e){var o=this.getTree(),n=o?o.getSelectedItem():null;if((n==t||t.contains(n))&&(o.hasFocus()?(this.select(),goog.Timer.callOnce(this.onTimeoutSelect_,10,this)):this.select()),goog.ui.tree.BaseNode.superClass_.removeChild.call(this,t),this.lastChild_==t&&(this.lastChild_=t.previousSibling_),this.firstChild_==t&&(this.firstChild_=t.nextSibling_),t.previousSibling_&&(t.previousSibling_.nextSibling_=t.nextSibling_),t.nextSibling_&&(t.nextSibling_.previousSibling_=t.previousSibling_),n=t.isLastSibling(),t.tree=null,t.depth_=-1,o&&(o.removeNode(t),this.isInDocument())){if(o=this.getChildrenElement(),t.isInDocument()){var r=t.getElement();o.removeChild(r),t.exitDocument()}n&&(n=this.getLastChild())&&n.updateExpandIcon(),this.hasChildren()||(o.style.display="none",this.updateExpandIcon(),this.updateIcon_(),(n=this.getElement())&&goog.a11y.aria.removeState(n,goog.a11y.aria.State.EXPANDED))}return t},goog.ui.tree.BaseNode.prototype.remove=goog.ui.tree.BaseNode.prototype.removeChild,goog.ui.tree.BaseNode.prototype.onTimeoutSelect_=function(){this.select()},goog.ui.tree.BaseNode.prototype.getTree=goog.abstractMethod,goog.ui.tree.BaseNode.prototype.getDepth=function(){var t=this.depth_;return 0>t&&(t=this.computeDepth_(),this.setDepth_(t)),t},goog.ui.tree.BaseNode.prototype.computeDepth_=function(){var t=this.getParent();return t?t.getDepth()+1:0},goog.ui.tree.BaseNode.prototype.setDepth_=function(t){if(t!=this.depth_){this.depth_=t;var e=this.getRowElement();if(e){var o=this.getPixelIndent_()+"px";this.isRightToLeft()?e.style.paddingRight=o:e.style.paddingLeft=o}this.forEachChild(function(e){e.setDepth_(t+1)})}},goog.ui.tree.BaseNode.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.getParent()}return!1},goog.ui.tree.BaseNode.EMPTY_CHILDREN_=[],goog.ui.tree.BaseNode.prototype.getChildren=function(){var t=[];return this.forEachChild(function(e){t.push(e)}),t},goog.ui.tree.BaseNode.prototype.getFirstChild=function(){return this.getChildAt(0)},goog.ui.tree.BaseNode.prototype.getLastChild=function(){return this.getChildAt(this.getChildCount()-1)},goog.ui.tree.BaseNode.prototype.getPreviousSibling=function(){return this.previousSibling_},goog.ui.tree.BaseNode.prototype.getNextSibling=function(){return this.nextSibling_},goog.ui.tree.BaseNode.prototype.isLastSibling=function(){return!this.nextSibling_},goog.ui.tree.BaseNode.prototype.isSelected=function(){return this.selected_},goog.ui.tree.BaseNode.prototype.select=function(){var t=this.getTree();t&&t.setSelectedItem(this)},goog.ui.tree.BaseNode.prototype.deselect=goog.nullFunction,goog.ui.tree.BaseNode.prototype.setSelectedInternal=function(t){if(this.selected_!=t){this.selected_=t,this.updateRow();var e=this.getElement();e&&(goog.a11y.aria.setState(e,"selected",t),t&&(t=this.getTree().getElement(),goog.asserts.assert(t,"The DOM element for the tree cannot be null"),goog.a11y.aria.setState(t,"activedescendant",this.getId())))}},goog.ui.tree.BaseNode.prototype.getExpanded=function(){return this.expanded_},goog.ui.tree.BaseNode.prototype.setExpandedInternal=function(t){this.expanded_=t},goog.ui.tree.BaseNode.prototype.setExpanded=function(t){var e=t!=this.expanded_;if(!e||this.dispatchEvent(t?goog.ui.tree.BaseNode.EventType.BEFORE_EXPAND:goog.ui.tree.BaseNode.EventType.BEFORE_COLLAPSE)){this.expanded_=t;var o=this.getTree(),n=this.getElement();if(this.hasChildren()){if(!t&&o&&this.contains(o.getSelectedItem())&&this.select(),n){if((o=this.getChildrenElement())&&(goog.style.setElementShown(o,t),goog.a11y.aria.setState(n,goog.a11y.aria.State.EXPANDED,t),t&&this.isInDocument()&&!o.hasChildNodes())){var r=[];this.forEachChild(function(t){r.push(t.toSafeHtml())}),goog.dom.safe.setInnerHtml(o,goog.html.SafeHtml.concat(r)),this.forEachChild(function(t){t.enterDocument()})}this.updateExpandIcon()}}else(o=this.getChildrenElement())&&goog.style.setElementShown(o,!1);n&&this.updateIcon_(),e&&this.dispatchEvent(t?goog.ui.tree.BaseNode.EventType.EXPAND:goog.ui.tree.BaseNode.EventType.COLLAPSE)}},goog.ui.tree.BaseNode.prototype.toggle=function(){this.setExpanded(!this.getExpanded())},goog.ui.tree.BaseNode.prototype.expand=function(){this.setExpanded(!0)},goog.ui.tree.BaseNode.prototype.collapse=function(){this.setExpanded(!1)},goog.ui.tree.BaseNode.prototype.collapseChildren=function(){this.forEachChild(function(t){t.collapseAll()})},goog.ui.tree.BaseNode.prototype.collapseAll=function(){this.collapseChildren(),this.collapse()},goog.ui.tree.BaseNode.prototype.expandChildren=function(){this.forEachChild(function(t){t.expandAll()})},goog.ui.tree.BaseNode.prototype.expandAll=function(){this.expandChildren(),this.expand()},goog.ui.tree.BaseNode.prototype.reveal=function(){var t=this.getParent();t&&(t.setExpanded(!0),t.reveal())},goog.ui.tree.BaseNode.prototype.setIsUserCollapsible=function(t){(this.isUserCollapsible_=t)||this.expand(),this.getElement()&&this.updateExpandIcon()},goog.ui.tree.BaseNode.prototype.isUserCollapsible=function(){return this.isUserCollapsible_},goog.ui.tree.BaseNode.prototype.toSafeHtml=function(){var t=this.getTree(),e=!t.getShowLines()||t==this.getParent()&&!t.getShowRootLines()?this.config_.cssChildrenNoLines:this.config_.cssChildren;t=this.getExpanded()&&this.hasChildren(),e={class:e,style:this.getLineStyle()};var o=[];return t&&this.forEachChild(function(t){o.push(t.toSafeHtml())}),t=goog.html.SafeHtml.create("div",e,o),goog.html.SafeHtml.create("div",{class:this.config_.cssItem,id:this.getId()},[this.getRowSafeHtml(),t])},goog.ui.tree.BaseNode.prototype.getPixelIndent_=function(){return Math.max(0,(this.getDepth()-1)*this.config_.indentWidth)},goog.ui.tree.BaseNode.prototype.getRowSafeHtml=function(){var t={};t["padding-"+(this.isRightToLeft()?"right":"left")]=this.getPixelIndent_()+"px",t={class:this.getRowClassName(),style:t};var e=[this.getExpandIconSafeHtml(),this.getIconSafeHtml(),this.getLabelSafeHtml()];return goog.html.SafeHtml.create("div",t,e)},goog.ui.tree.BaseNode.prototype.getRowClassName=function(){var t=this.isSelected()?" "+this.config_.cssSelectedRow:"";return this.config_.cssTreeRow+t},goog.ui.tree.BaseNode.prototype.getLabelSafeHtml=function(){var t=goog.html.SafeHtml.create("span",{class:this.config_.cssItemLabel,title:this.getToolTip()||null},this.getSafeHtml());return goog.html.SafeHtml.concat(t,goog.html.SafeHtml.create("span",{},this.getAfterLabelSafeHtml()))},goog.ui.tree.BaseNode.prototype.getAfterLabelHtml=function(){return goog.html.SafeHtml.unwrap(this.getAfterLabelSafeHtml())},goog.ui.tree.BaseNode.prototype.getAfterLabelSafeHtml=function(){return this.afterLabelHtml_},goog.ui.tree.BaseNode.prototype.setAfterLabelSafeHtml=function(t){this.afterLabelHtml_=t;var e=this.getAfterLabelElement();e&&goog.dom.safe.setInnerHtml(e,t)},goog.ui.tree.BaseNode.prototype.getIconSafeHtml=function(){return goog.html.SafeHtml.create("span",{style:{display:"inline-block"},class:this.getCalculatedIconClass()})},goog.ui.tree.BaseNode.prototype.getCalculatedIconClass=goog.abstractMethod,goog.ui.tree.BaseNode.prototype.getExpandIconSafeHtml=function(){return goog.html.SafeHtml.create("span",{type:"expand",style:{display:"inline-block"},class:this.getExpandIconClass()})},goog.ui.tree.BaseNode.prototype.getExpandIconClass=function(){var t=this.getTree(),e=!t.getShowLines()||t==this.getParent()&&!t.getShowRootLines(),o=this.config_,n=new goog.string.StringBuffer;if(n.append(o.cssTreeIcon," ",o.cssExpandTreeIcon," "),this.hasChildren()){var r=0;switch(t.getShowExpandIcons()&&this.isUserCollapsible_&&(r=this.getExpanded()?2:1),e||(r=this.isLastSibling()?r+4:r+8),r){case 1:n.append(o.cssExpandTreeIconPlus);break;case 2:n.append(o.cssExpandTreeIconMinus);break;case 4:n.append(o.cssExpandTreeIconL);break;case 5:n.append(o.cssExpandTreeIconLPlus);break;case 6:n.append(o.cssExpandTreeIconLMinus);break;case 8:n.append(o.cssExpandTreeIconT);break;case 9:n.append(o.cssExpandTreeIconTPlus);break;case 10:n.append(o.cssExpandTreeIconTMinus);break;default:n.append(o.cssExpandTreeIconBlank)}}else e?n.append(o.cssExpandTreeIconBlank):this.isLastSibling()?n.append(o.cssExpandTreeIconL):n.append(o.cssExpandTreeIconT);return n.toString()},goog.ui.tree.BaseNode.prototype.getLineStyle=function(){var t=this.getExpanded()&&this.hasChildren();return goog.html.SafeStyle.create({"background-position":this.getBackgroundPosition(),display:t?null:"none"})},goog.ui.tree.BaseNode.prototype.getBackgroundPosition=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.config_.indentWidth)+"px 0"},goog.ui.tree.BaseNode.prototype.getElement=function(){var t=goog.ui.tree.BaseNode.superClass_.getElement.call(this);return t||(t=this.getDomHelper().getElement(this.getId()),this.setElementInternal(t)),t},goog.ui.tree.BaseNode.prototype.getRowElement=function(){var t=this.getElement();return t?t.firstChild:null},goog.ui.tree.BaseNode.prototype.getExpandIconElement=function(){var t=this.getRowElement();return t?t.firstChild:null},goog.ui.tree.BaseNode.prototype.getIconElement=function(){var t=this.getRowElement();return t?t.childNodes[1]:null},goog.ui.tree.BaseNode.prototype.getLabelElement=function(){var t=this.getRowElement();return t&&t.lastChild?t.lastChild.previousSibling:null},goog.ui.tree.BaseNode.prototype.getAfterLabelElement=function(){var t=this.getRowElement();return t?t.lastChild:null},goog.ui.tree.BaseNode.prototype.getChildrenElement=function(){var t=this.getElement();return t?t.lastChild:null},goog.ui.tree.BaseNode.prototype.setIconClass=function(t){this.iconClass_=t,this.isInDocument()&&this.updateIcon_()},goog.ui.tree.BaseNode.prototype.getIconClass=function(){return this.iconClass_},goog.ui.tree.BaseNode.prototype.setExpandedIconClass=function(t){this.expandedIconClass_=t,this.isInDocument()&&this.updateIcon_()},goog.ui.tree.BaseNode.prototype.getExpandedIconClass=function(){return this.expandedIconClass_},goog.ui.tree.BaseNode.prototype.setText=function(t){this.setSafeHtml(goog.html.SafeHtml.htmlEscape(t))},goog.ui.tree.BaseNode.prototype.getText=function(){return goog.string.unescapeEntities(goog.html.SafeHtml.unwrap(this.html_))},goog.ui.tree.BaseNode.prototype.setSafeHtml=function(t){this.html_=t;var e=this.getLabelElement();e&&goog.dom.safe.setInnerHtml(e,t),(t=this.getTree())&&t.setNode(this)},goog.ui.tree.BaseNode.prototype.getHtml=function(){return goog.html.SafeHtml.unwrap(this.getSafeHtml())},goog.ui.tree.BaseNode.prototype.getSafeHtml=function(){return this.html_},goog.ui.tree.BaseNode.prototype.setToolTip=function(t){this.toolTip_=t;var e=this.getLabelElement();e&&(e.title=t)},goog.ui.tree.BaseNode.prototype.getToolTip=function(){return this.toolTip_},goog.ui.tree.BaseNode.prototype.updateRow=function(){var t=this.getRowElement();t&&(t.className=this.getRowClassName())},goog.ui.tree.BaseNode.prototype.updateExpandIcon=function(){var t=this.getExpandIconElement();t&&(t.className=this.getExpandIconClass()),(t=this.getChildrenElement())&&(t.style.backgroundPosition=this.getBackgroundPosition())},goog.ui.tree.BaseNode.prototype.updateIcon_=function(){this.getIconElement().className=this.getCalculatedIconClass()},goog.ui.tree.BaseNode.prototype.onMouseDown=function(t){"expand"==t.target.getAttribute("type")&&this.hasChildren()?this.isUserCollapsible_&&this.toggle():(this.select(),this.updateRow())},goog.ui.tree.BaseNode.prototype.onClick_=goog.events.Event.preventDefault,goog.ui.tree.BaseNode.prototype.onDoubleClick_=function(t){"expand"==t.target.getAttribute("type")&&this.hasChildren()||this.isUserCollapsible_&&this.toggle()};goog.ui.tree.BaseNode.prototype.onKeyDown=function(t){var e=!0;switch(t.keyCode){case goog.events.KeyCodes.RIGHT:if(t.altKey)break;this.hasChildren()&&(this.getExpanded()?this.getFirstChild().select():this.setExpanded(!0));break;case goog.events.KeyCodes.LEFT:if(t.altKey)break;if(this.hasChildren()&&this.getExpanded()&&this.isUserCollapsible_)this.setExpanded(!1);else{var o=this.getParent(),n=this.getTree();o&&(n.getShowRootNode()||o!=n)&&o.select()}break;case goog.events.KeyCodes.DOWN:(n=this.getNextShownNode())&&n.select();break;case goog.events.KeyCodes.UP:(n=this.getPreviousShownNode())&&n.select();break;default:e=!1}return e&&(t.preventDefault(),(n=this.getTree())&&n.clearTypeAhead()),e},goog.ui.tree.BaseNode.prototype.getLastShownDescendant=function(){return this.getExpanded()&&this.hasChildren()?this.getLastChild().getLastShownDescendant():this},goog.ui.tree.BaseNode.prototype.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var t,e=this;e!=this.getTree();){if(null!=(t=e.getNextSibling()))return t;e=e.getParent()}return null},goog.ui.tree.BaseNode.prototype.getPreviousShownNode=function(){var t=this.getPreviousSibling();if(null!=t)return t.getLastShownDescendant();t=this.getParent();var e=this.getTree();return!e.getShowRootNode()&&t==e||this==e?null:t},goog.ui.tree.BaseNode.prototype.getClientData=goog.ui.tree.BaseNode.prototype.getModel,goog.ui.tree.BaseNode.prototype.setClientData=goog.ui.tree.BaseNode.prototype.setModel,goog.ui.tree.BaseNode.prototype.getConfig=function(){return this.config_},goog.ui.tree.BaseNode.prototype.setTreeInternal=function(t){this.tree!=t&&(this.tree=t,t.setNode(this),this.forEachChild(function(e){e.setTreeInternal(t)}))},goog.ui.tree.BaseNode.defaultConfig={indentWidth:19,cssRoot:"goog-tree-root goog-tree-item",cssHideRoot:"goog-tree-hide-root",cssItem:"goog-tree-item",cssChildren:"goog-tree-children",cssChildrenNoLines:"goog-tree-children-nolines",cssTreeRow:"goog-tree-row",cssItemLabel:"goog-tree-item-label",cssTreeIcon:"goog-tree-icon",cssExpandTreeIcon:"goog-tree-expand-icon",cssExpandTreeIconPlus:"goog-tree-expand-icon-plus",cssExpandTreeIconMinus:"goog-tree-expand-icon-minus",cssExpandTreeIconTPlus:"goog-tree-expand-icon-tplus",cssExpandTreeIconTMinus:"goog-tree-expand-icon-tminus",cssExpandTreeIconLPlus:"goog-tree-expand-icon-lplus",cssExpandTreeIconLMinus:"goog-tree-expand-icon-lminus",cssExpandTreeIconT:"goog-tree-expand-icon-t",cssExpandTreeIconL:"goog-tree-expand-icon-l",cssExpandTreeIconBlank:"goog-tree-expand-icon-blank",cssExpandedFolderIcon:"goog-tree-expanded-folder-icon",cssCollapsedFolderIcon:"goog-tree-collapsed-folder-icon",cssFileIcon:"goog-tree-file-icon",cssExpandedRootIcon:"goog-tree-expanded-folder-icon",cssCollapsedRootIcon:"goog-tree-collapsed-folder-icon",cssSelectedRow:"selected"},goog.ui.tree.TreeNode=function(t,e,o){goog.ui.tree.BaseNode.call(this,t,e,o)},goog.inherits(goog.ui.tree.TreeNode,goog.ui.tree.BaseNode),goog.ui.tree.TreeNode.prototype.getTree=function(){if(this.tree)return this.tree;var t=this.getParent();return t&&(t=t.getTree())?(this.setTreeInternal(t),t):null},goog.ui.tree.TreeNode.prototype.getCalculatedIconClass=function(){var t=this.getExpanded(),e=this.getExpandedIconClass();if(t&&e)return e;if(e=this.getIconClass(),!t&&e)return e;if(e=this.getConfig(),this.hasChildren()){if(t&&e.cssExpandedFolderIcon)return e.cssTreeIcon+" "+e.cssExpandedFolderIcon;if(!t&&e.cssCollapsedFolderIcon)return e.cssTreeIcon+" "+e.cssCollapsedFolderIcon}else if(e.cssFileIcon)return e.cssTreeIcon+" "+e.cssFileIcon;return""},goog.structs={},goog.structs.getCount=function(t){return t.getCount&&"function"==typeof t.getCount?t.getCount():goog.isArrayLike(t)||goog.isString(t)?t.length:goog.object.getCount(t)},goog.structs.getValues=function(t){if(t.getValues&&"function"==typeof t.getValues)return t.getValues();if(goog.isString(t))return t.split("");if(goog.isArrayLike(t)){for(var e=[],o=t.length,n=0;n<o;n++)e.push(t[n]);return e}return goog.object.getValues(t)},goog.structs.getKeys=function(t){if(t.getKeys&&"function"==typeof t.getKeys)return t.getKeys();if(!t.getValues||"function"!=typeof t.getValues){if(goog.isArrayLike(t)||goog.isString(t)){var e=[];t=t.length;for(var o=0;o<t;o++)e.push(o);return e}return goog.object.getKeys(t)}},goog.structs.contains=function(t,e){return t.contains&&"function"==typeof t.contains?t.contains(e):t.containsValue&&"function"==typeof t.containsValue?t.containsValue(e):goog.isArrayLike(t)||goog.isString(t)?goog.array.contains(t,e):goog.object.containsValue(t,e)},goog.structs.isEmpty=function(t){return t.isEmpty&&"function"==typeof t.isEmpty?t.isEmpty():goog.isArrayLike(t)||goog.isString(t)?goog.array.isEmpty(t):goog.object.isEmpty(t)},goog.structs.clear=function(t){t.clear&&"function"==typeof t.clear?t.clear():goog.isArrayLike(t)?goog.array.clear(t):goog.object.clear(t)},goog.structs.forEach=function(t,e,o){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,o);else if(goog.isArrayLike(t)||goog.isString(t))goog.array.forEach(t,e,o);else for(var n=goog.structs.getKeys(t),r=goog.structs.getValues(t),i=r.length,s=0;s<i;s++)e.call(o,r[s],n&&n[s],t)},goog.structs.filter=function(t,e,o){if("function"==typeof t.filter)return t.filter(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.filter(t,e,o);var n=goog.structs.getKeys(t),r=goog.structs.getValues(t),i=r.length;if(n)for(var s={},a=0;a<i;a++)e.call(o,r[a],n[a],t)&&(s[n[a]]=r[a]);else for(s=[],a=0;a<i;a++)e.call(o,r[a],void 0,t)&&s.push(r[a]);return s},goog.structs.map=function(t,e,o){if("function"==typeof t.map)return t.map(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.map(t,e,o);var n=goog.structs.getKeys(t),r=goog.structs.getValues(t),i=r.length;if(n)for(var s={},a=0;a<i;a++)s[n[a]]=e.call(o,r[a],n[a],t);else for(s=[],a=0;a<i;a++)s[a]=e.call(o,r[a],void 0,t);return s},goog.structs.some=function(t,e,o){if("function"==typeof t.some)return t.some(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.some(t,e,o);for(var n=goog.structs.getKeys(t),r=goog.structs.getValues(t),i=r.length,s=0;s<i;s++)if(e.call(o,r[s],n&&n[s],t))return!0;return!1},goog.structs.every=function(t,e,o){if("function"==typeof t.every)return t.every(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.every(t,e,o);for(var n=goog.structs.getKeys(t),r=goog.structs.getValues(t),i=r.length,s=0;s<i;s++)if(!e.call(o,r[s],n&&n[s],t))return!1;return!0},goog.structs.Trie=function(t){this.value_=void 0,this.childNodes_={},t&&this.setAll(t)},goog.structs.Trie.prototype.set=function(t,e){this.setOrAdd_(t,e,!1)},goog.structs.Trie.prototype.add=function(t,e){this.setOrAdd_(t,e,!0)},goog.structs.Trie.prototype.setOrAdd_=function(t,e,o){for(var n=this,r=0;r<t.length;r++){var i=t.charAt(r);n.childNodes_[i]||(n.childNodes_[i]=new goog.structs.Trie),n=n.childNodes_[i]}if(o&&void 0!==n.value_)throw Error('The collection already contains the key "'+t+'"');n.value_=e},goog.structs.Trie.prototype.setAll=function(t){var e=goog.structs.getKeys(t);t=goog.structs.getValues(t);for(var o=0;o<e.length;o++)this.set(e[o],t[o])},goog.structs.Trie.prototype.getChildNode_=function(t){for(var e=this,o=0;o<t.length;o++){var n=t.charAt(o);if(!(e=e.childNodes_[n]))return}return e},goog.structs.Trie.prototype.get=function(t){return(t=this.getChildNode_(t))?t.value_:void 0},goog.structs.Trie.prototype.getKeyAndPrefixes=function(t,e){var o=this,n={},r=e||0;for(void 0!==o.value_&&(n[r]=o.value_);r<t.length;r++){var i=t.charAt(r);if(!(i in o.childNodes_))break;o=o.childNodes_[i],void 0!==o.value_&&(n[r]=o.value_)}return n},goog.structs.Trie.prototype.getValues=function(){var t=[];return this.getValuesInternal_(t),t},goog.structs.Trie.prototype.getValuesInternal_=function(t){void 0!==this.value_&&t.push(this.value_);for(var e in this.childNodes_)this.childNodes_[e].getValuesInternal_(t)},goog.structs.Trie.prototype.getKeys=function(t){var e=[];if(t){for(var o=this,n=0;n<t.length;n++){var r=t.charAt(n);if(!o.childNodes_[r])return[];o=o.childNodes_[r]}o.getKeysInternal_(t,e)}else this.getKeysInternal_("",e);return e},goog.structs.Trie.prototype.getKeysInternal_=function(t,e){void 0!==this.value_&&e.push(t);for(var o in this.childNodes_)this.childNodes_[o].getKeysInternal_(t+o,e)},goog.structs.Trie.prototype.containsKey=function(t){return void 0!==this.get(t)},goog.structs.Trie.prototype.containsPrefix=function(t){return 0==t.length?!this.isEmpty():!!this.getChildNode_(t)},goog.structs.Trie.prototype.containsValue=function(t){if(this.value_===t)return!0;for(var e in this.childNodes_)if(this.childNodes_[e].containsValue(t))return!0;return!1},goog.structs.Trie.prototype.clear=function(){this.childNodes_={},this.value_=void 0},goog.structs.Trie.prototype.remove=function(t){for(var e,o=this,n=[],r=0;r<t.length;r++){if(e=t.charAt(r),!o.childNodes_[e])throw Error('The collection does not have the key "'+t+'"');n.push([o,e]),o=o.childNodes_[e]}for(t=o.value_,delete o.value_;0<n.length&&(e=n.pop(),o=e[0],e=e[1],o.childNodes_[e].isEmpty());)delete o.childNodes_[e];return t},goog.structs.Trie.prototype.clone=function(){return new goog.structs.Trie(this)},goog.structs.Trie.prototype.getCount=function(){return goog.structs.getCount(this.getValues())},goog.structs.Trie.prototype.isEmpty=function(){return void 0===this.value_&&goog.object.isEmpty(this.childNodes_)},goog.ui.tree.TypeAhead=function(){this.nodeMap_=new goog.structs.Trie,this.buffer_="",this.matchingNodes_=this.matchingLabels_=null,this.matchingNodeIndex_=this.matchingLabelIndex_=0},goog.ui.tree.TypeAhead.Offset={DOWN:1,UP:-1},goog.ui.tree.TypeAhead.prototype.handleNavigation=function(t){var e=!1;switch(t.keyCode){case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.UP:t.ctrlKey&&(this.jumpTo_(t.keyCode==goog.events.KeyCodes.DOWN?goog.ui.tree.TypeAhead.Offset.DOWN:goog.ui.tree.TypeAhead.Offset.UP),e=!0);break;case goog.events.KeyCodes.BACKSPACE:t=this.buffer_.length-1,e=!0,0<t?(this.buffer_=this.buffer_.substring(0,t),this.jumpToLabel_(this.buffer_)):0==t?this.buffer_="":e=!1;break;case goog.events.KeyCodes.ESC:this.buffer_="",e=!0}return e},goog.ui.tree.TypeAhead.prototype.handleTypeAheadChar=function(t){var e=!1;return t.ctrlKey||t.altKey||(t=String.fromCharCode(t.charCode||t.keyCode).toLowerCase(),goog.string.isUnicodeChar(t)&&(" "!=t||this.buffer_)&&(this.buffer_+=t,e=this.jumpToLabel_(this.buffer_))),e},goog.ui.tree.TypeAhead.prototype.setNodeInMap=function(t){var e=t.getText();if(e&&!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))){e=e.toLowerCase();var o=this.nodeMap_.get(e);o?o.push(t):this.nodeMap_.set(e,[t])}},goog.ui.tree.TypeAhead.prototype.removeNodeFromMap=function(t){var e=t.getText();if(e&&!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))){e=e.toLowerCase();var o=this.nodeMap_.get(e);if(o){for(var n=t.getChildCount(),r=0;r<n;r++)this.removeNodeFromMap(t.getChildAt(r));goog.array.remove(o,t),o.length||this.nodeMap_.remove(e)}}},goog.ui.tree.TypeAhead.prototype.jumpToLabel_=function(t){var e=!1;return(t=this.nodeMap_.getKeys(t))&&t.length&&(this.matchingLabelIndex_=this.matchingNodeIndex_=0,e=this.nodeMap_.get(t[0]),e=this.selectMatchingNode_(e))&&(this.matchingLabels_=t),e},goog.ui.tree.TypeAhead.prototype.jumpTo_=function(t){var e=!1,o=this.matchingLabels_;if(o){e=null;var n=!1;if(this.matchingNodes_){var r=this.matchingNodeIndex_+t;0<=r&&r<this.matchingNodes_.length?(this.matchingNodeIndex_=r,e=this.matchingNodes_):n=!0}e||(r=this.matchingLabelIndex_+t,0<=r&&r<o.length&&(this.matchingLabelIndex_=r),o.length>this.matchingLabelIndex_&&(e=this.nodeMap_.get(o[this.matchingLabelIndex_])),e&&e.length&&n&&(this.matchingNodeIndex_=t==goog.ui.tree.TypeAhead.Offset.UP?e.length-1:0)),(e=this.selectMatchingNode_(e))&&(this.matchingLabels_=o)}return e},goog.ui.tree.TypeAhead.prototype.selectMatchingNode_=function(t){if(t){if(this.matchingNodeIndex_<t.length){var e=t[this.matchingNodeIndex_];this.matchingNodes_=t}e&&(e.reveal(),e.select())}return!!e},goog.ui.tree.TypeAhead.prototype.clear=function(){this.buffer_=""},goog.ui.tree.TreeControl=function(t,e,o){if(goog.ui.tree.BaseNode.call(this,t,e,o),this.setExpandedInternal(!0),this.setSelectedInternal(!0),this.selectedItem_=this,this.typeAhead_=new goog.ui.tree.TypeAhead,this.focusHandler_=this.keyHandler_=null,this.logger_=goog.log.getLogger("this"),this.focused_=!1,this.focusedNode_=null,this.showRootLines_=this.showRootNode_=this.showExpandIcons_=this.showLines_=!0,goog.userAgent.IE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){goog.log.warning(this.logger_,"Failed to enable background image cache")}},goog.inherits(goog.ui.tree.TreeControl,goog.ui.tree.BaseNode),goog.ui.tree.TreeControl.prototype.getTree=function(){return this},goog.ui.tree.TreeControl.prototype.getDepth=function(){return 0},goog.ui.tree.TreeControl.prototype.reveal=function(){},goog.ui.tree.TreeControl.prototype.handleFocus_=function(t){this.focused_=!0,goog.dom.classlist.add(goog.asserts.assert(this.getElement()),"focused"),this.selectedItem_&&this.selectedItem_.select()},goog.ui.tree.TreeControl.prototype.handleBlur_=function(t){this.focused_=!1,goog.dom.classlist.remove(goog.asserts.assert(this.getElement()),"focused")},goog.ui.tree.TreeControl.prototype.hasFocus=function(){return this.focused_},goog.ui.tree.TreeControl.prototype.getExpanded=function(){return!this.showRootNode_||goog.ui.tree.TreeControl.superClass_.getExpanded.call(this)},goog.ui.tree.TreeControl.prototype.setExpanded=function(t){this.showRootNode_?goog.ui.tree.TreeControl.superClass_.setExpanded.call(this,t):this.setExpandedInternal(t)},goog.ui.tree.TreeControl.prototype.getExpandIconSafeHtml=function(){return goog.html.SafeHtml.EMPTY},goog.ui.tree.TreeControl.prototype.getIconElement=function(){var t=this.getRowElement();return t?t.firstChild:null},goog.ui.tree.TreeControl.prototype.getExpandIconElement=function(){return null},goog.ui.tree.TreeControl.prototype.updateExpandIcon=function(){},goog.ui.tree.TreeControl.prototype.getRowClassName=function(){return goog.ui.tree.TreeControl.superClass_.getRowClassName.call(this)+(this.showRootNode_?"":" "+this.getConfig().cssHideRoot)},goog.ui.tree.TreeControl.prototype.getCalculatedIconClass=function(){var t=this.getExpanded(),e=this.getExpandedIconClass();return t&&e?e:(e=this.getIconClass(),!t&&e?e:(e=this.getConfig(),t&&e.cssExpandedRootIcon?e.cssTreeIcon+" "+e.cssExpandedRootIcon:!t&&e.cssCollapsedRootIcon?e.cssTreeIcon+" "+e.cssCollapsedRootIcon:""))},goog.ui.tree.TreeControl.prototype.setSelectedItem=function(t){if(this.selectedItem_!=t){var e=!1;this.selectedItem_&&(e=this.selectedItem_==this.focusedNode_,this.selectedItem_.setSelectedInternal(!1)),(this.selectedItem_=t)&&(t.setSelectedInternal(!0),e&&t.select()),this.dispatchEvent(goog.events.EventType.CHANGE)}},goog.ui.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_},goog.ui.tree.TreeControl.prototype.setShowLines=function(t){this.showLines_!=t&&(this.showLines_=t,this.isInDocument()&&this.updateLinesAndExpandIcons_())},goog.ui.tree.TreeControl.prototype.getShowLines=function(){return this.showLines_},goog.ui.tree.TreeControl.prototype.updateLinesAndExpandIcons_=function(){function t(r){var i=r.getChildrenElement();if(i){var s=!o||e==r.getParent()&&!n?r.getConfig().cssChildrenNoLines:r.getConfig().cssChildren;i.className=s,(i=r.getExpandIconElement())&&(i.className=r.getExpandIconClass())}r.forEachChild(t)}var e=this,o=e.getShowLines(),n=e.getShowRootLines();t(this)},goog.ui.tree.TreeControl.prototype.setShowRootLines=function(t){this.showRootLines_!=t&&(this.showRootLines_=t,this.isInDocument()&&this.updateLinesAndExpandIcons_())},goog.ui.tree.TreeControl.prototype.getShowRootLines=function(){return this.showRootLines_},goog.ui.tree.TreeControl.prototype.setShowExpandIcons=function(t){this.showExpandIcons_!=t&&(this.showExpandIcons_=t,this.isInDocument()&&this.updateLinesAndExpandIcons_())},goog.ui.tree.TreeControl.prototype.getShowExpandIcons=function(){return this.showExpandIcons_},goog.ui.tree.TreeControl.prototype.setShowRootNode=function(t){if(this.showRootNode_!=t){if(this.showRootNode_=t,this.isInDocument()){var e=this.getRowElement();e&&(e.className=this.getRowClassName())}!t&&this.getSelectedItem()==this&&this.getFirstChild()&&this.setSelectedItem(this.getFirstChild())}},goog.ui.tree.TreeControl.prototype.getShowRootNode=function(){return this.showRootNode_},goog.ui.tree.TreeControl.prototype.initAccessibility=function(){goog.ui.tree.TreeControl.superClass_.initAccessibility.call(this);var t=this.getElement();goog.asserts.assert(t,"The DOM element for the tree cannot be null."),goog.a11y.aria.setRole(t,"tree"),goog.a11y.aria.setState(t,"labelledby",this.getLabelElement().id)},goog.ui.tree.TreeControl.prototype.enterDocument=function(){goog.ui.tree.TreeControl.superClass_.enterDocument.call(this);var t=this.getElement();t.className=this.getConfig().cssRoot,t.setAttribute("hideFocus","true"),this.attachEvents_(),this.initAccessibility()},goog.ui.tree.TreeControl.prototype.exitDocument=function(){goog.ui.tree.TreeControl.superClass_.exitDocument.call(this),this.detachEvents_()},goog.ui.tree.TreeControl.prototype.attachEvents_=function(){var t=this.getElement();t.tabIndex=0;var e=this.keyHandler_=new goog.events.KeyHandler(t),o=this.focusHandler_=new goog.events.FocusHandler(t);this.getHandler().listen(o,goog.events.FocusHandler.EventType.FOCUSOUT,this.handleBlur_).listen(o,goog.events.FocusHandler.EventType.FOCUSIN,this.handleFocus_).listen(e,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(t,goog.events.EventType.MOUSEDOWN,this.handleMouseEvent_).listen(t,goog.events.EventType.CLICK,this.handleMouseEvent_).listen(t,goog.events.EventType.DBLCLICK,this.handleMouseEvent_)},goog.ui.tree.TreeControl.prototype.detachEvents_=function(){this.keyHandler_.dispose(),this.keyHandler_=null,this.focusHandler_.dispose(),this.focusHandler_=null},goog.ui.tree.TreeControl.prototype.handleMouseEvent_=function(t){goog.log.fine(this.logger_,"Received event "+t.type);var e=this.getNodeFromEvent_(t);if(e)switch(t.type){case goog.events.EventType.MOUSEDOWN:e.onMouseDown(t);break;case goog.events.EventType.CLICK:e.onClick_(t);break;case goog.events.EventType.DBLCLICK:e.onDoubleClick_(t)}},goog.ui.tree.TreeControl.prototype.handleKeyEvent=function(t){var e;return(e=this.typeAhead_.handleNavigation(t)||this.selectedItem_&&this.selectedItem_.onKeyDown(t)||this.typeAhead_.handleTypeAheadChar(t))&&t.preventDefault(),e},goog.ui.tree.TreeControl.prototype.getNodeFromEvent_=function(t){for(var e=t.target;null!=e;){if(t=goog.ui.tree.BaseNode.allNodes[e.id])return t;if(e==this.getElement())break;e=e.parentNode}return null},goog.ui.tree.TreeControl.prototype.createNode=function(t){return new goog.ui.tree.TreeNode(t||goog.html.SafeHtml.EMPTY,this.getConfig(),this.getDomHelper())},goog.ui.tree.TreeControl.prototype.setNode=function(t){this.typeAhead_.setNodeInMap(t)},goog.ui.tree.TreeControl.prototype.removeNode=function(t){this.typeAhead_.removeNodeFromMap(t)},goog.ui.tree.TreeControl.prototype.clearTypeAhead=function(){this.typeAhead_.clear()},goog.ui.tree.TreeControl.defaultConfig=goog.ui.tree.BaseNode.defaultConfig;var Blockly={};Blockly.Blocks=Object(null),Blockly.Colours={motion:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC"},looks:{primary:"#9966FF",secondary:"#855CD6",tertiary:"#774DCB"},sounds:{primary:"#CF63CF",secondary:"#C94FC9",tertiary:"#BD42BD"},control:{primary:"#FFAB19",secondary:"#EC9C13",tertiary:"#CF8B17"},event:{primary:"#FFBF00",secondary:"#E6AC00",tertiary:"#CC9900"},sensing:{primary:"#5CB1D6",secondary:"#47A8D1",tertiary:"#2E8EB8"},pen:{primary:"#0fBD8C",secondary:"#0DA57A",tertiary:"#0B8E69"},operators:{primary:"#59C059",secondary:"#46B946",tertiary:"#389438"},data:{primary:"#FF8C1A",secondary:"#FF8000",tertiary:"#DB6E00"},more:{primary:"#FF6680",secondary:"#FF4D6A",tertiary:"#FF3355"},text:"#575E75",workspace:"#F9F9F9",toolboxHover:"#4C97FF",toolboxSelected:"#e9eef2",toolboxText:"#575E75",toolbox:"#FFFFFF",flyout:"#F9F9F9",scrollbar:"#CECDCE",scrollbarHover:"#CECDCE",textField:"#FFFFFF",insertionMarker:"#000000",insertionMarkerOpacity:.2,dragShadowOpacity:.3,stackGlow:"#FFF200",stackGlowOpacity:1,replacementGlow:"#FFFFFF",replacementGlowOpacity:1,colourPickerStroke:"#FFFFFF",fieldShadow:"rgba(0,0,0,0.1)",dropDownShadow:"rgba(0, 0, 0, .3)",numPadBackground:"#547AB2",numPadBorder:"#435F91",numPadActiveBackground:"#435F91",numPadText:"#FFFFFF",valueReportBackground:"#FFFFFF",valueReportBorder:"#AAAAAA"},Blockly.Touch={},Blockly.Touch.touchIdentifier_=null,Blockly.Touch.TOUCH_MAP={},goog.events.BrowserFeature.TOUCH_ENABLED&&(Blockly.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),Blockly.longPid_=0,Blockly.longStart_=function(t,e){Blockly.longStop_(),1==t.changedTouches.length&&(Blockly.longPid_=setTimeout(function(){t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY,e&&e.handleRightClick(t)},Blockly.LONGPRESS))},Blockly.longStop_=function(){Blockly.longPid_&&(clearTimeout(Blockly.longPid_),Blockly.longPid_=0)},Blockly.Touch.clearTouchIdentifier=function(){Blockly.Touch.touchIdentifier_=null},Blockly.Touch.shouldHandleEvent=function(t){return!Blockly.Touch.isMouseOrTouchEvent(t)||Blockly.Touch.checkTouchIdentifier(t)},Blockly.Touch.getTouchIdentifierFromEvent=function(t){return t.changedTouches&&t.changedTouches[0]&&void 0!=t.changedTouches[0].identifier&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},Blockly.Touch.checkTouchIdentifier=function(t){var e=Blockly.Touch.getTouchIdentifierFromEvent(t);return void 0!=Blockly.Touch.touchIdentifier_&&null!=Blockly.Touch.touchIdentifier_?Blockly.Touch.touchIdentifier_==e:("mousedown"==t.type||"touchstart"==t.type)&&(Blockly.Touch.touchIdentifier_=e,!0)},Blockly.Touch.setClientFromTouch=function(t){if(goog.string.startsWith(t.type,"touch")){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}},Blockly.Touch.isMouseOrTouchEvent=function(t){return goog.string.startsWith(t.type,"touch")||goog.string.startsWith(t.type,"mouse")},Blockly.Touch.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)e[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e},Blockly.VariableModel=function(t,e,o,n){this.workspace=t,this.name=e,this.type=o||"",this.id_=n||Blockly.utils.genUid(),Blockly.Events.fire(new Blockly.Events.VarCreate(this))},Blockly.VariableModel.prototype.getId=function(){return this.id_},Blockly.VariableModel.compareByName=function(t,e){return goog.string.caseInsensitiveCompare(t.name,e.name)},Blockly.VariableMap=function(t){this.variableMap_={},this.workspace=t},Blockly.VariableMap.prototype.clear=function(){this.variableMap_=Object(null)},Blockly.VariableMap.prototype.renameVariable=function(t,e){var o=this.getVariable(e),n=-1,r=-1,i="";(t||o)&&(i=(t||o).type);var s=this.getVariablesOfType(i);t&&(n=s.indexOf(t)),o&&(r=s.indexOf(o)),-1==n&&-1==r?(this.createVariable(e,""),console.log("Tried to rename an non-existent variable.")):n==r||-1!=n&&-1==r?(o=this.variableMap_[i][n],Blockly.Events.fire(new Blockly.Events.VarRename(o,e)),o.name=e):-1!=n&&-1!=r&&(o=this.variableMap_[i][r],Blockly.Events.fire(new Blockly.Events.VarRename(o,e)),Blockly.Events.fire(new Blockly.Events.VarDelete(this.variableMap_[i][n])),o.name=e,this.variableMap_[i].splice(n,1))},Blockly.VariableMap.prototype.createVariable=function(t,e,o){var n=this.getVariable(t);if(n){if(e&&n.type!=e)throw Error('Variable "'+t+'" is already in use and its type is "'+n.type+'" which conflicts with the passed in type, "'+e+'".');if(o&&n.getId()!=o)throw Error('Variable "'+t+'" is already in use and its id is "'+n.getId()+'" which conflicts with the passed in id, "'+o+'".');return n}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return o=o||Blockly.utils.genUid(),e=e||"",n=new Blockly.VariableModel(this.workspace,t,e,o),this.variableMap_[e]?this.variableMap_[e].push(n):this.variableMap_[e]=[n],n},Blockly.VariableMap.prototype.deleteVariable=function(t){for(var e,o=this.variableMap_[t.type],n=0;e=o[n];n++)if(e.getId()==t.getId()){o.splice(n,1),Blockly.Events.fire(new Blockly.Events.VarDelete(t));break}},Blockly.VariableMap.prototype.getVariable=function(t){for(var e=Object.keys(this.variableMap_),o=0;o<e.length;o++)for(var n,r=e[o],i=0;n=this.variableMap_[r][i];i++)if(Blockly.Names.equals(n.name,t))return n;return null},Blockly.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),o=0;o<e.length;o++)for(var n,r=e[o],i=0;n=this.variableMap_[r][i];i++)if(n.getId()==t)return n;return null},Blockly.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},Blockly.VariableMap.prototype.getVariableTypes=function(){return Object.keys(this.variableMap_)},Blockly.VariableMap.prototype.getAllVariables=function(){for(var t=[],e=Object.keys(this.variableMap_),o=0;o<e.length;o++)t=t.concat(this.variableMap_[e[o]]);return t},Blockly.Workspace=function(t){this.id=Blockly.utils.genUid(),Blockly.Workspace.WorkspaceDB_[this.id]=this,this.options=t||{},this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.topBlocks_=[],this.listeners_=[],this.tapListeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.variableMap_=new Blockly.VariableMap(this)},Blockly.Workspace.prototype.rendered=!1,Blockly.Workspace.prototype.MAX_UNDO=1024,Blockly.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete Blockly.Workspace.WorkspaceDB_[this.id]},Blockly.Workspace.SCAN_ANGLE=3,Blockly.Workspace.prototype.addTopBlock=function(t){if(this.topBlocks_.push(t),this.isFlyout){t=Blockly.Variables.allUsedVariables(t);for(var e,o=0;e=t[o];o++)this.getVariable(e)||this.createVariable(e)}},Blockly.Workspace.prototype.removeTopBlock=function(t){if(!goog.array.remove(this.topBlocks_,t))throw"Block not present in workspace's list of top-most blocks."},Blockly.Workspace.prototype.getTopBlocks=function(t){var e=[].concat(this.topBlocks_);if(t&&1<e.length){var o=Math.sin(goog.math.toRadians(Blockly.Workspace.SCAN_ANGLE));this.RTL&&(o*=-1),e.sort(function(t,e){var n=t.getRelativeToSurfaceXY(),r=e.getRelativeToSurfaceXY();return n.y+o*n.x-(r.y+o*r.x)})}return e},Blockly.Workspace.prototype.getAllBlocks=function(){for(var t=this.getTopBlocks(!1),e=0;e<t.length;e++)t.push.apply(t,t[e].getChildren());return t},Blockly.Workspace.prototype.clear=function(){var t=Blockly.Events.getGroup();for(t||Blockly.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose();t||Blockly.Events.setGroup(!1),this.variableMap_.clear(),Blockly.DropDownDiv&&Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.WidgetDiv&&Blockly.WidgetDiv.hide(!0)},Blockly.Workspace.prototype.updateVariableStore=function(t){if(!this.isFlyout){for(var e,o=Blockly.Variables.allUsedVariables(this),n=[],r=0;e=o[r];r++){var i=this.getVariable(e);i?n.push({name:i.name,type:i.type,id:i.getId()}):n.push({name:e,type:null,id:null})}for(t&&this.variableMap_.clear(),r=0;t=n[r];r++)this.getVariable(t.name)||this.createVariable(t.name,t.type,t.id)}},Blockly.Workspace.prototype.renameVariableInternal_=function(t,e){var o=this.getVariable(e);if(t&&o&&t.type!=o.type)throw Error('Variable "'+t.name+'" is type "'+t.type+'" and variable "'+e+'" is type "'+o.type+'". Both must be the same type.');if(o&&o.name!=e)var n=o.name;Blockly.Events.setGroup(!0),o=this.getAllBlocks();for(var r=0;r<o.length;r++)o[r].renameVar(t.name,e),n&&o[r].renameVar(n,e);this.variableMap_.renameVariable(t,e),Blockly.Events.setGroup(!1)},Blockly.Workspace.prototype.renameVariable=function(t,e){var o=this.getVariable(t);this.renameVariableInternal_(o,e)},Blockly.Workspace.prototype.renameVariableById=function(t,e){var o=this.getVariableById(t);this.renameVariableInternal_(o,e)},Blockly.Workspace.prototype.createVariable=function(t,e,o){if(t.toLowerCase()!=Blockly.Variables.noVariableText())return this.variableMap_.createVariable(t,e,o)},Blockly.Workspace.prototype.getVariableUses=function(t){for(var e=[],o=this.getAllBlocks(),n=0;n<o.length;n++){var r=o[n].getVars();if(r)for(var i=0;i<r.length;i++){var s=r[i];s&&t&&Blockly.Names.equals(s,t)&&e.push(o[n])}}return e},Blockly.Workspace.prototype.deleteVariable=function(t){for(var e,o=this.getVariableUses(t),n=0;e=o[n];n++)if("procedures_defnoreturn"==e.type||"procedures_defreturn"==e.type)return o=e.getFieldValue("NAME"),void Blockly.alert(Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",t).replace("%2",o));var r=this,i=r.getVariable(t);1<o.length?Blockly.confirm(Blockly.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",o.length).replace("%2",t),function(t){t&&r.deleteVariableInternal_(i)}):this.deleteVariableInternal_(i)},Blockly.Workspace.prototype.deleteVariableById=function(t){var e=this.getVariableById(t);e?this.deleteVariableInternal_(e):console.warn("Can't delete non-existant variable: "+t)},Blockly.Workspace.prototype.deleteVariableInternal_=function(t){var e=this.getVariableUses(t.name);Blockly.Events.setGroup(!0);for(var o=0;o<e.length;o++)e[o].dispose(!0,!1);this.variableMap_.deleteVariable(t),Blockly.Events.setGroup(!1)},Blockly.Workspace.prototype.variableIndexOf=function(){return console.warn("Deprecated call to Blockly.Workspace.prototype.variableIndexOf"),-1},Blockly.Workspace.prototype.getVariable=function(t){return this.variableMap_.getVariable(t)},Blockly.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},Blockly.Workspace.prototype.getWidth=function(){return 0},Blockly.Workspace.prototype.newBlock=function(t,e){return new Blockly.Block(this,t,e)},Blockly.Workspace.prototype.undo=function(t){var e=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,n=e.pop();if(n){for(var r=[n];e.length&&n.group&&n.group==e[e.length-1].group;)r.push(e.pop());for(e=0;n=r[e];e++)o.push(n);r=Blockly.Events.filter(r,t),Blockly.Events.recordUndo=!1;try{for(e=0;n=r[e];e++)n.run(t)}finally{Blockly.Events.recordUndo=!0}}},Blockly.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,Blockly.Events.clearPendingUndo()},Blockly.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},Blockly.Workspace.prototype.removeChangeListener=function(t){goog.array.remove(this.listeners_,t)},Blockly.Workspace.prototype.fireChangeListener=function(t){t.recordUndo&&(this.undoStack_.push(t),this.redoStack_.length=0,this.undoStack_.length>this.MAX_UNDO&&this.undoStack_.unshift());for(var e,o=this.listeners_.slice(),n=0;e=o[n];n++)e(t)},Blockly.Workspace.prototype.getBlockById=function(t){var e=this.blockDB_[t];return!e&&this.getFlyout()&&this.getFlyout().getWorkspace()&&(e=this.getFlyout().getWorkspace().blockDB_[t]),e||null},Blockly.Workspace.prototype.getFlyout=function(){return null},Blockly.Workspace.prototype.allInputsFilled=function(t){for(var e,o=this.getTopBlocks(!1),n=0;e=o[n];n++)if(!e.allInputsFilled(t))return!1;return!0},Blockly.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},Blockly.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes()},Blockly.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},Blockly.Workspace.WorkspaceDB_=Object.create(null),Blockly.Workspace.getById=function(t){return Blockly.Workspace.WorkspaceDB_[t]||null},Blockly.Workspace.prototype.clear=Blockly.Workspace.prototype.clear,Blockly.Workspace.prototype.clearUndo=Blockly.Workspace.prototype.clearUndo,Blockly.Workspace.prototype.addChangeListener=Blockly.Workspace.prototype.addChangeListener,Blockly.Workspace.prototype.removeChangeListener=Blockly.Workspace.prototype.removeChangeListener,Blockly.Bubble=function(t,e,o,n,r,i){this.workspace_=t,this.content_=e,this.shape_=o,o=Blockly.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=goog.math.toRadians(o),t.getBubbleCanvas().appendChild(this.createDom_(e,!(!r||!i))),this.setAnchorLocation(n),r&&i||(e=this.content_.getBBox(),r=e.width+2*Blockly.Bubble.BORDER_WIDTH,i=e.height+2*Blockly.Bubble.BORDER_WIDTH),this.setBubbleSize(r,i),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0,t.options.readOnly||(Blockly.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&Blockly.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))},Blockly.Bubble.BORDER_WIDTH=6,Blockly.Bubble.ARROW_THICKNESS=5,Blockly.Bubble.ARROW_ANGLE=20,Blockly.Bubble.ARROW_BEND=4,Blockly.Bubble.ANCHOR_RADIUS=8,Blockly.Bubble.onMouseUpWrapper_=null,Blockly.Bubble.onMouseMoveWrapper_=null,Blockly.Bubble.prototype.resizeCallback_=null,Blockly.Bubble.unbindDragEvents_=function(){Blockly.Bubble.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_),Blockly.Bubble.onMouseUpWrapper_=null),Blockly.Bubble.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_),Blockly.Bubble.onMouseMoveWrapper_=null)},Blockly.Bubble.bubbleMouseUp_=function(){Blockly.Touch.clearTouchIdentifier(),Blockly.Bubble.unbindDragEvents_()},Blockly.Bubble.prototype.rendered_=!1,Blockly.Bubble.prototype.anchorXY_=null,Blockly.Bubble.prototype.relativeLeft_=0,Blockly.Bubble.prototype.relativeTop_=0,Blockly.Bubble.prototype.width_=0,Blockly.Bubble.prototype.height_=0,Blockly.Bubble.prototype.autoLayout_=!0,Blockly.Bubble.prototype.createDom_=function(t,e){this.bubbleGroup_=Blockly.utils.createSvgElement("g",{},null);var o={filter:"url(#"+this.workspace_.options.embossFilterId+")"};return-1!=goog.userAgent.getUserAgentString().indexOf("JavaFX")&&(o={}),o=Blockly.utils.createSvgElement("g",o,this.bubbleGroup_),this.bubbleArrow_=Blockly.utils.createSvgElement("path",{},o),this.bubbleBack_=Blockly.utils.createSvgElement("rect",{class:"blocklyDraggable",x:0,y:0,rx:Blockly.Bubble.BORDER_WIDTH,ry:Blockly.Bubble.BORDER_WIDTH},o),e?(this.resizeGroup_=Blockly.utils.createSvgElement("g",{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),o=2*Blockly.Bubble.BORDER_WIDTH,Blockly.utils.createSvgElement("polygon",{points:"0,x x,x x,0".replace(/x/g,o.toString())},this.resizeGroup_),Blockly.utils.createSvgElement("line",{class:"blocklyResizeLine",x1:o/3,y1:o-1,x2:o-1,y2:o/3},this.resizeGroup_),Blockly.utils.createSvgElement("line",{class:"blocklyResizeLine",x1:2*o/3,y1:o-1,x2:o-1,y2:2*o/3},this.resizeGroup_)):this.resizeGroup_=null,this.bubbleGroup_.appendChild(t),this.bubbleGroup_},Blockly.Bubble.prototype.bubbleMouseDown_=function(t){this.promote_(),Blockly.Bubble.unbindDragEvents_(),Blockly.utils.isRightButton(t)?t.stopPropagation():Blockly.utils.isTargetInput(t)||(this.workspace_.startDrag(t,new goog.math.Coordinate(this.workspace_.RTL?-this.relativeLeft_:this.relativeLeft_,this.relativeTop_)),Blockly.Bubble.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,Blockly.Bubble.bubbleMouseUp_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.bubbleMouseMove_),Blockly.hideChaff(),t.stopPropagation())},Blockly.Bubble.prototype.bubbleMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.relativeLeft_=this.workspace_.RTL?-t.x:t.x,this.relativeTop_=t.y,this.positionBubble_(),this.renderArrow_()},Blockly.Bubble.prototype.resizeMouseDown_=function(t){this.promote_(),Blockly.Bubble.unbindDragEvents_(),Blockly.utils.isRightButton(t)||(this.workspace_.startDrag(t,new goog.math.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),Blockly.Bubble.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,Blockly.Bubble.bubbleMouseUp_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff()),t.stopPropagation()},Blockly.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},Blockly.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},Blockly.Bubble.prototype.promote_=function(){this.bubbleGroup_.parentNode.appendChild(this.bubbleGroup_)},Blockly.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},Blockly.Bubble.prototype.layoutBubble_=function(){var t=-this.width_/4,e=-this.height_-Blockly.BlockSvg.MIN_BLOCK_Y,o=this.workspace_.getMetrics();o.viewWidth/=this.workspace_.scale,o.viewLeft/=this.workspace_.scale;var n=this.anchorXY_.x;this.workspace_.RTL?n-o.viewLeft-t-this.width_<Blockly.Scrollbar.scrollbarThickness?t=n-o.viewLeft-this.width_-Blockly.Scrollbar.scrollbarThickness:n-o.viewLeft-t>o.viewWidth&&(t=n-o.viewLeft-o.viewWidth):n+t<o.viewLeft?t=o.viewLeft-n:o.viewLeft+o.viewWidth<n+t+this.width_+Blockly.BlockSvg.SEP_SPACE_X+Blockly.Scrollbar.scrollbarThickness&&(t=o.viewLeft+o.viewWidth-n-this.width_-Blockly.Scrollbar.scrollbarThickness),this.anchorXY_.y+e<o.viewTop&&(e=this.shape_.getBBox().height),this.relativeLeft_=t,this.relativeTop_=e},Blockly.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.bubbleGroup_.setAttribute("transform","translate("+t+","+(this.relativeTop_+this.anchorXY_.y)+")")},Blockly.Bubble.prototype.getBubbleSize=function(){return{width:this.width_,height:this.height_}},Blockly.Bubble.prototype.setBubbleSize=function(t,e){var o=2*Blockly.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),e=Math.max(e,o+20),this.width_=t,this.height_=e,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",e),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*Blockly.Bubble.BORDER_WIDTH+","+(e-o)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(t-o)+","+(e-o)+")")),this.rendered_&&(this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_()),this.resizeCallback_&&this.resizeCallback_()},Blockly.Bubble.prototype.renderArrow_=function(){var t=[],e=this.width_/2,o=this.height_/2,n=-this.relativeLeft_,r=-this.relativeTop_;if(e==n&&o==r)t.push("M "+e+","+o);else{r-=o,n-=e,this.workspace_.RTL&&(n*=-1);var i=Math.sqrt(r*r+n*n),s=Math.acos(n/i);0>r&&(s=2*Math.PI-s);var a=s+Math.PI/2;a>2*Math.PI&&(a-=2*Math.PI);var l=Math.sin(a),c=Math.cos(a),u=this.getBubbleSize();a=(u.width+u.height)/Blockly.Bubble.ARROW_THICKNESS,a=Math.min(a,u.width,u.height)/4,u=1-Blockly.Bubble.ANCHOR_RADIUS/i,n=e+u*n,r=o+u*r,u=e+a*c;var g=o+a*l;e-=a*c,o-=a*l,l=s+this.arrow_radians_,l>2*Math.PI&&(l-=2*Math.PI),s=Math.sin(l)*i/Blockly.Bubble.ARROW_BEND,i=Math.cos(l)*i/Blockly.Bubble.ARROW_BEND,t.push("M"+u+","+g),t.push("C"+(u+i)+","+(g+s)+" "+n+","+r+" "+n+","+r),t.push("C"+n+","+r+" "+(e+i)+","+(o+s)+" "+e+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},Blockly.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},Blockly.Bubble.prototype.dispose=function(){Blockly.Bubble.unbindDragEvents_(),goog.dom.removeNode(this.bubbleGroup_),this.shape_=this.content_=this.workspace_=this.resizeGroup_=this.bubbleBack_=this.bubbleArrow_=this.bubbleGroup_=null},Blockly.Icon=function(t){this.block_=t},Blockly.Icon.prototype.collapseHidden=!0,Blockly.Icon.prototype.SIZE=17,Blockly.Icon.prototype.bubble_=null,Blockly.Icon.prototype.iconXY_=null,Blockly.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&Blockly.utils.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),Blockly.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},Blockly.Icon.prototype.dispose=function(){goog.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},Blockly.Icon.prototype.updateEditable=function(){},Blockly.Icon.prototype.isVisible=function(){return!!this.bubble_},Blockly.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||Blockly.utils.isRightButton(t)||this.setVisible(!this.isVisible())},Blockly.Icon.prototype.updateColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.getColour())},Blockly.Icon.prototype.renderIcon=function(t){if(this.collapseHidden&&this.block_.isCollapsed())return this.iconGroup_.setAttribute("display","none"),t;this.iconGroup_.setAttribute("display","block");var e=this.SIZE;return this.block_.RTL&&(t-=e),this.iconGroup_.setAttribute("transform","translate("+t+",5)"),this.computeIconLocation(),t=this.block_.RTL?t-Blockly.BlockSvg.SEP_SPACE_X:t+(e+Blockly.BlockSvg.SEP_SPACE_X)},Blockly.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},Blockly.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),e=Blockly.utils.getRelativeXY(this.iconGroup_);t=new goog.math.Coordinate(t.x+e.x+this.SIZE/2,t.y+e.y+this.SIZE/2),goog.math.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},Blockly.Icon.prototype.getIconLocation=function(){return this.iconXY_},Blockly.Comment=function(t){Blockly.Comment.superClass_.constructor.call(this,t),this.createIcon()},goog.inherits(Blockly.Comment,Blockly.Icon),Blockly.Comment.prototype.text_="",Blockly.Comment.prototype.width_=160,Blockly.Comment.prototype.height_=80,Blockly.Comment.prototype.drawIcon_=function(t){Blockly.utils.createSvgElement("circle",{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),Blockly.utils.createSvgElement("path",{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.405 0.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25 -1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),Blockly.utils.createSvgElement("rect",{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},Blockly.Comment.prototype.createEditor_=function(){this.foreignObject_=Blockly.utils.createSvgElement("foreignObject",{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(Blockly.HTML_NS,"body");t.setAttribute("xmlns",Blockly.HTML_NS),t.className="blocklyMinimalBody";var e=document.createElementNS(Blockly.HTML_NS,"textarea");return e.className="blocklyCommentTextarea",e.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),t.appendChild(e),this.textarea_=e,this.foreignObject_.appendChild(t),Blockly.bindEventWithChecks_(e,"mouseup",this,this.textareaFocus_),Blockly.bindEventWithChecks_(e,"wheel",this,function(t){t.stopPropagation()}),Blockly.bindEventWithChecks_(e,"change",this,function(){this.text_!=e.value&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this.block_,"comment",null,this.text_,e.value)),this.text_=e.value)}),setTimeout(function(){e.focus()},0),this.foreignObject_},Blockly.Comment.prototype.updateEditable=function(){this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)),Blockly.Icon.prototype.updateEditable.call(this)},Blockly.Comment.prototype.resizeBubble_=function(){if(this.isVisible()){var t=this.bubble_.getBubbleSize(),e=2*Blockly.Bubble.BORDER_WIDTH;this.foreignObject_.setAttribute("width",t.width-e),this.foreignObject_.setAttribute("height",t.height-e),this.textarea_.style.width=t.width-e-4+"px",this.textarea_.style.height=t.height-e-4+"px"}},Blockly.Comment.prototype.setVisible=function(t){if(t!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"commentOpen",!t,t)),!this.block_.isEditable()&&!this.textarea_||goog.userAgent.IE)Blockly.Warning.prototype.setVisible.call(this,t);else{var e=this.getText(),o=this.getBubbleSize();t?(this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,this.width_,this.height_),this.bubble_.registerResizeEvent(this.resizeBubble_.bind(this)),this.updateColour()):(this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null),this.setText(e),this.setBubbleSize(o.width,o.height)}},Blockly.Comment.prototype.textareaFocus_=function(){this.bubble_.promote_(),this.textarea_.focus()},Blockly.Comment.prototype.getBubbleSize=function(){return this.isVisible()?this.bubble_.getBubbleSize():{width:this.width_,height:this.height_}},Blockly.Comment.prototype.setBubbleSize=function(t,e){this.textarea_?this.bubble_.setBubbleSize(t,e):(this.width_=t,this.height_=e)},Blockly.Comment.prototype.getText=function(){return this.textarea_?this.textarea_.value:this.text_},Blockly.Comment.prototype.setText=function(t){this.text_!=t&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this.block_,"comment",null,this.text_,t)),this.text_=t),this.textarea_&&(this.textarea_.value=t)},Blockly.Comment.prototype.dispose=function(){Blockly.Events.isEnabled()&&this.setText(""),this.block_.comment=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Connection=function(t,e){this.sourceBlock_=t,this.type=e,t.workspace.connectionDBList&&(this.db_=t.workspace.connectionDBList[e],this.dbOpposite_=t.workspace.connectionDBList[Blockly.OPPOSITE_TYPE[e]],this.hidden_=!this.db_)},Blockly.Connection.CAN_CONNECT=0,Blockly.Connection.REASON_SELF_CONNECTION=1,Blockly.Connection.REASON_WRONG_TYPE=2,Blockly.Connection.REASON_TARGET_NULL=3,Blockly.Connection.REASON_CHECKS_FAILED=4,Blockly.Connection.REASON_DIFFERENT_WORKSPACES=5,Blockly.Connection.REASON_SHADOW_PARENT=6,Blockly.Connection.prototype.targetConnection=null,Blockly.Connection.prototype.check_=null,Blockly.Connection.prototype.shadowDom_=null,Blockly.Connection.prototype.x_=0,Blockly.Connection.prototype.y_=0,Blockly.Connection.prototype.inDB_=!1,Blockly.Connection.prototype.db_=null,Blockly.Connection.prototype.dbOpposite_=null,Blockly.Connection.prototype.hidden_=null,Blockly.Connection.prototype.connect_=function(t){var e=this,o=e.getSourceBlock(),n=t.getSourceBlock(),r=!1;if(e==o.getFirstStatementConnection()&&(r=!0),t.isConnected()){if(r)var i=t.targetConnection;t.disconnect()}if(e.isConnected()){var s=e.targetBlock(),a=e.getShadowDom();if(e.setShadowDom(null),s.isShadow())a=Blockly.Xml.blockToDom(s),s.dispose(),s=null;else if(e.type==Blockly.NEXT_STATEMENT){if(!s.previousConnection)throw"Orphan block does not have a previous connection.";for(var l=n;l.nextConnection;){var c=l.getNextBlock();if(!c||c.isShadow()){s.previousConnection.checkType_(l.nextConnection)&&(l.nextConnection.connect(s.previousConnection),s=null);break}l=c}}if(s&&(e.disconnect(),Blockly.Events.recordUndo)){var u=Blockly.Events.getGroup();setTimeout(function(){s.workspace&&!s.getParent()&&(Blockly.Events.setGroup(u),s.outputConnection?s.outputConnection.bumpAwayFrom_(e):s.previousConnection&&s.previousConnection.bumpAwayFrom_(e),Blockly.Events.setGroup(!1))},Blockly.BUMP_DELAY)}e.setShadowDom(a)}r&&i&&i.connect(o.previousConnection);var g;Blockly.Events.isEnabled()&&(g=new Blockly.Events.BlockMove(n)),Blockly.Connection.connectReciprocally_(e,t),n.setParent(o),g&&(g.recordNew(),Blockly.Events.fire(g))},Blockly.Connection.prototype.dispose=function(){if(this.isConnected())throw"Disconnect connection before disposing of it.";this.inDB_&&this.db_.removeConnection_(this),this.dbOpposite_=this.db_=null},Blockly.Connection.prototype.isConnectedToNonInsertionMarker=function(){return this.targetConnection&&!this.targetBlock().isInsertionMarker()},Blockly.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Connection.prototype.isSuperior=function(){return this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT},Blockly.Connection.prototype.isConnected=function(){return!!this.targetConnection},Blockly.Connection.prototype.canConnectWithReason_=function(t){if(!t)return Blockly.Connection.REASON_TARGET_NULL;if(this.isSuperior())var e=this.sourceBlock_,o=t.getSourceBlock();else o=this.sourceBlock_,e=t.getSourceBlock();return e&&e==o?Blockly.Connection.REASON_SELF_CONNECTION:t.type!=Blockly.OPPOSITE_TYPE[this.type]?Blockly.Connection.REASON_WRONG_TYPE:e&&o&&e.workspace!==o.workspace?Blockly.Connection.REASON_DIFFERENT_WORKSPACES:this.checkType_(t)?e.isShadow()&&!o.isShadow()?Blockly.Connection.REASON_SHADOW_PARENT:Blockly.Connection.CAN_CONNECT:Blockly.Connection.REASON_CHECKS_FAILED},Blockly.Connection.prototype.checkConnection_=function(t){switch(this.canConnectWithReason_(t)){case Blockly.Connection.CAN_CONNECT:break;case Blockly.Connection.REASON_SELF_CONNECTION:throw"Attempted to connect a block to itself.";case Blockly.Connection.REASON_DIFFERENT_WORKSPACES:throw"Blocks not on same workspace.";case Blockly.Connection.REASON_WRONG_TYPE:throw"Attempt to connect incompatible types.";case Blockly.Connection.REASON_TARGET_NULL:throw"Target connection is null.";case Blockly.Connection.REASON_CHECKS_FAILED:throw"Connection checks failed. "+this+" expected "+this.check_+", found "+t.check_;case Blockly.Connection.REASON_SHADOW_PARENT:throw"Connecting non-shadow to shadow block.";default:throw"Unknown connection failure: this should never happen!"}},Blockly.Connection.prototype.canConnectToPrevious_=function(t){if(this.targetConnection||-1!=Blockly.draggingConnections_.indexOf(t))return!1;var e=this.sourceBlock_.getFirstStatementConnection(),o=this==e,n=this==this.sourceBlock_.nextConnection;return!(null!=e&&!o&&!n)&&(e=null!=this.sourceBlock_.previousConnection,!(!o||!e)||(n||o&&!e?!t.targetConnection||(t=t.targetBlock(),!!t.isInsertionMarker()&&!t.getPreviousBlock()):void 0))},Blockly.Connection.prototype.isConnectionAllowed=function(t){if(t.sourceBlock_.isInsertionMarker()||this.canConnectWithReason_(t)!=Blockly.Connection.CAN_CONNECT)return!1;var e=this.sourceBlock_.getFirstStatementConnection();switch(t.type){case Blockly.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t);case Blockly.OUTPUT_VALUE:return!1;case Blockly.INPUT_VALUE:if(t.targetConnection&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Blockly.NEXT_STATEMENT:if(e&&this==this.sourceBlock_.previousConnection&&t.isConnectedToNonInsertionMarker()&&!e.targetConnection||t.isConnectedToNonInsertionMarker()&&!this.sourceBlock_.nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection)return!1;break;default:throw"Unknown connection type in isConnectionAllowed"}return-1==Blockly.draggingConnections_.indexOf(t)},Blockly.Connection.prototype.connect=function(t){this.targetConnection!=t&&(this.checkConnection_(t),this.isSuperior()?this.connect_(t):t.connect_(this))},Blockly.Connection.connectReciprocally_=function(t,e){goog.asserts.assert(t&&e,"Cannot connect null connections."),t.targetConnection=e,e.targetConnection=t},Blockly.Connection.singleConnection_=function(t,e){for(var o=!1,n=0;n<t.inputList.length;n++){var r=t.inputList[n].connection;if(r&&r.type==Blockly.INPUT_VALUE&&e.outputConnection.checkType_(r)){if(o)return null;o=r}}return o},Blockly.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(goog.asserts.assert(t,"Source connection not connected."),goog.asserts.assert(t.targetConnection==this,"Target connection not connected to source connection."),this.isSuperior()){var e=this.sourceBlock_,o=t.getSourceBlock();t=this}else e=t.getSourceBlock(),o=this.sourceBlock_;this.disconnectInternal_(e,o),t.respawnShadow_()},Blockly.Connection.prototype.disconnectInternal_=function(t,e){var o;Blockly.Events.isEnabled()&&(o=new Blockly.Events.BlockMove(e)),this.targetConnection=this.targetConnection.targetConnection=null,e.setParent(null),o&&(o.recordNew(),Blockly.Events.fire(o))},Blockly.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),e=this.getShadowDom();if(t.workspace&&e&&Blockly.Events.recordUndo)if(t=Blockly.Xml.domToBlock(e,t.workspace),t.outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw"Child block does not have output or previous statement.";this.connect(t.previousConnection)}},Blockly.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},Blockly.Connection.prototype.checkType_=function(t){if(!this.check_||!t.check_)return!0;for(var e=0;e<this.check_.length;e++)if(-1!=t.check_.indexOf(this.check_[e]))return!0;return!1},Blockly.Connection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},Blockly.Connection.prototype.setCheck=function(t){return t?(goog.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},Blockly.Connection.prototype.getOutputShape=function(){return this.check_?-1!==this.check_.indexOf("Boolean")?Blockly.OUTPUT_SHAPE_HEXAGONAL:-1!==this.check_.indexOf("Number")?Blockly.OUTPUT_SHAPE_ROUND:-1!==this.check_.indexOf("String")?Blockly.OUTPUT_SHAPE_SQUARE:Blockly.OUTPUT_SHAPE_ROUND:Blockly.OUTPUT_SHAPE_ROUND},Blockly.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t},Blockly.Connection.prototype.getShadowDom=function(){return this.shadowDom_},Blockly.Connection.prototype.neighbours_=function(){return[]},Blockly.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var e="Output Connection of ";else if(t.previousConnection==this)e="Previous Connection of ";else if(t.nextConnection==this)e="Next Connection of ";else{if(!(e=goog.array.find(t.inputList,function(t){return t.connection==this},this)))return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()},Blockly.ConnectionDB=function(){},Blockly.ConnectionDB.prototype=[],Blockly.ConnectionDB.constructor=Blockly.ConnectionDB,Blockly.ConnectionDB.prototype.addConnection=function(t){if(t.inDB_)throw"Connection already in database.";if(!t.getSourceBlock().isInFlyout){var e=this.findPositionForConnection_(t);this.splice(e,0,t),t.inDB_=!0}},Blockly.ConnectionDB.prototype.findConnection=function(t){if(!this.length)return-1;var e=this.findPositionForConnection_(t);if(e>=this.length)return-1;for(var o=t.y_,n=e;0<=n&&this[n].y_==o;){if(this[n]==t)return n;n--}for(;e<this.length&&this[e].y_==o;){if(this[e]==t)return e;e++}return-1},Blockly.ConnectionDB.prototype.findPositionForConnection_=function(t){if(!this.length)return 0;for(var e=0,o=this.length;e<o;){var n=Math.floor((e+o)/2);if(this[n].y_<t.y_)e=n+1;else{if(!(this[n].y_>t.y_)){e=n;break}o=n}}return e},Blockly.ConnectionDB.prototype.removeConnection_=function(t){if(!t.inDB_)throw"Connection not in database.";var e=this.findConnection(t);if(-1==e)throw"Unable to find connection in connectionDB.";t.inDB_=!1,this.splice(e,1)},Blockly.ConnectionDB.prototype.getNeighbours=function(t,e){function o(t){var o=r-n[t].x_,s=i-n[t].y_;return Math.sqrt(o*o+s*s)<=e&&c.push(n[t]),s<e}for(var n=this,r=t.x_,i=t.y_,s=0,a=n.length-2,l=a;s<l;)n[l].y_<i?s=l:a=l,l=Math.floor((s+a)/2);var c=[];if(a=s=l,n.length){for(;0<=s&&o(s);)s--;do{a++}while(a<n.length&&o(a))}return c},Blockly.ConnectionDB.prototype.isInYRange_=function(t,e,o){return Math.abs(this[t].y_-e)<=o},Blockly.ConnectionDB.prototype.searchForClosest=function(t,e,o){if(!this.length)return{connection:null,radius:e};var n=t.y_,r=t.x_;t.x_=r+o.x,t.y_=n+o.y;var i=this.findPositionForConnection_(t);o=null;for(var s,a=e,l=i-1;0<=l&&this.isInYRange_(l,t.y_,e);)s=this[l],t.isConnectionAllowed(s,a)&&(o=s,a=s.distanceFrom(t)),l--;for(;i<this.length&&this.isInYRange_(i,t.y_,e);)s=this[i],t.isConnectionAllowed(s,a)&&(o=s,a=s.distanceFrom(t)),i++;return t.x_=r,t.y_=n,{connection:o,radius:a}},Blockly.ConnectionDB.init=function(t){var e=[];e[Blockly.INPUT_VALUE]=new Blockly.ConnectionDB,e[Blockly.OUTPUT_VALUE]=new Blockly.ConnectionDB,e[Blockly.NEXT_STATEMENT]=new Blockly.ConnectionDB,e[Blockly.PREVIOUS_STATEMENT]=new Blockly.ConnectionDB,t.connectionDBList=e},Blockly.constants={},Blockly.DRAG_RADIUS=3,Blockly.FLYOUT_DRAG_RADIUS=10,Blockly.SNAP_RADIUS=48,Blockly.CONNECTING_SNAP_RADIUS=96,Blockly.CURRENT_CONNECTION_PREFERENCE=20,Blockly.BUMP_DELAY=0,Blockly.COLLAPSE_CHARS=30,Blockly.LONGPRESS=750,Blockly.SOUND_LIMIT=100,Blockly.DRAG_STACK=!0,Blockly.HSV_SATURATION=.45,Blockly.HSV_VALUE=.65;Blockly.SPRITE={width:96,height:124,url:"sprites.png"},Blockly.SVG_NS="http://www.w3.org/2000/svg",Blockly.HTML_NS="http://www.w3.org/1999/xhtml",Blockly.INPUT_VALUE=1,Blockly.OUTPUT_VALUE=2,Blockly.NEXT_STATEMENT=3,Blockly.PREVIOUS_STATEMENT=4,Blockly.DUMMY_INPUT=5,Blockly.ALIGN_LEFT=-1,Blockly.ALIGN_CENTRE=0,Blockly.ALIGN_RIGHT=1,Blockly.DRAG_NONE=0,Blockly.DRAG_STICKY=1,Blockly.DRAG_BEGIN=1,Blockly.DRAG_FREE=2,Blockly.OPPOSITE_TYPE=[],Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE]=Blockly.OUTPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE]=Blockly.INPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT]=Blockly.PREVIOUS_STATEMENT,Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT]=Blockly.NEXT_STATEMENT,Blockly.TOOLBOX_AT_TOP=0,Blockly.TOOLBOX_AT_BOTTOM=1,Blockly.TOOLBOX_AT_LEFT=2,Blockly.TOOLBOX_AT_RIGHT=3,Blockly.OUTPUT_SHAPE_HEXAGONAL=1,Blockly.OUTPUT_SHAPE_ROUND=2,Blockly.OUTPUT_SHAPE_SQUARE=3,Blockly.STACK_GLOW_RADIUS=1.3,Blockly.REPLACEMENT_GLOW_RADIUS=2,Blockly.Categories={motion:"motion",looks:"looks",sound:"sounds",pen:"pen",data:"data",event:"events",control:"control",sensing:"sensing",operators:"operators",more:"more"},Blockly.DELETE_AREA_NONE=null,Blockly.DELETE_AREA_TRASH=1,Blockly.DELETE_AREA_TOOLBOX=2,Blockly.VARIABLE_CATEGORY_NAME="VARIABLE",Blockly.PROCEDURE_CATEGORY_NAME="PROCEDURE",Blockly.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",Blockly.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",Blockly.Variables={},Blockly.Variables.NAME_TYPE=Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.allUsedVariables=function(t){if(t instanceof Blockly.Block)var e=t.getDescendants();else{if(!(t instanceof Blockly.Workspace||t instanceof Blockly.WorkspaceSvg))throw"Not Block or Workspace: "+t;e=t.getAllBlocks()}var o=Blockly.Variables.noVariableText();t=Object.create(null);for(var n=0;n<e.length;n++){var r=e[n].getVars();if(r)for(var i=0;i<r.length;i++){var s=r[i];s&&s.toLowerCase()!=o&&(t[s.toLowerCase()]=s)}}e=[];for(var a in t)e.push(t[a]);return e},Blockly.Variables.allVariables=function(t){return t instanceof Blockly.Block?(console.warn("Deprecated call to Blockly.Variables.allVariables with a block instead of a workspace.  You may want Blockly.Variables.allUsedVariables"),{}):t.getAllVariables()},Blockly.Variables.createValueDom_=function(t){var e=goog.dom.createDom("value");return e.setAttribute("name",t),e},Blockly.Variables.createShadowDom_=function(t){var e=goog.dom.createDom("shadow");return e.setAttribute("type",t),e},Blockly.Variables.createVariableDom_=function(t){var e=goog.dom.createDom("field",null,t.name);return e.setAttribute("name","VARIABLE"),e.setAttribute("variableType",t.type),e.setAttribute("id",t.getId()),e},Blockly.Variables.createTextDom_=function(){var t=Blockly.Variables.createValueDom_("VALUE"),e=Blockly.Variables.createShadowDom_("text"),o=goog.dom.createDom("field",null,"0");return o.setAttribute("name","TEXT"),e.appendChild(o),t.appendChild(e),t},Blockly.Variables.createMathNumberDom_=function(){var t=Blockly.Variables.createValueDom_("VALUE"),e=Blockly.Variables.createShadowDom_("math_number"),o=goog.dom.createDom("field",null,"1");return o.setAttribute("name","NUM"),e.appendChild(o),t.appendChild(e),t},Blockly.Variables.noVariableText=function(){return"No variable selected"},Blockly.Variables.generateUniqueName=function(t){t=t.getAllVariables();var e="";if(t.length)for(var o=1,n=0,r="ijkmnopqrstuvwxyzabcdefgh".charAt(n);!e;){for(var i=!1,s=0;s<t.length;s++)if(t[s].name.toLowerCase()==r){i=!0;break}i?(n++,25==n&&(n=0,o++),r="ijkmnopqrstuvwxyzabcdefgh".charAt(n),1<o&&(r+=o)):e=r}else e="i";return e},Blockly.Variables.createVariable=function(t,e,o){var n=function(r){Blockly.Variables.promptName(Blockly.Msg.NEW_VARIABLE_TITLE,r,function(r){if(r)if(t.getVariable(r))Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",r.toLowerCase()),function(){n(r)});else if(Blockly.Procedures.isNameUsed(r,t)){var i=t.createVariable(r,o),s=t.getFlyout();i=i.getId(),s.setCheckboxState&&s.setCheckboxState(i,!0),e&&e(r)}else Blockly.alert(Blockly.Msg.PROCEDURE_ALREADY_EXISTS.replace("%1",r.toLowerCase()),function(){n(r)});else e&&e(null)})};n("")},Blockly.Variables.renameVariable=function(t,e,o){var n=function(r){Blockly.Variables.promptName(Blockly.Msg.RENAME_VARIABLE_TITLE.replace("%1",e.name),r,function(r){if(r){var i=t.getVariable(r);i&&i.type!=e.type?Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",r.toLowerCase()).replace("%2",i.type),function(){n(r)}):Blockly.Procedures.isNameUsed(r,t)?(t.renameVariable(e.name,r),o&&o(r)):Blockly.alert(Blockly.Msg.PROCEDURE_ALREADY_EXISTS.replace("%1",r.toLowerCase()),function(){n(r)})}else o&&o(null)})};n("")},Blockly.Variables.promptName=function(t,e,o){Blockly.prompt(t,e,function(t){t&&((t=t.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))==Blockly.Msg.RENAME_VARIABLE||t==Blockly.Msg.NEW_VARIABLE)&&(t=null),o(t)})},Blockly.Variables.generateVariableFieldXml_=function(t,e){return'<field name="'+(e||"VARIABLE")+'" variableType="'+t.type+'" id="'+t.getId()+'">'+t.name+"</field>"},Blockly.DataCategory=function(t){var e=t.getVariablesOfType("");e.sort(Blockly.VariableModel.compareByName);var o=[];Blockly.DataCategory.addCreateButton(o,t,"VARIABLE");for(var n=0;n<e.length;n++)Blockly.DataCategory.addDataVariable(o,e[n]);for(0<e.length&&(o[o.length-1].setAttribute("gap",24),e=e[0],Blockly.DataCategory.addSetVariableTo(o,e),Blockly.DataCategory.addChangeVariableBy(o,e),Blockly.DataCategory.addShowVariable(o,e),Blockly.DataCategory.addHideVariable(o,e)),e=t.getVariablesOfType("list"),e.sort(Blockly.VariableModel.compareByName),n=0;n<e.length;n++)Blockly.DataCategory.addDataVariable(o,e[n]);return 0<e.length&&(o[o.length-1].setAttribute("gap",24),e=e[0],Blockly.DataCategory.addAddToList(o,e),Blockly.DataCategory.addDeleteOfList(o,e),Blockly.DataCategory.addInsertAtList(o,e),Blockly.DataCategory.addReplaceItemOfList(o,e),Blockly.DataCategory.addItemOfList(o,e),Blockly.DataCategory.addLengthOfList(o,e),Blockly.DataCategory.addListContainsItem(o,e),Blockly.DataCategory.addShowList(o,e),Blockly.DataCategory.addHideList(o,e)),o},Blockly.DataCategory.addDataVariable=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_variable","VARIABLE")},Blockly.DataCategory.addSetVariableTo=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_setvariableto","VARIABLE",["VALUE","text"])},Blockly.DataCategory.addChangeVariableBy=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_changevariableby","VARIABLE",["VALUE","math_number"])},Blockly.DataCategory.addShowVariable=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_showvariable","VARIABLE")},Blockly.DataCategory.addHideVariable=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_hidevariable","VARIABLE")},Blockly.DataCategory.addAddToList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_addtolist","LIST",["ITEM","text"])},Blockly.DataCategory.addDeleteOfList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_deleteoflist","LIST",["INDEX","math_integer"])},Blockly.DataCategory.addInsertAtList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_insertatlist","LIST",["INDEX","math_integer"],["ITEM","text"])},Blockly.DataCategory.addReplaceItemOfList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_replaceitemoflist","LIST",["INDEX","math_integer"],["ITEM","text"])},Blockly.DataCategory.addItemOfList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_itemoflist","LIST",["INDEX","math_integer"])},Blockly.DataCategory.addLengthOfList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_lengthoflist","LIST")},Blockly.DataCategory.addListContainsItem=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_listcontainsitem","LIST",["ITEM","text"])},Blockly.DataCategory.addShowList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_showlist","LIST")},Blockly.DataCategory.addHideList=function(t,e){Blockly.DataCategory.addBlock(t,e,"data_hidelist","LIST")},Blockly.DataCategory.addCreateButton=function(t,e,o){var n=goog.dom.createDom("button"),r=Blockly.Msg.NEW_VARIABLE,i="CREATE_VARIABLE",s=function(t){Blockly.Variables.createVariable(t.getTargetWorkspace())};"LIST"===o&&(r=Blockly.Msg.NEW_LIST,i="CREATE_LIST",s=function(t){Blockly.Variables.createVariable(t.getTargetWorkspace(),null,"list")}),n.setAttribute("text",r),n.setAttribute("callbackKey",i),e.registerButtonCallback(i,s),t.push(n)},Blockly.DataCategory.addBlock=function(t,e,o,n,r,i){if(Blockly.Blocks[o]){var s,a;r&&(s=Blockly.DataCategory.createValue(r[0],r[1])),i&&(a=Blockly.DataCategory.createValue(i[0],i[1])),e='<xml><block type="'+o+'" gap="8">'+Blockly.Variables.generateVariableFieldXml_(e,n)+s+a+"</block></xml>",e=Blockly.Xml.textToDom(e).firstChild,t.push(e)}},Blockly.DataCategory.createValue=function(t,e){switch(t){case"ITEM":var o="TEXT",n="thing";break;case"INDEX":o="NUM",n=1;break;case"VALUE":o="math_number"===e?"NUM":"TEXT",n=0}return'<value name="'+t+'"><shadow type="'+e+'"><field name="'+o+'">'+n+"</field></shadow></value>"},Blockly.DropDownDiv=function(){},Blockly.DropDownDiv.DIV_=null,Blockly.DropDownDiv.boundsElement_=null,Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.ARROW_SIZE=16,Blockly.DropDownDiv.BORDER_SIZE=1,Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,Blockly.DropDownDiv.PADDING_Y=20,Blockly.DropDownDiv.ANIMATION_TIME=.25,Blockly.DropDownDiv.animateOutTimer_=null,Blockly.DropDownDiv.onHide_=0,Blockly.DropDownDiv.createDom=function(){Blockly.DropDownDiv.DIV_||(Blockly.DropDownDiv.DIV_=goog.dom.createDom("div","blocklyDropDownDiv"),document.body.appendChild(Blockly.DropDownDiv.DIV_),Blockly.DropDownDiv.content_=goog.dom.createDom("div","blocklyDropDownContent"),Blockly.DropDownDiv.DIV_.appendChild(Blockly.DropDownDiv.content_),Blockly.DropDownDiv.arrow_=goog.dom.createDom("div","blocklyDropDownArrow"),Blockly.DropDownDiv.DIV_.appendChild(Blockly.DropDownDiv.arrow_),Blockly.DropDownDiv.DIV_.style.transition="transform "+Blockly.DropDownDiv.ANIMATION_TIME+"s, opacity "+Blockly.DropDownDiv.ANIMATION_TIME+"s")},Blockly.DropDownDiv.setBoundsElement=function(t){Blockly.DropDownDiv.boundsElement_=t},Blockly.DropDownDiv.getContentDiv=function(){return Blockly.DropDownDiv.content_},Blockly.DropDownDiv.clearContent=function(){Blockly.DropDownDiv.content_.innerHTML=""},Blockly.DropDownDiv.setColour=function(t,e){Blockly.DropDownDiv.DIV_.style.backgroundColor=t,Blockly.DropDownDiv.DIV_.style.borderColor=e},Blockly.DropDownDiv.setCategory=function(t){Blockly.DropDownDiv.DIV_.setAttribute("data-category",t)},Blockly.DropDownDiv.showPositionedByBlock=function(t,e,o,n){var r=e.workspace.scale,i=e.width;return t=e.height,i*=r,t*=r,r=e.getSvgRoot().getBoundingClientRect(),i=r.left+i/2,t=r.top+t,r=r.top,n&&(r+=n),Blockly.DropDownDiv.setBoundsElement(e.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,i,t,i,r,o)},Blockly.DropDownDiv.show=function(t,e,o,n,r,i){return Blockly.DropDownDiv.owner_=t,Blockly.DropDownDiv.onHide_=i,t=Blockly.DropDownDiv.DIV_,e=Blockly.DropDownDiv.getPositionMetrics(e,o,n,r),Blockly.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",Blockly.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow arrowTop":"blocklyDropDownArrow arrowBottom"),t.style.left=e.initialX+"px",t.style.top=e.initialY+"px",t.style.display="block",t.style.opacity=1,t.style.transform="translate("+(e.finalX-e.initialX)+"px,"+(e.finalY-e.initialY)+"px)",e.arrowAtTop},Blockly.DropDownDiv.getPositionMetrics=function(t,e,o,n){var r=Blockly.DropDownDiv.DIV_,i=Blockly.DropDownDiv.boundsElement_.getBoundingClientRect(),s=goog.style.getSize(Blockly.DropDownDiv.boundsElement_);if(r=goog.style.getSize(r),e+r.height>i.top+s.height)if(n-r.height<i.top){o=e+Blockly.DropDownDiv.PADDING_Y;var a=!1}else t=o,o=n-r.height-Blockly.DropDownDiv.PADDING_Y,a=!0;else o=e+Blockly.DropDownDiv.PADDING_Y,a=!1;var l=t-Blockly.DropDownDiv.ARROW_SIZE/2;return l=Math.max(i.left,Math.min(l,i.left+s.width)),t=Math.max(i.left,Math.min(t-r.width/2,i.left+s.width-r.width)),l=Math.max(Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING,Math.min(l-t,r.width-Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING-Blockly.DropDownDiv.ARROW_SIZE)),i=a?r.height-Blockly.DropDownDiv.BORDER_SIZE:0,i-=Blockly.DropDownDiv.ARROW_SIZE/2+Blockly.DropDownDiv.BORDER_SIZE,{initialX:t,initialY:a?n-r.height:e,finalX:t,finalY:o,arrowX:l,arrowY:i,arrowAtTop:!a}},Blockly.DropDownDiv.isVisible=function(){return!!Blockly.DropDownDiv.owner_},Blockly.DropDownDiv.hideIfOwner=function(t){return Blockly.DropDownDiv.owner_===t&&(Blockly.DropDownDiv.hide(),!0)},Blockly.DropDownDiv.hide=function(){var t=Blockly.DropDownDiv.DIV_;t.style.transform="translate(0px, 0px)",t.style.opacity=0,Blockly.DropDownDiv.animateOutTimer_=setTimeout(function(){Blockly.DropDownDiv.hideWithoutAnimation()},1e3*Blockly.DropDownDiv.ANIMATION_TIME),Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null)},Blockly.DropDownDiv.hideWithoutAnimation=function(){if(Blockly.DropDownDiv.isVisible()){var t=Blockly.DropDownDiv.DIV_;Blockly.DropDownDiv.animateOutTimer_&&window.clearTimeout(Blockly.DropDownDiv.animateOutTimer_),t.style.transform="",t.style.top="",t.style.left="",t.style.display="none",Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null)}},Blockly.Events={},Blockly.Events.group_="",Blockly.Events.recordUndo=!0,Blockly.Events.disabled_=0,Blockly.Events.CREATE="create",Blockly.Events.BLOCK_CREATE=Blockly.Events.CREATE,Blockly.Events.DELETE="delete",Blockly.Events.BLOCK_DELETE=Blockly.Events.DELETE,Blockly.Events.CHANGE="change",Blockly.Events.BLOCK_CHANGE=Blockly.Events.CHANGE,Blockly.Events.MOVE="move",Blockly.Events.BLOCK_MOVE=Blockly.Events.MOVE,Blockly.Events.VAR_CREATE="var_create",Blockly.Events.VAR_DELETE="var_delete",Blockly.Events.VAR_RENAME="var_rename",Blockly.Events.UI="ui",Blockly.Events.FIRE_QUEUE_=[],Blockly.Events.fire=function(t){Blockly.Events.isEnabled()&&(Blockly.Events.FIRE_QUEUE_.length||setTimeout(Blockly.Events.fireNow_,0),Blockly.Events.FIRE_QUEUE_.push(t))},Blockly.Events.fireNow_=function(){for(var t,e=Blockly.Events.filter(Blockly.Events.FIRE_QUEUE_,!0),o=Blockly.Events.FIRE_QUEUE_.length=0;t=e[o];o++){var n=Blockly.Workspace.getById(t.workspaceId);n&&n.fireChangeListener(t)}},Blockly.Events.filter=function(t,e){var o=goog.array.clone(t);e||o.reverse();for(var n,r=0;n=o[r];r++)for(var i,s=r+1;i=o[s];s++)n.type==i.type&&n.blockId==i.blockId&&n.workspaceId==i.workspaceId&&(n.type==Blockly.Events.MOVE?(n.newParentId=i.newParentId,n.newInputName=i.newInputName,n.newCoordinate=i.newCoordinate,o.splice(s,1),s--):n.type==Blockly.Events.CHANGE&&n.element==i.element&&n.name==i.name?(n.newValue=i.newValue,o.splice(s,1),s--):n.type!=Blockly.Events.UI||"click"!=i.element||"commentOpen"!=n.element&&"mutatorOpen"!=n.element&&"warningOpen"!=n.element||(n.newValue=i.newValue,o.splice(s,1),s--));for(r=o.length-1;0<=r;r--)o[r].isNull()&&o.splice(r,1);for(e||o.reverse(),r=1;n=o[r];r++)n.type==Blockly.Events.CHANGE&&"mutation"==n.element&&o.unshift(o.splice(r,1)[0]);return o},Blockly.Events.clearPendingUndo=function(){for(var t,e=0;t=Blockly.Events.FIRE_QUEUE_[e];e++)t.recordUndo=!1},Blockly.Events.disable=function(){Blockly.Events.disabled_++},Blockly.Events.enable=function(){Blockly.Events.disabled_--},Blockly.Events.isEnabled=function(){return 0==Blockly.Events.disabled_},Blockly.Events.getGroup=function(){return Blockly.Events.group_},Blockly.Events.setGroup=function(t){Blockly.Events.group_="boolean"==typeof t?t?Blockly.utils.genUid():"":t},Blockly.Events.getDescendantIds_=function(t){var e=[];t=t.getDescendants();for(var o,n=0;o=t[n];n++)e[n]=o.id;return e},Blockly.Events.fromJson=function(t,e){switch(t.type){case Blockly.Events.CREATE:var o=new Blockly.Events.Create(null);break;case Blockly.Events.DELETE:o=new Blockly.Events.Delete(null);break;case Blockly.Events.CHANGE:o=new Blockly.Events.Change(null);break;case Blockly.Events.MOVE:o=new Blockly.Events.Move(null);break;case Blockly.Events.VAR_CREATE:o=new Blockly.Events.VarCreate(null);break;case Blockly.Events.VAR_DELETE:o=new Blockly.Events.VarDelete(null);break;case Blockly.Events.VAR_RENAME:o=new Blockly.Events.VarRename(null);break;case Blockly.Events.UI:o=new Blockly.Events.Ui(null);break;default:throw"Unknown event type."}return o.fromJson(t),o.workspaceId=e.id,o},Blockly.Events.Abstract=function(t){t instanceof Blockly.Block?(this.blockId=t.id,this.workspaceId=t.workspace.id):t instanceof Blockly.VariableModel&&(this.workspaceId=t.workspace.id,this.varId=t.getId()),this.group=Blockly.Events.group_,this.recordUndo=Blockly.Events.recordUndo},Blockly.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.blockId&&(t.blockId=this.blockId),this.varId&&(t.varId=this.varId),this.group&&(t.group=this.group),t},Blockly.Events.Abstract.prototype.fromJson=function(t){this.blockId=t.blockId,this.varId=t.varId,this.group=t.group},Blockly.Events.Abstract.prototype.isNull=function(){return!1},Blockly.Events.Abstract.prototype.run=function(){},Blockly.Events.Abstract.prototype.getEventWorkspace_=function(){var t=Blockly.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},Blockly.Events.Create=function(t){t&&(Blockly.Events.Create.superClass_.constructor.call(this,t),this.xml=t.workspace.rendered?Blockly.Xml.blockToDomWithXY(t):Blockly.Xml.blockToDom(t),this.ids=Blockly.Events.getDescendantIds_(t))},goog.inherits(Blockly.Events.Create,Blockly.Events.Abstract),Blockly.Events.BlockCreate=Blockly.Events.Create,Blockly.Events.Create.prototype.type=Blockly.Events.CREATE,Blockly.Events.Create.prototype.toJson=function(){var t=Blockly.Events.Create.superClass_.toJson.call(this);return t.xml=Blockly.Xml.domToText(this.xml),t.ids=this.ids,t},Blockly.Events.Create.prototype.fromJson=function(t){Blockly.Events.Create.superClass_.fromJson.call(this,t),this.xml=Blockly.Xml.textToDom("<xml>"+t.xml+"</xml>").firstChild,this.ids=t.ids},Blockly.Events.Create.prototype.run=function(t){var e=this.getEventWorkspace_();if(t)t=goog.dom.createDom("xml"),t.appendChild(this.xml),Blockly.Xml.domToWorkspace(t,e);else{t=0;for(var o;o=this.ids[t];t++){var n=e.getBlockById(o);n?n.dispose(!1,!1):o==this.blockId&&console.warn("Can't uncreate non-existant block: "+o)}}},Blockly.Events.Delete=function(t){if(t){if(t.getParent())throw"Connected blocks cannot be deleted.";Blockly.Events.Delete.superClass_.constructor.call(this,t),this.oldXml=t.workspace.rendered?Blockly.Xml.blockToDomWithXY(t):Blockly.Xml.blockToDom(t),this.ids=Blockly.Events.getDescendantIds_(t)}},goog.inherits(Blockly.Events.Delete,Blockly.Events.Abstract),Blockly.Events.BlockDelete=Blockly.Events.Delete,Blockly.Events.Delete.prototype.type=Blockly.Events.DELETE,Blockly.Events.Delete.prototype.toJson=function(){var t=Blockly.Events.Delete.superClass_.toJson.call(this);return t.ids=this.ids,t},Blockly.Events.Delete.prototype.fromJson=function(t){Blockly.Events.Delete.superClass_.fromJson.call(this,t),this.ids=t.ids},Blockly.Events.Delete.prototype.run=function(t){var e=this.getEventWorkspace_();if(t){t=0;for(var o;o=this.ids[t];t++){var n=e.getBlockById(o);n?n.dispose(!1,!1):o==this.blockId&&console.warn("Can't delete non-existant block: "+o)}}else t=goog.dom.createDom("xml"),t.appendChild(this.oldXml),Blockly.Xml.domToWorkspace(t,e)},Blockly.Events.Change=function(t,e,o,n,r){t&&(Blockly.Events.Change.superClass_.constructor.call(this,t),this.element=e,this.name=o,this.oldValue=n,this.newValue=r)},goog.inherits(Blockly.Events.Change,Blockly.Events.Abstract),Blockly.Events.BlockChange=Blockly.Events.Change,Blockly.Events.Change.prototype.type=Blockly.Events.CHANGE,Blockly.Events.Change.prototype.toJson=function(){var t=Blockly.Events.Change.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.newValue=this.newValue,t},Blockly.Events.Change.prototype.fromJson=function(t){Blockly.Events.Change.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.newValue=t.newValue},Blockly.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},Blockly.Events.Change.prototype.run=function(t){var e=this.getEventWorkspace_().getBlockById(this.blockId);if(e)switch(e.mutator&&e.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(e=e.getField(this.name))?(e.callValidator(t),e.setValue(t)):console.warn("Can't set non-existant field: "+this.name);break;case"comment":e.setCommentText(t||null);break;case"collapsed":e.setCollapsed(t);break;case"disabled":e.setDisabled(t);break;case"inline":e.setInputsInline(t);break;case"mutation":var o="";if(e.mutationToDom&&(o=(o=e.mutationToDom())&&Blockly.Xml.domToText(o)),e.domToMutation){t=t||"<mutation></mutation>";var n=Blockly.Xml.textToDom("<xml>"+t+"</xml>");e.domToMutation(n.firstChild)}Blockly.Events.fire(new Blockly.Events.Change(e,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existant block: "+this.blockId)},Blockly.Events.Move=function(t){t&&(Blockly.Events.Move.superClass_.constructor.call(this,t),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},goog.inherits(Blockly.Events.Move,Blockly.Events.Abstract),Blockly.Events.BlockMove=Blockly.Events.Move,Blockly.Events.Move.prototype.type=Blockly.Events.MOVE,Blockly.Events.Move.prototype.toJson=function(){var t=Blockly.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),t},Blockly.Events.Move.prototype.fromJson=function(t){Blockly.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate&&(t=t.newCoordinate.split(","),this.newCoordinate=new goog.math.Coordinate(parseFloat(t[0]),parseFloat(t[1])))},Blockly.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},Blockly.Events.Move.prototype.currentLocation_=function(){var t=Blockly.Workspace.getById(this.workspaceId).getBlockById(this.blockId),e={},o=t.getParent();return o?(e.parentId=o.id,(t=o.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},Blockly.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&goog.math.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},Blockly.Events.Move.prototype.run=function(t){var e=this.getEventWorkspace_(),o=e.getBlockById(this.blockId);if(o){var n=t?this.newParentId:this.oldParentId,r=t?this.newInputName:this.oldInputName;t=t?this.newCoordinate:this.oldCoordinate;var i=null;if(n&&!(i=e.getBlockById(n)))return void console.warn("Can't connect to non-existant block: "+n);if(o.getParent()&&o.unplug(),t)r=o.getRelativeToSurfaceXY(),o.moveBy(t.x-r.x,t.y-r.y);else{if(o=o.outputConnection||o.previousConnection,r){if(e=i.getInput(r))var s=e.connection}else o.type==Blockly.PREVIOUS_STATEMENT&&(s=i.nextConnection);s?o.connect(s):console.warn("Can't connect to non-existant input: "+r)}}else console.warn("Can't move non-existant block: "+this.blockId)},Blockly.Events.Ui=function(t,e,o,n){Blockly.Events.Ui.superClass_.constructor.call(this,t),this.element=e,this.oldValue=o,this.newValue=n,this.recordUndo=!1},goog.inherits(Blockly.Events.Ui,Blockly.Events.Abstract),Blockly.Events.Ui.prototype.type=Blockly.Events.UI,Blockly.Events.Ui.prototype.toJson=function(){var t=Blockly.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),t},Blockly.Events.Ui.prototype.fromJson=function(t){Blockly.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue},Blockly.Events.VarCreate=function(t){t&&(Blockly.Events.VarCreate.superClass_.constructor.call(this,t),this.varType=t.type,this.varName=t.name)},goog.inherits(Blockly.Events.VarCreate,Blockly.Events.Abstract),Blockly.Events.VarCreate.prototype.type=Blockly.Events.VAR_CREATE,Blockly.Events.VarCreate.prototype.toJson=function(){var t=Blockly.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},Blockly.Events.VarCreate.prototype.fromJson=function(t){Blockly.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},Blockly.Events.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},Blockly.Events.VarDelete=function(t){t&&(Blockly.Events.VarDelete.superClass_.constructor.call(this,t),this.varType=t.type,this.varName=t.name)},goog.inherits(Blockly.Events.VarDelete,Blockly.Events.Abstract),Blockly.Events.VarDelete.prototype.type=Blockly.Events.VAR_DELETE,Blockly.Events.VarDelete.prototype.toJson=function(){var t=Blockly.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},Blockly.Events.VarDelete.prototype.fromJson=function(t){Blockly.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},Blockly.Events.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},Blockly.Events.VarRename=function(t,e){t&&(Blockly.Events.VarRename.superClass_.constructor.call(this,t),this.oldName=t.name,this.newName=e)},goog.inherits(Blockly.Events.VarRename,Blockly.Events.Abstract),Blockly.Events.VarRename.prototype.type=Blockly.Events.VAR_RENAME,Blockly.Events.VarRename.prototype.toJson=function(){var t=Blockly.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},Blockly.Events.VarRename.prototype.fromJson=function(t){Blockly.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},Blockly.Events.VarRename.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)},Blockly.Events.disableOrphans=function(t){if(t.type==Blockly.Events.MOVE||t.type==Blockly.Events.CREATE){Blockly.Events.disable();var e=Blockly.Workspace.getById(t.workspaceId);if(t=e.getBlockById(t.blockId))if(t.getParent()&&!t.getParent().disabled){e=t.getDescendants(),t=0;for(var o;o=e[t];t++)o.setDisabled(!1)}else if((t.outputConnection||t.previousConnection)&&!e.isDragging())do{t.setDisabled(!0),t=t.getNextBlock()}while(t);Blockly.Events.enable()}},Blockly.RenderedConnection=function(t,e){Blockly.RenderedConnection.superClass_.constructor.call(this,t,e),this.offsetInBlock_=new goog.math.Coordinate(0,0)},goog.inherits(Blockly.RenderedConnection,Blockly.Connection),Blockly.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x_-t.x_;return t=this.y_-t.y_,Math.sqrt(e*e+t*t)},Blockly.RenderedConnection.prototype.bumpAwayFrom_=function(t){if(!this.sourceBlock_.workspace.isDragging()){var e=this.sourceBlock_.getRootBlock();if(!e.isInFlyout){var o=!1;if(!e.isMovable()){if(e=t.getSourceBlock().getRootBlock(),!e.isMovable())return;t=this,o=!0}var n=Blockly.selected==e;n||e.addSelect();var r=t.x_+Blockly.SNAP_RADIUS-this.x_;t=t.y_+Blockly.SNAP_RADIUS-this.y_,o&&(t=-t),e.RTL&&(r=-r),e.moveBy(r,t),n||e.removeSelect()}}},Blockly.RenderedConnection.prototype.moveTo=function(t,e){this.inDB_&&this.db_.removeConnection_(this),this.x_=t,this.y_=e,this.hidden_||this.db_.addConnection(this)},Blockly.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x_+t,this.y_+e)},Blockly.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},Blockly.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},Blockly.RenderedConnection.prototype.tighten_=function(){var t=this.targetConnection.x_-this.x_,e=this.targetConnection.y_-this.y_;if(0!=t||0!=e){var o=this.targetBlock(),n=o.getSvgRoot();if(!n)throw"block is not rendered.";n=Blockly.utils.getRelativeXY(n),o.getSvgRoot().setAttribute("transform","translate("+(n.x-t)+","+(n.y-e)+")"),o.moveConnections_(-t,-e)}},Blockly.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},Blockly.RenderedConnection.prototype.highlight=function(){var t="m -20,0 h 5 "+Blockly.BlockSvg.NOTCH_PATH_LEFT+" h 5",e=this.sourceBlock_.getRelativeToSurfaceXY();Blockly.Connection.highlightedPath_=Blockly.utils.createSvgElement("path",{class:"blocklyHighlightedConnectionPath",d:t,transform:"translate("+(this.x_-e.x)+","+(this.y_-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},Blockly.RenderedConnection.prototype.unhideAll=function(){this.setHidden(!1);var t=[];if(this.type!=Blockly.INPUT_VALUE&&this.type!=Blockly.NEXT_STATEMENT)return t;var e=this.targetBlock();if(e){if(e.isCollapsed()){var o=[];e.outputConnection&&o.push(e.outputConnection),e.nextConnection&&o.push(e.nextConnection),e.previousConnection&&o.push(e.previousConnection)}else o=e.getConnections_(!0);for(var n=0;n<o.length;n++)t.push.apply(t,o[n].unhideAll());t.length||(t[0]=e)}return t},Blockly.RenderedConnection.prototype.unhighlight=function(){goog.dom.removeNode(Blockly.Connection.highlightedPath_),delete Blockly.Connection.highlightedPath_},Blockly.RenderedConnection.prototype.setHidden=function(t){(this.hidden_=t)&&this.inDB_?this.db_.removeConnection_(this):t||this.inDB_||this.db_.addConnection(this)},Blockly.RenderedConnection.prototype.hideAll=function(){if(this.setHidden(!0),this.targetConnection)for(var t=this.targetBlock().getDescendants(),e=0;e<t.length;e++){for(var o=t[e],n=o.getConnections_(!0),r=0;r<n.length;r++)n[r].setHidden(!0);for(o=o.getIcons(),r=0;r<o.length;r++)o[r].setVisible(!1)}},Blockly.RenderedConnection.prototype.isConnectionAllowed=function(t,e){return!(this.distanceFrom(t)>e)&&Blockly.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)};Blockly.RenderedConnection.prototype.disconnectInternal_=function(t,e){Blockly.RenderedConnection.superClass_.disconnectInternal_.call(this,t,e),t.rendered&&t.render(),e.rendered&&(e.updateDisabled(),e.render())},Blockly.RenderedConnection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),e=this.getShadowDom();if(t.workspace&&e&&Blockly.Events.recordUndo){if(Blockly.RenderedConnection.superClass_.respawnShadow_.call(this),!(e=this.targetBlock()))throw"Couldn't respawn the shadow block that should exist here.";e.initSvg(),e.render(!1),t.rendered&&t.render()}},Blockly.RenderedConnection.prototype.neighbours_=function(t){return this.dbOpposite_.getNeighbours(this,t)},Blockly.RenderedConnection.prototype.connect_=function(t){Blockly.RenderedConnection.superClass_.connect_.call(this,t);var e=this.getSourceBlock();t=t.getSourceBlock(),e.rendered&&e.updateDisabled(),t.rendered&&t.updateDisabled(),e.rendered&&t.rendered&&(this.type==Blockly.NEXT_STATEMENT||this.type==Blockly.PREVIOUS_STATEMENT?t.render():e.render())},Blockly.RenderedConnection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours_())},Blockly.InsertionMarkerManager=function(t){this.topBlock_=Blockly.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.markerConnection_=null,this.highlightingBlock_=!1,this.highlightedBlock_=null,this.availableConnections_=this.initAvailableConnections_()},Blockly.InsertionMarkerManager.prototype.dispose=function(){this.workspace_=this.topBlock_=null,this.availableConnections_.length=0,this.localConnection_=this.closestConnection_=null,Blockly.Events.disable();try{this.firstMarker_&&(this.firstMarker_.dispose(),this.firstMarker_=null),this.lastMarker_&&(this.lastMarker_.dispose(),this.lastMarker_=null)}finally{Blockly.Events.enable()}this.highlightedBlock_=null},Blockly.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},Blockly.InsertionMarkerManager.prototype.applyConnections=function(){this.closestConnection_&&(Blockly.Events.disable(),this.hidePreview_(),Blockly.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered&&(this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_).getSourceBlock().connectionUiEffect())},Blockly.InsertionMarkerManager.prototype.update=function(t,e){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,e))||this.shouldUpdatePreviews_(o,t))&&(Blockly.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),Blockly.Events.enable())},Blockly.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var e=t.type;Blockly.Events.disable();try{var o=this.workspace_.newBlock(e);if(t.mutationToDom){var n=t.mutationToDom();o.domToMutation(n)}o.setInsertionMarker(!0,t.width),o.initSvg()}finally{Blockly.Events.enable()}return o},Blockly.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),e=this.topBlock_.lastConnectionInStack();return e&&e!=this.topBlock_.nextConnection&&(t.push(e),this.lastOnStack_=e,this.lastMarker_=this.createMarkerBlock_(e.sourceBlock_)),t},Blockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,e){var o=t.local,n=t.closest,r=t.radius;if(!o||!n)return!(!this.localConnection_||!this.closestConnection_);if(o.type==Blockly.OUTPUT_VALUE)return!0;if(this.localConnection_&&this.closestConnection_){if(this.closestConnection_==n)return!1;o=this.localConnection_.x_+e.x-this.closestConnection_.x_;var i=this.localConnection_.y_+e.y-this.closestConnection_.y_;return o=Math.sqrt(o*o+i*i),!(n&&r>o-Blockly.CURRENT_CONNECTION_PREFERENCE)}return!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0)},Blockly.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var e=this.getStartRadius_(),o=null,n=null,r=0;r<this.availableConnections_.length;r++){var i=this.availableConnections_[r],s=i.closest(e,t);s.connection&&(o=s.connection,n=i,e=s.radius)}return{closest:o,local:n,radius:e}},Blockly.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?Blockly.CONNECTING_SNAP_RADIUS:Blockly.SNAP_RADIUS},Blockly.InsertionMarkerManager.prototype.shouldReplace_=function(){var t=this.closestConnection_,e=this.localConnection_;return e.type==Blockly.OUTPUT_VALUE||e!=e.sourceBlock_.getFirstStatementConnection()&&!(this.topBlock_.nextConnection||e.type!=Blockly.PREVIOUS_STATEMENT||!t.isConnected())},Blockly.InsertionMarkerManager.prototype.shouldDelete_=function(t,e){var o=t&&!!t.closest&&e!=Blockly.DELETE_AREA_TOOLBOX;return!!e&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!o},Blockly.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&e!=this.closestConnection_&&!e.sourceBlock_.isInsertionMarker()&&(this.closestConnection_=e,this.localConnection_=t,this.showPreview_())}},Blockly.InsertionMarkerManager.prototype.showPreview_=function(){this.shouldReplace_()?this.highlightBlock_():this.connectMarker_()},Blockly.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){t.closest||this.hidePreview_();var e=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_(),this.localConnection_=this.closestConnection_=this.markerConnection_=null},Blockly.InsertionMarkerManager.prototype.hidePreview_=function(){this.highlightingBlock_?this.unhighlightBlock_():this.markerConnection_&&this.disconnectMarker_()},Blockly.InsertionMarkerManager.prototype.highlightBlock_=function(){var t=this.closestConnection_,e=this.localConnection_;t.targetBlock()?(this.highlightedBlock_=t.targetBlock(),t.targetBlock().highlightForReplacement(!0)):e.type==Blockly.OUTPUT_VALUE&&(this.highlightedBlock_=t.sourceBlock_,t.sourceBlock_.highlightShapeForInput(t,!0)),this.highlightingBlock_=!0},Blockly.InsertionMarkerManager.prototype.unhighlightBlock_=function(){var t=this.closestConnection_;t.type!=Blockly.INPUT_VALUE||t.isConnected()?this.highlightedBlock_.highlightForReplacement(!1):this.highlightedBlock_.highlightShapeForInput(t,!1),this.highlightedBlock_=null,this.highlightingBlock_=!1},Blockly.InsertionMarkerManager.prototype.disconnectMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,e=t.sourceBlock_,o=e.nextConnection,n=e.previousConnection;if(t!=o||n&&n.targetConnection?t.type==Blockly.NEXT_STATEMENT&&t!=o?(o=t.targetConnection,o.sourceBlock_.unplug(!1),n=n?n.targetConnection:null,e.unplug(!0),n&&n.connect(o)):e.unplug(!0):t.targetBlock().unplug(!1),t.targetConnection)throw"markerConnection_ still connected at the end of disconnectInsertionMarker";this.markerConnection_=null,e.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},Blockly.InsertionMarkerManager.prototype.connectMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,o=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;t=o.getMatchingConnection(t.sourceBlock_,t),goog.asserts.assert(t!=this.markerConnection_,"Made it to connectMarker_ even though the marker isn't changing"),o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),o.positionNewBlock(o,t,e),t.connect(e),this.markerConnection_=t},Blockly.BlockDragger=function(t,e){this.draggingBlock_=t,this.workspace_=e,this.draggedConnectionManager_=new Blockly.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Blockly.BlockDragger.initIconData_(t)},Blockly.BlockDragger.prototype.dispose=function(){this.startWorkspace_=this.workspace_=this.draggingBlock_=null,this.dragIconData_.length=0,this.draggedConnectionManager_&&(this.draggedConnectionManager_.dispose(),this.draggedConnectionManager_=null)},Blockly.BlockDragger.initIconData_=function(t){var e=[];t=t.getDescendants();for(var o,n=0;o=t[n];n++){o=o.getIcons();for(var r=0;r<o.length;r++){var i={location:o[r].getIconLocation(),icon:o[r]};e.push(i)}}return e},Blockly.BlockDragger.prototype.startBlockDrag=function(t){Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),Blockly.BlockSvg.disconnectUiStop_(),this.draggingBlock_.getParent()&&(this.draggingBlock_.unplug(),t=this.pixelsToWorkspaceUnits_(t),t=goog.math.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),this.draggingBlock_.disconnectUiEffect()),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface_(),this.workspace_.toolbox_&&this.workspace_.toolbox_.addDeleteStyle()},Blockly.BlockDragger.prototype.dragBlock=function(t,e){var o=this.pixelsToWorkspaceUnits_(e),n=goog.math.Coordinate.sum(this.startXY_,o);this.draggingBlock_.moveDuringDrag(n),this.dragIcons_(o),this.deleteArea_=this.workspace_.isDeleteArea(t),this.draggedConnectionManager_.update(o,this.deleteArea_),this.updateCursorDuringBlockDrag_()},Blockly.BlockDragger.prototype.endBlockDrag=function(t,e){this.dragBlock(t,e),this.dragIconData_=[],Blockly.BlockSvg.disconnectUiStop_();var o=this.pixelsToWorkspaceUnits_(e),n=goog.math.Coordinate.sum(this.startXY_,o);this.draggingBlock_.moveOffDragSurface_(n),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections_(o.x,o.y),this.draggingBlock_.setDragging(!1),this.draggedConnectionManager_.applyConnections(),this.draggingBlock_.render(),this.fireMoveEvent_(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),this.workspace_.toolbox_&&this.workspace_.toolbox_.removeDeleteStyle(),Blockly.Events.setGroup(!1)},Blockly.BlockDragger.prototype.fireMoveEvent_=function(){var t=new Blockly.Events.BlockMove(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),Blockly.Events.fire(t)},Blockly.BlockDragger.prototype.maybeDeleteBlock_=function(){var t=this.workspace_.trashcan;return this.wouldDeleteBlock_?(t&&goog.Timer.callOnce(t.close,100,t),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0)):t&&t.close(),this.wouldDeleteBlock_},Blockly.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var t=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==Blockly.DELETE_AREA_TRASH&&t&&t.setOpen_(!0)):(this.draggingBlock_.setDeleteStyle(!1),t&&t.setOpen_(!1))},Blockly.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new goog.math.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&(t=t.scale(1/this.workspace_.options.parentWorkspace.scale)),t},Blockly.BlockDragger.prototype.dragIcons_=function(t){for(var e=0;e<this.dragIconData_.length;e++){var o=this.dragIconData_[e];o.icon.setIconLocation(goog.math.Coordinate.sum(o.location,t))}},Blockly.WorkspaceDragger=function(t){this.workspace_=t,this.startDragMetrics_=t.getMetrics(),this.startScrollXY_=new goog.math.Coordinate(t.scrollX,t.scrollY)},Blockly.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},Blockly.WorkspaceDragger.prototype.startDrag=function(){Blockly.selected&&Blockly.selected.unselect(),this.workspace_.setupDragSurface()},Blockly.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},Blockly.WorkspaceDragger.prototype.drag=function(t){var e=this.startDragMetrics_,o=goog.math.Coordinate.sum(this.startScrollXY_,t);t=Math.min(o.x,-e.contentLeft),o=Math.min(o.y,-e.contentTop),t=Math.max(t,e.viewWidth-e.contentLeft-e.contentWidth),o=Math.max(o,e.viewHeight-e.contentTop-e.contentHeight),t=-t-e.contentLeft,o=-o-e.contentTop,this.updateScroll_(t,o)},Blockly.WorkspaceDragger.prototype.updateScroll_=function(t,e){this.workspace_.scrollbar.set(t,e)},Blockly.FlyoutDragger=function(t){Blockly.FlyoutDragger.superClass_.constructor.call(this,t.getWorkspace()),this.scrollbar_=t.scrollbar_,this.horizontalLayout_=t.horizontalLayout_},goog.inherits(Blockly.FlyoutDragger,Blockly.WorkspaceDragger),Blockly.FlyoutDragger.prototype.updateScroll_=function(t,e){this.horizontalLayout_?this.scrollbar_.set(t):this.scrollbar_.set(e)},Blockly.Tooltip={},Blockly.Tooltip.visible=!1,Blockly.Tooltip.blocked_=!1,Blockly.Tooltip.LIMIT=50,Blockly.Tooltip.mouseOutPid_=0,Blockly.Tooltip.showPid_=0,Blockly.Tooltip.lastX_=0,Blockly.Tooltip.lastY_=0,Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.OFFSET_X=0,Blockly.Tooltip.OFFSET_Y=10,Blockly.Tooltip.RADIUS_OK=10,Blockly.Tooltip.HOVER_MS=750,Blockly.Tooltip.MARGINS=5,Blockly.Tooltip.DIV=null,Blockly.Tooltip.createDom=function(){Blockly.Tooltip.DIV||(Blockly.Tooltip.DIV=goog.dom.createDom("DIV","blocklyTooltipDiv"),document.body.appendChild(Blockly.Tooltip.DIV))},Blockly.Tooltip.bindMouseEvents=function(t){Blockly.bindEvent_(t,"mouseover",null,Blockly.Tooltip.onMouseOver_),Blockly.bindEvent_(t,"mouseout",null,Blockly.Tooltip.onMouseOut_),t.addEventListener("mousemove",Blockly.Tooltip.onMouseMove_,!1)},Blockly.Tooltip.onMouseOver_=function(t){if(!Blockly.Tooltip.blocked_){for(t=t.target;!goog.isString(t.tooltip)&&!goog.isFunction(t.tooltip);)t=t.tooltip;Blockly.Tooltip.element_!=t&&(Blockly.Tooltip.hide(),Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.element_=t),clearTimeout(Blockly.Tooltip.mouseOutPid_)}},Blockly.Tooltip.onMouseOut_=function(){Blockly.Tooltip.blocked_||(Blockly.Tooltip.mouseOutPid_=setTimeout(function(){Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.hide()},1),clearTimeout(Blockly.Tooltip.showPid_))},Blockly.Tooltip.onMouseMove_=function(t){if(Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&!Blockly.WidgetDiv.isVisible()&&!Blockly.Tooltip.blocked_)if(Blockly.Tooltip.visible){var e=Blockly.Tooltip.lastX_-t.pageX;t=Blockly.Tooltip.lastY_-t.pageY,Math.sqrt(e*e+t*t)>Blockly.Tooltip.RADIUS_OK&&Blockly.Tooltip.hide()}else Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=t.pageX,Blockly.Tooltip.lastY_=t.pageY,Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.HOVER_MS))},Blockly.Tooltip.hide=function(){Blockly.Tooltip.visible&&(Blockly.Tooltip.visible=!1,Blockly.Tooltip.DIV&&(Blockly.Tooltip.DIV.style.display="none")),clearTimeout(Blockly.Tooltip.showPid_)},Blockly.Tooltip.block=function(){Blockly.Tooltip.hide(),Blockly.Tooltip.blocked_=!0},Blockly.Tooltip.unblock=function(){Blockly.Tooltip.blocked_=!1},Blockly.Tooltip.show_=function(){if(!Blockly.Tooltip.blocked_&&(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.DIV)){goog.dom.removeChildren(Blockly.Tooltip.DIV);for(var t=Blockly.Tooltip.element_.tooltip;goog.isFunction(t);)t=t();t=Blockly.utils.wrap(t,Blockly.Tooltip.LIMIT),t=t.split("\n");for(var e=0;e<t.length;e++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[e])),Blockly.Tooltip.DIV.appendChild(o)}t=Blockly.Tooltip.element_.RTL,e=goog.dom.getViewportSize(),Blockly.Tooltip.DIV.style.direction=t?"rtl":"ltr",Blockly.Tooltip.DIV.style.display="block",Blockly.Tooltip.visible=!0,o=Blockly.Tooltip.lastX_,o=t?o-(Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth):o+Blockly.Tooltip.OFFSET_X;var n=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;n+Blockly.Tooltip.DIV.offsetHeight>e.height+window.scrollY&&(n-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),t?o=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,o):o+Blockly.Tooltip.DIV.offsetWidth>e.width+window.scrollX-2*Blockly.Tooltip.MARGINS&&(o=e.width-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS),Blockly.Tooltip.DIV.style.top=n+"px",Blockly.Tooltip.DIV.style.left=o+"px"}},Blockly.Gesture=function(t,e){this.mouseDownXY_=null,this.currentDragDeltaXY_=new goog.math.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=null,this.creatorWorkspace_=e,this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1},Blockly.Gesture.prototype.dispose=function(){Blockly.Touch.clearTouchIdentifier(),Blockly.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&Blockly.unbindEvent_(this.onMoveWrapper_),this.onUpWrapper_&&Blockly.unbindEvent_(this.onUpWrapper_),this.flyout_=this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=null,this.blockDragger_&&(this.blockDragger_.dispose(),this.blockDragger_=null),this.workspaceDragger_&&(this.workspaceDragger_.dispose(),this.workspaceDragger_=null)},Blockly.Gesture.prototype.updateFromEvent_=function(t){var e=new goog.math.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(e)&&(this.updateIsDragging_(),Blockly.longStop_()),this.mostRecentEvent_=t},Blockly.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=goog.math.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=goog.math.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?Blockly.FLYOUT_DRAG_RADIUS:Blockly.DRAG_RADIUS))},Blockly.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!this.targetBlock_.disabled&&(!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))&&(this.startWorkspace_=this.flyout_.targetWorkspace_,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0))},Blockly.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},Blockly.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new Blockly.FlyoutDragger(this.flyout_):new Blockly.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},Blockly.Gesture.prototype.updateIsDragging_=function(){goog.asserts.assert(!this.calledUpdateIsDragging_,"updateIsDragging_ should only be called once per gesture."),this.calledUpdateIsDragging_=!0,this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},Blockly.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new Blockly.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},Blockly.Gesture.prototype.doStart=function(t){Blockly.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,Blockly.BlockSvg.disconnectUiStop_(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,Blockly.hideChaff(!!this.flyout_),Blockly.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),Blockly.utils.isRightButton(t)?this.handleRightClick(t):(goog.string.caseInsensitiveEquals(t.type,"touchstart")&&Blockly.longStart_(t,this),this.mouseDownXY_=new goog.math.Coordinate(t.clientX,t.clientY),this.onMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()))},Blockly.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_&&this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},Blockly.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),Blockly.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBlock_?this.blockDragger_.endBlockDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(),t.preventDefault(),t.stopPropagation(),this.dispose())},Blockly.Gesture.prototype.cancel=function(){this.isEnding_||(Blockly.longStop_(),this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},Blockly.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),Blockly.hideChaff(this.flyout_),this.targetBlock_.showContextMenu_(t)):this.startWorkspace_&&!this.flyout_&&(Blockly.hideChaff(),this.startWorkspace_.showContextMenu_(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},Blockly.Gesture.prototype.handleWsStart=function(t,e){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.handleWsStart, but the gesture had already been started."),this.setStartWorkspace_(e),this.mostRecentEvent_=t,this.doStart(t)},Blockly.Gesture.prototype.handleFlyoutStart=function(t,e){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.handleFlyoutStart, but the gesture had already been started."),this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},Blockly.Gesture.prototype.handleBlockStart=function(t,e){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.handleBlockStart, but the gesture had already been started."),this.setStartBlock(e),this.mostRecentEvent_=t},Blockly.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor_(),this.bringBlockToFront_()},Blockly.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.disabled||(Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else if(!Blockly.WidgetDiv.isVisible()&&!Blockly.DropDownDiv.isVisible()){Blockly.Events.fire(new Blockly.Events.Ui(this.startBlock_,"click",void 0,void 0));var t=this.startBlock_.getRootBlock();Blockly.Events.fire(new Blockly.Events.Ui(t,"stackclick",void 0,void 0))}this.bringBlockToFront_(),Blockly.Events.setGroup(!1)},Blockly.Gesture.prototype.doWorkspaceClick_=function(){Blockly.selected&&Blockly.selected.unselect()},Blockly.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},Blockly.Gesture.prototype.setStartField=function(t){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.setStartField, but the gesture had already been started."),this.startField_||(this.startField_=t)},Blockly.Gesture.prototype.setStartBlock=function(t){this.startBlock_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},Blockly.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},Blockly.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},Blockly.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},Blockly.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},Blockly.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isCurrentlyEditable()&&!this.hasExceededDragRadius_},Blockly.Gesture.prototype.isWorkspaceClick_=function(){return!this.startBlock_&&!this.startField_&&!this.hasExceededDragRadius_},Blockly.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_},Blockly.Gesture.prototype.hasStarted=function(){return this.hasStarted_},Blockly.Gesture.prototype.forceStartBlockDrag=function(t,e){this.handleBlockStart(t,e),this.handleWsStart(t,e.workspace),this.hasExceededDragRadius_=this.isDraggingBlock_=!0,this.startDraggingBlock_()},Blockly.utils={},Blockly.utils.removeAttribute=function(t,e){goog.userAgent.IE&&goog.userAgent.isVersion("10.0")?t.setAttribute(e,null):t.removeAttribute(e)},Blockly.utils.addClass=function(t,e){var o=t.getAttribute("class")||"";return-1==(" "+o+" ").indexOf(" "+e+" ")&&(o&&(o+=" "),t.setAttribute("class",o+e),!0)},Blockly.utils.removeClass=function(t,e){var o=t.getAttribute("class");if(-1==(" "+o+" ").indexOf(" "+e+" "))return!1;o=o.split(/\s+/);for(var n=0;n<o.length;n++)o[n]&&o[n]!=e||(o.splice(n,1),n--);return o.length?t.setAttribute("class",o.join(" ")):Blockly.utils.removeAttribute(t,"class"),!0},Blockly.utils.hasClass=function(t,e){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")},Blockly.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},Blockly.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable},Blockly.utils.getRelativeXY=function(t){var e=new goog.math.Coordinate(0,0),o=t.getAttribute("x");return o&&(e.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(e.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(Blockly.utils.getRelativeXY.XY_REGEX_))&&(e.x+=parseFloat(o[1]),o[3]&&(e.y+=parseFloat(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&((o=t.match(Blockly.utils.getRelativeXY.XY_2D_REGEX_))||(o=t.match(Blockly.utils.getRelativeXY.XY_3D_REGEX_)),o&&(e.x+=parseFloat(o[1]),o[3]&&(e.y+=parseFloat(o[3])))),e},Blockly.utils.getInjectionDivXY_=function(t){for(var e,o=0,n=0;t;){var r=Blockly.utils.getRelativeXY(t);if(e=Blockly.utils.getScale_(t),o=o*e+r.x,n=n*e+r.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new goog.math.Coordinate(o,n)},Blockly.utils.getScale_=function(t){var e=1;return(t=t.getAttribute("transform"))&&(t=t.match(Blockly.utils.getScale_.REGEXP_))&&t[0]&&(e=parseFloat(t[0])),e},Blockly.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*\))?/,Blockly.utils.getScale_REGEXP_=/scale\(\s*([-+\d.e]+)\s*\)/,Blockly.utils.getRelativeXY.XY_3D_REGEX_=/transform:\s*translate3d\(\s*([-+\d.e]+)px([ ,]\s*([-+\d.e]+)\s*)px([ ,]\s*([-+\d.e]+)\s*)px\)?/,Blockly.utils.getRelativeXY.XY_2D_REGEX_=/transform:\s*translate\(\s*([-+\d.e]+)px([ ,]\s*([-+\d.e]+)\s*)px\)?/,Blockly.utils.createSvgElement=function(t,e,o){t=document.createElementNS(Blockly.SVG_NS,t);for(var n in e)t.setAttribute(n,e[n]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},Blockly.utils.isRightButton=function(t){return!(!t.ctrlKey||!goog.userAgent.MAC)||2==t.button},Blockly.utils.mouseToSvg=function(t,e,o){var n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,o||(o=e.getScreenCTM().inverse()),n.matrixTransform(o)},Blockly.utils.shortestStringLength=function(t){return t.length?t.reduce(function(t,e){return t.length<e.length?t:e}).length:0},Blockly.utils.commonWordPrefix=function(t,e){if(!t.length)return 0;if(1==t.length)return t[0].length;for(var o=0,n=e||Blockly.utils.shortestStringLength(t),r=0;r<n;r++){for(var i=t[0][r],s=1;s<t.length;s++)if(i!=t[s][r])return o;" "==i&&(o=r+1)}for(s=1;s<t.length;s++)if((i=t[s][r])&&" "!=i)return o;return n},Blockly.utils.commonWordSuffix=function(t,e){if(!t.length)return 0;if(1==t.length)return t[0].length;for(var o=0,n=e||Blockly.utils.shortestStringLength(t),r=0;r<n;r++){for(var i=t[0].substr(-r-1,1),s=1;s<t.length;s++)if(i!=t[s].substr(-r-1,1))return o;" "==i&&(o=r+1)}for(s=1;s<t.length;s++)if((i=t[s].charAt(t[s].length-r-1))&&" "!=i)return o;return n},Blockly.utils.tokenizeInterpolation=function(t){return Blockly.utils.tokenizeInterpolation_(t,!0)},Blockly.utils.replaceMessageReferences=function(t){return goog.isString(t)?(t=Blockly.utils.tokenizeInterpolation_(t,!1),t.length?t[0]:""):t},Blockly.utils.checkMessageReferences=function(t){for(var e=!0,o=/%{BKY_([a-zA-Z][a-zA-Z0-9_]*)}/g,n=o.exec(t);null!=n;){var r=n[1];null==Blockly.Msg[r]&&(console.log("WARNING: No message string for %{BKY_"+r+"}."),e=!1),t=t.substring(n.index+r.length+1),n=o.exec(t)}return e},Blockly.utils.tokenizeInterpolation_=function(t,e){var o=[],n=t.split("");n.push("");for(var r=0,i=[],s=null,a=0;a<n.length;a++){var l=n[a];0==r?"%"==l?((l=i.join(""))&&o.push(l),i.length=0,r=1):i.push(l):1==r?"%"==l?(i.push(l),r=0):e&&"0"<=l&&"9">=l?(r=2,s=l,(l=i.join(""))&&o.push(l),i.length=0):"{"==l?r=3:(i.push("%",l),r=0):2==r?"0"<=l&&"9">=l?s+=l:(o.push(parseInt(s,10)),a--,r=0):3==r&&(""==l?(i.splice(0,0,"%{"),a--,r=0):"}"!=l?i.push(l):(l=i.join(""),/[a-zA-Z][a-zA-Z0-9_]*/.test(l)?(r=l.toUpperCase(),(r=goog.string.startsWith(r,"BKY_")?r.substring(4):null)&&r in Blockly.Msg?(l=Blockly.Msg[r],goog.isString(l)?Array.prototype.push.apply(o,Blockly.utils.tokenizeInterpolation(l)):e?o.push(String(l)):o.push(l)):o.push("%{"+l+"}")):o.push("%{"+l+"}"),r=i.length=0))}for((l=i.join(""))&&o.push(l),n=[],a=i.length=0;a<o.length;++a)"string"==typeof o[a]?i.push(o[a]):((l=i.join(""))&&n.push(l),i.length=0,n.push(o[a]));return(l=i.join(""))&&n.push(l),i.length=0,n},Blockly.utils.genUid=function(){for(var t=Blockly.utils.genUid.soup_.length,e=[],o=0;20>o;o++)e[o]=Blockly.utils.genUid.soup_.charAt(Math.random()*t);return e.join("")},Blockly.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Blockly.utils.wrap=function(t,e){for(var o=t.split("\n"),n=0;n<o.length;n++)o[n]=Blockly.utils.wrapLine_(o[n],e);return o.join("\n")},Blockly.utils.wrapLine_=function(t,e){if(t.length<=e)return t;for(var o=t.trim().split(/\s+/),n=0;n<o.length;n++)o[n].length>e&&(e=o[n].length);n=-1/0;var r=1;do{var i=n,s=t,a=[],l=o.length/r,c=1;for(n=0;n<o.length-1;n++)c<(n+1.5)/l?(c++,a[n]=!0):a[n]=!1;a=Blockly.utils.wrapMutate_(o,a,e),n=Blockly.utils.wrapScore_(o,a,e),t=Blockly.utils.wrapToText_(o,a),r++}while(n>i);return s},Blockly.utils.wrapScore_=function(t,e,o){for(var n=[0],r=[],i=0;i<t.length;i++)n[n.length-1]+=t[i].length,!0===e[i]?(n.push(0),r.push(t[i].charAt(t[i].length-1))):!1===e[i]&&n[n.length-1]++;for(t=Math.max.apply(Math,n),i=e=0;i<n.length;i++)e-=2*Math.pow(Math.abs(o-n[i]),1.5),e-=Math.pow(t-n[i],1.5),-1!=".?!".indexOf(r[i])?e+=o/3:-1!=",;)]}".indexOf(r[i])&&(e+=o/4);return 1<n.length&&n[n.length-1]<=n[n.length-2]&&(e+=.5),e},Blockly.utils.wrapMutate_=function(t,e,o){for(var n,r=Blockly.utils.wrapScore_(t,e,o),i=0;i<e.length-1;i++)if(e[i]!=e[i+1]){var s=[].concat(e);s[i]=!s[i],s[i+1]=!s[i+1];var a=Blockly.utils.wrapScore_(t,s,o);a>r&&(r=a,n=s)}return n?Blockly.utils.wrapMutate_(t,n,o):e},Blockly.utils.wrapToText_=function(t,e){for(var o=[],n=0;n<t.length;n++)o.push(t[n]),void 0!==e[n]&&o.push(e[n]?"\n":" ");return o.join("")},Blockly.utils.measureText=function(t,e,o,n){var r=document.createElement("canvas").getContext("2d");return r.font=o+" "+t+" "+e,r.measureText(n).width},Blockly.utils.encodeEntities=function(t){return t.replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"})},Blockly.utils.is3dSupported=function(){if(void 0!==Blockly.utils.is3dSupported.cached_)return Blockly.utils.is3dSupported.cached_;if(!goog.global.getComputedStyle)return!1;var t=document.createElement("p"),e="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(t,null);for(var n in o)if(void 0!==t.style[n]){if(t.style[n]="translate3d(1px,1px,1px)",!(e=goog.global.getComputedStyle(t)))return document.body.removeChild(t),!1;e=e.getPropertyValue(o[n])}return document.body.removeChild(t),Blockly.utils.is3dSupported.cached_="none"!==e,Blockly.utils.is3dSupported.cached_},Blockly.utils.insertAfter_=function(t,e){var o=e.nextSibling,n=e.parentNode;if(!n)throw"Reference node has no parent.";o?n.insertBefore(t,o):n.appendChild(t)},Blockly.utils.runAfterPageLoad=function(t){if(!document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"===document.readyState)t();else var e=setInterval(function(){"complete"===document.readyState&&(clearInterval(e),t())},10)},Blockly.utils.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},Blockly.utils.changeObscuredShadowIds=function(t){t=t.getDescendants();for(var e=t.length-1;0<=e;e--)for(var o=t[e],n=0;n<o.inputList.length;n++){var r=o.inputList[n].connection;if(r){var i=r.getShadowDom();i&&(i.setAttribute("id",Blockly.utils.genUid()),r.setShadowDom(i))}}},Blockly.Grid=function(t,e){this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap},Blockly.Grid.prototype.scale_=1,Blockly.Grid.prototype.dispose=function(){this.gridPattern_=null},Blockly.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},Blockly.Grid.prototype.getSpacing=function(){return this.spacing_},Blockly.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},Blockly.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e),e=Math.floor(this.spacing_/2)+.5;var o=e-this.length_/2,n=e+this.length_/2;e*=t,o*=t,n*=t,this.setLineAttributes_(this.line1_,t,o,n,e,e),this.setLineAttributes_(this.line2_,t,e,e,o,n)},Blockly.Grid.prototype.setLineAttributes_=function(t,e,o,n,r,i){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",o),t.setAttribute("y1",r),t.setAttribute("x2",n),t.setAttribute("y2",i))},Blockly.Grid.prototype.moveTo=function(t,e){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",e),(goog.userAgent.IE||goog.userAgent.EDGE)&&this.update(this.scale_)},Blockly.Grid.createDom=function(t,e,o){return t=Blockly.utils.createSvgElement("pattern",{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<e.length&&0<e.spacing&&(Blockly.utils.createSvgElement("line",{stroke:e.colour},t),1<e.length&&Blockly.utils.createSvgElement("line",{stroke:e.colour},t)),t},Blockly.Options=function(t){var e,o,n,r,i,s=!!t.readOnly;if(s)var a=null,l=e=o=n=r=i=!1;else t.toolbox||(l=(new DOMParser).parseFromString(Blockly.Blocks.defaultToolbox,"text/xml"),t.toolbox=l.documentElement),a=Blockly.Options.parseToolboxTree(t.toolbox),i=!(!a||!a.getElementsByTagName("category").length),r=t.trashcan,void 0===r&&(r=!1),n=t.collapse,void 0===n&&(n=i),o=t.comments,void 0===o&&(o=i),e=t.disable,void 0===e&&(e=i),void 0===(l=t.sounds)&&(l=!0);var c=!!t.rtl,u=t.horizontalLayout;void 0===u&&(u=!1);var g=t.toolboxPosition;g="end"!==g;var h=u?g?Blockly.TOOLBOX_AT_TOP:Blockly.TOOLBOX_AT_BOTTOM:g==c?Blockly.TOOLBOX_AT_RIGHT:Blockly.TOOLBOX_AT_LEFT,p=t.scrollbars;void 0===p&&(p=i);var d=t.css;void 0===d&&(d=!0);var f="https://blockly-demo.appspot.com/static/media/";t.media?f=t.media:t.path&&(f=t.path+"media/"),g=void 0===t.oneBasedIndex||!!t.oneBasedIndex;var m=!!t.realtime,y=m?t.realtimeOptions:void 0,v=t.colours;if(v)for(var _ in v)v.hasOwnProperty(_)&&Blockly.Colours.hasOwnProperty(_)&&(Blockly.Colours[_]=v[_]);this.RTL=c,this.oneBasedIndex=g,this.collapse=n,this.comments=o,this.disable=e,this.readOnly=s,this.pathToMedia=f,this.hasCategories=i,this.hasScrollbars=p,this.hasTrashcan=r,this.hasSounds=l,this.hasCss=d,this.horizontalLayout=u,this.languageTree=a,this.gridOptions=Blockly.Options.parseGridOptions_(t),this.zoomOptions=Blockly.Options.parseZoomOptions_(t),this.enableRealtime=m,this.realtimeOptions=y,this.toolboxPosition=h},Blockly.Options.prototype.parentWorkspace=null,Blockly.Options.prototype.setMetrics=null,Blockly.Options.prototype.getMetrics=null,Blockly.Options.parseZoomOptions_=function(t){t=t.zoom||{};var e={};return e.controls=void 0!==t.controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:parseFloat(t.startScale),e.maxScale=void 0===t.maxScale?3:parseFloat(t.maxScale),e.minScale=void 0===t.minScale?.3:parseFloat(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:parseFloat(t.scaleSpeed),e},Blockly.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=parseFloat(t.spacing)||0,e.colour=t.colour||"#888",e.length=parseFloat(t.length)||1,e.snap=0<e.spacing&&!!t.snap,e},Blockly.Options.parseToolboxTree=function(t){return t?("string"!=typeof t&&("undefined"==typeof XSLTProcessor&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&(t=Blockly.Xml.textToDom(t))):t=null,t},Blockly.ScrollbarPair=function(t){this.workspace_=t,this.hScroll=new Blockly.Scrollbar(t,!0,!0,"blocklyMainWorkspaceScrollbar"),this.vScroll=new Blockly.Scrollbar(t,!1,!0,"blocklyMainWorkspaceScrollbar"),this.corner_=Blockly.utils.createSvgElement("rect",{height:Blockly.Scrollbar.scrollbarThickness,width:Blockly.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),Blockly.utils.insertAfter_(this.corner_,t.getBubbleCanvas())},Blockly.ScrollbarPair.prototype.oldHostMetrics_=null,Blockly.ScrollbarPair.prototype.dispose=function(){goog.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll.dispose(),this.hScroll=null,this.vScroll.dispose(),this.vScroll=null},Blockly.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var e=!1,o=!1;this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==t.contentWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.contentLeft==t.contentLeft||(e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==t.contentHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.contentTop==t.contentTop||(o=!0)):o=e=!0,e&&this.hScroll.resize(t),o&&this.vScroll.resize(t),this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position_.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position_.y),this.oldHostMetrics_=t}},Blockly.ScrollbarPair.prototype.set=function(t,e){var o={},n=t*this.hScroll.ratio_,r=e*this.vScroll.ratio_,i=this.vScroll.scrollViewSize_;o.x=this.getRatio_(n,this.hScroll.scrollViewSize_),o.y=this.getRatio_(r,i),this.workspace_.setMetrics(o),this.hScroll.setHandlePosition(n),this.vScroll.setHandlePosition(r)},Blockly.ScrollbarPair.prototype.getRatio_=function(t,e){var o=t/e;return isNaN(o)?0:o},Blockly.Scrollbar=function(t,e,o,n){this.workspace_=t,this.pair_=o||!1,this.horizontal_=e,this.oldHostMetrics_=null,this.createDom_(n),this.position_=new goog.math.Coordinate(0,0),e?(this.svgBackground_.setAttribute("height",Blockly.Scrollbar.scrollbarThickness),this.outerSvg_.setAttribute("height",Blockly.Scrollbar.scrollbarThickness),this.svgHandle_.setAttribute("height",Blockly.Scrollbar.scrollbarThickness-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",Blockly.Scrollbar.scrollbarThickness),this.outerSvg_.setAttribute("width",Blockly.Scrollbar.scrollbarThickness),this.svgHandle_.setAttribute("width",Blockly.Scrollbar.scrollbarThickness-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Blockly.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=Blockly.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},Blockly.Scrollbar.prototype.origin_=new goog.math.Coordinate(0,0),Blockly.Scrollbar.prototype.originHasChanged_=!0,Blockly.Scrollbar.prototype.scrollViewSize_=0,Blockly.Scrollbar.prototype.handleLength_=0,Blockly.Scrollbar.prototype.handlePosition_=0,Blockly.Scrollbar.prototype.isVisible_=!0,Blockly.Scrollbar.prototype.containerVisible_=!0,Blockly.Scrollbar.scrollbarThickness=11,goog.events.BrowserFeature.TOUCH_ENABLED&&(Blockly.Scrollbar.scrollbarThickness=25),Blockly.Scrollbar.metricsAreEquivalent_=function(t,e){return!(!t||!e||t.viewWidth!=e.viewWidth||t.viewHeight!=e.viewHeight||t.viewLeft!=e.viewLeft||t.viewTop!=e.viewTop||t.absoluteTop!=e.absoluteTop||t.absoluteLeft!=e.absoluteLeft||t.contentWidth!=e.contentWidth||t.contentHeight!=e.contentHeight||t.contentLeft!=e.contentLeft||t.contentTop!=e.contentTop)},Blockly.Scrollbar.prototype.dispose=function(){this.cleanUp_(),Blockly.unbindEvent_(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,Blockly.unbindEvent_(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,goog.dom.removeNode(this.outerSvg_),this.workspace_=this.svgHandle_=this.svgBackground_=this.svgGroup_=this.outerSvg_=null},Blockly.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},Blockly.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},Blockly.Scrollbar.prototype.setScrollViewSize_=function(t){this.scrollViewSize_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)},Blockly.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll.setContainerVisible(t),this.vScroll.setContainerVisible(t)},Blockly.Scrollbar.prototype.setPosition=function(t,e){this.position_.x=t,this.position_.y=e,Blockly.utils.setCssTransform(this.outerSvg_,"translate("+(this.position_.x+this.origin_.x)+"px,"+(this.position_.y+this.origin_.y)+"px)")},Blockly.Scrollbar.prototype.resize=function(t){if(t||(t=this.workspace_.getMetrics())){if(this.originHasChanged_)this.originHasChanged_=!1;else if(Blockly.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_))return;this.oldHostMetrics_=t,this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.onScroll_()}},Blockly.Scrollbar.prototype.resizeHorizontal_=function(t){this.resizeViewHorizontal(t)},Blockly.Scrollbar.prototype.resizeViewHorizontal=function(t){var e=t.viewWidth-1;this.pair_&&(e-=Blockly.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,e)),e=t.absoluteLeft+.5,this.pair_&&this.workspace_.RTL&&(e+=Blockly.Scrollbar.scrollbarThickness),this.setPosition(e,t.absoluteTop+t.viewHeight-Blockly.Scrollbar.scrollbarThickness-.5),this.resizeContentHorizontal(t)},Blockly.Scrollbar.prototype.resizeContentHorizontal=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentWidth),this.ratio_=this.scrollViewSize_/t.contentWidth,(-1/0==this.ratio_||1/0==this.ratio_||isNaN(this.ratio_))&&(this.ratio_=0),this.setHandleLength_(Math.max(0,t.viewWidth*this.ratio_)),this.setHandlePosition(this.constrainHandle_((t.viewLeft-t.contentLeft)*this.ratio_))},Blockly.Scrollbar.prototype.resizeVertical_=function(t){this.resizeViewVertical(t)},Blockly.Scrollbar.prototype.resizeViewVertical=function(t){var e=t.viewHeight-1;this.pair_&&(e-=Blockly.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,e)),e=t.absoluteLeft+.5,this.workspace_.RTL||(e+=t.viewWidth-Blockly.Scrollbar.scrollbarThickness-1),this.setPosition(e,t.absoluteTop+.5),this.resizeContentVertical(t)},Blockly.Scrollbar.prototype.resizeContentVertical=function(t){this.pair_||this.setVisible(this.scrollViewSize_<t.contentHeight),this.ratio_=this.scrollViewSize_/t.contentHeight,(-1/0==this.ratio_||1/0==this.ratio_||isNaN(this.ratio_))&&(this.ratio_=0),this.setHandleLength_(Math.max(0,t.viewHeight*this.ratio_)),this.setHandlePosition(this.constrainHandle_((t.viewTop-t.contentTop)*this.ratio_))},Blockly.Scrollbar.prototype.createDom_=function(t){var e="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(e+=" "+t),this.outerSvg_=Blockly.utils.createSvgElement("svg",{class:e},null),this.svgGroup_=Blockly.utils.createSvgElement("g",{},this.outerSvg_),this.svgBackground_=Blockly.utils.createSvgElement("rect",{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((Blockly.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=Blockly.utils.createSvgElement("rect",{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),Blockly.utils.insertAfter_(this.outerSvg_,this.workspace_.getParentSvg())},Blockly.Scrollbar.prototype.isVisible=function(){return this.isVisible_},Blockly.Scrollbar.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},Blockly.Scrollbar.prototype.setVisible=function(t){var e=t!=this.isVisible();if(this.pair_)throw"Unable to toggle visibility of paired scrollbars.";this.isVisible_=t,e&&this.updateDisplay_()},Blockly.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},Blockly.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_(),Blockly.utils.isRightButton(t))t.stopPropagation();else{var e=Blockly.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());e=this.horizontal_?e.x:e.y;var o=Blockly.utils.getInjectionDivXY_(this.svgHandle_);o=this.horizontal_?o.x:o.y;var n=this.handlePosition_,r=.95*this.handleLength_;e<=o?n-=r:e>=o+this.handleLength_&&(n+=r),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.setHandlePosition(this.constrainHandle_(n)),this.onScroll_(),t.stopPropagation(),t.preventDefault()}},Blockly.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),Blockly.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse=this.horizontal_?t.clientX:t.clientY,Blockly.Scrollbar.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),Blockly.Scrollbar.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),t.stopPropagation(),t.preventDefault())},Blockly.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse))),this.onScroll_()},Blockly.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_()},Blockly.Scrollbar.prototype.cleanUp_=function(){Blockly.hideChaff(!0),Blockly.Scrollbar.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseUpWrapper_),Blockly.Scrollbar.onMouseUpWrapper_=null),Blockly.Scrollbar.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseMoveWrapper_),Blockly.Scrollbar.onMouseMoveWrapper_=null)},Blockly.Scrollbar.prototype.constrainHandle_=function(t){return t=0>=t||isNaN(t)||this.scrollViewSize_<this.handleLength_?0:Math.min(t,this.scrollViewSize_-this.handleLength_)},Blockly.Scrollbar.prototype.onScroll_=function(){var t=this.handlePosition_/this.scrollViewSize_;isNaN(t)&&(t=0);var e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},Blockly.Scrollbar.prototype.set=function(t){this.setHandlePosition(this.constrainHandle_(t*this.ratio_)),this.onScroll_()};Blockly.Scrollbar.prototype.setOrigin=function(t,e){t==this.origin_.x&&e==this.origin_.y||(this.origin_=new goog.math.Coordinate(t,e),this.originHasChanged_=!0)},Blockly.Trashcan=function(t){this.workspace_=t},Blockly.Trashcan.prototype.WIDTH_=47,Blockly.Trashcan.prototype.BODY_HEIGHT_=44,Blockly.Trashcan.prototype.LID_HEIGHT_=16,Blockly.Trashcan.prototype.MARGIN_BOTTOM_=20,Blockly.Trashcan.prototype.MARGIN_SIDE_=20,Blockly.Trashcan.prototype.MARGIN_HOTSPOT_=10,Blockly.Trashcan.prototype.SPRITE_LEFT_=0,Blockly.Trashcan.prototype.SPRITE_TOP_=32,Blockly.Trashcan.prototype.isOpen=!1,Blockly.Trashcan.prototype.svgGroup_=null,Blockly.Trashcan.prototype.svgLid_=null,Blockly.Trashcan.prototype.lidTask_=0,Blockly.Trashcan.prototype.lidOpen_=0,Blockly.Trashcan.prototype.left_=0,Blockly.Trashcan.prototype.top_=0,Blockly.Trashcan.prototype.createDom=function(){this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),e=Blockly.utils.createSvgElement("clipPath",{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);return Blockly.utils.createSvgElement("rect",{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},e),Blockly.utils.createSvgElement("image",{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),e=Blockly.utils.createSvgElement("clipPath",{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),Blockly.utils.createSvgElement("rect",{width:this.WIDTH_,height:this.LID_HEIGHT_},e),this.svgLid_=Blockly.utils.createSvgElement("image",{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),Blockly.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.click),this.animateLid_(),this.svgGroup_},Blockly.Trashcan.prototype.init=function(t){return this.bottom_=this.MARGIN_BOTTOM_+t,this.setOpen_(!1),this.bottom_+this.BODY_HEIGHT_+this.LID_HEIGHT_},Blockly.Trashcan.prototype.dispose=function(){this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},Blockly.Trashcan.prototype.position=function(){var t=this.workspace_.getMetrics();t&&(this.workspace_.RTL?(this.left_=this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,t.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(this.left_+=t.flyoutWidth,this.workspace_.toolbox_&&(this.left_+=t.absoluteLeft))):(this.left_=t.viewWidth+t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness,t.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT&&(this.left_-=t.flyoutWidth)),this.top_=t.viewHeight+t.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.bottom_,t.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM&&(this.top_-=t.flyoutHeight),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))},Blockly.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect();return new goog.math.Rect(t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_,this.WIDTH_+2*this.MARGIN_HOTSPOT_,this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_)},Blockly.Trashcan.prototype.setOpen_=function(t){this.isOpen!=t&&(clearTimeout(this.lidTask_),this.isOpen=t,this.animateLid_())},Blockly.Trashcan.prototype.animateLid_=function(){this.lidOpen_+=this.isOpen?.2:-.2,this.lidOpen_=goog.math.clamp(this.lidOpen_,0,1);var t=45*this.lidOpen_;this.svgLid_.setAttribute("transform","rotate("+(this.workspace_.RTL?-t:t)+","+(this.workspace_.RTL?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")"),t=goog.math.lerp(.4,.8,this.lidOpen_),this.svgGroup_.style.opacity=t,0<this.lidOpen_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),20))},Blockly.Trashcan.prototype.close=function(){this.setOpen_(!1)},Blockly.Trashcan.prototype.click=function(){var t=this.workspace_.startScrollX-this.workspace_.scrollX,e=this.workspace_.startScrollY-this.workspace_.scrollY;Math.sqrt(t*t+e*e)>Blockly.DRAG_RADIUS||console.log("TODO: Inspect trash.")},Blockly.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},Blockly.WorkspaceAudio.prototype.lastSound_=null,Blockly.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},Blockly.WorkspaceAudio.prototype.load=function(t,e){if(t.length){try{var o=new window.Audio}catch(t){return}for(var n,r=0;r<t.length;r++){var i=t[r],s=i.match(/\.(\w+)$/);if(s&&o.canPlayType("audio/"+s[1])){n=new window.Audio(i);break}}n&&n.play&&(this.SOUNDS_[e]=n)}},Blockly.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var e=this.SOUNDS_[t];if(e.volume=.01,e.play(),e.pause(),goog.userAgent.IPAD||goog.userAgent.IPHONE)break}},Blockly.WorkspaceAudio.prototype.play=function(t,e){var o=this.SOUNDS_[t];if(o){var n=new Date;null!=this.lastSound_&&n-this.lastSound_<Blockly.SOUND_LIMIT||(this.lastSound_=n,o=goog.userAgent.DOCUMENT_MODE&&9===goog.userAgent.DOCUMENT_MODE||goog.userAgent.IPAD||goog.userAgent.ANDROID?o:o.cloneNode(),o.volume=void 0===e?1:e,o.play())}else this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,e)},Blockly.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},Blockly.WorkspaceDragSurfaceSvg.prototype.SVG_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.dragGroup_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.container_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.createSvgElement("svg",{xmlns:Blockly.SVG_NS,"xmlns:html":Blockly.HTML_NS,"xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",class:"blocklyWsDragSurface"},null),this.container_.appendChild(this.SVG_))},Blockly.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,e){t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",Blockly.utils.setCssTransform(this.SVG_,"translate3d("+t+"px, "+e+"px, 0px)")},Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return Blockly.utils.getRelativeXY(this.SVG_)},Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){var e=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(e&&o&&Blockly.utils.hasClass(e,"blocklyBlockCanvas")&&Blockly.utils.hasClass(o,"blocklyBubbleCanvas")))throw"Couldn't clear and hide the drag surface.  A node was missing.";null!=this.previousSibling_?Blockly.utils.insertAfter_(e,this.previousSibling_):t.insertBefore(e,t.firstChild),Blockly.utils.insertAfter_(o,e),this.SVG_.style.display="none",goog.asserts.assert(0==this.SVG_.childNodes.length,"Drag surface was not cleared."),Blockly.utils.setCssTransform(this.SVG_,""),this.previousSibling_=null},Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,o,n,r,i){goog.asserts.assert(0==this.SVG_.childNodes.length,"Already dragging a block."),this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+i+")"),e.setAttribute("transform","translate(0, 0) scale("+i+")"),this.SVG_.setAttribute("width",n),this.SVG_.setAttribute("height",r),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"},Blockly.Xml={},Blockly.Xml.workspaceToDom=function(t,e){var o=goog.dom.createDom("xml");o.appendChild(Blockly.Xml.variablesToDom(t.getAllVariables()));for(var n,r=t.getTopBlocks(!0),i=0;n=r[i];i++)o.appendChild(Blockly.Xml.blockToDomWithXY(n,e));return o},Blockly.Xml.variablesToDom=function(t){for(var e,o=goog.dom.createDom("variables"),n=0;e=t[n];n++){var r=goog.dom.createDom("variable",null,e.name);r.setAttribute("type",e.type),r.setAttribute("id",e.getId()),o.appendChild(r)}return o},Blockly.Xml.blockToDomWithXY=function(t,e){var o;t.workspace.RTL&&(o=t.workspace.getWidth());var n=Blockly.Xml.blockToDom(t,e),r=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?o-r.x:r.x)),n.setAttribute("y",Math.round(r.y)),n},Blockly.Xml.blockToDom=function(t,e){var o,n=goog.dom.createDom(t.isShadow()?"shadow":"block");if(n.setAttribute("type",t.type),e||n.setAttribute("id",t.id),t.mutationToDom){var r=t.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&n.appendChild(r)}r=0;for(var i;i=t.inputList[r];r++)for(var s,a=0;s=i.fieldRow[a];a++){var l=s;l.name&&l.EDITABLE&&(s=goog.dom.createDom("field",null,l.getValue()),s.setAttribute("name",l.name),(l instanceof Blockly.FieldVariable||l instanceof Blockly.FieldVariableGetter)&&(l=t.workspace.getVariable(l.getValue()))&&(s.setAttribute("id",l.getId()),s.setAttribute("variableType",l.type)),n.appendChild(s))}for((r=t.getCommentText())&&(r=goog.dom.createDom("comment",null,r),"object"==typeof t.comment&&(r.setAttribute("pinned",t.comment.isVisible()),i=t.comment.getBubbleSize(),r.setAttribute("h",i.height),r.setAttribute("w",i.width)),n.appendChild(r)),t.data&&(r=goog.dom.createDom("data",null,t.data),n.appendChild(r)),r=0;i=t.inputList[r];r++)s=!0,i.type!=Blockly.DUMMY_INPUT&&(l=i.connection.targetBlock(),i.type==Blockly.INPUT_VALUE?o=goog.dom.createDom("value"):i.type==Blockly.NEXT_STATEMENT&&(o=goog.dom.createDom("statement")),a=i.connection.getShadowDom(),!a||l&&l.isShadow()||o.appendChild(Blockly.Xml.cloneShadow_(a)),l&&(o.appendChild(Blockly.Xml.blockToDom(l,e)),s=!1),o.setAttribute("name",i.name),s||n.appendChild(o));return t.inputsInlineDefault!=t.inputsInline&&n.setAttribute("inline",t.inputsInline),t.isCollapsed()&&n.setAttribute("collapsed",!0),t.disabled&&n.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||n.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||n.setAttribute("movable",!1),t.isEditable()||n.setAttribute("editable",!1),(r=t.getNextBlock())&&(o=goog.dom.createDom("next",null,Blockly.Xml.blockToDom(r,e)),n.appendChild(o)),a=t.nextConnection&&t.nextConnection.getShadowDom(),!a||r&&r.isShadow()||o.appendChild(Blockly.Xml.cloneShadow_(a)),n},Blockly.Xml.cloneShadow_=function(t){for(var e,o=t=t.cloneNode(!0);o;)if(o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)e=o,o=o.parentNode,3==e.nodeType&&""==e.data.trim()&&o.firstChild!=e&&goog.dom.removeNode(e);o&&(e=o,o=o.nextSibling,3==e.nodeType&&""==e.data.trim()&&goog.dom.removeNode(e))}return t},Blockly.Xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},Blockly.Xml.domToPrettyText=function(t){t=Blockly.Xml.domToText(t).split("<");for(var e="",o=1;o<t.length;o++){var n=t[o];"/"==n[0]&&(e=e.substring(2)),t[o]=e+"<"+n,"/"!=n[0]&&"/>"!=n.slice(-2)&&(e+="  ")}return t=t.join("\n"),t=t.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),t.replace(/^\n/,"")},Blockly.Xml.textToDom=function(t){return(t=(new DOMParser).parseFromString(t,"text/xml"))&&t.firstChild&&"xml"==t.firstChild.nodeName.toLowerCase()&&t.firstChild===t.lastChild||goog.asserts.fail("Blockly.Xml.textToDom did not obtain a valid XML tree."),t.firstChild},Blockly.Xml.domToWorkspace=function(t,e){if(t instanceof Blockly.Workspace){var o=t;t=e,e=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var n;e.RTL&&(n=e.getWidth()),o=[],Blockly.Field.startCache();var r=t.childNodes.length,i=Blockly.Events.getGroup();i||Blockly.Events.setGroup(!0),e.setResizesEnabled&&e.setResizesEnabled(!1);var s=!0;try{for(var a=0;a<r;a++){var l=t.childNodes[a],c=l.nodeName.toLowerCase();if("block"==c||"shadow"==c&&!Blockly.Events.recordUndo){var u=Blockly.Xml.domToBlock(l,e);o.push(u.id);var g=parseInt(l.getAttribute("x"),10),h=parseInt(l.getAttribute("y"),10);isNaN(g)||isNaN(h)||u.moveBy(e.RTL?n-g:g,h),s=!1}else if("shadow"==c)goog.asserts.fail("Shadow block cannot be a top-level block."),s=!1;else if("variables"==c){if(!s)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");Blockly.Xml.domToVariables(l,e),s=!1}}}finally{i||Blockly.Events.setGroup(!1),Blockly.Field.stopCache()}return e.updateVariableStore(!1),e.setResizesEnabled&&e.setResizesEnabled(!0),o},Blockly.Xml.appendDomToWorkspace=function(t,e){if(e.hasOwnProperty("scale")){var o=Blockly.BlockSvg.TAB_WIDTH;try{Blockly.BlockSvg.TAB_WIDTH=0;var n=e.getBlocksBoundingBox()}finally{Blockly.BlockSvg.TAB_WIDTH=o}}if(o=Blockly.Xml.domToWorkspace(t,e),n&&n.height){var r=n.y+n.height,i=n.x,s=1/0,a=1/0;for(n=0;n<o.length;n++){var l=e.getBlockById(o[n]).getRelativeToSurfaceXY();l.y<a&&(a=l.y),l.x<s&&(s=l.x)}r=r-a+Blockly.BlockSvg.SEP_SPACE_Y,i-=s;var c;for(e.RTL&&(c=e.getWidth()),n=0;n<o.length;n++)e.getBlockById(o[n]).moveBy(e.RTL?c-i:i,r)}return o},Blockly.Xml.domToBlock=function(t,e){if(t instanceof Blockly.Workspace){var o=t;t=e,e=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}Blockly.Events.disable();try{var n=Blockly.Xml.domToBlockHeadless_(t,e);if(e.rendered){n.setConnectionsHidden(!0);for(var r=n.getDescendants(),i=r.length-1;0<=i;i--)r[i].initSvg();for(i=r.length-1;0<=i;i--)r[i].render(!1);e.isFlyout?setTimeout(function(){n.workspace&&(goog.userAgent.IE||goog.userAgent.EDGE)&&n.render()},1):setTimeout(function(){n.workspace&&(n.setConnectionsHidden(!1),(goog.userAgent.IE||goog.userAgent.EDGE)&&n.render())},1),n.updateDisabled(),e.resizeContents()}}finally{Blockly.Events.enable()}return Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(n)),n},Blockly.Xml.domToVariables=function(t,e){for(var o,n=0;o=t.children[n];n++){var r=o.getAttribute("type"),i=o.getAttribute("id");if(o=o.textContent,null===r)throw Error("Variable with id, "+i+" is without a type");e.createVariable(o,r,i)}},Blockly.Xml.domToBlockHeadless_=function(t,e){var o=null,n=t.getAttribute("type");goog.asserts.assert(n,"Block type unspecified: %s",t.outerHTML);var r=t.getAttribute("id");o=e.newBlock(n,r);for(var i,s=null,a=0;i=t.childNodes[a];a++)if(3!=i.nodeType){var l=null,c=null;s=0;for(var u;u=i.childNodes[s];s++)1==u.nodeType&&("block"==u.nodeName.toLowerCase()?l=u:"shadow"==u.nodeName.toLowerCase()&&(c=u));switch(!l&&c&&(l=c),s=i.getAttribute("name"),i.nodeName.toLowerCase()){case"mutation":o.domToMutation&&(o.domToMutation(i),o.initSvg&&o.initSvg());break;case"comment":o.setCommentText(i.textContent);var g=i.getAttribute("pinned");g&&!o.isInFlyout&&setTimeout(function(){o.comment&&o.comment.setVisible&&o.comment.setVisible("true"==g)},1),s=parseInt(i.getAttribute("w"),10),i=parseInt(i.getAttribute("h"),10),!isNaN(s)&&!isNaN(i)&&o.comment&&o.comment.setVisible&&o.comment.setBubbleSize(s,i);break;case"data":o.data=i.textContent;break;case"title":case"field":if(l=o.getField(s),c=i.textContent,l instanceof Blockly.FieldVariable||l instanceof Blockly.FieldVariableGetter){u=i.getAttribute("variableType")||"";var h=e.getVariable(c);if(h||(h=e.createVariable(c,u,i.getAttribute(r))),null!==u&&u!==h.type)throw Error("Serialized variable type with id '"+h.getId()+"' had type "+h.type+", and does not match variable field that references it: "+Blockly.Xml.domToText(i)+".")}if(!l){console.warn("Ignoring non-existent field "+s+" in block "+n);break}l.setValue(c);break;case"value":case"statement":if(!(i=o.getInput(s))){console.warn("Ignoring non-existent input "+s+" in block "+n);break}c&&i.connection.setShadowDom(c),l&&(s=Blockly.Xml.domToBlockHeadless_(l,e),s.outputConnection?i.connection.connect(s.outputConnection):s.previousConnection?i.connection.connect(s.previousConnection):goog.asserts.fail("Child block does not have output or previous statement."));break;case"next":c&&o.nextConnection&&o.nextConnection.setShadowDom(c),l&&(goog.asserts.assert(o.nextConnection,"Next statement does not exist."),goog.asserts.assert(!o.nextConnection.isConnected(),"Next statement is already connected."),s=Blockly.Xml.domToBlockHeadless_(l,e),goog.asserts.assert(s.previousConnection,"Next block does not have previous statement."),o.nextConnection.connect(s.previousConnection));break;default:console.warn("Ignoring unknown tag: "+i.nodeName)}}if((a=t.getAttribute("inline"))&&o.setInputsInline("true"==a),(a=t.getAttribute("disabled"))&&o.setDisabled("true"==a),(a=t.getAttribute("deletable"))&&o.setDeletable("true"==a),(a=t.getAttribute("movable"))&&o.setMovable("true"==a),(a=t.getAttribute("editable"))&&o.setEditable("true"==a),(a=t.getAttribute("collapsed"))&&o.setCollapsed("true"==a),"shadow"==t.nodeName.toLowerCase()){for(n=o.getChildren(),a=0;r=n[a];a++)goog.asserts.assert(r.isShadow(),"Shadow block not allowed non-shadow child.");goog.asserts.assert(0==o.getVars().length,"Shadow blocks cannot have variable fields."),o.setShadow(!0)}return o},Blockly.Xml.deleteNext=function(t){for(var e,o=0;e=t.childNodes[o];o++)if("next"==e.nodeName.toLowerCase()){t.removeChild(e);break}},goog.global.Blockly||(goog.global.Blockly={}),goog.global.Blockly.Xml||(goog.global.Blockly.Xml={}),goog.global.Blockly.Xml.domToText=Blockly.Xml.domToText,goog.global.Blockly.Xml.domToWorkspace=Blockly.Xml.domToWorkspace,goog.global.Blockly.Xml.textToDom=Blockly.Xml.textToDom,goog.global.Blockly.Xml.workspaceToDom=Blockly.Xml.workspaceToDom,Blockly.ZoomControls=function(t){this.workspace_=t},Blockly.ZoomControls.prototype.ZOOM_IN_PATH_="zoom-in.svg",Blockly.ZoomControls.prototype.ZOOM_OUT_PATH_="zoom-out.svg",Blockly.ZoomControls.prototype.ZOOM_RESET_PATH_="zoom-reset.svg",Blockly.ZoomControls.prototype.WIDTH_=36,Blockly.ZoomControls.prototype.HEIGHT_=124,Blockly.ZoomControls.prototype.MARGIN_BETWEEN_=8,Blockly.ZoomControls.prototype.MARGIN_BOTTOM_=12,Blockly.ZoomControls.prototype.MARGIN_SIDE_=12,Blockly.ZoomControls.prototype.svgGroup_=null,Blockly.ZoomControls.prototype.left_=0,Blockly.ZoomControls.prototype.top_=0,Blockly.ZoomControls.prototype.createDom=function(){var t=this.workspace_;this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyZoom"},null);var e=Blockly.utils.createSvgElement("image",{width:this.WIDTH_,height:this.WIDTH_,y:0},this.svgGroup_);e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.options.pathToMedia+this.ZOOM_IN_PATH_);var o=Blockly.utils.createSvgElement("image",{width:this.WIDTH_,height:this.WIDTH_,y:1*this.WIDTH_+1*this.MARGIN_BETWEEN_},this.svgGroup_);o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.options.pathToMedia+this.ZOOM_OUT_PATH_);var n=Blockly.utils.createSvgElement("image",{width:this.WIDTH_,height:this.WIDTH_,y:2*this.WIDTH_+2*this.MARGIN_BETWEEN_},this.svgGroup_);return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.options.pathToMedia+this.ZOOM_RESET_PATH_),Blockly.bindEventWithChecks_(n,"mousedown",null,function(e){t.markFocused(),t.setScale(t.options.zoomOptions.startScale),t.scrollCenter(),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()}),Blockly.bindEventWithChecks_(e,"mousedown",null,function(e){t.markFocused(),t.zoomCenter(1),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()}),Blockly.bindEventWithChecks_(o,"mousedown",null,function(e){t.markFocused(),t.zoomCenter(-1),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()}),this.svgGroup_},Blockly.ZoomControls.prototype.init=function(t){return this.bottom_=this.MARGIN_BOTTOM_+t,this.bottom_+this.HEIGHT_},Blockly.ZoomControls.prototype.dispose=function(){this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=null},Blockly.ZoomControls.prototype.position=function(){var t=this.workspace_.getMetrics();t&&(this.workspace_.RTL?(this.left_=this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,t.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(this.left_+=t.flyoutWidth,this.workspace_.toolbox_&&(this.left_+=t.absoluteLeft))):(this.left_=t.viewWidth+t.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness,t.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT&&(this.left_-=t.flyoutWidth)),this.top_=t.viewHeight+t.absoluteTop-this.HEIGHT_-this.bottom_,t.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM&&(this.top_-=t.flyoutHeight),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))},Blockly.WorkspaceSvg=function(t,e,o){Blockly.WorkspaceSvg.superClass_.constructor.call(this,t),this.getMetrics=t.getMetrics||Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_,this.setMetrics=t.setMetrics||Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_,Blockly.ConnectionDB.init(this),e&&(this.blockDragSurface_=e),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=this.workspaceDragSurface_&&Blockly.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new Blockly.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new Blockly.Grid(t.gridPattern,t.gridOptions):null,this.registerToolboxCategoryCallback(Blockly.VARIABLE_CATEGORY_NAME,Blockly.DataCategory),this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.flyoutCategory)},goog.inherits(Blockly.WorkspaceSvg,Blockly.Workspace),Blockly.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,Blockly.WorkspaceSvg.prototype.rendered=!0,Blockly.WorkspaceSvg.prototype.isFlyout=!1,Blockly.WorkspaceSvg.prototype.isMutator=!1,Blockly.WorkspaceSvg.prototype.resizesEnabled_=!0,Blockly.WorkspaceSvg.prototype.scrollX=0,Blockly.WorkspaceSvg.prototype.scrollY=0,Blockly.WorkspaceSvg.prototype.startScrollX=0,Blockly.WorkspaceSvg.prototype.startScrollY=0,Blockly.WorkspaceSvg.prototype.dragDeltaXY_=null,Blockly.WorkspaceSvg.prototype.scale=1,Blockly.WorkspaceSvg.prototype.trashcan=null,Blockly.WorkspaceSvg.prototype.scrollbar=null,Blockly.WorkspaceSvg.prototype.currentGesture_=null,Blockly.WorkspaceSvg.prototype.blockDragSurface_=null,Blockly.WorkspaceSvg.prototype.workspaceDragSurface_=null,Blockly.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,Blockly.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,Blockly.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,Blockly.WorkspaceSvg.prototype.injectionDiv_=null,Blockly.WorkspaceSvg.prototype.flyoutButtonCallbacks_={},Blockly.WorkspaceSvg.prototype.toolboxCategoryCallbacks_={},Blockly.WorkspaceSvg.prototype.inverseScreenCTM_=null,Blockly.WorkspaceSvg.prototype.getInverseScreenCTM=function(){return this.inverseScreenCTM_},Blockly.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse())},Blockly.WorkspaceSvg.prototype.getSvgXY=function(t){var e=0,o=0,n=1;(goog.dom.contains(this.getCanvas(),t)||goog.dom.contains(this.getBubbleCanvas(),t))&&(n=this.scale);do{var r=Blockly.utils.getRelativeXY(t);t!=this.getCanvas()&&t!=this.getBubbleCanvas()||(n=1),e+=r.x*n,o+=r.y*n,t=t.parentNode}while(t&&t!=this.getParentSvg());return new goog.math.Coordinate(e,o)},Blockly.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return Blockly.utils.getInjectionDivXY_(this.svgBlockCanvas_)},Blockly.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},Blockly.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},Blockly.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=Blockly.utils.createSvgElement("rect",{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_&&(this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")")),this.svgBlockCanvas_=Blockly.utils.createSvgElement("g",{class:"blocklyBlockCanvas"},this.svgGroup_,this),this.svgBubbleCanvas_=Blockly.utils.createSvgElement("g",{class:"blocklyBubbleCanvas"},this.svgGroup_,this),t=Blockly.Scrollbar.scrollbarThickness,this.options.hasTrashcan&&(t=this.addTrashcan_(t)),this.options.zoomOptions&&this.options.zoomOptions.controls&&this.addZoomControls_(t),this.isFlyout||(Blockly.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_),this.options.zoomOptions&&this.options.zoomOptions.wheel&&Blockly.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new Blockly.Toolbox(this)),this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),this.svgGroup_},Blockly.WorkspaceSvg.prototype.dispose=function(){this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),Blockly.WorkspaceSvg.superClass_.dispose.call(this),this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.toolboxCategoryCallbacks_&&(this.toolboxCategoryCallbacks_=null),this.flyoutButtonCallbacks_&&(this.flyoutButtonCallbacks_=null),this.options.parentWorkspace||goog.dom.removeNode(this.getParentSvg().parentNode),this.resizeHandlerWrapper_&&(Blockly.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},Blockly.WorkspaceSvg.prototype.newBlock=function(t,e){return new Blockly.BlockSvg(this,t,e)},Blockly.WorkspaceSvg.prototype.addTrashcan_=function(t){this.trashcan=new Blockly.Trashcan(this);var e=this.trashcan.createDom();return this.svgGroup_.insertBefore(e,this.svgBlockCanvas_),this.trashcan.init(t)},Blockly.WorkspaceSvg.prototype.addZoomControls_=function(t){this.zoomControls_=new Blockly.ZoomControls(this);var e=this.zoomControls_.createDom();return this.svgGroup_.appendChild(e),this.zoomControls_.init(t)},Blockly.WorkspaceSvg.prototype.addFlyout_=function(t){var e={disabledPatternId:this.options.disabledPatternId,parentWorkspace:this,RTL:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,toolboxPosition:this.options.toolboxPosition};return this.flyout_=this.horizontalLayout?new Blockly.HorizontalFlyout(e):new Blockly.VerticalFlyout(e),this.flyout_.autoClose=!1,this.flyout_.createDom(t)},Blockly.WorkspaceSvg.prototype.getFlyout=function(){return this.flyout_?this.flyout_:this.toolbox_?this.toolbox_.flyout_:null},Blockly.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},Blockly.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},Blockly.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position(),this.trashcan&&this.trashcan.position(),this.zoomControls_&&this.zoomControls_.position(),this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},Blockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=goog.dom.getDocumentScroll();goog.math.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},Blockly.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},Blockly.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},Blockly.WorkspaceSvg.prototype.getParentSvg=function(){if(this.cachedParentSvg_)return this.cachedParentSvg_;for(var t=this.svgGroup_;t;){if("svg"==t.tagName)return this.cachedParentSvg_=t;t=t.parentNode}return null},Blockly.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var o="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale)},Blockly.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}},Blockly.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,e=this.getParentSvg().getAttribute("width"),o=this.getParentSvg().getAttribute("height"),n=Blockly.utils.getRelativeXY(this.svgBlockCanvas_);this.workspaceDragSurface_.setContentsAndShow(this.svgBlockCanvas_,this.svgBubbleCanvas_,t,e,o,this.scale),this.workspaceDragSurface_.translateSurface(n.x,n.y)}},Blockly.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},Blockly.WorkspaceSvg.prototype.setVisible=function(t){this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&(this.toolbox_.HtmlDiv.style.display=t?"block":"none"),t?(this.render(),this.resize()):(Blockly.hideChaff(!0),Blockly.DropDownDiv.hideWithoutAnimation())},Blockly.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(),e=t.length-1;0<=e;e--)t[e].render(!1)},Blockly.WorkspaceSvg.prototype.traceOn=function(){console.warn("Deprecated call to traceOn, delete this.")},Blockly.WorkspaceSvg.prototype.highlightBlock=function(t,e){if(void 0===e){for(var o,n=0;o=this.highlightedBlocks_[n];n++)o.setHighlighted(!1);this.highlightedBlocks_.length=0}(o=t?this.getBlockById(t):null)&&((n=void 0===e||e)?-1==this.highlightedBlocks_.indexOf(o)&&this.highlightedBlocks_.push(o):goog.array.remove(this.highlightedBlocks_,o),o.setHighlighted(n))},Blockly.WorkspaceSvg.prototype.glowBlock=function(t,e){var o=null;if(t&&!(o=this.getBlockById(t)))throw"Tried to glow block that does not exist.";o.setGlowBlock(e)},Blockly.WorkspaceSvg.prototype.glowStack=function(t,e){var o=null;if(t&&!(o=this.getBlockById(t)))throw"Tried to glow stack on block that does not exist.";o.setGlowStack(e)},Blockly.WorkspaceSvg.prototype.reportValue=function(t,e){var o=this.getBlockById(t);if(!o)throw"Tried to report value on block that does not exist.";Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var n=Blockly.DropDownDiv.getContentDiv(),r=goog.dom.createElement("div");r.setAttribute("class","valueReportBox"),r.innerHTML=Blockly.utils.encodeEntities(e),n.appendChild(r),Blockly.DropDownDiv.setColour(Blockly.Colours.valueReportBackground,Blockly.Colours.valueReportBorder),Blockly.DropDownDiv.showPositionedByBlock(this,o)},Blockly.WorkspaceSvg.prototype.paste=function(t){if(this.rendered){this.currentGesture_&&this.currentGesture_.cancel(),Blockly.Events.disable();try{var e=Blockly.Xml.domToBlock(t,this);Blockly.utils.changeObscuredShadowIds(e);for(var o=e.getDescendants(),n=o.length-1;0<=n;n--){var r=o[n];(goog.userAgent.IE||goog.userAgent.EDGE)&&r.render(!1)}var i=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(i)&&!isNaN(s)){this.RTL&&(i=-i);do{var a=!1,l=this.getAllBlocks();n=0;for(var c;c=l[n];n++){var u=c.getRelativeToSurfaceXY();if(1>=Math.abs(i-u.x)&&1>=Math.abs(s-u.y)){a=!0;break}}if(!a){var g=e.getConnections_(!1);n=0;for(var h;h=g[n];n++)if(h.closest(Blockly.SNAP_RADIUS,new goog.math.Coordinate(i,s)).connection){a=!0;break}}a&&(i=this.RTL?i-Blockly.SNAP_RADIUS:i+Blockly.SNAP_RADIUS,s+=2*Blockly.SNAP_RADIUS)}while(a);e.moveBy(i,s)}}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!e.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(e)),e.select()}},Blockly.WorkspaceSvg.prototype.refreshToolboxSelection_=function(){this.toolbox_&&this.toolbox_.flyout_&&!this.currentGesture_&&this.toolbox_.refreshSelection()},Blockly.WorkspaceSvg.prototype.renameVariable=function(t,e){Blockly.WorkspaceSvg.superClass_.renameVariable.call(this,t,e),this.refreshToolboxSelection_()},Blockly.WorkspaceSvg.prototype.renameVariableById=function(t,e){Blockly.WorkspaceSvg.superClass_.renameVariableById.call(this,t,e),this.refreshToolboxSelection_()},Blockly.WorkspaceSvg.prototype.deleteVariable=function(t){Blockly.WorkspaceSvg.superClass_.deleteVariable.call(this,t),this.refreshToolboxSelection_()},Blockly.WorkspaceSvg.prototype.deleteVariableById=function(t){Blockly.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection_()},Blockly.WorkspaceSvg.prototype.createVariable=function(t,e,o){return t=Blockly.WorkspaceSvg.superClass_.createVariable.call(this,t,e,o),this.refreshToolboxSelection_(),t},Blockly.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_?this.toolbox_.getClientRect():null},Blockly.WorkspaceSvg.prototype.isDeleteArea=function(t){return t=new goog.math.Coordinate(t.clientX,t.clientY),this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(t)?Blockly.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(t)?Blockly.DELETE_AREA_TOOLBOX:Blockly.DELETE_AREA_NONE},Blockly.WorkspaceSvg.prototype.onMouseDown_=function(t){var e=this.getGesture(t);e&&e.handleWsStart(t,this)},Blockly.WorkspaceSvg.prototype.startDrag=function(t,e){var o=Blockly.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM());o.x/=this.scale,o.y/=this.scale,this.dragDeltaXY_=goog.math.Coordinate.difference(e,o)},Blockly.WorkspaceSvg.prototype.moveDrag=function(t){return t=Blockly.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),t.x/=this.scale,t.y/=this.scale,goog.math.Coordinate.sum(this.dragDeltaXY_,t)},Blockly.WorkspaceSvg.prototype.isDragging=function(){return this.currentGesture_&&this.currentGesture_.isDragging()},Blockly.WorkspaceSvg.prototype.isDraggable=function(){return!!this.scrollbar},Blockly.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(this.currentGesture_&&this.currentGesture_.cancel(),t.ctrlKey){var e=-t.deltaY/50,o=Blockly.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM());this.zoom(o.x,o.y,e)}else Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),e=this.scrollX-t.deltaX,o=this.scrollY-t.deltaY,this.startDragMetrics=this.getMetrics(),this.scroll(e,o);t.preventDefault()},Blockly.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBlocks(!1);if(!t.length)return{x:0,y:0,width:0,height:0};for(var e=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var n=t[o].getBoundingRectangle();n.topLeft.x<e.topLeft.x&&(e.topLeft.x=n.topLeft.x),n.bottomRight.x>e.bottomRight.x&&(e.bottomRight.x=n.bottomRight.x),n.topLeft.y<e.topLeft.y&&(e.topLeft.y=n.topLeft.y),n.bottomRight.y>e.bottomRight.y&&(e.bottomRight.y=n.bottomRight.y)}return{x:e.topLeft.x,y:e.topLeft.y,width:e.bottomRight.x-e.topLeft.x,height:e.bottomRight.y-e.topLeft.y}},Blockly.WorkspaceSvg.prototype.cleanUp=function(){Blockly.Events.setGroup(!0);for(var t,e=this.getTopBlocks(!0),o=0,n=0;t=e[n];n++){var r=t.getRelativeToSurfaceXY();t.moveBy(-r.x,o-r.y),t.snapToGrid(),o=t.getRelativeToSurfaceXY().y+t.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y}Blockly.Events.setGroup(!1),this.resizeContents()},Blockly.WorkspaceSvg.prototype.showContextMenu_=function(t){function e(t){if(t.isDeletable())h=h.concat(t.getDescendants());else{t=t.getChildren();for(var o=0;o<t.length;o++)e(t[o])}}function o(){Blockly.Events.setGroup(i);var t=h.shift();t&&(t.workspace?(t.dispose(!1,!0),setTimeout(o,10)):o()),Blockly.Events.setGroup(!1)}if(!this.options.readOnly&&!this.isFlyout){var n=[],r=this.getTopBlocks(!0),i=Blockly.utils.genUid(),s=this,a={};if(a.text=Blockly.Msg.UNDO,a.enabled=0<this.undoStack_.length,a.callback=this.undo.bind(this,!1),n.push(a),a={},a.text=Blockly.Msg.REDO,a.enabled=0<this.redoStack_.length,a.callback=this.undo.bind(this,!0),n.push(a),this.scrollbar&&(a={},a.text=Blockly.Msg.CLEAN_UP,a.enabled=1<r.length,a.callback=this.cleanUp.bind(this),n.push(a)),this.options.collapse){for(var l=a=!1,c=0;c<r.length;c++)for(var u=r[c];u;)u.isCollapsed()?a=!0:l=!0,u=u.getNextBlock();var g=function(t){for(var e=0,o=0;o<r.length;o++)for(var n=r[o];n;)setTimeout(n.setCollapsed.bind(n,t),e),n=n.getNextBlock(),e+=10};l={enabled:l},l.text=Blockly.Msg.COLLAPSE_ALL,l.callback=function(){g(!0)},n.push(l),a={enabled:a},a.text=Blockly.Msg.EXPAND_ALL,a.callback=function(){g(!1)},n.push(a)}var h=[];for(c=0;c<r.length;c++)e(r[c]);var p=0;for(c=0;c<h.length;c++)h[c].isShadow()||p++;a={text:1==p?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(p)),enabled:0<p,callback:function(){s.currentGesture_&&s.currentGesture_.cancel(),2>h.length?o():Blockly.confirm(Blockly.Msg.DELETE_ALL_BLOCKS.replace("%1",String(p)),function(t){t&&o()})}},n.push(a),Blockly.ContextMenu.show(t,n,this.RTL)}},Blockly.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=Blockly.Options.parseToolboxTree(t)){if(!this.options.languageTree)throw"Existing toolbox is null.  Can't create new toolbox.";if(t.getElementsByTagName("category").length){if(!this.toolbox_)throw"Existing toolbox has no categories.  Can't change mode.";this.options.languageTree=t,this.toolbox_.populate_(t),this.toolbox_.position()}else{if(!this.flyout_)throw"Existing toolbox has categories.  Can't change mode.";this.options.languageTree=t,this.flyout_.show(t.childNodes)}}else if(this.options.languageTree)throw"Can't nullify an existing toolbox."},Blockly.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Blockly.mainWorkspace=this,this.setBrowserFocus())},Blockly.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur();try{this.getParentSvg().focus()}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(t){this.getParentSvg().parentNode.focus()}}},Blockly.WorkspaceSvg.prototype.zoom=function(t,e,o){var n=this.options.zoomOptions.scaleSpeed,r=this.getMetrics(),i=this.getParentSvg().createSVGPoint();i.x=t,i.y=e,i=i.matrixTransform(this.getCanvas().getCTM().inverse()),t=i.x,e=i.y,i=this.getCanvas(),n=Math.pow(n,o),o=this.scale*n,o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale),this.scale!=o&&(this.scrollbar&&(t=i.getCTM().translate(t*(1-n),e*(1-n)).scale(n),this.scrollX=t.e-r.absoluteLeft,this.scrollY=t.f-r.absoluteTop),this.setScale(o),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation())},Blockly.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();this.zoom(e.viewWidth/2,e.viewHeight/2,t)},Blockly.WorkspaceSvg.prototype.zoomToFit=function(){var t=this.getMetrics(),e=this.getBlocksBoundingBox(),o=e.width;if(e=e.height,o){var n=t.viewWidth,r=t.viewHeight;this.flyout_&&(n-=this.flyout_.width_),this.scrollbar||(o+=t.contentLeft,e+=t.contentTop),this.setScale(Math.min(n/o,r/e)),this.scrollCenter()}},Blockly.WorkspaceSvg.prototype.scrollCenter=function(){if(this.scrollbar){Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.hideChaff(!1);var t=this.getMetrics(),e=(t.contentWidth-t.viewWidth)/2;this.flyout_&&(e-=this.flyout_.width_/2),this.scrollbar.set(e,(t.contentHeight-t.viewHeight)/2)}},Blockly.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,this.grid_&&this.grid_.update(this.scale),this.scrollbar?this.scrollbar.resize():this.translate(this.scrollX,this.scrollY),Blockly.hideChaff(!1),this.flyout_&&this.flyout_.reflow()},Blockly.WorkspaceSvg.prototype.scroll=function(t,e){var o=this.startDragMetrics;t=Math.min(t,-o.contentLeft),e=Math.min(e,-o.contentTop),t=Math.max(t,o.viewWidth-o.contentLeft-o.contentWidth),e=Math.max(e,o.viewHeight-o.contentTop-o.contentHeight),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.scrollbar.set(-t-o.contentLeft,-e-o.contentTop)},Blockly.WorkspaceSvg.prototype.updateStackGlowScale_=function(){this.options.stackGlowBlur&&this.options.stackGlowBlur.setAttribute("stdDeviation",Blockly.STACK_GLOW_RADIUS/this.scale)},Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var t=Blockly.svgSize(this.getParentSvg());this.toolbox_&&(this.toolboxPosition==Blockly.TOOLBOX_AT_TOP||this.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?t.height-=this.toolbox_.getHeight():this.toolboxPosition!=Blockly.TOOLBOX_AT_LEFT&&this.toolboxPosition!=Blockly.TOOLBOX_AT_RIGHT||(t.width-=this.toolbox_.getWidth()));var e=Blockly.Flyout.prototype.CORNER_RADIUS-1,o=t.width-e,n=t.height-e,r=this.getBlocksBoundingBox(),i=r.width*this.scale,s=r.height*this.scale,a=r.x*this.scale,l=r.y*this.scale;return this.scrollbar?(e=Math.min(a-o/2,a+i-o),i=Math.max(a+i+o/2,a+o),o=Math.min(l-n/2,l+s-n),n=Math.max(l+s+n/2,l+n)):(e=r.x,i=e+r.width,o=r.y,n=o+r.height),r=0,this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(r=this.toolbox_.getWidth()),s=0,this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_TOP&&(s=this.toolbox_.getHeight()),{viewHeight:t.height,viewWidth:t.width,contentHeight:n-o,contentWidth:i-e,viewTop:-this.scrollY,viewLeft:-this.scrollX,contentTop:o,contentLeft:e,absoluteTop:s,absoluteLeft:r,toolboxWidth:this.toolbox_?this.toolbox_.getWidth():0,toolboxHeight:this.toolbox_?this.toolbox_.getHeight():0,flyoutWidth:this.flyout_?this.flyout_.getWidth():0,flyoutHeight:this.flyout_?this.flyout_.getHeight():0,toolboxPosition:this.toolboxPosition}},Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){if(!this.scrollbar)throw"Attempt to set top level workspace scroll without scrollbars.";var e=this.getMetrics();goog.isNumber(t.x)&&(this.scrollX=-e.contentWidth*t.x-e.contentLeft),goog.isNumber(t.y)&&(this.scrollY=-e.contentHeight*t.y-e.contentTop),t=this.scrollX+e.absoluteLeft,e=this.scrollY+e.absoluteTop,this.translate(t,e),this.grid_&&this.grid_.moveTo(t,e)},Blockly.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},Blockly.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),Blockly.WorkspaceSvg.superClass_.clear.call(this),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){goog.asserts.assert(goog.isFunction(e),"Button callbacks must be functions."),this.flyoutButtonCallbacks_[t]=e},Blockly.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},Blockly.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},Blockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){goog.asserts.assert(goog.isFunction(e),"Toolbox category callbacks must be functions."),this.toolboxCategoryCallbacks_[t]=e},Blockly.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return(t=this.toolboxCategoryCallbacks_[t])?t:null},Blockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},Blockly.WorkspaceSvg.prototype.getGesture=function(t){var e="mousedown"==t.type||"touchstart"==t.type,o=this.currentGesture_;return o?e&&o.hasStarted()?(console.warn("tried to start the same gesture twice"),o.cancel(),null):o:e?this.currentGesture_=new Blockly.Gesture(t,this):null},Blockly.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},Blockly.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},Blockly.WorkspaceSvg.prototype.startDragWithFakeEvent=function(t,e){Blockly.Touch.clearTouchIdentifier(),Blockly.Touch.checkTouchIdentifier(t),e.workspace.getGesture(t).forceStartBlockDrag(t,e)},Blockly.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},Blockly.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},Blockly.WorkspaceSvg.prototype.setVisible=Blockly.WorkspaceSvg.prototype.setVisible,Blockly.Mutator=function(t){Blockly.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},goog.inherits(Blockly.Mutator,Blockly.Icon),Blockly.Mutator.prototype.workspaceWidth_=0,Blockly.Mutator.prototype.workspaceHeight_=0,Blockly.Mutator.prototype.drawIcon_=function(t){Blockly.utils.createSvgElement("rect",{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),Blockly.utils.createSvgElement("path",{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),Blockly.utils.createSvgElement("circle",{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},Blockly.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&Blockly.Icon.prototype.iconClick_.call(this,t)},Blockly.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=Blockly.utils.createSvgElement("svg",{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var t,e=goog.dom.createDom("xml"),o=0;t=this.quarkNames_[o];o++)e.appendChild(goog.dom.createDom("block",{type:t}));else e=null;return e={languageTree:e,parentWorkspace:this.block_.workspace,pathToMedia:this.block_.workspace.options.pathToMedia,RTL:this.block_.RTL,toolboxPosition:this.block_.RTL?Blockly.TOOLBOX_AT_RIGHT:Blockly.TOOLBOX_AT_LEFT,horizontalLayout:!1,getMetrics:this.getFlyoutMetrics_.bind(this),setMetrics:null},this.workspace_=new Blockly.WorkspaceSvg(e,this.block_.workspace.dragSurface),this.workspace_.isMutator=!0,e=this.workspace_.addFlyout_("g"),o=this.workspace_.createDom("blocklyMutatorBackground"),o.insertBefore(e,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(o),this.svgDialog_},Blockly.Mutator.prototype.updateEditable=function(){this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&Blockly.utils.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&Blockly.utils.addClass(this.iconGroup_,"blocklyIconGroupReadonly"))),Blockly.Icon.prototype.updateEditable.call(this)},Blockly.Mutator.prototype.resizeBubble_=function(){var t=2*Blockly.Bubble.BORDER_WIDTH,e=this.workspace_.getCanvas().getBBox(),o=this.block_.RTL?-e.x:e.width+e.x;if(e=e.height+3*t,this.workspace_.flyout_){var n=this.workspace_.flyout_.getMetrics_();e=Math.max(e,n.contentHeight+20)}o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-e)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=e,this.bubble_.setBubbleSize(o+t,e+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},Blockly.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"mutatorOpen",!t,t)),t){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,null,null),(t=this.workspace_.options.languageTree)&&(this.workspace_.flyout_.init(this.workspace_),this.workspace_.flyout_.show(t.childNodes)),this.rootBlock_=this.block_.decompose(this.workspace_),t=this.rootBlock_.getDescendants();for(var e,o=0;e=t[o];o++)e.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),this.workspace_.flyout_?(o=2*this.workspace_.flyout_.CORNER_RADIUS,t=this.workspace_.flyout_.width_+o):t=o=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,o),this.block_.saveConnections){var n=this;this.block_.saveConnections(this.rootBlock_),this.sourceListener_=function(){n.block_.saveConnections(n.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.updateColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},Blockly.Mutator.prototype.workspaceChanged_=function(){var t;if(!this.workspace_.isDragging())for(var e=this.workspace_.getTopBlocks(!1),o=0;t=e[o];o++){var n=t.getRelativeToSurfaceXY(),r=t.getHeightWidth();20>n.y+r.height&&t.moveBy(0,20-r.height-n.y)}if(this.rootBlock_.workspace==this.workspace_){if(Blockly.Events.setGroup(!0),t=this.block_,e=(e=t.mutationToDom())&&Blockly.Xml.domToText(e),o=t.rendered,t.rendered=!1,t.compose(this.rootBlock_),t.rendered=o,t.initSvg(),o=(o=t.mutationToDom())&&Blockly.Xml.domToText(o),e!=o){Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,e,o));var i=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(i),t.bumpNeighbours_(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)}t.rendered&&t.render(),this.workspace_.isDragging()||this.resizeBubble_(),Blockly.Events.setGroup(!1)}},Blockly.Mutator.prototype.getFlyoutMetrics_=function(){return{viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_,absoluteTop:0,absoluteLeft:0}},Blockly.Mutator.prototype.dispose=function(){this.block_.mutator=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Mutator.reconnect=function(t,e,o){if(!t||!t.getSourceBlock().workspace)return!1;o=e.getInput(o).connection;var n=t.targetBlock();return!(n&&n!=e||o.targetConnection==t)&&(o.isConnected()&&o.disconnect(),o.connect(t),!0)},goog.global.Blockly||(goog.global.Blockly={}),goog.global.Blockly.Mutator||(goog.global.Blockly.Mutator={}),goog.global.Blockly.Mutator.reconnect=Blockly.Mutator.reconnect,Blockly.Extensions={},Blockly.Extensions.ALL_={},Blockly.Extensions.MUTATOR_PROPERTIES_=["domToMutation","mutationToDom","compose","decompose"],Blockly.Extensions.register=function(t,e){if(!goog.isString(t)||goog.string.isEmptyOrWhitespace(t))throw Error('Error: Invalid extension name "'+t+'"');if(Blockly.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if(!goog.isFunction(e))throw Error('Error: Extension "'+t+'" must be a function');Blockly.Extensions.ALL_[t]=e};Blockly.Extensions.registerMixin=function(t,e){Blockly.Extensions.register(t,function(){this.mixin(e)})},Blockly.Extensions.registerMutator=function(t,e,o,n){var r='Error when registering mutator "'+t+'": ';Blockly.Extensions.checkHasFunction_(r,e,"domToMutation"),Blockly.Extensions.checkHasFunction_(r,e,"mutationToDom");var i=Blockly.Extensions.checkMutatorDialog_(e,r);if(o&&!goog.isFunction(o))throw Error('Extension "'+t+'" is not a function');Blockly.Extensions.register(t,function(){i&&this.setMutator(new Blockly.Mutator(n)),this.mixin(e),o&&o.apply(this)})},Blockly.Extensions.apply=function(t,e,o){var n,r=Blockly.Extensions.ALL_[t];if(!goog.isFunction(r))throw Error('Error: Extension "'+t+'" not found.');if(o?Blockly.Extensions.checkNoMutatorProperties_(t,e):n=Blockly.Extensions.getMutatorProperties_(e),r.apply(e),o)Blockly.Extensions.checkBlockHasMutatorProperties_(t,e,'Error after applying mutator "'+t+'": ');else if(!Blockly.Extensions.mutatorPropertiesMatch_(n,e))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},Blockly.Extensions.checkHasFunction_=function(t,e,o){if(!e.hasOwnProperty(o))throw Error(t+'missing required property "'+o+'"');if("function"!=typeof e[o])throw Error(t+'" required property "'+o+'" must be a function')},Blockly.Extensions.checkNoMutatorProperties_=function(t,e){for(var o=0;o<Blockly.Extensions.MUTATOR_PROPERTIES_.length;o++){var n=Blockly.Extensions.MUTATOR_PROPERTIES_[o];if(e.hasOwnProperty(n))throw Error('Error: tried to apply mutation "'+t+'" to a block that already has a "'+n+'" function.  Block id: '+e.id)}},Blockly.Extensions.checkMutatorDialog_=function(t,e){var o=t.hasOwnProperty("compose"),n=t.hasOwnProperty("decompose");if(o&&n){if("function"!=typeof t.compose)throw Error(e+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(e+"decompose must be a function.");return!0}if(o||n)throw Error(e+'Must have both or neither of "compose" and "decompose"');return!1},Blockly.Extensions.checkBlockHasMutatorProperties_=function(t,e){if(!e.hasOwnProperty("domToMutation"))throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if(!e.hasOwnProperty("mutationToDom"))throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');Blockly.Extensions.checkMutatorDialog_(e,t)},Blockly.Extensions.getMutatorProperties_=function(t){for(var e=[],o=0;o<Blockly.Extensions.MUTATOR_PROPERTIES_.length;o++)e.push(t[Blockly.Extensions.MUTATOR_PROPERTIES_[o]]);return e},Blockly.Extensions.mutatorPropertiesMatch_=function(t,e){var o=!0,n=Blockly.Extensions.getMutatorProperties_(e);if(n.length!=t.length)o=!1;else for(var r=0;r<n.length;r++)t[r]!=n[r]&&(o=!1);return o},Blockly.Extensions.buildTooltipForDropdown=function(t,e){var o=[];return document&&Blockly.utils.runAfterPageLoad(function(){for(var t in e)Blockly.utils.checkMessageReferences(e[t])}),function(){this.type&&-1===o.indexOf(this.type)&&(Blockly.Extensions.checkDropdownOptionsInTable_(this,t,e),o.push(this.type)),this.setTooltip(function(){var n=this.getFieldValue(t),r=e[n];return null==r?-1===o.indexOf(this.type)&&(n="No tooltip mapping for value "+n+" of field "+t,null!=this.type&&(n+=" of block type "+this.type),console.warn(n+".")):r=Blockly.utils.replaceMessageReferences(r),r}.bind(this))}},Blockly.Extensions.checkDropdownOptionsInTable_=function(t,e,o){var n=t.getField(e);if(!n.isOptionListDynamic()){n=n.getOptions();for(var r=0;r<n.length;++r){var i=n[r][1];null==o[i]&&console.warn("No tooltip mapping for value "+i+" of field "+e+" of block type "+t.type)}}},Blockly.Extensions.buildTooltipWithFieldValue=function(t,e){return document&&Blockly.utils.runAfterPageLoad(function(){Blockly.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){return Blockly.utils.replaceMessageReferences(t).replace("%1",this.getFieldValue(e))}.bind(this))}},Blockly.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},Blockly.Extensions.register("parent_tooltip_when_inline",Blockly.Extensions.extensionParentTooltip_),Blockly.Field=function(t,e){this.size_=new goog.math.Size(Blockly.BlockSvg.FIELD_WIDTH,Blockly.BlockSvg.FIELD_HEIGHT),this.setValue(t),this.setValidator(e),this.maxDisplayLength=Blockly.BlockSvg.MAX_DISPLAY_LENGTH},Blockly.Field.cacheWidths_=null,Blockly.Field.cacheReference_=0,Blockly.Field.prototype.name=void 0,Blockly.Field.prototype.text_="",Blockly.Field.prototype.sourceBlock_=null,Blockly.Field.prototype.visible_=!0,Blockly.Field.prototype.argType_=null,Blockly.Field.prototype.validator_=null,Blockly.Field.NBSP=" ",Blockly.Field.prototype.EDITABLE=!0,Blockly.Field.prototype.setSourceBlock=function(t){goog.asserts.assert(!this.sourceBlock_,"Field already bound to a block."),this.sourceBlock_=t},Blockly.Field.prototype.init=function(){if(!this.fieldGroup_){this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_.setAttribute("data-argument-type",this.getArgTypes()):this.fieldGroup_.setAttribute("data-argument-type",this.getArgTypes()));var t=this.getSize();this.textElement_=Blockly.utils.createSvgElement("text",{class:"blocklyText",x:this.sourceBlock_.RTL?-t.width/2:t.width/2,y:t.height/2+Blockly.BlockSvg.FIELD_TOP_PADDING,"dominant-baseline":"middle","text-anchor":"middle"},this.fieldGroup_),this.updateEditable(),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.render_(),this.size_.width=0,this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)}},Blockly.Field.prototype.initModel=function(){},Blockly.Field.prototype.dispose=function(){this.mouseDownWrapper_&&(Blockly.unbindEvent_(this.mouseDownWrapper_),this.mouseDownWrapper_=null),this.sourceBlock_=null,goog.dom.removeNode(this.fieldGroup_),this.validator_=this.textElement_=this.fieldGroup_=null},Blockly.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(Blockly.utils.addClass(t,"blocklyEditableText"),Blockly.utils.removeClass(t,"blocklyNonEditableText"),this.fieldGroup_.style.cursor=this.CURSOR):(Blockly.utils.addClass(t,"blocklyNonEditableText"),Blockly.utils.removeClass(t,"blocklyEditableText"),this.fieldGroup_.style.cursor=""))},Blockly.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},Blockly.Field.prototype.isVisible=function(){return this.visible_},Blockly.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none",this.render_())}},Blockly.Field.prototype.addArgType=function(t){null==this.argType_&&(this.argType_=[]),this.argType_.push(t)},Blockly.Field.prototype.getArgTypes=function(){return null===this.argType_||0===this.argType_.length?null:this.argType_.join(" ")},Blockly.Field.prototype.setValidator=function(t){this.validator_=t},Blockly.Field.prototype.getValidator=function(){return this.validator_},Blockly.Field.prototype.classValidator=function(t){return t},Blockly.Field.prototype.callValidator=function(t){var e=this.classValidator(t);if(null===e)return null;if(void 0!==e&&(t=e),e=this.getValidator()){if(null===(e=e.call(this,t)))return null;void 0!==e&&(t=e)}return t},Blockly.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},Blockly.Field.prototype.render_=function(){if(this.visible_&&this.textElement_){goog.dom.removeChildren(this.textElement_);var t=document.createTextNode(this.getDisplayText_());if(this.textElement_.appendChild(t),this.updateWidth(),t=(this.size_.width-this.arrowWidth_)/2,this.sourceBlock_.RTL&&(t+=this.arrowWidth_),this.sourceBlock_.isShadow()&&!this.positionArrow){var e=Blockly.BlockSvg.FIELD_WIDTH/2;t=this.sourceBlock_.RTL?Math.min(this.size_.width-e,t):Math.max(e,t)}this.textElement_.setAttribute("x",t)}this.box_&&(this.box_.setAttribute("width",this.size_.width),this.box_.setAttribute("height",this.size_.height))},Blockly.Field.prototype.updateWidth=function(){var t=Blockly.Field.getCachedWidth(this.textElement_);this.EDITABLE&&(t+=Blockly.BlockSvg.EDITABLE_FIELD_PADDING),this.arrowWidth_=0,this.positionArrow&&(this.arrowWidth_=this.positionArrow(t),t+=this.arrowWidth_),this.box_&&(t+=2*Blockly.BlockSvg.BOX_FIELD_PADDING),this.size_.width=t},Blockly.Field.getCachedWidth=function(t){var e,o=t.textContent+"\n"+t.className.baseVal;if(Blockly.Field.cacheWidths_&&(e=Blockly.Field.cacheWidths_[o]))return e;try{e=t.getComputedTextLength()}catch(e){return 8*t.textContent.length}return Blockly.Field.cacheWidths_&&(Blockly.Field.cacheWidths_[o]=e),e},Blockly.Field.startCache=function(){Blockly.Field.cacheReference_++,Blockly.Field.cacheWidths_||(Blockly.Field.cacheWidths_={})},Blockly.Field.stopCache=function(){--Blockly.Field.cacheReference_||(Blockly.Field.cacheWidths_=null)},Blockly.Field.prototype.getSize=function(){return this.size_.width||this.render_(),this.size_},Blockly.Field.prototype.getScaledBBox_=function(){var t=this.getSize();return new goog.math.Size(t.width*this.sourceBlock_.workspace.scale,t.height*this.sourceBlock_.workspace.scale)},Blockly.Field.prototype.getDisplayText_=function(){var t=this.text_;return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"…"),t=t.replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_.RTL&&(t+="‏"),t):Blockly.Field.NBSP},Blockly.Field.prototype.getText=function(){return this.text_},Blockly.Field.prototype.setText=function(t){null!==t&&(t=String(t))!==this.text_&&(this.text_=t,this.size_.width=0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()))},Blockly.Field.prototype.updateTextNode_=function(){if(this.textElement_){var t=this.text_;t.length>this.maxDisplayLength?(t=t.substring(0,this.maxDisplayLength-2)+"…",this.textElement_.setAttribute("class","blocklyText blocklyTextTruncated")):this.textElement_.setAttribute("class","blocklyText"),goog.dom.removeChildren(this.textElement_),t=t.replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_.RTL&&t&&(t+="‏"),t||(t=Blockly.Field.NBSP),t=document.createTextNode(t),this.textElement_.appendChild(t),this.size_.width=0}},Blockly.Field.prototype.getValue=function(){return this.getText()},Blockly.Field.prototype.setValue=function(t){if(null!==t){var e=this.getValue();e!=t&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,e,t)),this.setText(t))}},Blockly.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},Blockly.Field.prototype.setTooltip=function(){},Blockly.Field.prototype.getClickTarget_=function(){for(var t,e=0,o=0;t=this.sourceBlock_.inputList[o];o++)e+=t.fieldRow.length;return 1>=e?this.sourceBlock_.getSvgRoot():this.getSvgRoot()},Blockly.Field.prototype.getAbsoluteXY_=function(){return goog.style.getPageOffset(this.getClickTarget_())},Blockly.FieldVariableGetter=function(t,e){Blockly.FieldVariableGetter.superClass_.constructor.call(this,t),this.name_=e},goog.inherits(Blockly.FieldVariableGetter,Blockly.Field),Blockly.FieldVariableGetter.prototype.EDITABLE=!0,Blockly.FieldVariableGetter.prototype.init=function(){this.fieldGroup_||(Blockly.FieldVariableGetter.superClass_.init.call(this),this.getValue()||this.setValue(Blockly.Variables.generateUniqueName(this.sourceBlock_.isInFlyout?this.sourceBlock_.workspace.targetWorkspace:this.sourceBlock_.workspace)),this.sourceBlock_.isInFlyout||this.sourceBlock_.workspace.createVariable(this.getValue()))},Blockly.FieldVariableGetter.prototype.showEditor_=function(){},Blockly.FieldVariableGetter.prototype.updateEditable=function(){},Blockly.FieldLabel=function(t,e){this.size_=new goog.math.Size(0,0),this.class_=e,this.setValue(t)},goog.inherits(Blockly.FieldLabel,Blockly.Field),Blockly.FieldLabel.prototype.EDITABLE=!1,Blockly.FieldLabel.prototype.init=function(){this.textElement_||(this.textElement_=Blockly.utils.createSvgElement("text",{class:"blocklyText",y:Blockly.BlockSvg.FIELD_TOP_PADDING,"text-anchor":"middle","dominant-baseline":"middle"},null),this.class_&&Blockly.utils.addClass(this.textElement_,this.class_),this.visible_||(this.textElement_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.textElement_),this.textElement_.tooltip=this.sourceBlock_,Blockly.Tooltip.bindMouseEvents(this.textElement_),this.render_())},Blockly.FieldLabel.prototype.dispose=function(){goog.dom.removeNode(this.textElement_),this.textElement_=null},Blockly.FieldLabel.prototype.getSvgRoot=function(){return this.textElement_},Blockly.FieldLabel.prototype.setTooltip=function(t){this.textElement_.tooltip=t},Blockly.Input=function(t,e,o,n){if(t!=Blockly.DUMMY_INPUT&&!e)throw"Value inputs and statement inputs must have non-empty name.";this.type=t,this.name=e,this.sourceBlock_=o,this.connection=n,this.fieldRow=[]},Blockly.Input.prototype.align=Blockly.ALIGN_LEFT,Blockly.Input.prototype.visible_=!0,Blockly.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},Blockly.Input.prototype.insertFieldAt=function(t,e,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return e||o?(goog.isString(e)&&(e=new Blockly.FieldLabel(e)),e.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&e.init(),e.name=o,e.prefixField&&(t=this.insertFieldAt(t,e.prefixField)),this.fieldRow.splice(t,0,e),++t,e.suffixField&&(t=this.insertFieldAt(t,e.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()),t):this},Blockly.Input.prototype.removeField=function(t){for(var e,o=0;e=this.fieldRow[o];o++)if(e.name===t)return e.dispose(),this.fieldRow.splice(o,1),void(this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()));goog.asserts.fail('Field "%s" not found.',t)},Blockly.Input.prototype.isVisible=function(){return this.visible_},Blockly.Input.prototype.setVisible=function(t){var e=[];if(this.visible_==t)return e;for(var o,n=(this.visible_=t)?"block":"none",r=0;o=this.fieldRow[r];r++)o.setVisible(t);return this.connection&&(t?e=this.connection.unhideAll():this.connection.hideAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=n,t||(r.rendered=!1)),e},Blockly.Input.prototype.setCheck=function(t){if(!this.connection)throw"This input does not have a connection.";return this.connection.setCheck(t),this},Blockly.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&this.sourceBlock_.render(),this},Blockly.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init(this.sourceBlock_)},Blockly.Input.prototype.dispose=function(){for(var t,e=0;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},Blockly.Warning=function(t){Blockly.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_={}},goog.inherits(Blockly.Warning,Blockly.Icon),Blockly.Warning.prototype.collapseHidden=!1,Blockly.Warning.prototype.drawIcon_=function(t){Blockly.utils.createSvgElement("path",{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),Blockly.utils.createSvgElement("path",{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),Blockly.utils.createSvgElement("rect",{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},Blockly.Warning.textToDom_=function(t){var e=Blockly.utils.createSvgElement("text",{class:"blocklyText blocklyBubbleText",y:Blockly.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var n=Blockly.utils.createSvgElement("tspan",{dy:"1em",x:Blockly.Bubble.BORDER_WIDTH},e),r=document.createTextNode(t[o]);n.appendChild(r)}return e},Blockly.Warning.prototype.setVisible=function(t){if(t!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"warningOpen",!t,t)),t){if(t=Blockly.Warning.textToDom_(this.getText()),this.bubble_=new Blockly.Bubble(this.block_.workspace,t,this.block_.svgPath_,this.iconXY_,null,null),this.block_.RTL)for(var e,o=t.getBBox().width,n=0;e=t.childNodes[n];n++)e.setAttribute("text-anchor","end"),e.setAttribute("x",o+Blockly.Bubble.BORDER_WIDTH);this.updateColour(),t=this.bubble_.getBubbleSize(),this.bubble_.setBubbleSize(t.width,t.height)}else this.bubble_.dispose(),this.body_=this.bubble_=null},Blockly.Warning.prototype.bodyFocus_=function(){this.bubble_.promote_()},Blockly.Warning.prototype.setText=function(t,e){this.text_[e]!=t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},Blockly.Warning.prototype.getText=function(){var t,e=[];for(t in this.text_)e.push(this.text_[t]);return e.join("\n")},Blockly.Warning.prototype.dispose=function(){this.block_.warning=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Block=function(t,e,o){var n=t&&t.getFlyout&&t.getFlyout()?t.getFlyout().getWorkspace():null;this.id=!o||t.getBlockById(o)||n&&n.getBlockById(o)?Blockly.utils.genUid():o,t.blockDB_[this.id]=this,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=!0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.checkboxInFlyout_=this.collapsed_=this.isShadow_=!1,this.category_=this.outputShape_=this.comment=null,this.xy_=new goog.math.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,e&&(this.type=e,o=Blockly.Blocks[e],goog.asserts.assertObject(o,'Error: Unknown block type "%s".',e),goog.mixin(this,o)),t.addTopBlock(this),goog.isFunction(this.init)&&this.init(),this.inputsInlineDefault=this.inputsInline,Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(this)),goog.isFunction(this.onchange)&&this.setOnChange(this.onchange)},Blockly.Block.prototype.data=null,Blockly.Block.prototype.colour_="#FF0000",Blockly.Block.prototype.colourSecondary_="#FF0000",Blockly.Block.prototype.colourTertiary_="#FF0000",Blockly.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockDelete(this)),Blockly.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),delete this.workspace.blockDB_[this.id],this.workspace=null),Blockly.selected==this&&(Blockly.selected=null);for(var e=this.childBlocks_.length-1;0<=e;e--)this.childBlocks_[e].dispose(!1);e=0;for(var o;o=this.inputList[e];e++)o.dispose();this.inputList.length=0;var n=this.getConnections_(!0);for(e=0;e<n.length;e++){var r=n[e];r.isConnected()&&r.disconnect(),n[e].dispose()}}finally{Blockly.Events.enable()}}},Blockly.Block.prototype.unplug=function(t){if(this.outputConnection)this.outputConnection.isConnected()&&this.outputConnection.disconnect();else if(this.previousConnection){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&(t=this.nextConnection.targetConnection,t.disconnect(),e&&e.checkType_(t)&&e.connect(t))}},Blockly.Block.prototype.getConnections_=function(){var t=[];this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var e,o=0;e=this.inputList[o];o++)e.connection&&t.push(e.connection);return t},Blockly.Block.prototype.lastConnectionInStack=function(){for(var t=this.nextConnection;t;){var e=t.targetBlock();if(!e)return t;t=e.nextConnection}return null},Blockly.Block.prototype.bumpNeighbours_=function(){console.warn("Not expected to reach this bumpNeighbours_ function. The BlockSvg function for bumpNeighbours_ was expected to be called instead.")},Blockly.Block.prototype.getParent=function(){return this.parentBlock_},Blockly.Block.prototype.getInputWithBlock=function(t){for(var e,o=0;e=this.inputList[o];o++)if(e.connection&&e.connection.targetBlock()==t)return e;return null},Blockly.Block.prototype.getInputWithConnection=function(t){for(var e,o=0;e=this.inputList[o];o++)if(e.connection==t)return e;return null},Blockly.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==e);return t},Blockly.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},Blockly.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},Blockly.Block.prototype.getFirstStatementConnection=function(){for(var t,e=0;t=this.inputList[e];e++)if(t.connection&&t.connection.type==Blockly.NEXT_STATEMENT)return t.connection;return null},Blockly.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},Blockly.Block.prototype.getChildren=function(){return this.childBlocks_},Blockly.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(goog.array.remove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw"Still connected to previous block.";if(this.outputConnection&&this.outputConnection.isConnected())throw"Still connected to parent block.";this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},Blockly.Block.prototype.getDescendants=function(t){for(var e,o=[this],n=0;e=this.childBlocks_[n];n++)t&&e.isShadow_||o.push.apply(o,e.getDescendants(t));return o},Blockly.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setDeletable=function(t){this.deletable_=t},Blockly.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setMovable=function(t){this.movable_=t},Blockly.Block.prototype.isShadow=function(){return this.isShadow_},Blockly.Block.prototype.setShadow=function(t){this.isShadow_=t},Blockly.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},Blockly.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(Blockly.Colours.insertionMarker),this.setOpacity(Blockly.Colours.insertionMarkerOpacity),Blockly.utils.addClass(this.svgGroup_,"blocklyInsertionMarker"))},Blockly.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var o,n=0;o=e.fieldRow[n];n++)o.updateEditable()},Blockly.Block.prototype.setConnectionsHidden=function(t){var e;if(!t&&this.isCollapsed())this.outputConnection&&this.outputConnection.setHidden(t),this.previousConnection&&this.previousConnection.setHidden(t),this.nextConnection&&(this.nextConnection.setHidden(t),(e=this.nextConnection.targetBlock())&&e.setConnectionsHidden(t));else for(var o=this.getConnections_(!0),n=0;e=o[n];n++)e.setHidden(t),e.isSuperior()&&(e=e.targetBlock())&&e.setConnectionsHidden(t)},Blockly.Block.prototype.getMatchingConnection=function(t,e){var o=this.getConnections_(!0),n=t.getConnections_(!0);if(o.length!=n.length)throw"Connection lists did not match in length.";for(var r=0;r<n.length;r++)if(n[r]==e)return o[r];return null},Blockly.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},Blockly.Block.prototype.setTooltip=function(t){this.tooltip=t},Blockly.Block.prototype.getColour=function(){return this.colour_},Blockly.Block.prototype.getColourSecondary=function(){return this.colourSecondary_},Blockly.Block.prototype.getColourTertiary=function(){return this.colourTertiary_},Blockly.Block.prototype.makeColour_=function(t){var e=Number(t);if(isNaN(e)){if(goog.isString(t)&&t.match(/^#[0-9a-fA-F]{6}$/))return t;throw"Invalid colour: "+t}return Blockly.hueToRgb(e)},Blockly.Block.prototype.setColour=function(t,e,o){this.colour_=this.makeColour_(t),this.colourSecondary_=void 0!==e?this.makeColour_(e):goog.color.rgbArrayToHex(goog.color.darken(goog.color.hexToRgb(this.colour_),.1)),this.colourTertiary_=void 0!==o?this.makeColour_(o):goog.color.rgbArrayToHex(goog.color.darken(goog.color.hexToRgb(this.colour_),.2)),this.rendered&&this.updateColour()},Blockly.Block.prototype.setOnChange=function(t){if(t&&!goog.isFunction(t))throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},Blockly.Block.prototype.getField=function(t){for(var e,o=0;e=this.inputList[o];o++)for(var n,r=0;n=e.fieldRow[r];r++)if(n.name===t)return n;return null},Blockly.Block.prototype.getVars=function(){for(var t,e=[],o=0;t=this.inputList[o];o++)for(var n,r=0;n=t.fieldRow[r];r++)(n instanceof Blockly.FieldVariable||n instanceof Blockly.FieldVariableGetter)&&e.push(n.getValue());return e},Blockly.Block.prototype.renameVar=function(t,e){for(var o,n=0;o=this.inputList[n];n++)for(var r,i=0;r=o.fieldRow[i];i++)(r instanceof Blockly.FieldVariable||r instanceof Blockly.FieldVariableGetter)&&Blockly.Names.equals(t,r.getValue())&&r.setValue(e)},Blockly.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},Blockly.Block.prototype.setFieldValue=function(t,e){var o=this.getField(e);goog.asserts.assertObject(o,'Field "%s" not found.',e),o.setValue(t)},Blockly.Block.prototype.setPreviousStatement=function(t,e){t?(void 0===e&&(e=null),this.previousConnection||(goog.asserts.assert(!this.outputConnection,"Remove output connection prior to adding previous connection."),this.previousConnection=this.makeConnection_(Blockly.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(e)):this.previousConnection&&(goog.asserts.assert(!this.previousConnection.isConnected(),"Must disconnect previous statement before removing connection."),this.previousConnection.dispose(),this.previousConnection=null)},Blockly.Block.prototype.setNextStatement=function(t,e){t?(void 0===e&&(e=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Blockly.NEXT_STATEMENT)),this.nextConnection.setCheck(e)):this.nextConnection&&(goog.asserts.assert(!this.nextConnection.isConnected(),"Must disconnect next statement before removing connection."),this.nextConnection.dispose(),this.nextConnection=null)},Blockly.Block.prototype.setOutput=function(t,e){t?(void 0===e&&(e=null),this.outputConnection||(goog.asserts.assert(!this.previousConnection,"Remove previous connection prior to adding output connection."),this.outputConnection=this.makeConnection_(Blockly.OUTPUT_VALUE)),this.outputConnection.setCheck(e)):this.outputConnection&&(goog.asserts.assert(!this.outputConnection.isConnected(),"Must disconnect output value before removing connection."),this.outputConnection.dispose(),this.outputConnection=null)},Blockly.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},Blockly.Block.prototype.getInputsInline=function(){if(void 0!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==Blockly.DUMMY_INPUT&&this.inputList[t].type==Blockly.DUMMY_INPUT)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==Blockly.INPUT_VALUE&&this.inputList[t].type==Blockly.DUMMY_INPUT)return!0;return!1},Blockly.Block.prototype.setDisabled=function(t){this.disabled!=t&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"disabled",null,this.disabled,t)),this.disabled=t)},Blockly.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},Blockly.Block.prototype.isCollapsed=function(){return this.collapsed_},Blockly.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},Blockly.Block.prototype.toString=function(t,e){var o=[],n=e||"?";if(this.collapsed_)o.push(this.getInput("_TEMP_COLLAPSED_INPUT").fieldRow[0].text_);else for(var r,i=0;r=this.inputList[i];i++){for(var s,a=0;s=r.fieldRow[a];a++)s instanceof Blockly.FieldDropdown&&!s.getValue()?o.push(n):o.push(s.getText());r.connection&&((r=r.connection.targetBlock())?o.push(r.toString(void 0,e)):o.push(n))}return o=goog.string.trim(o.join(" "))||"???",t&&(o=goog.string.truncate(o,t)),o},Blockly.Block.prototype.appendValueInput=function(t){return this.appendInput_(Blockly.INPUT_VALUE,t)},Blockly.Block.prototype.appendStatementInput=function(t){return this.appendInput_(Blockly.NEXT_STATEMENT,t)},Blockly.Block.prototype.appendDummyInput=function(t){return this.appendInput_(Blockly.DUMMY_INPUT,t||"")},Blockly.Block.prototype.jsonInit=function(t){var e;for(goog.asserts.assert(void 0==t.output||void 0==t.previousStatement,"Must not have both an output and a previousStatement."),void 0!==t.colour&&this.setColourFromJson_(t),e=0;void 0!==t["message"+e];)this.interpolate_(t["message"+e],t["args"+e]||[],t["lastDummyAlign"+e]),e++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(e=t.tooltip,e=Blockly.utils.replaceMessageReferences(e),this.setTooltip(e)),void 0!==t.enableContextMenu&&(e=t.enableContextMenu,this.contextMenu=!!e),void 0!==t.helpUrl&&(e=t.helpUrl,e=Blockly.utils.replaceMessageReferences(e),this.setHelpUrl(e)),goog.isString(t.extensions)&&(console.warn("JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&Blockly.Extensions.apply(t.mutator,this,!0),Array.isArray(t.extensions)){var o=t.extensions;for(e=0;e<o.length;++e)Blockly.Extensions.apply(o[e],this,!1)}void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.checkboxInFlyout&&this.setCheckboxInFlyout(t.checkboxInFlyout),void 0!==t.category&&this.setCategory(t.category)},Blockly.Block.prototype.mixin=function(t,e){if(goog.isDef(e)&&!goog.isBoolean(e))throw Error("opt_disableCheck must be a boolean if provided");if(!e){var o,n=[];for(o in t)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}goog.mixin(this,t)},Blockly.Block.prototype.setColourFromRawValues_=function(t,e,o){t=goog.isString(t)?Blockly.utils.replaceMessageReferences(t):t,e=goog.isString(e)?Blockly.utils.replaceMessageReferences(e):e,o=goog.isString(o)?Blockly.utils.replaceMessageReferences(o):o,this.setColour(t,e,o)},Blockly.Block.prototype.setColourFromJson_=function(t){this.setColourFromRawValues_(t.colour,t.colourSecondary,t.colourTertiary)},Blockly.Block.prototype.interpolate_=function(t,e,o){var n=Blockly.utils.tokenizeInterpolation(t),r=[],i=0;t=[];for(var s=0;s<n.length;s++){var a=n[s];if("number"==typeof a){if(0>=a||a>e.length)throw Error('Block "'+this.type+'": Message index %'+a+" out of range.");if(r[a])throw Error('Block "'+this.type+'": Message index %'+a+" duplicated.");r[a]=!0,i++,t.push(e[a-1])}else(a=a.trim())&&t.push(a)}if(i!=e.length)throw Error('Block "'+this.type+'": Message does not reference all '+e.length+" arg(s).");for(t.length&&("string"==typeof t[t.length-1]||goog.string.startsWith(t[t.length-1].type,"field_"))&&(s={type:"input_dummy"},o&&(s.align=o),t.push(s)),o={LEFT:Blockly.ALIGN_LEFT,RIGHT:Blockly.ALIGN_RIGHT,CENTRE:Blockly.ALIGN_CENTRE},e=[],s=0;s<t.length;s++)if("string"==typeof(i=t[s]))e.push([i,void 0]);else{n=a=null;do{if(r=!1,"string"==typeof i)a=new Blockly.FieldLabel(i);else switch(i.type){case"input_value":n=this.appendValueInput(i.name);break;case"input_statement":n=this.appendStatementInput(i.name);break;case"input_dummy":n=this.appendDummyInput(i.name);break;case"field_label":a=Blockly.Block.newFieldLabelFromJson_(i);break;case"field_input":a=Blockly.Block.newFieldTextInputFromJson_(i);break;case"field_textdropdown":a=new Blockly.FieldTextDropdown(i.text,i.options),"boolean"==typeof i.spellcheck&&a.setSpellcheck(i.spellcheck);break;case"field_numberdropdown":a=new Blockly.FieldNumberDropdown(i.value,i.options,i.min,i.max,i.precision);break;case"field_angle":a=new Blockly.FieldAngle(i.angle);break;case"field_checkbox":a=new Blockly.FieldCheckbox(i.checked?"TRUE":"FALSE");break;case"field_colour":a=new Blockly.FieldColour(i.colour);break;case"field_variable":a=Blockly.Block.newFieldVariableFromJson_(i);break;case"field_dropdown":a=new Blockly.FieldDropdown(i.options);break;case"field_iconmenu":a=new Blockly.FieldIconMenu(i.options);break;case"field_image":a=Blockly.Block.newFieldImageFromJson_(i);break;case"field_number":a=new Blockly.FieldNumber(i.value,i.min,i.max,i.precision);break;case"field_variable_getter":a=Blockly.Block.newFieldVariableGetterFromJson_(i);break;case"field_date":if(Blockly.FieldDate){a=new Blockly.FieldDate(i.date);break}default:i.alt&&(i=i.alt,r=!0)}}while(r);if(a)e.push([a,i.name]);else if(n){for(i.check&&n.setCheck(i.check),i.align&&n.setAlign(o[i.align]),r=0;r<e.length;r++)n.appendField(e[r][0],e[r][1]);e.length=0}}},Blockly.Block.newFieldImageFromJson_=function(t){var e=Blockly.utils.replaceMessageReferences(t.src),o=Number(Blockly.utils.replaceMessageReferences(t.width)),n=Number(Blockly.utils.replaceMessageReferences(t.height)),r=Blockly.utils.replaceMessageReferences(t.alt);return new Blockly.FieldImage(e,o,n,r,!!t.flip_rtl)},Blockly.Block.newFieldLabelFromJson_=function(t){var e=Blockly.utils.replaceMessageReferences(t.text);return new Blockly.FieldLabel(e,t.class)},Blockly.Block.newFieldTextInputFromJson_=function(t){var e=Blockly.utils.replaceMessageReferences(t.text);return e=new Blockly.FieldTextInput(e,t.class),"boolean"==typeof t.spellcheck&&e.setSpellcheck(t.spellcheck),e},Blockly.Block.newFieldVariableFromJson_=function(t){var e=Blockly.utils.replaceMessageReferences(t.variable);return new Blockly.FieldVariable(e,null,t.variableTypes)},Blockly.Block.newFieldVariableGetterFromJson_=function(t){var e=Blockly.utils.replaceMessageReferences(t.text);return new Blockly.FieldVariableGetter(e,t.name,t.class)},Blockly.Block.prototype.appendInput_=function(t,e){var o=null;return t!=Blockly.INPUT_VALUE&&t!=Blockly.NEXT_STATEMENT||(o=this.makeConnection_(t)),o=new Blockly.Input(t,e,this,o),this.inputList.push(o),o},Blockly.Block.prototype.moveInputBefore=function(t,e){if(t!=e){for(var o,n=-1,r=e?-1:this.inputList.length,i=0;o=this.inputList[i];i++)if(o.name==t){if(n=i,-1!=r)break}else if(e&&o.name==e&&(r=i,-1!=n))break;goog.asserts.assert(-1!=n,'Named input "%s" not found.',t),goog.asserts.assert(-1!=r,'Reference input "%s" not found.',e),this.moveNumberedInputBefore(n,r)}},Blockly.Block.prototype.moveNumberedInputBefore=function(t,e){goog.asserts.assert(t!=e,"Can't move input to itself."),goog.asserts.assert(t<this.inputList.length,"Input index "+t+" out of bounds."),goog.asserts.assert(e<=this.inputList.length,"Reference input "+e+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,o)},Blockly.Block.prototype.removeInput=function(t,e){for(var o,n=0;o=this.inputList[n];n++)if(o.name==t){if(o.connection&&o.connection.isConnected()){o.connection.setShadowDom(null);var r=o.connection.targetBlock();r.isShadow()?r.dispose():r.unplug()}return o.dispose(),void this.inputList.splice(n,1)}e||goog.asserts.fail('Input "%s" not found.',t)},Blockly.Block.prototype.getInput=function(t){for(var e,o=0;e=this.inputList[o];o++)if(e.name==t)return e;return null},Blockly.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},Blockly.Block.prototype.getCommentText=function(){return this.comment||""},Blockly.Block.prototype.setCommentText=function(t){this.comment!=t&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"comment",null,this.comment,t||"")),this.comment=t)},Blockly.Block.prototype.setOutputShape=function(t){this.outputShape_=t},Blockly.Block.prototype.getOutputShape=function(){return this.outputShape_},Blockly.Block.prototype.setCategory=function(t){this.category_=t},Blockly.Block.prototype.getCategory=function(){return this.category_},Blockly.Block.prototype.setCheckboxInFlyout=function(t){this.checkboxInFlyout_=t},Blockly.Block.prototype.hasCheckboxInFlyout=function(){return this.checkboxInFlyout_},Blockly.Block.prototype.setWarningText=function(){},Blockly.Block.prototype.setMutator=function(){},Blockly.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Blockly.Block.prototype.moveBy=function(t,e){goog.asserts.assert(!this.parentBlock_,"Block has parent.");var o=new Blockly.Events.BlockMove(this);this.xy_.translate(t,e),o.recordNew(),Blockly.Events.fire(o)},Blockly.Block.prototype.makeConnection_=function(t){return new Blockly.Connection(this,t)},Blockly.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var e,o=0;e=this.inputList[o];o++)if(e.connection&&(!(e=e.connection.targetBlock())||!e.allInputsFilled(t)))return!1;return!(o=this.getNextBlock())||o.allInputsFilled(t)},Blockly.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},Blockly.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},Blockly.BlockDragSurfaceSvg.prototype.SVG_=null,Blockly.BlockDragSurfaceSvg.prototype.dragGroup_=null,Blockly.BlockDragSurfaceSvg.prototype.container_=null,Blockly.BlockDragSurfaceSvg.prototype.scale_=1,Blockly.BlockDragSurfaceSvg.prototype.surfaceXY_=null,Blockly.BlockDragSurfaceSvg.prototype.dragShadowFilterId_="",Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION=6,Blockly.BlockDragSurfaceSvg.prototype.createDom=function(){if(!this.SVG_){this.SVG_=Blockly.utils.createSvgElement("svg",{xmlns:Blockly.SVG_NS,"xmlns:html":Blockly.HTML_NS,"xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",class:"blocklyBlockDragSurface"},this.container_);var t=Blockly.utils.createSvgElement("defs",{},this.SVG_);this.dragShadowFilterId_=this.createDropShadowDom_(t),this.dragGroup_=Blockly.utils.createSvgElement("g",{},this.SVG_),this.dragGroup_.setAttribute("filter","url(#"+this.dragShadowFilterId_+")")}},Blockly.BlockDragSurfaceSvg.prototype.createDropShadowDom_=function(t){var e=String(Math.random()).substring(2);return t=Blockly.utils.createSvgElement("filter",{id:"blocklyDragShadowFilter"+e,height:"140%",width:"140%",y:"-20%",x:"-20%"},t),Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION},t),e=Blockly.utils.createSvgElement("feComponentTransfer",{result:"offsetBlur"},t),Blockly.utils.createSvgElement("feFuncA",{type:"linear",slope:Blockly.Colours.dragShadowOpacity},e),Blockly.utils.createSvgElement("feComposite",{in:"SourceGraphic",in2:"offsetBlur",operator:"over"},t),t.id},Blockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){goog.asserts.assert(0==this.dragGroup_.childNodes.length,"Already dragging a block."),this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new goog.math.Coordinate(0,0),document.getElementsByClassName("injectionDiv")[0].style.overflow="visible"},Blockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,o){this.scale_=o,t=t.toFixed(0),e=e.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+o+")")},Blockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,e=this.surfaceXY_.y;t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",Blockly.utils.setCssTransform(this.SVG_,"translate3d("+t+"px, "+e+"px, 0px)")},Blockly.BlockDragSurfaceSvg.prototype.translateSurface=function(t,e){this.surfaceXY_=new goog.math.Coordinate(t*this.scale_,e*this.scale_),this.translateSurfaceInternal_()},Blockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=Blockly.utils.getRelativeXY(this.SVG_);return new goog.math.Coordinate(t.x/this.scale_,t.y/this.scale_)},Blockly.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},Blockly.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},Blockly.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",goog.asserts.assert(0==this.dragGroup_.childNodes.length,"Drag group was not cleared."),this.surfaceXY_=null,document.getElementsByClassName("injectionDiv")[0].style.overflow="hidden"};Blockly.ContextMenu={},Blockly.ContextMenu.currentBlock=null,Blockly.ContextMenu.eventWrapper_=null,Blockly.ContextMenu.show=function(t,e,o){if(Blockly.WidgetDiv.show(Blockly.ContextMenu,o,null),e.length){var n=Blockly.ContextMenu.populate_(e,o);goog.events.listen(n,goog.ui.Component.EventType.ACTION,Blockly.ContextMenu.hide),Blockly.ContextMenu.position_(n,t,o),setTimeout(function(){n.getElement().focus()},1),Blockly.ContextMenu.currentBlock=null}else Blockly.ContextMenu.hide()},Blockly.ContextMenu.populate_=function(t,e){var o=new goog.ui.Menu;o.setAllowAutoFocus(!0),o.setRightToLeft(e);for(var n,r=0;n=t[r];r++){var i=new goog.ui.MenuItem(n.text);i.setRightToLeft(e),o.addChild(i,!0),i.setEnabled(n.enabled),n.enabled&&(goog.events.listen(i,goog.ui.Component.EventType.ACTION,n.callback),i.handleContextMenu=function(){goog.events.dispatchEvent(this,goog.ui.Component.EventType.ACTION)})}return o},Blockly.ContextMenu.position_=function(t,e,o){var n=goog.dom.getViewportSize(),r=goog.style.getViewportPageOffset(document);t.render(Blockly.WidgetDiv.DIV),t=t.getElement(),Blockly.utils.addClass(t,"blocklyContextMenu"),Blockly.bindEventWithChecks_(t,"contextmenu",null,Blockly.utils.noEvent),t=goog.style.getSize(t);var i=e.clientX+r.x,s=e.clientY+r.y;e.clientY+t.height>=n.height&&(s-=t.height),o?t.width>=e.clientX&&(i+=t.width):e.clientX+t.width>=n.width&&(i-=t.width),Blockly.WidgetDiv.position(i,s,n,r,o)},Blockly.ContextMenu.hide=function(){Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu),Blockly.ContextMenu.currentBlock=null,Blockly.ContextMenu.eventWrapper_&&Blockly.unbindEvent_(Blockly.ContextMenu.eventWrapper_)},Blockly.ContextMenu.callbackFactory=function(t,e){return function(){Blockly.Events.disable();try{var o=Blockly.Xml.domToBlock(e,t.workspace),n=t.getRelativeToSurfaceXY();n.x=t.RTL?n.x-Blockly.SNAP_RADIUS:n.x+Blockly.SNAP_RADIUS,n.y+=2*Blockly.SNAP_RADIUS,o.moveBy(n.x,n.y)}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!o.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(o)),o.select()}},Blockly.BlockSvg=function(t,e,o){this.svgGroup_=Blockly.utils.createSvgElement("g",{},null),this.svgPath_=Blockly.utils.createSvgElement("path",{class:"blocklyPath blocklyBlockBackground"},this.svgGroup_),this.svgPath_.tooltip=this,this.rendered=!1,this.inputShapes_={},this.useDragSurface_=Blockly.utils.is3dSupported()&&!!t.blockDragSurface_,Blockly.Tooltip.bindMouseEvents(this.svgPath_),Blockly.BlockSvg.superClass_.constructor.call(this,t,e,o)},goog.inherits(Blockly.BlockSvg,Blockly.Block),Blockly.BlockSvg.prototype.height=0,Blockly.BlockSvg.prototype.width=0,Blockly.BlockSvg.prototype.insertionMarkerMinWidth_=0,Blockly.BlockSvg.prototype.opacity_=1,Blockly.BlockSvg.prototype.dragStartXY_=null,Blockly.BlockSvg.prototype.isGlowingBlock_=!1,Blockly.BlockSvg.prototype.isGlowingStack_=!1,Blockly.BlockSvg.INLINE=-1,Blockly.BlockSvg.prototype.initSvg=function(){if(goog.asserts.assert(this.workspace.rendered,"Workspace is headless."),!this.isInsertionMarker()){for(var t,e=0;t=this.inputList[e];e++)t.init(),t.type===Blockly.INPUT_VALUE&&this.initInputShape(t);for(t=this.getIcons(),e=0;e<t.length;e++)t[e].createIcon()}this.updateColour(),this.updateMovable(),this.workspace.options.readOnly||this.eventsInit_||Blockly.bindEventWithChecks_(this.getSvgRoot(),"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,this.getSvgRoot().parentNode||this.workspace.getCanvas().appendChild(this.getSvgRoot())},Blockly.BlockSvg.prototype.initInputShape=function(t){this.inputShapes_[t.name]||t.connection.getShadowDom()||(this.inputShapes_[t.name]=Blockly.utils.createSvgElement("path",{class:"blocklyPath",style:"visibility: hidden"},this.svgGroup_))},Blockly.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Blockly.selected!=this){var t=null;if(Blockly.selected){t=Blockly.selected.id,Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}t=new Blockly.Events.Ui(null,"selected",t,this.id),t.workspaceId=this.workspace.id,Blockly.Events.fire(t),Blockly.selected=this,this.addSelect()}},Blockly.BlockSvg.prototype.unselect=function(){if(Blockly.selected==this){var t=new Blockly.Events.Ui(null,"selected",this.id,null);t.workspaceId=this.workspace.id,Blockly.Events.fire(t),Blockly.selected=null,this.removeSelect()}},Blockly.BlockSvg.prototype.setGlowBlock=function(t){this.isGlowingBlock_=t,this.updateColour()},Blockly.BlockSvg.prototype.setGlowStack=function(t){this.isGlowingStack_=t,t=this.getSvgRoot(),this.isGlowingStack_&&!t.hasAttribute("filter")?t.setAttribute("filter","url(#blocklyStackGlowFilter)"):!this.isGlowingStack_&&t.hasAttribute("filter")&&t.removeAttribute("filter")},Blockly.BlockSvg.prototype.mutator=null,Blockly.BlockSvg.prototype.comment=null,Blockly.BlockSvg.prototype.warning=null,Blockly.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.comment&&t.push(this.comment),this.warning&&t.push(this.warning),t},Blockly.BlockSvg.prototype.setParent=function(t){if(t!=this.parentBlock_){var e=this.getSvgRoot();if(this.parentBlock_&&e){var o=this.getRelativeToSurfaceXY();Blockly.selected!=this&&(this.workspace.getCanvas().appendChild(e),this.translate(o.x,o.y))}Blockly.Field.startCache(),Blockly.BlockSvg.superClass_.setParent.call(this,t),Blockly.Field.stopCache(),t&&(o=this.getRelativeToSurfaceXY(),t.getSvgRoot().appendChild(e),e=this.getRelativeToSurfaceXY(),this.moveConnections_(e.x-o.x,e.y-o.y),this.isShadow()&&this.setColour(this.getColour(),this.getColourSecondary(),t.getColourTertiary()))}},Blockly.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,e=0,o=this.useDragSurface_?this.workspace.blockDragSurface_.getGroup():null,n=this.getSvgRoot();if(n)do{var r=Blockly.utils.getRelativeXY(n);t+=r.x,e+=r.y,this.useDragSurface_&&this.workspace.blockDragSurface_.getCurrentBlock()==n&&(r=this.workspace.blockDragSurface_.getSurfaceTranslation(),t+=r.x,e+=r.y),n=n.parentNode}while(n&&n!=this.workspace.getCanvas()&&n!=o);return new goog.math.Coordinate(t,e)},Blockly.BlockSvg.prototype.moveBy=function(t,e){var o;goog.asserts.assert(!this.parentBlock_,"Block has parent.");var n=Blockly.Events.isEnabled();n&&(o=new Blockly.Events.BlockMove(this));var r=this.getRelativeToSurfaceXY();this.translate(r.x+t,r.y+e),this.moveConnections_(t,e),n&&(o.recordNew(),Blockly.Events.fire(o)),this.workspace.resizeContents()},Blockly.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},Blockly.BlockSvg.prototype.moveToDragSurface_=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.blockDragSurface_.translateSurface(t.x,t.y),this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot())}},Blockly.BlockSvg.prototype.moveOffDragSurface_=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.blockDragSurface_.clearAndHide(this.workspace.getCanvas()))},Blockly.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.blockDragSurface_.translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Blockly.BlockSvg.prototype.clearTransformAttributes_=function(){Blockly.utils.removeAttribute(this.getSvgRoot(),"transform")},Blockly.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),o=e/2,n=this.getRelativeToSurfaceXY();t=Math.round((n.x-o)/e)*e+o-n.x,e=Math.round((n.y-o)/e)*e+o-n.y,t=Math.round(t),e=Math.round(e),0==t&&0==e||this.moveBy(t,e)}}},Blockly.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(this),e=this.getHeightWidth();if(this.RTL){var o=new goog.math.Coordinate(t.x-e.width,t.y);t=new goog.math.Coordinate(t.x,t.y+e.height)}else o=new goog.math.Coordinate(t.x,t.y),t=new goog.math.Coordinate(t.x+e.width,t.y+e.height);return{topLeft:o,bottomRight:t}},Blockly.BlockSvg.prototype.setOpacity=function(t){this.opacity_=t,this.rendered&&this.updateColour()},Blockly.BlockSvg.prototype.getOpacity=function(){return this.opacity_},Blockly.BlockSvg.prototype.setCollapsed=function(t){if(this.collapsed_!=t){for(var e,o=[],n=0;e=this.inputList[n];n++)o.push.apply(o,e.setVisible(!t));if(t){for(e=this.getIcons(),n=0;n<e.length;n++)e[n].setVisible(!1);n=this.toString(Blockly.COLLAPSE_CHARS),this.appendDummyInput("_TEMP_COLLAPSED_INPUT").appendField(n).init()}else this.removeInput("_TEMP_COLLAPSED_INPUT"),this.setWarningText(null);if(Blockly.BlockSvg.superClass_.setCollapsed.call(this,t),o.length||(o[0]=this),this.rendered)for(n=0;t=o[n];n++)t.render()}},Blockly.BlockSvg.prototype.tab=function(t,e){for(var o,n=[],r=0;o=this.inputList[r];r++){for(var i,s=0;i=o.fieldRow[s];s++)i instanceof Blockly.FieldTextInput&&n.push(i);o.connection&&(o=o.connection.targetBlock())&&n.push(o)}r=n.indexOf(t),-1==r&&(r=e?-1:n.length),(n=n[e?r+1:r-1])?n instanceof Blockly.Field?n.showEditor_():n.tab(null,e):(n=this.outputConnection&&this.outputConnection.targetBlock())?n.tab(this,e):(o=e?this.getNextBlock():this.getPreviousBlock())&&o.tab(this,e)},Blockly.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},Blockly.BlockSvg.prototype.showHelp_=function(){var t=goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl;t&&alert(t)},Blockly.BlockSvg.prototype.duplicateAndDragCallback_=function(){var t=this;return function(e){setTimeout(function(){var o=t.workspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var n=Blockly.Xml.blockToDom(t);if(o.setResizesEnabled(!1),n=Blockly.Xml.domToBlock(n,o),Blockly.utils.changeObscuredShadowIds(n),!n.getSvgRoot())throw Error("newBlock is not rendered.");var r=t.getRelativeToSurfaceXY();n.moveBy(r.x,r.y),r=r.scale(o.scale);var i=o.getOriginOffsetInPixels();r=goog.math.Coordinate.sum(i,r),i=o.getInjectionDiv().getBoundingClientRect(),o.startDragWithFakeEvent({clientX:r.x+i.left,clientY:r.y+i.top,type:"mousedown",preventDefault:function(){e.preventDefault()},stopPropagation:function(){e.stopPropagation()},target:e.target},n)},0)}},Blockly.BlockSvg.prototype.showContextMenu_=function(t){if(!this.workspace.options.readOnly&&this.contextMenu){var e=this,o=[];if(this.isDeletable()&&this.isMovable()&&!e.isInFlyout){var n={text:Blockly.Msg.DUPLICATE_BLOCK,enabled:!0,callback:e.duplicateAndDragCallback_()};o.push(n),this.isEditable()&&this.workspace.options.comments&&(n={enabled:!goog.userAgent.IE},this.comment?(n.text=Blockly.Msg.REMOVE_COMMENT,n.callback=function(){e.setCommentText(null)}):(n.text=Blockly.Msg.ADD_COMMENT,n.callback=function(){e.setCommentText("")}),o.push(n)),n=this.getDescendants(!0).length;var r=this.getNextBlock();r&&(n-=r.getDescendants(!0).length),n={text:1==n?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(n)),enabled:!0,callback:function(){Blockly.Events.setGroup(!0),e.dispose(!0,!0),Blockly.Events.setGroup(!1)}},o.push(n)}else if(this.parentBlock_&&this.isShadow_)return void this.parentBlock_.showContextMenu_(t);n={enabled:!(goog.isFunction(this.helpUrl)?!this.helpUrl():!this.helpUrl)},n.text=Blockly.Msg.HELP,n.callback=function(){e.showHelp_()},o.push(n),this.customContextMenu&&this.customContextMenu(o),Blockly.ContextMenu.show(t,o,this.RTL),Blockly.ContextMenu.currentBlock=this}},Blockly.BlockSvg.prototype.moveConnections_=function(t,e){if(this.rendered){for(var o=this.getConnections_(!1),n=0;n<o.length;n++)o[n].moveBy(t,e);for(o=this.getIcons(),n=0;n<o.length;n++)o[n].computeIconLocation();for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].moveConnections_(t,e)}},Blockly.BlockSvg.prototype.setDragging=function(t){if(t){var e=this.getSvgRoot();e.translate_="",e.skew_="",Blockly.draggingConnections_=Blockly.draggingConnections_.concat(this.getConnections_(!0)),Blockly.utils.addClass(this.svgGroup_,"blocklyDragging")}else Blockly.draggingConnections_=[],Blockly.utils.removeClass(this.svgGroup_,"blocklyDragging");for(e=0;e<this.childBlocks_.length;e++)this.childBlocks_[e].setDragging(t)},Blockly.BlockSvg.prototype.updateMovable=function(){this.isMovable()?Blockly.utils.addClass(this.svgGroup_,"blocklyDraggable"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDraggable")},Blockly.BlockSvg.prototype.setMovable=function(t){Blockly.BlockSvg.superClass_.setMovable.call(this,t),this.updateMovable()},Blockly.BlockSvg.prototype.setEditable=function(t){Blockly.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var e=0;e<t.length;e++)t[e].updateEditable()},Blockly.BlockSvg.prototype.setShadow=function(t){Blockly.BlockSvg.superClass_.setShadow.call(this,t),this.updateColour()},Blockly.BlockSvg.prototype.setInsertionMarker=function(t,e){Blockly.BlockSvg.superClass_.setInsertionMarker.call(this,t),this.insertionMarkerMinWidth_=e,this.updateColour()},Blockly.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.BlockSvg.prototype.dispose=function(t,e){if(this.workspace){Blockly.Tooltip.hide(),Blockly.Field.startCache();var o=this.workspace;Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Blockly.ContextMenu.currentBlock==this&&Blockly.ContextMenu.hide(),e&&this.rendered&&(this.unplug(t),this.disposeUiEffect()),this.rendered=!1,Blockly.Events.disable();try{for(var n=this.getIcons(),r=0;r<n.length;r++)n[r].dispose()}finally{Blockly.Events.enable()}Blockly.BlockSvg.superClass_.dispose.call(this,t),goog.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgPath_=this.svgGroup_=null,Blockly.Field.stopCache()}},Blockly.BlockSvg.prototype.disposeUiEffect=function(){this.workspace.getAudioManager().play("delete");var t=this.workspace.getSvgXY(this.svgGroup_),e=this.svgGroup_.cloneNode(!0);e.translateX_=t.x,e.translateY_=t.y,e.setAttribute("transform","translate("+e.translateX_+","+e.translateY_+")"),this.workspace.getParentSvg().appendChild(e),e.bBox_=e.getBBox(),Blockly.BlockSvg.disposeUiStep_(e,this.RTL,new Date,this.workspace.scale)},Blockly.BlockSvg.prototype.connectionUiEffect=function(){this.workspace.getAudioManager().play("click")},Blockly.BlockSvg.disposeUiStep_=function(t,e,o,n){var r=(new Date-o)/150;1<r?goog.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(e?-1:1)*t.bBox_.width*n/2*r)+","+(t.translateY_+t.bBox_.height*n*r)+") scale("+(1-r)*n+")"),setTimeout(function(){Blockly.BlockSvg.disposeUiStep_(t,e,o,n)},10))},Blockly.BlockSvg.prototype.disconnectUiEffect=function(){},Blockly.BlockSvg.disconnectUiStop_=function(){},Blockly.BlockSvg.prototype.updateDisabled=function(){},Blockly.BlockSvg.prototype.getCommentText=function(){return this.comment?this.comment.getText().replace(/\s+$/,"").replace(/ +\n/g,"\n"):""},Blockly.BlockSvg.prototype.setCommentText=function(t){var e=!1;goog.isString(t)?(this.comment||(this.comment=new Blockly.Comment(this),e=!0),this.comment.setText(t)):this.comment&&(this.comment.dispose(),e=!0),e&&this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setWarningText=function(t,e){this.setWarningText.pid_||(this.setWarningText.pid_=Object.create(null));var o=e||"";if(o)this.setWarningText.pid_[o]&&(clearTimeout(this.setWarningText.pid_[o]),delete this.setWarningText.pid_[o]);else for(var n in this.setWarningText.pid_)clearTimeout(this.setWarningText.pid_[n]),delete this.setWarningText.pid_[n];if(this.workspace.isDragging()){var r=this;this.setWarningText.pid_[o]=setTimeout(function(){r.workspace&&(delete r.setWarningText.pid_[o],r.setWarningText(t,o))},100)}else{if(this.isInFlyout&&(t=null),n=!1,goog.isString(t))this.warning||(this.warning=new Blockly.Warning(this),n=!0),this.warning.setText(t,o);else if(this.warning&&!o)this.warning.dispose(),n=!0;else if(this.warning){n=this.warning.getText(),this.warning.setText("",o);var i=this.warning.getText();i||this.warning.dispose(),n=n!=i}n&&this.rendered&&(this.render(),this.bumpNeighbours_())}},Blockly.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.block_=this,this.mutator=t,t.createIcon())},Blockly.BlockSvg.prototype.addSelect=function(){Blockly.utils.addClass(this.svgGroup_,"blocklySelected")},Blockly.BlockSvg.prototype.removeSelect=function(){Blockly.utils.removeClass(this.svgGroup_,"blocklySelected")},Blockly.BlockSvg.prototype.setDeleteStyle=function(t){t?Blockly.utils.addClass(this.svgGroup_,"blocklyDraggingDelete"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDraggingDelete")},Blockly.BlockSvg.prototype.setColour=function(t,e,o){Blockly.BlockSvg.superClass_.setColour.call(this,t,e,o),this.rendered&&this.updateColour()},Blockly.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot();e.parentNode.appendChild(e),t=t.getParent()}while(t)},Blockly.BlockSvg.prototype.setPreviousStatement=function(t,e){Blockly.BlockSvg.superClass_.setPreviousStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setNextStatement=function(t,e){Blockly.BlockSvg.superClass_.setNextStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setOutput=function(t,e){Blockly.BlockSvg.superClass_.setOutput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setInputsInline=function(t){Blockly.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.removeInput=function(t,e){Blockly.BlockSvg.superClass_.removeInput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.moveNumberedInputBefore=function(t,e){Blockly.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.appendInput_=function(t,e){var o=Blockly.BlockSvg.superClass_.appendInput_.call(this,t,e);return this.rendered&&(this.render(),this.bumpNeighbours_()),o},Blockly.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&e.push(o.connection)}return e},Blockly.BlockSvg.prototype.makeConnection_=function(t){return new Blockly.RenderedConnection(this,t)},Blockly.BlockSvg.prototype.bumpNeighbours_=function(){if(this.workspace&&Blockly.dragMode_==Blockly.DRAG_NONE){var t=this.getRootBlock();if(!t.isInFlyout)for(var e,o=this.getConnections_(!1),n=0;e=o[n];n++){e.isConnected()&&e.isSuperior()&&e.targetBlock().bumpNeighbours_();for(var r,i=e.neighbours_(Blockly.SNAP_RADIUS),s=0;r=i[s];s++)e.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=t&&(e.isSuperior()?r.bumpAwayFrom_(e):e.bumpAwayFrom_(r))}}},Blockly.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,e=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(e),t.snapToGrid(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY/2),setTimeout(function(){Blockly.Events.setGroup(e),t.bumpNeighbours_(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)},Blockly.BlockSvg.render={},Blockly.BlockSvg.GRID_UNIT=4,Blockly.BlockSvg.SEP_SPACE_X=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.SEP_SPACE_Y=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X=16*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X_OUTPUT=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X_SHADOW_OUTPUT=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_Y=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT=40*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_Y_SINGLE_FIELD_OUTPUT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_STATEMENT_INPUT_HEIGHT=6*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.NOTCH_WIDTH=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.NOTCH_HEIGHT=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.CORNER_RADIUS=1*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.STATEMENT_INPUT_EDGE_WIDTH=4*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.START_HAT_HEIGHT=16,Blockly.BlockSvg.START_HAT_PATH="c 25,-22 71,-22 96,0",Blockly.BlockSvg.NOTCH_PATH_LEFT="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h 12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",Blockly.BlockSvg.NOTCH_PATH_RIGHT="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",Blockly.BlockSvg.NOTCH_START_PADDING=3*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.TOP_LEFT_CORNER_START="m 0,"+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.TOP_LEFT_CORNER="A "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 "+Blockly.BlockSvg.CORNER_RADIUS+",0",Blockly.BlockSvg.TOP_RIGHT_CORNER="a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.BOTTOM_RIGHT_CORNER=" a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 -"+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.BOTTOM_LEFT_CORNER="a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 -"+Blockly.BlockSvg.CORNER_RADIUS+",-"+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.INNER_TOP_LEFT_CORNER=" a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,0 -"+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER="a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,0 "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL="M "+4*Blockly.BlockSvg.GRID_UNIT+",0  h "+4*Blockly.BlockSvg.GRID_UNIT+" l "+4*Blockly.BlockSvg.GRID_UNIT+","+4*Blockly.BlockSvg.GRID_UNIT+" l "+-4*Blockly.BlockSvg.GRID_UNIT+","+4*Blockly.BlockSvg.GRID_UNIT+" h "+-4*Blockly.BlockSvg.GRID_UNIT+" l "+-4*Blockly.BlockSvg.GRID_UNIT+","+-4*Blockly.BlockSvg.GRID_UNIT+" l "+4*Blockly.BlockSvg.GRID_UNIT+","+-4*Blockly.BlockSvg.GRID_UNIT+" z",Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL_WIDTH=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INPUT_SHAPE_SQUARE=Blockly.BlockSvg.TOP_LEFT_CORNER_START+Blockly.BlockSvg.TOP_LEFT_CORNER+" h "+(12*Blockly.BlockSvg.GRID_UNIT-2*Blockly.BlockSvg.CORNER_RADIUS)+Blockly.BlockSvg.TOP_RIGHT_CORNER+" v "+(8*Blockly.BlockSvg.GRID_UNIT-2*Blockly.BlockSvg.CORNER_RADIUS)+Blockly.BlockSvg.BOTTOM_RIGHT_CORNER+" h "+(-12*Blockly.BlockSvg.GRID_UNIT+2*Blockly.BlockSvg.CORNER_RADIUS)+Blockly.BlockSvg.BOTTOM_LEFT_CORNER+" z",Blockly.BlockSvg.INPUT_SHAPE_SQUARE_WIDTH=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INPUT_SHAPE_ROUND="M "+4*Blockly.BlockSvg.GRID_UNIT+",0 h "+4*Blockly.BlockSvg.GRID_UNIT+" a "+4*Blockly.BlockSvg.GRID_UNIT+" "+4*Blockly.BlockSvg.GRID_UNIT+" 0 0 1 0 "+8*Blockly.BlockSvg.GRID_UNIT+" h "+-4*Blockly.BlockSvg.GRID_UNIT+" a "+4*Blockly.BlockSvg.GRID_UNIT+" "+4*Blockly.BlockSvg.GRID_UNIT+" 0 0 1 0 -"+8*Blockly.BlockSvg.GRID_UNIT+" z",Blockly.BlockSvg.INPUT_SHAPE_ROUND_WIDTH=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INPUT_SHAPE_HEIGHT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_HEIGHT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_WIDTH=6*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.EDITABLE_FIELD_PADDING=6,Blockly.BlockSvg.BOX_FIELD_PADDING=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.DROPDOWN_ARROW_PADDING=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_WIDTH_MIN_EDIT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_WIDTH_MAX_EDIT=1/0,Blockly.BlockSvg.FIELD_HEIGHT_MAX_EDIT=Blockly.BlockSvg.FIELD_HEIGHT,Blockly.BlockSvg.FIELD_TOP_PADDING=.5*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.NUMBER_FIELD_CORNER_RADIUS=4*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.TEXT_FIELD_CORNER_RADIUS=1*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_DEFAULT_CORNER_RADIUS=4*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MAX_DISPLAY_LENGTH=1/0,Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INLINE_PADDING_Y=1*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_INITIAL=12,Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_FINAL=12,Blockly.BlockSvg.FIELD_TEXTINPUT_EXPAND_PAST_TRUNCATION=!1,Blockly.BlockSvg.FIELD_TEXTINPUT_ANIMATE_POSITIONING=!1,Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING={1:{0:5*Blockly.BlockSvg.GRID_UNIT,1:2*Blockly.BlockSvg.GRID_UNIT,2:5*Blockly.BlockSvg.GRID_UNIT,3:5*Blockly.BlockSvg.GRID_UNIT},2:{0:3*Blockly.BlockSvg.GRID_UNIT,1:3*Blockly.BlockSvg.GRID_UNIT,2:1*Blockly.BlockSvg.GRID_UNIT,3:2*Blockly.BlockSvg.GRID_UNIT},3:{0:2*Blockly.BlockSvg.GRID_UNIT,1:2*Blockly.BlockSvg.GRID_UNIT,2:2*Blockly.BlockSvg.GRID_UNIT,3:2*Blockly.BlockSvg.GRID_UNIT}},Blockly.BlockSvg.prototype.updateColour=function(){var t=this.getColourTertiary();this.isShadow()&&this.parentBlock_&&(t=this.parentBlock_.getColourTertiary(),this.inputList[0]&&this.inputList[0].fieldRow[0]&&this.inputList[0].fieldRow[0]instanceof Blockly.FieldColour&&(t=Blockly.Colours.colourPickerStroke)),this.svgPath_.setAttribute("stroke",t),t=this.isGlowingBlock_||this.isShadow()?this.getColourSecondary():this.getColour(),this.svgPath_.setAttribute("fill",t),this.svgPath_.setAttribute("fill-opacity",this.getOpacity());for(var e in this.inputShapes_)this.inputShapes_[e].setAttribute("fill",this.getColourTertiary());for(e=this.getIcons(),t=0;t<e.length;t++)e[t].updateColour();for(e=0;t=this.inputList[e];e++)for(var o,n=0;o=t.fieldRow[n];n++)o.setText(null)},Blockly.BlockSvg.prototype.highlightForReplacement=function(t){t?(this.svgPath_.setAttribute("filter","url(#blocklyReplacementGlowFilter)"),Blockly.utils.addClass(this.svgGroup_,"blocklyReplaceable")):(this.svgPath_.removeAttribute("filter"),Blockly.utils.removeClass(this.svgGroup_,"blocklyReplaceable"))},Blockly.BlockSvg.prototype.highlightShapeForInput=function(t,e){var o=this.getInputWithConnection(t);if(!o)throw"No input found for the connection";o=this.inputShapes_[o.name],e?(o.setAttribute("filter","url(#blocklyReplacementGlowFilter)"),Blockly.utils.addClass(this.svgGroup_,"blocklyReplaceable")):(o.removeAttribute("filter"),Blockly.utils.removeClass(this.svgGroup_,"blocklyReplaceable"))},Blockly.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,o=this.getNextBlock();return o&&(o=o.getHeightWidth(),t+=o.height,t-=Blockly.BlockSvg.NOTCH_HEIGHT,e=Math.max(e,o.width)),{height:t,width:e}},Blockly.BlockSvg.prototype.render=function(t){Blockly.Field.startCache(),this.rendered=!0;var e=Blockly.BlockSvg.SEP_SPACE_X;this.RTL&&(e=-e);for(var o=this.getIcons(),n=0;n<o.length;n++)e=o[n].renderIcon(e);e+=this.RTL?Blockly.BlockSvg.SEP_SPACE_X:-Blockly.BlockSvg.SEP_SPACE_X,o=this.renderCompute_(e),this.renderDraw_(e,o),this.renderClassify_(),!1!==t&&((t=this.getParent())?t.render(!0):Blockly.resizeSvgContents(this.workspace)),Blockly.Field.stopCache()},Blockly.BlockSvg.prototype.renderFields_=function(t,e,o){this.RTL&&(e=-e);for(var n,r=0;n=t[r];r++){var i=n.getSvgRoot();if(i){!this.previousConnection||n instanceof Blockly.FieldLabel||(e=this.RTL?Math.min(e,-Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X):Math.max(e,Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X));var s=-n.getSize().height/2,a="";if(this.RTL){var l=e-=n.renderSep+n.renderWidth;s=o+s,n.renderWidth&&(e-=Blockly.BlockSvg.SEP_SPACE_X)}else l=e+n.renderSep,s=o+s,n.renderWidth&&(e+=n.renderSep+n.renderWidth+Blockly.BlockSvg.SEP_SPACE_X);this.RTL&&n instanceof Blockly.FieldImage&&n.getFlipRTL()&&(a="scale(-1 1)",l+=n.renderWidth),i.setAttribute("transform","translate("+l+", "+s+") "+a),this.isInsertionMarker()&&i.setAttribute("display","none")}}return this.RTL?-e:e},Blockly.BlockSvg.prototype.renderCompute_=function(t){var e,o=this.inputList,n=[];n.rightEdge=0;for(var r,i=n.bottomEdge=0,s=!1,a=!1,l=!1,c=void 0,u=0;r=o[u];u++)if(r.isVisible()){if(c&&c!=Blockly.NEXT_STATEMENT&&r.type!=Blockly.NEXT_STATEMENT)var g=n[n.length-1];else c=r.type,g=[],g.type=r.type!=Blockly.NEXT_STATEMENT?Blockly.BlockSvg.INLINE:r.type,g.height=0,g.paddingStart=Blockly.BlockSvg.SEP_SPACE_X,g.paddingEnd=Blockly.BlockSvg.SEP_SPACE_X,n.push(g);if(g.push(r),1===o.length&&this.isShadow()&&this.outputConnection?r.renderHeight=Blockly.BlockSvg.MIN_BLOCK_Y_SINGLE_FIELD_OUTPUT:r.renderHeight=this.outputConnection?Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER:g.type==Blockly.NEXT_STATEMENT?Blockly.BlockSvg.MIN_STATEMENT_INPUT_HEIGHT:e&&e.type==Blockly.NEXT_STATEMENT?Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y:Blockly.BlockSvg.MIN_BLOCK_Y,r.type!=Blockly.INPUT_VALUE||r.connection&&r.connection.isConnected())r.renderWidth=0;else switch(r.connection.getOutputShape()){case Blockly.OUTPUT_SHAPE_SQUARE:r.renderWidth=Blockly.BlockSvg.INPUT_SHAPE_SQUARE_WIDTH;break;case Blockly.OUTPUT_SHAPE_ROUND:r.renderWidth=Blockly.BlockSvg.INPUT_SHAPE_ROUND_WIDTH;break;case Blockly.OUTPUT_SHAPE_HEXAGONAL:r.renderWidth=Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL_WIDTH;break;default:r.renderWidth=0}if(g.statementNotchAtBottom=!0,r.connection&&r.connection.type===Blockly.NEXT_STATEMENT&&(e=r.connection.targetBlock())&&!e.lastConnectionInStack()&&(g.statementNotchAtBottom=!1),r.connection){e=r.connection.targetBlock();var h=0;e?(h=e.getHeightWidth(),e=h.height,h=h.width):e=Blockly.BlockSvg.INPUT_SHAPE_HEIGHT,r.connection.type===Blockly.INPUT_VALUE&&(e+=2*Blockly.BlockSvg.INLINE_PADDING_Y),r.connection.type===Blockly.NEXT_STATEMENT&&g.statementNotchAtBottom&&(e-=Blockly.BlockSvg.NOTCH_HEIGHT),r.renderHeight=Math.max(r.renderHeight,e),r.renderWidth=Math.max(r.renderWidth,h)}g.height=Math.max(g.height,r.renderHeight),r.fieldWidth=0,1==n.length&&(r.fieldWidth+=this.RTL?-t:t),e=!1,h=0;for(var p;p=r.fieldRow[h];h++){0!=h&&(r.fieldWidth+=Blockly.BlockSvg.SEP_SPACE_X);var d=p.getSize();p.renderWidth=d.width,p.renderSep=e&&p.EDITABLE?Blockly.BlockSvg.SEP_SPACE_X:0,r.fieldWidth+=p.renderWidth+p.renderSep,g.height=Math.max(g.height,d.height),e=p.EDITABLE}g.type!=Blockly.BlockSvg.INLINE&&(g.type==Blockly.NEXT_STATEMENT?(a=!0,i=Math.max(i,r.fieldWidth)):g.type==Blockly.INPUT_VALUE?s=!0:g.type==Blockly.DUMMY_INPUT&&(l=!0)),e=g}for(this.computeOutputPadding_(n),n.statementEdge=Blockly.BlockSvg.STATEMENT_INPUT_EDGE_WIDTH+i,this.previousConnection||this.nextConnection?n.rightEdge=Math.max(n.rightEdge,Blockly.BlockSvg.MIN_BLOCK_X):this.outputConnection&&(this.isShadow()?n.rightEdge=Math.max(n.rightEdge,Blockly.BlockSvg.MIN_BLOCK_X_SHADOW_OUTPUT):n.rightEdge=Math.max(n.rightEdge,Blockly.BlockSvg.MIN_BLOCK_X_OUTPUT)),a&&(n.rightEdge=Math.max(n.rightEdge,Blockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT)),u=0;u<n.length;u++)n.bottomEdge+=n[u].height;return 0<this.insertionMarkerMinWidth_&&(n.rightEdge=Math.max(n.rightEdge,this.insertionMarkerMinWidth_)),n.hasValue=s,n.hasStatement=a,n.hasDummy=l,n},Blockly.BlockSvg.prototype.computeOutputPadding_=function(t){if(this.getOutputShape()&&this.outputConnection&&!this.isShadow()&&!(1<t.length)){t=t[0];var e=this.getOutputShape();t.paddingStart=0,t.paddingEnd=0;var o=t[0];if(o.fieldRow[0])var n=0;else n=o.connection,n=n.targetConnection?n.targetConnection.getSourceBlock().getOutputShape():n.getOutputShape(),e==Blockly.OUTPUT_SHAPE_HEXAGONAL&&n!=Blockly.OUTPUT_SHAPE_HEXAGONAL&&(o=o.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER,t.paddingStart+=o/2);t.paddingStart+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[e][n],o=t[t.length-1],o.connection?(n=o.connection,n=n.targetConnection?n.targetConnection.getSourceBlock().getOutputShape():n.getOutputShape(),e==Blockly.OUTPUT_SHAPE_HEXAGONAL&&n!=Blockly.OUTPUT_SHAPE_HEXAGONAL&&(o=o.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER,t.paddingEnd+=o/2)):n=0,t.paddingEnd+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[e][n]}},Blockly.BlockSvg.prototype.renderDraw_=function(t,e){if(this.squareTopLeftCorner_=this.startHat_=!1,this.outputConnection||this.previousConnection||(this.startHat_=this.squareTopLeftCorner_=!0,e.rightEdge=Math.max(e.rightEdge,100)),this.edgeShapeWidth_=0,this.edgeShape_=null,this.outputConnection){var o=this.getOutputShape();o!==Blockly.OUTPUT_SHAPE_HEXAGONAL&&o!==Blockly.OUTPUT_SHAPE_ROUND||(this.edgeShapeWidth_=e.bottomEdge/2,this.edgeShape_=o,this.squareTopLeftCorner_=!0)}o=this.getRelativeToSurfaceXY();var n=[];this.renderDrawTop_(n,o,e.rightEdge);var r=this.renderDrawRight_(n,o,e,t);this.renderDrawBottom_(n,o,r),this.renderDrawLeft_(n,o),o=n.join(" "),this.svgPath_.setAttribute("d",o),this.RTL&&this.svgPath_.setAttribute("transform","scale(-1 1)")},Blockly.BlockSvg.prototype.renderClassify_=function(){var t=[];if(this.outputConnection)this.isShadow_?t.push("argument"):t.push("reporter"),this.edgeShape_===Blockly.OUTPUT_SHAPE_HEXAGONAL?t.push("boolean"):this.edgeShape_===Blockly.OUTPUT_SHAPE_ROUND&&t.push("round");else{for(var e,o=this.inputList,n=0,r=0;e=o[r];r++)e.connection&&e.connection.type===Blockly.NEXT_STATEMENT&&n++;n&&(t.push("c-block"),t.push("c-"+n)),this.startHat_?t.push("hat"):n||t.push("stack"),this.nextConnection||t.push("end")}this.svgGroup_.setAttribute("data-shapes",t.join(" ")),this.getCategory()&&this.svgGroup_.setAttribute("data-category",this.getCategory())},Blockly.BlockSvg.prototype.renderDrawTop_=function(t,e,o){this.squareTopLeftCorner_?(t.push("m 0,0"),this.startHat_&&t.push(Blockly.BlockSvg.START_HAT_PATH),this.edgeShapeWidth_&&t.push("m "+this.edgeShapeWidth_+",0")):(t.push(Blockly.BlockSvg.TOP_LEFT_CORNER_START),t.push(Blockly.BlockSvg.TOP_LEFT_CORNER)),this.previousConnection&&(t.push("H",Blockly.BlockSvg.NOTCH_START_PADDING),t.push(Blockly.BlockSvg.NOTCH_PATH_LEFT),this.previousConnection.moveTo(e.x+(this.RTL?-Blockly.BlockSvg.NOTCH_WIDTH:Blockly.BlockSvg.NOTCH_WIDTH),e.y)),this.width=o},Blockly.BlockSvg.prototype.renderDrawRight_=function(t,e,o,n){for(var r,i,s,a,l,c=0,u=0;l=o[u];u++){if(r=l.paddingStart,0==u&&(r+=this.RTL?-n:n),l.type==Blockly.BlockSvg.INLINE){for(var g=0;s=l[g];g++)if(i=r,r=c,r+=l.height/2,s.align===Blockly.ALIGN_RIGHT?i+=o.rightEdge-s.fieldWidth-2*Blockly.BlockSvg.SEP_SPACE_X:s.align===Blockly.ALIGN_CENTRE&&(i=Math.max(o.rightEdge/2-s.fieldWidth/2,i)),r=this.renderFields_(s.fieldRow,i,r),s.type==Blockly.INPUT_VALUE){this.previousConnection&&(r=Math.max(r,Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X)),i=this.RTL?e.x-r:e.x+r;var h=l.height/2;a=e.y+c+h,s.connection.moveTo(i,a),s.connection.isConnected()&&s.connection.tighten_(),this.renderInputShape_(s,r,c+h),r+=s.renderWidth+Blockly.BlockSvg.SEP_SPACE_X}r-=Blockly.BlockSvg.SEP_SPACE_X,r+=l.paddingEnd,o.rightEdge=Math.max(r,o.rightEdge),r=Math.max(r,o.rightEdge),this.width=Math.max(this.width,r),this.edgeShape_?t.push("H",r-this.edgeShapeWidth_):(t.push("H",r-Blockly.BlockSvg.CORNER_RADIUS-this.edgeShapeWidth_),t.push(Blockly.BlockSvg.TOP_RIGHT_CORNER)),this.edgeShape_||t.push("v",l.height-2*Blockly.BlockSvg.CORNER_RADIUS)}else l.type==Blockly.NEXT_STATEMENT&&(s=l[0],i=r,r=c,this.renderFields_(s.fieldRow,i,r),t.push(Blockly.BlockSvg.BOTTOM_RIGHT_CORNER),r=o.statementEdge+Blockly.BlockSvg.NOTCH_WIDTH,t.push("H",r+Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE+2*Blockly.BlockSvg.CORNER_RADIUS),t.push(Blockly.BlockSvg.NOTCH_PATH_RIGHT),t.push("h","-"+Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE),t.push(Blockly.BlockSvg.INNER_TOP_LEFT_CORNER),t.push("v",l.height-2*Blockly.BlockSvg.CORNER_RADIUS),t.push(Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER),l.statementNotchAtBottom&&(t.push("h ",Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE),t.push(Blockly.BlockSvg.NOTCH_PATH_LEFT)),t.push("H",o.rightEdge-Blockly.BlockSvg.CORNER_RADIUS),i=e.x+(this.RTL?-r:r),a=e.y+c,s.connection.moveTo(i,a),s.connection.isConnected()&&(s.connection.tighten_(),this.width=Math.max(this.width,o.statementEdge+s.connection.targetBlock().getHeightWidth().width)),u==o.length-1||o[u+1].type==Blockly.NEXT_STATEMENT)&&(t.push(Blockly.BlockSvg.TOP_RIGHT_CORNER),t.push("v",Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y-2*Blockly.BlockSvg.CORNER_RADIUS),c+=Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y);c+=l.height}return this.edgeShape_&&(this.edgeShape_===Blockly.OUTPUT_SHAPE_ROUND?t.push("a "+this.edgeShapeWidth_+" "+this.edgeShapeWidth_+" 0 0 1 0 "+2*this.edgeShapeWidth_):this.edgeShape_===Blockly.OUTPUT_SHAPE_HEXAGONAL&&t.push("l "+this.edgeShapeWidth_+" "+this.edgeShapeWidth_+" l "+-this.edgeShapeWidth_+" "+this.edgeShapeWidth_)),o.length||(c=Blockly.BlockSvg.MIN_BLOCK_Y,t.push("V",c)),c},Blockly.BlockSvg.prototype.renderInputShape_=function(t,e,o){var n=this.inputShapes_[t.name];if(n)if(t.connection.targetConnection)n.setAttribute("style","visibility: hidden");else{switch(t.connection.getOutputShape()){case Blockly.OUTPUT_SHAPE_HEXAGONAL:t=Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL;var r=Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL_WIDTH,i="boolean";break;case Blockly.OUTPUT_SHAPE_ROUND:t=Blockly.BlockSvg.INPUT_SHAPE_ROUND,r=Blockly.BlockSvg.INPUT_SHAPE_ROUND_WIDTH,i="round";break;default:t=Blockly.BlockSvg.INPUT_SHAPE_SQUARE,r=Blockly.BlockSvg.INPUT_SHAPE_SQUARE_WIDTH,i="square"}e=this.RTL?-e-r:e,o-=Blockly.BlockSvg.INPUT_SHAPE_HEIGHT/2,n.setAttribute("d",t),n.setAttribute("transform","translate("+e+","+o+")"),n.setAttribute("data-argument-type",i),n.setAttribute("style","visibility: visible")}},Blockly.BlockSvg.prototype.renderDrawBottom_=function(t,e,o){this.height=o,this.edgeShape_||t.push(Blockly.BlockSvg.BOTTOM_RIGHT_CORNER),this.nextConnection&&(t.push("H",Blockly.BlockSvg.NOTCH_WIDTH+Blockly.BlockSvg.NOTCH_START_PADDING+Blockly.BlockSvg.CORNER_RADIUS," "),t.push(Blockly.BlockSvg.NOTCH_PATH_RIGHT),this.nextConnection.moveTo(this.RTL?e.x-Blockly.BlockSvg.NOTCH_WIDTH:e.x+Blockly.BlockSvg.NOTCH_WIDTH,e.y+o),this.nextConnection.isConnected()&&this.nextConnection.tighten_(),this.height+=Blockly.BlockSvg.NOTCH_HEIGHT),this.edgeShape_?t.push("H",this.edgeShapeWidth_):(t.push("H",Blockly.BlockSvg.CORNER_RADIUS),t.push(Blockly.BlockSvg.BOTTOM_LEFT_CORNER))},Blockly.BlockSvg.prototype.renderDrawLeft_=function(t,e){this.outputConnection&&this.outputConnection.moveTo(e.x,e.y+this.height/2),this.edgeShape_&&(this.edgeShape_===Blockly.OUTPUT_SHAPE_ROUND?t.push("a "+this.edgeShapeWidth_+" "+this.edgeShapeWidth_+" 0 0 1 0 -"+2*this.edgeShapeWidth_):this.edgeShape_===Blockly.OUTPUT_SHAPE_HEXAGONAL&&t.push("l "+-this.edgeShapeWidth_+" "+-this.edgeShapeWidth_+" l "+this.edgeShapeWidth_+" "+-this.edgeShapeWidth_)),t.push("z")},Blockly.BlockSvg.prototype.positionNewBlock=function(t,e,o){e.type==Blockly.NEXT_STATEMENT&&t.moveBy(o.x_-e.x_,o.y_-e.y_)},Blockly.Msg={},goog.getMsgOrig=goog.getMsg,goog.getMsg=function(t,e){var o=goog.getMsg.blocklyMsgMap[t];return o&&(t=Blockly.Msg[o]),goog.getMsgOrig(t,e)},goog.getMsg.blocklyMsgMap={Today:"TODAY"},Blockly.FieldTextInput=function(t,e,o){Blockly.FieldTextInput.superClass_.constructor.call(this,t,e),this.setRestrictor(o),this.addArgType("text")},goog.inherits(Blockly.FieldTextInput,Blockly.Field),Blockly.FieldTextInput.ANIMATION_TIME=.25,Blockly.FieldTextInput.TEXT_MEASURE_PADDING_MAGIC=45,Blockly.FieldTextInput.prototype.CURSOR="text",Blockly.FieldTextInput.prototype.spellcheck_=!0,Blockly.FieldTextInput.prototype.init=function(){Blockly.FieldTextInput.superClass_.init.call(this),this.sourceBlock_.isShadow()||(this.box_=Blockly.utils.createSvgElement("rect",{rx:Blockly.BlockSvg.CORNER_RADIUS,ry:Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,fill:Blockly.Colours.textField,stroke:this.sourceBlock_.getColourTertiary()}),this.fieldGroup_.insertBefore(this.box_,this.textElement_))},Blockly.FieldTextInput.prototype.dispose=function(){Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldTextInput.superClass_.dispose.call(this)},Blockly.FieldTextInput.prototype.setValue=function(t){if(null!==t){if(this.sourceBlock_){var e=this.callValidator(t);null!==e&&(t=e)}Blockly.Field.prototype.setValue.call(this,t)}},Blockly.FieldTextInput.prototype.setText=function(t){null!==t&&(t=String(t))!==this.text_&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.text_,t)),Blockly.Field.prototype.setText.call(this,t))},Blockly.FieldTextInput.prototype.setSpellcheck=function(t){this.spellcheck_=t},Blockly.FieldTextInput.prototype.setRestrictor=function(t){this.restrictor_=t},Blockly.FieldTextInput.prototype.showEditor_=function(t,e,o,n){this.workspace_=this.sourceBlock_.workspace,t=t||!1;var r=e||!1;Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_(),this.widgetDisposeAnimationFinished_(),Blockly.FieldTextInput.ANIMATION_TIME),e=Blockly.WidgetDiv.DIV,e.className+=" fieldTextInput";var i=goog.dom.createDom("INPUT","blocklyHtmlInput");i.setAttribute("spellcheck",this.spellcheck_),r&&i.setAttribute("readonly","true"),Blockly.FieldTextInput.htmlInput_=i,e.appendChild(i),o&&(this.sourceBlock_.RTL?i.style.paddingLeft=this.arrowSize_+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING+"px":i.style.paddingRight=this.arrowSize_+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING+"px",o=goog.dom.createDom("IMG","blocklyTextDropDownArrow"),o.setAttribute("src",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow-dark.svg"),o.style.width=this.arrowSize_+"px",o.style.height=this.arrowSize_+"px",o.style.top=this.arrowY_+"px",o.style.cursor="pointer",this.sourceBlock_.RTL?o.style.left="11px":o.style.right="11px",n&&(i.dropDownArrowMouseWrapper_=Blockly.bindEvent_(o,"mousedown",this,n)),e.appendChild(o)),i.value=i.defaultValue=this.text_,i.oldValue_=null,this.validate_(),this.resizeEditor_(),t||(i.focus(),i.select(),i.setSelectionRange(0,99999)),i.onKeyDownWrapper_=Blockly.bindEventWithChecks_(i,"keydown",this,this.onHtmlInputKeyDown_),i.onKeyUpWrapper_=Blockly.bindEventWithChecks_(i,"keyup",this,this.onHtmlInputChange_),i.onKeyPressWrapper_=Blockly.bindEventWithChecks_(i,"keypress",this,this.onHtmlInputChange_),i.onInputWrapper_=Blockly.bindEvent_(i,"input",this,this.onHtmlInputChange_),i.onWorkspaceChangeWrapper_=this.resizeEditor_.bind(this),this.workspace_.addChangeListener(i.onWorkspaceChangeWrapper_),n="box-shadow "+Blockly.FieldTextInput.ANIMATION_TIME+"s",Blockly.BlockSvg.FIELD_TEXTINPUT_ANIMATE_POSITIONING&&(e.style.transition+=",padding "+Blockly.FieldTextInput.ANIMATION_TIME+"s,width "+Blockly.FieldTextInput.ANIMATION_TIME+"s,height "+Blockly.FieldTextInput.ANIMATION_TIME+"s,margin-left "+Blockly.FieldTextInput.ANIMATION_TIME+"s"),e.style.transition=n,i.style.transition="font-size "+Blockly.FieldTextInput.ANIMATION_TIME+"s",i.style.fontSize=Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_FINAL+"pt",e.style.boxShadow="0px 0px 0px 4px "+Blockly.Colours.fieldShadow},Blockly.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){var e=Blockly.FieldTextInput.htmlInput_;13==t.keyCode?(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):27==t.keyCode?(e.value=e.defaultValue,Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):9==t.keyCode&&(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST=[97,99,118,120],Blockly.FieldTextInput.prototype.onHtmlInputChange_=function(t){if("keypress"===t.type&&this.restrictor_){var e=!1;if(goog.userAgent.GECKO){var o=t.charCode;32>o||127==o?e=!0:(t.metaKey||t.ctrlKey)&&(e=-1<Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST.indexOf(o))}else o=t.keyCode;if(o=String.fromCharCode(o),!e&&!this.restrictor_.test(o)&&t.preventDefault)return void t.preventDefault()}t=Blockly.FieldTextInput.htmlInput_,e=t.value,e!==t.oldValue_?(t.oldValue_=e,this.setText(e),this.validate_()):goog.userAgent.WEBKIT&&this.sourceBlock_.render(),this.resizeEditor_()},Blockly.FieldTextInput.prototype.validate_=function(){var t=!0;goog.asserts.assertObject(Blockly.FieldTextInput.htmlInput_);var e=Blockly.FieldTextInput.htmlInput_;this.sourceBlock_&&(t=this.callValidator(e.value)),null===t?Blockly.utils.addClass(e,"blocklyInvalidInput"):Blockly.utils.removeClass(e,"blocklyInvalidInput")},Blockly.FieldTextInput.prototype.resizeEditor_=function(){var t=this.sourceBlock_.workspace.scale,e=Blockly.WidgetDiv.DIV;if(Blockly.BlockSvg.FIELD_TEXTINPUT_EXPAND_PAST_TRUNCATION){var o=Blockly.utils.measureText(Blockly.FieldTextInput.htmlInput_.style.fontSize,Blockly.FieldTextInput.htmlInput_.style.fontFamily,Blockly.FieldTextInput.htmlInput_.style.fontWeight,Blockly.FieldTextInput.htmlInput_.value);o+=Blockly.FieldTextInput.TEXT_MEASURE_PADDING_MAGIC,o*=t}else o=this.sourceBlock_.getHeightWidth().width*t;o=Math.max(o,Blockly.BlockSvg.FIELD_WIDTH_MIN_EDIT*t),o=Math.min(o,Blockly.BlockSvg.FIELD_WIDTH_MAX_EDIT*t),e.style.width=o/t+1+"px",e.style.height=Blockly.BlockSvg.FIELD_HEIGHT+1+"px",e.style.transform="scale("+t+")";var n=this.sourceBlock_.getHeightWidth().width;e.style.marginLeft=-.5*(o-n*t)+"px",n=this.getBorderRadius()+.5,e.style.borderRadius=n+"px",Blockly.FieldTextInput.htmlInput_.style.borderRadius=n+"px",n=this.sourceBlock_.getColourTertiary(),e.style.borderColor=n,n=this.getAbsoluteXY_(),n.x-=t/2,n.y-=t/2,this.sourceBlock_.RTL&&(n.x+=o,n.x-=e.offsetWidth*t,n.x+=1*t),n.y+=1*t,goog.userAgent.GECKO&&Blockly.WidgetDiv.DIV.style.top&&(n.x+=2*t,n.y+=1*t),goog.userAgent.WEBKIT&&(n.y-=1*t),e.style.left=n.x+"px",e.style.top=n.y+"px"},Blockly.FieldTextInput.prototype.getBorderRadius=function(){return this.sourceBlock_.getOutputShape()==Blockly.OUTPUT_SHAPE_ROUND?Blockly.BlockSvg.NUMBER_FIELD_CORNER_RADIUS:Blockly.BlockSvg.TEXT_FIELD_CORNER_RADIUS},Blockly.FieldTextInput.prototype.widgetDispose_=function(){var t=this;return function(){var e=Blockly.WidgetDiv.DIV,o=Blockly.FieldTextInput.htmlInput_,n=o.value;t.sourceBlock_&&(null===(n=t.callValidator(n))?n=o.defaultValue:t.onFinishEditing_&&t.onFinishEditing_(n)),t.setText(n),t.sourceBlock_.rendered&&t.sourceBlock_.render(),Blockly.unbindEvent_(o.onKeyDownWrapper_),Blockly.unbindEvent_(o.onKeyUpWrapper_),Blockly.unbindEvent_(o.onKeyPressWrapper_),Blockly.unbindEvent_(o.onInputWrapper_),o.dropDownArrowMouseWrapper_&&Blockly.unbindEvent_(o.dropDownArrowMouseWrapper_),t.workspace_.removeChangeListener(o.onWorkspaceChangeWrapper_),Blockly.Events.setGroup(!1),o.style.fontSize=Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_INITIAL+"pt",e.style.boxShadow="",t.sourceBlock_&&(o=t.sourceBlock_.getHeightWidth(),e.style.width=o.width+1+"px",e.style.height=o.height+1+"px"),e.style.marginLeft=0}},Blockly.FieldTextInput.prototype.widgetDisposeAnimationFinished_=function(){return function(){var t=Blockly.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",Blockly.WidgetDiv.DIV.className="blocklyWidgetDiv",Blockly.WidgetDiv.DIV.removeAttribute("style"),Blockly.FieldTextInput.htmlInput_.style.transition="",Blockly.FieldTextInput.htmlInput_=null}},Blockly.FieldTextInput.numberValidator=function(t){return console.warn("Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead."),null===t?null:(t=String(t),t=t.replace(/O/gi,"0"),t=t.replace(/,/g,""),t=parseFloat(t||0),isNaN(t)?null:String(t))},Blockly.FieldTextInput.nonnegativeIntegerValidator=function(t){return(t=Blockly.FieldTextInput.numberValidator(t))&&(t=String(Math.max(0,Math.floor(t)))),t},Blockly.FieldAngle=function(t,e){this.symbol_=Blockly.utils.createSvgElement("tspan",{},null),this.symbol_.appendChild(document.createTextNode("°")),t=t&&!isNaN(t)?String(t):"0",Blockly.FieldAngle.superClass_.constructor.call(this,t,e),this.addArgType("angle")},goog.inherits(Blockly.FieldAngle,Blockly.FieldTextInput),Blockly.FieldAngle.ROUND=15,Blockly.FieldAngle.HALF=50,Blockly.FieldAngle.CLOCKWISE=!0,Blockly.FieldAngle.OFFSET=90,Blockly.FieldAngle.WRAP=180,Blockly.FieldAngle.RADIUS=Blockly.FieldAngle.HALF-1,Blockly.FieldAngle.prototype.dispose_=function(){var t=this;return function(){Blockly.FieldAngle.superClass_.dispose_.call(t)(),t.gauge_=null,t.clickWrapper_&&Blockly.unbindEvent_(t.clickWrapper_),t.moveWrapper_&&Blockly.unbindEvent_(t.moveWrapper_)}},Blockly.FieldAngle.prototype.showEditor_=function(){Blockly.FieldAngle.superClass_.showEditor_.call(this,goog.userAgent.MOBILE||goog.userAgent.ANDROID||goog.userAgent.IPAD),Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var t=Blockly.DropDownDiv.getContentDiv();t=Blockly.utils.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",height:2*Blockly.FieldAngle.HALF+"px",width:2*Blockly.FieldAngle.HALF+"px"},t),Blockly.utils.createSvgElement("circle",{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t),this.gauge_=Blockly.utils.createSvgElement("path",{class:"blocklyAngleGauge"},t),this.line_=Blockly.utils.createSvgElement("line",{x1:Blockly.FieldAngle.HALF,y1:Blockly.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var e=0;360>e;e+=15)Blockly.utils.createSvgElement("line",{x1:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS,y1:Blockly.FieldAngle.HALF,x2:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS-(0==e%45?10:5),y2:Blockly.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+e+","+Blockly.FieldAngle.HALF+","+Blockly.FieldAngle.HALF+")"},t);Blockly.DropDownDiv.setColour(this.sourceBlock_.parentBlock_.getColour(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.clickWrapper_=Blockly.bindEvent_(t,"click",this,function(){Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hide(),Blockly.unbindEvent_(this.moveWrapper_)}),this.moveWrapper_=Blockly.bindEvent_(t,"mousemove",this,this.onMouseMove),this.updateGraph_()},Blockly.FieldAngle.prototype.onMouseMove=function(t){var e=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-e.left-Blockly.FieldAngle.HALF;t=t.clientY-e.top-Blockly.FieldAngle.HALF,e=Math.atan(-t/o),isNaN(e)||(e=goog.math.toDegrees(e),0>o?e+=180:0<t&&(e+=360),e=Blockly.FieldAngle.CLOCKWISE?Blockly.FieldAngle.OFFSET+360-e:e-Blockly.FieldAngle.OFFSET,Blockly.FieldAngle.ROUND&&(e=Math.round(e/Blockly.FieldAngle.ROUND)*Blockly.FieldAngle.ROUND),e=this.callValidator(e),Blockly.FieldTextInput.htmlInput_.value=e,this.setValue(e),this.validate_(),this.resizeEditor_())},Blockly.FieldAngle.prototype.setText=function(t){Blockly.FieldAngle.superClass_.setText.call(this,t),this.textElement_&&(this.updateGraph_(),this.size_.width=0)},Blockly.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+Blockly.FieldAngle.OFFSET,e=goog.math.toRadians(t);t=["M ",Blockly.FieldAngle.HALF,",",Blockly.FieldAngle.HALF];var o=Blockly.FieldAngle.HALF,n=Blockly.FieldAngle.HALF;if(!isNaN(e)){var r=goog.math.toRadians(Blockly.FieldAngle.OFFSET),i=Math.cos(r)*Blockly.FieldAngle.RADIUS,s=Math.sin(r)*-Blockly.FieldAngle.RADIUS;Blockly.FieldAngle.CLOCKWISE&&(e=2*r-e),o+=Math.cos(e)*Blockly.FieldAngle.RADIUS,n-=Math.sin(e)*Blockly.FieldAngle.RADIUS,e=Math.abs(Math.floor((e-r)/Math.PI)%2),Blockly.FieldAngle.CLOCKWISE&&(e=1-e),t.push(" l ",i,",",s," A ",Blockly.FieldAngle.RADIUS,",",Blockly.FieldAngle.RADIUS," 0 ",e," ",Number(Blockly.FieldAngle.CLOCKWISE)," ",o,",",n," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",n)}},Blockly.FieldAngle.prototype.classValidator=function(t){return null===t?null:(t=parseFloat(t||0),isNaN(t)?null:(t%=360,0>t&&(t+=360),t>Blockly.FieldAngle.WRAP&&(t-=360),String(t)))},Blockly.FieldCheckbox=function(t,e){Blockly.FieldCheckbox.superClass_.constructor.call(this,"",e),this.setValue(t),this.addArgType("checkbox")},goog.inherits(Blockly.FieldCheckbox,Blockly.Field),Blockly.FieldCheckbox.CHECK_CHAR="✓",Blockly.FieldCheckbox.prototype.CURSOR="default",Blockly.FieldCheckbox.prototype.init=function(){if(!this.fieldGroup_){Blockly.FieldCheckbox.superClass_.init.call(this),this.checkElement_=Blockly.utils.createSvgElement("text",{class:"blocklyText blocklyCheckbox",x:-3,y:14},this.fieldGroup_);var t=document.createTextNode(Blockly.FieldCheckbox.CHECK_CHAR);this.checkElement_.appendChild(t),this.checkElement_.style.display=this.state_?"block":"none"}};Blockly.FieldCheckbox.prototype.getValue=function(){return String(this.state_).toUpperCase()},Blockly.FieldCheckbox.prototype.setValue=function(t){t="string"==typeof t?"TRUE"==t.toUpperCase():!!t,this.state_!==t&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,t)),this.state_=t,this.checkElement_&&(this.checkElement_.style.display=t?"block":"none"))},Blockly.FieldCheckbox.prototype.showEditor_=function(){var t=!this.state_;this.sourceBlock_&&(t=this.callValidator(t)),null!==t&&this.setValue(String(t).toUpperCase())},Blockly.FieldColour=function(t,e){Blockly.FieldColour.superClass_.constructor.call(this,t,e),this.addArgType("colour")},goog.inherits(Blockly.FieldColour,Blockly.Field),Blockly.FieldColour.prototype.colours_=null,Blockly.FieldColour.prototype.columns_=0,Blockly.FieldColour.prototype.init=function(t){Blockly.FieldColour.superClass_.init.call(this,t),this.setValue(this.getValue())},Blockly.FieldColour.prototype.CURSOR="default",Blockly.FieldColour.prototype.dispose=function(){Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldColour.superClass_.dispose.call(this)},Blockly.FieldColour.prototype.getValue=function(){return this.colour_},Blockly.FieldColour.prototype.setValue=function(t){this.sourceBlock_&&Blockly.Events.isEnabled()&&this.colour_!=t&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.colour_,t)),this.colour_=t,this.sourceBlock_&&this.sourceBlock_.setColour(t,t,t)},Blockly.FieldColour.prototype.getText=function(){var t=this.colour_,e=t.match(/^#(.)\1(.)\2(.)\3$/);return e&&(t="#"+e[1]+e[2]+e[3]),t},Blockly.FieldColour.prototype.getSize=function(){return new goog.math.Size(Blockly.BlockSvg.FIELD_WIDTH,Blockly.BlockSvg.FIELD_HEIGHT)},Blockly.FieldColour.COLOURS=goog.ui.ColorPicker.SIMPLE_GRID_COLORS,Blockly.FieldColour.COLUMNS=7,Blockly.FieldColour.prototype.setColours=function(t){return this.colours_=t,this},Blockly.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},Blockly.FieldColour.prototype.showEditor_=function(){Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,Blockly.FieldColour.widgetDispose_);var t=new goog.ui.ColorPicker;t.setSize(this.columns_||Blockly.FieldColour.COLUMNS),t.setColors(this.colours_||Blockly.FieldColour.COLOURS);var e=goog.dom.getViewportSize(),o=goog.style.getViewportPageOffset(document),n=this.getAbsoluteXY_(),r=this.getScaledBBox_();t.render(Blockly.WidgetDiv.DIV),t.setSelectedColor(this.getValue());var i=goog.style.getSize(t.getElement());n.y=n.y+i.height+r.height>=e.height+o.y?n.y-(i.height-1):n.y+(r.height-1),this.sourceBlock_.RTL?(n.x+=r.width,n.x-=i.width,n.x<o.x&&(n.x=o.x)):n.x>e.width+o.x-i.width&&(n.x=e.width+o.x-i.width),Blockly.WidgetDiv.position(n.x,n.y,e,o,this.sourceBlock_.RTL);var s=this;Blockly.FieldColour.changeEventKey_=goog.events.listen(t,goog.ui.ColorPicker.EventType.CHANGE,function(t){t=t.target.getSelectedColor()||"#000000",Blockly.WidgetDiv.hide(),s.sourceBlock_&&(t=s.callValidator(t)),null!==t&&s.setValue(t)})},Blockly.FieldColour.widgetDispose_=function(){Blockly.FieldColour.changeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColour.changeEventKey_),Blockly.Events.setGroup(!1)},Blockly.FieldDropdown=function(t,e){this.menuGenerator_=t,this.trimOptions_();var o=this.getOptions()[0];Blockly.FieldDropdown.superClass_.constructor.call(this,o[1],e),this.addArgType("dropdown")},goog.inherits(Blockly.FieldDropdown,Blockly.Field),Blockly.FieldDropdown.CHECKMARK_OVERHANG=25,Blockly.FieldDropdown.prototype.CURSOR="default",Blockly.FieldDropdown.prototype.selectedItem=null,Blockly.FieldDropdown.prototype.value_="",Blockly.FieldDropdown.prototype.imageElement_=null,Blockly.FieldDropdown.prototype.imageJson_=null,Blockly.FieldDropdown.prototype.init=function(){if(!this.fieldGroup_){this.arrowSize_=12,this.arrowX_=0,this.arrowY_=11,this.arrow_=Blockly.utils.createSvgElement("image",{height:this.arrowSize_+"px",width:this.arrowSize_+"px"}),this.arrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow.svg"),Blockly.FieldDropdown.superClass_.init.call(this),this.sourceBlock_.isShadow()||(this.box_=Blockly.utils.createSvgElement("rect",{rx:Blockly.BlockSvg.CORNER_RADIUS,ry:Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,stroke:this.sourceBlock_.getColourTertiary(),fill:this.sourceBlock_.getColour(),class:"blocklyBlockBackground","fill-opacity":1},null),this.fieldGroup_.insertBefore(this.box_,this.textElement_));var t=this.text_;this.text_=null,this.setText(t)}},Blockly.FieldDropdown.prototype.showEditor_=function(){this.dropDownOpen_=!0,Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var t=Blockly.DropDownDiv.getContentDiv(),e=this,o=new goog.ui.Menu;o.setRightToLeft(this.sourceBlock_.RTL);for(var n=this.getOptions(),r=0;r<n.length;r++){var i=n[r][0],s=n[r][1];if("object"==typeof i){var a=new Image(i.width,i.height);a.src=i.src,a.alt=i.alt||"",i=a}i=new goog.ui.MenuItem(i),i.setRightToLeft(this.sourceBlock_.RTL),i.setValue(s),i.setCheckable(!0),o.addChild(i,!0),s=s==this.value_,i.setChecked(s),s&&(this.selectedItem=i)}goog.events.listen(o,goog.ui.Component.EventType.ACTION,function(t){(t=t.target)&&e.onItemSelected(this,t),Blockly.DropDownDiv.hide(),Blockly.Events.setGroup(!1)}),o.getHandler().listen(o.getElement(),goog.events.EventType.TOUCHSTART,function(t){this.getOwnerControl(t.target).handleMouseDown(t)}),o.getHandler().listen(o.getElement(),goog.events.EventType.TOUCHEND,function(t){this.getOwnerControl(t.target).performActionInternal(t)}),o.render(t),t=o.getElement(),Blockly.utils.addClass(t,"blocklyDropdownMenu"),goog.style.getSize(t).height=t.scrollHeight,n=this.sourceBlock_.isShadow()?this.sourceBlock_.parentBlock_.getColour():this.sourceBlock_.getColour(),Blockly.DropDownDiv.setColour(n,this.sourceBlock_.getColourTertiary()),n=this.sourceBlock_.isShadow()?this.sourceBlock_.parentBlock_.getCategory():this.sourceBlock_.getCategory(),Blockly.DropDownDiv.setCategory(n),r=this.sourceBlock_.workspace.scale,s=this.size_.width,n=this.size_.height,s*=r,n*=r,r=this.fieldGroup_.getBoundingClientRect(),s=r.left+s/2,n=r.top+n,r=r.top,Blockly.DropDownDiv.setBoundsElement(this.sourceBlock_.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,s,n,s,r,this.onHide.bind(this)),o.setAllowAutoFocus(!0),t.focus(),this.disableColourChange_||(this.sourceBlock_.isShadow()?(this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourTertiary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary())):this.box_&&this.box_.setAttribute("fill",this.sourceBlock_.getColourTertiary()))},Blockly.FieldDropdown.prototype.onHide=function(){this.dropDownOpen_=!1,!this.disableColourChange_&&this.sourceBlock_&&(this.sourceBlock_.isShadow()?this.sourceBlock_.setColour(this.savedPrimary_,this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()):this.box_&&this.box_.setAttribute("fill",this.sourceBlock_.getColour()))},Blockly.FieldDropdown.prototype.onItemSelected=function(t,e){var o=e.getValue();this.sourceBlock_&&(o=this.callValidator(o)),null!==o&&this.setValue(o)},Blockly.FieldDropdown.prototype.trimOptions_=function(){this.suffixField=this.prefixField=null;var t=this.menuGenerator_;if(goog.isArray(t)){for(var e=!1,o=0;o<t.length;o++){var n=t[o][0];"string"==typeof n?t[o][0]=Blockly.utils.replaceMessageReferences(n):(null!=n.alt&&(t[o][0].alt=Blockly.utils.replaceMessageReferences(n.alt)),e=!0)}if(!(e||2>t.length)){var r=[];for(o=0;o<t.length;o++)r.push(t[o][0]);if(o=Blockly.utils.shortestStringLength(r),e=Blockly.utils.commonWordPrefix(r,o),n=Blockly.utils.commonWordSuffix(r,o),(e||n)&&!(o<=e+n)){for(e&&(this.prefixField=r[0].substring(0,e-1)),n&&(this.suffixField=r[0].substr(1-n)),r=[],o=0;o<t.length;o++){var i=t[o][0],s=t[o][1];i=i.substring(e,i.length-n),r[o]=[i,s]}this.menuGenerator_=r}}}},Blockly.FieldDropdown.prototype.isOptionListDynamic=function(){return goog.isFunction(this.menuGenerator_)},Blockly.FieldDropdown.prototype.getOptions=function(){return goog.isFunction(this.menuGenerator_)?this.menuGenerator_.call(this):this.menuGenerator_},Blockly.FieldDropdown.prototype.getValue=function(){return this.value_},Blockly.FieldDropdown.prototype.setValue=function(t){if(null!==t&&t!==this.value_){this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.value_,t)),this.selectedItem&&(this.selectedItem.setChecked(!1),this.selectedItem=null),this.value_=t;for(var e=this.getOptions(),o=0;o<e.length;o++)if(e[o][1]==t)return t=e[o][0],void("object"==typeof t?(this.imageJson_=t,this.setText(t.alt)):(this.imageJson_=null,this.setText(t)));this.setText(t)}},Blockly.FieldDropdown.prototype.setText=function(t){null!==t&&t!==this.text_&&(this.text_=t,this.updateTextNode_(),this.textElement_&&(this.textElement_.setAttribute("class",this.textElement_.getAttribute("class")+" blocklyDropdownText"),this.textElement_.parentNode.appendChild(this.arrow_)),this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()))},Blockly.FieldDropdown.prototype.positionArrow=function(t){return this.arrow_?(this.arrowX_=this.sourceBlock_.RTL?this.arrowSize_-Blockly.BlockSvg.DROPDOWN_ARROW_PADDING:t+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING/2,t=this.arrowSize_+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING,this.box_&&(this.arrowX_+=Blockly.BlockSvg.BOX_FIELD_PADDING),this.arrow_.setAttribute("transform","translate("+this.arrowX_+","+this.arrowY_+")"),t):0},Blockly.FieldDropdown.prototype.dispose=function(){this.selectedItem=null,Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldDropdown.superClass_.dispose.call(this)},Blockly.FieldIconMenu=function(t){this.icons_=t,Blockly.FieldIconMenu.superClass_.constructor.call(this,t[0].value),this.addArgType("iconmenu")},goog.inherits(Blockly.FieldIconMenu,Blockly.Field),Blockly.FieldIconMenu.DROPDOWN_WIDTH=168,Blockly.FieldIconMenu.savedPrimary_=null,Blockly.FieldIconMenu.prototype.init=function(t){this.arrowX_=18,this.arrowY_=10,t.RTL&&(this.arrowX_=-this.arrowX_-12),this.arrowIcon_=Blockly.utils.createSvgElement("image",{height:"12px",width:"12px",transform:"translate("+this.arrowX_+","+this.arrowY_+")"}),this.arrowIcon_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow.svg"),t.getSvgRoot().appendChild(this.arrowIcon_),Blockly.FieldIconMenu.superClass_.init.call(this,t)},Blockly.FieldIconMenu.prototype.CURSOR="default",Blockly.FieldIconMenu.prototype.setValue=function(t){null!==t&&t!==this.value_&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,t)),this.value_=t,this.setParentFieldImage(this.getSrcForValue(this.value_)))},Blockly.FieldIconMenu.prototype.setParentFieldImage=function(t){if(this.sourceBlock_&&this.sourceBlock_.parentBlock_)for(var e,o=this.sourceBlock_.parentBlock_,n=0;e=o.inputList[n];n++)for(var r,i=0;r=e.fieldRow[i];i++)if(r instanceof Blockly.FieldImage)return void r.setValue(t)},Blockly.FieldIconMenu.prototype.getValue=function(){return this.value_},Blockly.FieldIconMenu.prototype.getSrcForValue=function(t){for(var e,o=0;e=this.icons_[o];o++)if(e.value===t)return e.src},Blockly.FieldIconMenu.prototype.showEditor_=function(){if(!Blockly.DropDownDiv.hideIfOwner(this)){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var t=Blockly.DropDownDiv.getContentDiv();t.setAttribute("role","menu"),t.setAttribute("aria-haspopup","true");for(var e,o=0;e=this.icons_[o];o++){if("placeholder"==e.type){var n=document.createElement("span");n.setAttribute("class","blocklyDropDownPlaceholder"),n.style.width=e.width+"px",n.style.height=e.height+"px"}else{n=document.createElement("button"),n.setAttribute("id",":"+o),n.setAttribute("role","menuitem"),n.setAttribute("class","blocklyDropDownButton"),n.title=e.alt,n.style.width=e.width+"px",n.style.height=e.height+"px";var r=this.sourceBlock_.getColour();e.value==this.getValue()&&(r=this.sourceBlock_.getColourTertiary(),n.setAttribute("aria-selected","true")),n.style.backgroundColor=r,n.style.borderColor=this.sourceBlock_.getColourTertiary(),Blockly.bindEvent_(n,"click",this,this.buttonClick_),Blockly.bindEvent_(n,"mouseup",this,this.buttonClick_),Blockly.bindEvent_(n,"mousedown",n,function(t){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),t.preventDefault()}),Blockly.bindEvent_(n,"mouseover",n,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),t.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(n,"mouseout",n,function(){this.setAttribute("class","blocklyDropDownButton"),t.removeAttribute("aria-activedescendant")}),r=document.createElement("img"),r.src=e.src,n.setAttribute("data-value",e.value),r.setAttribute("data-value",e.value),n.appendChild(r)}t.appendChild(n)}t.style.width=Blockly.FieldIconMenu.DROPDOWN_WIDTH+"px",Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),o=this.sourceBlock_.workspace.scale,o=-Blockly.BlockSvg.MIN_BLOCK_Y*o-Blockly.BlockSvg.FIELD_Y_OFFSET*o,Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,this.onHide_.bind(this),o)||this.arrowIcon_.setAttribute("transform","translate("+(this.arrowX_+Blockly.DropDownDiv.ARROW_SIZE/1.5+1)+","+(this.arrowY_+Blockly.DropDownDiv.ARROW_SIZE/1.5)+") rotate(180)")}},Blockly.FieldIconMenu.prototype.buttonClick_=function(t){t=t.target.getAttribute("data-value"),this.setValue(t),Blockly.DropDownDiv.hide()},Blockly.FieldIconMenu.prototype.onHide_=function(){this.sourceBlock_&&this.sourceBlock_.setColour(this.savedPrimary_,this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup"),Blockly.DropDownDiv.content_.removeAttribute("aria-activedescendant"),this.arrowIcon_.setAttribute("transform","translate("+this.arrowX_+","+this.arrowY_+")")},Blockly.FieldImage=function(t,e,o,n,r){this.sourceBlock_=null,this.height_=Number(o),this.width_=Number(e),this.size_=new goog.math.Size(this.width_,this.height_),this.text_=n||"",this.flipRTL_=r,this.setValue(t)},goog.inherits(Blockly.FieldImage,Blockly.Field),Blockly.FieldImage.prototype.EDITABLE=!1,Blockly.FieldImage.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),this.imageElement_=Blockly.utils.createSvgElement("image",{height:this.height_+"px",width:this.width_+"px"},this.fieldGroup_),this.setValue(this.src_),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.setTooltip(this.sourceBlock_),Blockly.Tooltip.bindMouseEvents(this.imageElement_))},Blockly.FieldImage.prototype.dispose=function(){goog.dom.removeNode(this.fieldGroup_),this.imageElement_=this.fieldGroup_=null},Blockly.FieldImage.prototype.setTooltip=function(t){this.imageElement_.tooltip=t},Blockly.FieldImage.prototype.getValue=function(){return this.src_},Blockly.FieldImage.prototype.setValue=function(t){null!==t&&(this.src_=t,this.imageElement_&&this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t||""))},Blockly.FieldImage.prototype.getFlipRTL=function(){return this.flipRTL_},Blockly.FieldImage.prototype.setText=function(t){null!==t&&(this.text_=t)},Blockly.FieldImage.prototype.render_=function(){},Blockly.FieldImage.prototype.updateWidth=function(){},Blockly.FieldTextDropdown=function(t,e,o,n){this.menuGenerator_=e,Blockly.FieldDropdown.prototype.trimOptions_.call(this),Blockly.FieldTextDropdown.superClass_.constructor.call(this,t,o,n),this.addArgType("textdropdown")},goog.inherits(Blockly.FieldTextDropdown,Blockly.FieldTextInput),Blockly.FieldTextDropdown.prototype.init=function(){Blockly.FieldTextDropdown.superClass_.init.call(this),this.arrow_||(this.arrowSize_=12,this.arrowX_=0,this.arrowY_=11,this.arrow_=Blockly.utils.createSvgElement("image",{height:this.arrowSize_+"px",width:this.arrowSize_+"px"}),this.arrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow-dark.svg"),this.arrow_.style.cursor="pointer",this.fieldGroup_.appendChild(this.arrow_),this.mouseUpWrapper_=Blockly.bindEvent_(this.arrow_,"mouseup",this,this.showDropdown_)),this.disableColourChange_=!0},Blockly.FieldTextDropdown.prototype.dispose=function(){this.mouseUpWrapper_&&(Blockly.unbindEvent_(this.mouseUpWrapper_),this.mouseUpWrapper_=null,Blockly.Touch.clearTouchIdentifier()),Blockly.FieldTextDropdown.superClass_.dispose.call(this)},Blockly.FieldTextDropdown.prototype.showEditor_=function(){this.dropDownOpen_||Blockly.FieldTextDropdown.superClass_.showEditor_.call(this,null,null,!0,function(){Blockly.WidgetDiv.hide(),this.showDropdown_(),Blockly.Touch.clearTouchIdentifier()})},Blockly.FieldTextDropdown.prototype.getOptions_=Blockly.FieldDropdown.prototype.getOptions_,Blockly.FieldTextDropdown.prototype.positionArrow=Blockly.FieldDropdown.prototype.positionArrow,Blockly.FieldTextDropdown.prototype.showDropdown_=Blockly.FieldDropdown.prototype.showEditor_,Blockly.FieldTextDropdown.prototype.onHide=Blockly.FieldDropdown.prototype.onHide,Blockly.FieldNumber=function(t,e,o,n,r){e=this.getNumRestrictor(e,o,n),t=t&&!isNaN(t)?String(t):"0",Blockly.FieldNumber.superClass_.constructor.call(this,t,r,e),this.addArgType("number")},goog.inherits(Blockly.FieldNumber,Blockly.FieldTextInput),Blockly.FieldNumber.DROPDOWN_WIDTH=168,Blockly.FieldNumber.DROPDOWN_Y_PADDING=8,Blockly.FieldNumber.NUMPAD_BUTTONS="789456123.0- ".split(""),Blockly.FieldNumber.NUMPAD_DELETE_ICON='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><path d="M28.89,11.45H16.79a2.86,2.86,0,0,0-2,.84L9.09,18a2.85,2.85,0,0,0,0,4l5.69,5.69a2.86,2.86,0,0,0,2,.84h12.1a2.86,2.86,0,0,0,2.86-2.86V14.31A2.86,2.86,0,0,0,28.89,11.45ZM27.15,22.73a1,1,0,0,1,0,1.41,1,1,0,0,1-.71.3,1,1,0,0,1-.71-0.3L23,21.41l-2.73,2.73a1,1,0,0,1-1.41,0,1,1,0,0,1,0-1.41L21.59,20l-2.73-2.73a1,1,0,0,1,0-1.41,1,1,0,0,1,1.41,0L23,18.59l2.73-2.73a1,1,0,1,1,1.42,1.41L24.42,20Z" fill="'+Blockly.Colours.numPadText+'"/></svg>',Blockly.FieldNumber.activeField_=null,Blockly.FieldNumber.prototype.getNumRestrictor=function(t,e,o){return this.setConstraints_(t,e,o),t="[\\d]",this.decimalAllowed_&&(t+="|[\\.]"),this.negativeAllowed_&&(t+="|[-]"),new RegExp(t)},Blockly.FieldNumber.prototype.setConstraints_=function(t,e,o){this.decimalAllowed_=void 0===o||isNaN(o)||0==o||Math.floor(o)!=o,this.negativeAllowed_=void 0===t||isNaN(t)||0>t},Blockly.FieldNumber.prototype.showEditor_=function(){Blockly.FieldNumber.activeField_=this;var t=goog.userAgent.MOBILE||goog.userAgent.ANDROID||goog.userAgent.IPAD;Blockly.FieldNumber.superClass_.showEditor_.call(this,!1,t),t&&this.showNumPad_()},Blockly.FieldNumber.prototype.showNumPad_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var t=Blockly.DropDownDiv.getContentDiv();t.setAttribute("role","menu"),t.setAttribute("aria-haspopup","true"),this.addButtons_(t),Blockly.DropDownDiv.setColour(Blockly.Colours.numPadBackground,Blockly.Colours.numPadBorder),t.style.width=Blockly.FieldNumber.DROPDOWN_WIDTH+"px",this.position_()},Blockly.FieldNumber.prototype.position_=function(){var t=this.sourceBlock_.workspace.scale,e=this.sourceBlock_.getHeightWidth();e.width*=t,e.height*=t;var o=this.getAbsoluteXY_(),n=o.x+e.width/2;e=o.y+e.height+Blockly.FieldNumber.DROPDOWN_Y_PADDING,t=o.y-Blockly.BlockSvg.MIN_BLOCK_Y*t-Blockly.BlockSvg.FIELD_Y_OFFSET*t,Blockly.DropDownDiv.setBoundsElement(this.sourceBlock_.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,n,e,n,t,this.onHide_.bind(this))},Blockly.FieldNumber.prototype.addButtons_=function(t){for(var e,o=Blockly.FieldNumber.NUMPAD_BUTTONS,n=0;e=o[n];n++){var r=document.createElement("button");if(r.setAttribute("role","menuitem"),r.setAttribute("class","blocklyNumPadButton"),r.title=e,r.innerHTML=e,Blockly.bindEvent_(r,"mousedown",r,Blockly.FieldNumber.numPadButtonTouch),"."!=e||this.decimalAllowed_){if("-"==e&&!this.negativeAllowed_)continue;if(" "==e&&!this.negativeAllowed_)continue;" "==e&&this.negativeAllowed_&&r.setAttribute("style","visibility: hidden")}else r.setAttribute("style","visibility: hidden");t.appendChild(r)}o=document.createElement("button"),o.setAttribute("role","menuitem"),o.setAttribute("class","blocklyNumPadButton"),o.title="Delete",n=document.createElement("img"),n.src=Blockly.FieldNumber.NUMPAD_DELETE_ICON,o.appendChild(n),Blockly.bindEvent_(o,"mousedown",null,Blockly.FieldNumber.numPadEraseButtonTouch),t.appendChild(o)},Blockly.FieldNumber.numPadButtonTouch=function(){var t=this.innerHTML,e=Blockly.FieldTextInput.htmlInput_.value,o=Blockly.FieldTextInput.htmlInput_.selectionEnd;t=e.slice(0,Blockly.FieldTextInput.htmlInput_.selectionStart)+t+e.slice(o),Blockly.FieldNumber.updateDisplay_(t),Blockly.Touch.clearTouchIdentifier()},Blockly.FieldNumber.numPadEraseButtonTouch=function(){var t=Blockly.FieldTextInput.htmlInput_.value,e=Blockly.FieldTextInput.htmlInput_.selectionStart,o=Blockly.FieldTextInput.htmlInput_.selectionEnd,n=t.slice(0,e)+t.slice(o);0==o-e&&(n=t.slice(0,e-1)+t.slice(e)),Blockly.FieldNumber.updateDisplay_(n),Blockly.Touch.clearTouchIdentifier()},Blockly.FieldNumber.updateDisplay_=function(t){Blockly.FieldTextInput.htmlInput_.value=t,Blockly.FieldNumber.superClass_.resizeEditor_.call(Blockly.FieldNumber.activeField_),Blockly.FieldTextInput.htmlInput_.setSelectionRange(t.length,t.length),Blockly.FieldTextInput.htmlInput_.scrollLeft=Blockly.FieldTextInput.htmlInput_.scrollWidth,Blockly.FieldNumber.activeField_.validate_()},Blockly.FieldNumber.prototype.onHide_=function(){Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup")},Blockly.FieldNumberDropdown=function(t,e,o,n,r,i){this.setConstraints_=Blockly.FieldNumber.prototype.setConstraints_,o=Blockly.FieldNumber.prototype.getNumRestrictor.call(this,o,n,r),Blockly.FieldNumberDropdown.superClass_.constructor.call(this,t,e,i,o),this.addArgType("numberdropdown")},goog.inherits(Blockly.FieldNumberDropdown,Blockly.FieldTextDropdown),Blockly.FieldVariable=function(t,e,o){Blockly.FieldVariable.superClass_.constructor.call(this,Blockly.FieldVariable.dropdownCreate,e),this.setValue(t||""),this.addArgType("variable"),this.variableTypes=o},goog.inherits(Blockly.FieldVariable,Blockly.FieldDropdown),Blockly.FieldVariable.prototype.init=function(){this.fieldGroup_||(Blockly.FieldVariable.superClass_.init.call(this),this.initModel())},Blockly.FieldVariable.prototype.initModel=function(){this.getValue()||this.setValue(Blockly.Variables.generateUniqueName(this.sourceBlock_.isInFlyout?this.sourceBlock_.workspace.targetWorkspace:this.sourceBlock_.workspace)),this.sourceBlock_.isInFlyout||this.sourceBlock_.workspace.createVariable(this.getValue())},Blockly.FieldVariable.prototype.setSourceBlock=function(t){goog.asserts.assert(!t.isShadow(),"Variable fields are not allowed to exist on shadow blocks."),Blockly.FieldVariable.superClass_.setSourceBlock.call(this,t)},Blockly.FieldVariable.prototype.getValue=function(){return this.getText()},Blockly.FieldVariable.prototype.setValue=function(t){var e=t,o=t;if(this.sourceBlock_){var n=this.sourceBlock_.workspace.getVariableById(t);n?o=n.name:(n=this.sourceBlock_.workspace.getVariable(t))&&(e=n.getId()),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.value_,e))}this.value_=e,this.setText(o)},Blockly.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_)return this.sourceBlock_.workspace.getVariableTypes();if(t=t||[""],0==t.length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},Blockly.FieldVariable.dropdownCreate=function(){var t=[],e=this.getText(),o=!!e,n=null;if(this.sourceBlock_&&(n=this.sourceBlock_.workspace),n){var r=this.getVariableTypes_();t=[];for(var i=0;i<r.length;i++){var s=n.getVariablesOfType(r[i]);t=t.concat(s)}for(i=0;i<t.length;i++)if(o&&goog.string.caseInsensitiveEquals(t[i].name,e)){o=!1;break}}for(o&&n&&(i=n.createVariable(e),t.push(i)),t.sort(Blockly.VariableModel.compareByName),o=[],i=0;i<t.length;i++)o[i]=[t[i].name,t[i].getId()];return o.push([Blockly.Msg.RENAME_VARIABLE,Blockly.RENAME_VARIABLE_ID]),o.push([Blockly.Msg.DELETE_VARIABLE.replace("%1",e),Blockly.DELETE_VARIABLE_ID]),o},Blockly.FieldVariable.prototype.onItemSelected=function(t,e){var o=e.getValue();if(this.sourceBlock_&&this.sourceBlock_.workspace){var n=this.sourceBlock_.workspace,r=n.getVariableById(o);if(r)var i=r.name;else{if(o==Blockly.RENAME_VARIABLE_ID)return o=this.getText(),r=n.getVariable(o),void Blockly.Variables.renameVariable(n,r);if(o==Blockly.DELETE_VARIABLE_ID)return void n.deleteVariable(this.getText())}i=this.callValidator(i)}null!==i&&this.setValue(i)},Blockly.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},Blockly.Generator.NAME_TYPE="generated_function",Blockly.Generator.prototype.INFINITE_LOOP_TRAP=null,Blockly.Generator.prototype.STATEMENT_PREFIX=null,Blockly.Generator.prototype.INDENT="  ",Blockly.Generator.prototype.COMMENT_WRAP=60,Blockly.Generator.prototype.ORDER_OVERRIDES=[],Blockly.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=Blockly.getMainWorkspace());var e=[];this.init(t),t=t.getTopBlocks(!0);for(var o,n=0;o=t[n];n++){var r=this.blockToCode(o);goog.isArray(r)&&(r=r[0]),r&&(o.outputConnection&&this.scrubNakedValue&&(r=this.scrubNakedValue(r)),e.push(r))}return e=e.join("\n"),e=this.finish(e),e=e.replace(/^\s+\n/,""),e=e.replace(/\n\s+$/,"\n"),e=e.replace(/[ \t]+\n/g,"\n")},Blockly.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)},Blockly.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants();for(var o=0;o<t.length;o++){var n=t[o].getCommentText();n&&e.push(n)}return e.length&&e.push(""),e.join("\n")},Blockly.Generator.prototype.blockToCode=function(t){if(!t)return"";if(t.disabled)return this.blockToCode(t.getNextBlock());var e=this[t.type];if(goog.asserts.assertFunction(e,'Language "%s" does not know how to generate code for block type "%s".',this.name_,t.type),e=e.call(t,t),goog.isArray(e))return goog.asserts.assert(t.outputConnection,'Expecting string from statement block "%s".',t.type),[this.scrub_(t,e[0]),e[1]];if(goog.isString(e)){var o=t.id.replace(/\$/g,"$$$$");return this.STATEMENT_PREFIX&&(e=this.STATEMENT_PREFIX.replace(/%1/g,"'"+o+"'")+e),this.scrub_(t,e)}if(null===e)return"";goog.asserts.fail("Invalid code generated: %s",e)},Blockly.Generator.prototype.valueToCode=function(t,e,o){isNaN(o)&&goog.asserts.fail('Expecting valid order from block "%s".',t.type);var n=t.getInputTargetBlock(e);if(!n)return"";if(""===(e=this.blockToCode(n)))return"";if(goog.asserts.assertArray(e,'Expecting tuple from value block "%s".',n.type),t=e[0],e=e[1],isNaN(e)&&goog.asserts.fail('Expecting valid order from value block "%s".',n.type),!t)return"";n=!1;var r=Math.floor(o),i=Math.floor(e);if(r<=i&&(r!=i||0!=r&&99!=r))for(n=!0,r=0;r<this.ORDER_OVERRIDES.length;r++)if(this.ORDER_OVERRIDES[r][0]==o&&this.ORDER_OVERRIDES[r][1]==e){n=!1;break}return n&&(t="("+t+")"),t},Blockly.Generator.prototype.statementToCode=function(t,e){var o=t.getInputTargetBlock(e),n=this.blockToCode(o);return goog.asserts.assertString(n,'Expecting code from statement block "%s".',o&&o.type),n&&(n=this.prefixLines(n,this.INDENT)),n},Blockly.Generator.prototype.addLoopTrap=function(t,e){return e=e.replace(/\$/g,"$$$$"),this.INFINITE_LOOP_TRAP&&(t=this.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+e+"'")+t),this.STATEMENT_PREFIX&&(t+=this.prefixLines(this.STATEMENT_PREFIX.replace(/%1/g,"'"+e+"'"),this.INDENT)),t},Blockly.Generator.prototype.RESERVED_WORDS_="",Blockly.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Blockly.Generator.prototype.provideFunction_=function(t,e){if(!this.definitions_[t]){var o=this.variableDB_.getDistinctName(t,Blockly.Procedures.NAME_TYPE);this.functionNames_[t]=o,o=e.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);for(var n;n!=o;)n=o,o=o.replace(/^(( {2})*) {2}/gm,"$1\0");o=o.replace(/\0/g,this.INDENT),this.definitions_[t]=o}return this.functionNames_[t]},Blockly.Generator.prototype.init=void 0,Blockly.Generator.prototype.scrub_=void 0,Blockly.Generator.prototype.finish=void 0,Blockly.Generator.prototype.scrubNakedValue=void 0,Blockly.Names=function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),t)for(var o=t.split(","),n=0;n<o.length;n++)this.reservedDict_[o[n]]=!0;this.reset()},Blockly.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null)},Blockly.Names.prototype.getName=function(t,e){var o=t.toLowerCase()+"_"+e,n=e==Blockly.Variables.NAME_TYPE?this.variablePrefix_:"";if(o in this.db_)return n+this.db_[o];var r=this.getDistinctName(t,e);return this.db_[o]=r.substr(n.length),r},Blockly.Names.prototype.getDistinctName=function(t,e){for(var o=this.safeName_(t),n="";this.dbReverse_[o+n]||o+n in this.reservedDict_;)n=n?n+1:2;return o+=n,this.dbReverse_[o]=!0,(e==Blockly.Variables.NAME_TYPE?this.variablePrefix_:"")+o},Blockly.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t="unnamed",t},Blockly.Names.equals=function(t,e){return t.toLowerCase()==e.toLowerCase()},Blockly.Procedures={},Blockly.Procedures.NAME_TYPE=Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.allProcedures=function(t){t=t.getAllBlocks();for(var e=[],o=[],n=0;n<t.length;n++)if(t[n].getProcedureDef){var r=t[n].getProcedureDef();r&&(r[2]?e.push(r):o.push(r))}return o.sort(Blockly.Procedures.procTupleComparator_),e.sort(Blockly.Procedures.procTupleComparator_),[o,e]},Blockly.Procedures.procTupleComparator_=function(t,e){return t[0].toLowerCase().localeCompare(e[0].toLowerCase())},Blockly.Procedures.findLegalName=function(t,e){if(e.isInFlyout)return t;for(;!Blockly.Procedures.isLegalName_(t,e.workspace,e);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t},Blockly.Procedures.isLegalName_=function(t,e,o){return!Blockly.Procedures.isNameUsed(t,e,o)},Blockly.Procedures.isNameUsed=function(t,e,o){e=e.getAllBlocks();for(var n=0;n<e.length;n++)if(e[n]!=o&&e[n].getProcedureDef){var r=e[n].getProcedureDef();if(Blockly.Names.equals(r[0],t))return!1}return!0},Blockly.Procedures.rename=function(t){t=t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"");var e=Blockly.Procedures.findLegalName(t,this.sourceBlock_),o=this.text_;if(o!=t&&o!=e){t=this.sourceBlock_.workspace.getAllBlocks();for(var n=0;n<t.length;n++)t[n].renameProcedure&&t[n].renameProcedure(o,e)}return e},Blockly.Procedures.flyoutCategory=function(t){function e(t,e){for(var n=0;n<t.length;n++){var r=t[n][0],i=t[n][1],s=goog.dom.createDom("block");s.setAttribute("type",e),s.setAttribute("gap",16);var a=goog.dom.createDom("mutation");for(a.setAttribute("name",r),s.appendChild(a),r=0;r<i.length;r++){var l=goog.dom.createDom("arg");l.setAttribute("name",i[r]),a.appendChild(l)}o.push(s)}}var o=[];if(Blockly.Blocks.procedures_defnoreturn){var n=goog.dom.createDom("block");n.setAttribute("type","procedures_defnoreturn"),n.setAttribute("gap",16);var r=goog.dom.createDom("field",null,Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE);r.setAttribute("name","NAME"),n.appendChild(r),o.push(n)}return Blockly.Blocks.procedures_defreturn&&(n=goog.dom.createDom("block"),n.setAttribute("type","procedures_defreturn"),n.setAttribute("gap",16),r=goog.dom.createDom("field",null,Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE),r.setAttribute("name","NAME"),n.appendChild(r),o.push(n)),Blockly.Blocks.procedures_report&&(n=goog.dom.createDom("block"),n.setAttribute("type","procedures_report"),n.setAttribute("gap",16),o.push(n)),o.length&&o[o.length-1].setAttribute("gap",24),t=Blockly.Procedures.allProcedures(t),e(t[0],"procedures_callnoreturn"),e(t[1],"procedures_callreturn"),o},Blockly.Procedures.getCallers=function(t,e){for(var o=[],n=e.getAllBlocks(),r=0;r<n.length;r++)if(n[r].getProcedureCall){var i=n[r].getProcedureCall();i&&Blockly.Names.equals(i,t)&&o.push(n[r])}return o},Blockly.Procedures.mutateCallers=function(t){var e=Blockly.Events.recordUndo,o=t.getProcedureDef()[0],n=t.mutationToDom(!0);t=Blockly.Procedures.getCallers(o,t.workspace),o=0;for(var r;r=t[o];o++){var i=r.mutationToDom();i=i&&Blockly.Xml.domToText(i),r.domToMutation(n);var s=r.mutationToDom();s=s&&Blockly.Xml.domToText(s),i!=s&&(Blockly.Events.recordUndo=!1,Blockly.Events.fire(new Blockly.Events.BlockChange(r,"mutation",null,i,s)),Blockly.Events.recordUndo=e)}},Blockly.Procedures.getDefinition=function(t,e){for(var o=e.getTopBlocks(!1),n=0;n<o.length;n++)if(o[n].getProcedureDef){var r=o[n].getProcedureDef();if(r&&Blockly.Names.equals(r[0],t))return o[n]}return null},Blockly.FlyoutButton=function(t,e,o,n){this.workspace_=t,this.targetWorkspace_=e,this.text_=o.getAttribute("text"),this.position_=new goog.math.Coordinate(0,0),this.isLabel_=n,this.callback_=null,t=o.getAttribute("callbackKey"),this.isLabel_&&t?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||t&&e.getButtonCallback(t)?this.callback_=e.getButtonCallback(t):console.warn("Buttons should have callbacks. Button text: "+this.text_),this.cssClass_=o.getAttribute("web-class")||null},Blockly.FlyoutButton.MARGIN=40,Blockly.FlyoutButton.prototype.width=0,Blockly.FlyoutButton.prototype.height=40,Blockly.FlyoutButton.prototype.onMouseUpWrapper_=null,Blockly.FlyoutButton.prototype.createDom=function(){var t,e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=Blockly.utils.createSvgElement("g",{class:e},this.workspace_.getCanvas()),this.isLabel_||(t=Blockly.utils.createSvgElement("rect",{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),e=Blockly.utils.createSvgElement("rect",{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=Blockly.utils.createSvgElement("text",{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);return o.textContent=this.text_,this.width=o.getComputedTextLength()+2*Blockly.FlyoutButton.MARGIN,this.isLabel_||(t.setAttribute("width",this.width),t.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),o.setAttribute("text-anchor","middle"),o.setAttribute("alignment-baseline","central"),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2),this.updateTransform_(),this.mouseUpWrapper_=Blockly.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},Blockly.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},Blockly.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},Blockly.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},Blockly.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},Blockly.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&Blockly.unbindEvent_(this.onMouseUpWrapper_),this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace_=this.workspace_=null},Blockly.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.callback_&&this.callback_(this)},Blockly.Flyout=function(t){t.getMetrics=this.getMetrics_.bind(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Blockly.WorkspaceSvg(t),this.workspace_.isFlyout=!0,this.RTL=!!t.RTL,this.horizontalLayout_=t.horizontalLayout,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.backgroundButtons_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.parentToolbox_=null},Blockly.Flyout.prototype.autoClose=!0,Blockly.Flyout.prototype.isVisible_=!1,Blockly.Flyout.prototype.containerVisible_=!0,Blockly.Flyout.prototype.CORNER_RADIUS=0,Blockly.Flyout.prototype.MARGIN=12,Blockly.Flyout.prototype.GAP_X=3*Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.GAP_Y=Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.SCROLLBAR_PADDING=2,Blockly.Flyout.prototype.width_=0,Blockly.Flyout.prototype.height_=0,Blockly.Flyout.prototype.contentWidth_=0,Blockly.Flyout.prototype.contentHeight_=0,Blockly.Flyout.prototype.verticalOffset_=0,Blockly.Flyout.prototype.dragAngleRange_=70,Blockly.Flyout.prototype.createDom=function(t){return this.svgGroup_=Blockly.utils.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=Blockly.utils.createSvgElement("path",{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.svgGroup_},Blockly.Flyout.prototype.init=function(t){this.targetWorkspace_=t,this.workspace_.targetWorkspace=t,this.scrollbar_=new Blockly.Scrollbar(this.workspace_,this.horizontalLayout_,!1,"blocklyFlyoutScrollbar"),this.position(),Array.prototype.push.apply(this.eventWrappers_,Blockly.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_)),Array.prototype.push.apply(this.eventWrappers_,Blockly.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace_.getGesture.bind(this.targetWorkspace_),this.workspace_.getVariable=this.targetWorkspace_.getVariable.bind(this.targetWorkspace_),this.workspace_.getVariableById=this.targetWorkspace_.getVariableById.bind(this.targetWorkspace_),this.workspace_.getVariablesOfType=this.targetWorkspace_.getVariablesOfType.bind(this.targetWorkspace_),this.workspace_.deleteVariable=this.targetWorkspace_.deleteVariable.bind(this.targetWorkspace_),this.workspace_.deleteVariableById=this.targetWorkspace_.deleteVariableById.bind(this.targetWorkspace_),this.workspace_.renameVariable=this.targetWorkspace_.renameVariable.bind(this.targetWorkspace_),this.workspace_.renameVariableById=this.targetWorkspace_.renameVariableById.bind(this.targetWorkspace_)},Blockly.Flyout.prototype.dispose=function(){this.hide(),Blockly.unbindEvent_(this.eventWrappers_),this.scrollbar_&&(this.scrollbar_.dispose(),this.scrollbar_=null),this.workspace_&&(this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace_=this.svgBackground_=this.parentToolbox_=null},Blockly.Flyout.prototype.setParentToolbox=function(t){this.parentToolbox_=t},Blockly.Flyout.prototype.getWidth=function(){return this.parentToolbox_?this.parentToolbox_.getWidth():this.DEFAULT_WIDTH},Blockly.Flyout.prototype.getHeight=function(){return this.height_},Blockly.Flyout.prototype.getWorkspace=function(){return this.workspace_},Blockly.Flyout.prototype.isVisible=function(){return this.isVisible_},Blockly.Flyout.prototype.setVisible=function(t){var e=t!=this.isVisible();this.isVisible_=t,e&&this.updateDisplay_()},Blockly.Flyout.prototype.setContainerVisible=function(t){var e=t!=this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},Blockly.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.scrollbar_.setContainerVisible(t)},Blockly.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var t,e=0;t=this.listeners_[e];e++)Blockly.unbindEvent_(t);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},Blockly.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t),goog.asserts.assert(goog.isFunction(t),"Couldn't find a callback function when opening a toolbox category."),t=t(this.workspace_.targetWorkspace),goog.asserts.assert(goog.isArray(t),"The result of a toolbox category callback must be an array.")),this.setVisible(!0);for(var e,o=[],n=[],r=this.permanentlyDisabled_.length=0;e=t[r];r++)if(e.tagName){var i=e.tagName.toUpperCase(),s=this.horizontalLayout_?this.GAP_X:this.GAP_Y;"BLOCK"==i?(i=Blockly.Xml.domToBlock(e,this.workspace_),i.disabled&&this.permanentlyDisabled_.push(i),o.push({type:"block",block:i}),e=parseInt(e.getAttribute("gap"),10),n.push(isNaN(e)?s:e)):"SEP"==e.tagName.toUpperCase()?(e=parseInt(e.getAttribute("gap"),10),!isNaN(e)&&0<n.length?n[n.length-1]=e:n.push(s)):"BUTTON"!=i&&"LABEL"!=i||(e=new Blockly.FlyoutButton(this.workspace_,this.targetWorkspace_,e,"LABEL"==i),o.push({type:"button",button:e}),n.push(s))}this.layout_(o,n),this.listeners_.push(Blockly.bindEvent_(this.svgBackground_,"mouseover",this,function(){for(var t,e=this.workspace_.getTopBlocks(!1),o=0;t=e[o];o++)t.removeSelect()})),this.workspace_.setResizesEnabled(!0),this.reflow(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.clearOldBlocks_=function(){for(var t,e=this.workspace_.getTopBlocks(!1),o=0;t=e[o];o++)t.workspace==this.workspace_&&t.dispose(!1,!1);for(o=0;e=this.backgroundButtons_[o];o++)goog.dom.removeNode(e);for(o=this.backgroundButtons_.length=0;e=this.buttons_[o];o++)e.dispose();this.buttons_.length=0},Blockly.Flyout.prototype.addBlockListeners_=function(t,e,o){this.autoClose?(this.listeners_.push(Blockly.bindEventWithChecks_(t,"mousedown",null,this.createBlockFunc_(e))),this.listeners_.push(Blockly.bindEventWithChecks_(o,"mousedown",null,this.createBlockFunc_(e)))):(this.listeners_.push(Blockly.bindEventWithChecks_(t,"mousedown",null,this.blockMouseDown_(e))),this.listeners_.push(Blockly.bindEventWithChecks_(o,"mousedown",null,this.blockMouseDown_(e)))),this.listeners_.push(Blockly.bindEvent_(t,"mouseover",e,e.addSelect)),this.listeners_.push(Blockly.bindEvent_(t,"mouseout",e,e.removeSelect)),this.listeners_.push(Blockly.bindEvent_(o,"mouseover",e,e.addSelect)),this.listeners_.push(Blockly.bindEvent_(o,"mouseout",e,e.removeSelect))},Blockly.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(o){var n=e.targetWorkspace_.getGesture(o);n&&(n.setStartBlock(t),n.handleFlyoutStart(o,e))}},Blockly.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace_.getGesture(t);e&&e.handleFlyoutStart(t,this)},Blockly.Flyout.prototype.createBlock=function(t){var e=null;Blockly.Events.disable(),this.targetWorkspace_.setResizesEnabled(!1);try{if(e=this.placeNewBlock_(t),goog.userAgent.IE||goog.userAgent.EDGE)for(var o=e.getDescendants(),n=o.length-1;0<=n;n--)o[n].render(!1);Blockly.hideChaff()}finally{Blockly.Events.enable()}return Blockly.Events.isEnabled()&&(Blockly.Events.setGroup(!0),Blockly.Events.fire(new Blockly.Events.Create(e))),this.autoClose&&this.hide(),e},Blockly.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_);var t=this.workspace_.getTopBlocks(!1);this.reflowInternal_(t),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.isScrollable=function(){return!!this.scrollbar_&&this.scrollbar_.isVisible()},Blockly.Flyout.prototype.placeNewBlock_=function(t){var e=this.targetWorkspace_;if(!t.getSvgRoot())throw"oldBlock is not rendered.";var o=Blockly.Xml.blockToDom(t);if(e.setResizesEnabled(!1),o=Blockly.Xml.domToBlock(o,e),!o.getSvgRoot())throw"block is not rendered.";var n=e.getOriginOffsetInPixels(),r=this.workspace_.getOriginOffsetInPixels();return t=t.getRelativeToSurfaceXY().scale(this.workspace_.scale),t=goog.math.Coordinate.sum(r,t),e=goog.math.Coordinate.difference(t,n).scale(1/e.scale),o.moveBy(e.x,e.y),o},Blockly.HorizontalFlyout=function(t){t.getMetrics=this.getMetrics_.bind(this),t.setMetrics=this.setMetrics_.bind(this),Blockly.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout_=!0},goog.inherits(Blockly.HorizontalFlyout,Blockly.Flyout),Blockly.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,o=this.SCROLLBAR_PADDING;this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM&&(e=0);var n=this.height_;return this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP&&(n+=this.MARGIN),{viewHeight:n,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,contentHeight:t.height*this.workspace_.scale+2*this.MARGIN,contentWidth:t.width*this.workspace_.scale+2*this.MARGIN,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,contentTop:t.y,contentLeft:t.x,absoluteTop:e,absoluteLeft:o}},Blockly.HorizontalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&(goog.isNumber(t.x)&&(this.workspace_.scrollX=-e.contentWidth*t.x),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop))},Blockly.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var t=this.targetWorkspace_.getMetrics();if(t){this.setBackgroundPath_(this.horizontalLayout_?t.viewWidth-2*this.CORNER_RADIUS:this.width_-this.CORNER_RADIUS,this.horizontalLayout_?this.height_-this.CORNER_RADIUS:t.viewHeight-2*this.CORNER_RADIUS);var e=t.absoluteLeft;this.toolboxPosition_==Blockly.TOOLBOX_AT_RIGHT&&(e+=t.viewWidth,e-=this.width_);var o=t.absoluteTop;this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM&&(o+=t.viewHeight,o-=this.height_),this.horizontalLayout_?this.width_=t.viewWidth:this.height_=t.viewHeight,this.svgGroup_.setAttribute("width",this.width_),this.svgGroup_.setAttribute("height",this.height_),Blockly.utils.setCssTransform(this.svgGroup_,"translate("+e+"px,"+o+"px)"),this.scrollbar_&&(this.scrollbar_.setOrigin(e,o),this.scrollbar_.resize()),this.svgGroup_.style.opacity=1}}},Blockly.HorizontalFlyout.prototype.setBackgroundPath_=function(t,e){var o=this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP,n=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(n.push("h",t+2*this.CORNER_RADIUS),n.push("v",e),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("h",-1*t),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),n.push("h",t),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("v",e),n.push("h",-t-2*this.CORNER_RADIUS)),n.push("z"),this.svgBackground_.setAttribute("d",n.join(" "))},Blockly.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(this.RTL?1/0:0)},Blockly.HorizontalFlyout.prototype.wheel_=function(t){var e=t.deltaX;if(e){goog.userAgent.GECKO&&(e*=10);var o=this.getMetrics_();e=o.viewLeft+e,e=Math.min(e,o.contentWidth-o.viewWidth),e=Math.max(e,0),this.scrollbar_.set(e),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},Blockly.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace_.scale;var o=this.MARGIN,n=o;this.RTL&&(t=t.reverse());for(var r,i=0;r=t[i];i++)if("block"==r.type){r=r.block;for(var s,a=r.getDescendants(),l=0;s=a[l];l++)s.isInFlyout=!0;a=r.getSvgRoot(),l=r.getHeightWidth(),s=n,this.RTL&&(s+=l.width),r.moveBy(s,o),n+=l.width+e[i],l=Blockly.utils.createSvgElement("rect",{"fill-opacity":0},null),l.tooltip=r,Blockly.Tooltip.bindMouseEvents(l),this.workspace_.getCanvas().insertBefore(l,r.getSvgRoot()),r.flyoutRect_=l,this.backgroundButtons_[i]=l,this.addBlockListeners_(a,r,l)}else"button"==r.type&&(r=r.button,a=r.createDom(),r.moveTo(n,o),r.show(),this.listeners_.push(Blockly.bindEventWithChecks_(a,"mousedown",this,this.onMouseDown_)),this.buttons_.push(r),n+=r.width+e[i])};Blockly.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=!1,o=this.dragAngleRange_;return this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?t<90+o&&t>90-o&&(e=!0):t>-90-o&&t<-90+o&&(e=!0),e},Blockly.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.top;return t=t.height,this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?new goog.math.Rect(-1e9,e-1e9,2e9,1e9+t):this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM?new goog.math.Rect(-1e9,e,2e9,1e9+t):void 0},Blockly.HorizontalFlyout.prototype.reflowInternal_=function(t){this.workspace_.scale=this.targetWorkspace_.scale;for(var e,o=0,n=0;e=t[n];n++)o=Math.max(o,e.getHeightWidth().height);if(o+=1.5*this.MARGIN,o*=this.workspace_.scale,o+=Blockly.Scrollbar.scrollbarThickness,this.height_!=o){for(n=0;e=t[n];n++){var r=e.getHeightWidth();if(e.flyoutRect_){e.flyoutRect_.setAttribute("width",r.width),e.flyoutRect_.setAttribute("height",r.height);var i=e.getRelativeToSurfaceXY();e.flyoutRect_.setAttribute("y",i.y),e.flyoutRect_.setAttribute("x",this.RTL?i.x-r.width:i.x),(r=e.startHat_?Blockly.BlockSvg.START_HAT_HEIGHT:0)&&e.moveBy(0,r),e.flyoutRect_.setAttribute("y",i.y)}}this.height_=o,this.targetWorkspace_.resize()}},Blockly.VerticalFlyout=function(t){t.getMetrics=this.getMetrics_.bind(this),t.setMetrics=this.setMetrics_.bind(this),Blockly.VerticalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout_=!1,this.checkboxes_=[]},goog.inherits(Blockly.VerticalFlyout,Blockly.Flyout),Blockly.VerticalFlyout.prototype.autoClose=!1,Blockly.VerticalFlyout.prototype.DEFAULT_WIDTH=250,Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE=20,Blockly.VerticalFlyout.prototype.CHECKMARK_PATH="M"+Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE/4+" "+Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE/2+"L"+5*Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE/12+" "+2*Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE/3+"L"+3*Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE/4+" "+Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE/3,Blockly.VerticalFlyout.prototype.CHECKBOX_CORNER_RADIUS=5,Blockly.VerticalFlyout.prototype.CHECKBOX_MARGIN=Blockly.Flyout.prototype.MARGIN,Blockly.VerticalFlyout.prototype.CHECKBOX_SPACE_X=Blockly.VerticalFlyout.prototype.CHECKBOX_SIZE+2*Blockly.VerticalFlyout.prototype.CHECKBOX_MARGIN,Blockly.VerticalFlyout.prototype.init=function(t){Blockly.VerticalFlyout.superClass_.init.call(this,t),this.workspace_.scale=t.scale},Blockly.VerticalFlyout.prototype.createDom=function(t){return Blockly.VerticalFlyout.superClass_.createDom.call(this,t),this.defs_=Blockly.utils.createSvgElement("defs",{},this.svgGroup_),t=Blockly.utils.createSvgElement("clipPath",{id:"blocklyBlockMenuClipPath"},this.defs_),this.clipRect_=Blockly.utils.createSvgElement("rect",{id:"blocklyBlockMenuClipRect",height:"0",width:"0",y:"0",x:"0"},t),this.workspace_.svgGroup_.setAttribute("clip-path","url(#blocklyBlockMenuClipPath)"),this.svgGroup_},Blockly.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING;return{viewHeight:this.height_-2*this.SCROLLBAR_PADDING,viewWidth:this.getWidth()-this.SCROLLBAR_PADDING,contentHeight:t.height*this.workspace_.scale+2*this.MARGIN,contentWidth:t.width*this.workspace_.scale+2*this.MARGIN,viewTop:-this.workspace_.scrollY+t.y,viewLeft:-this.workspace_.scrollX,contentTop:t.y,contentLeft:t.x,absoluteTop:e,absoluteLeft:0}},Blockly.VerticalFlyout.prototype.setMetrics_=function(t){var e=this.getMetrics_();e&&(goog.isNumber(t.y)&&(this.workspace_.scrollY=-e.contentHeight*t.y),this.workspace_.translate(this.workspace_.scrollX+e.absoluteLeft,this.workspace_.scrollY+e.absoluteTop),this.clipRect_.setAttribute("height",Math.max(0,e.viewHeight)+"px"),this.clipRect_.setAttribute("width",e.viewWidth+"px"))},Blockly.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var t=this.targetWorkspace_.getMetrics();if(t){if(this.width_=this.getWidth(),this.parentToolbox_)var e=this.parentToolbox_.HtmlDiv.offsetLeft,o=this.parentToolbox_.HtmlDiv.offsetTop+this.parentToolbox_.getHeight();else e=this.toolboxPosition_==Blockly.TOOLBOX_AT_RIGHT?t.viewWidth-this.width_:0,o=0;this.height_=Math.max(0,t.viewHeight-o),this.setBackgroundPath_(this.width_,this.height_),this.svgGroup_.setAttribute("width",this.width_),this.svgGroup_.setAttribute("height",this.height_),Blockly.utils.setCssTransform(this.svgGroup_,"translate("+e+"px,"+o+"px)"),this.scrollbar_&&(this.scrollbar_.setOrigin(e,o),this.scrollbar_.resize()),this.svgGroup_.style.opacity=1}}},Blockly.VerticalFlyout.prototype.setBackgroundPath_=function(t,e){var o=this.toolboxPosition_==Blockly.TOOLBOX_AT_RIGHT,n=["M 0,0"];n.push("h",t),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("v",Math.max(0,e-2*this.CORNER_RADIUS)),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("h",-t),n.push("z"),this.svgBackground_.setAttribute("d",n.join(" "))},Blockly.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(0)},Blockly.VerticalFlyout.prototype.wheel_=function(t){var e=t.deltaY;if(e){goog.userAgent.GECKO&&(e*=10);var o=this.getMetrics_();e=-this.workspace_.scrollY+e,e=Math.min(e,o.contentHeight-o.viewHeight),e=Math.max(e,0),this.scrollbar_.set(e),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},Blockly.VerticalFlyout.prototype.clearOldBlocks_=function(){Blockly.VerticalFlyout.superClass_.clearOldBlocks_.call(this);for(var t,e=0;t=this.checkboxes_[e];e++)t.block.flyoutCheckbox=null,goog.dom.removeNode(t.svgRoot);this.checkboxes_=[]},Blockly.VerticalFlyout.prototype.addBlockListeners_=function(t,e,o){Blockly.VerticalFlyout.superClass_.addBlockListeners_.call(this,t,e,o),e.flyoutCheckbox&&this.listeners_.push(Blockly.bindEvent_(e.flyoutCheckbox.svgRoot,"mousedown",null,this.checkboxClicked_(e.flyoutCheckbox)))},Blockly.VerticalFlyout.prototype.layout_=function(t,e){for(var o,n=this.MARGIN,r=this.getWidth()/this.workspace_.scale,i=n,s=0;o=t[s];s++)if("block"==o.type){o=o.block;for(var a,l=o.getDescendants(),c=0;a=l[c];c++)a.isInFlyout=!0;l=o.getSvgRoot(),c=o.getHeightWidth(),a=o.getRelativeToSurfaceXY().x;var u=r-this.MARGIN;a=this.RTL?u-a:n,o.hasCheckboxInFlyout()&&(this.createCheckbox_(o,n,i,c),a=this.RTL?a-(this.CHECKBOX_SIZE+this.CHECKBOX_MARGIN):a+(this.CHECKBOX_SIZE+this.CHECKBOX_MARGIN)),o.moveBy(a,i+(o.startHat_?Blockly.BlockSvg.START_HAT_HEIGHT:0)),a=this.createRect_(o,this.RTL?a-c.width:a,i,c,s),this.addBlockListeners_(l,o,a),i+=c.height+e[s]+(o.startHat_?Blockly.BlockSvg.START_HAT_HEIGHT:0)}else"button"==o.type&&(o=o.button,l=o.createDom(),o.moveTo(n,i),o.show(),this.listeners_.push(Blockly.bindEventWithChecks_(l,"mousedown",this,this.onMouseDown_)),this.buttons_.push(o),i+=o.height+e[s])},Blockly.VerticalFlyout.prototype.createRect_=function(t,e,o,n,r){return e=Blockly.utils.createSvgElement("rect",{"fill-opacity":0,x:e,y:o,height:n.height,width:n.width},null),e.tooltip=t,Blockly.Tooltip.bindMouseEvents(e),this.workspace_.getCanvas().insertBefore(e,t.getSvgRoot()),t.flyoutRect_=e,this.backgroundButtons_[r]=e},Blockly.VerticalFlyout.prototype.createCheckbox_=function(t,e,o,n){var r=Blockly.VerticalFlyout.getCheckboxState(t.id),i=t.getSvgRoot(),s=this.CHECKBOX_SIZE+this.CHECKBOX_MARGIN;e=this.RTL?this.getWidth()/this.workspace_.scale-s:e,o=Blockly.utils.createSvgElement("g",{class:"blocklyFlyoutCheckbox",transform:"translate("+e+", "+(o+n.height/2-this.CHECKBOX_SIZE/2)+")"},null),Blockly.utils.createSvgElement("rect",{height:this.CHECKBOX_SIZE,width:this.CHECKBOX_SIZE,rx:this.CHECKBOX_CORNER_RADIUS,ry:this.CHECKBOX_CORNER_RADIUS},o),Blockly.utils.createSvgElement("path",{class:"blocklyFlyoutCheckboxPath",d:this.CHECKMARK_PATH},o),n={svgRoot:o,clicked:r,block:t},r&&Blockly.utils.addClass(n.svgRoot,"checked"),t.flyoutCheckbox=n,this.workspace_.getCanvas().insertBefore(o,i),this.checkboxes_.push(n)},Blockly.VerticalFlyout.prototype.checkboxClicked_=function(t){return function(e){this.setCheckboxState(t.block.id,!t.clicked),e.stopPropagation(),e.preventDefault()}.bind(this)},Blockly.VerticalFlyout.prototype.setCheckboxState=function(t,e){for(var o=0;o<this.checkboxes_.length;o++){var n=this.checkboxes_[o];if(n.block.id===t){if(n.clicked===e)break;o=n.clicked,n.clicked=e,n.clicked?Blockly.utils.addClass(n.svgRoot,"checked"):Blockly.utils.removeClass(n.svgRoot,"checked"),Blockly.Events.fire(new Blockly.Events.Change(n.block,"checkbox",null,o,e));break}}},Blockly.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=!1,o=this.dragAngleRange_;return this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?t<o&&t>-o&&(e=!0):(t<-180+o||t>180-o)&&(e=!0),e},Blockly.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.left;return t=t.width,this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?new goog.math.Rect(e-1e9,-1e9,1e9+t,2e9):new goog.math.Rect(e,-1e9,1e9+t,2e9)},Blockly.VerticalFlyout.prototype.reflowInternal_=function(){},Blockly.VerticalFlyout.getCheckboxState=function(){return!1},Blockly.Toolbox=function(t){this.workspace_=t,this.iconic_=!1,this.RTL=t.options.RTL,this.horizontalLayout_=t.options.horizontalLayout,this.toolboxPosition=t.options.toolboxPosition},Blockly.Toolbox.prototype.width=250,Blockly.Toolbox.prototype.height=0,Blockly.Toolbox.prototype.selectedItem_=null,Blockly.Toolbox.prototype.init=function(){var t=this.workspace_,e=this.workspace_.getParentSvg();this.HtmlDiv=goog.dom.createDom("DIV","blocklyToolboxDiv"),this.HtmlDiv.setAttribute("dir",t.RTL?"RTL":"LTR"),e.parentNode.insertBefore(this.HtmlDiv,e),Blockly.bindEventWithChecks_(this.HtmlDiv,"mousedown",this,function(t){Blockly.utils.isRightButton(t)||t.target==this.HtmlDiv?Blockly.hideChaff(!1):Blockly.hideChaff(!0),Blockly.Touch.clearTouchIdentifier()}),this.createFlyout_(),this.categoryMenu_=new Blockly.Toolbox.CategoryMenu(this,this.HtmlDiv),this.populate_(t.options.languageTree),this.position()},Blockly.Toolbox.prototype.dispose=function(){this.flyout_.dispose(),this.categoryMenu_.dispose(),this.categoryMenu_=null,goog.dom.removeNode(this.HtmlDiv),this.lastCategory_=this.workspace_=null},Blockly.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,e={disabledPatternId:t.options.disabledPatternId,parentWorkspace:t,RTL:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,toolboxPosition:t.options.toolboxPosition};this.flyout_=t.horizontalLayout?new Blockly.HorizontalFlyout(e):new Blockly.VerticalFlyout(e),this.flyout_.setParentToolbox(this),goog.dom.insertSiblingAfter(this.flyout_.createDom("svg"),this.workspace_.getParentSvg()),this.flyout_.init(t)},Blockly.Toolbox.prototype.populate_=function(t){this.categoryMenu_.populate(t),this.setSelectedItem(this.categoryMenu_.categories_[0])},Blockly.Toolbox.prototype.getWidth=function(){return this.width},Blockly.Toolbox.prototype.getHeight=function(){return this.categoryMenu_?this.categoryMenu_.getHeight():0},Blockly.Toolbox.prototype.position=function(){var t=this.HtmlDiv;if(t){var e=this.workspace_.getParentSvg();e=Blockly.svgSize(e),this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width=e.width+"px",this.height=t.offsetHeight,this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT?t.style.right="0":t.style.left="0",t.style.height=this.getHeight()+"px",t.style.width=this.width+"px"),this.flyout_.position()}},Blockly.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},Blockly.Toolbox.prototype.addDeleteStyle=function(){Blockly.utils.addClass(this.HtmlDiv,"blocklyToolboxDelete")},Blockly.Toolbox.prototype.removeDeleteStyle=function(){Blockly.utils.removeClass(this.HtmlDiv,"blocklyToolboxDelete")},Blockly.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var t=this.HtmlDiv.getBoundingClientRect(),e=t.left,o=t.top,n=t.width;return t=t.height,this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT?new goog.math.Rect(-1e7,-1e7,1e7+e+n,2e7):this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT?new goog.math.Rect(e,-1e7,1e7+n,2e7):this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?new goog.math.Rect(-1e7,-1e7,2e7,1e7+o+t):new goog.math.Rect(0,o,2e7,1e7+n)},Blockly.Toolbox.prototype.refreshSelection=function(){var t=this.getSelectedItem();t&&t.getContents()&&this.flyout_.show(t.getContents())},Blockly.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},Blockly.Toolbox.prototype.setSelectedItem=function(t){if(this.selectedItem_){if(this.selectedItem_==t)return;this.selectedItem_.setSelected(!1)}this.selectedItem_=t,null!=this.selectedItem_&&(this.selectedItem_.setSelected(!0),this.flyout_.show(t.getContents()),this.flyout_.scrollToStart())},Blockly.Toolbox.prototype.setSelectedItemFactory=function(t){return function(){this.setSelectedItem(t),Blockly.Touch.clearTouchIdentifier()}},Blockly.Toolbox.CategoryMenu=function(t,e){this.parent_=t,this.height_=0,this.parentHtml_=e,this.createDom(),this.categories_=[]},Blockly.Toolbox.CategoryMenu.prototype.getHeight=function(){return this.height_},Blockly.Toolbox.CategoryMenu.prototype.createDom=function(){this.table=goog.dom.createDom("table","scratchCategoryMenu"),this.parentHtml_.appendChild(this.table)},Blockly.Toolbox.CategoryMenu.prototype.populate=function(t){if(t){this.dispose(),this.createDom();for(var e,o=[],n=0;e=t.childNodes[n];n++)e.tagName&&"CATEGORY"==e.tagName.toUpperCase()&&o.push(e);for(t=Math.ceil(o.length/2),n=0;n<t;n+=1){e=o[n];var r=goog.dom.createDom("tr","scratchCategoryMenuRow");this.table.appendChild(r),e&&this.categories_.push(new Blockly.Toolbox.Category(this,r,e)),o[n+t]&&this.categories_.push(new Blockly.Toolbox.Category(this,r,o[n+t]))}this.height_=this.table.offsetHeight}},Blockly.Toolbox.CategoryMenu.prototype.dispose=function(){for(var t,e=0;t=this.categories_[e];e++)t.dispose();this.categories_=[],this.table&&(goog.dom.removeNode(this.table),this.table=null)},Blockly.Toolbox.Category=function(t,e,o){this.parent_=t,this.parentHtml_=e,this.name_=o.getAttribute("name"),this.setColour(o),this.custom_=o.getAttribute("custom"),this.contents_=[],this.custom_||this.parseContents_(o),this.createDom()},Blockly.Toolbox.Category.prototype.dispose=function(){this.item_&&(goog.dom.removeNode(this.item_),this.item=null),this.contents_=this.parentHtml_=this.parent_=null},Blockly.Toolbox.Category.prototype.createDom=function(){var t=this.parent_.parent_;this.item_=goog.dom.createDom("td",{class:"scratchCategoryMenuItem"},this.name_),this.bubble_=goog.dom.createDom("div",{class:t.RTL?"scratchCategoryItemBubbleRTL":"scratchCategoryItemBubbleLTR"}),this.bubble_.style.backgroundColor=this.colour_,this.bubble_.style.borderColor=this.secondaryColour_,this.item_.appendChild(this.bubble_),this.parentHtml_.appendChild(this.item_),Blockly.bindEvent_(this.item_,"mousedown",t,t.setSelectedItemFactory(this))},Blockly.Toolbox.Category.prototype.setSelected=function(t){this.item_.className=t?"scratchCategoryMenuItem categorySelected":"scratchCategoryMenuItem"},Blockly.Toolbox.Category.prototype.parseContents_=function(t){for(var e,o=0;e=t.childNodes[o];o++)if(e.tagName)switch(e.tagName.toUpperCase()){case"BLOCK":case"SHADOW":case"LABEL":case"BUTTON":case"SEP":case"TEXT":this.contents_.push(e)}},Blockly.Toolbox.Category.prototype.getContents=function(){return this.custom_?this.custom_:this.contents_},Blockly.Toolbox.Category.prototype.setColour=function(t){var e=t.getAttribute("colour");t=t.getAttribute("secondaryColour"),goog.isString(e)?(e.match(/^#[0-9a-fA-F]{6}$/)?this.colour_=e:this.colour_=Blockly.hueToRgb(e),t.match(/^#[0-9a-fA-F]{6}$/)?this.secondaryColour_=t:this.secondaryColour_=Blockly.hueToRgb(t),this.hasColours_=!0):this.secondaryColour_=this.colour_="#000000"},Blockly.Css={},Blockly.Css.Cursor={OPEN:"handopen",CLOSED:"handclosed",DELETE:"handdelete"},Blockly.Css.currentCursor_="",Blockly.Css.styleSheet_=null,Blockly.Css.mediaPath_="",Blockly.Css.inject=function(t,e){if(!Blockly.Css.styleSheet_){var o=".blocklyDraggable {}\n";t&&(o+=Blockly.Css.CONTENT.join("\n"),Blockly.FieldDate&&(o+=Blockly.FieldDate.CSS.join("\n"))),Blockly.Css.mediaPath_=e.replace(/[\\\/]$/,""),o=o.replace(/<<<PATH>>>/g,Blockly.Css.mediaPath_);for(var n in Blockly.Colours)Blockly.Colours.hasOwnProperty(n)&&(o=o.replace(new RegExp("\\$colour\\_"+n,"g"),Blockly.Colours[n]));n=document.createElement("style"),document.head.insertBefore(n,document.head.firstChild),o=document.createTextNode(o),n.appendChild(o),Blockly.Css.styleSheet_=n.sheet}},Blockly.Css.setCursor=function(t){console.warn("Deprecated call to Blockly.Css.setCursor.See https://github.com/google/blockly/issues/981 for context")},Blockly.Css.CONTENT=[".blocklySvg {","background-color: $colour_workspace;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyRelativeWrapper {","position: relative;","width: 100%;","height: 100%;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none","}",".blocklyNonSelectable {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","-ms-user-select: none;","}",".blocklyWidgetDiv.fieldTextInput {","overflow: hidden;","border: 1px solid;","box-sizing: border-box;","transform-origin: 0 0;","-ms-transform-origin: 0 0;","-moz-transform-origin: 0 0;","-webkit-transform-origin: 0 0;","}",".blocklyTextDropDownArrow {","position: absolute;","}",".blocklyNonSelectable {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","-ms-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","overflow: visible;","top: 0;","left: 0;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;",'font-family: "Helvetica Neue", Helvetica, sans-serif;',"font-size: 9pt;","opacity: 0.9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: fixed;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-radius: 4px;","box-shadow: 0px 0px 8px 1px "+Blockly.Colours.dropDownShadow+";","padding: 4px;","-webkit-user-select: none;","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyDropDownButtonHover {","box-shadow: 0px 0px 0px 4px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton:active {","box-shadow: 0px 0px 0px 6px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton > img {","width: 80%;","height: 80%;","margin-top: 5%","}",".blocklyDropDownPlaceholder {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","}",".blocklyNumPadButton {","display: inline-block;","float: left;","padding: 0;","width: 48px;","height: 48px;","margin: 4px;","border-radius: 4px;","background: $colour_numPadBackground;","color: $colour_numPadText;","outline: none;","border: 1px solid $colour_numPadBorder;","cursor: pointer;","font-weight: 600;",'font-family: "Helvetica Neue", Helvetica, sans-serif;',"font-size: 12pt;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyNumPadButton > img {","margin-top: 10%;","width: 80%;","height: 80%;","}",".blocklyNumPadButton:active {","background: $colour_numPadActiveBackground;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".arrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".arrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".valueReportBox {","min-width: 50px;","max-width: 300px;","max-height: 200px;","overflow: auto;","word-wrap: break-word;","text-align: center;",'font-family: "Helvetica Neue", Helvetica, sans-serif;',"font-size: .8em;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #888;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPath {","stroke-width: 1px;","}",".blocklySelected>.blocklyPath {","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","cursor: -moz-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: 1.0;","stroke-opacity: 1.0;","}",".blocklyDragging>.blocklyPath {","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyInsertionMarker>.blocklyPath {","stroke: none;","}",".blocklyText {","fill: #fff;",'font-family: "Helvetica Neue", Helvetica, sans-serif;',"font-size: 12pt;","font-weight: 500;","}",".blocklyTextTruncated {","font-size: 11pt;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text {","fill: $colour_text;","}",".blocklyDropdownText {","fill: #fff !important;","}",".blocklyBubbleText {","fill: $colour_text;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyFlyoutButton {","fill: none;","}",".blocklyFlyoutButtonBackground {","stroke: #c6c6c6;","}",".blocklyFlyoutButton .blocklyText {","fill: $colour_text;","}",".blocklyFlyoutButtonShadow {","fill: none;","}",".blocklyFlyoutButton:hover {","fill: white;","cursor: pointer;","}",".blocklyFlyoutLabel {","cursor: default;","}",".blocklyFlyoutLabelBackground {","opacity: 0;","}",".blocklyFlyoutLabelText {","fill: #000;","}",".blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyCommentTextarea {","background-color: #ffc;","border: 0;","margin: 0;","padding: 2px;","resize: none;","}",".blocklyHtmlInput {","border: none;",'font-family: "Helvetica Neue", Helvetica, sans-serif;',"font-size: 12pt;","height: 100%;","margin: 0;","outline: none;","box-sizing: border-box;","width: 100%;","text-align: center;","color: $colour_text;","font-weight: 500;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: $colour_flyout;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: $colour_scrollbar;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: $colour_scrollbarHover;","}",".blocklyZoom>image {","opacity: 1;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyAngleCircle {","stroke: #444;","stroke-width: 1;","fill: #ddd;","fill-opacity: .8;","}",".blocklyAngleMarks {","stroke: #444;","stroke-width: 1;","}",".blocklyAngleGauge {","fill: #f88;","fill-opacity: .8;","}",".blocklyAngleLine {","stroke: #f00;","stroke-width: 2;","stroke-linecap: round;","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","}",".blocklyDropdownMenu {","padding: 0 !important;","}",".blocklyDropDownNumPad {","background-color: $colour_numPadBackground;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","}",".blocklyToolboxDiv {","background-color: $colour_toolbox;","color: $colour_toolboxText;","overflow-x: visible;","overflow-y: auto;","position: absolute;",'font-family: "Helvetica Neue", Helvetica, sans-serif;',"z-index: 40;","}",".blocklyTreeRoot {","padding: 4px 0;","}",".blocklyTreeRoot:focus {","outline: none;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",".blocklyHorizontalTree {","float: left;","margin: 1px 5px 8px 0;","}",".blocklyHorizontalTreeRtl {","float: right;","margin: 1px 0 8px 5px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","}",".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #e4e4e4;","}",".blocklyTreeSeparator {","border-bottom: solid #e5e5e5 1px;","height: 0;","margin: 5px 0;","}",".blocklyTreeSeparatorHorizontal {","border-right: solid #e5e5e5 1px;","width: 0;","padding: 5px 0;","margin: 0 5px;","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","width: 16px;","}",".blocklyTreeIconClosedLtr {","background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","background-position: 0px -1px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","background-position: 0px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeIconNone,",".blocklyTreeSelected>.blocklyTreeIconNone {","background-position: -48px -1px;","}",".blocklyTreeLabel {","cursor: default;",'font-family: "Helvetica Neue", Helvetica, sans-serif;',"font-size: 16px;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}",".blocklyWidgetDiv .goog-palette {","outline: none;","cursor: default;","}",".blocklyWidgetDiv .goog-palette-table {","border-collapse: collapse;","}",".blocklyWidgetDiv .goog-palette-cell {","height: 13px;","width: 15px;","margin: 0;","border: 0;","text-align: center;","vertical-align: middle;","font-size: 1px;","}",".blocklyWidgetDiv .goog-palette-colorswatch {","position: relative;","height: 13px;","width: 15px;","}",".blocklyWidgetDiv .goog-palette-cell-hover .goog-palette-colorswatch {","border: 1px solid #FFF;","box-sizing: border-box;","}",".blocklyWidgetDiv .goog-palette-cell-selected .goog-palette-colorswatch {","border: 1px solid #000;","box-sizing: border-box;","color: #fff;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","border-color: #ccc #666 #666 #ccc;","border-style: solid;","border-width: 1px;","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","z-index: 20000;","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"list-style: none;","margin: 0;","padding: 4px 7em 4px 28px;","white-space: nowrap;","}",".blocklyDropDownDiv .goog-menuitem {","color: #fff;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"font-weight: bold;","list-style: none;","margin: 0;","padding: 4px 7em 4px 28px;","white-space: nowrap;","}",".blocklyWidgetDiv .goog-menuitem.goog-menuitem-rtl, ",".blocklyDropDownDiv .goog-menuitem.goog-menuitem-rtl {","padding-left: 7em;","padding-right: 28px;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem { ","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menu-noaccel .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-noaccel .goog-menuitem {","padding-right: 20px;","}",".blocklyWidgetDiv .goog-menuitem-content ",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: 0.3;","-moz-opacity: 0.3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight,",".blocklyWidgetDiv .goog-menuitem-hover {","background-color: #d6e9f8;","border-color: #d6e9f8;","border-style: dotted;","border-width: 1px 0;","padding-bottom: 3px;","padding-top: 3px;","}",".blocklyDropDownDiv .goog-menuitem-highlight,",".blocklyDropDownDiv .goog-menuitem-hover {","background-color: rgba(0, 0, 0, 0.2);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-left: 6px;","}",".blocklyWidgetDiv .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-accel {","color: #999;","direction: ltr;","left: auto;","padding: 0 6px;","position: absolute;","right: 0;","text-align: right;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-accel {","left: 0;","right: auto;","text-align: left;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-hint, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-hint {","text-decoration: underline;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-separator, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-separator {","color: #999;","font-size: 12px;","padding-left: 4px;","}",".blocklyWidgetDiv .goog-menuseparator, ",".blocklyDropDownDiv .goog-menuseparator {","border-top: 1px solid #ccc;","margin: 4px 0;","padding: 0;","}",".blocklyFlyoutCheckbox {","fill: white;","stroke: #c8c8c8;","}",".blocklyFlyoutCheckbox.checked {","fill: "+Blockly.Colours.motion.primary+";","stroke: "+Blockly.Colours.motion.tertiary+";","}",".blocklyFlyoutCheckboxPath {","stroke: white;","stroke-width: 3;","stroke-linecap: round;","stroke-linejoin: round;","}",".scratchCategoryMenu {","width: 250px;","background: $colour_toolbox;","color: $colour_toolboxText;","font-size: .9em;","user-select: none;","-webkit-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","}",".scratchCategoryRow {","width: 50%;","}",".scratchCategoryMenuItem {","padding: 4px;","width: 50%;","cursor: pointer;","}",".scratchCategoryMenuItem.categorySelected {","background: $colour_toolboxSelected;","border-radius: 16px;","}",".scratchCategoryItemBubbleLTR {","width: 14px;","height: 14px;","border: 1px solid;","border-radius: 8px;","float: left;","margin-right: 8px;","}",".scratchCategoryItemBubbleRTL {","width: 14px;","height: 14px;","border: 1px solid;","border-radius: 8px;","float: right;","margin-left: 8px;","}",".scratchCategoryMenuItem:hover {","color: $colour_toolboxHover !important;","}",""],Blockly.WidgetDiv={},Blockly.WidgetDiv.DIV=null,Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.dispose_=null,Blockly.WidgetDiv.disposeAnimationFinished_=null,Blockly.WidgetDiv.disposeAnimationTimer_=null,Blockly.WidgetDiv.disposeAnimationTimerLength_=0,Blockly.WidgetDiv.createDom=function(){Blockly.WidgetDiv.DIV||(Blockly.WidgetDiv.DIV=goog.dom.createDom("DIV","blocklyWidgetDiv"),document.body.appendChild(Blockly.WidgetDiv.DIV))},Blockly.WidgetDiv.show=function(t,e,o,n,r){Blockly.WidgetDiv.hide(),Blockly.WidgetDiv.owner_=t,Blockly.WidgetDiv.dispose_=o,Blockly.WidgetDiv.disposeAnimationFinished_=n,Blockly.WidgetDiv.disposeAnimationTimerLength_=r,t=goog.style.getViewportPageOffset(document),Blockly.WidgetDiv.DIV.style.top=t.y+"px",Blockly.WidgetDiv.DIV.style.direction=e?"rtl":"ltr",Blockly.WidgetDiv.DIV.style.display="block"},Blockly.WidgetDiv.hide=function(t){Blockly.WidgetDiv.disposeAnimationTimer_?(window.clearTimeout(Blockly.WidgetDiv.disposeAnimationTimer_),Blockly.WidgetDiv.disposeAnimationFinished_&&Blockly.WidgetDiv.disposeAnimationFinished_(),Blockly.WidgetDiv.disposeAnimationFinished_=null,Blockly.WidgetDiv.disposeAnimationTimer_=null,Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.hideAndClearDom_()):Blockly.WidgetDiv.isVisible()&&(Blockly.WidgetDiv.dispose_&&Blockly.WidgetDiv.dispose_(),Blockly.WidgetDiv.dispose_=null,Blockly.WidgetDiv.disposeAnimationFinished_&&!t?Blockly.WidgetDiv.disposeAnimationTimer_=window.setTimeout(Blockly.WidgetDiv.hide,1e3*Blockly.WidgetDiv.disposeAnimationTimerLength_):(Blockly.WidgetDiv.disposeAnimationFinished_&&Blockly.WidgetDiv.disposeAnimationFinished_(),Blockly.WidgetDiv.disposeAnimationFinished_=null,Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.hideAndClearDom_()))},Blockly.WidgetDiv.hideAndClearDom_=function(){Blockly.WidgetDiv.DIV.style.display="none",Blockly.WidgetDiv.DIV.style.left="",Blockly.WidgetDiv.DIV.style.top="",Blockly.WidgetDiv.DIV.style.height="",goog.dom.removeChildren(Blockly.WidgetDiv.DIV)},Blockly.WidgetDiv.isVisible=function(){return!!Blockly.WidgetDiv.owner_},Blockly.WidgetDiv.hideIfOwner=function(t){Blockly.WidgetDiv.owner_==t&&Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.position=function(t,e,o,n,r){e<n.y&&(e=n.y),r?t>o.width+n.x&&(t=o.width+n.x):t<n.x&&(t=n.x),Blockly.WidgetDiv.DIV.style.left=t+"px",Blockly.WidgetDiv.DIV.style.top=e+"px",Blockly.WidgetDiv.DIV.style.height=o.height+"px"},Blockly.inject=function(t,e){if(goog.isString(t)&&(t=document.getElementById(t)||document.querySelector(t)),!goog.dom.contains(document,t))throw"Error: container is not in current document.";var o=new Blockly.Options(e||{}),n=goog.dom.createDom("div","injectionDiv");t.appendChild(n);var r=Blockly.createDom_(n,o),i=new Blockly.BlockDragSurfaceSvg(n);return n=new Blockly.WorkspaceDragSurfaceSvg(n),o=Blockly.createMainWorkspace_(r,o,i,n),Blockly.init_(o),Blockly.mainWorkspace=o,Blockly.svgResize(o),o},Blockly.createDom_=function(t,e){t.setAttribute("dir","LTR"),goog.ui.Component.setDefaultRightToLeft(e.RTL),Blockly.Css.inject(e.hasCss,e.pathToMedia);var o=Blockly.utils.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",class:"blocklySvg"},t),n=Blockly.utils.createSvgElement("defs",{},o),r=String(Math.random()).substring(2),i=Blockly.utils.createSvgElement("filter",{id:"blocklyStackGlowFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"},n);e.stackGlowBlur=Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.STACK_GLOW_RADIUS},i);var s=Blockly.utils.createSvgElement("feComponentTransfer",{result:"outBlur"},i);return Blockly.utils.createSvgElement("feFuncA",{type:"table",tableValues:"0"+goog.string.repeat(" 1",16)},s),Blockly.utils.createSvgElement("feFlood",{"flood-color":Blockly.Colours.stackGlow,"flood-opacity":Blockly.Colours.stackGlowOpacity,result:"outColor"},i),Blockly.utils.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),Blockly.utils.createSvgElement("feComposite",{in:"SourceGraphic",in2:"outGlow",operator:"over"},i),i=Blockly.utils.createSvgElement("filter",{id:"blocklyReplacementGlowFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"},n),Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.REPLACEMENT_GLOW_RADIUS},i),s=Blockly.utils.createSvgElement("feComponentTransfer",{result:"outBlur"},i),Blockly.utils.createSvgElement("feFuncA",{type:"table",tableValues:"0"+goog.string.repeat(" 1",16)},s),Blockly.utils.createSvgElement("feFlood",{"flood-color":Blockly.Colours.replacementGlow,"flood-opacity":Blockly.Colours.replacementGlowOpacity,result:"outColor"},i),Blockly.utils.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),Blockly.utils.createSvgElement("feComposite",{in:"SourceGraphic",in2:"outGlow",operator:"over"},i),s=Blockly.utils.createSvgElement("pattern",{id:"blocklyDisabledPattern"+r,patternUnits:"userSpaceOnUse",width:10,height:10},n),Blockly.utils.createSvgElement("rect",{width:10,height:10,fill:"#aaa"},s),Blockly.utils.createSvgElement("path",{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},s),e.disabledPatternId=s.id,e.gridPattern=Blockly.Grid.createDom(r,e.gridOptions,n),o},Blockly.createMainWorkspace_=function(t,e,o,n){e.parentWorkspace=null;var r=new Blockly.WorkspaceSvg(e,o,n);return r.scale=e.zoomOptions.startScale,t.appendChild(r.createDom("blocklyMainBackground")),!e.hasCategories&&e.languageTree&&(o=r.addFlyout_("svg"),Blockly.utils.insertAfter_(o,t)),r.translate(0,0),Blockly.mainWorkspace=r,e.readOnly||e.hasScrollbars||r.addChangeListener(function(){if(!r.isDragging()){var t=r.getMetrics(),o=t.viewLeft+t.absoluteLeft,n=t.viewTop+t.absoluteTop;if(t.contentTop<n||t.contentTop+t.contentHeight>t.viewHeight+n||t.contentLeft<(e.RTL?t.viewLeft:o)||t.contentLeft+t.contentWidth>(e.RTL?t.viewWidth:t.viewWidth+o))for(var i,s=r.getTopBlocks(!1),a=0;i=s[a];a++){var l=i.getRelativeToSurfaceXY(),c=i.getHeightWidth(),u=n+25-c.height-l.y;0<u&&i.moveBy(0,u),u=n+t.viewHeight-25-l.y,0>u&&i.moveBy(0,u),u=25+o-l.x-(e.RTL?0:c.width),0<u&&i.moveBy(u,0),l=o+t.viewWidth-25-l.x+(e.RTL?c.width:0),0>l&&i.moveBy(l,0)}}}),Blockly.svgResize(r),Blockly.WidgetDiv.createDom(),Blockly.DropDownDiv.createDom(),Blockly.Tooltip.createDom(),r},Blockly.init_=function(t){var e=t.options,o=t.getParentSvg();Blockly.bindEventWithChecks_(o.parentNode,"contextmenu",null,function(t){Blockly.utils.isTargetInput(t)||t.preventDefault()}),o=Blockly.bindEventWithChecks_(window,"resize",null,function(){Blockly.hideChaff(!0),Blockly.svgResize(t)}),t.setResizeHandlerWrapper(o),Blockly.inject.bindDocumentEvents_(),e.languageTree&&(t.toolbox_?t.toolbox_.init(t):t.flyout_&&(t.flyout_.init(t),t.flyout_.show(e.languageTree.childNodes),t.flyout_.scrollToStart(),e.horizontalLayout?(t.scrollY=t.flyout_.height_,e.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM&&(t.scrollY*=-1)):(t.scrollX=t.flyout_.width_,e.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT&&(t.scrollX*=-1)),t.translate(t.scrollX,t.scrollY))),e.hasScrollbars&&(t.scrollbar=new Blockly.ScrollbarPair(t),t.scrollbar.resize()),e.hasSounds&&Blockly.inject.loadSounds_(e.pathToMedia,t)},Blockly.inject.bindDocumentEvents_=function(){Blockly.documentEventsBound_||(Blockly.bindEventWithChecks_(document,"keydown",null,Blockly.onKeyDown_),Blockly.bindEvent_(document,"touchend",null,Blockly.longStop_),Blockly.bindEvent_(document,"touchcancel",null,Blockly.longStop_),goog.userAgent.IPAD&&Blockly.bindEventWithChecks_(window,"orientationchange",document,function(){Blockly.svgResize(Blockly.getMainWorkspace())})),Blockly.documentEventsBound_=!0},Blockly.inject.loadSounds_=function(t,e){var o=e.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var n=[],r=function(){for(;n.length;)Blockly.unbindEvent_(n.pop());o.preload()};n.push(Blockly.bindEventWithChecks_(document,"mousemove",null,r,!0)),n.push(Blockly.bindEventWithChecks_(document,"touchstart",null,r,!0))},Blockly.updateToolbox=function(t){console.warn("Deprecated call to Blockly.updateToolbox, use workspace.updateToolbox instead."),Blockly.getMainWorkspace().updateToolbox(t)};var CLOSURE_DEFINES={"goog.DEBUG":!1};Blockly.mainWorkspace=null,Blockly.selected=null,Blockly.draggingConnections_=[],Blockly.clipboardXml_=null,Blockly.clipboardSource_=null,Blockly.cache3dSupported_=null,Blockly.hueToRgb=function(t){return goog.color.hsvToHex(t,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)},Blockly.svgSize=function(t){return{width:t.cachedWidth_,height:t.cachedHeight_}},Blockly.resizeSvgContents=function(t){t.resizeContents()},Blockly.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),o=e.parentNode;if(o){var n=o.offsetWidth;o=o.offsetHeight,e.cachedWidth_!=n&&(e.setAttribute("width",n+"px"),e.cachedWidth_=n),e.cachedHeight_!=o&&(e.setAttribute("height",o+"px"),e.cachedHeight_=o),t.resize()}},Blockly.onKeyDown_=function(t){Blockly.mainWorkspace.options.readOnly||Blockly.utils.isTargetInput(t)||(27==t.keyCode?(Blockly.hideChaff(),Blockly.DropDownDiv.hide()):8==t.keyCode||46==t.keyCode?(t.preventDefault(),Blockly.mainWorkspace.isDragging()):(t.altKey||t.ctrlKey||t.metaKey)&&!Blockly.mainWorkspace.isDragging()&&(Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()&&(67==t.keyCode?(Blockly.hideChaff(),Blockly.copy_(Blockly.selected)):88==t.keyCode&&(Blockly.copy_(Blockly.selected),Blockly.hideChaff(),Blockly.selected.dispose(!0,!0))),86==t.keyCode?Blockly.clipboardXml_&&(Blockly.Events.setGroup(!0),Blockly.clipboardSource_.paste(Blockly.clipboardXml_),Blockly.Events.setGroup(!1)):90==t.keyCode&&(Blockly.hideChaff(),Blockly.mainWorkspace.undo(t.shiftKey))))},Blockly.copy_=function(t){var e=Blockly.Xml.blockToDom(t),o=t.getRelativeToSurfaceXY();e.setAttribute("x",t.RTL?-o.x:o.x),e.setAttribute("y",o.y),Blockly.clipboardXml_=e,Blockly.clipboardSource_=t.workspace},Blockly.duplicate_=function(t){var e=Blockly.clipboardXml_,o=Blockly.clipboardSource_;Blockly.copy_(t),t.workspace.paste(Blockly.clipboardXml_),Blockly.clipboardXml_=e,Blockly.clipboardSource_=o},Blockly.onContextMenu_=function(t){Blockly.utils.isTargetInput(t)||t.preventDefault()},Blockly.hideChaff=function(t){Blockly.Tooltip.hide(),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),t||(t=Blockly.getMainWorkspace(),t.toolbox_&&t.toolbox_.flyout_&&t.toolbox_.flyout_.autoClose&&t.toolbox_.clearSelection())},Blockly.getMainWorkspace=function(){return Blockly.mainWorkspace},Blockly.alert=function(t,e){window.alert(t),e&&e()},Blockly.confirm=function(t,e){e(window.confirm(t))},Blockly.prompt=function(t,e,o){o(window.prompt(t,e))},Blockly.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},Blockly.defineBlocksWithJsonArray=function(t){for(var e,o=0;e=t[o];o++){var n=e.type;null==n||""===n?console.warn("Block definition #"+o+" in JSON array is missing a type attribute. Skipping."):(Blockly.Blocks[n]&&console.warn("Block definition #"+o+' in JSON array overwrites prior definition of "'+n+'".'),Blockly.Blocks[n]={init:Blockly.jsonInitFactory_(e)})}},Blockly.bindEventWithChecks_=function(t,e,o,n,r){var i=!1,s=function(t){var e=!r;t=Blockly.Touch.splitEventByTouches(t);for(var s,a=0;s=t[a];a++)e&&!Blockly.Touch.shouldHandleEvent(s)||(Blockly.Touch.setClientFromTouch(s),o?n.call(o,s):n(s),i=!0)};t.addEventListener(e,s,!1);var a=[[t,e,s]];if(e in Blockly.Touch.TOUCH_MAP)for(var l,c=function(t){s(t),i&&t.preventDefault()},u=0;l=Blockly.Touch.TOUCH_MAP[e][u];u++)t.addEventListener(l,c,!1),a.push([t,l,c]);return a},Blockly.bindEvent_=function(t,e,o,n){var r=function(t){o?n.call(o,t):n(t)};t.addEventListener(e,r,!1);var i=[[t,e,r]];if(e in Blockly.Touch.TOUCH_MAP)for(var s,a=function(t){if(1==t.changedTouches.length){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}r(t),t.preventDefault()},l=0;s=Blockly.Touch.TOUCH_MAP[e][l];l++)t.addEventListener(s,a,!1),i.push([t,s,a]);return i},Blockly.unbindEvent_=function(t){for(var e;t.length;){e=t.pop();var o=e[0],n=e[1];e=e[2],o.removeEventListener(n,e,!1)}return e},Blockly.isNumber=function(t){return!!t.match(/^\s*-?\d+(\.\d+)?\s*$/)},goog.global.console||(goog.global.console={log:function(){},warn:function(){}}),goog.global.Blockly||(goog.global.Blockly={}),goog.global.Blockly.getMainWorkspace=Blockly.getMainWorkspace,module.exports=Blockly}).call(window)},function(t,e){(function(){function t(){return"#"+("00000"+Math.floor(Math.random()*Math.pow(2,24)).toString(16)).substr(-6)}var e=(window.goog,window.Blockly);e.constants={},e.DRAG_RADIUS=3,e.FLYOUT_DRAG_RADIUS=10,e.SNAP_RADIUS=48,e.CONNECTING_SNAP_RADIUS=96,e.CURRENT_CONNECTION_PREFERENCE=20,e.BUMP_DELAY=0,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.SVG_NS="http://www.w3.org/2000/svg",e.HTML_NS="http://www.w3.org/1999/xhtml",e.INPUT_VALUE=1,e.OUTPUT_VALUE=2,e.NEXT_STATEMENT=3,e.PREVIOUS_STATEMENT=4,e.DUMMY_INPUT=5,e.ALIGN_LEFT=-1,e.ALIGN_CENTRE=0,e.ALIGN_RIGHT=1,e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.INPUT_VALUE]=e.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.OUTPUT_VALUE]=e.INPUT_VALUE,e.OPPOSITE_TYPE[e.NEXT_STATEMENT]=e.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.PREVIOUS_STATEMENT]=e.NEXT_STATEMENT,e.TOOLBOX_AT_TOP=0,e.TOOLBOX_AT_BOTTOM=1,e.TOOLBOX_AT_LEFT=2,e.TOOLBOX_AT_RIGHT=3,e.OUTPUT_SHAPE_HEXAGONAL=1,e.OUTPUT_SHAPE_ROUND=2,e.OUTPUT_SHAPE_SQUARE=3,e.STACK_GLOW_RADIUS=1.3,e.REPLACEMENT_GLOW_RADIUS=2,e.Categories={motion:"motion",looks:"looks",sound:"sounds",pen:"pen",data:"data",event:"events",control:"control",sensing:"sensing",operators:"operators",more:"more"},e.DELETE_AREA_NONE=null,e.DELETE_AREA_TRASH=1,e.DELETE_AREA_TOOLBOX=2,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.Blocks.colour={},e.Blocks.colour_picker={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:t()}],outputShape:e.OUTPUT_SHAPE_ROUND,output:"Colour"})}},e.Colours={motion:{primary:"#4C97FF",secondary:"#4280D7",tertiary:"#3373CC"},looks:{primary:"#9966FF",secondary:"#855CD6",tertiary:"#774DCB"},sounds:{primary:"#CF63CF",secondary:"#C94FC9",tertiary:"#BD42BD"},control:{primary:"#FFAB19",secondary:"#EC9C13",tertiary:"#CF8B17"},event:{primary:"#FFBF00",secondary:"#E6AC00",tertiary:"#CC9900"},sensing:{primary:"#5CB1D6",secondary:"#47A8D1",tertiary:"#2E8EB8"},pen:{primary:"#0fBD8C",secondary:"#0DA57A",tertiary:"#0B8E69"},operators:{primary:"#59C059",secondary:"#46B946",tertiary:"#389438"},data:{primary:"#FF8C1A",secondary:"#FF8000",tertiary:"#DB6E00"},more:{primary:"#FF6680",secondary:"#FF4D6A",tertiary:"#FF3355"},text:"#575E75",workspace:"#F9F9F9",toolboxHover:"#4C97FF",toolboxSelected:"#e9eef2",toolboxText:"#575E75",toolbox:"#FFFFFF",flyout:"#F9F9F9",scrollbar:"#CECDCE",scrollbarHover:"#CECDCE",textField:"#FFFFFF",insertionMarker:"#000000",insertionMarkerOpacity:.2,dragShadowOpacity:.3,stackGlow:"#FFF200",stackGlowOpacity:1,replacementGlow:"#FFFFFF",replacementGlowOpacity:1,colourPickerStroke:"#FFFFFF",fieldShadow:"rgba(0,0,0,0.1)",dropDownShadow:"rgba(0, 0, 0, .3)",numPadBackground:"#547AB2",numPadBorder:"#435F91",numPadActiveBackground:"#435F91",numPadText:"#FFFFFF",valueReportBackground:"#FFFFFF",valueReportBorder:"#AAAAAA"},e.Blocks.math={},e.Blocks.math_number={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_number",name:"NUM",value:"0"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField})}},e.Blocks.math_integer={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_number",name:"NUM",precision:1}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField})}},e.Blocks.math_whole_number={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_number",name:"NUM",min:0,precision:1}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField})}},e.Blocks.math_positive_number={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_number",name:"NUM",min:0}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField})}},e.Blocks.math_angle={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_angle",name:"NUM",value:90}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField})}},e.Blocks.texts={},e.Blocks.text={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_input",name:"TEXT"}],output:"String",outputShape:e.OUTPUT_SHAPE_ROUND,colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField})}}}).call(window)},function(t,e){(function(){var t=window.goog,e=window.Blockly;t.provide("Blockly.Msg.en"),t.require("Blockly.Msg"),e.Msg.LOGIC_HUE="210",e.Msg.LOOPS_HUE="120",e.Msg.MATH_HUE="230",e.Msg.TEXTS_HUE="160",e.Msg.LISTS_HUE="260",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_HUE="330",e.Msg.PROCEDURES_HUE="290",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.TODAY="Today",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.ADD_COMMENT="Add Comment",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.HELP="Help",e.Msg.UNDO="Undo",e.Msg.REDO="Redo",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE='Rename all "%1" variables to:',e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.VARIABLE_ALREADY_EXISTS='A variable named "%1" already exists.',e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE='A variable named "%1" already exists for another variable of type "%2".',e.Msg.PROCEDURE_ALREADY_EXISTS='A procedure named "%1" already exists.',e.Msg.NEW_LIST="Create list...",e.Msg.DELETE_VARIABLE_CONFIRMATION='Delete %1 uses of the "%2" variable?',e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE='Can\'t delete the variable "%1" because it\'s part of the definition of the function "%2"',e.Msg.DELETE_VARIABLE='Delete the "%1" variable',e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_HELPURL="http://www.december.com/html/spec/colorper.html",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.COLOUR_BLEND_HELPURL="http://meyerweb.com/eric/tools/color-blend/",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TOOLTIP='Have the variable "%1" take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.',e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOREACH_TOOLTIP='For each item in a list, set the variable "%1" to the item, and then do some statements.',e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.IOS_OK="OK",e.Msg.IOS_CANCEL="Cancel",e.Msg.IOS_ERROR="Error",e.Msg.IOS_PROCEDURES_INPUTS="INPUTS",e.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",e.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",e.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",e.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",e.Msg.IOS_VARIABLES_ADD_BUTTON="Add",e.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",e.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",e.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",e.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_TOOLTIP='Check the condition in "test". If the condition is true, returns the "if true" value; otherwise returns the "if false" value.',e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_DIVISION_SYMBOL="÷",e.Msg.MATH_MULTIPLICATION_SYMBOL="×",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.MATH_CHANGE_TOOLTIP='Add a number to variable "%1".',e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.";e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TO="to",e.Msg.TEXT_APPEND_APPENDTEXT="append text",e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_APPEND_TOOLTIP='Append some text to variable "%1".',e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_INDEXOF_INPUT_INTEXT="in text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TAIL="",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_INPUT_INTEXT="in text",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_GET_CREATE_SET='Create "set %1"',e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLES_SET_CREATE_GET='Create "get %1"',e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...";e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP='Run the user-defined function "%1".',e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP='Run the user-defined function "%1" and use its output.',e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_CREATE_DO='Create "%1"',e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition."}).call(window)},function(t,e){var o={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)}},function(t,e,o){(function(t,e){!function(t,o){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),o=0;o<e.length;o++)e[o]=arguments[o+1];var n={callback:t,args:e};return c[l]=n,a(l),l++}function r(t){delete c[t]}function i(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(o,n)}}function s(t){if(u)setTimeout(s,0,t);else{var e=c[t];if(e){u=!0;try{i(e)}finally{r(t),u=!1}}}}if(!t.setImmediate){var a,l=1,c={},u=!1,g=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,o=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=o,e}}()?function(){var e="setImmediate$"+Math.random()+"$",o=function(o){o.source===t&&"string"==typeof o.data&&0===o.data.indexOf(e)&&s(+o.data.slice(e.length))};t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),a=function(o){t.postMessage(e+o,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():g&&"onreadystatechange"in g.createElement("script")?function(){var t=g.documentElement;a=function(e){var o=g.createElement("script");o.onreadystatechange=function(){s(e),o.onreadystatechange=null,t.removeChild(o),o=null},t.appendChild(o)}}():function(){a=function(t){setTimeout(s,0,t)}}(),h.setImmediate=n,h.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,o(1),o(3))},function(t,e,o){(function(t){function n(t,e){this._id=t,this._clearFn=e}var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;e.setTimeout=function(){return new n(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(24),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,o(1))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,o){(function(t){!function(t){t.fn.railsAutocomplete=function(){var e=function(){this.railsAutoCompleter||(this.railsAutoCompleter=new t.railsAutocomplete(this))};return void 0!==t.fn.on?t(document).on("focus",this.selector,e):this.live("focus",e)},t.railsAutocomplete=function(t){_e=t,this.init(_e)},t.railsAutocomplete.fn=t.railsAutocomplete.prototype={railsAutocomplete:"0.0.1"},t.railsAutocomplete.fn.extend=t.railsAutocomplete.extend=t.extend,t.railsAutocomplete.fn.extend({init:function(e){function o(t){return t.split(e.delimiter)}function n(t){return o(t).pop().replace(/^\s+/,"")}e.delimiter=t(e).attr("data-delimiter")||null,e.min_length=t(e).attr("min-length")||2,e.append_to=t(e).attr("data-append-to")||null,t(e).autocomplete({appendTo:e.append_to,source:function(o,r){params={term:n(o.term)},t(e).attr("data-autocomplete-fields")&&t.each(t.parseJSON(t(e).attr("data-autocomplete-fields")),function(e,o){params[e]=t(o).val()}),t.getJSON(t(e).attr("data-autocomplete"),params,function(){0==arguments[0].length&&(arguments[0]=[],arguments[0][0]={id:"",label:"no existing match"}),t(arguments[0]).each(function(o,n){var r={};r[n.id]=n,t(e).data(r)}),r.apply(null,arguments)})},change:function(e,o){if(t(this).is("[data-id-element]")&&""!=t(t(this).attr("data-id-element")).val()&&(t(t(this).attr("data-id-element")).val(o.item?o.item.id:""),t(this).attr("data-update-elements"))){var n=t.parseJSON(t(this).attr("data-update-elements")),r=o.item?t(this).data(o.item.id.toString()):{};if(n&&""==t(n.id).val())return;for(var i in n)element=t(n[i]),element.is(":checkbox")?null!=r[i]&&element.prop("checked",r[i]):element.val(o.item?r[i]:"")}},search:function(){if(n(this.value).length<e.min_length)return!1},focus:function(){return!1},select:function(n,r){var i=o(this.value);if(i.pop(),i.push(r.item.value),null!=e.delimiter)i.push(""),this.value=i.join(e.delimiter);else if(this.value=i.join(""),t(this).attr("data-id-element")&&t(t(this).attr("data-id-element")).val(r.item.id),t(this).attr("data-update-elements")){var s=t(this).data(r.item.id.toString()),a=t.parseJSON(t(this).attr("data-update-elements"));for(var l in a)element=t(a[l]),element.is(":checkbox")?null!=s[l]&&element.prop("checked",s[l]):element.val(s[l])}var c=this.value;return t(this).bind("keyup.clearId",function(){t.trim(t(this).val())!=t.trim(c)&&(t(t(this).attr("data-id-element")).val(""),t(this).unbind("keyup.clearId"))}),t(e).trigger("railsAutocomplete.select",r),!1}})}}),t(document).ready(function(){t("input[data-autocomplete]").railsAutocomplete()})}(t)}).call(e,o(0))},function(t,e,o){(function(e,o){var n,n;!function(e){t.exports=e()}(function(){return function t(e,o,r){function i(a,l){if(!o[a]){if(!e[a]){var c="function"==typeof n&&n;if(!l&&c)return n(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var g=o[a]={exports:{}};e[a][0].call(g.exports,function(t){var o=e[a][1][t];return i(o||t)},g,g.exports,t,e,o,r)}return o[a].exports}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,o,n){(function(t){function e(t){for(var e=0;e<t.length;e++){var o=t[e];if(o.buffer instanceof ArrayBuffer){var n=o.buffer;if(o.byteLength!==n.byteLength){var r=new Uint8Array(o.byteLength);r.set(new Uint8Array(n,o.byteOffset,o.byteLength)),n=r.buffer}t[e]=n}}}function n(t,o){o=o||{};var n=new i;e(t);for(var r=0;r<t.length;r++)n.append(t[r]);return o.type?n.getBlob(o.type):n.getBlob()}function r(t,o){return e(t),new Blob(t,o||{})}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),a=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),l=i&&i.prototype.append&&i.prototype.getBlob;o.exports=function(){return s?a?t.Blob:r:l?n:void 0}()}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,o,n){(function(e){function n(){if(!(this instanceof n))return new n;r.call(this),this._chunks=[],this._blob=null,this.length=0}var r=t("stream").Writable,i=t("util"),s=t("blob"),a=e.URL||e.webkitURL||e.mozURL;i.inherits(n,r),n.prototype._write=function(t,e,o){t instanceof Uint8Array||(t=new Uint8Array(t)),this.length+=t.length,this._chunks.push(t),o()},n.prototype.toBlob=function(t){return t=t||"application/octet-stream",this._blob||(this._blob=new s(this._chunks,{type:t}),this._chunks=[]),this._blob.type!==t&&(this._blob=new s([this._blob],{type:t})),this._blob},n.prototype.toBlobURL=function(t){return a.createObjectURL(this.toBlob(t))},o.exports=n}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{blob:1,stream:22,util:25}],3:[function(t,e,o){function n(t,e,o){if(!(this instanceof n))return new n(t,e,o);var r,i=typeof t;if("number"===i)r=t>0?t>>>0:0;else if("string"===i)"base64"===e&&(t=k(t)),r=n.byteLength(t,e);else{if("object"!==i||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&O(t.data)&&(t=t.data),r=+t.length>0?Math.floor(+t.length):0}if(this.length>j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");var s;n.TYPED_ARRAY_SUPPORT?s=n._augment(new Uint8Array(r)):(s=this,s.length=r,s._isBuffer=!0);var a;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)s._set(t);else if(C(t))if(n.isBuffer(t))for(a=0;a<r;a++)s[a]=t.readUInt8(a);else for(a=0;a<r;a++)s[a]=(t[a]%256+256)%256;else if("string"===i)s.write(t,0,e);else if("number"===i&&!n.TYPED_ARRAY_SUPPORT&&!o)for(a=0;a<r;a++)s[a]=0;return s}function r(t,e,o,n){o=Number(o)||0;var r=t.length-o;n?(n=Number(n))>r&&(n=r):n=r;var i=e.length;if(i%2!=0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[o+s]=a}return s}function i(t,e,o,n){return N(w(e),t,o,n)}function s(t,e,o,n){return N(B(e),t,o,n)}function a(t,e,o,n){return s(t,e,o,n)}function l(t,e,o,n){return N(A(e),t,o,n)}function c(t,e,o,n){return N(I(e),t,o,n)}function u(t,e,o){return 0===e&&o===t.length?R.fromByteArray(t):R.fromByteArray(t.slice(e,o))}function g(t,e,o){var n="",r="";o=Math.min(t.length,o);for(var i=e;i<o;i++)t[i]<=127?(n+=L(r)+String.fromCharCode(t[i]),r=""):r+="%"+t[i].toString(16);return n+L(r)}function h(t,e,o){var n="";o=Math.min(t.length,o);for(var r=e;r<o;r++)n+=String.fromCharCode(t[r]);return n}function p(t,e,o){return h(t,e,o)}function d(t,e,o){var n=t.length;(!e||e<0)&&(e=0),(!o||o<0||o>n)&&(o=n);for(var r="",i=e;i<o;i++)r+=x(t[i]);return r}function f(t,e,o){for(var n=t.slice(e,o),r="",i=0;i<n.length;i+=2)r+=String.fromCharCode(n[i]+256*n[i+1]);return r}function m(t,e,o){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>o)throw new RangeError("Trying to access beyond buffer length")}function y(t,e,o,r,i,s){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||e<s)throw new TypeError("value is out of bounds");if(o+r>t.length)throw new TypeError("index out of range")}function v(t,e,o,n){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-o,2);r<i;r++)t[o+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function _(t,e,o,n){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-o,4);r<i;r++)t[o+r]=e>>>8*(n?r:3-r)&255}function b(t,e,o,n,r,i){if(e>r||e<i)throw new TypeError("value is out of bounds");if(o+n>t.length)throw new TypeError("index out of range")}function E(t,e,o,n,r){return r||b(t,e,o,4,3.4028234663852886e38,-3.4028234663852886e38),D.write(t,e,o,n,23,4),o+4}function S(t,e,o,n,r){return r||b(t,e,o,8,1.7976931348623157e308,-1.7976931348623157e308),D.write(t,e,o,n,52,8),o+8}function k(t){for(t=T(t).replace(P,"");t.length%4!=0;)t+="=";return t}function T(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t){return O(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function x(t){return t<16?"0"+t.toString(16):t.toString(16)}function w(t){for(var e=[],o=0;o<t.length;o++){var n=t.charCodeAt(o);if(n<=127)e.push(n);else{var r=o;n>=55296&&n<=57343&&o++;for(var i=encodeURIComponent(t.slice(r,o+1)).substr(1).split("%"),s=0;s<i.length;s++)e.push(parseInt(i[s],16))}}return e}function B(t){for(var e=[],o=0;o<t.length;o++)e.push(255&t.charCodeAt(o));return e}function I(t){for(var e,o,n,r=[],i=0;i<t.length;i++)e=t.charCodeAt(i),o=e>>8,n=e%256,r.push(n),r.push(o);return r}function A(t){return R.toByteArray(t)}function N(t,e,o,n){for(var r=0;r<n&&!(r+o>=e.length||r>=t.length);r++)e[r+o]=t[r];return r}function L(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var R=t("base64-js"),D=t("ieee754"),O=t("is-array");o.Buffer=n,o.SlowBuffer=n,o.INSPECT_MAX_BYTES=50,n.poolSize=8192;var j=1073741823;n.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(t){return!1}}(),n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var o=t.length,r=e.length,i=0,s=Math.min(o,r);i<s&&t[i]===e[i];i++);return i!==s&&(o=t[i],r=e[i]),o<r?-1:r<o?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!O(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new n(0);if(1===t.length)return t[0];var o;if(void 0===e)for(e=0,o=0;o<t.length;o++)e+=t[o].length;var r=new n(e),i=0;for(o=0;o<t.length;o++){var s=t[o];s.copy(r,i),i+=s.length}return r},n.byteLength=function(t,e){var o;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":o=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=2*t.length;break;case"hex":o=t.length>>>1;break;case"utf8":case"utf-8":o=w(t).length;break;case"base64":o=A(t).length;break;default:o=t.length}return o},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(t,e,o){var n=!1;if(e>>>=0,o=void 0===o||o===1/0?this.length:o>>>0,t||(t="utf8"),e<0&&(e=0),o>this.length&&(o=this.length),o<=e)return"";for(;;)switch(t){case"hex":return d(this,e,o);case"utf8":case"utf-8":return g(this,e,o);case"ascii":return h(this,e,o);case"binary":return p(this,e,o);case"base64":return u(this,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f(this,e,o);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=o.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return n.compare(this,t)},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.write=function(t,e,o,n){if(isFinite(e))isFinite(o)||(n=o,o=void 0);else{var u=n;n=e,e=o,o=u}e=Number(e)||0;var g=this.length-e;o?(o=Number(o))>g&&(o=g):o=g,n=String(n||"utf8").toLowerCase();var h;switch(n){case"hex":h=r(this,t,e,o);break;case"utf8":case"utf-8":h=i(this,t,e,o);break;case"ascii":h=s(this,t,e,o);break;case"binary":h=a(this,t,e,o);break;case"base64":h=l(this,t,e,o);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=c(this,t,e,o);break;default:throw new TypeError("Unknown encoding: "+n)}return h},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(t,e){var o=this.length;if(t=~~t,e=void 0===e?o:~~e,t<0?(t+=o)<0&&(t=0):t>o&&(t=o),e<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),n.TYPED_ARRAY_SUPPORT)return n._augment(this.subarray(t,e));for(var r=e-t,i=new n(r,void 0,!0),s=0;s<r;s++)i[s]=this[s+t];return i},n.prototype.readUInt8=function(t,e){return e||m(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||m(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||m(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||m(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||m(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readInt8=function(t,e){return e||m(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||m(t,2,this.length);var o=this[t]|this[t+1]<<8;return 32768&o?4294901760|o:o},n.prototype.readInt16BE=function(t,e){e||m(t,2,this.length);var o=this[t+1]|this[t]<<8;return 32768&o?4294901760|o:o},n.prototype.readInt32LE=function(t,e){return e||m(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return e||m(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||m(t,4,this.length),D.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||m(t,4,this.length),D.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||m(t,8,this.length),D.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||m(t,8,this.length),D.read(this,t,!1,52,8)},n.prototype.writeUInt8=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},n.prototype.writeUInt16LE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):v(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):_(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):_(this,t,e,!1),e+4},n.prototype.writeInt8=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t,e+1},n.prototype.writeInt16LE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):v(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):_(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,o){return t=+t,e>>>=0,o||y(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):_(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,o){return E(this,t,e,!0,o)},n.prototype.writeFloatBE=function(t,e,o){return E(this,t,e,!1,o)},n.prototype.writeDoubleLE=function(t,e,o){return S(this,t,e,!0,o)},n.prototype.writeDoubleBE=function(t,e,o){return S(this,t,e,!1,o)},n.prototype.copy=function(t,e,o,r){var i=this;if(o||(o=0),r||0===r||(r=this.length),e||(e=0),r!==o&&0!==t.length&&0!==i.length){if(r<o)throw new TypeError("sourceEnd < sourceStart");if(e<0||e>=t.length)throw new TypeError("targetStart out of bounds");if(o<0||o>=i.length)throw new TypeError("sourceStart out of bounds");if(r<0||r>i.length)throw new TypeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-o&&(r=t.length-e+o);var s=r-o;if(s<1e3||!n.TYPED_ARRAY_SUPPORT)for(var a=0;a<s;a++)t[a+e]=this[a+o];else t._set(this.subarray(o,o+s),e)}},n.prototype.fill=function(t,e,o){if(t||(t=0),e||(e=0),o||(o=this.length),o<e)throw new TypeError("end < start");if(o!==e&&0!==this.length){if(e<0||e>=this.length)throw new TypeError("start out of bounds");if(o<0||o>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<o;n++)this[n]=t;else{var r=w(t.toString()),i=r.length;for(n=e;n<o;n++)this[n]=r[n%i]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,o=t.length;e<o;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var M=n.prototype;n._augment=function(t){return t.constructor=n,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=M.get,t.set=M.set,t.write=M.write,t.toString=M.toString,t.toLocaleString=M.toString,t.toJSON=M.toJSON,t.equals=M.equals,t.compare=M.compare,t.copy=M.copy,t.slice=M.slice,t.readUInt8=M.readUInt8,t.readUInt16LE=M.readUInt16LE,t.readUInt16BE=M.readUInt16BE,t.readUInt32LE=M.readUInt32LE,t.readUInt32BE=M.readUInt32BE,t.readInt8=M.readInt8,t.readInt16LE=M.readInt16LE,t.readInt16BE=M.readInt16BE,t.readInt32LE=M.readInt32LE,t.readInt32BE=M.readInt32BE,t.readFloatLE=M.readFloatLE,t.readFloatBE=M.readFloatBE,t.readDoubleLE=M.readDoubleLE,t.readDoubleBE=M.readDoubleBE,t.writeUInt8=M.writeUInt8,t.writeUInt16LE=M.writeUInt16LE,t.writeUInt16BE=M.writeUInt16BE,t.writeUInt32LE=M.writeUInt32LE,t.writeUInt32BE=M.writeUInt32BE,t.writeInt8=M.writeInt8,t.writeInt16LE=M.writeInt16LE,t.writeInt16BE=M.writeInt16BE,t.writeInt32LE=M.writeInt32LE,t.writeInt32BE=M.writeInt32BE,t.writeFloatLE=M.writeFloatLE,t.writeFloatBE=M.writeFloatBE,t.writeDoubleLE=M.writeDoubleLE,t.writeDoubleBE=M.writeDoubleBE,t.fill=M.fill,t.inspect=M.inspect,t.toArrayBuffer=M.toArrayBuffer,t};var P=/[^+\/0-9A-z]/g},{"base64-js":4,ieee754:5,"is-array":6}],4:[function(t,e,o){!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===i?62:e===s?63:e<a?-1:e<a+10?e-a+26+26:e<c+26?e-c:e<l+26?e-l+26:void 0}function o(t){function o(t){c[g++]=t}var n,i,s,a,l,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;l="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,c=new r(3*t.length/4-l),s=l>0?t.length-4:t.length;var g=0;for(n=0,i=0;n<s;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),o((16711680&a)>>16),o((65280&a)>>8),o(255&a);return 2===l?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,o(255&a)):1===l&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,o(a>>8&255),o(255&a)),c}function n(t){function e(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}var o,n,r,i=t.length%3,s="";for(o=0,r=t.length-i;o<r;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s+=function(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}(n);switch(i){case 1:n=t[t.length-1],s+=e(n>>2),s+=e(n<<4&63),s+="==";break;case 2:n=(t[t.length-2]<<8)+t[t.length-1],s+=e(n>>10),s+=e(n>>4&63),s+=e(n<<2&63),s+="="}return s}var r="undefined"!=typeof Uint8Array?Uint8Array:Array,i="+".charCodeAt(0),s="/".charCodeAt(0),a="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0);t.toByteArray=o,t.fromByteArray=n}(void 0===o?this.base64js={}:o)},{}],5:[function(t,e,o){o.read=function(t,e,o,n,r){var i,s,a=8*r-n-1,l=(1<<a)-1,c=l>>1,u=-7,g=o?r-1:0,h=o?-1:1,p=t[e+g];for(g+=h,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=256*i+t[e+g],g+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=256*s+t[e+g],g+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},o.write=function(t,e,o,n,r,i){var s,a,l,c=8*i-r-1,u=(1<<c)-1,g=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+g>=1?h/l:h*Math.pow(2,1-g),e*l>=2&&(s++,l/=2),s+g>=u?(a=0,s=u):s+g>=1?(a=(e*l-1)*Math.pow(2,r),s+=g):(a=e*Math.pow(2,g-1)*Math.pow(2,r),s=0));r>=8;t[o+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[o+p]=255&s,p+=d,s/=256,c-=8);t[o+p-d]|=128*f}},{}],6:[function(t,e,o){var n=Array.isArray,r=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==r.call(t)}},{}],7:[function(t,e,o){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,o,n,i,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(o=this._events[t],a(o))return!1;if(r(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),l=1;l<n;l++)i[l-1]=arguments[l];o.apply(this,i)}else if(s(o)){for(n=arguments.length,i=new Array(n-1),l=1;l<n;l++)i[l-1]=arguments[l];for(c=o.slice(),n=c.length,l=0;l<n;l++)c[l].apply(this,i)}return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var o;o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function o(){this.removeListener(t,o),n||(n=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var n=!1;return o.listener=e,this.on(t,o),this},n.prototype.removeListener=function(t,e){var o,n,i,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=this._events[t],i=o.length,n=-1,o===e||r(o.listener)&&o.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(o)){for(a=i;a-- >0;)if(o[a]===e||o[a].listener&&o[a].listener===e){n=a;break}if(n<0)return this;1===o.length?(o.length=0,delete this._events[t]):o.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,o;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(o=this._events[t],r(o))this.removeListener(t,o);else for(;o.length;)this.removeListener(t,o[o.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){return t._events&&t._events[e]?r(t._events[e])?1:t._events[e].length:0}},{}],8:[function(t,e,o){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},{}],9:[function(t,e,o){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],10:[function(t,e,o){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,o="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var n=[];if(e){var r=document.createElement("div");return new MutationObserver(function(){var t=n.slice();n.length=0,t.forEach(function(t){t()})}).observe(r,{attributes:!0}),function(t){n.length||r.setAttribute("yes","no"),n.push(t)}}return o?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){n.shift()()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],11:[function(t,e,o){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":12}],12:[function(t,e,o){(function(o){function n(t){if(!(this instanceof n))return new n(t);a.call(this,t),l.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",r)}function r(){this.allowHalfOpen||this._writableState.ended||o.nextTick(this.end.bind(this))}e.exports=n;var i=Object.keys||function(t){var e=[];for(var o in t)e.push(o);return e},s=t("core-util-is");s.inherits=t("inherits");var a=t("./_stream_readable"),l=t("./_stream_writable");s.inherits(n,a),function(t,e){for(var o=0,n=t.length;o<n;o++)e(t[o],o)}(i(l.prototype),function(t){n.prototype[t]||(n.prototype[t]=l.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":14,"./_stream_writable":16,_process:10,"core-util-is":17,inherits:8}],13:[function(t,e,o){function n(t){if(!(this instanceof n))return new n(t);r.call(this,t)}e.exports=n;var r=t("./_stream_transform"),i=t("core-util-is");i.inherits=t("inherits"),i.inherits(n,r),n.prototype._transform=function(t,e,o){o(null,t)}},{"./_stream_transform":15,"core-util-is":17,inherits:8}],14:[function(t,e,o){(function(o){function n(e,o){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(B||(B=t("string_decoder/").StringDecoder),this.decoder=new B(e.encoding),this.encoding=e.encoding)}function r(t){if(!(this instanceof r))return new r(t);this._readableState=new n(t,this),this.readable=!0,x.call(this)}function i(t,e,o,n,r){var i=c(e,o);if(i)t.emit("error",i);else if(null===o||void 0===o)e.reading=!1,e.ended||u(t,e);else if(e.objectMode||o&&o.length>0)if(e.ended&&!r){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&r){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||r||n||(o=e.decoder.write(o)),e.length+=e.objectMode?1:o.length,r?e.buffer.unshift(o):(e.reading=!1,e.buffer.push(o)),e.needReadable&&g(t),p(t,e);else r||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=I)t=I;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function l(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var o=null;return T.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o}function u(t,e){if(e.decoder&&!e.ended){var o=e.decoder.end();o&&o.length&&(e.buffer.push(o),e.length+=e.objectMode?1:o.length)}e.ended=!0,e.length>0?g(t):b(t)}function g(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?o.nextTick(function(){h(t)}):h(t))}function h(t){t.emit("readable")}function p(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(function(){d(t,e)}))}function d(t,e){for(var o=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),o!==e.length);)o=e.length;e.readingMore=!1}function f(t){return function(){var e=t._readableState;0===--e.awaitDrain&&m(t)}}function m(t){function e(t,e,r){!1===t.write(o)&&n.awaitDrain++}var o,n=t._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(o=t.read());)if(1===n.pipesCount?e(n.pipes,0,null):E(n.pipes,e),t.emit("data",o),n.awaitDrain>0)return;if(0===n.pipesCount)return n.flowing=!1,void(C.listenerCount(t,"data")>0&&v(t));n.ranOut=!0}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function v(t,e){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=e||!1,r=!1;t.readable=!0,t.pipe=x.prototype.pipe,t.on=t.addListener=x.prototype.on,t.on("readable",function(){r=!0;for(var e;!n&&null!==(e=t.read());)t.emit("data",e);null===e&&(r=!1,t._readableState.needReadable=!0)}),t.pause=function(){n=!0,this.emit("pause")},t.resume=function(){n=!1,r?o.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function _(t,e){var o,n=e.buffer,r=e.length,i=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===r)o=null;else if(s)o=n.shift();else if(!t||t>=r)o=i?n.join(""):T.concat(n,r),n.length=0;else if(t<n[0].length){var a=n[0];o=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)o=n.shift();else{o=i?"":new T(t);for(var l=0,c=0,u=n.length;c<u&&l<t;c++){var a=n[0],g=Math.min(t-l,a.length);i?o+=a.slice(0,g):a.copy(o,l,0,g),g<a.length?n[0]=a.slice(g):n.shift(),l+=g}}return o}function b(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,o.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function E(t,e){for(var o=0,n=t.length;o<n;o++)e(t[o],o)}function S(t,e){for(var o=0,n=t.length;o<n;o++)if(t[o]===e)return o;return-1}e.exports=r;var k=t("isarray"),T=t("buffer").Buffer;r.ReadableState=n;var C=t("events").EventEmitter;C.listenerCount||(C.listenerCount=function(t,e){return t.listeners(e).length});var x=t("stream"),w=t("core-util-is");w.inherits=t("inherits");var B;w.inherits(r,x),r.prototype.push=function(t,e){var o=this._readableState;return"string"!=typeof t||o.objectMode||(e=e||o.defaultEncoding)!==o.encoding&&(t=new T(t,e),e=""),i(this,o,t,e,!1)},r.prototype.unshift=function(t){return i(this,this._readableState,t,"",!0)},r.prototype.setEncoding=function(e){B||(B=t("string_decoder/").StringDecoder),this._readableState.decoder=new B(e),this._readableState.encoding=e};var I=8388608;r.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var o,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return g(this),null;if(0===(t=l(t,e))&&e.ended)return o=null,e.length>0&&e.decoder&&(o=_(t,e),e.length-=o.length),0===e.length&&b(this),o;var r=e.needReadable;return e.length-t<=e.highWaterMark&&(r=!0),(e.ended||e.reading)&&(r=!1),r&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=l(n,e)),o=t>0?_(t,e):null,null===o&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&b(this),o},r.prototype._read=function(t){this.emit("error",new Error("not implemented"))},r.prototype.pipe=function(t,e){function n(t){t===u&&i()}function r(){t.end()}function i(){t.removeListener("close",a),t.removeListener("finish",l),t.removeListener("drain",d),t.removeListener("error",s),t.removeListener("unpipe",n),u.removeListener("end",r),u.removeListener("end",i),t._writableState&&!t._writableState.needDrain||d()}function s(e){c(),t.removeListener("error",s),0===C.listenerCount(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",l),c()}function l(){t.removeListener("close",a),c()}function c(){u.unpipe(t)}var u=this,g=this._readableState;switch(g.pipesCount){case 0:g.pipes=t;break;case 1:g.pipes=[g.pipes,t];break;default:g.pipes.push(t)}g.pipesCount+=1;var h=(!e||!1!==e.end)&&t!==o.stdout&&t!==o.stderr,p=h?r:i;g.endEmitted?o.nextTick(p):u.once("end",p),t.on("unpipe",n);var d=f(u);return t.on("drain",d),t._events&&t._events.error?k(t._events.error)?t._events.error.unshift(s):t._events.error=[s,t._events.error]:t.on("error",s),t.once("close",a),t.once("finish",l),t.emit("pipe",u),g.flowing||(this.on("readable",y),g.flowing=!0,o.nextTick(function(){m(u)})),t},r.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var o=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1;for(var r=0;r<n;r++)o[r].emit("unpipe",this);return this}var r=S(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},r.prototype.on=function(t,e){var o=x.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||v(this),"readable"===t&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&g(this):this.read(0))}return o},r.prototype.addListener=r.prototype.on,r.prototype.resume=function(){v(this),this.read(0),this.emit("resume")},r.prototype.pause=function(){v(this,!0),this.emit("pause")},r.prototype.wrap=function(t){var e=this._readableState,o=!1,n=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(r){if(e.decoder&&(r=e.decoder.write(r)),(!e.objectMode||null!==r&&void 0!==r)&&(e.objectMode||r&&r.length)){n.push(r)||(o=!0,t.pause())}});for(var r in t)"function"==typeof t[r]&&void 0===this[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));return E(["error","close","destroy","pause","resume"],function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(e){o&&(o=!1,t.resume())},n},r._fromList=_}).call(this,t("_process"))},{_process:10,buffer:3,"core-util-is":17,events:7,inherits:8,isarray:9,stream:22,"string_decoder/":23}],15:[function(t,e,o){function n(t,e){this.afterTransform=function(t,o){return r(e,t,o)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(t,e,o){var n=t._transformState;n.transforming=!1;var r=n.writecb;if(!r)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==o&&void 0!==o&&t.push(o),r&&r(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);a.call(this,t);var e=(this._transformState=new n(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var o=t._writableState,n=(t._readableState,t._transformState);if(o.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=i;var a=t("./_stream_duplex"),l=t("core-util-is");l.inherits=t("inherits"),l.inherits(i,a),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,o){throw new Error("not implemented")},i.prototype._write=function(t,e,o){var n=this._transformState;if(n.writecb=o,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":12,"core-util-is":17,inherits:8}],16:[function(t,e,o){(function(o){function n(t,e,o){this.chunk=t,this.encoding=e,this.callback=o}function r(t,e){t=t||{};var o=t.highWaterMark;this.highWaterMark=o||0===o?o:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=!1===t.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function i(e){var o=t("./_stream_duplex");if(!(this instanceof i||this instanceof o))return new i(e);this._writableState=new r(e,this),this.writable=!0,S.call(this)}function s(t,e,n){var r=new Error("write after end");t.emit("error",r),o.nextTick(function(){n(r)})}function a(t,e,n,r){var i=!0;if(!b.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!e.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),o.nextTick(function(){r(s)}),i=!1}return i}function l(t,e,o){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=new b(e,o)),e}function c(t,e,o,r,i){o=l(e,o,r),b.isBuffer(o)&&(r="buffer");var s=e.objectMode?1:o.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing?e.buffer.push(new n(o,r,i)):u(t,e,s,o,r,i),a}function u(t,e,o,n,r,i){e.writelen=o,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1}function g(t,e,n,r,i){n?o.nextTick(function(){i(r)}):i(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(h(n),e)g(t,n,r,e,i);else{var s=y(t,n);s||n.bufferProcessing||!n.buffer.length||m(t,n),r?o.nextTick(function(){d(t,n,s,i)}):d(t,n,s,i)}}function d(t,e,o,n){o||f(t,e),n(),o&&v(t,e)}function f(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;for(var o=0;o<e.buffer.length;o++){var n=e.buffer[o],r=n.chunk,i=n.encoding,s=n.callback;if(u(t,e,e.objectMode?1:r.length,r,i,s),e.writing){o++;break}}e.bufferProcessing=!1,o<e.buffer.length?e.buffer=e.buffer.slice(o):e.buffer.length=0}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function v(t,e){var o=y(t,e);return o&&(e.finished=!0,t.emit("finish")),o}function _(t,e,n){e.ending=!0,v(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n)),e.ended=!0}e.exports=i;var b=t("buffer").Buffer;i.WritableState=r;var E=t("core-util-is");E.inherits=t("inherits");var S=t("stream");E.inherits(i,S),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(t,e,o){var n=this._writableState,r=!1;return"function"==typeof e&&(o=e,e=null),b.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof o&&(o=function(){}),n.ended?s(this,n,o):a(this,n,t,o)&&(r=c(this,n,t,e,o)),r},i.prototype._write=function(t,e,o){o(new Error("not implemented"))},i.prototype.end=function(t,e,o){var n=this._writableState;"function"==typeof t?(o=t,t=null,e=null):"function"==typeof e&&(o=e,e=null),void 0!==t&&null!==t&&this.write(t,e),n.ending||n.finished||_(this,n,o)}}).call(this,t("_process"))},{"./_stream_duplex":12,_process:10,buffer:3,"core-util-is":17,inherits:8,stream:22}],17:[function(t,e,o){(function(t){function e(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function r(t){return null===t}function i(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function l(t){return"symbol"==typeof t}function c(t){return void 0===t}function u(t){return g(t)&&"[object RegExp]"===y(t)}function g(t){return"object"==typeof t&&null!==t}function h(t){return g(t)&&"[object Date]"===y(t)}function p(t){return g(t)&&("[object Error]"===y(t)||t instanceof Error)}function d(t){return"function"==typeof t}function f(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function m(e){return t.isBuffer(e)}function y(t){return Object.prototype.toString.call(t)}o.isArray=e,o.isBoolean=n,o.isNull=r,o.isNullOrUndefined=i,o.isNumber=s,o.isString=a,o.isSymbol=l,o.isUndefined=c,o.isRegExp=u,o.isObject=g,o.isDate=h,o.isError=p,o.isFunction=d,o.isPrimitive=f,o.isBuffer=m}).call(this,t("buffer").Buffer)},{buffer:3}],18:[function(t,e,o){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":13}],19:[function(t,e,o){var n=t("stream");o=e.exports=t("./lib/_stream_readable.js"),o.Stream=n,o.Readable=o,o.Writable=t("./lib/_stream_writable.js"),o.Duplex=t("./lib/_stream_duplex.js"),o.Transform=t("./lib/_stream_transform.js"),o.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":12,"./lib/_stream_passthrough.js":13,"./lib/_stream_readable.js":14,"./lib/_stream_transform.js":15,"./lib/_stream_writable.js":16,stream:22}],20:[function(t,e,o){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":15}],21:[function(t,e,o){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":16}],22:[function(t,e,o){function n(){r.call(this)}e.exports=n;var r=t("events").EventEmitter;t("inherits")(n,r),n.Readable=t("readable-stream/readable.js"),n.Writable=t("readable-stream/writable.js"),n.Duplex=t("readable-stream/duplex.js"),n.Transform=t("readable-stream/transform.js"),n.PassThrough=t("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function o(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function i(){u||(u=!0,t.end())}function s(){u||(u=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){c.removeListener("data",o),t.removeListener("drain",n),c.removeListener("end",i),c.removeListener("close",s),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",l),c.removeListener("close",l),t.removeListener("close",l)}var c=this;c.on("data",o),t.on("drain",n),t._isStdio||e&&!1===e.end||(c.on("end",i),c.on("close",s));var u=!1;return c.on("error",a),t.on("error",a),c.on("end",l),c.on("close",l),t.on("close",l),t.emit("pipe",c),t}},{events:7,inherits:8,"readable-stream/duplex.js":11,"readable-stream/passthrough.js":18,"readable-stream/readable.js":19,"readable-stream/transform.js":20,"readable-stream/writable.js":21}],23:[function(t,e,o){function n(t){if(t&&!l(t))throw new Error("Unknown encoding: "+t)}function r(t){return t.toString(this.encoding)}function i(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,l=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=o.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var o=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,o),this.charReceived+=o,this.charReceived<this.charLength)return"";t=t.slice(o,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived),e+=t.toString(this.encoding,0,r);var r=e.length-1,n=e.charCodeAt(r);if(n>=55296&&n<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,r)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var o=t[t.length-e];if(1==e&&o>>5==6){this.charLength=2;break}if(e<=2&&o>>4==14){this.charLength=3;break}if(e<=3&&o>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var o=this.charReceived,n=this.charBuffer,r=this.encoding;e+=n.slice(0,o).toString(r)}return e}},{buffer:3}],24:[function(t,e,o){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],25:[function(t,o,n){(function(e,o){function r(t,e){var o={seen:[],stylize:s};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),f(e)?o.showHidden=e:e&&n._extend(o,e),E(o.showHidden)&&(o.showHidden=!1),E(o.depth)&&(o.depth=2),E(o.colors)&&(o.colors=!1),E(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=i),l(o,t,o.depth)}function i(t,e){var o=r.styles[e];return o?"["+r.colors[o][0]+"m"+t+"["+r.colors[o][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,o){e[t]=!0}),e}function l(t,e,o){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(o,t);return _(r)||(r=l(t,r,o)),r}var i=c(t,e);if(i)return i;var s=Object.keys(e),f=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),C(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(e);if(0===s.length){if(x(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(S(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(T(e))return t.stylize(Date.prototype.toString.call(e),"date");if(C(e))return u(e)}var y="",v=!1,b=["{","}"];if(d(e)&&(v=!0,b=["[","]"]),x(e)){y=" [Function"+(e.name?": "+e.name:"")+"]"}if(S(e)&&(y=" "+RegExp.prototype.toString.call(e)),T(e)&&(y=" "+Date.prototype.toUTCString.call(e)),C(e)&&(y=" "+u(e)),0===s.length&&(!v||0==e.length))return b[0]+y+b[1];if(o<0)return S(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var E;return E=v?g(t,e,o,f,s):s.map(function(n){return h(t,e,o,f,n,v)}),t.seen.pop(),p(E,y,b)}function c(t,e){if(E(e))return t.stylize("undefined","undefined");if(_(e)){var o="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(o,"string")}return v(e)?t.stylize(""+e,"number"):f(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function g(t,e,o,n,r){for(var i=[],s=0,a=e.length;s<a;++s)N(e,String(s))?i.push(h(t,e,o,n,String(s),!0)):i.push("");return r.forEach(function(r){r.match(/^\d+$/)||i.push(h(t,e,o,n,r,!0))}),i}function h(t,e,o,n,r,i){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),N(n,r)||(s="["+r+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(o)?l(t,c.value,null):l(t,c.value,o-1),a.indexOf("\n")>-1&&(a=i?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),E(s)){if(i&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,o){var n=0;return t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?o[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+o[1]:o[0]+e+" "+t.join(", ")+" "+o[1]}function d(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function E(t){return void 0===t}function S(t){return k(t)&&"[object RegExp]"===B(t)}function k(t){return"object"==typeof t&&null!==t}function T(t){return k(t)&&"[object Date]"===B(t)}function C(t){return k(t)&&("[object Error]"===B(t)||t instanceof Error)}function x(t){return"function"==typeof t}function w(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function B(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}function A(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var L=/%[sdj%]/g;n.format=function(t){if(!_(t)){for(var e=[],o=0;o<arguments.length;o++)e.push(r(arguments[o]));return e.join(" ")}for(var o=1,n=arguments,i=n.length,s=String(t).replace(L,function(t){if("%%"===t)return"%";if(o>=i)return t;switch(t){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}default:return t}}),a=n[o];o<i;a=n[++o])m(a)||!k(a)?s+=" "+a:s+=" "+r(a);return s},n.deprecate=function(t,r){function i(){if(!s){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(E(o.process))return function(){return n.deprecate(t,r).apply(this,arguments)};if(!0===e.noDeprecation)return t;var s=!1;return i};var R,D={};n.debuglog=function(t){if(E(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var o=e.pid;D[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,o,e)}}else D[t]=function(){};return D[t]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=f,n.isNull=m,n.isNullOrUndefined=y,n.isNumber=v,n.isString=_,n.isSymbol=b,n.isUndefined=E,n.isRegExp=S,n.isObject=k,n.isDate=T,n.isError=C,n.isFunction=x,n.isPrimitive=w,n.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!k(e))return t;for(var o=Object.keys(e),n=o.length;n--;)t[o[n]]=e[o[n]];return t}}).call(this,t("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":24,_process:10,inherits:8}]},{},[2])(2)})}).call(e,o(1),o(9).Buffer)},function(t,e,o){(function(e,o,n,r){/* @preserve
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2017 Petka Antonov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */
!function(e){t.exports=e()}(function(){return function t(e,o,n){function r(s,a){if(!o[s]){if(!e[s]){var l="function"==typeof _dereq_&&_dereq_;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){var o=e[s][1][t];return r(o||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,o){"use strict";e.exports=function(t){function e(t){var e=new o(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var o=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,o,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c}function i(t,e,o){this._lateQueue.push(t,e,o),this._queueTick()}function s(t,e,o){this._normalQueue.push(t,e,o),this._queueTick()}function a(t){this._normalQueue._pushOne(t),this._queueTick()}var l;try{throw new Error}catch(t){l=t}var c=t("./schedule"),u=t("./queue"),g=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){g.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,o){o?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},g.hasDevTools?(r.prototype.invokeLater=function(t,e,o){this._trampolineEnabled?i.call(this,t,e,o):this._schedule(function(){setTimeout(function(){t.call(e,o)},100)})},r.prototype.invoke=function(t,e,o){this._trampolineEnabled?s.call(this,t,e,o):this._schedule(function(){t.call(e,o)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=s,r.prototype.settlePromises=a),r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var o=t.shift(),n=t.shift();e.call(o,n)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},o.exports=r,o.exports.firstLineError=l},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,o){"use strict";e.exports=function(t,e,o,n){var r=!1,i=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(i,i,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},l=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(i){r||(r=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var c=o(i),u=new t(e);u._propagateFrom(this,1);var g=this._target();if(u._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:u,target:g,bindingPromise:c};g._then(e,s,void 0,u,h),c._then(a,l,void 0,u,h),u._setOnCancel(c)}else u._resolveCallback(g);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,o){return t.resolve(o).bind(e)}}},{}],4:[function(t,e,o){"use strict";function n(){try{Promise===i&&(Promise=r)}catch(t){}return i}var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=n,e.exports=i},{"./promise":22}],5:[function(t,e,o){"use strict";var n=Object.create;if(n){var r=n(null),i=n(null);r[" size"]=i[" size"]=0}e.exports=function(e){function o(t,o){var n;if(null!=t&&(n=t[o]),"function"!=typeof n){var r="Object "+a.classString(t)+" has no method '"+a.toString(o)+"'";throw new e.TypeError(r)}return n}function n(t){return o(t,this.pop()).apply(t,this)}function r(t){return t[this]}function i(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),l=a.canEvaluate;a.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(n,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=i;else if(l){var o=s(t);e=null!==o?o:r}else e=r;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,o){"use strict";e.exports=function(e,o,n,r){var i=t("./util"),s=i.tryCatch,a=i.errorObj,l=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var o=t._cancellationParent;if(null==o||!o._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=o}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(i.isArray(t))for(var o=0;o<t.length;++o)this._doInvokeOnCancel(t[o],e);else if(void 0!==t)if("function"==typeof t){if(!e){var n=s(t).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),l.throwLater(n.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,o){"use strict";e.exports=function(e){function o(t,o,a){return function(l){var c=a._boundValue();t:for(var u=0;u<t.length;++u){var g=t[u];if(g===Error||null!=g&&g.prototype instanceof Error){if(l instanceof g)return i(o).call(c,l)}else if("function"==typeof g){var h=i(g).call(c,l);if(h===s)return h;if(h)return i(o).call(c,l)}else if(n.isObject(l)){for(var p=r(g),d=0;d<p.length;++d){var f=p[d];if(g[f]!=l[f])continue t}return i(o).call(c,l)}}return e}}var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,s=n.errorObj;return o}},{"./es5":13,"./util":36}],8:[function(t,e,o){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(n())}function o(){return r?new e:void 0}function n(){var t=i.length-1;return t>=0?i[t]:void 0}var r=!1,i=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=i.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=o,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var o=t.prototype._pushContext,i=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,l=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=o,t.prototype._popContext=i,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=l,r=!1},r=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=n,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,o,n){"use strict";o.exports=function(o,n){function r(t,e){return{promise:e}}function i(){return!1}function s(t,e,o){var n=this;try{t(e,o,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+F.toString(t));n._attachCancellationCallback(t)})}catch(t){return t}}function a(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?F.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function l(){return this._onCancelField}function c(t){this._onCancelField=t}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function g(t,e){if(0!=(1&e)){this._cancellationParent=t;var o=t._branchesRemainingToCancel;void 0===o&&(o=0),t._branchesRemainingToCancel=o+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(){var t=this._boundTo;return void 0!==t&&t instanceof o?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new L(this._peekContext())}function f(t,e){if(H(t)){var o=this._trace;if(void 0!==o&&e&&(o=o._parent),void 0!==o)o.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=T(t);F.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),F.notEnumerableProp(t,"__stackCleaned__",!0)}}}function m(t,e,o,n,r){if(void 0===t&&null!==e&&$){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&n._bitField))return;o&&(o+=" ");var i="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),l=S(a),c=l.length-1;c>=0;--c){var u=l[c];if(!G.test(u)){var g=u.match(V);g&&(i="at "+g[1]+":"+g[2]+":"+g[3]+" ");break}}if(l.length>0)for(var h=l[0],c=0;c<a.length;++c)if(a[c]===h){c>0&&(s="\n"+a[c-1]);break}}var p="a promise was created in a "+o+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+s;n._warn(p,!0,e)}}function y(t,e){var o=t+" is deprecated and will be removed in a future version.";return e&&(o+=" Use "+e+" instead."),v(o)}function v(t,e,n){if(st.warnings){var r,i=new P(t);if(e)n._attachExtraTrace(i);else if(st.longStackTraces&&(r=o._peekContext()))r.attachExtraTrace(i);else{var s=T(i);i.stack=s.message+"\n"+s.stack.join("\n")}et("warning",i)||C(i,"",!0)}}function _(t,e){for(var o=0;o<e.length-1;++o)e[o].push("From previous event:"),e[o]=e[o].join("\n");return o<e.length&&(e[o]=e[o].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function E(t){for(var e=t[0],o=1;o<t.length;++o){for(var n=t[o],r=e.length-1,i=e[r],s=-1,a=n.length-1;a>=0;--a)if(n[a]===i){s=a;break}for(var a=s;a>=0;--a){var l=n[a];if(e[r]!==l)break;e.pop(),r--}e=n}}function S(t){for(var e=[],o=0;o<t.length;++o){var n=t[o],r="    (No stack trace)"===n||W.test(n),i=r&&nt(n);r&&!i&&(q&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function k(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),o=0;o<e.length;++o){var n=e[o];if("    (No stack trace)"===n||W.test(n))break}return o>0&&"SyntaxError"!=t.name&&(e=e.slice(o)),e}function T(t){var e=t.stack,o=t.toString();return e="string"==typeof e&&e.length>0?k(t):["    (No stack trace)"],{message:o,stack:"SyntaxError"==t.name?e:S(e)}}function C(t,e,o){if("undefined"!=typeof console){var n;if(F.isObject(t)){var r=t.stack;n=e+z(r,t)}else n=e+String(t);"function"==typeof O?O(n,o):("function"==typeof console.log||"object"==typeof console.log)&&console.log(n)}}function x(t,e,o,n){var r=!1;try{"function"==typeof e&&(r=!0,"rejectionHandled"===t?e(n):e(o,n))}catch(t){M.throwLater(t)}"unhandledRejection"===t?et(t,o,n)||r||C(o,"Unhandled rejection "):et(t,n)}function w(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():F.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+B(e)+">, no stack trace)"}function B(t){return t.length<41?t:t.substr(0,38)+"..."}function I(){return"function"==typeof it}function A(t){var e=t.match(rt);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function N(t,e){if(I()){for(var o,n,r=t.stack.split("\n"),i=e.stack.split("\n"),s=-1,a=-1,l=0;l<r.length;++l){var c=A(r[l]);if(c){o=c.fileName,s=c.line;break}}for(var l=0;l<i.length;++l){var c=A(i[l]);if(c){n=c.fileName,a=c.line;break}}0>s||0>a||!o||!n||o!==n||s>=a||(nt=function(t){if(U.test(t))return!0;var e=A(t);return!!(e&&e.fileName===o&&s<=e.line&&e.line<=a)})}}function L(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);it(this,L),e>32&&this.uncycle()}var R,D,O,j=o._getDomain,M=o._async,P=t("./errors").Warning,F=t("./util"),H=F.canAttachTrace,U=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,G=/\((?:timers\.js):\d+:\d+\)/,V=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,W=null,z=null,q=!1,X=!(0==F.env("BLUEBIRD_DEBUG")||!F.env("BLUEBIRD_DEBUG")&&"development"!==F.env("NODE_ENV")),K=!(0==F.env("BLUEBIRD_WARNINGS")||!X&&!F.env("BLUEBIRD_WARNINGS")),Y=!(0==F.env("BLUEBIRD_LONG_STACK_TRACES")||!X&&!F.env("BLUEBIRD_LONG_STACK_TRACES")),$=0!=F.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(K||!!F.env("BLUEBIRD_W_FORGOTTEN_RETURN"));o.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},o.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),M.invokeLater(this._notifyUnhandledRejection,this,void 0))},o.prototype._notifyUnhandledRejectionIsHandled=function(){x("rejectionHandled",R,void 0,this)},o.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},o.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},o.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),x("unhandledRejection",D,t,this)}},o.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},o.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},o.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},o.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},o.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},o.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},o.prototype._warn=function(t,e,o){return v(t,e,o||this)},o.onPossiblyUnhandledRejection=function(t){var e=j();D="function"==typeof t?null===e?t:F.domainBind(e,t):void 0},o.onUnhandledRejectionHandled=function(t){var e=j();R="function"==typeof t?null===e?t:F.domainBind(e,t):void 0};var Q=function(){};o.longStackTraces=function(){if(M.haveItemsQueued()&&!st.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!st.longStackTraces&&I()){var t=o.prototype._captureStackTrace,e=o.prototype._attachExtraTrace;st.longStackTraces=!0,Q=function(){if(M.haveItemsQueued()&&!st.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");o.prototype._captureStackTrace=t,o.prototype._attachExtraTrace=e,n.deactivateLongStackTraces(),M.enableTrampoline(),st.longStackTraces=!1},o.prototype._captureStackTrace=d,o.prototype._attachExtraTrace=f,n.activateLongStackTraces(),M.disableTrampolineIfNecessary()}},o.hasLongStackTraces=function(){return st.longStackTraces&&I()};var J=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return F.global.dispatchEvent(t),function(t,e){var o=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!F.global.dispatchEvent(o)}}if("function"==typeof Event){var t=new Event("CustomEvent");return F.global.dispatchEvent(t),function(t,e){var o=new Event(t.toLowerCase(),{cancelable:!0});return o.detail=e,!F.global.dispatchEvent(o)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),F.global.dispatchEvent(t),function(t,e){var o=document.createEvent("CustomEvent");return o.initCustomEvent(t.toLowerCase(),!1,!0,e),!F.global.dispatchEvent(o)}}catch(t){}return function(){return!1}}(),Z=function(){return F.isNode?function(){return e.emit.apply(e,arguments)}:F.global?function(t){var e="on"+t.toLowerCase(),o=F.global[e];return!!o&&(o.apply(F.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,o){return{promise:e,child:o}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,o){return{reason:e,promise:o}},rejectionHandled:r},et=function(t){var e=!1;try{e=Z.apply(null,arguments)}catch(t){M.throwLater(t),e=!0}var o=!1;try{o=J(t,tt[t].apply(null,arguments))}catch(t){M.throwLater(t),o=!0}return o||e};o.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?o.longStackTraces():!t.longStackTraces&&o.hasLongStackTraces()&&Q()),"warnings"in t){var e=t.warnings;st.warnings=!!e,$=st.warnings,F.isObject(e)&&"wForgottenReturn"in e&&($=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!st.cancellation){if(M.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");o.prototype._clearCancellationData=u,o.prototype._propagateFrom=g,o.prototype._onCancel=l,o.prototype._setOnCancel=c,o.prototype._attachCancellationCallback=a,o.prototype._execute=s,ot=g,st.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!st.monitoring?(st.monitoring=!0,o.prototype._fireEvent=et):!t.monitoring&&st.monitoring&&(st.monitoring=!1,o.prototype._fireEvent=i)),o},o.prototype._fireEvent=i,o.prototype._execute=function(t,e,o){try{t(e,o)}catch(t){return t}},o.prototype._onCancel=function(){},o.prototype._setOnCancel=function(t){},o.prototype._attachCancellationCallback=function(t){},o.prototype._captureStackTrace=function(){},o.prototype._attachExtraTrace=function(){},o.prototype._clearCancellationData=function(){},o.prototype._propagateFrom=function(t,e){};var ot=h,nt=function(){return!1},rt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;F.inherits(L,Error),n.CapturedTrace=L,L.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],o={},n=0,r=this;void 0!==r;++n)e.push(r),r=r._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var i=e[n].stack;void 0===o[i]&&(o[i]=n)}for(var n=0;t>n;++n){var s=e[n].stack,a=o[s];if(void 0!==a&&a!==n){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var l=n>0?e[n-1]:this;t-1>a?(l._parent=e[a+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var c=l._length+1,u=n-2;u>=0;--u)e[u]._length=c,c++;return}}}},L.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=T(t),o=e.message,n=[e.stack],r=this;void 0!==r;)n.push(S(r.stack.split("\n"))),r=r._parent;E(n),b(n),F.notEnumerableProp(t,"stack",_(o,n)),F.notEnumerableProp(t,"__stackCleaned__",!0)}};var it=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():w(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,W=t,z=e;var o=Error.captureStackTrace;return nt=function(t){return U.test(t)},function(t,e){Error.stackTraceLimit+=6,o(t,e),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return W=/@/,z=e,q=!0,function(t){t.stack=(new Error).stack};var r;try{throw new Error}catch(t){r="stack"in t}return"stack"in n||!r||"number"!=typeof Error.stackTraceLimit?(z=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?w(e):e.toString()},null):(W=t,z=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(O=function(t){console.warn(t)},F.isNode&&e.stderr.isTTY?O=function(t,e){var o=e?"[33m":"[31m";console.warn(o+t+"[0m\n")}:F.isNode||"string"!=typeof(new Error).stack||(O=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var st={warnings:K,longStackTraces:!1,cancellation:!1,monitoring:!1};return Y&&o.longStackTraces(),{longStackTraces:function(){return st.longStackTraces},warnings:function(){return st.warnings},cancellation:function(){return st.cancellation},monitoring:function(){return st.monitoring},propagateFromFunction:function(){return ot},boundValueFunction:function(){return p},checkForgottenReturns:m,setBounds:N,warn:v,deprecated:y,CapturedTrace:L,fireDomEvent:J,fireGlobalEvent:Z}}},{"./errors":12,"./util":36}],10:[function(t,e,o){"use strict";e.exports=function(t){function e(){return this.value}function o(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(o){return o instanceof t&&o.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:o},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(o,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,o,void 0,{reason:t},void 0);var e=arguments[1],n=function(){throw e};return this.caught(t,n)},t.prototype.catchReturn=function(o){if(arguments.length<=1)return o instanceof t&&o.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:o},void 0);var n=arguments[1];n instanceof t&&n.suppressUnhandledRejections();var r=function(){return n};return this.caught(o,r)}}},{}],11:[function(t,e,o){"use strict";e.exports=function(t,e){function o(){return i(this)}function n(t,o){return r(t,o,e,e)}var r=t.reduce,i=t.all;t.prototype.each=function(t){return r(this,t,e,0)._then(o,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return r(this,t,e,e)},t.each=function(t,n){return r(t,n,e,0)._then(o,void 0,void 0,t,void 0)},t.mapSeries=n}},{}],12:[function(t,e,o){"use strict";function n(t,e){function o(n){return this instanceof o?(g(this,"message","string"==typeof n?n:e),g(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(n)}return u(o,Error),o}function r(t){return this instanceof r?(g(this,"name","OperationalError"),g(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(g(this,"message",t.message),g(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(t)}var i,s,a=t("./es5"),l=a.freeze,c=t("./util"),u=c.inherits,g=c.notEnumerableProp,h=n("Warning","warning"),p=n("CancellationError","cancellation error"),d=n("TimeoutError","timeout error"),f=n("AggregateError","aggregate error");try{i=TypeError,s=RangeError}catch(t){i=n("TypeError","type error"),s=n("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<m.length;++y)"function"==typeof Array.prototype[m[y]]&&(f.prototype[m[y]]=Array.prototype[m[y]]);a.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var v=0;f.prototype.toString=function(){var t=Array(4*v+1).join(" "),e="\n"+t+"AggregateError of:\n";v++,t=Array(4*v+1).join(" ");for(var o=0;o<this.length;++o){for(var n=this[o]===this?"[Circular AggregateError]":this[o]+"",r=n.split("\n"),i=0;i<r.length;++i)r[i]=t+r[i];n=r.join("\n"),e+=n+"\n"}return v--,e},u(r,Error);var _=Error.__BluebirdErrorTypes__;_||(_=l({CancellationError:p,TimeoutError:d,OperationalError:r,RejectionError:r,AggregateError:f}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:i,RangeError:s,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,o){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var o=Object.getOwnPropertyDescriptor(t,e);return!(o&&!o.writable&&!o.set)}};else{var r={}.hasOwnProperty,i={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var o in t)r.call(t,o)&&e.push(o);return e},l=function(t,e){return{value:t[e]}},c=function(t,e,o){return t[e]=o.value,t},u=function(t){return t},g=function(t){try{return Object(t).constructor.prototype}catch(t){return s}},h=function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:c,getDescriptor:l,freeze:u,getPrototypeOf:g,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,o){"use strict";e.exports=function(t,e){var o=t.map;t.prototype.filter=function(t,n){return o(this,t,n,e)},t.filter=function(t,n,r){return o(t,n,r,e)}}},{}],15:[function(t,e,o){"use strict";e.exports=function(e,o,n){function r(t,e,o){this.promise=t,this.type=e,this.handler=o,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function s(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return c.call(this,this.promise._target()._settledValue())}function l(t){return s(this,t)?void 0:(h.e=t,h)}function c(t){var r=this.promise,c=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?c.call(r._boundValue()):c.call(r._boundValue(),t);if(u===n)return u;if(void 0!==u){r._setReturnedNonUndefined();var p=o(u,r);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new g("late cancellation observer");return r._attachExtraTrace(d),h.e=d,h}p.isPending()&&p._attachCancellationCallback(new i(this))}return p._then(a,l,void 0,this,void 0)}}}return r.isRejected()?(s(this),h.e=t,h):(s(this),t)}var u=t("./util"),g=e.CancellationError,h=u.errorObj,p=t("./catch_filter")(n);return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){s(this.finallyHandler)},e.prototype._passThrough=function(t,e,o,n){return"function"!=typeof t?this.then():this._then(o,n,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,c,c)},e.prototype.tap=function(t){return this._passThrough(t,1,c)},e.prototype.tapCatch=function(t){var o=arguments.length;if(1===o)return this._passThrough(t,1,void 0,c);var n,r=new Array(o-1),i=0;for(n=0;o-1>n;++n){var s=arguments[n];if(!u.isObject(s))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(s)));r[i++]=s}r.length=i;var a=arguments[n];return this._passThrough(p(r,a,this),1,void 0,c)},r}},{"./catch_filter":7,"./util":36}],16:[function(t,e,o){"use strict";e.exports=function(e,o,n,r,i,s){function a(t,o,n){for(var i=0;i<o.length;++i){n._pushContext();var s=p(o[i])(t);if(n._popContext(),s===h){n._pushContext();var a=e.reject(h.e);return n._popContext(),a}var l=r(s,n);if(l instanceof e)return l}return null}function l(t,o,r,i){if(s.cancellation()){var a=new e(n),l=this._finallyPromise=new e(n);this._promise=a.lastly(function(){return l}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new e(n))._captureStackTrace()}this._stack=i,this._generatorFunction=t,this._receiver=o,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var c=t("./errors"),u=c.TypeError,g=t("./util"),h=g.errorObj,p=g.tryCatch,d=[];g.inherits(l,i),l.prototype._isResolved=function(){return null===this._promise},l.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},l.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var o=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=o,this._promise._attachExtraTrace(o),this._promise._pushContext(),t=p(this._generator.throw).call(this._generator,o),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},l.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},l.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},l.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},l.prototype._continue=function(t){var o=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?o.cancel():o._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?o.cancel():o._resolveCallback(n);var i=r(n,this._promise);if(!(i instanceof e)&&null===(i=a(i,this._yieldHandlers,this._promise)))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));i=i._target();var s=i._bitField;0==(50397184&s)?(this._yieldedPromise=i,i._proxy(this,null)):0!=(33554432&s)?e._async.invoke(this._promiseFulfilled,this,i._value()):0!=(16777216&s)?e._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var o=Object(e).yieldHandler,n=l,r=(new Error).stack;return function(){var e=t.apply(this,arguments),i=new n(void 0,void 0,o,r),s=i.promise();return i._generator=e,i._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("expecting a function but got "+g.classString(t));d.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return o("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new l(t,this),r=n.promise();return n._run(e.spawn),r}}},{"./errors":12,"./util":36}],17:[function(t,e,o){"use strict";e.exports=function(e,o,n,r,i,s){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj,e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}var r=[].slice.call(arguments);t&&r.pop();var n=new o(r).promise();return void 0!==t?n.spread(t):n}}},{"./util":36}],18:[function(t,e,o){"use strict";e.exports=function(e,o,n,r,i,s){function a(t,e,o,n){this.constructor$(t),this._promise._captureStackTrace();var r=c();this._callback=null===r?e:u.domainBind(r,e),this._preservedValues=n===i?new Array(this.length()):null,this._limit=o,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function l(t,o,r,i){if("function"!=typeof o)return n("expecting a function but got "+u.classString(o));var s=0;if(void 0!==r){if("object"!=typeof r||null===r)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(r)));if("number"!=typeof r.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(r.concurrency)));s=r.concurrency}return s="number"==typeof s&&isFinite(s)&&s>=1?s:0,new a(t,o,s,i).promise()}var c=e._getDomain,u=t("./util"),g=u.tryCatch,h=u.errorObj,p=e._async;u.inherits(a,o),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,o){var n=this._values,i=this.length(),a=this._preservedValues,l=this._limit;if(0>o){if(o=-1*o-1,n[o]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return n[o]=t,this._queue.push(o),!1;null!==a&&(a[o]=t);var c=this._promise,u=this._callback,p=c._boundValue();c._pushContext();var d=g(u).call(p,t,o,i),f=c._popContext();if(s.checkForgottenReturns(d,f,null!==a?"Promise.filter":"Promise.map",c),d===h)return this._reject(d.e),!0;var m=r(d,this._promise);if(m instanceof e){m=m._target();var y=m._bitField;if(0==(50397184&y))return l>=1&&this._inFlight++,n[o]=m,m._proxy(this,-1*(o+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(m._reason()),!0):(this._cancel(),!0);d=m._value()}n[o]=d}return++this._totalResolved>=i&&(null!==a?this._filter(n,a):this._resolve(n),!0)},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,o=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(o[n],n)}},a.prototype._filter=function(t,e){for(var o=e.length,n=new Array(o),r=0,i=0;o>i;++i)t[i]&&(n[r++]=e[i]);n.length=r,this._resolve(n)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return l(this,t,e,null)},e.map=function(t,e,o,n){return l(t,e,o,n)}}},{"./util":36}],19:[function(t,e,o){"use strict";e.exports=function(e,o,n,r,i){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var n=new e(o);n._captureStackTrace(),n._pushContext();var r=a(t).apply(this,arguments),s=n._popContext();return i.checkForgottenReturns(r,s,"Promise.method",n),n._resolveFromSyncValue(r),n}},e.attempt=e.try=function(t){if("function"!=typeof t)return r("expecting a function but got "+s.classString(t));var n=new e(o);n._captureStackTrace(),n._pushContext();var l;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];l=s.isArray(c)?a(t).apply(u,c):a(t).call(u,c)}else l=a(t)();var g=n._popContext();return i.checkForgottenReturns(l,g,"Promise.try",n),n._resolveFromSyncValue(l),n},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,o){"use strict";function n(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}function r(t){var e;if(n(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var o=u.keys(t),r=0;r<o.length;++r){var i=o[r];g.test(i)||(e[i]=t[i])}return e}return s.markAsOriginatingFromRejection(t),t}function i(t,e){return function(o,n){if(null!==t){if(o){var i=r(a(o));t._attachExtraTrace(i),t._reject(i)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(n);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,l=t("./errors"),c=l.OperationalError,u=t("./es5"),g=/^(?:name|message|stack|cause)$/;e.exports=i},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,o){"use strict";e.exports=function(e){function o(t,e){var o=this;if(!i.isArray(t))return n.call(o,t,e);var r=a(e).apply(o._boundValue(),[null].concat(t));r===l&&s.throwLater(r.e)}function n(t,e){var o=this,n=o._boundValue(),r=void 0===t?a(e).call(n,null):a(e).call(n,null,t);r===l&&s.throwLater(r.e)}function r(t,e){var o=this;if(!t){var n=new Error(t+"");n.cause=t,t=n}var r=a(e).call(o._boundValue(),t);r===l&&s.throwLater(r.e)}var i=t("./util"),s=e._async,a=i.tryCatch,l=i.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var i=n;void 0!==e&&Object(e).spread&&(i=o),this._then(i,r,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,o,n){"use strict";o.exports=function(){function n(){}function r(t,e){if(null==t||t.constructor!==i)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new _("expecting a function but got "+d.classString(e))}function i(t){t!==E&&r(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function s(t){this.promise._resolveCallback(t)}function a(t){this.promise._rejectCallback(t,!1)}function l(t){var e=new i(E);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,u=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},g=function(){return new i.PromiseInspection(this._target())},h=function(t){return i.reject(new _(t))},p={},d=t("./util");c=d.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},d.notEnumerableProp(i,"_getDomain",c);var f=t("./es5"),m=t("./async"),y=new m;f.defineProperty(i,"_async",{value:y});var v=t("./errors"),_=i.TypeError=v.TypeError;i.RangeError=v.RangeError;var b=i.CancellationError=v.CancellationError;i.TimeoutError=v.TimeoutError,i.OperationalError=v.OperationalError,i.RejectionError=v.OperationalError,i.AggregateError=v.AggregateError;var E=function(){},S={},k={},T=t("./thenables")(i,E),C=t("./promise_array")(i,E,T,h,n),x=t("./context")(i),w=x.create,B=t("./debuggability")(i,x),I=(B.CapturedTrace,t("./finally")(i,T,k)),A=t("./catch_filter")(k),N=t("./nodeback"),L=d.errorObj,R=d.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype.catch=function(t){var e=arguments.length;if(e>1){var o,n=new Array(e-1),r=0;for(o=0;e-1>o;++o){var i=arguments[o];if(!d.isObject(i))return h("Catch statement predicate: expecting an object but got "+d.classString(i));n[r++]=i}return n.length=r,t=arguments[o],this.then(void 0,A(n,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(g,g,void 0,this,void 0)},i.prototype.then=function(t,e){if(B.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var o=".then() only accepts functions but was passed: "+d.classString(t);arguments.length>1&&(o+=", "+d.classString(e)),this._warn(o)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?h("expecting a function but got "+d.classString(t)):this.all()._then(t,void 0,void 0,S,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},i.prototype.error=function(t){return this.caught(d.originatesFromRejection,t)},i.getNewLibraryCopy=o.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(E);e._captureStackTrace();var o=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=R(t)(N(e,o));return n===L&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new C(t).promise()},i.cast=function(t){var e=T(t);return e instanceof i||(e=new i(E),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(E);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new _("expecting a function but got "+d.classString(t));return y.setScheduler(t)},i.prototype._then=function(t,e,o,n,r){var s=void 0!==r,a=s?r:new i(E),l=this._target(),u=l._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var g=c();if(0!=(50397184&u)){var h,p,f=l._settlePromiseCtx;0!=(33554432&u)?(p=l._rejectionHandler0,h=t):0!=(16777216&u)?(p=l._fulfillmentHandler0,h=e,l._unsetRejectionIsUnhandled()):(f=l._settlePromiseLateCancellationObserver,p=new b("late cancellation observer"),l._attachExtraTrace(p),h=e),y.invoke(f,l,{handler:null===g?h:"function"==typeof h&&d.domainBind(g,h),promise:a,receiver:n,value:p})}else l._addCallbacks(t,e,a,n,g);return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){y.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===p?void 0:void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),o=t._rejectionHandler0,n=t._promise0,r=t._receiverAt(0);void 0===r&&(r=p),this._addCallbacks(e,o,n,r,null)},i.prototype._migrateCallbackAt=function(t,e){var o=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),r=t._promiseAt(e),i=t._receiverAt(e);void 0===i&&(i=p),this._addCallbacks(o,n,r,i,null)},i.prototype._addCallbacks=function(t,e,o,n,r){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=o,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=null===r?t:d.domainBind(r,t)),"function"==typeof e&&(this._rejectionHandler0=null===r?e:d.domainBind(r,e));else{var s=4*i-4;this[s+2]=o,this[s+3]=n,"function"==typeof t&&(this[s+0]=null===r?t:d.domainBind(r,t)),"function"==typeof e&&(this[s+1]=null===r?e:d.domainBind(r,e))}return this._setLength(i+1),i},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(u(),!1);var o=T(t,this);if(!(o instanceof i))return this._fulfill(t);e&&this._propagateFrom(o,2);var n=o._target();if(n===this)return void this._reject(u());var r=n._bitField;if(0==(50397184&r)){var s=this._length();s>0&&n._migrateCallback0(this);for(var a=1;s>a;++a)n._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&r))this._fulfill(n._value());else if(0!=(16777216&r))this._reject(n._reason());else{var l=new b("late cancellation observer");n._attachExtraTrace(l),this._reject(l)}}},i.prototype._rejectCallback=function(t,e,o){var n=d.ensureErrorObject(t),r=n===t;if(!r&&!o&&B.warnings()){var i="a promise was rejected with a non-error: "+d.classString(t);this._warn(i,!0)}this._attachExtraTrace(n,!!e&&r),this._reject(t)},i.prototype._resolveFromExecutor=function(t){if(t!==E){var e=this;this._captureStackTrace(),this._pushContext();var o=!0,n=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,o)});o=!1,this._popContext(),void 0!==n&&e._rejectCallback(n,!0)}},i.prototype._settlePromiseFromHandler=function(t,e,o,n){var r=n._bitField;if(0==(65536&r)){n._pushContext();var i;e===S?o&&"number"==typeof o.length?i=R(t).apply(this._boundValue(),o):(i=L,i.e=new _("cannot .spread() a non-array: "+d.classString(o))):i=R(t).call(e,o);var s=n._popContext();0==(65536&(r=n._bitField))&&(i===k?n._reject(o):i===L?n._rejectCallback(i.e,!1):(B.checkForgottenReturns(i,s,"",n,this),n._resolveCallback(i)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,o,r){var s=t instanceof i,a=this._bitField,l=0!=(134217728&a);0!=(65536&a)?(s&&t._invokeInternalOnCancel(),o instanceof I&&o.isFinallyHandler()?(o.cancelPromise=t,R(e).call(o,r)===L&&t._reject(L.e)):e===g?t._fulfill(g.call(o)):o instanceof n?o._promiseCancelled(t):s||t instanceof C?t._cancel():o.cancel()):"function"==typeof e?s?(l&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,o,r,t)):e.call(o,r,t):o instanceof n?o._isResolved()||(0!=(33554432&a)?o._promiseFulfilled(r,t):o._promiseRejected(r,t)):s&&(l&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(r):t._reject(r))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,o=t.promise,n=t.receiver,r=t.value;"function"==typeof e?o instanceof i?this._settlePromiseFromHandler(e,n,r,o):e.call(n,r,o):o instanceof i&&o._reject(r)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,o){var n=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,t,r,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var o=u();return this._attachExtraTrace(o),this._reject(o)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():y.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?y.fatalError(t,d.isNode):void((65535&e)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var o=1;t>o;o++){var n=this._fulfillmentHandlerAt(o),r=this._promiseAt(o),i=this._receiverAt(o);this._clearCallbackDataAtIndex(o),this._settlePromise(r,n,i,e)}},i.prototype._rejectPromises=function(t,e){for(var o=1;t>o;o++){var n=this._rejectionHandlerAt(o),r=this._promiseAt(o),i=this._receiverAt(o);this._clearCallbackDataAtIndex(o),this._settlePromise(r,n,i,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var o=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,o,t),this._rejectPromises(e,o)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){return B.deprecated("Promise.defer","new Promise"),{promise:new i(E),resolve:s,reject:a}},d.notEnumerableProp(i,"_makeSelfResolutionError",u),t("./method")(i,E,T,h,B),t("./bind")(i,E,T,B),t("./cancel")(i,C,h,B),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,C,T,E,y,c),i.Promise=i,i.version="3.5.0",t("./map.js")(i,C,h,T,E,B),t("./call_get.js")(i),t("./using.js")(i,h,T,w,E,B),t("./timers.js")(i,E,B),t("./generators.js")(i,h,E,T,n,B),t("./nodeify.js")(i),t("./promisify.js")(i,E),t("./props.js")(i,C,T,h),t("./race.js")(i,E,T,h),t("./reduce.js")(i,C,h,T,E,B),t("./settle.js")(i,C,B),t("./some.js")(i,C,h),t("./filter.js")(i,E),t("./each.js")(i,E),t("./any.js")(i),d.toFastProperties(i),d.toFastProperties(i.prototype),l({a:1}),l({b:2}),l({c:3}),l(1),l(function(){}),l(void 0),l(!1),l(new i(E)),B.setBounds(m.firstLineError,d.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,o){"use strict";e.exports=function(e,o,n,r,i){function s(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function a(t){var n=this._promise=new e(o);t instanceof e&&n._propagateFrom(t,3),n._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=t("./util");return l.isArray,l.inherits(a,i),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(o,i){var a=n(this._values,this._promise);if(a instanceof e){a=a._target();var c=a._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,i);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null===(a=l.asArray(a))){var u=r("expecting an array or an iterable object but got "+l.classString(a)).reason();return void this._promise._rejectCallback(u,!1)}return 0===a.length?void(-5===i?this._resolveEmptyArray():this._resolve(s(i))):void this._iterate(a)},a.prototype._iterate=function(t){var o=this.getActualLength(t.length);this._length=o,this._values=this.shouldCopyValues()?new Array(o):this._values;for(var r=this._promise,i=!1,s=null,a=0;o>a;++a){var l=n(t[a],r);l instanceof e?(l=l._target(),s=l._bitField):s=null,i?null!==s&&l.suppressUnhandledRejections():null!==s?0==(50397184&s)?(l._proxy(this,a),this._values[a]=l):i=0!=(33554432&s)?this._promiseFulfilled(l._value(),a):0!=(16777216&s)?this._promiseRejected(l._reason(),a):this._promiseCancelled(a):i=this._promiseFulfilled(l,a)}i||r._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var o=0;o<t.length;++o)t[o]instanceof e&&t[o].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,o){"use strict";e.exports=function(e,o){function n(t){return!b.test(t)}function r(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function i(t,e,o){var n=h.getDataPropertyOrDefault(t,e+o,v);return!!n&&r(n)}function s(t,e,o){for(var n=0;n<t.length;n+=2){var r=t[n];if(o.test(r))for(var i=r.replace(o,""),s=0;s<t.length;s+=2)if(t[s]===i)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,o,n){for(var a=h.inheritedDataKeys(t),l=[],c=0;c<a.length;++c){var u=a[c],g=t[u],p=n===E||E(u,g,t);"function"!=typeof g||r(g)||i(t,u,e)||!n(u,g,t,p)||l.push(u,g)}return s(l,e,o),l}function l(t,n,r,i,s,a){function l(){var r=n;n===g&&(r=this);var i=new e(o);i._captureStackTrace();var s="string"==typeof u&&this!==c?this[u]:t,l=p(i,a);try{s.apply(r,d(arguments,l))}catch(t){i._rejectCallback(f(t),!0,!0)}return i._isFateSealed()||i._setAsyncGuaranteed(),i}var c=function(){return this}(),u=t;return"string"==typeof u&&(t=i),h.notEnumerableProp(l,"__isPromisified__",!0),l}function c(t,e,o,n,r){for(var i=new RegExp(S(e)+"$"),s=a(t,e,i,o),l=0,c=s.length;c>l;l+=2){var u=s[l],p=s[l+1],d=u+e;if(n===k)t[d]=k(u,g,u,p,e,r);else{var f=n(p,function(){return k(u,g,u,p,e,r)});h.notEnumerableProp(f,"__isPromisified__",!0),t[d]=f}}return h.toFastProperties(t),t}function u(t,e,o){return k(t,e,void 0,t,null,o)}var g={},h=t("./util"),p=t("./nodeback"),d=h.withAppended,f=h.maybeWrapAsError,m=h.canEvaluate,y=t("./errors").TypeError,v={__isPromisified__:!0},_=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],b=new RegExp("^(?:"+_.join("|")+")$"),E=function(t){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},S=function(t){return t.replace(/([$])/,"\\$")},k=m?void 0:l;e.promisify=function(t,e){if("function"!=typeof t)throw new y("expecting a function but got "+h.classString(t));if(r(t))return t;e=Object(e);var o=void 0===e.context?g:e.context,i=!!e.multiArgs,s=u(t,o,i);return h.copyDescriptors(t,s,n),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var o=!!e.multiArgs,n=e.suffix;"string"!=typeof n&&(n="Async");var r=e.filter;"function"!=typeof r&&(r=E);var i=e.promisifier;if("function"!=typeof i&&(i=k),!h.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=h.inheritedDataKeys(t),a=0;a<s.length;++a){var l=t[s[a]];"constructor"!==s[a]&&h.isClass(l)&&(c(l.prototype,n,r,i,o),c(l,n,r,i,o))}return c(t,n,r,i,o)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,o){"use strict";e.exports=function(e,o,n,r){function i(t){var e,o=!1;if(void 0!==a&&t instanceof a)e=g(t),o=!0;else{var n=u.keys(t),r=n.length;e=new Array(2*r);for(var i=0;r>i;++i){var s=n[i];e[i]=t[s],e[i+r]=s}}this.constructor$(e),this._isMap=o,this._init$(void 0,o?-6:-3)}function s(t){var o,s=n(t);return c(s)?(o=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new i(s).promise(),s instanceof e&&o._propagateFrom(s,2),o):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,l=t("./util"),c=l.isObject,u=t("./es5");"function"==typeof Map&&(a=Map);var g=function(){function t(t,n){this[e]=t,this[e+o]=n,e++}var e=0,o=0;return function(n){o=n.size,e=0;var r=new Array(2*n.size);return n.forEach(t,r),r}}(),h=function(t){for(var e=new a,o=t.length/2|0,n=0;o>n;++n){var r=t[o+n],i=t[n];e.set(r,i)}return e};l.inherits(i,o),i.prototype._init=function(){},i.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var o;if(this._isMap)o=h(this._values);else{o={};for(var n=this.length(),r=0,i=this.length();i>r;++r)o[this._values[r+n]]=this._values[r]}return this._resolve(o),!0}return!1},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,o){"use strict";function n(t,e,o,n,r){for(var i=0;r>i;++i)o[i+n]=t[i+e],t[i+e]=void 0}function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,o){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(o);var r=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[r+0&i]=t,this[r+1&i]=e,this[r+2&i]=o,this._length=n},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,n(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,o){"use strict";e.exports=function(e,o,n,r){function i(t,i){var l=n(t);if(l instanceof e)return a(l);if(null===(t=s.asArray(t)))return r("expecting an array or an iterable object but got "+s.classString(t));var c=new e(o);void 0!==i&&c._propagateFrom(i,3);for(var u=c._fulfill,g=c._reject,h=0,p=t.length;p>h;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(u,g,void 0,c,null)}return c}var s=t("./util"),a=function(t){return t.then(function(e){return i(e,t)})};e.race=function(t){return i(t,void 0)},e.prototype.race=function(){return i(this,void 0)}}},{"./util":36}],28:[function(t,e,o){"use strict";e.exports=function(e,o,n,r,i,s){function a(t,o,n,r){this.constructor$(t);var s=h();this._fn=null===s?o:p.domainBind(s,o),void 0!==n&&(n=e.resolve(n),n._attachCancellationCallback(this)),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===i?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,o,r){return"function"!=typeof e?n("expecting a function but got "+p.classString(e)):new a(t,e,o,r).promise()}function u(t){this.accum=t,this.array._gotAccum(t);var o=r(this.value,this.array._promise);return o instanceof e?(this.array._currentCancellable=o,o._then(g,void 0,void 0,this,void 0)):g.call(this,o)}function g(t){var o=this.array,n=o._promise,r=d(o._fn);n._pushContext();var i;(i=void 0!==o._eachValues?r.call(n._boundValue(),t,this.index,this.length):r.call(n._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(o._currentCancellable=i);var a=n._popContext();return s.checkForgottenReturns(i,a,void 0!==o._eachValues?"Promise.each":"Promise.reduce",n),i}var h=e._getDomain,p=t("./util"),d=p.tryCatch;p.inherits(a,o),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==i&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var o,n,r=t.length;if(void 0!==this._initialValue?(o=this._initialValue,n=0):(o=e.resolve(t[0]),n=1),this._currentCancellable=o,!o.isRejected())for(;r>n;++n){var i={accum:null,value:t[n],index:n,length:r,array:this};o=o._then(u,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(o=o._then(this._eachComplete,void 0,void 0,this,void 0)),o._then(l,l,void 0,o,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,o,n){return c(t,e,o,n)}}},{"./util":36}],29:[function(t,o,i){"use strict";var s,a=t("./util"),l=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var u=n.setImmediate,g=e.nextTick;s=a.isRecentNode?function(t){u.call(n,t)}:function(t){g.call(e,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var h=c.resolve();s=function(t){h.then(t)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:l:function(){var t=document.createElement("div"),e={attributes:!0},o=!1,n=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),o=!1}).observe(n,e);var r=function(){o||(o=!0,n.classList.toggle("foo"))};return function(o){var n=new MutationObserver(function(){n.disconnect(),o()});n.observe(t,e),r()}}();o.exports=s},{"./util":36}],30:[function(t,e,o){"use strict";e.exports=function(e,o,n){function r(t){this.constructor$(t)}var i=e.PromiseInspection;t("./util").inherits(r,o),r.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},r.prototype._promiseFulfilled=function(t,e){var o=new i;return o._bitField=33554432,o._settledValueField=t,this._promiseResolved(e,o)},r.prototype._promiseRejected=function(t,e){var o=new i;return o._bitField=16777216,o._settledValueField=t,this._promiseResolved(e,o)},e.settle=function(t){return n.deprecated(".settle()",".reflect()"),new r(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,o){"use strict";e.exports=function(e,o,n){function r(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function i(t,e){if((0|e)!==e||0>e)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var o=new r(t),i=o.promise();return o.setHowMany(e),o.init(),i}var s=t("./util"),a=t("./errors").RangeError,l=t("./errors").AggregateError,c=s.isArray,u={};s.inherits(r,o),r.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},r.prototype.init=function(){this._initialized=!0,this._init()},r.prototype.setUnwrap=function(){this._unwrap=!0},r.prototype.howMany=function(){return this._howMany},r.prototype.setHowMany=function(t){this._howMany=t},r.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},r.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},r.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},r.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new l,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},r.prototype._fulfilled=function(){return this._totalResolved},r.prototype._rejected=function(){return this._values.length-this.length()},r.prototype._addRejected=function(t){this._values.push(t)},r.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},r.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},r.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},r.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return i(t,e)},e.prototype.some=function(t){return i(this,t)},e._SomePromiseArray=r}},{"./errors":12,"./util":36}],32:[function(t,e,o){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var o=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return i.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return o.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,o){"use strict";e.exports=function(e,o){function n(t,n){if(u(t)){if(t instanceof e)return t;var r=i(t);if(r===c){n&&n._pushContext();var l=e.reject(r.e);return n&&n._popContext(),l}if("function"==typeof r){if(s(t)){var l=new e(o);return t._then(l._fulfill,l._reject,void 0,l,null),l}return a(t,r,n)}}return t}function r(t){return t.then}function i(t){try{return r(t)}catch(t){return c.e=t,c}}function s(t){try{return g.call(t,"_promise0")}catch(t){return!1}}function a(t,n,r){function i(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,g,!0),a=null)}var a=new e(o),u=a;r&&r._pushContext(),a._captureStackTrace(),r&&r._popContext();var g=!0,h=l.tryCatch(n).call(t,i,s);return g=!1,a&&h===c&&(a._rejectCallback(h.e,!0,!0),a=null),u}var l=t("./util"),c=l.errorObj,u=l.isObject,g={}.hasOwnProperty;return n}},{"./util":36}],34:[function(t,e,o){"use strict";e.exports=function(e,o,n){function r(t){this.handle=t}function i(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),l=e.TimeoutError;r.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,i){var s,a;return void 0!==i?(s=e.resolve(i)._then(c,null,null,t,void 0),n.cancellation()&&i instanceof e&&s._setOnCancel(i)):(s=new e(o),a=setTimeout(function(){s._fulfill()},+t),n.cancellation()&&s._setOnCancel(new r(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return u(t,this)};var g=function(t,e,o){var n;n="string"!=typeof e?e instanceof Error?e:new l("operation timed out"):new l(e),a.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=o&&o.cancel()};e.prototype.timeout=function(t,e){t=+t;var o,a,l=new r(setTimeout(function(){o.isPending()&&g(o,e,a)},t));return n.cancellation()?(a=this.then(),o=a._then(i,s,void 0,l,void 0),o._setOnCancel(l)):o=this._then(i,s,void 0,l,void 0),o}}},{"./util":36}],35:[function(t,e,o){"use strict";e.exports=function(e,o,n,r,i,s){function a(t){setTimeout(function(){throw t},0)}function l(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,o){function r(){if(s>=c)return u._fulfill();var i=l(t[s++]);if(i instanceof e&&i._isDisposable()){try{i=n(i._getDisposer().tryDispose(o),t.promise)}catch(t){return a(t)}if(i instanceof e)return i._then(r,a,null,null,null)}r()}var s=0,c=t.length,u=new e(i);return r(),u}function u(t,e,o){this._data=t,this._promise=e,this._context=o}function g(t,e,o){this.constructor$(t,e,o)}function h(t){return u.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),f=t("./errors").TypeError,m=t("./util").inherits,y=d.errorObj,v=d.tryCatch,_={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():_},u.prototype.tryDispose=function(t){var e=this.resource(),o=this._context;void 0!==o&&o._pushContext();var n=e!==_?this.doDispose(e,t):null;return void 0!==o&&o._popContext(),this._promise._unsetDisposable(),this._data=null,n},u.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},m(g,u),g.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,o=0;t>o;++o){var n=this[o];n instanceof e&&n.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return o("you must pass at least 2 arguments to Promise.using");var r=arguments[t-1];if("function"!=typeof r)return o("expecting a function but got "+d.classString(r));var i,a=!0;2===t&&Array.isArray(arguments[0])?(i=arguments[0],t=i.length,a=!1):(i=arguments,t--);for(var l=new p(t),g=0;t>g;++g){var f=i[g];if(u.isDisposer(f)){var m=f;f=f.promise(),f._setDisposable(m)}else{var _=n(f);_ instanceof e&&(f=_._then(h,null,null,{resources:l,index:g},void 0))}l[g]=f}for(var b=new Array(l.length),g=0;g<b.length;++g)b[g]=e.resolve(l[g]).reflect();var E=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var o=t[e];if(o.isRejected())return y.e=o.error(),y;if(!o.isFulfilled())return void E.cancel();t[e]=o.value()}S._pushContext(),r=v(r);var n=a?r.apply(void 0,t):r(t),i=S._popContext();return s.checkForgottenReturns(n,i,"Promise.using",S),n}),S=E.lastly(function(){var t=new e.PromiseInspection(E);return c(l,t)});return l.promise=S,S._setOnCancel(l),S},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new g(t,this,r());throw new f}}},{"./errors":12,"./util":36}],36:[function(t,o,r){"use strict";function i(){try{var t=B;return B=null,t.apply(this,arguments)}catch(t){return N.e=t,N}}function s(t){return B=t,i}function a(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function l(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return a(t)?new Error(v(t)):t}function u(t,e){var o,n=t.length,r=new Array(n+1);for(o=0;n>o;++o)r[o]=t[o];return r[o]=e,r}function g(t,e,o){if(!I.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:o:void 0}function h(t,e,o){if(a(t))return t;var n={value:o,configurable:!0,enumerable:!1,writable:!0};return I.defineProperty(t,e,n),t}function p(t){throw t}function d(t){try{if("function"==typeof t){var e=I.names(t.prototype),o=I.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),r=O.test(t+"")&&I.names(t).length>0;if(o||n||r)return!0}return!1}catch(t){return!1}}function f(t){function e(){}e.prototype=t;for(var o=8;o--;)new e;return t}function m(t){return j.test(t)}function y(t,e,o){for(var n=new Array(t),r=0;t>r;++r)n[r]=e+r+o;return n}function v(t){try{return t+""}catch(t){return"[no string representation]"}}function _(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{h(t,"isOperational",!0)}catch(t){}}function E(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function S(t){return _(t)&&I.propertyIsWritable(t,"stack")}function k(t){return{}.toString.call(t)}function T(t,e,o){for(var n=I.names(t),r=0;r<n.length;++r){var i=n[r];if(o(i))try{I.defineProperty(e,i,I.getDescriptor(t,i))}catch(t){}}}function C(t){return U?e.env[t]:void 0}function x(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function w(t,e){return t.bind(e)}var B,I=t("./es5"),A="undefined"==typeof navigator,N={e:{}},L="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null,R=function(t,e){function o(){this.constructor=t,this.constructor$=e;for(var o in e.prototype)n.call(e.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=e.prototype[o])}var n={}.hasOwnProperty;return o.prototype=e.prototype,t.prototype=new o,t.prototype},D=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var o=0;o<t.length;++o)if(t[o]===e)return!0;return!1};if(I.isES5){var o=Object.getOwnPropertyNames;return function(t){for(var n=[],r=Object.create(null);null!=t&&!e(t);){var i;try{i=o(t)}catch(t){return n}for(var s=0;s<i.length;++s){var a=i[s];if(!r[a]){r[a]=!0;var l=Object.getOwnPropertyDescriptor(t,a);null!=l&&null==l.get&&null==l.set&&n.push(a)}}t=I.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(o){if(e(o))return[];var r=[];t:for(var i in o)if(n.call(o,i))r.push(i);else{for(var s=0;s<t.length;++s)if(n.call(t[s],i))continue t;r.push(i)}return r}}(),O=/this\s*\.\s*\S+\s*=/,j=/^[a-z$_][a-z$_0-9]*$/i,M=function(){return"stack"in new Error?function(t){return S(t)?t:new Error(v(t))}:function(t){if(S(t))return t;try{throw new Error(v(t))}catch(t){return t}}}(),P=function(t){return I.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,o=[],n=t[Symbol.iterator]();!(e=n.next()).done;)o.push(e.value);return o};P=function(t){return I.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?F(t):null}}var H=void 0!==e&&"[object process]"===k(e).toLowerCase(),U=void 0!==e&&void 0!==e.env,G={isClass:d,isIdentifier:m,inheritedDataKeys:D,getDataPropertyOrDefault:g,thrower:p,isArray:I.isArray,asArray:P,notEnumerableProp:h,isPrimitive:a,isObject:l,isError:_,canEvaluate:A,errorObj:N,tryCatch:s,inherits:R,withAppended:u,maybeWrapAsError:c,toFastProperties:f,filledRange:y,toString:v,canAttachTrace:S,ensureErrorObject:M,originatesFromRejection:E,markAsOriginatingFromRejection:b,classString:k,copyDescriptors:T,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,hasEnvVariables:U,env:C,global:L,getNativePromise:x,domainBind:w};G.isRecentNode=G.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),G.isNode&&G.toFastProperties(e);try{throw new Error}catch(t){G.lastLineError=t}o.exports=G},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,o(3),o(0),o(1),o(25).setImmediate)},function(module,exports,__webpack_require__){(function(jQuery){/*!
 * CanJS - 1.1.6
 * http://canjs.us/
 * Copyright (c) 2013 Bitovi
 * Sat, 06 Jul 2013 14:06:51 GMT
 * Licensed MIT
 * Includes: can/construct/construct.js,can/observe/observe.js,can/observe/compute/compute.js,can/model/model.js,can/view/view.js,can/view/ejs/ejs.js,can/control/control.js,can/route/route.js,can/control/route/route.js,can/view/mustache/mustache.js,can/util/string/string.js
 * Download from: http://bitbuilder.herokuapp.com/can.custom.js?configuration=jquery&plugins=can%2Fconstruct%2Fconstruct.js&plugins=can%2Fobserve%2Fobserve.js&plugins=can%2Fobserve%2Fcompute%2Fcompute.js&plugins=can%2Fmodel%2Fmodel.js&plugins=can%2Fview%2Fview.js&plugins=can%2Fview%2Fejs%2Fejs.js&plugins=can%2Fcontrol%2Fcontrol.js&plugins=can%2Froute%2Froute.js&plugins=can%2Fcontrol%2Froute%2Froute.js&plugins=can%2Fview%2Fmustache%2Fmustache.js&plugins=can%2Futil%2Fstring%2Fstring.js
 */
!function(undefined){var __m5=function(){var t=window.can||{};"undefined"!=typeof GLOBALCAN&&!1===GLOBALCAN||(window.can=t),t.isDeferred=function(t){var e=this.isFunction;return t&&e(t.then)&&e(t.pipe)};var e=0;return t.cid=function(t,o){return t._cid?t._cid:t._cid=(o||"")+ ++e},t.VERSION="@EDGE",t}(),__m6=function(t){return t.each=function(t,e,o){var n,r=0;if(t)if("number"==typeof t.length&&t.pop)for(t.attr&&t.attr("length"),n=t.length;r<n&&!1!==e.call(o||t[r],t[r],r,t);r++);else if(t.hasOwnProperty)for(n in t)if(t.hasOwnProperty(n)&&!1===e.call(o||t[n],t[n],n,t))break;return t},t}(__m5),__m3=function(t,e){t.extend(e,t,{trigger:function(e,o,n){e.trigger?e.trigger(o,n):t.event.trigger(o,n,e,!0)},addEvent:function(e,o){return t([this]).bind(e,o),this},removeEvent:function(e,o){return t([this]).unbind(e,o),this},buildFragment:function(e,o){var n,r=t.buildFragment;return e=[e],o=o||document,o=!o.nodeType&&o[0]||o,o=o.ownerDocument||o,n=r.call(jQuery,e,o),n.cacheable?t.clone(n.fragment):n.fragment||n},$:t,each:e.each}),t.each(["bind","unbind","undelegate","delegate"],function(o,n){e[n]=function(){var e=this[n]?this:t([this]);return e[n].apply(e,arguments),this}}),t.each(["append","filter","addClass","remove","data","get"],function(t,o){e[o]=function(t){return t[o].apply(t,e.makeArray(arguments).slice(1))}});var o=t.cleanData;return t.cleanData=function(n){t.each(n,function(t,o){o&&e.trigger(o,"destroyed",[],!1)}),o(n)},e}(jQuery,__m5),__m2=function(t){var e=/_|-/,o=/\=\=/,n=/([A-Z]+)([A-Z][a-z])/g,r=/([a-z\d])([A-Z])/g,i=/([a-z\d])([A-Z])/g,s=/\{([^\}]+)\}/g,a=/"/g,l=/'/g,c=function(t,e,o){var n=t[e];return n===undefined&&!0===o&&(n=t[e]={}),n},u=function(t){return/^f|^o/.test(typeof t)};return t.extend(t,{esc:function(t){return(""+(null===t||t===undefined||isNaN(t)&&""+t=="NaN"?"":t)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(a,"&#34;").replace(l,"&#39;")},getObject:function(e,o,n){var r,i,s,a,l=e?e.split("."):[],g=l.length,h=0;if(o=t.isArray(o)?o:[o||window],a=o.length,!g)return o[0];for(h;h<a;h++){for(r=o[h],s=undefined,i=0;i<g&&u(r);i++)s=r,r=c(s,l[i]);if(s!==undefined&&r!==undefined)break}if(!1===n&&r!==undefined&&delete s[l[i-1]],!0===n&&r===undefined)for(r=o[0],i=0;i<g&&u(r);i++)r=c(r,l[i],!0);return r},capitalize:function(t,e){return t.charAt(0).toUpperCase()+t.slice(1)},underscore:function(t){return t.replace(o,"/").replace(n,"$1_$2").replace(r,"$1_$2").replace(i,"_").toLowerCase()},sub:function(e,o,n){var r=[];return e=e||"",r.push(e.replace(s,function(e,i){var s=t.getObject(i,o,!0!==n&&undefined);return s===undefined?(r=null,""):u(s)&&r?(r.push(s),""):""+s})),null===r?r:r.length<=1?r[0]:r},replacer:s,undHash:e}),t}(__m3),__m1=function(t){var e=0;return t.Construct=function(){if(arguments.length)return t.Construct.extend.apply(t.Construct,arguments)},t.extend(t.Construct,{newInstance:function(){var t,e=this.instance();return e.setup&&(t=e.setup.apply(e,arguments)),e.init&&e.init.apply(e,t||arguments),e},_inherit:function(e,o,n){t.extend(n||e,e||{})},_overwrite:function(t,e,o,n){t[o]=n},setup:function(e,o){this.defaults=t.extend(!0,{},e.defaults,this.defaults)},instance:function(){e=1;var t=new this;return e=0,t},extend:function(o,n,r){function i(){if(!e)return this.constructor!==i&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.constructor.newInstance.apply(this.constructor,arguments)}"string"!=typeof o&&(r=n,n=o,o=null),r||(r=n,n=null),r=r||{};var s,a,l,c,u=this,g=this.prototype;c=this.instance(),t.Construct._inherit(r,g,c);for(s in u)u.hasOwnProperty(s)&&(i[s]=u[s]);if(t.Construct._inherit(n,u,i),o){var h=o.split("."),a=h.pop(),p=t.getObject(h.join("."),window,!0),l=p,d=t.underscore(o.replace(/\./g,"_")),f=t.underscore(a);p[a]=i}t.extend(i,{constructor:i,prototype:c,namespace:l,_shortName:f,fullName:o,_fullName:d}),a!==undefined&&(i.shortName=a),i.prototype.constructor=i;var m=[u].concat(t.makeArray(arguments)),y=i.setup.apply(i,m);return i.init&&i.init.apply(i,y||m),i}}),t.Construct}(__m2),__m8=function(t){return t.bindAndSetup=function(){return t.addEvent.apply(this,arguments),this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},t.unbindAndTeardown=function(e,o){return t.removeEvent.apply(this,arguments),this._bindings--,this._bindings||this._bindteardown&&this._bindteardown(),this},t}(__m3),__m7=function(t,e){var o=function(e){return e&&!t.isDeferred(e)&&(t.isArray(e)||t.isPlainObject(e)||e instanceof t.Observe)},n=function(e,o){return t.each(e,function(t){t&&t.unbind&&t.unbind("change"+o)})},r=function(e,o,r,a,l){return a=a||s,l=l||s.List,e instanceof s?r._bindings&&n([e],r._cid):e=t.isArray(e)?new l(e):new a(e),r._bindings&&i(e,o,r),e},i=function(e,o,n){e.bind("change"+n._cid,function(){var r=t.makeArray(arguments),i=r.shift();r[0]=("*"===o?[n.indexOf(e),r[0]]:[o,r[0]]).join("."),i.triggeredNS=i.triggeredNS||{},i.triggeredNS[n._cid]||(i.triggeredNS[n._cid]=!0,t.trigger(n,i,r))})};observeId=0,serialize=function(e,n,r){return e.each(function(e,i){r[i]=o(e)&&t.isFunction(e[n])?e[n]():e}),r},attrParts=function(e,o){return o?[e]:t.isArray(e)?e:(""+e).split(".")},batchNum=1,transactions=0,batchEvents=[],stopCallbacks=[],makeBindSetup=function(t){return function(){var e=this;this._each(function(o,n){o&&o.bind&&i(o,t||n,e)})}};var s=t.Map=t.Observe=t.Construct({bind:t.bindAndSetup,unbind:t.unbindAndTeardown,id:"id",canMakeObserve:o,startBatch:function(t){transactions++,t&&stopCallbacks.push(t)},stopBatch:function(e,o){if(e?transactions=0:transactions--,0==transactions){var n=batchEvents.slice(0),r=stopCallbacks.slice(0);batchEvents=[],stopCallbacks=[],batchNum++,o&&this.startBatch(),t.each(n,function(e){t.trigger.apply(t,e)}),t.each(r,function(t){t()})}},triggerBatch:function(e,o,n){if(!e._init){if(0==transactions)return t.trigger(e,o,n);o="string"==typeof o?{type:o}:o,o.batchNum=batchNum,batchEvents.push([e,o,n])}},keys:function(t){var e=[];s.__reading&&s.__reading(t,"__keys");for(var o in t._data)e.push(o);return e}},{setup:function(e){this._data={},t.cid(this,".observe"),this._init=1,this.attr(e),this.bind("change"+this._cid,t.proxy(this._changes,this)),delete this._init},_bindsetup:makeBindSetup(),_bindteardown:function(){var t=this._cid;this._each(function(e){n([e],t)})},_changes:function(t,e,o,n,r){s.triggerBatch(this,{type:e,batchNum:t.batchNum},[n,r])},_triggerChange:function(e,o,n,r){s.triggerBatch(this,"change",t.makeArray(arguments))},_each:function(t){var e=this.__get();for(var o in e)e.hasOwnProperty(o)&&t(e[o],o)},attr:function(t,e){var o=typeof t;return"string"!==o&&"number"!==o?this._attrs(t,e):1===arguments.length?(s.__reading&&s.__reading(this,t),this._get(t)):(this._set(t,e),this)},each:function(){return s.__reading&&s.__reading(this,"__keys"),t.each.apply(undefined,[this.__get()].concat(t.makeArray(arguments)))},removeAttr:function(e){var o=this instanceof t.Observe.List,n=attrParts(e),r=n.shift(),i=o?this[r]:this._data[r];return n.length?i.removeAttr(n):(o?this.splice(r,1):r in this._data&&(delete this._data[r],r in this.constructor.prototype||delete this[r],s.triggerBatch(this,"__keys"),this._triggerChange(r,"remove",undefined,i)),i)},_get:function(t){var e="string"==typeof t&&!!~t.indexOf(".")&&this.__get(t);if(e)return e;var o=attrParts(t),n=this.__get(o.shift());return o.length?n?n._get(o):undefined:n},__get:function(t){return t?this._data[t]:this._data},_set:function(t,e,n){var r=attrParts(t,n),i=r.shift(),s=this.__get(i);if(o(s)&&r.length)s._set(r,e);else{if(r.length)throw"can.Observe: Object does not exist";this.__convert&&(e=this.__convert(i,e)),this.__set(i,e,s)}},__set:function(t,e,i){if(e!==i){var a=this.__get().hasOwnProperty(t)?"set":"add";this.___set(t,o(e)?r(e,t,this):e),"add"==a&&s.triggerBatch(this,"__keys",undefined),this._triggerChange(t,a,e,i),i&&n([i],this._cid)}},___set:function(t,e){this._data[t]=e,t in this.constructor.prototype||(this[t]=e)},bind:t.bindAndSetup,unbind:t.unbindAndTeardown,serialize:function(){return serialize(this,"serialize",{})},_attrs:function(e,n){if(e===undefined)return serialize(this,"attr",{});e=t.extend({},e);var r,i,a=this;s.startBatch(),this.each(function(r,s){if((i=e[s])===undefined)return void(n&&a.removeAttr(s));a.__convert&&(i=a.__convert(s,i)),i instanceof t.Observe?a.__set(s,i,r):o(r)&&o(i)&&r.attr?r.attr(i,n):r!=i&&a.__set(s,i,r),delete e[s]});for(var r in e)i=e[r],this._set(r,i,!0);return s.stopBatch(),this},compute:function(e){return t.compute(this,e)}}),a=[].splice,l=s({setup:function(e,o){this.length=0,t.cid(this,".observe"),this._init=1,t.isDeferred(e)?this.replace(e):this.push.apply(this,t.makeArray(e||[])),this.bind("change"+this._cid,t.proxy(this._changes,this)),t.extend(this,o),delete this._init},_triggerChange:function(t,e,o,n){s.prototype._triggerChange.apply(this,arguments),~t.indexOf(".")||("add"===e?(s.triggerBatch(this,e,[o,+t]),s.triggerBatch(this,"length",[this.length])):"remove"===e?(s.triggerBatch(this,e,[n,+t]),s.triggerBatch(this,"length",[this.length])):s.triggerBatch(this,e,[o,+t]))},__get:function(t){return t?this[t]:this},___set:function(t,e){this[t]=e,+t>=this.length&&(this.length=+t+1)},_each:function(t){for(var e=this.__get(),o=0;o<e.length;o++)t(e[o],o)},_bindsetup:makeBindSetup("*"),serialize:function(){return serialize(this,"serialize",[])},splice:function(e,i){var s,l=t.makeArray(arguments);for(s=2;s<l.length;s++){var c=l[s];o(c)&&(l[s]=r(c,"*",this,this.constructor.Observe,this.constructor))}i===undefined&&(i=l[1]=this.length-e);var u=a.apply(this,l);return t.Observe.startBatch(),i>0&&(this._triggerChange(""+e,"remove",undefined,u),n(u,this._cid)),l.length>2&&this._triggerChange(""+e,"add",l.slice(2),u),t.Observe.stopBatch(),u},_attrs:function(e,o){if(e===undefined)return serialize(this,"attr",[]);e=t.makeArray(e),s.startBatch(),this._updateAttrs(e,o),s.stopBatch()},_updateAttrs:function(t,e){for(var n=Math.min(t.length,this.length),r=0;r<n;r++){var i=this[r],s=t[r];o(i)&&o(s)?i.attr(s,e):i!=s&&this._set(r,s)}t.length>this.length?this.push.apply(this,t.slice(this.length)):t.length<this.length&&e&&this.splice(t.length)}}),c=function(e){return e[0]&&t.isArray(e[0])?e[0]:t.makeArray(e)};return t.each({push:"length",unshift:0},function(t,e){var n=[][e];l.prototype[e]=function(){var e,i,s=[],a=t?this.length:0,l=arguments.length;for(this.constructor;l--;)i=arguments[l],s[l]=o(i)?r(i,"*",this,this.constructor.Observe,this.constructor):i;return e=n.apply(this,s),this.comparator&&!s.length||this._triggerChange(""+a,"add",s,undefined),e}}),t.each({pop:"length",shift:0},function(t,e){l.prototype[e]=function(){var o=c(arguments),n=t&&this.length?this.length-1:0,r=[][e].apply(this,o);return this._triggerChange(""+n,"remove",undefined,[r]),r&&r.unbind&&r.unbind("change"+this._cid),r}}),t.extend(l.prototype,{indexOf:function(e){return this.attr("length"),t.inArray(e,this)},join:[].join,reverse:[].reverse,slice:function(){var t=Array.prototype.slice.apply(this,arguments);return new this.constructor(t)},concat:function(){var e=[];return t.each(t.makeArray(arguments),function(o,n){e[n]=o instanceof t.Observe.List?o.serialize():o}),new this.constructor(Array.prototype.concat.apply(this.serialize(),e))},forEach:function(e,o){t.each(this,e,o||this)},replace:function(e){return t.isDeferred(e)?e.then(t.proxy(this.replace,this)):this.splice.apply(this,[0,this.length].concat(t.makeArray(e||[]))),this}}),t.List=s.List=l,s.setup=function(){t.Construct.setup.apply(this,arguments),this.List=s.List({Observe:this},{})},s}(__m3,0),__m9=function(t,e){var o=function(e,o){var n;t.Observe&&(n=t.Observe.__reading,t.Observe.__reading=function(t,e){r.push({obj:t,attr:e+""})});var r=[],i=e.call(o);return t.Observe&&(t.Observe.__reading=n),{value:i,observed:r}},n=function(e,n,r,i){var s,a={},l=!0,c={value:undefined,teardown:function(){for(var t in a){var e=a[t];e.observe.obj.unbind(e.observe.attr,u),delete a[t]}}},u=function(t){if((!i||i.bound)&&(t.batchNum===undefined||t.batchNum!==s)){var e=c.value,o=g();c.value=o,o!==e&&r(o,e),s=s=t.batchNum}},g=function(){var r=o(e,n),i=r.observed,s=r.value;l=!l,t.each(i,function(t){a[t.obj._cid+"|"+t.attr]?a[t.obj._cid+"|"+t.attr].matched=l:(a[t.obj._cid+"|"+t.attr]={matched:l,observe:t},t.obj.bind(t.attr,u))});for(var c in a){var g=a[c];g.matched!==l&&(g.observe.obj.unbind(g.observe.attr,u),delete a[c])}return s};return c.value=g(),c.isListening=!t.isEmptyObject(a),c};return t.compute=function(e,r,i){if(e&&e.isComputed)return e;var s,a,l,c={bound:!1,hasDependencies:!1},u=function(){},g=function(){},h=function(){return l},p=function(t){l=t},d=!0;if(a=function(e){if(arguments.length){var o=l,n=p.call(r,e,o);return a.hasDependencies?h.call(r):(l=n===undefined?h.call(r):n,o!==l&&t.Observe.triggerBatch(a,"change",[l,o]),l)}return t.Observe.__reading&&d&&t.Observe.__reading(a,"change"),c.bound?l:h.call(r)},"function"==typeof e)p=e,h=e,d=!1!==i,a.hasDependencies=!1,u=function(t){s=n(e,r||this,t,c),a.hasDependencies=s.isListening,l=s.value},g=function(){s&&s.teardown()};else if(r)if("string"==typeof r){var f=r,m=e instanceof t.Observe;m&&(a.hasDependencies=!0),h=function(){return m?e.attr(f):e[f]},p=function(t){m?e.attr(f,t):e[f]=t};var y;u=function(n){y=function(){n(h(),l)},t.bind.call(e,i||f,y),l=o(h).value},g=function(){t.unbind.call(e,i||f,y)}}else if("function"==typeof r)l=e,p=r;else{l=e;var v=r;h=v.get||h,p=v.set||p,u=v.on||u,g=v.off||g}else l=e;a.isComputed=!0,t.cid(a,"compute");var _=function(e,o){l=e,t.Observe.triggerBatch(a,"change",[e,o])};return t.extend(a,{_bindsetup:function(){c.bound=!0,u.call(this,_)},_bindteardown:function(){g.call(this,_),c.bound=!1},bind:t.bindAndSetup,unbind:t.unbindAndTeardown})},t.compute.binder=n,t.compute}(__m3),__m10=function(t){var e=function(e,o,n){var r=new t.Deferred;return e.then(function(){var e=t.makeArray(arguments);e[0]=o[n](e[0]),r.resolveWith(r,e)},function(){r.rejectWith(this,arguments)}),"function"==typeof e.abort&&(r.abort=function(){return e.abort()}),r},o=0,n=function(e){return t.Observe.__reading&&t.Observe.__reading(e,e.constructor.id),e.__get(e.constructor.id)},r=function(e,o,n,r,i,s){var a={};if("string"==typeof e){var l=e.split(/\s+/);a.url=l.pop(),l.length&&(a.type=l.pop())}else t.extend(a,e);return a.data="object"!=typeof o||t.isArray(o)?o:t.extend(a.data||{},o),a.url=t.sub(a.url,a.data,!0),t.ajax(t.extend({type:n||"post",dataType:r||"json",success:i,error:s},a))},i=function(e,o,r,i,s){var a;t.isArray(e)?(a=e[1],e=e[0]):a=e.serialize(),a=[a];var l,c,u=e.constructor;return"destroy"==o&&a.shift(),"create"!==o&&a.unshift(n(e)),c=u[o].apply(u,a),l=c.pipe(function(t){return e[s||o+"d"](t,c),e}),c.abort&&(l.abort=function(){c.abort()}),l.then(r,i),l},s={create:{url:"_shortName",type:"post"},update:{data:function(e,o){o=o||{};var n=this.id;return o[n]&&o[n]!==e&&(o["new"+t.capitalize(e)]=o[n],delete o[n]),o[n]=e,o},type:"put"},destroy:{type:"delete",data:function(t){var e={};return e.id=e[this.id]=t,e}},findAll:{url:"_shortName"},findOne:{}},a=function(t,e){return function(o){return o=t.data?t.data.apply(this,arguments):o,r(e||this[t.url||"_url"],o,t.type||"get")}};t.Model=t.Observe({fullName:"can.Model",_reqs:0,setup:function(e){if(this.store={},t.Observe.setup.apply(this,arguments),t.Model){this.List=l({Observe:this},{});var n=this,r=t.proxy(this._clean,n);t.each(s,function(o,i){if(t.isFunction(n[i])||(n[i]=a(o,n[i])),n["make"+t.capitalize(i)]){var s=n["make"+t.capitalize(i)](n[i]);t.Construct._overwrite(n,e,i,function(){t.Model._reqs++;var e=s.apply(this,arguments),o=e.then(r,r);return o.abort=e.abort,o})}}),"can.Model"!=n.fullName&&n.fullName||(n.fullName="Model"+ ++o),t.Model._reqs=0,this._url=this._shortName+"/{"+this.id+"}"}},_ajax:a,_makeRequest:i,_clean:function(){if(!--t.Model._reqs)for(var e in this.store)this.store[e]._bindings||delete this.store[e];return arguments[0]},models:function(e,o){if(t.Model._reqs++,e){if(e instanceof this.List)return e;var n=this,r=[],i=o instanceof t.Observe.List?o:new(n.List||l),s=t.isArray(e),a=e instanceof l,c=s?e:a?e.serialize():e.data;return i.length&&i.splice(0),t.each(c,function(t){r.push(n.model(t))}),i.push.apply(i,r),s||t.each(e,function(t,e){"data"!==e&&i.attr(e,t)}),setTimeout(t.proxy(this._clean,this),1),i}},model:function(e){if(e){e instanceof this&&(e=e.serialize());var o=e[this.id],n=(o||0===o)&&this.store[o]?this.store[o].attr(e,this.removeAttr||!1):new this(e);return t.Model._reqs&&(this.store[e[this.id]]=n),n}}},{isNew:function(){var t=n(this);return!(t||0===t)},save:function(t,e){return i(this,this.isNew()?"create":"update",t,e)},destroy:function(e,o){if(this.isNew()){var n=this,r=t.Deferred();return r.then(e,o),r.done(function(t){n.destroyed(t)}).resolve(n)}return i(this,"destroy",e,o,"destroyed")},_bindsetup:function(){return this.constructor.store[this.__get(this.constructor.id)]=this,t.Observe.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){return delete this.constructor.store[n(this)],t.Observe.prototype._bindteardown.apply(this,arguments)},___set:function(e,o){t.Observe.prototype.___set.call(this,e,o),e===this.constructor.id&&this._bindings&&(this.constructor.store[n(this)]=this)}}),t.each({makeFindAll:"models",makeFindOne:"model",makeCreate:"model",makeUpdate:"model"},function(o,n){t.Model[n]=function(n){return function(){var r=t.makeArray(arguments),i=t.isFunction(r[1])?r.splice(0,1):r.splice(0,2),s=e(n.apply(this,i),this,o);return s.then(r[0],r[1]),s}}}),t.each(["created","updated","destroyed"],function(e){t.Model.prototype[e]=function(o){var n=this.constructor;o&&"object"==typeof o&&this.attr(o.attr?o.attr():o),t.trigger(this,"change",e),t.trigger(n,e,this)}});var l=t.Model.List=t.Observe.List({setup:function(e){t.isPlainObject(e)&&!t.isArray(e)?(t.Observe.List.prototype.setup.apply(this),this.replace(this.constructor.Observe.findAll(e))):t.Observe.List.prototype.setup.apply(this,arguments)},_changes:function(e,o){if(t.Observe.List.prototype._changes.apply(this,arguments),/\w+\.destroyed/.test(o)){var n=this.indexOf(e.target);-1!=n&&this.splice(n,1)}}});return t.Model}(__m3),__m11=function(t){var e=t.isFunction,o=t.makeArray,n=1,r=t.view=t.template=function(o,n,i,s){e(i)&&(s=i,i=undefined);var a=function(t){return r.frag(t)},l=e(s)?function(t){s(a(t))}:null,c=r.render(o,n,i,l),u=t.Deferred();return e(c)?c:t.isDeferred(c)?(c.then(function(t,e){u.resolve.call(u,a(t),e)},function(){u.fail.apply(u,arguments)}),u):a(c)};t.extend(r,{frag:function(t,e){return r.hookup(r.fragment(t),e)},fragment:function(e){var o=t.buildFragment(e,document.body);return o.childNodes.length||o.appendChild(document.createTextNode("")),o},toId:function(e){return t.map(e.toString().split(/\/|\./g),function(t){if(t)return t}).join("_")},hookup:function(e,o){var n,i,s=[];return t.each(e.childNodes?t.makeArray(e.childNodes):e,function(e){1===e.nodeType&&(s.push(e),s.push.apply(s,t.makeArray(e.getElementsByTagName("*"))))}),t.each(s,function(t){t.getAttribute&&(n=t.getAttribute("data-view-id"))&&(i=r.hookups[n])&&(i(t,o,n),delete r.hookups[n],t.removeAttribute("data-view-id"))}),e},hookups:{},hook:function(t){return r.hookups[++n]=t," data-view-id='"+n+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(t){this.types["."+t.suffix]=t},types:{},ext:".ejs",registerScript:function(){},preload:function(){},render:function(n,i,c,u){e(c)&&(u=c,c=undefined);var g=a(i);if(g.length){var h=new t.Deferred,p=t.extend({},i);return g.push(s(n,!0)),t.when.apply(t,g).then(function(e){var n,r=o(arguments),s=r.pop();if(t.isDeferred(i))p=l(e);else for(var a in i)t.isDeferred(i[a])&&(p[a]=l(r.shift()));n=s(p,c),h.resolve(n,p),u&&u(n,p)},function(){h.reject.apply(h,arguments)}),h}var d,f=e(u),h=s(n,f);if(f)d=h,h.then(function(t){u(i?t(i,c):t)});else{if("resolved"===h.state()&&h.__view_id){var m=r.cachedRenderers[h.__view_id];return i?m(i,c):m}h.then(function(t){d=i?t(i,c):t})}return d},registerView:function(e,o,n,i){var s=(n||r.types[r.ext]).renderer(e,o);return i=i||new t.Deferred,r.cache&&(r.cached[e]=i,i.__view_id=e,r.cachedRenderers[e]=s),i.resolve(s)}});var i=function(t,e){if(!t.length)throw"can.view: No template or empty template:"+e},s=function(e,o){var n,s,a,l=e.match(/\.[\w\d]+$/);if(e.match(/^#/)&&(e=e.substr(1)),(s=document.getElementById(e))&&(l="."+s.type.match(/\/(x\-)?(.+)/)[2]),l||r.cached[e]||(e+=l=r.ext),t.isArray(l)&&(l=l[0]),a=r.toId(e),e.match(/^\/\//)){var c=e.substr(2);e=window.steal?steal.config().root.mapJoin(""+steal.id(c)):c}if(n=r.types[l],r.cached[a])return r.cached[a];if(s)return r.registerView(a,s.innerHTML,n);var u=new t.Deferred;return t.ajax({async:o,url:e,dataType:"text",error:function(t){i("",e),u.reject(t)},success:function(t){i(t,e),r.registerView(a,t,n,u)}}),u},a=function(e){var o=[];if(t.isDeferred(e))return[e];for(var n in e)t.isDeferred(e[n])&&o.push(e[n]);return o},l=function(e){return t.isArray(e)&&"success"===e[1]?e[0]:e};
//!steal-pluginify-remove-start
//!steal-pluginify-remove-end
return window.steal&&steal.type("view js",function(t,e,o){var n=r.types["."+t.type],i=r.toId(t.id);t.text="steal('"+(n.plugin||"can/view/"+t.type)+"',function(can){return can.view.preload('"+i+"',"+t.text+");\n})",e()}),t.extend(r,{register:function(e){this.types["."+e.suffix]=e,
//!steal-pluginify-remove-start
window.steal&&steal.type(e.suffix+" view js",function(t,e,o){var n=r.types["."+t.type],i=r.toId(t.id+"");t.text=n.script(i,t.text),e()}),
//!steal-pluginify-remove-end
r[e.suffix]=function(o,n){if(!n){var i=function(){return r.frag(i.render.apply(this,arguments))};return i.render=function(){var t=e.renderer(null,o);return t.apply(t,arguments)},i}return r.preload(o,e.renderer(o,n)),t.view(o)}},registerScript:function(t,e,o){return"can.view.preload('"+e+"',"+r.types["."+t].script(e,o)+");"},preload:function(e,o){function n(){return r.frag(o.apply(this,arguments))}return r.cached[e]=(new t.Deferred).resolve(function(t,e){return o.call(t,t,e)}),n.render=o,n}}),t}(__m3),__m14=function(){var t={tagToContentPropMap:{option:"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:{class:"className",value:"value",innerText:"innerText",textContent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0},defaultValue:["input","textarea"],tagMap:{"":"span",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},getParentNode:function(t,e){return e&&11===t.parentNode.nodeType?e:t.parentNode},setAttr:function(e,o,n){var r=e.nodeName.toString().toLowerCase(),i=t.attrMap[o];!0===i?e[o]=!0:i?(e[i]=n,"value"===i&&can.inArray(r,t.defaultValue)>=0&&(e.defaultValue=n)):e.setAttribute(o,n)},getAttr:function(e,o){return(t.attrMap[o]&&e[t.attrMap[o]]?e[t.attrMap[o]]:e.getAttribute(o))||""},removeAttr:function(e,o){!0===t.attrMap[o]?e[o]=!1:e.removeAttribute(o)},contentText:function(t){return"string"==typeof t?t:t||0===t?""+t:""}};return t}(),__m13=function(can,elements){var newLine=/(\r|\n)+/g,clean=function(t){return t.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("\t").join("\\t")},getTag=function(t,e,o){if(t)return t;for(;o<e.length;){if("<"==e[o]&&elements.reverseTagMap[e[o+1]])return elements.reverseTagMap[e[o+1]];o++}return""},bracketNum=function(t){return--t.split("{").length- --t.split("}").length},myEval=function(script){eval(script)},attrReg=/([^\s]+)[\s]*=[\s]*$/,startTxt="var ___v1ew = [];",finishTxt="return ___v1ew.join('')",put_cmd="___v1ew.push(",insert_cmd=put_cmd,htmlTag=null,quote=null,beforeQuote=null,rescan=null,status=function(){return quote?"'"+beforeQuote.match(attrReg)[1]+"'":htmlTag?1:0};return can.view.Scanner=Scanner=function(t){can.extend(this,{text:{},tokens:[]},t),this.tokenReg=[],this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"},this.tokenComplex=[],this.tokenMap={};for(var e,o=0;e=this.tokens[o];o++)e[2]?(this.tokenReg.push(e[2]),this.tokenComplex.push({abbr:e[1],re:new RegExp(e[2]),rescan:e[3]})):(this.tokenReg.push(e[1]),this.tokenSimple[e[1]]=e[0]),this.tokenMap[e[0]]=e[1];this.tokenReg=new RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")},Scanner.prototype={helpers:[{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(t){var e=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,o=t.match(e);return"can.proxy(function(__){var "+o[1]+"=can.$(__);"+o[2]+"}, this);"}}],scan:function(t,e){var o=[],n=0,r=this.tokenSimple,i=this.tokenComplex;t=t.replace(newLine,"\n"),this.transform&&(t=this.transform(t)),t.replace(this.tokenReg,function(e,s){var a=arguments[arguments.length-2];if(a>n&&o.push(t.substring(n,a)),r[e])o.push(e);else for(var l,c=0;l=i[c];c++)if(l.re.test(e)){o.push(l.abbr),l.rescan&&o.push(l.rescan(s));break}n=a+s.length}),n<t.length&&o.push(t.substr(n));var s,a,l,c="",u=[startTxt+(this.text.start||"")],g=function(t,e){u.push(put_cmd,'"',clean(t),'"'+(e||"")+");")},h=[],p=null,d=!1,f="",m=[],y=!1,v=0,_=this.tokenMap;for(htmlTag=quote=beforeQuote=null;(l=o[v++])!==undefined;){if(null===p)switch(l){case _.left:case _.escapeLeft:case _.returnLeft:d=htmlTag&&1;case _.commentLeft:p=l,c.length&&g(c),c="";break;case _.escapeFull:d=htmlTag&&1,rescan=1,p=_.escapeLeft,c.length&&g(c),rescan=o[v++],c=rescan.content||rescan,rescan.before&&g(rescan.before),o.splice(v,0,_.right);break;case _.commentFull:break;case _.templateLeft:c+=_.left;break;case"<":0!==o[v].indexOf("!--")&&(htmlTag=1,d=0),c+=l;break;case">":htmlTag=0;var b="/"==c.substr(c.length-1)||"--"==c.substr(c.length-2);d||!y&&elements.tagToContentPropMap[m[m.length-1]]?(b?g(c.substr(0,c.length-1),',can.view.pending(),"/>"'):g(c,',can.view.pending(),">"'),c="",d=0):c+=l,(b||y)&&(m.pop(),f=m[m.length-1],y=!1);break;case"'":case'"':htmlTag&&(quote&&quote===l?quote=null:null===quote&&(quote=l,beforeQuote=s));default:"<"===s&&(f=l.split(/\s/)[0],0===f.indexOf("/")&&m[m.length-1]===f.substr(1)?(f=m[m.length-1],y=!0):m.push(f)),c+=l}else switch(l){case _.right:case _.returnRight:switch(p){case _.left:a=bracketNum(c),1==a?(u.push(insert_cmd,"can.view.txt(0,'"+getTag(f,o,v)+"',"+status()+",this,function(){",startTxt,c),h.push({before:"",after:finishTxt+"}));\n"})):(n=h.length&&-1==a?h.pop():{after:";"},n.before&&u.push(n.before),u.push(c,";",n.after));break;case _.escapeLeft:case _.returnLeft:a=bracketNum(c),a&&h.push({before:finishTxt,after:"}));"});for(var E=p===_.escapeLeft?1:0,S={insert:insert_cmd,tagName:getTag(f,o,v),status:status()},k=0;k<this.helpers.length;k++){var T=this.helpers[k];if(T.name.test(c)){c=T.fn(c,S),T.name.source==/^>[\s]*\w*/.source&&(E=0);break}}"object"==typeof c?c.raw&&u.push(c.raw):u.push(insert_cmd,"can.view.txt("+E+",'"+f+"',"+status()+",this,function(){ "+(this.text.escape||"")+"return ",c,a?startTxt:"}));"),rescan&&rescan.after&&rescan.after.length&&(g(rescan.after.length),rescan=null)}p=null,c="";break;case _.templateLeft:c+=_.left;break;default:c+=l}s=l}c.length&&g(c),u.push(";");var C=u.join(""),x={out:"with(_VIEW) { with (_CONTEXT) {"+C+" "+finishTxt+"}}"};return myEval.call(x,"this.fn = (function(_CONTEXT,_VIEW){"+x.out+"});\r\n//@ sourceURL="+e+".js"),x}},Scanner}(__m11,__m14),__m17=function(t){var e=!0;try{document.createTextNode("")._=0}catch(t){e=!1}var o={},n={},r={},i="ejs_"+Math.random(),s=0,a=function(t){if(e||3!==t.nodeType)return t[i]?t[i]:t[i]=(t.nodeName?"element_":"obj_")+ ++s;for(var o in n)if(n[o]===t)return o;return n["text_"+ ++s]=t,"text_"+s},l=function(e,n){var r=o[a(e)];if(r){var i=t.inArray(n,r);i>=0&&r.splice(i,1),r.length||delete o[a(e)]}},c=function(t,e){var n=o[a(t)];n||(n=o[a(t)]=[]),n.push(e)},u={id:a,replace:function(e,n){e=t.makeArray(e);var i=e[0];t.each(t.makeArray(o[a(i)]),function(o){var s=r[o],a=t.inArray(i,s),g=t.inArray(e[e.length-1],s);if(a>=0&&g>=0){for(var h=a;h<=g;h++){var p=s[h];l(p,o)}s.splice.apply(s,[a,g-a+1].concat(n)),t.each(n,function(t){c(t,o)})}else u.unregister(s)})},register:function(e){var o=a(e);r[o]=e,t.each(e,function(t){c(t,o)})},unregister:function(e){var o=a(e);t.each(e,function(t){l(t,o)}),delete r[o]},nodeMap:o,nodeListMap:r};return u}(__m3),__m16=function(t,e,o,n){var r=function(e,o,n){var r=function(){n(i),t.unbind.call(e,"destroyed",r)},i={teardownCheck:function(t){t||r()}};return t.bind.call(e,"destroyed",r),o(i),i},i=function(t,e,o){return r(t,function(){e.bind("change",o)},function(t){e.unbind("change",o),t.nodeList&&n.unregister(t.nodeList)})},s=function(t){return(t||"").replace(/['"]/g,"").split("=")};insertElementsAfter=function(t,e){var o=t[t.length-1];o.nextSibling?o.parentNode.insertBefore(e,o.nextSibling):o.parentNode.appendChild(e)};var a={nodeLists:n,list:function(o,i,s,a,l){var c=[],u=function(e,o,r){var i=document.createDocumentFragment(),u=[];if(t.each(o,function(e){var o=s.call(a,e),n=t.view.frag(o,l);u.push(t.makeArray(n.childNodes)),i.appendChild(n)}),c[r]){var g=c[r][0];g.parentNode.insertBefore(i,g)}else insertElementsAfter(0==r?[h]:c[r-1],i);t.each(u,function(t){n.register(t)}),[].splice.apply(c,[r,0].concat(u))},g=function(e,o,r){var i=c.splice(r,o.length),s=[];t.each(i,function(t){[].push.apply(s,t),n.replace(t,[]),n.unregister(t)}),t.remove(t.$(s))},l=e.getParentNode(o,l),h=document.createTextNode("");r(l,function(){i.bind("add",u).bind("remove",g)},function(){i.unbind("add",u).unbind("remove",g),t.each(c,function(t){n.unregister(t)})}),insertElementsAfter([o],h),t.remove(t.$(o)),u(0,i,0)},html:function(o,r,s){var a,s=e.getParentNode(o,s),l=i(s,r,function(t,e,o){a[0].parentNode&&c(e),l.teardownCheck(a[0].parentNode)}),c=function(e){var r=t.view.frag(e,s),i=t.makeArray(r.childNodes);if(insertElementsAfter(a||[o],r),a){var c=t.makeArray(a);n.replace(a,i),t.remove(t.$(c))}else t.remove(t.$(o)),a=i,l.nodeList=a,n.register(a)};c(r(),[o])},text:function(t,o,n){var r=e.getParentNode(t,n),s=i(t.parentNode!==r?t.parentNode:r,o,function(t,e,o){"unknown"!=typeof a.nodeValue&&(a.nodeValue=""+e),s.teardownCheck(a.parentNode)}),a=document.createTextNode(o());t.parentNode!==r?(r=t.parentNode,r.insertBefore(a,t),r.removeChild(t)):(r.insertBefore(a,t),r.removeChild(t))},attributes:function(t,o,n){var r=function(o){var n=s(o),r=n.shift();r!=a&&a&&e.removeAttr(t,a),r&&(e.setAttr(t,r,n.join("=")),a=r)};if(i(t,o,function(t,e){r(e)}),arguments.length>=3)var a=s(n)[0];else r(o())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(o,n,r){i(o,r,function(t,r){e.setAttr(o,n,c.render())});var s,l=t.$(o);(s=t.data(l,"hooks"))||t.data(l,"hooks",s={});var c,u=e.getAttr(o,n),g=u.split(a.attributePlaceholder),h=[];h.push(g.shift(),g.join(a.attributePlaceholder)),s[n]?s[n].computes.push(r):s[n]={render:function(){var t=0;return u?u.replace(a.attributeReplace,function(){return e.contentText(c.computes[t++]())}):e.contentText(c.computes[t++]())},computes:[r],batchNum:undefined},c=s[n],h.splice(1,0,r()),e.setAttr(o,n,h.join(""))}};return a}(__m3,__m14,0,__m17),__m15=function(t,e,o){var n=[],r=function(t){var o=e.tagMap[t]||"span";return"span"===o?"@@!!@@":"<"+o+">"+r(o)+"</"+o+">"},i=function(e,o){if("string"==typeof e)return e;if(!e&&0!==e)return"";var r=e.hookup&&function(t,o){e.hookup.call(e,t,o)}||"function"==typeof e&&e;return r?o?"<"+o+" "+t.view.hook(r)+"></"+o+">":(n.push(r),""):""+e},s=function(e){return"string"==typeof e||"number"==typeof e?t.esc(e):i(e)};return t.extend(t.view,{live:o,setupLists:function(){var e,o=t.view.lists;return t.view.lists=function(t,o){e={list:t,renderer:o}},function(){return t.view.lists=o,e}},pending:function(){var e=n.slice(0);return lastHookups=e,n=[],t.view.hook(function(o){t.each(e,function(t){t(o)})})},txt:function(a,l,c,u,g){var h=t.view.setupLists(),p=function(){},d=function(){f.unbind("change",p)},f=t.compute(g,u,!1);f.bind("change",p);var m=e.tagMap[l]||"span",y=h(),v=f();if(y)return"<"+m+t.view.hook(function(t,e){o.list(t,y.list,y.renderer,u,e)})+"></"+m+">";if(!f.hasDependencies)return d(),(a||0!==c?s:i)(v,0===c&&m);var _=e.tagToContentPropMap[l];if(0!==c||_){if(1===c)return n.push(function(t){o.attributes(t,f,f()),d()}),f();var b=0===c?_:c;return(0===c?lastHookups:n).push(function(t){o.attribute(t,b,f),d()}),o.attributePlaceholder}return"<"+m+t.view.hook(a?function(t,e){o.text(t,f,e),d()}:function(t,e){o.html(t,f,e),d()})+">"+r(m)+"</"+m+">"}}),t}(__m11,__m14,__m16),__m12=function(t){var e=t.extend,o=function(t){if(this.constructor!=o){var n=new o(t);return function(t,e){return n.render(t,e)}}if("function"==typeof t)return void(this.template={fn:t});e(this,t),this.template=this.scanner.scan(this.text,this.name)};return t.EJS=o,o.prototype.render=function(t,e){return t=t||{},this.template.fn.call(t,t,new o.Helpers(t,e||{}))},e(o.prototype,{scanner:new t.view.Scanner({tokens:[["templateLeft","<%%"],["templateRight","%>"],["returnLeft","<%=="],["escapeLeft","<%="],["commentLeft","<%#"],["left","<%"],["right","%>"],["returnRight","%>"]],transform:function(t){return t.replace(/<%([\s\S]+?)%>/gm,function(t,e){var o,n,r=[];e.replace(/[{}]/gm,function(t,e){r.push([t,e])});do{for(o=!1,n=r.length-2;n>=0;n--)if("{"==r[n][0]&&"}"==r[n+1][0]){r.splice(n,2),o=!0;break}}while(o);if(r.length>=2){var i,s=["<%"],a=0;for(n=0;i=r[n];n++)s.push(e.substring(a,a=i[1])),"{"==i[0]&&n<r.length-1||"}"==i[0]&&n>0?s.push("{"==i[0]?"{ %><% ":" %><% }"):s.push(i[0]),++a;return s.push(e.substring(a),"%>"),s.join("")}return"<%"+e+"%>"})}})}),o.Helpers=function(t,o){this._data=t,this._extras=o,e(this,o)},o.Helpers.prototype={list:function(e,o){t.each(e,function(t,n){o(t,n,e)})},each:function(e,o){t.isArray(e)?this.list(e,o):t.view.lists(e,o)}},t.view.register({suffix:"ejs",script:function(t,e){return"can.EJS(function(_CONTEXT,_VIEW) { "+new o({text:e,name:t}).template.out+" })"},renderer:function(t,e){return o({text:e,name:t})}}),t}(__m3),__m18=function(t){var e,o=function(e,o,n){return t.bind.call(e,o,n),function(){t.unbind.call(e,o,n)}},n=t.isFunction,r=t.extend,i=t.each,s=[].slice,a=/\{([^\}]+)\}/g,l=t.getObject("$.event.special",[t])||{},c=function(e,o,n,r){return t.delegate.call(e,o,n,r),function(){t.undelegate.call(e,o,n,r)}},u=function(e,n,r,i){return i?c(e,t.trim(i),n,r):o(e,n,r)},g=t.Control=t.Construct({setup:function(){if(t.Construct.setup.apply(this,arguments),t.Control){var e,o=this;o.actions={};for(e in o.prototype)o._isAction(e)&&(o.actions[e]=o._action(e))}},_shifter:function(e,o){var r="string"==typeof o?e[o]:o;return n(r)||(r=e[r]),function(){return e.called=o,r.apply(e,[this.nodeName?t.$(this):this].concat(s.call(arguments,0)))}},_isAction:function(t){var e=this.prototype[t],o=typeof e;return"constructor"!==t&&("function"==o||"string"==o&&n(this.prototype[e]))&&!!(l[t]||h[t]||/[^\w]/.test(t))},_action:function(o,n){if(a.lastIndex=0,n||!a.test(o)){var r=n?t.sub(o,[n,window]):o;if(!r)return null;var i=t.isArray(r),s=i?r[1]:r,l=s.split(/\s+/g),c=l.pop();return{processor:h[c]||e,parts:[s,l.join(" "),c],delegate:i?r[0]:undefined}}},processors:{},defaults:{}},{setup:function(e,o){var n,i=this.constructor,s=i.pluginName||i._fullName;return this.element=t.$(e),s&&"can_control"!==s&&this.element.addClass(s),(n=t.data(this.element,"controls"))||t.data(this.element,"controls",n=[]),n.push(this),this.options=r({},i.defaults,o),this.on(),[this.element,this.options]},on:function(e,o,n,r){if(!e){this.off();var i,s,a=this.constructor,l=this._bindings,c=a.actions,g=this.element,h=t.Control._shifter(this,"destroy");for(i in c)c.hasOwnProperty(i)&&(s=c[i]||a._action(i,this.options))&&l.push(s.processor(s.delegate||g,s.parts[2],s.parts[1],i,this));return t.bind.call(g,"destroyed",h),l.push(function(e){t.unbind.call(e,"destroyed",h)}),l.length}return"string"==typeof e&&(r=n,n=o,o=e,e=this.element),r===undefined&&(r=n,n=o,o=null),"string"==typeof r&&(r=t.Control._shifter(this,r)),this._bindings.push(u(e,n,r,o)),this._bindings.length},off:function(){var t=this.element[0];i(this._bindings||[],function(e){e(t)}),this._bindings=[]},destroy:function(){if(null!==this.element){var e,o=this.constructor,n=o.pluginName||o._fullName;this.off(),n&&"can_control"!==n&&this.element.removeClass(n),e=t.data(this.element,"controls"),e.splice(t.inArray(this,e),1),t.trigger(this,"destroyed"),this.element=null}}}),h=t.Control.processors,e=function(e,o,n,r,i){return u(e,o,t.Control._shifter(i,r),n)};return i(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave"],function(t){h[t]=e}),g}(__m3),__m20=function(t){var e=/^\d+$/,o=/([^\[\]]+)|(\[\])/g,n=/([^?#]*)(#.*)?$/,r=function(t){return decodeURIComponent(t.replace(/\+/g," "))};return t.extend(t,{deparam:function(i){var s,a,l={};return i&&n.test(i)&&(s=i.split("&"),t.each(s,function(t){var n=t.split("="),i=r(n.shift()),s=r(n.join("=")),c=l;if(i){n=i.match(o);for(var u=0,g=n.length-1;u<g;u++)c[n[u]]||(c[n[u]]=e.test(n[u+1])||"[]"==n[u+1]?[]:{}),c=c[n[u]];a=n.pop(),"[]"==a?c.push(s):c[a]=s}})),l}}),t}(__m3),__m19=function(t){var e=/\:([\w\.]+)/g,o=/^(?:&[^=]+=[^&]*)+/,n=function(e){var o=[];return t.each(e,function(e,n){o.push(("className"===n?"class":n)+'="'+("href"===n?e:t.esc(e))+'"')}),o.join(" ")},r=function(t,e){var o=0,n=0,r={};for(var i in t.defaults)t.defaults[i]===e[i]&&(r[i]=1,o++);for(;n<t.names.length;n++){if(!e.hasOwnProperty(t.names[n]))return-1;r[t.names[n]]||o++}return o},i=!0,s=window.location,a=function(t){return(t+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},l=t.each,c=t.extend;t.route=function(o,n){n=n||{};var r=[],i=o.replace(e,function(e,i,s){return r.push(i),"([^\\"+(o.substr(s+e.length,1)||t.route._querySeparator)+"]"+(n[i]?"*":"+")+")"});return t.route.routes[o]={test:new RegExp("^"+i+"($|"+a(t.route._querySeparator)+")"),route:o,names:r,defaults:n,length:o.split("/").length},t.route},c(t.route,{_querySeparator:"&",_paramsMatcher:o,param:function(o,n){var i,s,a=0,u=o.route,g=0;if(delete o.route,l(o,function(){g++}),l(t.route.routes,function(t,e){if(s=r(t,o),s>a&&(i=t,a=s),s>=g)return!1}),t.route.routes[u]&&r(t.route.routes[u],o)===a&&(i=t.route.routes[u]),i){var h,p=c({},o),d=i.route.replace(e,function(t,e){return delete p[e],o[e]===i.defaults[e]?"":encodeURIComponent(o[e])});return l(i.defaults,function(t,e){p[e]===t&&delete p[e]}),h=t.param(p),n&&t.route.attr("route",i.route),d+(h?t.route._querySeparator+h:"")}return t.isEmptyObject(o)?"":t.route._querySeparator+t.param(o)},deparam:function(e){var o={length:-1};if(l(t.route.routes,function(t,n){t.test.test(e)&&t.length>o.length&&(o=t)}),o.length>-1){var n=e.match(o.test),r=n.shift(),i=e.substr(r.length-(n[n.length-1]===t.route._querySeparator?1:0)),s=i&&t.route._paramsMatcher.test(i)?t.deparam(i.slice(1)):{};return s=c(!0,{},o.defaults,s),l(n,function(e,n){e&&e!==t.route._querySeparator&&(s[o.names[n]]=decodeURIComponent(e))}),s.route=o.route,s}return e.charAt(0)!==t.route._querySeparator&&(e=t.route._querySeparator+e),t.route._paramsMatcher.test(e)?t.deparam(e.slice(1)):{}},data:new t.Observe({}),routes:{},ready:function(e){return!1===e&&(i=e),!0!==e&&!0!==i||(t.route._setup(),d()),t.route},url:function(e,o){return o&&(e=c({},g,e)),"#!"+t.route.param(e)},link:function(e,o,r,i){return"<a "+n(c({href:t.route.url(o,i)},r))+">"+e+"</a>"},current:function(e){return s.hash=="#!"+t.route.param(e)},_setup:function(){t.bind.call(window,"hashchange",d)},_getHash:function(){return s.href.split(/#!?/)[1]||""},_setHash:function(e){var o=t.route.param(e,!0);return s.hash="#!"+o,o}}),l(["bind","unbind","delegate","undelegate","attr","removeAttr"],function(e){t.route[e]=function(){if(t.route.data[e])return t.route.data[e].apply(t.route.data,arguments)}});var u,g,h,p,d=t.route.setState=function(){var e=t.route._getHash();g=t.route.deparam(e),p&&e===h||t.route.attr(g,!0)};return t.route.bind("change",function(e,o){p=1,clearTimeout(u),u=setTimeout(function(){p=0;var e=t.route.data.serialize();h=t.route._setHash(e)},1)}),t.bind.call(document,"ready",t.route.ready),"complete"!==document.readyState&&"interactive"!==document.readyState||!i||t.route.ready(),t.route.constructor.canMakeObserve=t.Observe.canMakeObserve,t.route}(__m3),__m21=function(t){return t.Control.processors.route=function(e,o,n,r,i){n=n||"",t.route(n);var s,a=function(e,o,a){if(t.route.attr("route")===n&&(e.batchNum===undefined||e.batchNum!==s)){s=e.batchNum;var l=t.route.attr();delete l.route,t.isFunction(i[r])?i[r](l):i[i[r]](l)}};return t.route.bind("change",a),function(){t.route.unbind("change",a)}},t}(__m3),__m22=function(t){t.view.ext=".mustache";var e="___st4ck3d",o="___st4ck(___c0nt3xt,this)",n="{context:"+o+",options:options}",r=function(e){return null!==e&&t.isFunction(e.attr)&&e.constructor&&!!e.constructor.canMakeObserve},i=function(t){return t&&t.splice&&"number"==typeof t.length},s=function(e,o){if(this.constructor!=s){var n=new s(e);return function(t,e){return n.render(t,e)}}if("function"==typeof e)return void(this.template={fn:e});t.extend(this,e),this.template=this.scanner.scan(this.text,this.name)};t.Mustache=window.Mustache=s,s.prototype.render=function(t,e){return t=t||{},e=e||{},e.helpers||e.partials||(e.helpers=e),this.template.fn.call(t,t,{_data:t,options:e})},t.extend(s.prototype,{scanner:new t.view.Scanner({text:{start:"var ___c0nt3xt = this && this.___st4ck3d ? this : [];___c0nt3xt.___st4ck3d = true;var ___st4ck = function(context, self) {var s;if (arguments.length == 1 && context) {s = !context.___st4ck3d ? [context] : context;} else if (!context.___st4ck3d) {s = [self, context];} else if (context && context === self && context.___st4ck3d) {s = context.slice(0);} else {s = context && context.___st4ck3d ? context.concat([self]) : ___st4ck(context).concat([self]);}return (s.___st4ck3d = true) && s;};"},tokens:[["returnLeft","{{{","{{[{&]"],["commentFull","{{!}}","^[\\s\\t]*{{!.+?}}\\n"],["commentLeft","{{!","(\\n[\\s\\t]*{{!|{{!)"],["escapeFull","{{}}","(^[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}$)",function(t){return{before:/^\n.+?\n$/.test(t)?"\n":"",content:t.match(/\{\{(.+?)\}\}/)[1]||""}}],["escapeLeft","{{"],["returnRight","}}}"],["right","}}"]],helpers:[{name:/^>[\s]*\w*/,fn:function(e,n){var r=t.trim(e.replace(/^>\s?/,"")).replace(/["|']/g,"");return"options.partials && options.partials['"+r+"'] ? can.Mustache.renderPartial(options.partials['"+r+"'],"+o+",options) : can.Mustache.render('"+r+"', "+o+")"}},{name:/^\s*data\s/,fn:function(t,e){return"can.proxy(function(__){can.data(can.$(__),'"+t.match(/["|'](.*)["|']/)[1]+"', this.pop()); }, "+o+")"}},{name:/^.*$/,fn:function(e,o){var r=!1,i=[];if(e=t.trim(e),e.length&&(r=e.match(/^([#^/]|else$)/))){switch(r=r[0]){case"#":case"^":i.push(o.insert+"can.view.txt(0,'"+o.tagName+"',"+o.status+",this,function(){ return ");break;case"/":return{raw:'return ___v1ew.join("");}}])}));'}}e=e.substring(1)}if("else"!=r){var s,a,l=[],c=0,u=!1;for((t.trim(e)+" ").replace(/((([^\s]+?=)?('.*?'|".*?"))|.*?)\s/g,function(t,e){l.push(e)}),i.push("can.Mustache.txt("+n+","+(r?'"'+r+'"':"null")+",");s=l[c];c++)c&&i.push(","),c&&(a=s.match(/^(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false)|((.+?)=(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false)|(.+))))$/))?a[2]?i.push(a[0]):(u||(u=!0,i.push("{___h4sh:{")),i.push(a[4],":",a[6]?a[6]:'can.Mustache.get("'+a[5].replace(/"/g,'\\"')+'",'+n+")"),c==l.length-1&&i.push("}}")):i.push('can.Mustache.get("'+s.replace(/"/g,'\\"')+'",'+n+(0==c&&l.length>1?",true":",false")+(c>0?",true":",false")+")")}switch(r&&"else"!=r&&i.push(",[{_:function(){"),r){case"#":i.push('return ___v1ew.join("");}},{fn:function(___c0nt3xt){var ___v1ew = [];');break;case"else":case"^":i.push('return ___v1ew.join("");}},{inverse:function(___c0nt3xt){var ___v1ew = [];');break;default:i.push(");")}return i=i.join(""),r?{raw:i}:i}}]})});for(var a=t.view.Scanner.prototype.helpers,l=0;l<a.length;l++)s.prototype.scanner.helpers.unshift(a[l]);return s.txt=function(o,n,a){var l=Array.prototype.slice.call(arguments,3),c=t.extend.apply(t,[{fn:function(){},inverse:function(){}}].concat(n?l.pop():[])),u={};if(o.context&&(u=o.options,o=o.context),f=s.getHelper(a,u)||t.isFunction(a)&&!a.isComputed&&{fn:a}){var g=o[e]&&o,o=g&&o[o.length-1]||o,h={fn:t.proxy(c.fn,o),inverse:t.proxy(c.inverse,o)},p=l[l.length-1];return g&&(h.contexts=g),p&&p.___h4sh&&(h.hash=l.pop().___h4sh),l.push(h),f.fn.apply(o,l)||""}t.isFunction(a)&&a.isComputed&&(a=a());var d,f,m,y,v=l.length?l:[a],_=!0,b=[];if(n)for(d=0;d<v.length;d++)y=v[d],m=void 0!==y&&r(y),i(y)?"#"==n?_=_&&!!(m?y.attr("length"):y.length):"^"==n&&(_=_&&!(m?y.attr("length"):y.length)):_="#"==n?_&&!!y:"^"==n?_&&!y:_;if(_)switch(n){case"#":if(i(a)){var E=r(a);for(d=0;d<a.length;d++)b.push(c.fn.call(a[d],o)||""),E&&a.attr(""+d);return b.join("")}return c.fn.call(a||{},o)||"";case"^":return c.inverse.call(a||{},o)||"";default:return""+(a!==undefined?a:"")}return""},s.get=function(e,o,n,i){var a=o.options||{};o=o.context||o;var l,c,u,g,h,p,d,f=o[o.length-1],m=o[o.length-2],y=-1==e.indexOf("\\.")?e.split("."):function(){var t=[],o=0;return e.replace(/(\\)?\./g,function(n,r,i){r||(t.push(e.slice(o,i).replace(/\\\./g,".")),o=i+n.length)}),t.push(e.slice(o).replace(/\\\./g,".")),t}(),v=y.length;if(/^\.|this$/.test(e)){if(/^object|undefined$/.test(typeof m)){for(;l=o.pop();)if(void 0!==l)return l;return""}return m||""}if(!n)for(g=o.length-1;g>=0;g--){if(l=o[g],t.isFunction(l)&&l.isComputed&&(l=l()),void 0!==l&&null!==l){var n=s.getHelper(e,a);for(h=0;h<v;h++){if(void 0===l[y[h]]||null===l[y[h]]){if(n)return e;if(r(l)){p=l,d=y[h],c=l=undefined;break}c=l=undefined;break}c=l,l=l[u=y[h]]}}if(l!==undefined)return s.resolve(l,c,u,i)}return!p||s.getHelper(e)&&-1===t.inArray(d,t.Observe.keys(p))?(l=s.getHelper(e,a))?e:void 0!==f&&null!==f&&t.isFunction(f[e])?f[e]:"":p.compute(d)},s.resolve=function(e,o,n,s){return o&&t.isFunction(o[n])&&s?o[n].isComputed?o[n]:function(){return o[n].apply(o,arguments)}:o&&t.isFunction(o)&&o.isComputed?o()[n]:o&&t.isFunction(o[n])?o[n]():r(e)&&i(e)&&e.attr("length")?e:o&&r(o)?o.compute(n):t.isFunction(e)?e():e},s._helpers={},s.registerHelper=function(t,e){this._helpers[t]={name:t,fn:e}},s.getHelper=function(t,e){return e&&e.helpers&&e.helpers[t]&&{fn:e.helpers[t]}||this._helpers[t]},s.render=function(e,o){return!t.view.cached[e]&&o[e]&&(e=o[e]),t.view.render(e,o)},s.renderPartial=function(t,e,o){return t.render?t.render(e,o):t(e,o)},t.each({if:function(t,e){return s.resolve(t)?e.fn(e.contexts||this):e.inverse(e.contexts||this)},unless:function(t,e){if(!s.resolve(t))return e.fn(e.contexts||this)},each:function(e,o){if((e=s.resolve(e))&&i(e)){if(r(e)&&e.attr("length"))return t.view.lists&&t.view.lists(e,function(t){return o.fn(t)});for(var n=[],a=0;a<e.length;a++)n.push(o.fn(e[a]));return n.join("")}},with:function(t,e){var o=t;if(t=s.resolve(t))return e.fn(o)}},function(t,e){s.registerHelper(e,t)}),t.view.register({suffix:"mustache",contentType:"x-mustache-template",script:function(t,e){return"can.Mustache(function(_CONTEXT,_VIEW) { "+new s({text:e,name:t}).template.out+" })"},renderer:function(t,e){return s({text:e,name:t})}}),t}(__m3);window.can=__m5}()}).call(exports,__webpack_require__(0))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;this.JSON||(this.JSON={}),function(){function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var o,n,r,i,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,o=0;o<i;o+=1)s[o]=str(o,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(i=rep.length,o=0;o<i;o+=1)"string"==typeof(n=rep[o])&&(r=str(n,l))&&s.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.hasOwnProperty.call(l,n)&&(r=str(n,l))&&s.push(quote(n)+(gap?": ":":")+r);return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,o){var n;if(gap="",indent="","number"==typeof o)for(n=0;n<o;n+=1)indent+=" ";else"string"==typeof o&&(indent=o);if(rep=e,!e||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var o,n,r=t[e];if(r&&"object"==typeof r)for(o in r)Object.hasOwnProperty.call(r,o)&&(n=walk(r,o),void 0!==n?r[o]=n:delete r[o]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=e,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function(){var t,e={},o=window,n=o.document,r="localStorage",i="script";if(e.disabled=!1,e.version="1.3.17",e.set=function(t,e){},e.get=function(t,e){},e.has=function(t){return void 0!==e.get(t)},e.remove=function(t){},e.clear=function(){},e.transact=function(t,o,n){null==n&&(n=o,o=null),null==o&&(o={});var r=e.get(t,o);n(r),e.set(t,r)},e.getAll=function(){},e.forEach=function(){},e.serialize=function(t){return JSON.stringify(t)},e.deserialize=function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(e){return t||void 0}},function(){try{return r in o&&o[r]}catch(t){return!1}}())t=o[r],e.set=function(o,n){return void 0===n?e.remove(o):(t.setItem(o,e.serialize(n)),n)},e.get=function(o,n){var r=e.deserialize(t.getItem(o));return void 0===r?n:r},e.remove=function(e){t.removeItem(e)},e.clear=function(){t.clear()},e.getAll=function(){var t={};return e.forEach(function(e,o){t[e]=o}),t},e.forEach=function(o){for(var n=0;n<t.length;n++){var r=t.key(n);o(r,e.get(r))}};else if(n.documentElement.addBehavior){var s,a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write("<"+i+">document.w=window</"+i+'><iframe src="/favicon.ico"></iframe>'),a.close(),s=a.w.frames[0].document,t=s.createElement("div")}catch(e){t=n.createElement("div"),s=n.body}var l=function(o){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(t),s.appendChild(t),t.addBehavior("#default#userData"),t.load(r);var i=o.apply(e,n);return s.removeChild(t),i}},c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),u=function(t){return t.replace(/^d/,"___$&").replace(c,"___")};e.set=l(function(t,o,n){return o=u(o),void 0===n?e.remove(o):(t.setAttribute(o,e.serialize(n)),t.save(r),n)}),e.get=l(function(t,o,n){o=u(o);var r=e.deserialize(t.getAttribute(o));return void 0===r?n:r}),e.remove=l(function(t,e){e=u(e),t.removeAttribute(e),t.save(r)}),e.clear=l(function(t){var e=t.XMLDocument.documentElement.attributes;for(t.load(r);e.length;)t.removeAttribute(e[0].name);t.save(r)}),e.getAll=function(t){var o={};return e.forEach(function(t,e){o[t]=e}),o},e.forEach=l(function(t,o){for(var n,r=t.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)o(n.name,e.deserialize(t.getAttribute(n.name)))})}try{var g="__storejs__";e.set(g,g),e.get(g)!=g&&(e.disabled=!0),e.remove(g)}catch(t){e.disabled=!0}return e.enabled=!e.disabled,e})},function(t,e,o){(function(t){!function(e,o,n){e.marketplace=function(e,n,r,i,s,a,l,c,u){this.cart=o(".js-marketplace-cart");var g,h;"production"==c?(g="https://mkp-be-prod.spark.autodesk.com/api/v1",h="https://api.acg.autodesk.com/api/v2"):(g="https://mkp-be-beta.spark.autodesk.com/api/v1",h="https://beta-api.acg.autodesk.com/api/v2"),this.urls={session:h+"/session",carts:g+"/carts",cartoverview:g+"/carts/management",managementUrl:g+"/carts/managementUrl",carttransfer:g+"/carts/transfer",checkouturl:g+"/carts/checkoutUrl",pcburl:g+"/carts/pcb",asseturl:g+"/assets"};var p=this;this.tenant=n,this.afc=e,this.user=r,this.session=i,this.secure_session=s,this.coppa=a,this.cs_member_id=u,this.iframe_url=!1,this.iframe_child=!1,this.shop_url=l,this.cartCount=0,0==i?this.getSession(p.getCart):this.getCart(this),this.user||store.set("sparkmarketplace_anonymous_session",this.session);var d=store.get("sparkmarketplace_anonymous_session");return d&&d!=this.session&&o.ajax(p.urls.carttransfer,{method:"POST",headers:{"X-Session":this.session,"X-Tenant":this.tenant},data:{guest_session:d},success:function(t){store.remove("sparkmarketplace_anonymous_session"),p.getCart(p)},error:function(e){console.log(e);var o=t.Event("spark:marketplace:error",{err:e});p.cart.trigger(o)}}),o.extend(this.cart,{addToCart:function(t,e,o,n){p.addToCart(t,e,o,n)},showCart:function(t){p.showCart(t)},getPCBPrice:function(t,e,o,n){p.getPCBPrice(t,e,o,n)},addToCartPCB:function(t,e,o,n,r,i,s,a){p.addToCartPCB(t,e,o,n,r,i,s,a)},getPrice:function(t,e,o){p.getPrice(t,e,o)}})},e.marketplace.prototype.getSession=function(e){var n=this;o.ajax(n.urls.session,{method:"GET",headers:{"X-AFC":this.afc},success:function(t){n.session=t.SESSION,e(n)},error:function(e){console.log(e);var o=t.Event("spark:marketplace:error",{err:e});n.cart.trigger(o)}})},e.marketplace.prototype.getCart=function(e){var n=e;o.ajax(n.urls.cartoverview,{method:"GET",headers:{"X-Session":e.session,"X-Tenant":e.tenant},success:function(e){var r=o.parseJSON(e);r.line_items&&n.updateCartCount(n.cleanCountItems(r.line_items));var i=t.Event("spark:marketplace:loaded");n.cart.trigger(i)},error:function(e){console.log(e);var o=t.Event("spark:marketplace:error",{err:e});n.cart.trigger(o)}})},e.marketplace.prototype.addToCart=function(e,n,r,i){var s=this;n=void 0!==n?n:1,r=void 0!==r?r:"PHYSICAL";var a=t.Event("spark:marketplace:loading");this.cart.trigger(a),console.log("adding to cart item: "+e),o.ajax(s.urls.carts,{method:"PUT",headers:{"X-Session":this.session,"X-Tenant":this.tenant},data:{product_id:e,product_type:r,quantity:n,analytics:JSON.stringify(i)},success:function(e){var n=o.parseJSON(e);s.updateCartCount(s.cleanCountItems(n.cart.line_items));var r=t.Event("spark:marketplace:new");s.cart.trigger(r)},error:function(e){console.log(e);var o=t.Event("spark:marketplace:error",{err:e});s.cart.trigger(o)}})},e.marketplace.prototype.addToCartPCB=function(e,n,r,i,s,a,l,c){var u=this;r=void 0!==r?r:1;var g={thumbnail_url:i,name:n},h={sqin:s,board_type_id:a,board_id:e},p=t.Event("spark:marketplace:loading");this.cart.trigger(p),o.ajax(u.urls.pcburl,{method:"PUT",headers:{"X-Session":this.session,"X-Tenant":this.tenant},data:{quantity:r,check:l,data:JSON.stringify(g),pcb_item_data:JSON.stringify(h),analytics:JSON.stringify(c)},success:function(e){var n=o.parseJSON(e);u.updateCartCount(u.cleanCountItems(n.cart.line_items));var r=t.Event("spark:marketplace:new");u.cart.trigger(r)},error:function(e){console.log(e);var o=t.Event("spark:marketplace:error",{err:e});u.cart.trigger(o)}})},e.marketplace.prototype.cleanCountItems=function(t){var e=0;return o(t).each(function(t,o){o.product_type&&"SHIPPING"!=o.product_type&&(e+=o.quantity)}),e},e.marketplace.prototype.updateCartCount=function(e){this.cartCount=e;var o=t.Event("spark:marketplace:updated",{count:e});this.cart.trigger(o)},e.marketplace.prototype.showCart=function(t){this.iframe=o(t),this.getiframeUrl()},e.marketplace.prototype.getiframeUrl=function(){var e=this,n={"X-Session":this.session,"X-Tenant":this.tenant};this.secure_session&&(n["X-Secure-Session"]=this.secure_session),o.ajax(e.urls.managementUrl,{method:"GET",headers:n,success:function(t){e.iframe_url=t,e.setiframe(t)},error:function(o){console.log(o);var n=t.Event("spark:marketplace:error",{err:o});e.cart.trigger(n)}})},e.marketplace.prototype.setiframe=function(t){var e=this;this.iframe.attr("src",t),this.iframe_child=o(this.iframe).seamless({loading:"Loading shopping cart...",spinner:""}),this.user?this.iframe_child.send({message:"sparkMkp_login",csMemberId:this.cs_member_id,coppaAllowed:this.coppa}):this.iframe_child.send({message:"sparkMkp_logout"}),this.iframe_child.receive(function(t){if(console.log(t),t.type)switch(t.type){case"sparkMkp_updateCartCount":console.log("Now there are "+t.numberOfItems+" items in the cart"),e.updateCartCount(t.numberOfItems);break;case"sparkMkp_editingShippingAddress":console.log("user is editing shipping address");break;case"sparkMkp_login":console.log("User needs to login! He/She is logged out and probably clicked something that needs a logged in user, like edit shipping address"),signin.construct_box();break;case"sparkMkp_goToShopping":window.location=e.shop_url}})},e.marketplace.prototype.getPCBPrice=function(e,n,r,i){var s=this;o.ajax(s.urls.pcburl,{method:"GET",dataType:"json",headers:{"X-Tenant":this.tenant},data:{sqin:e,board_type_id:n},success:function(t){i(r,t.price)},error:function(e){console.log(e);var o=t.Event("spark:marketplace:error",{err:e});s.cart.trigger(o)}})},e.marketplace.prototype.getPrice=function(e,n,r){var i=this;o.ajax(i.urls.asseturl+"/"+e,{method:"GET",dataType:"json",headers:{"X-Session":this.session,"X-Tenant":this.tenant},success:function(t){r(n,t)},error:function(e){console.log(e);var o=t.Event("spark:marketplace:error",{err:e});i.cart.trigger(o)}})}}(window.Spark=window.Spark||{},t)}).call(e,o(0))},function(t,e){!function(){function t(t,e){var o=t.split("."),n=A;o[0]in n||!n.execScript||n.execScript("var "+o[0]);for(var r;o.length&&(r=o.shift());)o.length||void 0===e?n=n[r]?n[r]:n[r]={}:n[r]=e}function e(t,e){function o(){}o.prototype=e.prototype,t.l=e.prototype,t.prototype=new o,t.prototype.constructor=t,t.k=function(t,o,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return e.prototype[o].apply(t,r)}}function o(){}function n(t){this.message=t||""}function r(){}function i(){}function s(t){this.message=t||""}function a(){}function l(){}function c(){}function u(t){this.message=t||""}function g(){}function h(){this.c=[]}function p(t){this.message=t||""}function d(t){this.a=[],t instanceof a&&this.d(t)}function f(t){this.e=t,this.d=0}function m(t){this.a=[],t instanceof a&&this.d(t)}function y(t){this.e=t,this.d=0}function v(){this.b={}}function _(){}function b(t){this.a=[],t instanceof a&&this.d(t)}function E(t){this.e=t,this.d=0}function S(t){return null==t?null:t.parent}function k(t,e){null!==t&&(t.color=e)}function T(t){return null==t?null:t.left}function C(t){return null==t?null:t.right}function x(){this.b=null,this.f=0}function w(t,e){if(null!=e){var o=e.right;e.right=o.left,null!=o.left&&(o.left.parent=e),o.parent=e.parent,null==e.parent?t.b=o:e.parent.left==e?e.parent.left=o:e.parent.right=o,o.left=e,e.parent=o}}function B(t,e){if(null!=e){var o=e.left;e.left=o.right,null!=o.right&&(o.right.parent=e),o.parent=e.parent,null==e.parent?t.b=o:e.parent.right==e?e.parent.right=o:e.parent.left=o,o.right=e,e.parent=o}}function I(t){if(null===t)return null;if(null!==t.right)for(var e=t.right;null!==e.left;)e=e.left;else for(e=t.parent;null!==e&&t===e.right;)t=e,e=e.parent;return e}var A=this;t("javascript.util.Iterator",o),o.prototype.hasNext=o.prototype.b,o.prototype.next=o.prototype.c,o.prototype.remove=o.prototype.a,e(n,Error),t("javascript.util.OperationNotSupported",n),n.prototype.name="OperationNotSupported",t("javascript.util.Map",r),e(i,r),t("javascript.util.SortedMap",i),e(s,Error),t("javascript.util.IndexOutOfBoundsException",s),s.prototype.name="IndexOutOfBoundsException",t("javascript.util.Collection",a),e(l,a),t("javascript.util.Set",l),e(c,l),t("javascript.util.SortedSet",c),e(u,Error),t("javascript.util.EmptyStackException",u),u.prototype.name="EmptyStackException",e(g,a),t("javascript.util.List",g),e(h,g),t("javascript.util.Stack",h),h.prototype.push=function(t){return this.c.push(t),t},h.prototype.push=h.prototype.push,h.prototype.d=function(){if(0===this.c.length)throw new u;return this.c.pop()},h.prototype.pop=h.prototype.d,h.prototype.g=function(){if(0===this.c.length)throw new u;return this.c[this.c.length-1]},h.prototype.peek=h.prototype.g,h.prototype.a=function(){return 0===this.c.length},h.prototype.empty=h.prototype.a,h.prototype.f=function(){return this.a()},h.prototype.isEmpty=h.prototype.f,h.prototype.i=function(t){return this.c.indexOf(t)},h.prototype.search=h.prototype.i,h.prototype.b=function(){return this.c.length},h.prototype.size=h.prototype.b,h.prototype.h=function(){for(var t=[],e=0,o=this.c.length;e<o;e++)t.push(this.c[e]);return t},h.prototype.toArray=h.prototype.h,e(p,Error),t("javascript.util.NoSuchElementException",p),p.prototype.name="NoSuchElementException",e(d,c),t("javascript.util.TreeSet",d),d.prototype.g=function(t){for(var e=0,o=this.a.length;e<o;e++)if(0===this.a[e].compareTo(t))return!0;return!1},d.prototype.contains=d.prototype.g,d.prototype.c=function(t){if(this.g(t))return!1;for(var e=0,o=this.a.length;e<o;e++)if(1===this.a[e].compareTo(t))return this.a.splice(e,0,t),!0;return this.a.push(t),!0},d.prototype.add=d.prototype.c,d.prototype.d=function(t){for(t=t.e();t.b();)this.c(t.c());return!0},d.prototype.addAll=d.prototype.d,d.prototype.i=function(){throw new n},d.prototype.remove=d.prototype.i,d.prototype.b=function(){return this.a.length},d.prototype.size=d.prototype.b,d.prototype.f=function(){return 0===this.a.length},d.prototype.isEmpty=d.prototype.f,d.prototype.h=function(){for(var t=[],e=0,o=this.a.length;e<o;e++)t.push(this.a[e]);return t},d.prototype.toArray=d.prototype.h,d.prototype.e=function(){return new f(this)},d.prototype.iterator=d.prototype.e,t("$jscomp.scope.Iterator_",f),f.prototype.c=function(){if(this.d===this.e.b())throw new p;return this.e.a[this.d++]},f.prototype.next=f.prototype.c,f.prototype.b=function(){return this.d<this.e.b()},f.prototype.hasNext=f.prototype.b,f.prototype.a=function(){throw new n},f.prototype.remove=f.prototype.a,e(m,g),t("javascript.util.ArrayList",m),m.prototype.c=function(t){return this.a.push(t),!0},m.prototype.add=m.prototype.c,m.prototype.d=function(t){for(t=t.e();t.b();)this.c(t.c());return!0},m.prototype.addAll=m.prototype.d,m.prototype.j=function(t,e){var o=this.a[t];return this.a[t]=e,o},m.prototype.set=m.prototype.j,m.prototype.e=function(){return new y(this)},m.prototype.iterator=m.prototype.e,m.prototype.g=function(t){if(0>t||t>=this.b())throw new s;return this.a[t]},m.prototype.get=m.prototype.g,m.prototype.f=function(){return 0===this.a.length},m.prototype.isEmpty=m.prototype.f,m.prototype.b=function(){return this.a.length},m.prototype.size=m.prototype.b,m.prototype.h=function(){for(var t=[],e=0,o=this.a.length;e<o;e++)t.push(this.a[e]);return t},m.prototype.toArray=m.prototype.h,m.prototype.i=function(t){for(var e=!1,o=0,n=this.a.length;o<n;o++)if(this.a[o]===t){this.a.splice(o,1),e=!0;break}return e},m.prototype.remove=m.prototype.i,t("$jscomp.scope.Iterator_$1",y),y.prototype.c=function(){if(this.d===this.e.b())throw new p;return this.e.g(this.d++)},y.prototype.next=y.prototype.c,y.prototype.b=function(){return this.d<this.e.b()},y.prototype.hasNext=y.prototype.b,y.prototype.a=function(){throw new n},y.prototype.remove=y.prototype.a,e(v,r),t("javascript.util.HashMap",v),v.prototype.a=function(t){return this.b[t]||null},v.prototype.get=v.prototype.a,v.prototype.d=function(t,e){return this.b[t]=e},v.prototype.put=v.prototype.d,v.prototype.c=function(){var t,e=new m;for(t in this.b)this.b.hasOwnProperty(t)&&e.c(this.b[t]);return e},v.prototype.values=v.prototype.c,v.prototype.e=function(){return this.c().b()},v.prototype.size=v.prototype.e,t("javascript.util.Arrays",_),_.sort=function(){var t,e,o,n=arguments[0];if(1===arguments.length)n.sort();else if(2===arguments.length)e=arguments[1],o=function(t,o){return e.compare(t,o)},n.sort(o);else if(3===arguments.length)for(t=n.slice(arguments[1],arguments[2]),t.sort(),o=n.slice(0,arguments[1]).concat(t,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<o.length;t++)n.push(o[t]);else if(4===arguments.length)for(t=n.slice(arguments[1],arguments[2]),e=arguments[3],o=function(t,o){return e.compare(t,o)},t.sort(o),o=n.slice(0,arguments[1]).concat(t,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<o.length;t++)n.push(o[t])},_.asList=function(t){for(var e=new m,o=0,n=t.length;o<n;o++)e.c(t[o]);return e},e(b,l),t("javascript.util.HashSet",b),b.prototype.g=function(t){for(var e=0,o=this.a.length;e<o;e++)if(this.a[e]===t)return!0;return!1},b.prototype.contains=b.prototype.g,b.prototype.c=function(t){return!this.g(t)&&(this.a.push(t),!0)},b.prototype.add=b.prototype.c,b.prototype.d=function(t){for(t=t.e();t.b();)this.c(t.c());return!0},b.prototype.addAll=b.prototype.d,b.prototype.i=function(){throw new n},b.prototype.remove=b.prototype.i,b.prototype.b=function(){return this.a.length},b.prototype.size=b.prototype.b,b.prototype.f=function(){return 0===this.a.length},b.prototype.isEmpty=b.prototype.f,b.prototype.h=function(){for(var t=[],e=0,o=this.a.length;e<o;e++)t.push(this.a[e]);return t},b.prototype.toArray=b.prototype.h,b.prototype.e=function(){return new E(this)},b.prototype.iterator=b.prototype.e,t("$jscomp.scope.Iterator_$2",E),E.prototype.c=function(){if(this.d===this.e.b())throw new p;return this.e.a[this.d++]},E.prototype.next=E.prototype.c,E.prototype.b=function(){return this.d<this.e.b()},E.prototype.hasNext=E.prototype.b,E.prototype.a=function(){throw new n},E.prototype.remove=E.prototype.a,e(x,i),t("javascript.util.TreeMap",x),x.prototype.a=function(t){for(var e=this.b;null!==e;){var o=t.compareTo(e.key);if(0>o)e=e.left;else{if(!(0<o))return e.value;e=e.right}}return null},x.prototype.get=x.prototype.a,x.prototype.d=function(t,e){if(null===this.b)return this.b={key:t,value:e,left:null,right:null,parent:null,color:0},this.f=1,null;var o,n,r=this.b;do{if(o=r,0>(n=t.compareTo(r.key)))r=r.left;else{if(!(0<n))return o=r.value,r.value=e,o;r=r.right}}while(null!==r);for(r={key:t,left:null,right:null,value:e,parent:o,color:0},0>n?o.left=r:o.right=r,r.color=1;null!=r&&r!=this.b&&1==r.parent.color;)S(r)==T(S(S(r)))?(o=C(S(S(r))),1==(null==o?0:o.color)?(k(S(r),0),k(o,0),k(S(S(r)),1),r=S(S(r))):(r==C(S(r))&&(r=S(r),w(this,r)),k(S(r),0),k(S(S(r)),1),B(this,S(S(r))))):(o=T(S(S(r))),1==(null==o?0:o.color)?(k(S(r),0),k(o,0),k(S(S(r)),1),r=S(S(r))):(r==T(S(r))&&(r=S(r),B(this,r)),k(S(r),0),k(S(S(r)),1),w(this,S(S(r)))));return this.b.color=0,this.f++,null},x.prototype.put=x.prototype.d,x.prototype.c=function(){var t,e=new m;if(null!=(t=this.b))for(;null!=t.left;)t=t.left;if(null!==t)for(e.c(t.value);null!==(t=I(t));)e.c(t.value);return e},x.prototype.values=x.prototype.c,x.prototype.e=function(){return this.f},x.prototype.size=x.prototype.e}()},function(t,e,o){var n,r,i;!function(s){"use strict";r=[o(0),o(5)],n=s,void 0!==(i="function"==typeof n?n.apply(e,r):n)&&(t.exports=i)}(function(t){"use strict";function e(e){var o="dragover"===e;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var r=n.dataTransfer;r&&-1!==t.inArray("Files",r.types)&&!1!==this._trigger(e,t.Event(e,{delegatedEvent:n}))&&(n.preventDefault(),o&&(r.dropEffect="copy"))}}t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,o){return e=this.messages[e]||e.toString(),o&&t.each(o,function(t,o){e=e.replace("{"+t+"}",o)}),e},formData:function(t){return t.serializeArray()},add:function(e,o){if(e.isDefaultPrevented())return!1;(o.autoUpload||!1!==o.autoUpload&&t(this).fileupload("option","autoUpload"))&&o.process().done(function(){o.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,o){var n=t-this.timestamp;return(!this.bitrate||!o||n>o)&&(this.bitrate=(e-this.loaded)*(1e3/n)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var o;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(o=[],t.each(e.formData,function(t,e){o.push({name:t,value:e})}),o):[]},_getTotal:function(e){var o=0;return t.each(e,function(t,e){o+=e.size||1}),o},_initProgressObject:function(e){var o={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,o):e._progress=o},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,o){if(e.lengthComputable){var n,r=Date.now?Date.now():(new Date).getTime();if(o._time&&o.progressInterval&&r-o._time<o.progressInterval&&e.loaded!==e.total)return;o._time=r,n=Math.floor(e.loaded/e.total*(o.chunkSize||o._progress.total))+(o.uploadedBytes||0),this._progress.loaded+=n-o._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,o.bitrateInterval),o._progress.loaded=o.loaded=n,o._progress.bitrate=o.bitrate=o._bitrateTimer.getBitrate(r,n,o.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),o),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var o=this,n=e.xhr?e.xhr():t.ajaxSettings.xhr();n.upload&&(t(n.upload).bind("progress",function(t){var n=t.originalEvent;t.lengthComputable=n.lengthComputable,t.loaded=n.loaded,t.total=n.total,o._onProgress(t,e)}),e.xhr=function(){return n})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var o,n=this,r=e.files[0],i=e.multipart||!t.support.xhrFileUpload,s="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),i&&!e.blob&&this._isInstanceOf("File",r)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),i?t.support.xhrFormDataFileUpload&&(e.postMessage?(o=this._getFormData(e),e.blob?o.push({name:s,value:e.blob}):t.each(e.files,function(n,r){o.push({name:"array"===t.type(e.paramName)&&e.paramName[n]||s,value:r})})):(n._isInstanceOf("FormData",e.formData)?o=e.formData:(o=new FormData,t.each(this._getFormData(e),function(t,e){o.append(e.name,e.value)})),e.blob?o.append(s,e.blob,r.name):t.each(e.files,function(r,i){(n._isInstanceOf("File",i)||n._isInstanceOf("Blob",i))&&o.append("array"===t.type(e.paramName)&&e.paramName[r]||s,i,i.uploadName||i.name)})),e.data=o):(e.contentType=r.type||"application/octet-stream",e.data=e.blob||r),e.blob=null},_initIframeSettings:function(e){var o=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&o&&o!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var o=t(e.fileInput),n=e.paramName;return n?t.isArray(n)||(n=[n]):(n=[],o.each(function(){for(var e=t(this),o=e.prop("name")||"files[]",r=(e.prop("files")||[1]).length;r;)n.push(o),r-=1}),n.length||(n=[o.prop("name")||"files[]"])),n},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var o=t.extend({},this.options,e);return this._initFormSettings(o),this._initDataSettings(o),o},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,o,n){var r=t.Deferred(),i=r.promise();return o=o||this.options.context||i,!0===e?r.resolveWith(o,n):!1===e&&r.rejectWith(o,n),i.abort=r.promise,this._enhancePromise(i)},_addConvenienceMethods:function(e,o){var n=this,r=function(e){return t.Deferred().resolveWith(n,e).promise()};o.process=function(e,i){return(e||i)&&(o._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){return o.errorThrown?t.Deferred().rejectWith(n,[o]).promise():r(arguments)}).pipe(e,i)),this._processQueue||r([this])},o.submit=function(){return"pending"!==this.state()&&(o.jqXHR=this.jqXHR=!1!==n._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)&&n._onSend(e,this)),this.jqXHR||n._getXHRPromise()},o.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},o.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},o.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},o.progress=function(){return this._progress},o.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),o=e&&e.split("-"),n=o&&o.length>1&&parseInt(o[1],10);return n&&n+1},_chunkedUpload:function(e,o){e.uploadedBytes=e.uploadedBytes||0;var n,r,i=this,s=e.files[0],a=s.size,l=e.uploadedBytes,c=e.maxChunkSize||a,u=this._blobSlice,g=t.Deferred(),h=g.promise();return!(!(this._isXHRUpload(e)&&u&&(l||c<a))||e.data)&&(!!o||(l>=a?(s.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",s.error])):(r=function(){var o=t.extend({},e),h=o._progress.loaded;o.blob=u.call(s,l,l+c,s.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+l+"-"+(l+o.chunkSize-1)+"/"+a,i._initXHRData(o),i._initProgressListener(o),n=(!1!==i._trigger("chunksend",null,o)&&t.ajax(o)||i._getXHRPromise(!1,o.context)).done(function(n,s,c){l=i._getUploadedBytes(c)||l+o.chunkSize,h+o.chunkSize-o._progress.loaded&&i._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-o.uploadedBytes,total:l-o.uploadedBytes}),o),e.uploadedBytes=o.uploadedBytes=l,o.result=n,o.textStatus=s,o.jqXHR=c,i._trigger("chunkdone",null,o),i._trigger("chunkalways",null,o),l<a?r():g.resolveWith(o.context,[n,s,c])}).fail(function(t,e,n){o.jqXHR=t,o.textStatus=e,o.errorThrown=n,i._trigger("chunkfail",null,o),i._trigger("chunkalways",null,o),g.rejectWith(o.context,[t,e,n])})},this._enhancePromise(h),h.abort=function(){return n.abort()},r(),h)))},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,o,n,r){var i=r._progress.total,s=r._response;r._progress.loaded<i&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:i,total:i}),r),s.result=r.result=e,s.textStatus=r.textStatus=o,s.jqXHR=r.jqXHR=n,this._trigger("done",null,r)},_onFail:function(t,e,o,n){var r=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),r.jqXHR=n.jqXHR=t,r.textStatus=n.textStatus=e,r.errorThrown=n.errorThrown=o,this._trigger("fail",null,n)},_onAlways:function(t,e,o,n){this._trigger("always",null,n)},_onSend:function(e,o){o.submit||this._addConvenienceMethods(e,o);var n,r,i,s,a=this,l=a._getAJAXSettings(o),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((r||!1===a._trigger("send",t.Event("send",{delegatedEvent:e}),l))&&a._getXHRPromise(!1,l.context,r)||a._chunkedUpload(l)||t.ajax(l)).done(function(t,e,o){a._onDone(t,e,o,l)}).fail(function(t,e,o){a._onFail(t,e,o,l)}).always(function(t,e,o){if(a._onAlways(t,e,o,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(i=t.Deferred(),this._slots.push(i),s=i.pipe(c)):(this._sequence=this._sequence.pipe(c,c),s=this._sequence),s.abort=function(){return r=[void 0,"abort","abort"],n?n.abort():(i&&i.rejectWith(l.context,r),c())},this._enhancePromise(s)):c()},_onAdd:function(e,o){var n,r,i,s,a=this,l=!0,c=t.extend({},this.options,o),u=o.files,g=u.length,h=c.limitMultiFileUploads,p=c.limitMultiFileUploadSize,d=c.limitMultiFileUploadSizeOverhead,f=0,m=this._getParamName(c),y=0;if(!p||g&&void 0!==u[0].size||(p=void 0),(c.singleFileUploads||h||p)&&this._isXHRUpload(c))if(c.singleFileUploads||p||!h)if(!c.singleFileUploads&&p)for(i=[],n=[],s=0;s<g;s+=1)f+=u[s].size+d,(s+1===g||f+u[s+1].size+d>p||h&&s+1-y>=h)&&(i.push(u.slice(y,s+1)),r=m.slice(y,s+1),r.length||(r=m),n.push(r),y=s+1,f=0);else n=m;else for(i=[],n=[],s=0;s<g;s+=h)i.push(u.slice(s,s+h)),r=m.slice(s,s+h),r.length||(r=m),n.push(r);else i=[u],n=[m];return o.originalFiles=u,t.each(i||u,function(r,s){var c=t.extend({},o);return c.files=i?s:[s],c.paramName=n[r],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(e,c),l=a._trigger("add",t.Event("add",{delegatedEvent:e}),c)}),l},_replaceFileInput:function(e){var o=e.fileInput,n=o.clone(!0);e.fileInputClone=n,t("<form></form>").append(n)[0].reset(),o.after(n).detach(),t.cleanData(o.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===o[0]?n[0]:e}),o[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,o){var n,r=this,i=t.Deferred(),s=function(t){t&&!t.entry&&(t.entry=e),i.resolve([t])},a=function(t){r._handleFileTreeEntries(t,o+e.name+"/").done(function(t){i.resolve(t)}).fail(s)},l=function(){n.readEntries(function(t){t.length?(c=c.concat(t),l()):a(c)},s)},c=[];return o=o||"",e.isFile?e._file?(e._file.relativePath=o,i.resolve(e._file)):e.file(function(t){t.relativePath=o,i.resolve(t)},s):e.isDirectory?(n=e.createReader(),l()):i.resolve([]),i.promise()},_handleFileTreeEntries:function(e,o){var n=this;return t.when.apply(t,t.map(e,function(t){return n._handleFileTreeEntry(t,o)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var o=e.items;return o&&o.length&&(o[0].webkitGetAsEntry||o[0].getAsEntry)?this._handleFileTreeEntries(t.map(o,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var o,n,r=e.prop("webkitEntries")||e.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(o=t.makeArray(e.prop("files")),o.length)void 0===o[0].name&&o[0].fileName&&t.each(o,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(!(n=e.prop("value")))return t.Deferred().resolve([]).promise();o=[{name:n.replace(/^.*\\/,"")}]}return t.Deferred().resolve(o).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var o=this,n={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(n.fileInput).always(function(r){n.files=r,o.options.replaceFileInput&&o._replaceFileInput(n),!1!==o._trigger("change",t.Event("change",{delegatedEvent:e}),n)&&o._onAdd(e,n)})},_onPaste:function(e){var o=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,n={files:[]};o&&o.length&&(t.each(o,function(t,e){var o=e.getAsFile&&e.getAsFile();o&&n.files.push(o)}),!1!==this._trigger("paste",t.Event("paste",{delegatedEvent:e}),n)&&this._onAdd(e,n))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var o=this,n=e.dataTransfer,r={};n&&n.files&&n.files.length&&(e.preventDefault(),this._getDroppedFiles(n).always(function(n){r.files=n,!1!==o._trigger("drop",t.Event("drop",{delegatedEvent:e}),r)&&o._onAdd(e,r)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,o){var n=-1!==t.inArray(e,this._specialOptions);n&&this._destroyEventHandlers(),this._super(e,o),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),o=e.pop();return e.shift(),new RegExp(e.join("/"),o)},_isRegExpOption:function(e,o){return"url"!==e&&"string"===t.type(o)&&/^\/.*\/[igm]{0,3}$/.test(o)},_initDataAttributes:function(){var e=this,o=this.options,n=t(this.element[0].cloneNode(!1)),r=n.data();n.remove(),t.each(r,function(t,r){var i="data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();n.attr(i)&&(e._isRegExpOption(t,r)&&(r=e._getRegExp(r)),o[t]=r)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var o=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,o._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var o,n,r=this,i=t.Deferred(),s=i.promise();return s.abort=function(){return n=!0,o?o.abort():(i.reject(null,"abort","abort"),s)},this._getFileInputFiles(e.fileInput).always(function(t){if(!n){if(!t.length)return void i.reject();e.files=t,o=r._onSend(null,e),o.then(function(t,e,o){i.resolve(t,e,o)},function(t,e,o){i.reject(t,e,o)})}}),this._enhancePromise(s)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})})},function(t,e,o){var n,r,i;/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
!function(s){"use strict";r=[o(0)],n=s,void 0!==(i="function"==typeof n?n.apply(e,r):n)&&(t.exports=i)}(function(t){"use strict";function e(e){var o=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(o))}function o(e){var o=e.target,n=t(o);if(!n.is("[type=submit],[type=image]")){var r=n.closest("[type=submit]");if(0===r.length)return;o=r[0]}var i=this;if(i.clk=o,"image"==o.type)if(void 0!==e.offsetX)i.clk_x=e.offsetX,i.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var s=n.offset();i.clk_x=e.pageX-s.left,i.clk_y=e.pageY-s.top}else i.clk_x=e.pageX-o.offsetLeft,i.clk_y=e.pageY-o.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var r={};r.fileapi=void 0!==t("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var i=!!t.fn.prop;t.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function o(o){var n,r,i=t.param(o,e.traditional).split("&"),s=i.length,a=[];for(n=0;n<s;n++)i[n]=i[n].replace(/\+/g," "),r=i[n].split("="),a.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return a}function s(o){function r(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){n("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(o){n("cannot get iframe.contentDocument: "+o),e=t.document}return e}function s(){function e(){try{var t=r(y).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(t){n("Server abort: ",t," (",t.name,")"),l(x),S&&clearTimeout(S),S=void 0}}var o=u.attr2("target"),i=u.attr2("action"),s=u.attr("enctype")||u.attr("encoding")||"multipart/form-data";k.setAttribute("target",f),a&&!/post/i.test(a)||k.setAttribute("method","POST"),i!=h.url&&k.setAttribute("action",h.url),h.skipEncodingOverride||a&&!/post/i.test(a)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),h.timeout&&(S=setTimeout(function(){E=!0,l(C)},h.timeout));var c=[];try{if(h.extraData)for(var g in h.extraData)h.extraData.hasOwnProperty(g)&&(t.isPlainObject(h.extraData[g])&&h.extraData[g].hasOwnProperty("name")&&h.extraData[g].hasOwnProperty("value")?c.push(t('<input type="hidden" name="'+h.extraData[g].name+'">').val(h.extraData[g].value).appendTo(k)[0]):c.push(t('<input type="hidden" name="'+g+'">').val(h.extraData[g]).appendTo(k)[0]));h.iframeTarget||m.appendTo("body"),y.attachEvent?y.attachEvent("onload",l):y.addEventListener("load",l,!1),setTimeout(e,15);try{k.submit()}catch(t){var p=document.createElement("form").submit;p.apply(k)}}finally{k.setAttribute("action",i),k.setAttribute("enctype",s),o?k.setAttribute("target",o):u.removeAttr("target"),t(c).remove()}}function l(e){if(!v.aborted&&!N){if(A=r(y),A||(n("cannot access response document"),e=x),e===C&&v)return v.abort("timeout"),void T.reject(v,"timeout");if(e==x&&v)return v.abort("server abort"),void T.reject(v,"error","server abort");if(A&&A.location.href!=h.iframeSrc||E){y.detachEvent?y.detachEvent("onload",l):y.removeEventListener("load",l,!1);var o,i="success";try{if(E)throw"timeout";var s="xml"==h.dataType||A.XMLDocument||t.isXMLDoc(A);if(n("isXml="+s),!s&&window.opera&&(null===A.body||!A.body.innerHTML)&&--L)return n("requeing onLoad callback, DOM not available"),void setTimeout(l,250);var a=A.body?A.body:A.documentElement;v.responseText=a?a.innerHTML:null,v.responseXML=A.XMLDocument?A.XMLDocument:A,s&&(h.dataType="xml"),v.getResponseHeader=function(t){return{"content-type":h.dataType}[t.toLowerCase()]},a&&(v.status=Number(a.getAttribute("status"))||v.status,v.statusText=a.getAttribute("statusText")||v.statusText);var c=(h.dataType||"").toLowerCase(),u=/(json|script|text)/.test(c);if(u||h.textarea){var g=A.getElementsByTagName("textarea")[0];if(g)v.responseText=g.value,v.status=Number(g.getAttribute("status"))||v.status,v.statusText=g.getAttribute("statusText")||v.statusText;else if(u){var d=A.getElementsByTagName("pre")[0],f=A.getElementsByTagName("body")[0];d?v.responseText=d.textContent?d.textContent:d.innerText:f&&(v.responseText=f.textContent?f.textContent:f.innerText)}}else"xml"==c&&!v.responseXML&&v.responseText&&(v.responseXML=R(v.responseText));try{I=O(v,c,h)}catch(t){i="parsererror",v.error=o=t||i}}catch(t){n("error caught: ",t),i="error",v.error=o=t||i}v.aborted&&(n("upload aborted"),i=null),v.status&&(i=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===i?(h.success&&h.success.call(h.context,I,"success",v),T.resolve(v.responseText,"success",v),p&&t.event.trigger("ajaxSuccess",[v,h])):i&&(void 0===o&&(o=v.statusText),h.error&&h.error.call(h.context,v,i,o),T.reject(v,"error",o),p&&t.event.trigger("ajaxError",[v,h,o])),p&&t.event.trigger("ajaxComplete",[v,h]),p&&!--t.active&&t.event.trigger("ajaxStop"),h.complete&&h.complete.call(h.context,v,i),N=!0,h.timeout&&clearTimeout(S),setTimeout(function(){h.iframeTarget?m.attr("src",h.iframeSrc):m.remove(),v.responseXML=null},100)}}}var c,g,h,p,f,m,y,v,_,b,E,S,k=u[0],T=t.Deferred();if(T.abort=function(t){v.abort(t)},o)for(g=0;g<d.length;g++)c=t(d[g]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(h=t.extend(!0,{},t.ajaxSettings,e),h.context=h.context||h,f="jqFormIO"+(new Date).getTime(),h.iframeTarget?(m=t(h.iframeTarget),b=m.attr2("name"),b?f=b:m.attr2("name",f)):(m=t('<iframe name="'+f+'" src="'+h.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),y=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var o="timeout"===e?"timeout":"aborted";n("aborting upload... "+o),this.aborted=1;try{y.contentWindow.document.execCommand&&y.contentWindow.document.execCommand("Stop")}catch(t){}m.attr("src",h.iframeSrc),v.error=o,h.error&&h.error.call(h.context,v,o,e),p&&t.event.trigger("ajaxError",[v,h,o]),h.complete&&h.complete.call(h.context,v,o)}},p=h.global,p&&0==t.active++&&t.event.trigger("ajaxStart"),p&&t.event.trigger("ajaxSend",[v,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,v,h))return h.global&&t.active--,T.reject(),T;if(v.aborted)return T.reject(),T;(_=k.clk)&&(b=_.name)&&!_.disabled&&(h.extraData=h.extraData||{},h.extraData[b]=_.value,"image"==_.type&&(h.extraData[b+".x"]=k.clk_x,h.extraData[b+".y"]=k.clk_y));var C=1,x=2,w=t('meta[name="csrf-token"]').attr("content");w||document.cookie.split("; ").map(function(t){var e=t.split("=");"csrf-token"===e[0]&&(w=e[1])});var B=t("meta[name=csrf-param]").attr("content");B&&w&&(h.extraData=h.extraData||{},h.extraData[B]=w),h.forceSync?s():setTimeout(s,10);var I,A,N,L=50,R=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},D=t.parseJSON||function(t){return window.eval("("+t+")")},O=function(e,o,n){var r=e.getResponseHeader("content-type")||"",i="xml"===o||!o&&r.indexOf("xml")>=0,s=i?e.responseXML:e.responseText;return i&&"parsererror"===s.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(s=n.dataFilter(s,o)),"string"==typeof s&&("json"===o||!o&&r.indexOf("json")>=0?s=D(s):("script"===o||!o&&r.indexOf("javascript")>=0)&&t.globalEval(s)),s};return T}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var a,l,c,u=this;"function"==typeof e?e={success:e}:void 0===e&&(e={}),a=e.type||this.attr2("method"),l=e.url||this.attr2("action"),c="string"==typeof l?t.trim(l):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:c,success:t.ajaxSettings.success,type:a||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var g={};if(this.trigger("form-pre-serialize",[this,e,g]),g.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&!1===e.beforeSerialize(this,e))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=e.traditional;void 0===h&&(h=t.ajaxSettings.traditional);var p,d=[],f=this.formToArray(e.semantic,d);if(e.data&&(e.extraData=e.data,p=t.param(e.data,h)),e.beforeSubmit&&!1===e.beforeSubmit(f,this,e))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,e,g]),g.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=t.param(f,h);p&&(m=m?m+"&"+p:p),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+m,e.data=null):e.data=m;var y=[];if(e.resetForm&&y.push(function(){u.resetForm()}),e.clearForm&&y.push(function(){u.clearForm(e.includeHidden)}),!e.dataType&&e.target){var v=e.success||function(){};y.push(function(o){var n=e.replaceTarget?"replaceWith":"html";t(e.target)[n](o).each(v,arguments)})}else e.success&&y.push(e.success);if(e.success=function(t,o,n){for(var r=e.context||this,i=0,s=y.length;i<s;i++)y[i].apply(r,[t,o,n||u,u])},e.error){var _=e.error;e.error=function(t,o,n){var r=e.context||this;_.apply(r,[t,o,n,u])}}if(e.complete){var b=e.complete;e.complete=function(t,o){var n=e.context||this;b.apply(n,[t,o,u])}}var E=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),S=E.length>0,k="multipart/form-data",T=u.attr("enctype")==k||u.attr("encoding")==k,C=r.fileapi&&r.formdata;n("fileAPI :"+C);var x,w=(S||T)&&!C;!1!==e.iframe&&(e.iframe||w)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){x=s(f)}):x=s(f):x=(S||T)&&C?function(n){for(var r=new FormData,i=0;i<n.length;i++)r.append(n[i].name,n[i].value);if(e.extraData){var s=o(e.extraData);for(i=0;i<s.length;i++)s[i]&&r.append(s[i][0],s[i][1])}e.data=null;var l=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:a||"POST"});e.uploadProgress&&(l.xhr=function(){var o=t.ajaxSettings.xhr();return o.upload&&o.upload.addEventListener("progress",function(t){var o=0,n=t.loaded||t.position,r=t.total;t.lengthComputable&&(o=Math.ceil(n/r*100)),e.uploadProgress(t,n,r,o)},!1),o}),l.data=null;var c=l.beforeSend;return l.beforeSend=function(t,o){e.formData?o.data=e.formData:o.data=r,c&&c.call(this,t,o)},t.ajax(l)}(f):t.ajax(e),u.removeData("jqxhr").data("jqxhr",x);for(var B=0;B<d.length;B++)d[B]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&t.isFunction(t.fn.on),!r.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!t.isReady&&i.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(i.s,i.c).ajaxForm(r)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return r.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,o).on("submit.form-plugin",this.selector,r,e).on("click.form-plugin",this.selector,r,o),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,e).bind("click.form-plugin",r,o)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,o){var n=[];if(0===this.length)return n;var i,s=this[0],a=this.attr("id"),l=e?s.getElementsByTagName("*"):s.elements;if(l&&!/MSIE [678]/.test(navigator.userAgent)&&(l=t(l).get()),a&&(i=t(':input[form="'+a+'"]').get(),i.length&&(l=(l||[]).concat(i))),!l||!l.length)return n;var c,u,g,h,p,d,f;for(c=0,d=l.length;c<d;c++)if(p=l[c],(g=p.name)&&!p.disabled)if(e&&s.clk&&"image"==p.type)s.clk==p&&(n.push({name:g,value:t(p).val(),type:p.type}),n.push({name:g+".x",value:s.clk_x},{name:g+".y",value:s.clk_y}));else if((h=t.fieldValue(p,!0))&&h.constructor==Array)for(o&&o.push(p),u=0,f=h.length;u<f;u++)n.push({name:g,value:h[u]});else if(r.fileapi&&"file"==p.type){o&&o.push(p);var m=p.files;if(m.length)for(u=0;u<m.length;u++)n.push({name:g,value:m[u],type:p.type});else n.push({name:g,value:"",type:p.type})}else null!==h&&void 0!==h&&(o&&o.push(p),n.push({name:g,value:h,type:p.type,required:p.required}));if(!e&&s.clk){var y=t(s.clk),v=y[0];g=v.name,g&&!v.disabled&&"image"==v.type&&(n.push({name:g,value:y.val()}),n.push({name:g+".x",value:s.clk_x},{name:g+".y",value:s.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var o=[];return this.each(function(){var n=this.name;if(n){var r=t.fieldValue(this,e);if(r&&r.constructor==Array)for(var i=0,s=r.length;i<s;i++)o.push({name:n,value:r[i]});else null!==r&&void 0!==r&&o.push({name:this.name,value:r})}}),t.param(o)},t.fn.fieldValue=function(e){for(var o=[],n=0,r=this.length;n<r;n++){var i=this[n],s=t.fieldValue(i,e);null===s||void 0===s||s.constructor==Array&&!s.length||(s.constructor==Array?t.merge(o,s):o.push(s))}return o},t.fieldValue=function(e,o){var n=e.name,r=e.type,i=e.tagName.toLowerCase();if(void 0===o&&(o=!0),o&&(!n||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==i&&-1==e.selectedIndex))return null;if("select"==i){var s=e.selectedIndex;if(s<0)return null;for(var a=[],l=e.options,c="select-one"==r,u=c?s+1:l.length,g=c?s:0;g<u;g++){var h=l[g];if(h.selected){var p=h.value;if(p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return p;a.push(p)}}return a}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var o=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,r=this.tagName.toLowerCase();o.test(n)||"textarea"==r?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var o=this.type;if("checkbox"==o||"radio"==o)this.checked=e;else if("option"==this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1})},function(t,e,o){var n,r,i;!function(s){"use strict";r=[o(0)],n=s,void 0!==(i="function"==typeof n?n.apply(e,r):n)&&(t.exports=i)}(function(t){"use strict";var e=0;t.ajaxTransport("iframe",function(o){if(o.async){var n,r,i,s=o.initialIframeSrc||"javascript:false;";return{send:function(a,l){n=t('<form style="display:none;"></form>'),n.attr("accept-charset",o.formAcceptCharset),i=/\?/.test(o.url)?"&":"?","DELETE"===o.type?(o.url=o.url+i+"_method=DELETE",o.type="POST"):"PUT"===o.type?(o.url=o.url+i+"_method=PUT",o.type="POST"):"PATCH"===o.type&&(o.url=o.url+i+"_method=PATCH",o.type="POST"),e+=1,r=t('<iframe src="'+s+'" name="iframe-transport-'+e+'"></iframe>').bind("load",function(){var e,i=t.isArray(o.paramName)?o.paramName:[o.paramName];r.unbind("load").bind("load",function(){var e;try{if(e=r.contents(),!e.length||!e[0].firstChild)throw new Error}catch(t){e=void 0}l(200,"success",{iframe:e}),t('<iframe src="'+s+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",r.prop("name")).prop("action",o.url).prop("method",o.type),o.formData&&t.each(o.formData,function(e,o){t('<input type="hidden"/>').prop("name",o.name).val(o.value).appendTo(n)}),o.fileInput&&o.fileInput.length&&"POST"===o.type&&(e=o.fileInput.clone(),o.fileInput.after(function(t){return e[t]}),o.paramName&&o.fileInput.each(function(e){t(this).prop("name",i[e]||o.paramName)}),n.append(o.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),o.fileInput.removeAttr("form")),n.submit(),e&&e.length&&o.fileInput.each(function(o,n){var r=t(e[o]);t(n).prop("name",r.prop("name")).attr("form",r.attr("form")),r.replaceWith(n)})}),n.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",s),n&&n.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe xml":function(e){var o=e&&e[0];return o&&t.isXMLDoc(o)?o:t.parseXML(o.XMLDocument&&o.XMLDocument.xml||t(o.body).html())},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})})},function(t,e,o){var n,r,i;/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.12
 *
 * Requires: jQuery 1.2.2+
 */
!function(s){r=[o(0)],n=s,void 0!==(i="function"==typeof n?n.apply(e,r):n)&&(t.exports=i)}(function(t){function e(e){var s=e||window.event,a=l.call(arguments,1),c=0,g=0,h=0,p=0,d=0,f=0;if(e=t.event.fix(s),e.type="mousewheel","detail"in s&&(h=-1*s.detail),"wheelDelta"in s&&(h=s.wheelDelta),"wheelDeltaY"in s&&(h=s.wheelDeltaY),"wheelDeltaX"in s&&(g=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(g=-1*h,h=0),c=0===h?g:h,"deltaY"in s&&(h=-1*s.deltaY,c=h),"deltaX"in s&&(g=s.deltaX,0===h&&(c=-1*g)),0!==h||0!==g){if(1===s.deltaMode){var m=t.data(this,"mousewheel-line-height");c*=m,h*=m,g*=m}else if(2===s.deltaMode){var y=t.data(this,"mousewheel-page-height");c*=y,h*=y,g*=y}if(p=Math.max(Math.abs(h),Math.abs(g)),(!i||i>p)&&(i=p,n(s,p)&&(i/=40)),n(s,p)&&(c/=40,g/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/i),g=Math[g>=1?"floor":"ceil"](g/i),h=Math[h>=1?"floor":"ceil"](h/i),u.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();d=e.clientX-v.left,f=e.clientY-v.top}return e.deltaX=g,e.deltaY=h,e.deltaFactor=i,e.offsetX=d,e.offsetY=f,e.deltaMode=0,a.unshift(e,c,g,h),r&&clearTimeout(r),r=setTimeout(o,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function o(){i=null}function n(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var r,i,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=s.length;c;)t.event.fixHooks[s[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var o=a.length;o;)this.addEventListener(a[--o],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var o=a.length;o;)this.removeEventListener(a[--o],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var o=t(e),n=o["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(o.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})},function(t,e,o){var n,r;!function(i,s){n=[o(0)],void 0!==(r=function(t){return s(i,t)}.apply(e,n))&&(t.exports=r)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function o(t,e){for(var o=t.length;--o;)if(Math.round(+t[o])!==Math.round(+e[o]))return!1;return!0}function n(t){var o={range:!0,animate:!0};return"boolean"==typeof t?o.animate=t:e.extend(o,t),o}function r(t,o,n,r,i,s,a,l,c){"array"===e.type(t)?this.elements=[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:this.elements=[t,o,n,r,i,s,a||0,l||0,c||1]}function i(t,e,o){this.elements=[t,e,o]}function s(t,o){if(!(this instanceof s))return new s(t,o);1!==t.nodeType&&e.error("Panzoom called on non-Element node"),e.contains(a,t)||e.error("Panzoom element must be attached to the document");var n=e.data(t,l);if(n)return n;this.options=o=e.extend({},s.defaults,o),this.elem=t;var r=this.$elem=e(t);this.$set=o.$set&&o.$set.length?o.$set:r,this.$doc=e(t.ownerDocument||a),this.$parent=r.parent(),this.isSVG=p.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=e.cssProps.transform.replace(h,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var i=e(),c=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){c[e]=o[e]||i}),this.enable(),this.scale=this.getMatrix()[0],this._checkPanWhenZoomed(),e.data(t,l,this)}var a=t.document,l="__pz__",c=Array.prototype.slice,u=/trident\/7./i,g=function(){if(u.test(navigator.userAgent))return!1;var t=a.createElement("input");return t.setAttribute("oninput","return"),"function"==typeof t.oninput}(),h=/([A-Z])/g,p=/^http:[\w\.\/]+svg$/,d="(\\-?\\d[\\d\\.e-]*)",f="\\,?\\s*",m=new RegExp("^matrix\\("+d+f+d+f+d+f+d+f+d+f+d+"\\)$");return r.prototype={x:function(t){var e=t instanceof i,o=this.elements,n=t.elements;return e&&3===n.length?new i(o[0]*n[0]+o[1]*n[1]+o[2]*n[2],o[3]*n[0]+o[4]*n[1]+o[5]*n[2],o[6]*n[0]+o[7]*n[1]+o[8]*n[2]):n.length===o.length&&new r(o[0]*n[0]+o[1]*n[3]+o[2]*n[6],o[0]*n[1]+o[1]*n[4]+o[2]*n[7],o[0]*n[2]+o[1]*n[5]+o[2]*n[8],o[3]*n[0]+o[4]*n[3]+o[5]*n[6],o[3]*n[1]+o[4]*n[4]+o[5]*n[7],o[3]*n[2]+o[4]*n[5]+o[5]*n[8],o[6]*n[0]+o[7]*n[3]+o[8]*n[6],o[6]*n[1]+o[7]*n[4]+o[8]*n[7],o[6]*n[2]+o[7]*n[5]+o[8]*n[8])},inverse:function(){var t=1/this.determinant(),e=this.elements;return new r(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},i.prototype.e=r.prototype.e=function(t){return this.elements[t]},s.rmatrix=m,s.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,which:1,increment:.3,exponential:!0,panOnlyWhenZoomed:!1,minScale:.3,maxScale:6,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},s.prototype={constructor:s,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),e.removeData(this.elem,l)},resetDimensions:function(){this.container=this.$parent[0].getBoundingClientRect();var t=this.elem,o=t.getBoundingClientRect(),n=Math.abs(this.scale);this.dimensions={width:o.width,height:o.height,left:e.css(t,"left",!0)||0,top:e.css(t,"top",!0)||0,border:{top:e.css(t,"borderTopWidth",!0)*n||0,bottom:e.css(t,"borderBottomWidth",!0)*n||0,left:e.css(t,"borderLeftWidth",!0)*n||0,right:e.css(t,"borderRightWidth",!0)*n||0},margin:{top:e.css(t,"marginTop",!0)*n||0,left:e.css(t,"marginLeft",!0)*n||0}}},reset:function(t){t=n(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=n(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],n(t))},setTransform:function(t){for(var o=this.$set,n=o.length;n--;)e.style(o[n],"transform",t),this.isSVG&&o[n].setAttribute("transform",t)},getTransform:function(t){var o=this.$set,n=o[0];return t?this.setTransform(t):(t=e.style(n,"transform"),!this.isSVG||t&&"none"!==t||(t=e.attr(n,"transform")||"none")),"none"===t||m.test(t)||this.setTransform(t=e.css(n,"transform")),t||"none"},getMatrix:function(t){var e=m.exec(t||this.getTransform());return e&&e.shift(),e||[1,0,0,1,0,0]},setMatrix:function(t,e){if(!this.disabled){e||(e={}),"string"==typeof t&&(t=this.getMatrix(t));var o=+t[0],n=void 0!==e.contain?e.contain:this.options.contain;if(n){var r=e.dims;r||(this.resetDimensions(),r=this.dimensions);var i=this.container,s=r.width,a=r.height,l=i.width,c=i.height,u=l/s,g=c/a,h=(s-l)/2,p=(a-c)/2;t[4]="invert"===n||"automatic"===n&&u<1.01?Math.max(Math.min(t[4],h),-h):Math.min(Math.max(t[4],h),-h),t[5]="invert"===n||"automatic"===n&&g<1.01?Math.max(Math.min(t[5],p),-p):Math.min(Math.max(t[5],p),-p)}if("skip"!==e.animate&&this.transition(!e.animate),e.range&&this.$zoomRange.val(o),this.options.disableXAxis||this.options.disableYAxis){var d=this.getMatrix();this.options.disableXAxis&&(t[4]=d[4]),this.options.disableYAxis&&(t[5]=d[5])}return this.setTransform("matrix("+t.join(",")+")"),this.scale=o,this._checkPanWhenZoomed(o),e.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var o=t||!this.options.transition?"none":this._transition,n=this.$set,r=n.length;r--;)e.style(n[r],"transition")!==o&&e.style(n[r],"transition",o)},pan:function(t,e,o){if(!this.options.disablePan){o||(o={});var n=o.matrix;n||(n=this.getMatrix()),o.relative&&(t+=+n[4],e+=+n[5]),n[4]=t,n[5]=e,this.setMatrix(n,o),o.silent||this._trigger("pan",n[4],n[5])}},zoom:function(t,o){"object"==typeof t?(o=t,t=null):o||(o={});var n=e.extend({},this.options,o);if(!n.disableZoom){var s=!1,a=n.matrix||this.getMatrix(),l=+a[0];"number"!=typeof t&&(t=n.exponential&&l-n.increment>=1?Math[t?"sqrt":"pow"](l,2):l+n.increment*(t?-1:1),s=!0),t>n.maxScale?t=n.maxScale:t<n.minScale&&(t=n.minScale);var c=n.focal;if(c&&!n.disablePan){this.resetDimensions();var u=n.dims=this.dimensions,g=c.clientX,h=c.clientY;this.isSVG||(g-=u.width/l/2,h-=u.height/l/2);var p=new i(g,h,1),d=new r(a),f=this.parentOffset||this.$parent.offset(),m=new r(1,0,f.left-this.$doc.scrollLeft(),0,1,f.top-this.$doc.scrollTop()),y=d.inverse().x(m.inverse().x(p)),v=t/a[0];d=d.x(new r([v,0,0,v,0,0])),p=m.x(d.x(y)),a[4]=+a[4]+(g-p.e(0)),a[5]=+a[5]+(h-p.e(1))}a[0]=t,a[3]="number"==typeof n.dValue?n.dValue:t,this.setMatrix(a,{animate:"boolean"==typeof n.animate?n.animate:s,range:!n.noSetRange}),n.silent||this._trigger("zoom",a[0],n)}},option:function(t,o){var n;if(!t)return e.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return void 0!==this.options[t]?this.options[t]:null;n={},n[t]=o}else n=t;this._setOptions(n)},_setOptions:function(t){e.each(t,e.proxy(function(t,o){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=o,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=o;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",o);break;case"minScale":this.$zoomRange.attr("min",o);break;case"maxScale":this.$zoomRange.attr("max",o);break;case"rangeStep":this.$zoomRange.attr("step",o);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":o instanceof e&&o.length&&(this.$set=o,this._initStyle(),this._buildTransform())}},this))},_checkPanWhenZoomed:function(t){t||(t=this.getMatrix()[0]);var e=this.options;if(e.panOnlyWhenZoomed){var o=t===e.minScale;e.disablePan!==o&&this.option("disablePan",o)}},_initStyle:function(){var t={"transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var o=this.$parent;o.length&&!e.nodeName(o[0],"body")&&(t={overflow:"hidden"},"static"===o.css("position")&&(t.position="relative"),o.css(t))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this,o=this.options,n=o.eventNamespace,r="touchstart"+n+" mousedown"+n,i="touchend"+n+" click"+n,a={},l=this.$reset,c=this.$zoomRange;if(e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=o["on"+this];e.isFunction(t)&&(a["panzoom"+this.toLowerCase()+n]=t)}),o.disablePan&&o.disableZoom||(a[r]=function(e){var n;("touchstart"===e.type?!(n=e.touches||e.originalEvent.touches)||(1!==n.length||o.disablePan)&&2!==n.length:o.disablePan||e.which!==o.which)||(e.preventDefault(),e.stopPropagation(),t._startMove(e,n))},3===o.which&&(a.contextmenu=!1)),this.$elem.on(a),l.length&&l.on(i,function(e){e.preventDefault(),t.reset()}),c.length&&c.attr({step:o.rangeStep===s.defaults.rangeStep&&c.attr("step")||o.rangeStep,min:o.minScale,max:o.maxScale}).prop({value:this.getMatrix()[0]}),!o.disableZoom){var u=this.$zoomIn,h=this.$zoomOut;u.length&&h.length&&(u.on(i,function(e){e.preventDefault(),t.zoom()}),h.on(i,function(e){e.preventDefault(),t.zoom(!0)})),c.length&&(a={},a["mousedown"+n]=function(){t.transition(!0)},a[(g?"input":"change")+n]=function(){t.zoom(+this.value,{noSetRange:!0})},c.on(a))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_getDistance:function(t){var e=t[0],o=t[1];return Math.sqrt(Math.pow(Math.abs(o.clientX-e.clientX),2)+Math.pow(Math.abs(o.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],o=t[1];return{clientX:(o.clientX-e.clientX)/2+e.clientX,clientY:(o.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(c.call(arguments,1)))},_startMove:function(t,n){var r,i,s,l,c,u,g,h,p,d=this,f=this.options,m=f.eventNamespace,y=this.getMatrix(),v=y.slice(0),_=+v[4],b=+v[5],E={matrix:y,animate:"skip"};"touchstart"===t.type?(i="touchmove",s="touchend"):(i="mousemove",s="mouseup"),i+=m,s+=m,this.transition(!0),this.panning=!0,this._trigger("start",t,n),n&&2===n.length?(l=this._getDistance(n),c=+y[0],u=this._getMiddle(n),r=function(t){t.preventDefault(),n=t.touches||t.originalEvent.touches;var e=d._getMiddle(n),o=d._getDistance(n)-l;d.zoom(o*(f.increment/100)+c,{focal:e,matrix:y,animate:!1}),d.pan(+y[4]+e.clientX-u.clientX,+y[5]+e.clientY-u.clientY,E),u=e}):(n&&(p=n[0])?(g=p.pageX,h=p.pageY):(g=t.pageX,h=t.pageY),r=function(t){t.preventDefault(),n=t.touches||t.originalEvent.touches;var e;e=n?n[0]||{pageX:0,pageY:0}:t,d.pan(_+e.pageX-g,b+e.pageY-h,E)}),e(a).off(m).on(i,r).on(s,function(t){t.preventDefault(),e(this).off(m),d.panning=!1,t.type="panzoomend",d._trigger(t,y,!o(y,v))})}},e.Panzoom=s,e.fn.panzoom=function(t){var o,n,r,i;return"string"==typeof t?(i=[],n=c.call(arguments,1),this.each(function(){o=e.data(this,l),o?"_"!==t.charAt(0)&&"function"==typeof(r=o[t])&&void 0!==(r=r.apply(o,n))&&i.push(r):i.push(void 0)}),i.length?1===i.length?i[0]:i:this):this.each(function(){new s(this,t)})},s})},function(t,e,o){(function(t){/*!
 * Copyright 2012, Chris Wanstrath
 * Released under the MIT License
 * https://github.com/defunkt/jquery-pjax
 */
!function(t){function e(e,n,r){var i=this;return this.on("click.pjax",e,function(e){var s=t.extend({},p(n,r));s.container||(s.container=t(this).attr("data-pjax")||i),o(e,s)})}function o(e,o,n){n=p(o,n);var i=e.currentTarget;if("A"!==i.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==i.protocol||location.hostname!==i.hostname||i.href.indexOf("#")>-1&&h(i)==h(location)||e.isDefaultPrevented())){var s={url:i.href,container:t(i).attr("data-pjax"),target:i},a=t.extend({},s,n),l=t.Event("pjax:click");t(i).trigger(l,[a]),l.isDefaultPrevented()||(r(a),e.preventDefault(),t(i).trigger("pjax:clicked",[a]))}}function n(e,o,n){n=p(o,n);var i=e.currentTarget;if("FORM"!==i.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var s={type:i.method.toUpperCase(),url:i.action,container:t(i).attr("data-pjax"),target:i};if("GET"!==s.type&&void 0!==window.FormData)s.data=new FormData(i),s.processData=!1,s.contentType=!1;else{if(t(i).find(":file").length)return;s.data=t(i).serializeArray()}r(t.extend({},s,n)),e.preventDefault()}function r(e){function o(e,o,r){r||(r={}),r.relatedTarget=n;var i=t.Event(e,r);return a.trigger(i,o),!i.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,r.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n=e.target,i=g(e.url).hash,a=e.context=d(e.container);e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:a.selector}):e.data._pjax=a.selector;var l;e.beforeSend=function(t,n){if("GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",a.selector),!o("pjax:beforeSend",[t,n]))return!1;n.timeout>0&&(l=setTimeout(function(){o("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0),e.requestUrl=g(n.url).href},e.complete=function(t,n){l&&clearTimeout(l),o("pjax:complete",[t,n,e]),o("pjax:end",[t,e])},e.error=function(t,n,r){var i=y("",t,e),a=o("pjax:error",[t,n,r,e]);"GET"==e.type&&"abort"!==n&&a&&s(i.url)},e.success=function(n,l,u){var h=r.state,p="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,d=u.getResponseHeader("X-PJAX-Version"),f=y(n,u,e);if(p&&d&&p!==d)return void s(f.url);if(!f.contents)return void s(f.url);r.state={id:e.id||c(),url:f.url,title:f.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(r.state,f.title,f.url);try{document.activeElement.blur()}catch(t){}f.title&&(document.title=f.title),o("pjax:beforeReplace",[f.contents,e],{state:r.state,previousState:h}),a.html(f.contents);var m=a.find("input[autofocus], textarea[autofocus]").last()[0];if(m&&document.activeElement!==m&&m.focus(),v(f.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==i){var _=g(f.url);_.hash=i,r.state.url=_.href,window.history.replaceState(r.state,f.title,_.href);var b=document.getElementById(_.hash.slice(1));b&&t(window).scrollTop(t(b).offset().top)}o("pjax:success",[n,l,u,e])},r.state||(r.state={id:c(),url:window.location.href,title:document.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(r.state,document.title));var h=r.xhr;h&&h.readyState<4&&(h.onreadystatechange=t.noop,h.abort()),r.options=e;var h=r.xhr=t.ajax(e);return h.readyState>0&&(e.push&&!e.replace&&(_(r.state.id,a.clone().contents()),window.history.pushState(null,"",u(e.requestUrl))),o("pjax:start",[h,e]),o("pjax:send",[h,e])),r.xhr}function i(e,o){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return r(t.extend(n,p(e,o)))}function s(t){window.history.replaceState(null,"",r.state.url),window.location.replace(t)}function a(e){var o=r.state,n=e.state;if(n&&n.container){if(C&&x==n.url)return;if(r.state&&r.state.id===n.id)return;var i=t(n.container);if(i.length){var a,l=B[n.id];r.state&&(a=r.state.id<n.id?"forward":"back",b(a,r.state.id,i.clone().contents()));var c=t.Event("pjax:popstate",{state:n,direction:a});i.trigger(c);var u={id:n.id,url:n.url,container:i,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1};if(l){i.trigger("pjax:start",[null,u]),r.state=n,n.title&&(document.title=n.title);var g=t.Event("pjax:beforeReplace",{state:n,previousState:o});i.trigger(g,[l,u]),i.html(l),i.trigger("pjax:end",[null,u])}else r(u);i[0].offsetHeight}else s(location.href)}C=!1}function l(e){var o=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",r=t("<form>",{method:"GET"===n?"GET":"POST",action:o,style:"display:none"});"GET"!==n&&"POST"!==n&&r.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var i=e.data;if("string"==typeof i)t.each(i.split("&"),function(e,o){var n=o.split("=");r.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if("object"==typeof i)for(key in i)r.append(t("<input>",{type:"hidden",name:key,value:i[key]}));t(document.body).append(r),r.submit()}function c(){return(new Date).getTime()}function u(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function g(t){var e=document.createElement("a");return e.href=t,e}function h(t){return t.href.replace(/#.*/,"")}function p(e,o){return e&&o?o.container=e:o=t.isPlainObject(e)?e:{container:e},o.container&&(o.container=d(o.container)),o}function d(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function f(t,e){return t.filter(e).add(t.find(e))}function m(e){return t.parseHTML(e,document,!0)}function y(e,o,n){var r={},i=/<html/i.test(e);if(r.url=u(o.getResponseHeader("X-PJAX-URL")||n.requestUrl),i)var s=t(m(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),a=t(m(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var s=a=t(m(e));if(0===a.length)return r;if(r.title=f(s,"title").last().text(),n.fragment){if("body"===n.fragment)var l=a;else var l=f(a,n.fragment).first();l.length&&(r.contents="body"===n.fragment?l:l.contents(),r.title||(r.title=l.attr("title")||l.data("title")))}else i||(r.contents=a);return r.contents&&(r.contents=r.contents.not(function(){return t(this).is("title")}),r.contents.find("title").remove(),r.scripts=f(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title&&(r.title=t.trim(r.title)),r}function v(e){if(e){var o=t("script[src]");e.each(function(){var e=this.src;if(!o.filter(function(){return this.src===e}).length){var n=document.createElement("script"),r=t(this).attr("type");r&&(n.type=r),n.src=t(this).attr("src"),document.head.appendChild(n)}})}}function _(t,e){B[t]=e,A.push(t),E(I,0),E(A,r.defaults.maxCacheLength)}function b(t,e,o){var n,i;B[e]=o,"forward"===t?(n=A,i=I):(n=I,i=A),n.push(e),(e=i.pop())&&delete B[e],E(n,r.defaults.maxCacheLength)}function E(t,e){for(;t.length>e;)delete B[t.shift()]}function S(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function k(){t.fn.pjax=e,t.pjax=r,t.pjax.enable=t.noop,t.pjax.disable=T,t.pjax.click=o,t.pjax.submit=n,t.pjax.reload=i,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:S},t(window).on("popstate.pjax",a)}function T(){t.fn.pjax=function(){return this},t.pjax=l,t.pjax.enable=k,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",a)}var C=!0,x=window.location.href,w=window.history.state;w&&w.container&&(r.state=w),"state"in window.history&&(C=!1);var B={},I=[],A=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?k():T()}(t)}).call(e,o(0))},function(t,e,o){(function(t){!function(e){var o=new Array,n=new Array;e.fn.doAutosize=function(t){var o=e(this).data("minwidth"),n=e(this).data("maxwidth"),r="",i=e(this),s=e("#"+e(this).data("tester_id"));if(r!==(r=i.val())){var a=r.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">");s.html(a);var l=s.width(),c=l+t.comfortZone>=o?l+t.comfortZone:o;(c<i.width()&&c>=o||c>o&&c<n)&&i.width(c)}},e.fn.resetAutosize=function(t){var o=e(this).data("minwidth")||t.minInputWidth||e(this).width(),n=e(this).data("maxwidth")||t.maxInputWidth||e(this).closest(".tagsinput").width()-t.inputPadding,r=e(this),i=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:r.css("fontSize"),fontFamily:r.css("fontFamily"),fontWeight:r.css("fontWeight"),letterSpacing:r.css("letterSpacing"),whiteSpace:"nowrap"}),s=e(this).attr("id")+"_autosize_tester";!e("#"+s).length>0&&(i.attr("id",s),i.appendTo("body")),r.data("minwidth",o),r.data("maxwidth",n),r.data("tester_id",s),r.css("width",o)},e.fn.addTag=function(r,i){return i=t.extend({focus:!1,callback:!0},i),this.each(function(){var s=e(this).attr("id"),a=e(this).val().split(o[s]);if(""==a[0]&&(a=new Array),r=t.trim(r),i.unique){var l=e(a).tagExist(r);1==l&&e("#"+s+"_tag").addClass("not_valid")}else var l=!1;if(""!=r&&1!=l){if(e("<span>").addClass("tag").append(e("<span>").text(r).append("  "),e("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return e("#"+s).removeTag(escape(r))})).insertBefore("#"+s+"_addTag"),a.push(r),e("#"+s+"_tag").val(""),i.focus?e("#"+s+"_tag").focus():e("#"+s+"_tag").blur(),e.fn.tagsInput.updateTagsField(this,a),i.callback&&n[s]&&n[s].onAddTag){var c=n[s].onAddTag;c.call(this,r)}if(n[s]&&n[s].onChange){var u=a.length,c=n[s].onChange;c.call(this,e(this),a[u-1])}}}),!1},e.fn.removeTag=function(t){return t=unescape(t),this.each(function(){var r=e(this).attr("id"),s=e(this).val().split(o[r]);for(e("#"+r+"_tagsinput .tag").remove(),str="",i=0;i<s.length;i++)s[i]!=t&&(str=str+o[r]+s[i]);if(e.fn.tagsInput.importTags(this,str),n[r]&&n[r].onRemoveTag){n[r].onRemoveTag.call(this,t)}}),!1},e.fn.tagExist=function(o){return t.inArray(o,e(this))>=0},e.fn.importTags=function(t){id=e(this).attr("id"),e("#"+id+"_tagsinput .tag").remove(),e.fn.tagsInput.importTags(this,t)},e.fn.tagsInput=function(r){var i=t.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},r);return this.each(function(){i.hide&&e(this).hide();var r=e(this).attr("id");r&&!o[e(this).attr("id")]||(r=e(this).attr("id","tags"+(new Date).getTime()).attr("id"));var s=t.extend({pid:r,real_input:"#"+r,holder:"#"+r+"_tagsinput",input_wrapper:"#"+r+"_addTag",fake_input:"#"+r+"_tag"},i);o[r]=s.delimiter,(i.onAddTag||i.onRemoveTag||i.onChange)&&(n[r]=new Array,n[r].onAddTag=i.onAddTag,n[r].onRemoveTag=i.onRemoveTag,n[r].onChange=i.onChange);var a='<div id="'+r+'_tagsinput" class="tagsinput"><div id="'+r+'_addTag">';if(i.interactive&&(a=a+'<input id="'+r+'_tag" value="" data-default="'+i.defaultText+'" />'),a+='</div><div class="tags_clear"></div></div>',e(a).insertAfter(this),e(s.holder).css("width",i.width),e(s.holder).css("height",i.height),""!=e(s.real_input).val()&&e.fn.tagsInput.importTags(e(s.real_input),e(s.real_input).val()),i.interactive){if(e(s.fake_input).val(e(s.fake_input).attr("data-default")),e(s.fake_input).css("color",i.placeholderColor),e(s.fake_input).resetAutosize(i),e(s.holder).bind("click",s,function(t){e(t.data.fake_input).focus()}),e(s.fake_input).bind("focus",s,function(t){e(t.data.fake_input).val()==e(t.data.fake_input).attr("data-default")&&e(t.data.fake_input).val(""),e(t.data.fake_input).css("color","#000000")}),void 0!=i.autocomplete_url){autocomplete_options={source:i.autocomplete_url};for(attrname in i.autocomplete)autocomplete_options[attrname]=i.autocomplete[attrname];void 0!==t.Autocompleter?(e(s.fake_input).autocomplete(i.autocomplete_url,i.autocomplete),e(s.fake_input).bind("result",s,function(t,o,n){o&&e("#"+r).addTag(o[0]+"",{focus:!0,unique:i.unique})})):void 0!==t.ui.autocomplete&&(e(s.fake_input).autocomplete(autocomplete_options),e(s.fake_input).bind("autocompleteselect",s,function(t,o){return e(t.data.real_input).addTag(o.item.value,{focus:!0,unique:i.unique}),!1}))}else e(s.fake_input).bind("blur",s,function(t){var o=e(this).attr("data-default");return""!=e(t.data.fake_input).val()&&e(t.data.fake_input).val()!=o?t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:i.unique}):(e(t.data.fake_input).val(e(t.data.fake_input).attr("data-default")),e(t.data.fake_input).css("color",i.placeholderColor)),!1});e(s.fake_input).bind("keypress",s,function(t){if(t.which==t.data.delimiter.charCodeAt(0)||13==t.which)return t.preventDefault(),t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:i.unique}),e(t.data.fake_input).resetAutosize(i),!1;t.data.autosize&&e(t.data.fake_input).doAutosize(i)}),s.removeWithBackspace&&e(s.fake_input).bind("keydown",function(t){if(8==t.keyCode&&""==e(this).val()){t.preventDefault();var o=e(this).closest(".tagsinput").find(".tag:last").text(),n=e(this).attr("id").replace(/_tag$/,"");o=o.replace(/[\s]+x$/,""),e("#"+n).removeTag(escape(o)),e(this).trigger("focus")}}),e(s.fake_input).blur(),s.unique&&e(s.fake_input).keydown(function(t){(8==t.keyCode||String.fromCharCode(t.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/))&&e(this).removeClass("not_valid")})}}),this},e.fn.tagsInput.updateTagsField=function(t,n){var r=e(t).attr("id");e(t).val(n.join(o[r]))},e.fn.tagsInput.importTags=function(t,r){e(t).val("");var s=e(t).attr("id"),a=r.split(o[s]);for(i=0;i<a.length;i++)e(t).addTag(a[i],{focus:!1,callback:!1});if(n[s]&&n[s].onChange){n[s].onChange.call(t,t,a[i])}}}(t)}).call(e,o(0))},function(t,e,o){var n,r,i;/*! jQuery UI - v1.11.2 - 2014-12-03
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, resizable.js, sortable.js, autocomplete.js, menu.js, effect.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
!function(s){r=[o(0)],n=s,void 0!==(i="function"==typeof n?n.apply(e,r):n)&&(t.exports=i)}(function(t){function e(e,n){var r,i,s,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,i=r.name,!(!e.href||!i||"map"!==r.nodeName.toLowerCase())&&(!!(s=t("img[usemap='#"+i+"']")[0])&&o(s))):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&o(e)}function o(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var o=this.css("position"),n="absolute"===o,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==o&&i.length?i:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(o){return!!t.data(o,e)}}):function(e,o,n){return!!t.data(e,n[3])},focusable:function(o){return e(o,!isNaN(t.attr(o,"tabindex")))},tabbable:function(o){var n=t.attr(o,"tabindex"),r=isNaN(n);return(r||n>=0)&&e(o,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,o){function n(e,o,n,i){return t.each(r,function(){o-=parseFloat(t.css(e,"padding"+this))||0,n&&(o-=parseFloat(t.css(e,"border"+this+"Width"))||0),i&&(o-=parseFloat(t.css(e,"margin"+this))||0)}),o}var r="Width"===o?["Left","Right"]:["Top","Bottom"],i=o.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+o]=function(e){return void 0===e?s["inner"+o].call(this):this.each(function(){t(this).css(i,n(this,e)+"px")})},t.fn["outer"+o]=function(e,r){return"number"!=typeof e?s["outer"+o].call(this,e):this.each(function(){t(this).css(i,n(this,e,!0,r)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(o){return arguments.length?e.call(this,t.camelCase(o)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(o,n){return"number"==typeof o?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},o)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var o,n,r=t(this[0]);r.length&&r[0]!==document;){if(("absolute"===(o=r.css("position"))||"relative"===o||"fixed"===o)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),t.ui.plugin={add:function(e,o,n){var r,i=t.ui[e].prototype;for(r in n)i.plugins[r]=i.plugins[r]||[],i.plugins[r].push([o,n[r]])},call:function(t,e,o,n){var r,i=t.plugins[e];if(i&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;i.length>r;r++)t.options[i[r][0]]&&i[r][1].apply(t.element,o)}};var n=0,r=Array.prototype.slice;t.cleanData=function(e){return function(o){var n,r,i;for(i=0;null!=(r=o[i]);i++)try{(n=t._data(r,"events"))&&n.remove&&t(r).triggerHandler("remove")}catch(t){}e(o)}}(t.cleanData),t.widget=function(e,o,n){var r,i,s,a,l={},c=e.split(".")[0];return e=e.split(".")[1],r=c+"-"+e,n||(n=o,o=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[c]=t[c]||{},i=t[c][e],s=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,i,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new o,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return o.prototype[e].apply(this,arguments)},r=function(t){return o.prototype[e].apply(this,t)};return function(){var e,o=this._super,i=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=o,this._superApply=i,e}}()):void(l[e]=n)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:i?a.widgetEventPrefix||e:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:r}),i?(t.each(i._childConstructors,function(e,o){var n=o.prototype;t.widget(n.namespace+"."+n.widgetName,s,o._proto)}),delete i._childConstructors):o._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var o,n,i=r.call(arguments,1),s=0,a=i.length;a>s;s++)for(o in i[s])n=i[s][o],i[s].hasOwnProperty(o)&&void 0!==n&&(e[o]=t.isPlainObject(n)?t.isPlainObject(e[o])?t.widget.extend({},e[o],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,o){var n=o.prototype.widgetFullName||e;t.fn[e]=function(i){var s="string"==typeof i,a=r.call(arguments,1),l=this;return i=!s&&a.length?t.widget.extend.apply(null,[i].concat(a)):i,s?this.each(function(){var o,r=t.data(this,n);return"instance"===i?(l=r,!1):r?t.isFunction(r[i])&&"_"!==i.charAt(0)?(o=r[i].apply(r,a),o!==r&&void 0!==o?(l=o&&o.jquery?l.pushStack(o.get()):o,!1):void 0):t.error("no such method '"+i+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+i+"'")}):this.each(function(){var e=t.data(this,n);e?(e.option(i||{}),e._init&&e._init()):t.data(this,n,new o(i,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,o){o=t(o||this.defaultElement||this)[0],this.element=t(o),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),o!==this&&(t.data(o,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===o&&this.destroy()}}),this.document=t(o.style?o.ownerDocument:o.document||o),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,o){var n,r,i,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(r=s[e]=t.widget.extend({},this.options[e]),i=0;n.length-1>i;i++)r[n[i]]=r[n[i]]||{},r=r[n[i]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=o}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=o}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,o,n){var r,i=this;"boolean"!=typeof e&&(n=o,o=e,e=!1),n?(o=r=t(o),this.bindings=this.bindings.add(o)):(n=o,o=this.element,r=this.widget()),t.each(n,function(n,s){function a(){return e||!0!==i.options.disabled&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?i[s]:s).apply(i,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+i.eventNamespace,u=l[2];u?r.delegate(u,c,a):o.bind(c,a)})},_off:function(e,o){o=(o||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(o).undelegate(o),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function o(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(o,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,o,n){var r,i,s=this.options[e];if(n=n||{},o=t.Event(o),o.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),o.target=this.element[0],i=o.originalEvent)for(r in i)r in o||(o[r]=i[r]);return this.element.trigger(o,n),!(t.isFunction(s)&&!1===s.apply(this.element[0],[o].concat(n))||o.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,o){t.Widget.prototype["_"+e]=function(n,r,i){"string"==typeof r&&(r={effect:r});var s,a=r?!0===r||"number"==typeof r?o:r.effect||o:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=i,r.delay&&n.delay(r.delay),s&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,i):n.queue(function(o){t(this)[e](),i&&i.call(n[0]),o()})}}),t.widget;var i=!1;t(document).mouseup(function(){i=!1}),t.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(o){return!0===t.data(o.target,e.widgetName+".preventClickEvent")?(t.removeData(o.target,e.widgetName+".preventClickEvent"),o.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var o=this,n=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){o.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return o._mouseMove(t)},this._mouseUpDelegate=function(t){return o._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),i=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function e(t,e,o){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?o/100:1)]}function o(e,o){return parseInt(t.css(e,o),10)||0}function n(e){var o=e[0];return 9===o.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(o)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,i,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,g=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==r)return r;var e,o,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return t("body").append(n),e=i.offsetWidth,n.css("overflow","scroll"),o=i.offsetWidth,e===o&&(o=n[0].clientWidth),n.remove(),r=e-o},getScrollInfo:function(e){var o=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===o||"auto"===o&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var o=t(e||window),n=t.isWindow(o[0]),r=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:n,isDocument:r,offset:o.offset()||{left:0,top:0},scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:n||r?o.width():o.outerWidth(),height:n||r?o.height():o.outerHeight()}}},t.fn.position=function(r){if(!r||!r.of)return d.apply(this,arguments);r=t.extend({},r);var p,f,m,y,v,_,b=t(r.of),E=t.position.getWithinInfo(r.within),S=t.position.getScrollInfo(E),k=(r.collision||"flip").split(" "),T={};return _=n(b),b[0].preventDefault&&(r.at="left top"),f=_.width,m=_.height,y=_.offset,v=t.extend({},y),t.each(["my","at"],function(){var t,e,o=(r[this]||"").split(" ");1===o.length&&(o=c.test(o[0])?o.concat(["center"]):u.test(o[0])?["center"].concat(o):["center","center"]),o[0]=c.test(o[0])?o[0]:"center",o[1]=u.test(o[1])?o[1]:"center",t=g.exec(o[0]),e=g.exec(o[1]),T[this]=[t?t[0]:0,e?e[0]:0],r[this]=[h.exec(o[0])[0],h.exec(o[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===r.at[0]?v.left+=f:"center"===r.at[0]&&(v.left+=f/2),"bottom"===r.at[1]?v.top+=m:"center"===r.at[1]&&(v.top+=m/2),p=e(T.at,f,m),v.left+=p[0],v.top+=p[1],this.each(function(){var n,c,u=t(this),g=u.outerWidth(),h=u.outerHeight(),d=o(this,"marginLeft"),_=o(this,"marginTop"),C=g+d+o(this,"marginRight")+S.width,x=h+_+o(this,"marginBottom")+S.height,w=t.extend({},v),B=e(T.my,u.outerWidth(),u.outerHeight());"right"===r.my[0]?w.left-=g:"center"===r.my[0]&&(w.left-=g/2),"bottom"===r.my[1]?w.top-=h:"center"===r.my[1]&&(w.top-=h/2),w.left+=B[0],w.top+=B[1],i||(w.left=l(w.left),w.top=l(w.top)),n={marginLeft:d,marginTop:_},t.each(["left","top"],function(e,o){t.ui.position[k[e]]&&t.ui.position[k[e]][o](w,{targetWidth:f,targetHeight:m,elemWidth:g,elemHeight:h,collisionPosition:n,collisionWidth:C,collisionHeight:x,offset:[p[0]+B[0],p[1]+B[1]],my:r.my,at:r.at,within:E,elem:u})}),r.using&&(c=function(t){var e=y.left-w.left,o=e+f-g,n=y.top-w.top,i=n+m-h,l={target:{element:b,left:y.left,top:y.top,width:f,height:m},element:{element:u,left:w.left,top:w.top,width:g,height:h},horizontal:0>o?"left":e>0?"right":"center",vertical:0>i?"top":n>0?"bottom":"middle"};g>f&&f>a(e+o)&&(l.horizontal="center"),h>m&&m>a(n+i)&&(l.vertical="middle"),l.important=s(a(e),a(o))>s(a(n),a(i))?"horizontal":"vertical",r.using.call(this,t,l)}),u.offset(t.extend(w,{using:c}))})},t.ui.position={fit:{left:function(t,e){var o,n=e.within,r=n.isWindow?n.scrollLeft:n.offset.left,i=n.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-i-r;e.collisionWidth>i?l>0&&0>=c?(o=t.left+l+e.collisionWidth-i-r,t.left+=l-o):t.left=c>0&&0>=l?r:l>c?r+i-e.collisionWidth:r:l>0?t.left+=l:c>0?t.left-=c:t.left=s(t.left-a,t.left)},top:function(t,e){var o,n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,i=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-i-r;e.collisionHeight>i?l>0&&0>=c?(o=t.top+l+e.collisionHeight-i-r,t.top+=l-o):t.top=c>0&&0>=l?r:l>c?r+i-e.collisionHeight:r:l>0?t.top+=l:c>0?t.top-=c:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var o,n,r=e.within,i=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,g=c+e.collisionWidth-s-l,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,d=-2*e.offset[0];0>u?(0>(o=t.left+h+p+d+e.collisionWidth-s-i)||a(u)>o)&&(t.left+=h+p+d):g>0&&((n=t.left-e.collisionPosition.marginLeft+h+p+d-l)>0||g>a(n))&&(t.left+=h+p+d)},top:function(t,e){var o,n,r=e.within,i=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,g=c+e.collisionHeight-s-l,h="top"===e.my[1],p=h?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];0>u?(n=t.top+p+d+f+e.collisionHeight-s-i,t.top+p+d+f>u&&(0>n||a(u)>n)&&(t.top+=p+d+f)):g>0&&(o=t.top-e.collisionPosition.marginTop+p+d+f-l,t.top+p+d+f>g&&(o>0||g>a(o))&&(t.top+=p+d+f))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,o,n,r,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)e.style[s]=n[s];e.appendChild(l),o=a||document.documentElement,o.insertBefore(e,o.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",r=t(l).offset().left,i=r>10&&11>r,e.innerHTML="",o.removeChild(e)}()}(),t.ui.position,t.widget("ui.draggable",t.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var o=this.options;return this._blurActiveElement(e),!(this.helper||o.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(!0===o.iframeFix?"iframe":o.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var o=this.document[0];if(this.handleElement.is(e.target))try{o.activeElement&&"body"!==o.activeElement.nodeName.toLowerCase()&&t(o.activeElement).blur()}catch(t){}},_mouseStart:function(e){var o=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,o){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!o){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var o=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==o._trigger("stop",e)&&o._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var o=this.options,n=t.isFunction(o.helper),r=n?t(o.helper.apply(this.element[0],[e])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),o=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==o&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,o,n,r=this.options,i=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(i).width()-this.helperProportions.width-this.margins.left,(t(i).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),o=t(r.containment),void((n=o[0])&&(e=/(scroll|auto)/.test(o.css("overflow")),this.containment=[(parseInt(o.css("borderLeftWidth"),10)||0)+(parseInt(o.css("paddingLeft"),10)||0),(parseInt(o.css("borderTopWidth"),10)||0)+(parseInt(o.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(o.css("borderRightWidth"),10)||0)-(parseInt(o.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(o.css("borderBottomWidth"),10)||0)-(parseInt(o.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=o))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var o="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*o+this.offset.parent.top*o-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*o,left:e.left+this.offset.relative.left*o+this.offset.parent.left*o-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*o}},_generatePosition:function(t,e){var o,n,r,i,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),o=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):o=this.containment,t.pageX-this.offset.click.left<o[0]&&(l=o[0]+this.offset.click.left),t.pageY-this.offset.click.top<o[1]&&(c=o[1]+this.offset.click.top),t.pageX-this.offset.click.left>o[2]&&(l=o[2]+this.offset.click.left),t.pageY-this.offset.click.top>o[3]&&(c=o[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=o?r-this.offset.click.top>=o[1]||r-this.offset.click.top>o[3]?r:r-this.offset.click.top>=o[1]?r-s.grid[1]:r+s.grid[1]:r,i=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=o?i-this.offset.click.left>=o[0]||i-this.offset.click.left>o[2]?i:i-this.offset.click.left>=o[0]?i-s.grid[0]:i+s.grid[0]:i),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,o,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[o,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,o,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,o,n){var r=t.extend({},o,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var o=t(this).sortable("instance");o&&!o.options.disabled&&(n.sortables.push(o),o.refreshPositions(),o._trigger("activate",e,r))})},stop:function(e,o,n){var r=t.extend({},o,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))})},drag:function(e,o,n){t.each(n.sortables,function(){var r=!1,i=this;i.positionAbs=n.positionAbs,i.helperProportions=n.helperProportions,i.offset.click=n.offset.click,i._intersectsWith(i.containerCache)&&(r=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==i&&this._intersectsWith(this.containerCache)&&t.contains(i.element[0],this.element[0])&&(r=!1),r})),r?(i.isOver||(i.isOver=1,i.currentItem=o.helper.appendTo(i.element).data("ui-sortable-item",!0),i.options._helper=i.options.helper,i.options.helper=function(){return o.helper[0]},e.target=i.currentItem[0],i._mouseCapture(e,!0),i._mouseStart(e,!0,!0),i.offset.click.top=n.offset.click.top,i.offset.click.left=n.offset.click.left,i.offset.parent.left-=n.offset.parent.left-i.offset.parent.left,i.offset.parent.top-=n.offset.parent.top-i.offset.parent.top,n._trigger("toSortable",e),n.dropped=i.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,i.fromOutside=n),i.currentItem&&(i._mouseDrag(e),o.position=i.position)):i.isOver&&(i.isOver=0,i.cancelHelperRemoval=!0,i.options._revert=i.options.revert,i.options.revert=!1,i._trigger("out",e,i._uiHash(i)),i._mouseStop(e,!0),i.options.revert=i.options._revert,i.options.helper=i.options._helper,i.placeholder&&i.placeholder.remove(),n._refreshOffsets(e),o.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,o,n){var r=t("body"),i=n.options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(e,o,n){var r=n.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,o,n){var r=t(o.helper),i=n.options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(e,o,n){var r=n.options;r._opacity&&t(o.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,o){o.scrollParentNotHidden||(o.scrollParentNotHidden=o.helper.scrollParent(!1)),o.scrollParentNotHidden[0]!==o.document[0]&&"HTML"!==o.scrollParentNotHidden[0].tagName&&(o.overflowOffset=o.scrollParentNotHidden.offset())},drag:function(e,o,n){var r=n.options,i=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+s.offsetHeight-e.pageY<r.scrollSensitivity?s.scrollTop=i=s.scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(s.scrollTop=i=s.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+s.offsetWidth-e.pageX<r.scrollSensitivity?s.scrollLeft=i=s.scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(s.scrollLeft=i=s.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(a).scrollTop()<r.scrollSensitivity?i=t(a).scrollTop(t(a).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<r.scrollSensitivity&&(i=t(a).scrollTop(t(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(a).scrollLeft()<r.scrollSensitivity?i=t(a).scrollLeft(t(a).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<r.scrollSensitivity&&(i=t(a).scrollLeft(t(a).scrollLeft()+r.scrollSpeed)))),!1!==i&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,o,n){var r=n.options;n.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),o=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:o.top,left:o.left})})},drag:function(e,o,n){var r,i,s,a,l,c,u,g,h,p,d=n.options,f=d.snapTolerance,m=o.offset.left,y=m+n.helperProportions.width,v=o.offset.top,_=v+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)l=n.snapElements[h].left-n.margins.left,c=l+n.snapElements[h].width,u=n.snapElements[h].top-n.margins.top,g=u+n.snapElements[h].height,l-f>y||m>c+f||u-f>_||v>g+f||!t.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==d.snapMode&&(r=f>=Math.abs(u-_),i=f>=Math.abs(g-v),s=f>=Math.abs(l-y),a=f>=Math.abs(c-m),r&&(o.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),i&&(o.position.top=n._convertPositionTo("relative",{top:g,left:0}).top),s&&(o.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(o.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=r||i||s||a,"outer"!==d.snapMode&&(r=f>=Math.abs(u-v),i=f>=Math.abs(g-_),s=f>=Math.abs(l-m),a=f>=Math.abs(c-y),r&&(o.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),i&&(o.position.top=n._convertPositionTo("relative",{top:g-n.helperProportions.height,left:0}).top),s&&(o.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(o.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(r||i||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=r||i||s||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,o,n){var r,i=n.options,s=t.makeArray(t(i.stack)).sort(function(e,o){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(o).css("zIndex"),10)||0)});s.length&&(r=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",r+e)}),this.css("zIndex",r+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,o,n){var r=t(o.helper),i=n.options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(e,o,n){var r=n.options;r._zIndex&&t(o.helper).css("zIndex",r._zIndex)}}),t.ui.draggable,t.widget("ui.resizable",t.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,o){if("hidden"===t(e).css("overflow"))return!1;var n=o&&"left"===o?"scrollLeft":"scrollTop",r=!1;return e[n]>0||(e[n]=1,r=e[n]>0,e[n]=0,r)},_create:function(){var e,o,n,r,i,s=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},o=0;e.length>o;o++)n=t.trim(e[o]),i="ui-resizable-"+n,r=t("<div class='ui-resizable-handle "+i+"'></div>"),r.css({zIndex:a.zIndex}),"se"===n&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(r);this._renderAxis=function(e){var o,n,r,i;e=e||this.element;for(o in this.handles)this.handles[o].constructor===String&&(this.handles[o]=this.element.children(this.handles[o]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[o],this.element),i=/sw|ne|nw|se|n|s/.test(o)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(o)?"Top":/se|sw|s/.test(o)?"Bottom":/^e$/.test(o)?"Right":"Left"].join(""),e.css(r,i),this._proportionallyResize()),t(this.handles[o]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(t(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,o=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(o(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),o(this.originalElement),this},_mouseCapture:function(e){var o,n,r=!1;for(o in this.handles)((n=t(this.handles[o])[0])===e.target||t.contains(n,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var o,n,r,i=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),o=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),i.containment&&(o+=t(i.containment).scrollLeft()||0,n+=t(i.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:o,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof i.aspectRatio?i.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===r?this.axis+"-resize":r),s.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var o,n,r=this.originalMousePosition,i=this.axis,s=e.pageX-r.left||0,a=e.pageY-r.top||0,l=this._change[i];return this._updatePrevProperties(),!!l&&(o=l.apply(this,[e,s,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(o=this._updateRatio(o,e)),o=this._respectSize(o,e),this._updateCache(o),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var o,n,r,i,s,a,l,c=this.options,u=this;return this._helper&&(o=this._proportionallyResizeElements,n=o.length&&/textarea/i.test(o[0].nodeName),r=n&&this._hasScroll(o[0],"left")?0:u.sizeDiff.height,i=n?0:u.sizeDiff.width,s={width:u.helper.width()-i,height:u.helper.height()-r},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(t.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,o,n,r,i,s=this.options;i={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=i.minHeight*this.aspectRatio,n=i.minWidth/this.aspectRatio,o=i.maxHeight*this.aspectRatio,r=i.maxWidth/this.aspectRatio,e>i.minWidth&&(i.minWidth=e),n>i.minHeight&&(i.minHeight=n),i.maxWidth>o&&(i.maxWidth=o),i.maxHeight>r&&(i.maxHeight=r)),this._vBoundaries=i},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,o=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(o.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(o.height-t.height),t.left=e.left+(o.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,o=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,r=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,i=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,s=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(o),u=/nw|ne|n/.test(o);return i&&(t.width=e.minWidth),s&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),r&&(t.height=e.maxHeight),i&&c&&(t.left=a-e.minWidth),n&&c&&(t.left=a-e.maxWidth),s&&u&&(t.top=l-e.minHeight),r&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,o=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],r=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)o[e]=parseInt(n[e],10)||0,o[e]+=parseInt(r[e],10)||0;return{height:o[0]+o[2],width:o[1]+o[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,o=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:o.height()-this.outerDimensions.height||0,width:o.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,o=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var o=this.originalSize;return{left:this.originalPosition.left+e,width:o.width-e}},n:function(t,e,o){var n=this.originalSize;return{top:this.originalPosition.top+o,height:n.height-o}},s:function(t,e,o){return{height:this.originalSize.height+o}},se:function(e,o,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,o,n]))},sw:function(e,o,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,o,n]))},ne:function(e,o,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,o,n]))},nw:function(e,o,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,o,n]))}},_propagate:function(e,o){t.ui.plugin.call(this,e,[o,this.ui()]),"resize"!==e&&this._trigger(e,o,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var o=t(this).resizable("instance"),n=o.options,r=o._proportionallyResizeElements,i=r.length&&/textarea/i.test(r[0].nodeName),s=i&&o._hasScroll(r[0],"left")?0:o.sizeDiff.height,a=i?0:o.sizeDiff.width,l={width:o.size.width-a,height:o.size.height-s},c=parseInt(o.element.css("left"),10)+(o.position.left-o.originalPosition.left)||null,u=parseInt(o.element.css("top"),10)+(o.position.top-o.originalPosition.top)||null;o.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(o.element.css("width"),10),height:parseInt(o.element.css("height"),10),top:parseInt(o.element.css("top"),10),left:parseInt(o.element.css("left"),10)};r&&r.length&&t(r[0]).css({width:n.width,height:n.height}),o._updateCache(n),o._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,o,n,r,i,s,a,l=t(this).resizable("instance"),c=l.options,u=l.element,g=c.containment,h=g instanceof t?g.get(0):/parent/.test(g)?u.parent().get(0):g;h&&(l.containerElement=t(h),/document/.test(g)||g===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(h),o=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){o[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-o[3],width:e.innerWidth()-o[1]},n=l.containerOffset,r=l.containerSize.height,i=l.containerSize.width,s=l._hasScroll(h,"left")?h.scrollWidth:i,a=l._hasScroll(h)?h.scrollHeight:r,l.parentData={element:h,left:n.left,top:n.top,width:s,height:a}))},resize:function(e){var o,n,r,i,s=t(this).resizable("instance"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||e.shiftKey,g={top:0,left:0},h=s.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(g=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-g.left),u&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),r=s.containerElement.get(0)===s.element.parent().get(0),i=/relative|absolute/.test(s.containerElement.css("position")),r&&i?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),o=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-g.left:s.offset.left-l.left)),n=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-g.top:s.offset.top-l.top)),o+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-o,u&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,u&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),o=e.options,n=e.containerOffset,r=e.containerPosition,i=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,c=s.outerHeight()-e.sizeDiff.height;e._helper&&!o.animate&&/relative/.test(i.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c}),e._helper&&!o.animate&&/static/.test(i.css("position"))&&t(this).css({left:a.left-r.left-n.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),o=e.options,n=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof o.alsoResize||o.alsoResize.parentNode?n(o.alsoResize):o.alsoResize.length?(o.alsoResize=o.alsoResize[0],n(o.alsoResize)):t.each(o.alsoResize,function(t){n(t)})},resize:function(e,o){var n=t(this).resizable("instance"),r=n.options,i=n.originalSize,s=n.originalPosition,a={height:n.size.height-i.height||0,width:n.size.width-i.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(e,n){t(e).each(function(){var e=t(this),r=t(this).data("ui-resizable-alsoresize"),i={},s=n&&n.length?n:e.parents(o.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var o=(r[e]||0)+(a[e]||0);o&&o>=0&&(i[e]=o||null)}),e.css(i)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),o=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,o=t(this).resizable("instance"),n=o.options,r=o.size,i=o.originalSize,s=o.originalPosition,a=o.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,u=l[1]||1,g=Math.round((r.width-i.width)/c)*c,h=Math.round((r.height-i.height)/u)*u,p=i.width+g,d=i.height+h,f=n.maxWidth&&p>n.maxWidth,m=n.maxHeight&&d>n.maxHeight,y=n.minWidth&&n.minWidth>p,v=n.minHeight&&n.minHeight>d;n.grid=l,y&&(p+=c),v&&(d+=u),f&&(p-=c),m&&(d-=u),/^(se|s|e)$/.test(a)?(o.size.width=p,o.size.height=d):/^(ne)$/.test(a)?(o.size.width=p,o.size.height=d,o.position.top=s.top-h):/^(sw)$/.test(a)?(o.size.width=p,o.size.height=d,o.position.left=s.left-g):((0>=d-u||0>=p-c)&&(e=o._getPaddingPlusBorderDimensions(this)),d-u>0?(o.size.height=d,o.position.top=s.top-h):(d=u-e.height,o.size.height=d,o.position.top=s.top+i.height-d),p-c>0?(o.size.width=p,o.position.left=s.left-g):(p=u-e.height,o.size.width=p,o.position.left=s.left+i.width-p))}}),t.ui.resizable,t.widget("ui.sortable",t.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,o){return t>=e&&e+o>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||this._isFloating(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,o){var n=null,r=!1,i=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,i.widgetName+"-item")===i?(n=t(this),!1):void 0}),t.data(e.target,i.widgetName+"-item")===i&&(n=t(e.target)),!!n&&(!(this.options.handle&&!o&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,o,n){var r,i,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(i=this.document.find("body"),this.storedCursor=i.css("cursor"),i.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(i)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var o,n,r,i,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed)),e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),o=this.items.length-1;o>=0;o--)if(n=this.items[o],r=n.item[0],(i=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===i?"next":"prev"]()[0]!==r&&!t.contains(this.placeholder[0],r)&&("semi-dynamic"!==this.options.type||!t.contains(this.element[0],r))){if(this.direction=1===i?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,o){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,r=this.placeholder.offset(),i=this.options.axis,s={};i&&"x"!==i||(s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),i&&"y"!==i||(s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,o);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var o=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(o).each(function(){var o=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);o&&n.push((e.key||o[1]+"[]")+"="+(e.key&&e.expression?o[1]:o[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var o=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},o.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,o=e+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,i=t.left,s=i+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,g="x"===this.options.axis||n+c>a&&l>n+c,h="y"===this.options.axis||e+u>i&&s>e+u,p=g&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>i&&s>o-this.helperProportions.width/2&&n+this.helperProportions.height/2>a&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=e&&o,r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return!!n&&(this.floating?i&&"right"===i||"down"===r?2:1:r&&("down"===r?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),o=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&o||"left"===r&&!o:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function o(){a.push(this)}var n,r,i,s,a=[],l=[],c=this._connectWith();if(c&&e)for(n=c.length-1;n>=0;n--)for(i=t(c[n]),r=i.length-1;r>=0;r--)(s=t.data(i[r],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(o);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var o=0;e.length>o;o++)if(e[o]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var o,n,r,i,s,a,l,c,u=this.items,g=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(o=h.length-1;o>=0;o--)for(r=t(h[o]),n=r.length-1;n>=0;n--)(i=t.data(r[n],this.widgetFullName))&&i!==this&&!i.options.disabled&&(g.push([t.isFunction(i.options.items)?i.options.items.call(i.element[0],e,{item:this.currentItem}):t(i.options.items,i.element),i]),this.containers.push(i));for(o=g.length-1;o>=0;o--)for(s=g[o][1],a=g[o][0],n=0,c=a.length;c>n;n++)l=t(a[n]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var o,n,r,i;for(o=this.items.length-1;o>=0;o--)n=this.items[o],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=r.outerWidth(),n.height=r.outerHeight()),i=r.offset(),n.left=i.left,n.top=i.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(o=this.containers.length-1;o>=0;o--)i=this.containers[o].element.offset(),this.containers[o].containerCache.left=i.left,this.containers[o].containerCache.top=i.top,this.containers[o].containerCache.width=this.containers[o].element.outerWidth(),this.containers[o].containerCache.height=this.containers[o].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var o,n=e.options;n.placeholder&&n.placeholder.constructor!==String||(o=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),r=t("<"+n+">",e.document[0]).addClass(o||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(r)}):"img"===n&&r.attr("src",e.currentItem.attr("src")),o||r.css("visibility","hidden"),r},update:function(t,r){(!o||n.forcePlaceholderSize)&&(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var o,n,r,i,s,a,l,c,u,g,h=null,p=null;for(o=this.containers.length-1;o>=0;o--)if(!t.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(h&&t.contains(this.containers[o].element[0],h.element[0]))continue;h=this.containers[o],p=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",e,this._uiHash(this)),this.containers[o].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(r=1e4,i=null,u=h.floating||this._isFloating(this.currentItem),s=u?"left":"top",a=u?"width":"height",g=u?"clientX":"clientY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,e[g]-l>this.items[n][a]/2&&(c=!0),r>Math.abs(e[g]-l)&&(r=Math.abs(e[g]-l),i=this.items[n],this.direction=c?"up":"down"));if(!i&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));i?this._rearrange(e,i,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var o=this.options,n=t.isFunction(o.helper)?t(o.helper.apply(this.element[0],[e,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||o.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||o.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,o,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],o=t(r.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[o.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,o.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,o.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,o.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,o){o||(o=this.position);var n="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);return{top:o.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:r.scrollTop())*n,left:o.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())*n}},_generatePosition:function(e){var o,n,r=this.options,i=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(o=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?o-this.offset.click.top>=this.containment[1]&&o-this.offset.click.top<=this.containment[3]?o:o-this.offset.click.top>=this.containment[1]?o-r.grid[1]:o+r.grid[1]:o,n=this.originalPageX+Math.round((i-this.originalPageX)/r.grid[0])*r.grid[0],i=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,o,n){o?o[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function o(t,e,o){return function(n){o._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||r.push(o("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(o("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;r.length>n;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var o=e||this;return{helper:o.helper,placeholder:o.placeholder||t([]),position:o.position,originalPosition:o.originalPosition,offset:o.positionAbs,item:o.currentItem,sender:e?e.element:null}}}),t.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var o=t(e.target);!this.mouseHandled&&o.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),o.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var o=t(e.currentTarget);o.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,o)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var o=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,o)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var o,n,r,i,s=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:s=!1,n=this.previousFilter||"",r=String.fromCharCode(e.keyCode),i=!1,clearTimeout(this.filterTimer),r===n?i=!0:r=n+r,o=this._filterMenuItems(r),o=i&&-1!==o.index(this.active.next())?this.active.nextAll(".ui-menu-item"):o,o.length||(r=String.fromCharCode(e.keyCode),o=this._filterMenuItems(r)),o.length?(this.focus(e,o),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var e,o,n=this,r=this.options.icons.submenu,i=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),o=e.parent(),n=t("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);o.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",o.attr("id"))}),e=i.add(this.element),o=e.find(this.options.items),o.not(".ui-menu-item").each(function(){var e=t(this);n._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),o.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),o.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var o,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),o=e.children(".ui-menu"),o.length&&t&&/^mouse/.test(t.type)&&this._startOpening(o),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var o,n,r,i,s,a;this._hasScroll()&&(o=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-o-n,i=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.outerHeight(),0>r?this.activeMenu.scrollTop(i+r):r+a>s&&this.activeMenu.scrollTop(i+r-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var o=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(o)},collapseAll:function(e,o){clearTimeout(this.timer),this.timer=this._delay(function(){var n=o?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,o){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[e]()),this.focus(o,n)},nextPage:function(e){var o,n,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return o=t(this),0>o.offset().top-n-r}),this.focus(e,o)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var o,n,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return o=t(this),o.offset().top-n+r>0}),this.focus(e,o)):this.focus(e,this.activeMenu.find(this.options.items).first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var o={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,o)},_filterMenuItems:function(e){var o=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=RegExp("^"+o,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(t.trim(t(this).text()))})}}),t.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,o,n,r=this.element[0].nodeName.toLowerCase(),i="textarea"===r,s="input"===r;this.isMultiLine=!!i||!s&&this.element.prop("isContentEditable"),this.valueMethod=this.element[i||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return e=!0,n=!0,void(o=!0);e=!1,n=!1,o=!1;var i=t.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:e=!0,this._move("previousPage",r);break;case i.PAGE_DOWN:e=!0,this._move("nextPage",r);break;case i.UP:e=!0,this._keyEvent("previous",r);break;case i.DOWN:e=!0,this._keyEvent("next",r);break;case i.ENTER:this.menu.active&&(e=!0,r.preventDefault(),this.menu.select(r));break;case i.TAB:this.menu.active&&this.menu.select(r);break;case i.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(r),r.preventDefault());break;default:o=!0,this._searchTimeout(r)}},keypress:function(n){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!o){var r=t.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var o=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===o||t.contains(o,n.target)||e.close()})})},menufocus:function(e,o){var n,r;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)})):(r=o.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:r})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(r.value),void((n=o.item.attr("aria-label")||r.value)&&t.trim(n).length&&(this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))))},menuselect:function(t,e){var o=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=o})),!1!==this._trigger("select",t,{item:o})&&this._value(o.value),this.term=this._value(),this.close(t),this.selectedItem=o}}),this.liveRegion=t("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,o,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(o,n){n(t.ui.autocomplete.filter(e,o.term))}):"string"==typeof this.options.source?(o=this.options.source,this.source=function(e,r){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:o,data:e,dataType:"json",success:function(t){r(t)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),o=this.menu.element.is(":visible"),n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!o&&!n)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),--this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var o=this.menu.element.empty();this._renderMenu(o,e),this.isNewMenu=!0,this.menu.refresh(),o.show(),this._resizeMenu(),o.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,o){var n=this;t.each(o,function(t,o){n._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,o){return t("<li>").text(o.label).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,o){var n=RegExp(t.ui.autocomplete.escapeRegex(o),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var o;this._superApply(arguments),this.options.disabled||this.cancelSearch||(o=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(o).appendTo(this.liveRegion))}}),t.ui.autocomplete;var s="ui-effects-",a=t;t.effects={effect:{}},function(t,e){function o(t,e,o){var n=u[e.type]||{};return null==t?o||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:t>n.max?n.max:t)}function n(o){var n=l(),r=n._rgba=[];return o=o.toLowerCase(),p(a,function(t,i){var s,a=i.re.exec(o),l=a&&i.parse(a),u=i.space||"rgba";return l?(s=n[u](l),n[c[u].cache]=s[c[u].cache],r=n._rgba=s._rgba,!1):e}),r.length?("0,0,0,0"===r.join()&&t.extend(r,i.transparent),n):i[o]}function r(t,e,o){return o=(o+1)%1,1>6*o?t+6*(e-t)*o:1>2*o?e:2>3*o?t+6*(e-t)*(2/3-o):t}var i,s=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],l=t.Color=function(e,o,n,r){return new t.Color.fn.parse(e,o,n,r)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},g=l.support={},h=t("<p>")[0],p=t.each;h.style.cssText="background-color:rgba(1,1,1,.5)",g.rgba=h.style.backgroundColor.indexOf("rgba")>-1,p(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),l.fn=t.extend(l.prototype,{parse:function(r,s,a,u){if(r===e)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=t(r).css(s),s=e);var g=this,h=t.type(r),d=this._rgba=[];return s!==e&&(r=[r,s,a,u],h="array"),"string"===h?this.parse(n(r)||i._default):"array"===h?(p(c.rgba.props,function(t,e){d[e.idx]=o(r[e.idx],e)}),this):"object"===h?(r instanceof l?p(c,function(t,e){r[e.cache]&&(g[e.cache]=r[e.cache].slice())}):p(c,function(e,n){var i=n.cache;p(n.props,function(t,e){if(!g[i]&&n.to){if("alpha"===t||null==r[t])return;g[i]=n.to(g._rgba)}g[i][e.idx]=o(r[t],e,!0)}),g[i]&&0>t.inArray(null,g[i].slice(0,3))&&(g[i][3]=1,n.from&&(g._rgba=n.from(g[i])))}),this):e},is:function(t){var o=l(t),n=!0,r=this;return p(c,function(t,i){var s,a=o[i.cache];return a&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],p(i.props,function(t,o){return null!=a[o.idx]?n=a[o.idx]===s[o.idx]:e})),n}),n},_space:function(){var t=[],e=this;return p(c,function(o,n){e[n.cache]&&t.push(o)}),t.pop()},transition:function(t,e){var n=l(t),r=n._space(),i=c[r],s=0===this.alpha()?l("transparent"):this,a=s[i.cache]||i.to(s._rgba),g=a.slice();return n=n[i.cache],p(i.props,function(t,r){var i=r.idx,s=a[i],l=n[i],c=u[r.type]||{};null!==l&&(null===s?g[i]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),g[i]=o((l-s)*e+s,r)))}),this[r](g)},blend:function(e){if(1===this._rgba[3])return this;var o=this._rgba.slice(),n=o.pop(),r=l(e)._rgba;return l(t.map(o,function(t,e){return(1-n)*r[e]+n*t}))},toRgbaString:function(){var e="rgba(",o=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===o[3]&&(o.pop(),e="rgb("),e+o.join()+")"},toHslaString:function(){var e="hsla(",o=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===o[3]&&(o.pop(),e="hsl("),e+o.join()+")"},toHexString:function(e){var o=this._rgba.slice(),n=o.pop();return e&&o.push(~~(255*n)),"#"+t.map(o,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,o,n=t[0]/255,r=t[1]/255,i=t[2]/255,s=t[3],a=Math.max(n,r,i),l=Math.min(n,r,i),c=a-l,u=a+l,g=.5*u;return e=l===a?0:n===a?60*(r-i)/c+360:r===a?60*(i-n)/c+120:60*(n-r)/c+240,o=0===c?0:.5>=g?c/u:c/(2-u),[Math.round(e)%360,o,g,null==s?1:s]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,o=t[1],n=t[2],i=t[3],s=.5>=n?n*(1+o):n+o-n*o,a=2*n-s;return[Math.round(255*r(a,s,e+1/3)),Math.round(255*r(a,s,e)),Math.round(255*r(a,s,e-1/3)),i]},p(c,function(n,r){var i=r.props,a=r.cache,c=r.to,u=r.from;l.fn[n]=function(n){if(c&&!this[a]&&(this[a]=c(this._rgba)),n===e)return this[a].slice();var r,s=t.type(n),g="array"===s||"object"===s?n:arguments,h=this[a].slice();return p(i,function(t,e){var n=g["object"===s?t:e.idx];null==n&&(n=h[e.idx]),h[e.idx]=o(n,e)}),u?(r=l(u(h)),r[a]=h,r):l(h)},p(i,function(e,o){l.fn[e]||(l.fn[e]=function(r){var i,a=t.type(r),l="alpha"===e?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[o.idx];return"undefined"===a?u:("function"===a&&(r=r.call(this,u),a=t.type(r)),null==r&&o.empty?this:("string"===a&&(i=s.exec(r))&&(r=u+parseFloat(i[2])*("+"===i[1]?1:-1)),c[o.idx]=r,this[l](c)))})})}),l.hook=function(e){var o=e.split(" ");p(o,function(e,o){t.cssHooks[o]={set:function(e,r){var i,s,a="";if("transparent"!==r&&("string"!==t.type(r)||(i=n(r)))){if(r=l(i||r),!g.rgba&&1!==r._rgba[3]){for(s="backgroundColor"===o?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(t){}r=r.blend(a&&"transparent"!==a?a:"_default")}r=r.toRgbaString()}try{e.style[o]=r}catch(t){}}},t.fx.step[o]=function(e){e.colorInit||(e.start=l(e.elem,o),e.end=l(e.end),e.colorInit=!0),t.cssHooks[o].set(e.elem,e.start.transition(e.end,e.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return p(["Top","Right","Bottom","Left"],function(o,n){e["border"+n+"Color"]=t}),e}},i=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(a),function(){function e(e){var o,n,r=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,i={};if(r&&r.length&&r[0]&&r[r[0]])for(n=r.length;n--;)o=r[n],"string"==typeof r[o]&&(i[t.camelCase(o)]=r[o]);else for(o in r)"string"==typeof r[o]&&(i[o]=r[o]);return i}function o(e,o){var n,i,s={};for(n in o)i=o[n],e[n]!==i&&(r[n]||(t.fx.step[n]||!isNaN(parseFloat(i)))&&(s[n]=i));return s}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,o){t.fx.step[o]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(a.style(t.elem,o,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(r,i,s,a){var l=t.speed(i,s,a);return this.queue(function(){var i,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){return{el:t(this),start:e(this)}}),i=function(){t.each(n,function(t,e){r[e]&&s[e+"Class"](r[e])})},i(),c=c.map(function(){return this.end=e(this.el[0]),this.diff=o(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var e=this,o=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){o.resolve(e)}});return this.el.animate(this.diff,n),o.promise()}),t.when.apply(t,c.get()).done(function(){i(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(o,n,r,i){return n?t.effects.animateClass.call(this,{add:o},n,r,i):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(o,n,r,i){return arguments.length>1?t.effects.animateClass.call(this,{remove:o},n,r,i):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(o,n,r,i,s){return"boolean"==typeof n||void 0===n?r?t.effects.animateClass.call(this,n?{add:o}:{remove:o},r,i,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:o},n,r,i)}}(t.fn.toggleClass),switchClass:function(e,o,n,r,i){return t.effects.animateClass.call(this,{add:o,remove:e},n,r,i)}})}(),function(){function e(e,o,n,r){return t.isPlainObject(e)&&(o=e,e=e.effect),e={effect:e},null==o&&(o={}),t.isFunction(o)&&(r=o,n=null,o={}),("number"==typeof o||t.fx.speeds[o])&&(r=n,n=o,o={}),t.isFunction(n)&&(r=n,n=null),o&&t.extend(e,o),n=n||o.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=r||o.complete,e}function o(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}t.extend(t.effects,{version:"1.11.2",save:function(t,e){for(var o=0;e.length>o;o++)null!==e[o]&&t.data(s+e[o],t[0].style[e[o]])},restore:function(t,e){var o,n;for(n=0;e.length>n;n++)null!==e[n]&&(o=t.data(s+e[n]),void 0===o&&(o=""),t.css(e[n],o))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var o,n;switch(t[0]){case"top":o=0;break;case"middle":o=.5;break;case"bottom":o=1;break;default:o=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:o}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var o={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:e.width(),height:e.height()},i=document.activeElement;try{i.id}catch(t){i=document.body}return e.wrap(n),(e[0]===i||t.contains(e[0],i))&&t(i).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(o,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){o[n]=e.css(n),isNaN(parseInt(o[n],10))&&(o[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(r),n.css(o).show()},removeWrapper:function(e){var o=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===o||t.contains(e[0],o))&&t(o).focus()),e},setTransition:function(e,o,n,r){return r=r||{},t.each(o,function(t,o){var i=e.cssUnit(o);i[0]>0&&(r[o]=i[0]*n+i[1])}),r}}),t.fn.extend({effect:function(){function o(e){function o(){t.isFunction(i)&&i.call(r[0]),t.isFunction(e)&&e()}var r=t(this),i=n.complete,a=n.mode;(r.is(":hidden")?"hide"===a:"show"===a)?(r[a](),o()):s.call(r[0],n,o)}var n=e.apply(this,arguments),r=n.mode,i=n.queue,s=t.effects.effect[n.effect];return t.fx.off||!s?r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):!1===i?this.each(o):this.queue(i||"fx",o)},show:function(t){return function(n){if(o(n))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="show",this.effect.call(this,r)}}(t.fn.show),hide:function(t){return function(n){if(o(n))return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="hide",this.effect.call(this,r)}}(t.fn.hide),toggle:function(t){return function(n){if(o(n)||"boolean"==typeof n)return t.apply(this,arguments);var r=e.apply(this,arguments);return r.mode="toggle",this.effect.call(this,r)}}(t.fn.toggle),cssUnit:function(e){var o=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){o.indexOf(e)>0&&(n=[parseFloat(o),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,o){e[o]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,o=4;((e=Math.pow(2,--o))-1)/11>t;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,o){t.easing["easeIn"+e]=o,t.easing["easeOut"+e]=function(t){return 1-o(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?o(2*t)/2:1-o(-2*t+2)/2}})}(),t.effects})},function(t,e,o){(function(n){var r,i,r,s,i;/*!
* Velocity.js: Accelerated JavaScript animation.
* @version 0.11.2
* @docs http://VelocityJS.org
* @license Copyright 2014 Julian Shapiro. MIT License: http://en.wikipedia.org/wiki/MIT_License
*/
!function(n){window.Velocity?(r=n,void 0!==(i="function"==typeof r?r.call(e,o,e,t):r)&&(t.exports=i)):(s=[o(0)],r=n,void 0!==(i="function"==typeof r?r.apply(e,s):r)&&(t.exports=i))}(function(t){return function(e,o,n,r){function i(t){for(var e=-1,o=t?t.length:0,n=[];++e<o;){var r=t[e];r&&n.push(r)}return n}function s(t){var e=g.data(t,h);return null===e?r:e}function a(t){return function(e){return Math.round(e*t)*(1/t)}}function l(t,e){var o=t;return v.isString(t)?_.Easings[t]||(o=!1):o=v.isArray(t)&&1===t.length?a.apply(null,t):v.isArray(t)&&2===t.length?E.apply(null,t.concat([e])):!(!v.isArray(t)||4!==t.length)&&b.apply(null,t),!1===o&&(o=_.Easings[_.defaults.easing]?_.defaults.easing:d),o}function c(t){if(t)for(var e=(new Date).getTime(),o=0,n=_.State.calls.length;n>o;o++)if(_.State.calls[o]){var i=_.State.calls[o],a=i[0],l=i[2],g=i[3];g||(g=_.State.calls[o][3]=e-16);for(var h=Math.min((e-g)/l.duration,1),p=0,d=a.length;d>p;p++){var f=a[p],m=f.element;if(s(m)){var b=!1;l.display&&"none"!==l.display&&S.setPropertyValue(m,"display",l.display),l.visibility&&"hidden"!==l.visibility&&S.setPropertyValue(m,"visibility",l.visibility);for(var E in f)if("element"!==E){var k,T=f[E],C=v.isString(T.easing)?_.Easings[T.easing]:T.easing;if(k=1===h?T.endValue:T.startValue+(T.endValue-T.startValue)*C(h),T.currentValue=k,S.Hooks.registered[E]){var x=S.Hooks.getRoot(E),w=s(m).rootPropertyValueCache[x];w&&(T.rootPropertyValue=w)}var B=S.setPropertyValue(m,E,T.currentValue+(0===parseFloat(k)?"":T.unitType),T.rootPropertyValue,T.scrollData);S.Hooks.registered[E]&&(s(m).rootPropertyValueCache[x]=S.Normalizations.registered[x]?S.Normalizations.registered[x]("extract",null,B[1]):B[1]),"transform"===B[0]&&(b=!0)}l.mobileHA&&s(m).transformCache.translate3d===r&&(s(m).transformCache.translate3d="(0px, 0px, 0px)",b=!0),b&&S.flushTransformCache(m)}}l.display&&"none"!==l.display&&(_.State.calls[o][2].display=!1),l.visibility&&"hidden"!==l.visibility&&(_.State.calls[o][2].visibility=!1),l.progress&&l.progress.call(i[1],i[1],h,Math.max(0,g+l.duration-e),g),1===h&&u(o)}_.State.isTicking&&(_.mock?c(!0):y(c))}function u(t,e){if(!_.State.calls[t])return!1;for(var o=_.State.calls[t][0],n=_.State.calls[t][1],i=_.State.calls[t][2],a=_.State.calls[t][4],l=!1,c=0,u=o.length;u>c;c++){var h=o[c].element;if(e||i.loop||("none"===i.display&&S.setPropertyValue(h,"display",i.display),"hidden"===i.visibility&&S.setPropertyValue(h,"visibility",i.visibility)),(g.queue(h)[1]===r||!/\.velocityQueueEntryFlag/i.test(g.queue(h)[1]))&&s(h)){s(h).isAnimating=!1,s(h).rootPropertyValueCache={};var p=!1;g.each(s(h).transformCache,function(t,e){var o=/^scale/.test(t)?1:0;new RegExp("^\\("+o+"[^.]").test(e)&&(p=!0,delete s(h).transformCache[t])}),i.mobileHA&&(p=!0,delete s(h).transformCache.translate3d),p&&S.flushTransformCache(h),S.Values.removeClass(h,"velocity-animating")}if(!e&&i.complete&&!i.loop&&c===u-1)try{i.complete.call(n,n)}catch(t){setTimeout(function(){throw t},1)}a&&!0!==i.loop&&a(n),!0!==i.loop||e||_.animate(h,"reverse",{loop:!0,delay:i.delay}),!1!==i.queue&&g.dequeue(h,i.queue)}_.State.calls[t]=!1;for(var d=0,f=_.State.calls.length;f>d;d++)if(!1!==_.State.calls[d]){l=!0;break}!1===l&&(_.State.isTicking=!1,delete _.State.calls,_.State.calls=[])}var g,h="velocity",p=400,d="swing",f=function(){if(n.documentMode)return n.documentMode;for(var t=7;t>4;t--){var e=n.createElement("div");if(e.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",e.getElementsByTagName("span").length)return e=null,t}return r}(),m=function(){var t=0;return o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||function(e){var o,n=(new Date).getTime();return o=Math.max(0,16-(n-t)),t=n+o,setTimeout(function(){e(n+o)},o)}}(),y=o.requestAnimationFrame||m,v={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&t.length!==r&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||o.Zepto&&o.Zepto.zepto.isZ(t))},isSVG:function(t){return o.SVGElement&&t instanceof SVGElement},isEmptyObject:function(t){var e;for(e in t)return!1;return!0}};if(t&&t.fn!==r?g=t:o.Velocity&&o.Velocity.Utilities&&(g=o.Velocity.Utilities),!g)throw new Error("Velocity: Either jQuery or Velocity's jQuery shim must first be loaded.");if(e.Velocity!==r&&e.Velocity.Utilities==r)throw new Error("Velocity: Namespace is occupied.");if(7>=f){if(t)return void(t.fn.velocity=t.fn.animate);throw new Error("Velocity: For IE<=7, Velocity falls back to jQuery, which must first be loaded.")}if(8===f&&!t)throw new Error("Velocity: For IE8, Velocity requires jQuery proper to be loaded; Velocity's jQuery shim does not work with IE8.");var _={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:o.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:g,Sequences:{},Easings:{},Promise:o.Promise,defaults:{queue:"",duration:p,easing:d,begin:null,complete:null,progress:null,display:null,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){g.data(t,h,{isSVG:v.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},animate:function(){},hook:function(t,e,o){var n=r;return v.isWrapped(t)&&(t=[].slice.call(t)),g.each(v.isNode(t)?[t]:t,function(t,i){if(s(i)===r&&_.init(i),o===r)n===r&&(n=_.CSS.getPropertyValue(i,e));else{var a=_.CSS.setPropertyValue(i,e,o);"transform"===a[0]&&_.CSS.flushTransformCache(i),n=a}}),n},mock:!1,version:{major:0,minor:11,patch:2},debug:!1};o.pageYOffset!==r?(_.State.scrollAnchor=o,_.State.scrollPropertyLeft="pageXOffset",_.State.scrollPropertyTop="pageYOffset"):(_.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,_.State.scrollPropertyLeft="scrollLeft",_.State.scrollPropertyTop="scrollTop");var b=function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function o(t){return 3*t}function n(n,r,i){return((t(r,i)*n+e(r,i))*n+o(r))*n}function r(n,r,i){return 3*t(r,i)*n*n+2*e(r,i)*n+o(r)}return function(t,e,o,i){function s(e){for(var i=e,s=0;8>s;++s){var a=r(i,t,o);if(0===a)return i;i-=(n(i,t,o)-e)/a}return i}if(4!==arguments.length)return!1;for(var a=0;4>a;++a)if("number"!=typeof arguments[a]||isNaN(arguments[a])||!isFinite(arguments[a]))return!1;return t=Math.min(t,1),o=Math.min(o,1),t=Math.max(t,0),o=Math.max(o,0),function(r){return t===e&&o===i?r:n(s(r),e,i)}}}(),E=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,o,n){var r={x:e.x+n.dx*o,v:e.v+n.dv*o,tension:e.tension,friction:e.friction};return{dx:r.v,dv:t(r)}}function o(o,n){var r={dx:o.v,dv:t(o)},i=e(o,.5*n,r),s=e(o,.5*n,i),a=e(o,n,s),l=1/6*(r.dx+2*(i.dx+s.dx)+a.dx),c=1/6*(r.dv+2*(i.dv+s.dv)+a.dv);return o.x=o.x+l*n,o.v=o.v+c*n,o}return function t(e,n,r){var i,s,a,l={x:-1,v:0,tension:null,friction:null},c=[0],u=0;for(e=parseFloat(e)||500,n=parseFloat(n)||20,r=r||null,l.tension=e,l.friction=n,i=null!==r,i?(u=t(e,n),s=u/r*.016):s=.016;a=o(a||l,s),c.push(1+a.x),u+=16,Math.abs(a.x)>1e-4&&Math.abs(a.v)>1e-4;);return i?function(t){return c[t*(c.length-1)|0]}:u}}();!function(){_.Easings.linear=function(t){return t},_.Easings.swing=function(t){return.5-Math.cos(t*Math.PI)/2},_.Easings.spring=function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)},_.Easings.ease=b(.25,.1,.25,1),_.Easings["ease-in"]=b(.42,0,1,1),_.Easings["ease-out"]=b(0,0,.58,1),_.Easings["ease-in-out"]=b(.42,0,.58,1);var t={};g.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,o){t[o]=function(t){return Math.pow(t,e+2)}}),g.extend(t,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,o=4;t<((e=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((3*e-2)/22-t,2)}}),g.each(t,function(t,e){_.Easings["easeIn"+t]=e,_.Easings["easeOut"+t]=function(t){return 1-e(1-t)},_.Easings["easeInOut"+t]=function(t){return.5>t?e(2*t)/2:1-e(-2*t+2)/2}})}();var S=_.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<S.Lists.colors.length;t++)S.Hooks.templates[S.Lists.colors[t]]=["Red Green Blue Alpha","255 255 255 1"];var e,o,n;if(f)for(e in S.Hooks.templates){o=S.Hooks.templates[e],n=o[0].split(" ");var r=o[1].match(S.RegEx.valueSplit);"Color"===n[0]&&(n.push(n.shift()),r.push(r.shift()),S.Hooks.templates[e]=[n.join(" "),r.join(" ")])}for(e in S.Hooks.templates){o=S.Hooks.templates[e],n=o[0].split(" ");for(var t in n){var i=e+n[t],s=t;S.Hooks.registered[i]=[e,s]}}},getRoot:function(t){var e=S.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return S.RegEx.valueUnwrap.test(e)&&(e=e.match(S.Hooks.RegEx.valueUnwrap)[1]),S.Values.isCSSNullValue(e)&&(e=S.Hooks.templates[t][1]),e},extractValue:function(t,e){var o=S.Hooks.registered[t];if(o){var n=o[0],r=o[1];return e=S.Hooks.cleanRootPropertyValue(n,e),e.toString().match(S.RegEx.valueSplit)[r]}return e},injectValue:function(t,e,o){var n=S.Hooks.registered[t];if(n){var r,i=n[0],s=n[1];return o=S.Hooks.cleanRootPropertyValue(i,o),r=o.toString().match(S.RegEx.valueSplit),r[s]=e,r.join(" ")}return o}},Normalizations:{registered:{clip:function(t,e,o){switch(t){case"name":return"clip";case"extract":var n;return S.RegEx.wrappedValueAlreadyExtracted.test(o)?n=o:(n=o.toString().match(S.RegEx.valueUnwrap),n=n?n[1].replace(/,(\s+)?/g," "):o),n;case"inject":return"rect("+o+")"}},opacity:function(t,e,o){if(8>=f)switch(t){case"name":return"filter";case"extract":var n=o.toString().match(/alpha\(opacity=(.*)\)/i);return o=n?n[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(o)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(o),10)+")"}else switch(t){case"name":return"opacity";case"extract":case"inject":return o}}},register:function(){9>=f||_.State.isGingerbread||(S.Lists.transformsBase=S.Lists.transformsBase.concat(S.Lists.transforms3D));for(var t=0;t<S.Lists.transformsBase.length;t++)!function(){var e=S.Lists.transformsBase[t];S.Normalizations.registered[e]=function(t,o,n){switch(t){case"name":return"transform";case"extract":return s(o)===r||s(o).transformCache[e]===r?/^scale/i.test(e)?1:0:s(o).transformCache[e].replace(/[()]/g,"");case"inject":var i=!1;switch(e.substr(0,e.length-1)){case"translate":i=!/(%|px|em|rem|vw|vh|\d)$/i.test(n);break;case"scal":case"scale":_.State.isAndroid&&s(o).transformCache[e]===r&&1>n&&(n=1),i=!/(\d)$/i.test(n);break;case"skew":i=!/(deg|\d)$/i.test(n);break;case"rotate":i=!/(deg|\d)$/i.test(n)}return i||(s(o).transformCache[e]="("+n+")"),s(o).transformCache[e]}}}();for(var t=0;t<S.Lists.colors.length;t++)!function(){var e=S.Lists.colors[t];S.Normalizations.registered[e]=function(t,o,n){switch(t){case"name":return e;case"extract":var i;if(S.RegEx.wrappedValueAlreadyExtracted.test(n))i=n;else{var s,a={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(n)?s=a[n]!==r?a[n]:a.black:S.RegEx.isHex.test(n)?s="rgb("+S.Values.hexToRgb(n).join(" ")+")":/^rgba?\(/i.test(n)||(s=a.black),i=(s||n).toString().match(S.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==i.split(" ").length||(i+=" 1"),i;case"inject":return 8>=f?4===n.split(" ").length&&(n=n.split(/\s+/).slice(0,3).join(" ")):3===n.split(" ").length&&(n+=" 1"),(8>=f?"rgb":"rgba")+"("+n.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||_.State.isAndroid&&!_.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(_.State.prefixMatches[t])return[_.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],o=0,n=e.length;n>o;o++){var r;if(r=0===o?t:e[o]+t.replace(/^\w/,function(t){return t.toUpperCase()}),v.isString(_.State.prefixElement.style[r]))return _.State.prefixMatches[t]=r,[r,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e,o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return t=t.replace(o,function(t,e,o,n){return e+e+o+o+n+n}),e=n.exec(t),e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,e,n,i){function a(t,e){function n(){c&&S.setPropertyValue(t,"display","none")}var l=0;if(8>=f)l=g.css(t,e);else{var c=!1;if(/^(width|height)$/.test(e)&&0===S.getPropertyValue(t,"display")&&(c=!0,S.setPropertyValue(t,"display",S.Values.getDisplayType(t))),!i){if("height"===e&&"border-box"!==S.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var u=t.offsetHeight-(parseFloat(S.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(S.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(S.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(S.getPropertyValue(t,"paddingBottom"))||0);return n(),u}if("width"===e&&"border-box"!==S.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var h=t.offsetWidth-(parseFloat(S.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(S.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(S.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(S.getPropertyValue(t,"paddingRight"))||0);return n(),h}}var p;p=s(t)===r?o.getComputedStyle(t,null):s(t).computedStyle?s(t).computedStyle:s(t).computedStyle=o.getComputedStyle(t,null),(f||_.State.isFirefox)&&"borderColor"===e&&(e="borderTopColor"),l=9===f&&"filter"===e?p.getPropertyValue(e):p[e],(""===l||null===l)&&(l=t.style[e]),n()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(e)){var d=a(t,"position");("fixed"===d||"absolute"===d&&/top|left/i.test(e))&&(l=g(t).position()[e]+"px")}return l}var l;if(S.Hooks.registered[e]){var c=e,u=S.Hooks.getRoot(c);n===r&&(n=S.getPropertyValue(t,S.Names.prefixCheck(u)[0])),S.Normalizations.registered[u]&&(n=S.Normalizations.registered[u]("extract",t,n)),l=S.Hooks.extractValue(c,n)}else if(S.Normalizations.registered[e]){var h,p;h=S.Normalizations.registered[e]("name",t),"transform"!==h&&(p=a(t,S.Names.prefixCheck(h)[0]),S.Values.isCSSNullValue(p)&&S.Hooks.templates[e]&&(p=S.Hooks.templates[e][1])),l=S.Normalizations.registered[e]("extract",t,p)}return/^[\d-]/.test(l)||(l=s(t)&&s(t).isSVG&&S.Names.SVGAttribute(e)?/^(height|width)$/i.test(e)?t.getBBox()[e]:t.getAttribute(e):a(t,S.Names.prefixCheck(e)[0])),S.Values.isCSSNullValue(l)&&(l=0),_.debug>=2&&console.log("Get "+e+": "+l),l},setPropertyValue:function(t,e,n,r,i){var a=e;if("scroll"===e)i.container?i.container["scroll"+i.direction]=n:"Left"===i.direction?o.scrollTo(n,i.alternateValue):o.scrollTo(i.alternateValue,n);else if(S.Normalizations.registered[e]&&"transform"===S.Normalizations.registered[e]("name",t))S.Normalizations.registered[e]("inject",t,n),a="transform",n=s(t).transformCache[e];else{if(S.Hooks.registered[e]){var l=e,c=S.Hooks.getRoot(e);r=r||S.getPropertyValue(t,c),n=S.Hooks.injectValue(l,n,r),e=c}if(S.Normalizations.registered[e]&&(n=S.Normalizations.registered[e]("inject",t,n),e=S.Normalizations.registered[e]("name",t)),a=S.Names.prefixCheck(e)[0],8>=f)try{t.style[a]=n}catch(t){_.debug&&console.log("Browser does not support ["+n+"] for ["+a+"]")}else s(t)&&s(t).isSVG&&S.Names.SVGAttribute(e)?t.setAttribute(e,n):t.style[a]=n;_.debug>=2&&console.log("Set "+e+" ("+a+"): "+n)}return[a,n]},flushTransformCache:function(t){function e(e){return parseFloat(S.getPropertyValue(t,e))}var o="";if((f||_.State.isAndroid&&!_.State.isChrome)&&s(t).isSVG){var n={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};g.each(s(t).transformCache,function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),n[t]&&(o+=t+"("+n[t].join(" ")+") ",delete n[t])})}else{var r,i;g.each(s(t).transformCache,function(e){return r=s(t).transformCache[e],"transformPerspective"===e?(i=r,!0):(9===f&&"rotateZ"===e&&(e="rotate"),void(o+=e+r+" "))}),i&&(o="perspective"+i+" "+o)}S.setPropertyValue(t,"transform",o)}};S.Hooks.register(),S.Normalizations.register(),_.animate=function(){function t(){return a?x.promise||null:h}function e(){function t(t){function p(t,e){var o=r,n=r,i=r;return v.isArray(t)?(o=t[0],!v.isArray(t[1])&&/^[\d-]/.test(t[1])||v.isFunction(t[1])||S.RegEx.isHex.test(t[1])?i=t[1]:(v.isString(t[1])&&!S.RegEx.isHex.test(t[1])||v.isArray(t[1]))&&(n=e?t[1]:l(t[1],u.duration),t[2]!==r&&(i=t[2]))):o=t,e||(n=n||u.easing),v.isFunction(o)&&(o=o.call(a,k,E)),v.isFunction(i)&&(i=i.call(a,k,E)),[o||0,n,i]}function d(t,e){var o,n;return n=(e||0).toString().toLowerCase().replace(/[%A-z]+$/,function(t){return o=t,""}),o||(o=S.Values.getUnitType(t)),[n,o]}if(u.begin&&0===k)try{u.begin.call(f,f)}catch(t){setTimeout(function(){throw t},1)}if("scroll"===w){var b,T,C,B=/^x$/i.test(u.axis)?"Left":"Top",I=parseFloat(u.offset)||0;u.container?v.isWrapped(u.container)||v.isNode(u.container)?(u.container=u.container[0]||u.container,b=u.container["scroll"+B],C=b+g(a).position()[B.toLowerCase()]+I):u.container=null:(b=_.State.scrollAnchor[_.State["scrollProperty"+B]],T=_.State.scrollAnchor[_.State["scrollProperty"+("Left"===B?"Top":"Left")]],C=g(a).offset()[B.toLowerCase()]+I),h={scroll:{rootPropertyValue:!1,startValue:b,currentValue:b,endValue:C,unitType:"",easing:u.easing,scrollData:{container:u.container,direction:B,alternateValue:T}},element:a},_.debug&&console.log("tweensContainer (scroll): ",h.scroll,a)}else if("reverse"===w){if(!s(a).tweensContainer)return void g.dequeue(a,u.queue);"none"===s(a).opts.display&&(s(a).opts.display="block"),"hidden"===s(a).opts.visibility&&(s(a).opts.visibility="visible"),s(a).opts.loop=!1,s(a).opts.begin=null,s(a).opts.complete=null,y.easing||delete u.easing,y.duration||delete u.duration,u=g.extend({},s(a).opts,u);var A=g.extend(!0,{},s(a).tweensContainer);for(var N in A)if("element"!==N){var D=A[N].startValue;A[N].startValue=A[N].currentValue=A[N].endValue,A[N].endValue=D,v.isEmptyObject(y)||(A[N].easing=u.easing),_.debug&&console.log("reverse tweensContainer ("+N+"): "+JSON.stringify(A[N]),a)}h=A}else if("start"===w){var A;s(a).tweensContainer&&!0===s(a).isAnimating&&(A=s(a).tweensContainer),g.each(m,function(t,e){if(RegExp("^"+S.Lists.colors.join("$|^")+"$").test(t)){var o=p(e,!0),n=o[0],i=o[1],s=o[2];if(S.RegEx.isHex.test(n)){for(var a=["Red","Green","Blue"],l=S.Values.hexToRgb(n),c=s?S.Values.hexToRgb(s):r,u=0;u<a.length;u++)m[t+a[u]]=[l[u],i,c?c[u]:c];delete m[t]}}});for(var O in m){var j=p(m[O]),M=j[0],P=j[1],F=j[2];O=S.Names.camelCase(O);var H=S.Hooks.getRoot(O),U=!1;if(s(a).isSVG||!1!==S.Names.prefixCheck(H)[1]||S.Normalizations.registered[H]!==r){(u.display&&"none"!==u.display||u.visibility&&"hidden"!==u.visibility)&&/opacity|filter/.test(O)&&!F&&0!==M&&(F=0),u._cacheValues&&A&&A[O]?(F===r&&(F=A[O].endValue+A[O].unitType),U=s(a).rootPropertyValueCache[H]):S.Hooks.registered[O]?F===r?(U=S.getPropertyValue(a,H),F=S.getPropertyValue(a,O,U)):U=S.Hooks.templates[H][1]:F===r&&(F=S.getPropertyValue(a,O));var G,V,W,z=!1;if(G=d(O,F),F=G[0],W=G[1],G=d(O,M),M=G[0].replace(/^([+-\/*])=/,function(t,e){return z=e,""}),V=G[1],F=parseFloat(F)||0,M=parseFloat(M)||0,"%"===V&&(/^(fontSize|lineHeight)$/.test(O)?(M/=100,V="em"):/^scale/.test(O)?(M/=100,V=""):/(Red|Green|Blue)$/i.test(O)&&(M=M/100*255,V="")),/[\/*]/.test(z))V=W;else if(W!==V&&0!==F)if(0===M)V=W;else{e=e||function(){var t={myParent:a.parentNode||n.body,position:S.getPropertyValue(a,"position"),fontSize:S.getPropertyValue(a,"fontSize")},e=t.position===L.lastPosition&&t.myParent===L.lastParent,r=t.fontSize===L.lastFontSize;L.lastParent=t.myParent,L.lastPosition=t.position,L.lastFontSize=t.fontSize;var i=100,l={};if(r&&e)l.emToPx=L.lastEmToPx,l.percentToPxWidth=L.lastPercentToPxWidth,l.percentToPxHeight=L.lastPercentToPxHeight;else{var c=s(a).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");_.init(c),t.myParent.appendChild(c),_.CSS.setPropertyValue(c,"position",t.position),_.CSS.setPropertyValue(c,"fontSize",t.fontSize),_.CSS.setPropertyValue(c,"overflow","hidden"),_.CSS.setPropertyValue(c,"overflowX","hidden"),_.CSS.setPropertyValue(c,"overflowY","hidden"),_.CSS.setPropertyValue(c,"boxSizing","content-box"),_.CSS.setPropertyValue(c,"paddingLeft",i+"em"),_.CSS.setPropertyValue(c,"minWidth",i+"%"),_.CSS.setPropertyValue(c,"maxWidth",i+"%"),_.CSS.setPropertyValue(c,"width",i+"%"),_.CSS.setPropertyValue(c,"minHeight",i+"%"),_.CSS.setPropertyValue(c,"maxHeight",i+"%"),_.CSS.setPropertyValue(c,"height",i+"%"),l.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(S.getPropertyValue(c,"width",null,!0))||1)/i,l.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(S.getPropertyValue(c,"height",null,!0))||1)/i,l.emToPx=L.lastEmToPx=(parseFloat(S.getPropertyValue(c,"paddingLeft"))||1)/i,t.myParent.removeChild(c)}return null===L.remToPx&&(L.remToPx=parseFloat(S.getPropertyValue(n.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(o.innerWidth)/100,L.vhToPx=parseFloat(o.innerHeight)/100),l.remToPx=L.remToPx,l.vwToPx=L.vwToPx,l.vhToPx=L.vhToPx,_.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),a),l}();var q=/margin|padding|left|right|width|text|word|letter/i.test(O)||/X$/.test(O)?"x":"y";switch(W){case"%":F*="x"===q?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:F*=e[W+"ToPx"]}switch(V){case"%":F*=1/("x"===q?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:F*=1/e[V+"ToPx"]}}switch(z){case"+":M=F+M;break;case"-":M=F-M;break;case"*":M*=F;break;case"/":M=F/M}h[O]={rootPropertyValue:U,startValue:F,currentValue:F,endValue:M,unitType:V,easing:P},_.debug&&console.log("tweensContainer ("+O+"): "+JSON.stringify(h[O]),a)}else _.debug&&console.log("Skipping ["+H+"] due to a lack of browser support.")}h.element=a}h.element&&(S.Values.addClass(a,"velocity-animating"),R.push(h),s(a).tweensContainer=h,s(a).opts=u,s(a).isAnimating=!0,k===E-1?(_.State.calls.length>1e4&&(_.State.calls=i(_.State.calls)),_.State.calls.push([R,f,u,null,x.resolver]),!1===_.State.isTicking&&(_.State.isTicking=!0,c())):k++)}var e,a=this,u=g.extend({},_.defaults,y),h={};if(s(a)===r&&_.init(a),parseFloat(u.delay)&&!1!==u.queue&&g.queue(a,u.queue,function(t){_.velocityQueueEntryFlag=!0,s(a).delayTimer={setTimeout:setTimeout(t,parseFloat(u.delay)),next:t}}),!0===_.mock)u.duration=1;else switch(u.duration.toString().toLowerCase()){case"fast":u.duration=200;break;case"normal":u.duration=p;break;case"slow":u.duration=600;break;default:u.duration=parseFloat(u.duration)||1}u.easing=l(u.easing,u.duration),u.begin&&!v.isFunction(u.begin)&&(u.begin=null),u.progress&&!v.isFunction(u.progress)&&(u.progress=null),u.complete&&!v.isFunction(u.complete)&&(u.complete=null),u.display&&(u.display=u.display.toString().toLowerCase(),"auto"===u.display&&(u.display=_.CSS.Values.getDisplayType(a))),u.visibility&&(u.visibility=u.visibility.toString().toLowerCase()),u.mobileHA=u.mobileHA&&_.State.isMobile&&!_.State.isGingerbread,!1===u.queue?u.delay?setTimeout(t,u.delay):t():g.queue(a,u.queue,function(e,o){return!0===o?(x.promise&&x.resolver(f),!0):(_.velocityQueueEntryFlag=!0,void t(e))}),""!==u.queue&&"fx"!==u.queue||"inprogress"===g.queue(a)[0]||g.dequeue(a)}var a,h,d,f,m,y,b=arguments[0]&&(g.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||v.isString(arguments[0].properties));if(v.isWrapped(this)?(a=!1,d=0,f=this,h=this):(a=!0,d=1,f=b?arguments[0].elements:arguments[0]),f=v.isWrapped(f)?[].slice.call(f):f){b?(m=arguments[0].properties,y=arguments[0].options):(m=arguments[d],y=arguments[d+1]);var E=v.isArray(f)||v.isNodeList(f)?f.length:1,k=0;if("stop"!==m&&!g.isPlainObject(y)){var T=d+1;y={};for(var C=T;C<arguments.length;C++)!v.isArray(arguments[C])&&/^\d/.test(arguments[C])?y.duration=parseFloat(arguments[C]):v.isString(arguments[C])||v.isArray(arguments[C])?y.easing=arguments[C]:v.isFunction(arguments[C])&&(y.complete=arguments[C])}var x={promise:null,resolver:null,rejecter:null};a&&_.Promise&&(x.promise=new _.Promise(function(t,e){x.resolver=t,x.rejecter=e}));var w;switch(m){case"scroll":w="scroll";break;case"reverse":w="reverse";break;case"stop":g.each(v.isNode(f)?[f]:f,function(t,e){s(e)&&s(e).delayTimer&&(clearTimeout(s(e).delayTimer.setTimeout),s(e).delayTimer.next&&s(e).delayTimer.next(),delete s(e).delayTimer)});var B=[];return g.each(_.State.calls,function(t,e){e&&g.each(v.isNode(e[1])?[e[1]]:e[1],function(e,o){g.each(v.isNode(f)?[f]:f,function(e,n){if(n===o){if(s(n)&&g.each(s(n).tweensContainer,function(t,e){e.endValue=e.currentValue}),!0===y||v.isString(y)){var r=v.isString(y)?y:"";g.each(g.queue(n,r),function(t,e){v.isFunction(e)&&e(null,!0)}),g.queue(n,r,[])}B.push(t)}})})}),g.each(B,function(t,e){u(e,!0)}),x.promise&&x.resolver(f),t();default:if(!g.isPlainObject(m)||v.isEmptyObject(m)){if(v.isString(m)&&_.Sequences[m]){var I=y.duration,A=y.delay||0;return!0===y.backwards&&(f=(v.isWrapped(f)?[].slice.call(f):f).reverse()),g.each(f,function(t,e){parseFloat(y.stagger)?y.delay=A+parseFloat(y.stagger)*t:v.isFunction(y.stagger)&&(y.delay=A+y.stagger.call(e,t,E)),y.drag&&(y.duration=parseFloat(I)||(/^(callout|transition)/.test(m)?1e3:p),y.duration=Math.max(y.duration*(y.backwards?1-t/E:(t+1)/E),.75*y.duration,200)),_.Sequences[m].call(e,e,y||{},t,E,f,x.promise?x:r)}),t()}var N="Velocity: First argument ("+m+") was not a property map, a known action, or a registered sequence. Aborting.";return x.promise?x.rejecter(new Error(N)):console.log(N),t()}w="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];g.each(v.isNode(f)?[f]:f,function(t,o){v.isNode(o)&&e.call(o)});var D,O=g.extend({},_.defaults,y);if(O.loop=parseInt(O.loop),D=2*O.loop-1,O.loop)for(var j=0;D>j;j++){var M={delay:O.delay};j===D-1&&(M.display=O.display,M.visibility=O.visibility,M.complete=O.complete),_.animate(f,"reverse",M)}return t()}},_.State.isMobile||n.hidden===r||n.addEventListener("visibilitychange",function(){n.hidden?(y=function(t){return setTimeout(function(){t(!0)},16)},c()):y=o.requestAnimationFrame||m});var k;return t&&t.fn?k=t:o.Zepto&&(k=o.Zepto),(k||o).Velocity=_,k&&(k.fn.velocity=_.animate,k.fn.velocity.defaults=_.defaults),g.each(["Down","Up"],function(t,e){_.Sequences["slide"+e]=function(t,o,n,r,i,s){var a=g.extend({},o),l={height:null,marginTop:null,marginBottom:null,paddingTop:null,paddingBottom:null,overflow:null,overflowX:null,overflowY:null},c=a.begin,u=a.complete,h=!1;null!==a.display&&(a.display="Down"===e?a.display||"auto":a.display||"none"),a.begin=function(){function o(){l.height=parseFloat(_.CSS.getPropertyValue(t,"height")),t.style.height="auto",parseFloat(_.CSS.getPropertyValue(t,"height"))===l.height&&(h=!0),_.CSS.setPropertyValue(t,"height",l.height+"px")}if("Down"===e){l.overflow=[_.CSS.getPropertyValue(t,"overflow"),0],l.overflowX=[_.CSS.getPropertyValue(t,"overflowX"),0],l.overflowY=[_.CSS.getPropertyValue(t,"overflowY"),0],t.style.overflow="hidden",t.style.overflowX="visible",t.style.overflowY="hidden",o();for(var n in l)if(!/^overflow/.test(n)){var r=_.CSS.getPropertyValue(t,n);"height"===n&&(r=parseFloat(r)),l[n]=[r,0]}}else{o();for(var n in l){var r=_.CSS.getPropertyValue(t,n);"height"===n&&(r=parseFloat(r)),l[n]=[0,r]}t.style.overflow="hidden",t.style.overflowX="visible",t.style.overflowY="hidden"}c&&c.call(t,t)},a.complete=function(t){var o="Down"===e?0:1;!0===h?l.height[o]="auto":l.height[o]+="px";for(var n in l)t.style[n]=l[n][o];u&&u.call(t,t),s&&s.resolver(i||t)},_.animate(t,l,a)}}),g.each(["In","Out"],function(t,e){_.Sequences["fade"+e]=function(t,o,n,r,i,s){var a=g.extend({},o),l={opacity:"In"===e?1:0};if(n!==r-1)a.complete=a.begin=null;else{var c=a.complete;a.complete=function(){c&&c.call(t,t),s&&s.resolver(i||t)}}null!==a.display&&(a.display=a.display||("In"===e?"auto":"none")),_.animate(this,l,a)}}),_}(t||window,window,document)})}).call(e,o(0))},function(t,e){/*!
Waypoints Sticky Element Shortcut - 3.1.1
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(n){this.options=e.extend({},o.defaults,t.defaults,n),this.element=this.options.element,this.$element=e(this.element),this.createWrapper(),this.createWaypoint()}var e=window.jQuery,o=window.Waypoint;t.prototype.createWaypoint=function(){var t=this.options.handler;this.waypoint=new o(e.extend({},this.options,{element:this.wrapper,handler:e.proxy(function(e){var o=this.options.direction.indexOf(e)>-1,n=o?this.$element.outerHeight(!0):"";this.$wrapper.height(n),this.$element.toggleClass(this.options.stuckClass,o),t&&t.call(this,e)},this)}))},t.prototype.createWrapper=function(){this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},t.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass).unwrap())},t.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"},o.Sticky=t}()},function(t,e){/*!
Waypoints - 3.1.1
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(n){if(!n)throw new Error("No options passed to Waypoint constructor");if(!n.element)throw new Error("No element option passed to Waypoint constructor");if(!n.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,n),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),o[this.key]=this,e+=1}var e=0,o={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete o[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var n in o)e.push(o[n]);for(var r=0,i=e.length;i>r;r++)e[r][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=r.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+o,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,o+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var o=0,n={},r=window.Waypoint,i=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,r.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||r.isTouch)&&(e.didScroll=!0,r.requestAnimationFrame(t))})},e.prototype.handleResize=function(){r.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var o in e){var n=e[o],r=n.newScroll>n.oldScroll,i=r?n.forward:n.backward;for(var s in this.waypoints[o]){var a=this.waypoints[o][s],l=n.oldScroll<a.triggerPoint,c=n.newScroll>=a.triggerPoint,u=l&&c,g=!l&&!c;(u||g)&&(a.queueTrigger(i),t[a.group.id]=a.group)}}for(var h in t)t[h].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?r.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?r.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var o in this.waypoints[e])t.push(this.waypoints[e][o]);for(var n=0,r=t.length;r>n;n++)t[n].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,o=this.adapter.offset(),n={};this.handleScroll(),t={horizontal:{contextOffset:e?0:o.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:o.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var i=t[r];for(var s in this.waypoints[r]){var a,l,c,u,g,h=this.waypoints[r][s],p=h.options.offset,d=h.triggerPoint,f=0,m=null==d;h.element!==h.element.window&&(f=h.adapter.offset()[i.offsetProp]),"function"==typeof p?p=p.apply(h):"string"==typeof p&&(p=parseFloat(p),h.options.offset.indexOf("%")>-1&&(p=Math.ceil(i.contextDimension*p/100))),a=i.contextScroll-i.contextOffset,h.triggerPoint=f+a-p,l=d<i.oldScroll,c=h.triggerPoint>=i.oldScroll,u=l&&c,g=!l&&!c,!m&&u?(h.queueTrigger(i.backward),n[h.group.id]=h.group):!m&&g?(h.queueTrigger(i.forward),n[h.group.id]=h.group):m&&i.oldScroll>=h.triggerPoint&&(h.queueTrigger(i.forward),n[h.group.id]=h.group)}}for(var y in n)n[y].flushTriggers();return this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){i&&i(),e.refreshAll()},r.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},r.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function o(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},r=window.Waypoint;o.prototype.add=function(t){this.waypoints.push(t)},o.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},o.prototype.flushTriggers=function(){for(var o in this.triggerQueues){var n=this.triggerQueues[o],r="up"===o||"left"===o;n.sort(r?e:t);for(var i=0,s=n.length;s>i;i+=1){var a=n[i];(a.options.continuous||i===n.length-1)&&a.trigger([o])}}this.clearTriggerQueues()},o.prototype.next=function(e){this.waypoints.sort(t);var o=r.Adapter.inArray(e,this.waypoints);return o===this.waypoints.length-1?null:this.waypoints[o+1]},o.prototype.previous=function(e){this.waypoints.sort(t);var o=r.Adapter.inArray(e,this.waypoints);return o?this.waypoints[o-1]:null},o.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},o.prototype.remove=function(t){var e=r.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},o.prototype.first=function(){return this.waypoints[0]},o.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},o.findOrCreate=function(t){return n[t.axis][t.name]||new o(t)},r.Group=o}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,o=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,o){t.prototype[o]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[o].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(o,n){t[n]=e[n]}),o.adapters.push({name:"jquery",Adapter:t}),o.Adapter=t}(),function(){"use strict";function t(t){return function(){var o=[],n=arguments[0];return t.isFunction(arguments[0])&&(n=t.extend({},arguments[1]),n.handler=arguments[0]),this.each(function(){var r=t.extend({},n,{element:this});"string"==typeof r.context&&(r.context=t(this).closest(r.context)[0]),o.push(new e(r))}),o}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()},function(t,e,o){jsts={version:"0.13.2",algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},overlay:{snap:{}},polygonize:{},relate:{},union:{},valid:{}},planargraph:{},simplify:{},triangulate:{quadedge:{}},util:{}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.error={},jsts.error.IllegalArgumentError=function(t){this.name="IllegalArgumentError",this.message=t},jsts.error.IllegalArgumentError.prototype=new Error,jsts.error.TopologyError=function(t,e){this.name="TopologyError",this.message=e?t+" [ "+e+" ]":t},jsts.error.TopologyError.prototype=new Error,jsts.error.AbstractMethodInvocationError=function(){this.name="AbstractMethodInvocationError",this.message="Abstract method called, should be implemented in subclass."},jsts.error.AbstractMethodInvocationError.prototype=new Error,jsts.error.NotImplementedError=function(){this.name="NotImplementedError",this.message="This method has not yet been implemented."},jsts.error.NotImplementedError.prototype=new Error,jsts.error.NotRepresentableError=function(t){this.name="NotRepresentableError",this.message=t},jsts.error.NotRepresentableError.prototype=new Error,jsts.error.LocateFailureError=function(t){this.name="LocateFailureError",this.message=t},jsts.error.LocateFailureError.prototype=new Error,t.exports=jsts,jsts.geom.GeometryFilter=function(){},jsts.geom.GeometryFilter.prototype.filter=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.PolygonExtracter=function(t){this.comps=t},jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PolygonExtracter.prototype.comps=null,jsts.geom.util.PolygonExtracter.getPolygons=function(t,e){return void 0===e&&(e=[]),t instanceof jsts.geom.Polygon?e.push(t):t instanceof jsts.geom.GeometryCollection&&t.apply(new jsts.geom.util.PolygonExtracter(e)),e},jsts.geom.util.PolygonExtracter.prototype.filter=function(t){t instanceof jsts.geom.Polygon&&this.comps.push(t)},jsts.io.WKTParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}},jsts.io.WKTParser.prototype.read=function(t){var e,o,n;t=t.replace(/[\n\r]/g," ");var r=this.regExes.typeStr.exec(t);if(-1!==t.search("EMPTY")&&(r=this.regExes.emptyTypeStr.exec(t),r[2]=void 0),r&&(o=r[1].toLowerCase(),n=r[2],this.parse[o]&&(e=this.parse[o].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},jsts.io.WKTParser.prototype.write=function(t){return this.extractGeometry(t)},jsts.io.WKTParser.prototype.extractGeometry=function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[e])return null;var o=e.toUpperCase();return t.isEmpty()?o+" EMPTY":o+"("+this.extract[e].apply(this,[t])+")"},jsts.io.WKTParser.prototype.extract={coordinate:function(t){return t.x+" "+t.y},point:function(t){return t.coordinate.x+" "+t.coordinate.y},multipoint:function(t){for(var e=[],o=0,n=t.geometries.length;o<n;++o)e.push("("+this.extract.point.apply(this,[t.geometries[o]])+")");return e.join(",")},linestring:function(t){for(var e=[],o=0,n=t.points.length;o<n;++o)e.push(this.extract.coordinate.apply(this,[t.points[o]]));return e.join(",")},multilinestring:function(t){for(var e=[],o=0,n=t.geometries.length;o<n;++o)e.push("("+this.extract.linestring.apply(this,[t.geometries[o]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+this.extract.linestring.apply(this,[t.shell])+")");for(var o=0,n=t.holes.length;o<n;++o)e.push("("+this.extract.linestring.apply(this,[t.holes[o]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],o=0,n=t.geometries.length;o<n;++o)e.push("("+this.extract.polygon.apply(this,[t.geometries[o]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],o=0,n=t.geometries.length;o<n;++o)e.push(this.extractGeometry.apply(this,[t.geometries[o]]));return e.join(",")}},jsts.io.WKTParser.prototype.parse={point:function(t){if(void 0===t)return this.geometryFactory.createPoint(null);var e=t.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(e[0],e[1]))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint(null);for(var e,o=t.trim().split(","),n=[],r=0,i=o.length;r<i;++r)e=o[r].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString(null);for(var e,o=t.trim().split(","),n=[],r=0,i=o.length;r<i;++r)e=o[r].trim().split(this.regExes.spaces),n.push(new jsts.geom.Coordinate(e[0],e[1]));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing(null);for(var e,o=t.trim().split(","),n=[],r=0,i=o.length;r<i;++r)e=o[r].trim().split(this.regExes.spaces),n.push(new jsts.geom.Coordinate(e[0],e[1]));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString(null);for(var e,o=t.trim().split(this.regExes.parenComma),n=[],r=0,i=o.length;r<i;++r)e=o[r].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon(null);for(var e,o,n,r,i=t.trim().split(this.regExes.parenComma),s=[],a=0,l=i.length;a<l;++a)e=i[a].replace(this.regExes.trimParens,"$1"),o=this.parse.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(o.points),0===a?r=n:s.push(n);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon(null);for(var e,o=t.trim().split(this.regExes.doubleParenComma),n=[],r=0,i=o.length;r<i;++r)e=o[r].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection(null);t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),o=[],n=0,r=e.length;n<r;++n)o.push(jsts.io.WKTParser.prototype.read.apply(this,[e[n]]));return this.geometryFactory.createGeometryCollection(o)}},jsts.index.ItemVisitor=function(){},jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.CGAlgorithms=function(){},jsts.algorithm.CGAlgorithms.CLOCKWISE=-1,jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE,jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1,jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.algorithm.CGAlgorithms.COLLINEAR=0,jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR,jsts.algorithm.CGAlgorithms.orientationIndex=function(t,e,o){var n,r,i,s;return n=e.x-t.x,r=e.y-t.y,i=o.x-e.x,s=o.y-e.y,jsts.algorithm.RobustDeterminant.signOfDet2x2(n,r,i,s)},jsts.algorithm.CGAlgorithms.isPointInRing=function(t,e){return jsts.algorithm.CGAlgorithms.locatePointInRing(t,e)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.CGAlgorithms.locatePointInRing=function(t,e){return jsts.algorithm.RayCrossingCounter.locatePointInRing(t,e)},jsts.algorithm.CGAlgorithms.isOnLine=function(t,e){var o,n,r,i,s;for(o=new jsts.algorithm.RobustLineIntersector,n=1,r=e.length;n<r;n++)if(i=e[n-1],s=e[n],o.computeIntersection(t,i,s),o.hasIntersection())return!0;return!1},jsts.algorithm.CGAlgorithms.isCCW=function(t){var e,o,n,r,i,s,a,l,c,u;if((e=t.length-1)<3)throw new jsts.IllegalArgumentError("Ring has fewer than 3 points, so orientation cannot be determined");for(o=t[0],n=0,c=1;c<=e;c++)r=t[c],r.y>o.y&&(o=r,n=c);i=n;do{(i-=1)<0&&(i=e)}while(t[i].equals2D(o)&&i!==n);s=n;do{s=(s+1)%e}while(t[s].equals2D(o)&&s!==n);return a=t[i],l=t[s],!(a.equals2D(o)||l.equals2D(o)||a.equals2D(l))&&(u=jsts.algorithm.CGAlgorithms.computeOrientation(a,o,l),!1,0===u?a.x>l.x:u>0)},jsts.algorithm.CGAlgorithms.computeOrientation=function(t,e,o){return jsts.algorithm.CGAlgorithms.orientationIndex(t,e,o)},jsts.algorithm.CGAlgorithms.distancePointLine=function(t,e,o){if(e instanceof jsts.geom.Coordinate||jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments),e.x===o.x&&e.y===o.y)return t.distance(e);var n,r;return(n=((t.x-e.x)*(o.x-e.x)+(t.y-e.y)*(o.y-e.y))/((o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y)))<=0?t.distance(e):n>=1?t.distance(o):(r=((e.y-t.y)*(o.x-e.x)-(e.x-t.x)*(o.y-e.y))/((o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y)),Math.abs(r)*Math.sqrt((o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y)))},jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(t,e,o){var n=((e.y-t.y)*(o.x-e.x)-(e.x-t.x)*(o.y-e.y))/((o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y));return Math.abs(n)*Math.sqrt((o.x-e.x)*(o.x-e.x)+(o.y-e.y)*(o.y-e.y))},jsts.algorithm.CGAlgorithms.distancePointLine2=function(t,e){var o,n,r,i;if(0===e.length)throw new jsts.error.IllegalArgumentError("Line array must contain at least one vertex");for(o=t.distance(e[0]),n=0,r=e.length-1;n<r;n++)(i=jsts.algorithm.CGAlgorithms.distancePointLine(t,e[n],e[n+1]))<o&&(o=i);return o},jsts.algorithm.CGAlgorithms.distanceLineLine=function(t,e,o,n){if(t.equals(e))return jsts.algorithm.CGAlgorithms.distancePointLine(t,o,n);if(o.equals(n))return jsts.algorithm.CGAlgorithms.distancePointLine(n,t,e);var r,i,s,a,l,c;return r=(t.y-o.y)*(n.x-o.x)-(t.x-o.x)*(n.y-o.y),i=(e.x-t.x)*(n.y-o.y)-(e.y-t.y)*(n.x-o.x),s=(t.y-o.y)*(e.x-t.x)-(t.x-o.x)*(e.y-t.y),a=(e.x-t.x)*(n.y-o.y)-(e.y-t.y)*(n.x-o.x),0===i||0===a?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,o,n),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,o,n),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(o,t,e),jsts.algorithm.CGAlgorithms.distancePointLine(n,t,e)))):(l=s/a,c=r/i,c<0||c>1||l<0||l>1?Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(t,o,n),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,o,n),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(o,t,e),jsts.algorithm.CGAlgorithms.distancePointLine(n,t,e)))):0)},jsts.algorithm.CGAlgorithms.signedArea=function(t){if(t.length<3)return 0;var e,o,n,r,i,s,a;for(e=0,o=0,n=t.length-1;o<n;o++)r=t[o].x,i=t[o].y,s=t[o+1].x,a=t[o+1].y,e+=(r+s)*(a-i);return-e/2},jsts.algorithm.CGAlgorithms.signedArea=function(t){var e,o,n,r,i,s,a,l;if((e=t.length)<3)return 0;for(o=0,n=t[0],r=n.x,i=n.y,s=1;s<e;s++)n=t[s],a=n.x,l=n.y,o+=(r+a)*(l-i),r=a,i=l;return-o/2},jsts.algorithm.CGAlgorithms.computeLength=function(t){var e,o,n,r,i,s,a,l,c,u=t.length;if(u<=1)return 0;for(e=0,l=t[0],o=l.x,n=l.y,c=1,u,c;c<u;c++)l=t[c],r=l.x,i=l.y,s=r-o,a=i-n,e+=Math.sqrt(s*s+a*a),o=r,n=i;return e},jsts.algorithm.CGAlgorithms.length=function(){},jsts.algorithm.Angle=function(){},jsts.algorithm.Angle.PI_TIMES_2=2*Math.PI,jsts.algorithm.Angle.PI_OVER_2=Math.PI/2,jsts.algorithm.Angle.PI_OVER_4=Math.PI/4,jsts.algorithm.Angle.COUNTERCLOCKWISE=jsts.algorithm.CGAlgorithms.prototype.COUNTERCLOCKWISE,jsts.algorithm.Angle.CLOCKWISE=jsts.algorithm.CGAlgorithms.prototype.CLOCKWISE,jsts.algorithm.Angle.NONE=jsts.algorithm.CGAlgorithms.prototype.COLLINEAR,jsts.algorithm.Angle.toDegrees=function(t){return 180*t/Math.PI},jsts.algorithm.Angle.toRadians=function(t){return t*Math.PI/180},jsts.algorithm.Angle.angle=function(){return 1===arguments.length?jsts.algorithm.Angle.angleFromOrigo(arguments[0]):jsts.algorithm.Angle.angleBetweenCoords(arguments[0],arguments[1])},jsts.algorithm.Angle.angleBetweenCoords=function(t,e){var o,n;return o=e.x-t.x,n=e.y-t.y,Math.atan2(n,o)},jsts.algorithm.Angle.angleFromOrigo=function(t){return Math.atan2(t.y,t.x)},jsts.algorithm.Angle.isAcute=function(t,e,o){var n,r,i,s;return n=t.x-e.x,r=t.y-e.y,i=o.x-e.x,s=o.y-e.y,n*i+r*s>0},jsts.algorithm.Angle.isObtuse=function(t,e,o){var n,r,i,s;return n=t.x-e.x,r=t.y-e.y,i=o.x-e.x,s=o.y-e.y,n*i+r*s<0},jsts.algorithm.Angle.angleBetween=function(t,e,o){var n,r;return n=jsts.algorithm.Angle.angle(e,t),r=jsts.algorithm.Angle.angle(e,o),jsts.algorithm.Angle.diff(n,r)},jsts.algorithm.Angle.angleBetweenOriented=function(t,e,o){var n,r,i;return n=jsts.algorithm.Angle.angle(e,t),r=jsts.algorithm.Angle.angle(e,o),i=r-n,i<=-Math.PI?i+jsts.algorithm.Angle.PI_TIMES_2:i>Math.PI?i-jsts.algorithm.Angle.PI_TIMES_2:i},jsts.algorithm.Angle.interiorAngle=function(t,e,o){var n,r;return n=jsts.algorithm.Angle.angle(e,t),r=jsts.algorithm.Angle.angle(e,o),Math.abs(r-n)},jsts.algorithm.Angle.getTurn=function(t,e){var o=Math.sin(e-t);return o>0?jsts.algorithm.Angle.COUNTERCLOCKWISE:o<0?jsts.algorithm.Angle.CLOCKWISE:jsts.algorithm.Angle.NONE},jsts.algorithm.Angle.normalize=function(t){for(;t>Math.PI;)t-=jsts.algorithm.Angle.PI_TIMES_2;for(;t<=-Math.PI;)t+=jsts.algorithm.Angle.PI_TIMES_2;return t},jsts.algorithm.Angle.normalizePositive=function(t){if(t<0){for(;t<0;)t+=jsts.algorithm.Angle.PI_TIMES_2;t>=jsts.algorithm.Angle.PI_TIMES_2&&(t=0)}else{for(;t>=jsts.algorithm.Angle.PI_TIMES_2;)t-=jsts.algorithm.Angle.PI_TIMES_2;t<0&&(t=0)}return t},jsts.algorithm.Angle.diff=function(t,e){var o;return o=t<e?e-t:t-e,o>Math.PI&&(o=2*Math.PI-o),o},jsts.geom.GeometryComponentFilter=function(){},jsts.geom.GeometryComponentFilter.prototype.filter=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.util.LinearComponentExtracter=function(t,e){this.lines=t,this.isForcedToLineString=e},jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter,jsts.geom.util.LinearComponentExtracter.prototype.lines=null,jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=!1,jsts.geom.util.LinearComponentExtracter.getLines=function(t,e){if(1==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments);if(2==arguments.length&&"boolean"==typeof e)return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments);if(2==arguments.length&&t instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments);if(3==arguments.length&&t instanceof jsts.geom.Geometry)return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments);if(3==arguments.length)return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments);for(var o=0;o<t.length;o++){var n=t[o];jsts.geom.util.LinearComponentExtracter.getLines3(n,e)}return e},jsts.geom.util.LinearComponentExtracter.getLines2=function(t,e,o){for(var n=0;n<t.length;n++){var r=t[n];jsts.geom.util.LinearComponentExtracter.getLines4(r,e,o)}return e},jsts.geom.util.LinearComponentExtracter.getLines3=function(t,e){return t instanceof LineString?e.add(t):t.apply(new jsts.geom.util.LinearComponentExtracter(e)),e},jsts.geom.util.LinearComponentExtracter.getLines4=function(t,e,o){return t.apply(new jsts.geom.util.LinearComponentExtracter(e,o)),e},jsts.geom.util.LinearComponentExtracter.getLines5=function(t){return jsts.geom.util.LinearComponentExtracter.getLines6(t,!1)},jsts.geom.util.LinearComponentExtracter.getLines6=function(t,e){var o=[];return t.apply(new jsts.geom.util.LinearComponentExtracter(o,e)),o},jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(t){this.isForcedToLineString=t},jsts.geom.util.LinearComponentExtracter.prototype.filter=function(t){if(this.isForcedToLineString&&t instanceof jsts.geom.LinearRing){var e=t.getFactory().createLineString(t.getCoordinateSequence());return void this.lines.push(e)}(t instanceof jsts.geom.LineString||t instanceof jsts.geom.LinearRing)&&this.lines.push(t)},jsts.geom.Location=function(){},jsts.geom.Location.INTERIOR=0,jsts.geom.Location.BOUNDARY=1,jsts.geom.Location.EXTERIOR=2,jsts.geom.Location.NONE=-1,jsts.geom.Location.toLocationSymbol=function(t){switch(t){case jsts.geom.Location.EXTERIOR:return"e";case jsts.geom.Location.BOUNDARY:return"b";case jsts.geom.Location.INTERIOR:return"i";case jsts.geom.Location.NONE:return"-"}throw new jsts.IllegalArgumentError("Unknown location value: "+t)},function(){jsts.io.GeoJSONReader=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONReader.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(e),e},jsts.io.GeoJSONReader.prototype.reducePrecision=function(t){var e,o;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,o=t.points.length;e<o;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,o=t.geometries.length;e<o;e++)this.reducePrecision(t.geometries[e])}}(),jsts.geom.Geometry=function(t){this.factory=t},jsts.geom.Geometry.prototype.envelope=null,jsts.geom.Geometry.prototype.factory=null,jsts.geom.Geometry.prototype.getGeometryType=function(){return"Geometry"},jsts.geom.Geometry.hasNonEmptyElements=function(t){var e;for(e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},jsts.geom.Geometry.hasNullElements=function(t){var e;for(e=0;e<t.length;e++)if(null===t[e])return!0;return!1},jsts.geom.Geometry.prototype.getFactory=function(){return null!==this.factory&&void 0!==this.factory||(this.factory=new jsts.geom.GeometryFactory),this.factory},jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1},jsts.geom.Geometry.prototype.getGeometryN=function(t){return this},jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel()},jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.isSimple=function(){return this.checkNotGeometryCollection(this),new jsts.operation.IsSimpleOp(this).isSimple()},jsts.geom.Geometry.prototype.isValid=function(){return new jsts.operation.valid.IsValidOp(this).isValid()},jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.distance=function(t){return jsts.operation.distance.DistanceOp.distance(this,t)},jsts.geom.Geometry.prototype.isWithinDistance=function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&DistanceOp.isWithinDistance(this,t,e)},jsts.geom.Geometry.prototype.isRectangle=function(){return!1},jsts.geom.Geometry.prototype.getArea=function(){return 0},jsts.geom.Geometry.prototype.getLength=function(){return 0},jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty())return null;var t,e=null,o=this.getDimension();return 0===o?(t=new jsts.algorithm.CentroidPoint,t.add(this),e=t.getCentroid()):1===o?(t=new jsts.algorithm.CentroidLine,t.add(this),e=t.getCentroid()):(t=new jsts.algorithm.CentroidArea,t.add(this),e=t.getCentroid()),this.createPointFromInternalCoord(e,this)},jsts.geom.Geometry.prototype.getInteriorPoint=function(){var t,e=null,o=this.getDimension();return 0===o?(t=new InteriorPointPoint(this),e=t.getInteriorPoint()):1===o?(t=new InteriorPointLine(this),e=t.getInteriorPoint()):(t=new InteriorPointArea(this),e=t.getInteriorPoint()),this.createPointFromInternalCoord(e,this)},jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),this.envelope},jsts.geom.Geometry.prototype.disjoint=function(t){return!this.intersects(t)},jsts.geom.Geometry.prototype.touches=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&this.relate(t).isTouches(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.intersects=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&(this.isRectangle()?RectangleIntersects.intersects(this,t):t.isRectangle()?RectangleIntersects.intersects(t,this):this.relate(t).isIntersects())},jsts.geom.Geometry.prototype.crosses=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&this.relate(t).isCrosses(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.within=function(t){return t.contains(this)},jsts.geom.Geometry.prototype.contains=function(t){return!!this.getEnvelopeInternal().contains(t.getEnvelopeInternal())&&(this.isRectangle()?RectangleContains.contains(this,t):this.relate(t).isContains())},jsts.geom.Geometry.prototype.overlaps=function(t){return!!this.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&this.relate(t).isOverlaps(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.covers=function(t){return!!this.getEnvelopeInternal().covers(t.getEnvelopeInternal())&&(!!this.isRectangle()||this.relate(t).isCovers())},jsts.geom.Geometry.prototype.coveredBy=function(t){return t.covers(this)},jsts.geom.Geometry.prototype.relate=function(t,e){return 1===arguments.length?this.relate2.apply(this,arguments):this.relate2(t).matches(e)},jsts.geom.Geometry.prototype.relate2=function(t){return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.relate.RelateOp.relate(this,t)},jsts.geom.Geometry.prototype.equalsTopo=function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&this.relate(t).isEquals(this.getDimension(),t.getDimension())},jsts.geom.Geometry.prototype.equals=function(t){return(t instanceof jsts.geom.Geometry||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&this.equalsExact(t)},jsts.geom.Geometry.prototype.buffer=function(t,e,o){var n=new jsts.operation.buffer.BufferParameters(e,o);return jsts.operation.buffer.BufferOp.bufferOp2(this,t,n)},jsts.geom.Geometry.prototype.convexHull=function(){return new jsts.algorithm.ConvexHull(this).getConvexHull()},jsts.geom.Geometry.prototype.intersection=function(t){if(this.isEmpty())return this.getFactory().createGeometryCollection(null);if(t.isEmpty())return this.getFactory().createGeometryCollection(null);if(this.isGeometryCollection(this));return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.INTERSECTION)},jsts.geom.Geometry.prototype.union=function(t){return 0===arguments.length?jsts.operation.union.UnaryUnionOp.union(this):this.isEmpty()?t.clone():t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.UNION))},jsts.geom.Geometry.prototype.difference=function(t){return this.isEmpty()?this.getFactory().createGeometryCollection(null):t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.DIFFERENCE))},jsts.geom.Geometry.prototype.symDifference=function(t){return this.isEmpty()?t.clone():t.isEmpty()?this.clone():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,t,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE))},jsts.geom.Geometry.prototype.equalsExact=function(t,e){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.equalsNorm=function(t){return null!==t&&void 0!==t&&this.norm().equalsExact(t.norm())},jsts.geom.Geometry.prototype.apply=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.norm=function(){var t=this.clone();return t.normalize(),t},jsts.geom.Geometry.prototype.compareTo=function(t){var e=t;return this.getClassSortIndex()!==e.getClassSortIndex()?this.getClassSortIndex()-e.getClassSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)},jsts.geom.Geometry.prototype.isEquivalentClass=function(t){return this instanceof jsts.geom.Point&&t instanceof jsts.geom.Point||(!!(this instanceof jsts.geom.LineString&&t instanceof jsts.geom.LineString|t instanceof jsts.geom.LinearRing)||(!!(this instanceof jsts.geom.LinearRing&&t instanceof jsts.geom.LineString|t instanceof jsts.geom.LinearRing)||(this instanceof jsts.geom.Polygon&&t instanceof jsts.geom.Polygon||(this instanceof jsts.geom.MultiPoint&&t instanceof jsts.geom.MultiPoint||(this instanceof jsts.geom.MultiLineString&&t instanceof jsts.geom.MultiLineString||(this instanceof jsts.geom.MultiPolygon&&t instanceof jsts.geom.MultiPolygon||this instanceof jsts.geom.GeometryCollection&&t instanceof jsts.geom.GeometryCollection))))))},jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(t){if(t.isGeometryCollectionBase())throw new jsts.error.IllegalArgumentError("This method does not support GeometryCollection")},jsts.geom.Geometry.prototype.isGeometryCollection=function(){return this instanceof jsts.geom.GeometryCollection},jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return"jsts.geom.GeometryCollection"===this.CLASS_NAME},jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compareToSameClass=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Geometry.prototype.compare=function(t,e){for(var o=t.iterator(),n=e.iterator();o.hasNext()&&n.hasNext();){var r=o.next(),i=n.next(),s=r.compareTo(i);if(0!==s)return s}return o.hasNext()?1:n.hasNext()?-1:0},jsts.geom.Geometry.prototype.equal=function(t,e,o){return void 0===o||null===o||0===o?t.equals(e):t.distance(e)<=o},jsts.geom.Geometry.prototype.getClassSortIndex=function(){for(var t=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection],e=0;e<t.length;e++)if(this instanceof t[e])return e;return jsts.util.Assert.shouldNeverReachHere("Class not supported: "+this),-1},jsts.geom.Geometry.prototype.toString=function(){return(new jsts.io.WKTWriter).write(this)},jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},function(){jsts.geom.Coordinate=function(t,e){"number"==typeof t?(this.x=t,this.y=e):t instanceof jsts.geom.Coordinate?(this.x=parseFloat(t.x),this.y=parseFloat(t.y)):void 0===t||null===t?(this.x=0,this.y=0):"string"==typeof t&&(this.x=parseFloat(t),this.y=parseFloat(e))},jsts.geom.Coordinate.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y},jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y)},jsts.geom.Coordinate.prototype.distance=function(t){var e=this.x-t.x,o=this.y-t.y;return Math.sqrt(e*e+o*o)},jsts.geom.Coordinate.prototype.equals2D=function(t){return this.x===t.x&&this.y===t.y},jsts.geom.Coordinate.prototype.equals=function(t){return!(!t instanceof jsts.geom.Coordinate||void 0===t)&&this.equals2D(t)},jsts.geom.Coordinate.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},jsts.geom.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}}(),jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments)},jsts.geom.Envelope.prototype.minx=null,jsts.geom.Envelope.prototype.maxx=null,jsts.geom.Envelope.prototype.miny=null,jsts.geom.Envelope.prototype.maxy=null,jsts.geom.Envelope.prototype.init=function(){"number"==typeof arguments[0]&&4===arguments.length?this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3]):arguments[0]instanceof jsts.geom.Coordinate&&1===arguments.length?this.initFromCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate&&2===arguments.length?this.initFromCoordinates(arguments[0],arguments[1]):arguments[0]instanceof jsts.geom.Envelope&&1===arguments.length?this.initFromEnvelope(arguments[0]):this.setToNull()},jsts.geom.Envelope.prototype.initFromValues=function(t,e,o,n){t<e?(this.minx=t,this.maxx=e):(this.minx=e,this.maxx=t),o<n?(this.miny=o,this.maxy=n):(this.miny=n,this.maxy=o)},jsts.geom.Envelope.prototype.initFromCoordinates=function(t,e){this.initFromValues(t.x,e.x,t.y,e.y)},jsts.geom.Envelope.prototype.initFromCoordinate=function(t){this.initFromValues(t.x,t.x,t.y,t.y)},jsts.geom.Envelope.prototype.initFromEnvelope=function(t){this.minx=t.minx,this.maxx=t.maxx,this.miny=t.miny,this.maxy=t.maxy},jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx},jsts.geom.Envelope.prototype.getHeight=function(){return this.isNull()?0:this.maxy-this.miny},jsts.geom.Envelope.prototype.getWidth=function(){return this.isNull()?0:this.maxx-this.minx},jsts.geom.Envelope.prototype.getMinX=function(){return this.minx},jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx},jsts.geom.Envelope.prototype.getMinY=function(){return this.miny},jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy},jsts.geom.Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()},jsts.geom.Envelope.prototype.expandToInclude=function(){arguments[0]instanceof jsts.geom.Coordinate?this.expandToIncludeCoordinate(arguments[0]):arguments[0]instanceof jsts.geom.Envelope?this.expandToIncludeEnvelope(arguments[0]):this.expandToIncludeValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(t){this.expandToIncludeValues(t.x,t.y)},jsts.geom.Envelope.prototype.expandToIncludeValues=function(t,e){this.isNull()?(this.minx=t,this.maxx=t,this.miny=e,this.maxy=e):(t<this.minx&&(this.minx=t),t>this.maxx&&(this.maxx=t),e<this.miny&&(this.miny=e),e>this.maxy&&(this.maxy=e))},jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(t){t.isNull()||(this.isNull()?(this.minx=t.getMinX(),this.maxx=t.getMaxX(),this.miny=t.getMinY(),this.maxy=t.getMaxY()):(t.minx<this.minx&&(this.minx=t.minx),t.maxx>this.maxx&&(this.maxx=t.maxx),t.miny<this.miny&&(this.miny=t.miny),t.maxy>this.maxy&&(this.maxy=t.maxy)))},jsts.geom.Envelope.prototype.expandBy=function(){1===arguments.length?this.expandByDistance(arguments[0]):this.expandByDistances(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.expandByDistance=function(t){this.expandByDistances(t,t)},jsts.geom.Envelope.prototype.expandByDistances=function(t,e){this.isNull()||(this.minx-=t,this.maxx+=t,this.miny-=e,this.maxy+=e,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull())},jsts.geom.Envelope.prototype.translate=function(t,e){this.isNull()||this.init(this.minx+t,this.maxx+t,this.miny+e,this.maxy+e)},jsts.geom.Envelope.prototype.centre=function(){return this.isNull()?null:new jsts.geom.Coordinate((this.minx+this.maxx)/2,(this.miny+this.maxy)/2)},jsts.geom.Envelope.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new jsts.geom.Envelope;var e=this.minx>t.minx?this.minx:t.minx,o=this.miny>t.miny?this.miny:t.miny,n=this.maxx<t.maxx?this.maxx:t.maxx,r=this.maxy<t.maxy?this.maxy:t.maxy;return new jsts.geom.Envelope(e,n,o,r)},jsts.geom.Envelope.prototype.intersects=function(){return arguments[0]instanceof jsts.geom.Envelope?this.intersectsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.intersectsCoordinate(arguments[0]):this.intersectsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.intersectsEnvelope=function(t){return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)},jsts.geom.Envelope.prototype.intersectsCoordinate=function(t){return this.intersectsValues(t.x,t.y)},jsts.geom.Envelope.prototype.intersectsValues=function(t,e){return!this.isNull()&&!(t>this.maxx||t<this.minx||e>this.maxy||e<this.miny)},jsts.geom.Envelope.prototype.contains=function(){return arguments[0]instanceof jsts.geom.Envelope?this.containsEnvelope(arguments[0]):arguments[0]instanceof jsts.geom.Coordinate?this.containsCoordinate(arguments[0]):this.containsValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.containsEnvelope=function(t){return this.coversEnvelope(t)},jsts.geom.Envelope.prototype.containsCoordinate=function(t){return this.coversCoordinate(t)},jsts.geom.Envelope.prototype.containsValues=function(t,e){return this.coversValues(t,e)},jsts.geom.Envelope.prototype.covers=function(t){return t instanceof jsts.geom.Envelope?this.coversEnvelope(arguments[0]):t instanceof jsts.geom.Coordinate?this.coversCoordinate(arguments[0]):this.coversValues(arguments[0],arguments[1])},jsts.geom.Envelope.prototype.coversValues=function(t,e){return!this.isNull()&&(t>=this.minx&&t<=this.maxx&&e>=this.miny&&e<=this.maxy)};jsts.geom.Envelope.prototype.coversCoordinate=function(t){return this.coversValues(t.x,t.y)},jsts.geom.Envelope.prototype.coversEnvelope=function(t){return!this.isNull()&&!t.isNull()&&(t.minx>=this.minx&&t.maxx<=this.maxx&&t.miny>=this.miny&&t.maxy<=this.maxy)},jsts.geom.Envelope.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx&&(e=t.minx-this.maxx),this.minx>t.maxx&&(e=this.minx-t.maxx);var o=0;return this.maxy<t.miny&&(o=t.miny-this.maxy),this.miny>t.maxy&&(o=this.miny-t.maxy),0===e?o:0===o?e:Math.sqrt(e*e+o*o)},jsts.geom.Envelope.prototype.equals=function(t){return this.isNull()?t.isNull():this.maxx===t.maxx&&this.maxy===t.maxy&&this.minx===t.minx&&this.miny===t.miny},jsts.geom.Envelope.prototype.toString=function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},jsts.geom.Envelope.intersects=function(t,e,o){if(4===arguments.length)return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3]);var n=t.x<e.x?t.x:e.x,r=t.x>e.x?t.x:e.x,i=t.y<e.y?t.y:e.y,s=t.y>e.y?t.y:e.y;return o.x>=n&&o.x<=r&&o.y>=i&&o.y<=s},jsts.geom.Envelope.intersectsEnvelope=function(t,e,o,n){var r=Math.min(o.x,n.x),i=Math.max(o.x,n.x),s=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return!(s>i)&&(!(a<r)&&(r=Math.min(o.y,n.y),i=Math.max(o.y,n.y),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),!(s>i)&&!(a<r)))},jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.maxx,this.miny,this.maxy)},jsts.geom.util.GeometryCombiner=function(t){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(t),this.inputGeoms=t},jsts.geom.util.GeometryCombiner.combine=function(t){return arguments.length>1?this.combine2.apply(this,arguments):new jsts.geom.util.GeometryCombiner(t).combine()},jsts.geom.util.GeometryCombiner.combine2=function(){var t=new javascript.util.ArrayList;for(var e in arguments)t.add(arguments[e]);return new jsts.geom.util.GeometryCombiner(t).combine()},jsts.geom.util.GeometryCombiner.prototype.geomFactory=null,jsts.geom.util.GeometryCombiner.prototype.skipEmpty=!1,jsts.geom.util.GeometryCombiner.prototype.inputGeoms,jsts.geom.util.GeometryCombiner.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},jsts.geom.util.GeometryCombiner.prototype.combine=function(){var t,e=new javascript.util.ArrayList;for(t=this.inputGeoms.iterator();t.hasNext();){var o=t.next();this.extractElements(o,e)}return 0===e.size()?null!==this.geomFactory?geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(e)},jsts.geom.util.GeometryCombiner.prototype.extractElements=function(t,e){if(null!==t)for(var o=0;o<t.getNumGeometries();o++){var n=t.getGeometryN(o);this.skipEmpty&&n.isEmpty()||e.add(n)}},jsts.geom.PrecisionModel=function(t){if("number"==typeof t)return this.modelType=jsts.geom.PrecisionModel.FIXED,void(this.scale=t);this.modelType=t||jsts.geom.PrecisionModel.FLOATING,this.modelType===jsts.geom.PrecisionModel.FIXED&&(this.scale=1)},jsts.geom.PrecisionModel.FLOATING="FLOATING",jsts.geom.PrecisionModel.FIXED="FIXED",jsts.geom.PrecisionModel.FLOATING_SINGLE="FLOATING_SINGLE",jsts.geom.PrecisionModel.prototype.scale=null,jsts.geom.PrecisionModel.prototype.modelType=null,jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE},jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale},jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType},jsts.geom.PrecisionModel.prototype.equals=function(t){return!0},jsts.geom.PrecisionModel.prototype.makePrecise=function(t){return t instanceof jsts.geom.Coordinate?void this.makePrecise2(t):isNaN(t)?t:this.modelType===jsts.geom.PrecisionModel.FIXED?Math.round(t*this.scale)/this.scale:t},jsts.geom.PrecisionModel.prototype.makePrecise2=function(t){this.modelType!==jsts.geom.PrecisionModel.FLOATING&&(t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y))},jsts.geom.PrecisionModel.prototype.compareTo=function(t){return 0},jsts.geom.CoordinateFilter=function(){},jsts.geom.CoordinateFilter.prototype.filter=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.Point=function(t,e){this.factory=e,void 0!==t&&(this.coordinate=t)},jsts.geom.Point.prototype=new jsts.geom.Geometry,jsts.geom.Point.constructor=jsts.geom.Point,jsts.geom.Point.CLASS_NAME="jsts.geom.Point",jsts.geom.Point.prototype.coordinate=null,jsts.geom.Point.prototype.getX=function(){return this.coordinate.x},jsts.geom.Point.prototype.getY=function(){return this.coordinate.y},jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate},jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate]},jsts.geom.Point.prototype.isEmpty=function(){return null===this.coordinate},jsts.geom.Point.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.equal(t.getCoordinate(),this.getCoordinate(),e))},jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1},jsts.geom.Point.prototype.isSimple=function(){return!0},jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null)},jsts.geom.Point.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new jsts.geom.Envelope:new jsts.geom.Envelope(this.coordinate)},jsts.geom.Point.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter){if(this.isEmpty())return;t.filter(this.getCoordinate())}},jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory)},jsts.geom.Point.prototype.getDimension=function(){return 0},jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.Point.prototype.reverse=function(){return this.clone()},jsts.geom.Point.prototype.isValid=function(){return!!jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())},jsts.geom.Point.prototype.normalize=function(){},jsts.geom.Point.prototype.compareToSameClass=function(t){var e=t;return this.getCoordinate().compareTo(e.getCoordinate())},jsts.geom.Point.prototype.getGeometryType=function(){return"Point"},jsts.geom.Point.prototype.hashCode=function(){return"Point_"+this.coordinate.hashCode()},jsts.geom.Point.prototype.CLASS_NAME="jsts.geom.Point",jsts.geomgraph.EdgeIntersection=function(t,e,o){this.coord=new jsts.geom.Coordinate(t),this.segmentIndex=e,this.dist=o},jsts.geomgraph.EdgeIntersection.prototype.coord=null,jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null,jsts.geomgraph.EdgeIntersection.prototype.dist=null,jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex},jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist},jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},jsts.geomgraph.EdgeIntersection.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return""+this.segmentIndex+this.dist},function(){var t=jsts.geomgraph.EdgeIntersection,e=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(t){this.nodeMap=new e,this.edge=t},jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null,jsts.geomgraph.EdgeIntersectionList.prototype.edge=null,jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},jsts.geomgraph.EdgeIntersectionList.prototype.add=function(e,o,n){var r=new t(e,o,n),i=this.nodeMap.get(r);return null!==i?i:(this.nodeMap.put(r,r),r)},jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),o=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(o,n);t.add(r),o=n}},jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(t,e){var o=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(n);r||o--;var i=[],s=0;i[s++]=new jsts.geom.Coordinate(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)i[s++]=this.edge.pts[a];return r&&(i[s]=e.coord),new jsts.geomgraph.Edge(i,new jsts.geomgraph.Label(this.edge.label))}}(),function(){var t=function(t){this.message=t};t.prototype=new Error,t.prototype.name="AssertionFailedException",jsts.util.AssertionFailedException=t}(),function(){var t=jsts.util.AssertionFailedException;jsts.util.Assert=function(){},jsts.util.Assert.isTrue=function(e,o){if(!e)throw null===o?new t:new t(o)},jsts.util.Assert.equals=function(e,o,n){if(!o.equals(e))throw new t("Expected "+e+" but encountered "+o+(null!=n?": "+n:""))},jsts.util.Assert.shouldNeverReachHere=function(e){throw new t("Should never reach here"+(null!=e?": "+e:""))}}(),function(){var t=jsts.geom.Location,e=jsts.util.Assert,o=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(t){this.li=new jsts.algorithm.RobustLineIntersector,this.ptLocator=new jsts.algorithm.PointLocator,this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory),this.isolatedEdges=new o,this.arg=t},jsts.operation.relate.RelateComputer.prototype.li=null,jsts.operation.relate.RelateComputer.prototype.ptLocator=null,jsts.operation.relate.RelateComputer.prototype.arg=null,jsts.operation.relate.RelateComputer.prototype.nodes=null,jsts.operation.relate.RelateComputer.prototype.im=null,jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null,jsts.operation.relate.RelateComputer.prototype.invalidPoint=null,jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var e=new jsts.geom.IntersectionMatrix;if(e.set(t.EXTERIOR,t.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var o=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(o,e);var n=new jsts.operation.relate.EdgeEndBuilder,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var i=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e},jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();this.nodes.add(o)}},jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(t,e){var o=this.arg[0].getGeometry().getDimension(),n=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),i=t.hasProperInteriorIntersection();2===o&&2===n?r&&e.setAtLeast("212101212"):2===o&&1===n?(r&&e.setAtLeast("FFF0FFFF2"),i&&e.setAtLeast("1FFFFF1FF")):1===o&&2===n?(r&&e.setAtLeast("F0FFFFFF2"),i&&e.setAtLeast("1F1FFFFFF")):1===o&&1===n&&i&&e.setAtLeast("0FFFFFFFF")},jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var o=e.next();this.nodes.addNode(o.getCoordinate()).setLabel(t,o.getLabel().getLocation(t))}},jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(e){for(var o=this.arg[e].getEdgeIterator();o.hasNext();)for(var n=o.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),a=this.nodes.addNode(s.coord);r===t.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,t.INTERIOR)}},jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(e){for(var o=this.arg[e].getEdgeIterator();o.hasNext();)for(var n=o.next(),r=n.getLabel().getLocation(e),i=n.getEdgeIntersectionList().iterator();i.hasNext();){var s=i.next(),a=this.nodes.find(s.coord);a.getLabel().isNull(e)&&(r===t.BOUNDARY?a.setLabelBoundary(e):a.setLabel(e,t.INTERIOR))}},jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(e){var o=this.arg[0].getGeometry();o.isEmpty()||(e.set(t.INTERIOR,t.EXTERIOR,o.getDimension()),e.set(t.BOUNDARY,t.EXTERIOR,o.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(e.set(t.EXTERIOR,t.INTERIOR,n.getDimension()),e.set(t.EXTERIOR,t.BOUNDARY,n.getBoundaryDimension()))},jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}},jsts.operation.relate.RelateComputer.prototype.updateIM=function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var o=this.nodes.iterator();o.hasNext();){var n=o.next();n.updateIM(t),n.updateIMFromEdges(t)}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(t,e){for(var o=this.arg[t].getEdgeIterator();o.hasNext();){var n=o.next();n.isIsolated()&&(this.labelIsolatedEdge(n,e,this.arg[e].getGeometry()),this.isolatedEdges.add(n))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(e,o,n){if(n.getDimension()>0){var r=this.ptLocator.locate(e.getCoordinate(),n);e.getLabel().setAllLocations(o,r)}else e.getLabel().setAllLocations(o,t.EXTERIOR)},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var t=this.nodes.iterator();t.hasNext();){var o=t.next(),n=o.getLabel();e.isTrue(n.getGeometryCount()>0,"node with empty label found"),o.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(o,0):this.labelIsolatedNode(o,1))}},jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(t,e){var o=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,o)}}(),function(){jsts.io.GeoJSONWriter=function(){this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)},jsts.io.GeoJSONWriter.prototype.write=function(t){return this.parser.write(t)}}(),function(){var t=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(t){this.label=t},jsts.geomgraph.GraphComponent.prototype.label=null,jsts.geomgraph.GraphComponent.prototype._isInResult=!1,jsts.geomgraph.GraphComponent.prototype._isCovered=!1,jsts.geomgraph.GraphComponent.prototype._isCoveredSet=!1,jsts.geomgraph.GraphComponent.prototype._isVisited=!1,jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label},jsts.geomgraph.GraphComponent.prototype.setLabel=function(t){if(2===arguments.length)return void this.setLabel2.apply(this,arguments);this.label=t},jsts.geomgraph.GraphComponent.prototype.setInResult=function(t){this._isInResult=t},jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.GraphComponent.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered},jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet},jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.GraphComponent.prototype.setVisited=function(t){this._isVisited=t},jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.computeIM=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.GraphComponent.prototype.updateIM=function(e){t.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}}(),jsts.geomgraph.Node=function(t,e){this.coord=t,this.edges=e,this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE)},jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Node.prototype.coord=null,jsts.geomgraph.Node.prototype.edges=null,jsts.geomgraph.Node.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.Node.prototype.setLabel2=function(t,e){null===this.label?this.label=new jsts.geomgraph.Label(t,e):this.label.setLocation(t,e)},jsts.geomgraph.Node.prototype.setLabelBoundary=function(t){var e=jsts.geom.Location.NONE;null!==this.label&&(e=this.label.getLocation(t));var o;switch(e){case jsts.geom.Location.BOUNDARY:o=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:default:o=jsts.geom.Location.BOUNDARY}this.label.setLocation(t,o)},jsts.geomgraph.Node.prototype.add=function(t){this.edges.insert(t),t.setNode(this)},jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord},jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges},jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},function(){var t=function(t){this.deList=new javascript.util.ArrayList,this.factory=t};t.findEdgeRingContaining=function(t,e){for(var o=t.getRing(),n=o.getEnvelopeInternal(),r=o.getCoordinateN(0),i=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),c=l.getRing(),u=c.getEnvelopeInternal();null!=i&&(s=i.getRing().getEnvelopeInternal());var g=!1;u.equals(n)||(r=jsts.geom.CoordinateArrays.ptNotInList(o.getCoordinates(),c.getCoordinates()),u.contains(n)&&jsts.algorithm.CGAlgorithms.isPointInRing(r,c.getCoordinates())&&(g=!0),g&&(null==i||s.contains(u))&&(i=l))}return i},t.ptNotInList=function(t,e){for(var o=0;o<t.length;o++){var n=t[o];if(!isInList(n,e))return n}return null},t.isInList=function(t,e){for(var o=0;o<e.length;o++)if(t.equals(e[o]))return!0;return!1},t.prototype.factory=null,t.prototype.deList=null,t.prototype.ring=null,t.prototype.ringPts=null,t.prototype.holes=null,t.prototype.add=function(t){this.deList.add(t)},t.prototype.isHole=function(){var t=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(t.getCoordinates())},t.prototype.addHole=function(t){null==this.holes&&(this.holes=new javascript.util.ArrayList),this.holes.add(t)},t.prototype.getPolygon=function(){var t=null;if(null!=this.holes){t=[];for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}return this.factory.createPolygon(this.ring,t)},t.prototype.isValid=function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},t.prototype.getCoordinates=function(){if(null==this.ringPts){for(var e=new jsts.geom.CoordinateList,o=this.deList.iterator();o.hasNext();){var n=o.next(),r=n.getEdge();t.addEdge(r.getLine().getCoordinates(),n.getEdgeDirection(),e)}this.ringPts=e.toCoordinateArray()}return this.ringPts},t.prototype.getLineString=function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},t.prototype.getRing=function(){if(null!=this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&console.log(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){console.log(this.ringPts)}return this.ring},t.addEdge=function(t,e,o){if(e)for(var n=0;n<t.length;n++)o.add(t[n],!1);else for(var n=t.length-1;n>=0;n--)o.add(t[n],!1)},jsts.operation.polygonize.EdgeRing=t}(),function(){var t=function(){};t.setVisited=function(t,e){for(;t.hasNext();){t.next().setVisited(e)}},t.setMarked=function(t,e){for(;t.hasNext();){t.next().setMarked(e)}},t.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var o=t.next();if(o.isVisited()==e)return o}return null},t.prototype._isMarked=!1,t.prototype._isVisited=!1,t.prototype.data,t.prototype.isVisited=function(){return this._isVisited},t.prototype.setVisited=function(t){this._isVisited=t},t.prototype.isMarked=function(){return this._isMarked},t.prototype.setMarked=function(t){this._isMarked=t},t.prototype.setContext=function(t){this.data=t},t.prototype.getContext=function(){return data},t.prototype.setData=function(t){this.data=t},t.prototype.getData=function(){return data},t.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.planargraph.GraphComponent=t}(),function(){var t=jsts.planargraph.GraphComponent,e=function(t,e){void 0!==t&&this.setDirectedEdges(t,e)};e.prototype=new t,e.prototype.dirEdge=null,e.prototype.setDirectedEdges=function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},e.prototype.getDirEdge=function(t){return t instanceof jsts.planargraph.Node&&this.getDirEdge2(t),this.dirEdge[t]},e.prototype.getDirEdge2=function(t){return this.dirEdge[0].getFromNode()==t?this.dirEdge[0]:this.dirEdge[1].getFromNode()==t?this.dirEdge[1]:null},e.prototype.getOppositeNode=function(t){return this.dirEdge[0].getFromNode()==t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()==t?this.dirEdge[1].getToNode():null},e.prototype.remove=function(){this.dirEdge=null},e.prototype.isRemoved=function(){return null==dirEdge},jsts.planargraph.Edge=e}(),jsts.operation.polygonize.PolygonizeEdge=function(t){this.line=t},jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge,jsts.operation.polygonize.PolygonizeEdge.prototype.line=null,jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line},function(){var t=javascript.util.ArrayList,e=jsts.planargraph.GraphComponent,o=function(t,e,o,n){if(void 0!==t){this.from=t,this.to=e,this.edgeDirection=n,this.p0=t.getCoordinate(),this.p1=o;var r=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(r,i),this.angle=Math.atan2(i,r)}};o.prototype=new e,o.toEdges=function(e){for(var o=new t,n=e.iterator();n.hasNext();)o.add(n.next().parentEdge);return o},o.prototype.parentEdge=null,o.prototype.from=null,o.prototype.to=null,o.prototype.p0=null,o.prototype.p1=null,o.prototype.sym=null,o.prototype.edgeDirection=null,o.prototype.quadrant=null,o.prototype.angle=null,o.prototype.getEdge=function(){return this.parentEdge},o.prototype.setEdge=function(t){this.parentEdge=t},o.prototype.getQuadrant=function(){return this.quadrant},o.prototype.getDirectionPt=function(){return this.p1},o.prototype.getEdgeDirection=function(){return this.edgeDirection},o.prototype.getFromNode=function(){return this.from},o.prototype.getToNode=function(){return this.to},o.prototype.getCoordinate=function(){return this.from.getCoordinate()},o.prototype.getAngle=function(){return this.angle},o.prototype.getSym=function(){return this.sym},o.prototype.setSym=function(t){this.sym=t},o.prototype.remove=function(){this.sym=null,this.parentEdge=null},o.prototype.isRemoved=function(){return null==this.parentEdge},o.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},o.prototype.compareDirection=function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(t.p0,t.p1,this.p1)},jsts.planargraph.DirectedEdge=o}(),function(){var t=jsts.planargraph.DirectedEdge,e=function(e,o,n,r){t.apply(this,arguments)};e.prototype=new t,e.prototype.edgeRing=null,e.prototype.next=null,e.prototype.label=-1,e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(t){this.label=t},e.prototype.getNext=function(){return this.next},e.prototype.setNext=function(t){this.next=t},e.prototype.isInRing=function(){return null!=this.edgeRing},e.prototype.setRing=function(t){this.edgeRing=t},jsts.operation.polygonize.PolygonizeDirectedEdge=e}(),function(){var t=javascript.util.ArrayList,e=function(){this.outEdges=new t};e.prototype.outEdges=null,e.prototype.sorted=!1,e.prototype.add=function(t){this.outEdges.add(t),this.sorted=!1},e.prototype.remove=function(t){this.outEdges.remove(t)},e.prototype.iterator=function(){return this.sortEdges(),this.outEdges.iterator()},e.prototype.getDegree=function(){return this.outEdges.size()},e.prototype.getCoordinate=function(){var t=iterator();return t.hasNext()?t.next().getCoordinate():null},e.prototype.getEdges=function(){return this.sortEdges(),this.outEdges},e.prototype.sortEdges=function(){if(!this.sorted){var t=this.outEdges.toArray();t.sort(function(t,e){return t.compareTo(e)}),this.outEdges=javascript.util.Arrays.asList(t),this.sorted=!0}},e.prototype.getIndex=function(t){if(t instanceof jsts.planargraph.DirectedEdge)return this.getIndex2(t);if("number"==typeof t)return this.getIndex3(t);this.sortEdges();for(var e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e).getEdge()==t)return e}return-1},e.prototype.getIndex2=function(t){this.sortEdges();for(var e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e)==t)return e}return-1},e.prototype.getIndex3=function(t){var e=toInt(t%this.outEdges.size());return e<0&&(e+=this.outEdges.size()),e},e.prototype.getNextEdge=function(t){var e=this.getIndex(t);return this.outEdges.get(getIndex(e+1))},e.prototype.getNextCWEdge=function(t){var e=this.getIndex(t);return this.outEdges.get(getIndex(e-1))},jsts.planargraph.DirectedEdgeStar=e}(),function(){var t=jsts.planargraph.GraphComponent,e=jsts.planargraph.DirectedEdgeStar,o=function(t,o){this.pt=t,this.deStar=o||new e};o.prototype=new t,o.getEdgesBetween=function(t,e){var o=DirectedEdge.toEdges(t.getOutEdges().getEdges()),n=new javascript.util.HashSet(o),r=DirectedEdge.toEdges(e.getOutEdges().getEdges());return n.retainAll(r),n},o.prototype.pt=null,o.prototype.deStar=null,o.prototype.getCoordinate=function(){return this.pt},o.prototype.addOutEdge=function(t){this.deStar.add(t)},o.prototype.getOutEdges=function(){return this.deStar},o.prototype.getDegree=function(){return this.deStar.getDegree()},o.prototype.getIndex=function(t){return this.deStar.getIndex(t)},o.prototype.remove=function(t){if(void 0===t)return this.remove2();this.deStar.remove(t)},o.prototype.remove2=function(){this.pt=null},o.prototype.isRemoved=function(){return null==this.pt},jsts.planargraph.Node=o}(),function(){var t=function(){this.nodeMap=new javascript.util.TreeMap};t.prototype.nodeMap=null,t.prototype.add=function(t){return this.nodeMap.put(t.getCoordinate(),t),t},t.prototype.remove=function(t){return this.nodeMap.remove(t)},t.prototype.find=function(t){return this.nodeMap.get(t)},t.prototype.iterator=function(){return this.nodeMap.values().iterator()},t.prototype.values=function(){return this.nodeMap.values()},jsts.planargraph.NodeMap=t}(),function(){var t=javascript.util.ArrayList,e=function(){this.edges=new javascript.util.HashSet,this.dirEdges=new javascript.util.HashSet,this.nodeMap=new jsts.planargraph.NodeMap};e.prototype.edges=null,e.prototype.dirEdges=null,e.prototype.nodeMap=null,e.prototype.findNode=function(t){return this.nodeMap.find(t)},e.prototype.add=function(t){return t instanceof jsts.planargraph.Edge?this.add2(t):t instanceof jsts.planargraph.DirectedEdge?this.add3(t):void this.nodeMap.add(t)},e.prototype.add2=function(t){this.edges.add(t),this.add(t.getDirEdge(0)),this.add(t.getDirEdge(1))},e.prototype.add3=function(t){this.dirEdges.add(t)},e.prototype.nodeIterator=function(){return this.nodeMap.iterator()},e.prototype.contains=function(t){return t instanceof jsts.planargraph.DirectedEdge?this.contains2(t):this.edges.contains(t)},e.prototype.contains2=function(t){return this.dirEdges.contains(t)},e.prototype.getNodes=function(){return this.nodeMap.values()},e.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator()},e.prototype.edgeIterator=function(){return this.edges.iterator()},e.prototype.getEdges=function(){return this.edges},e.prototype.remove=function(t){if(t instanceof jsts.planargraph.DirectedEdge)return this.remove2(t);this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),this.edge.remove()},e.prototype.remove2=function(t){if(t instanceof jsts.planargraph.Node)return this.remove3(t);var e=t.getSym();null!=e&&e.setSym(null),t.getFromNode().remove(t),t.remove(),this.dirEdges.remove(t)},e.prototype.remove3=function(t){for(var e=t.getOutEdges().getEdges(),o=e.iterator();o.hasNext();){var n=o.next(),r=n.getSym();null!=r&&this.remove(r),this.dirEdges.remove(n);var i=n.getEdge();null!=i&&this.edges.remove(i)}this.nodeMap.remove(t.getCoordinate()),t.remove()},e.prototype.findNodesOfDegree=function(e){for(var o=new t,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()==e&&o.add(r)}return o},jsts.planargraph.PlanarGraph=e}(),function(){var t=javascript.util.ArrayList,e=javascript.util.Stack,o=javascript.util.HashSet,n=jsts.util.Assert,r=jsts.operation.polygonize.EdgeRing,i=jsts.operation.polygonize.PolygonizeEdge,s=jsts.operation.polygonize.PolygonizeDirectedEdge,a=jsts.planargraph.PlanarGraph,l=jsts.planargraph.Node,c=function(t){a.apply(this),this.factory=t};c.prototype=new a,c.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),o=0,n=e.iterator();n.hasNext();){n.next().isMarked()||o++}return o},c.getDegree=function(t,e){for(var o=t.getOutEdges().getEdges(),n=0,r=o.iterator();r.hasNext();){r.next().getLabel()==e&&n++}return n},c.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),o=e.iterator();o.hasNext();){var n=o.next();n.setMarked(!0);var r=n.getSym();null!=r&&r.setMarked(!0)}},c.prototype.factory=null,c.prototype.addEdge=function(t){if(!t.isEmpty()){var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates());if(!(e.length<2)){var o=e[0],n=e[e.length-1],r=this.getNode(o),a=this.getNode(n),l=new s(r,a,e[1],!0),c=new s(a,r,e[e.length-2],!1),u=new i(t);u.setDirectedEdges(l,c),this.add(u)}}},c.prototype.getNode=function(t){var e=this.findNode(t);return null==e&&(e=new l(t),this.add(e)),e},c.prototype.computeNextCWEdges=function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();c.computeNextCWEdges(e)}},c.prototype.convertMaximalToMinimalEdgeRings=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next(),n=o.getLabel(),r=c.findIntersectionNodes(o,n);if(null!=r)for(var i=r.iterator();i.hasNext();){var s=i.next();c.computeNextCCWEdges(s,n)}}},c.findIntersectionNodes=function(e,o){var r=e,i=null;do{var s=r.getFromNode();c.getDegree(s,o)>1&&(null==i&&(i=new t),i.add(s)),r=r.getNext(),n.isTrue(null!=r,"found null DE in ring"),n.isTrue(r==e||!r.isInRing(),"found DE already in ring")}while(r!=e);return i},c.prototype.getEdgeRings=function(){this.computeNextCWEdges(),c.label(this.dirEdges,-1);var e=c.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(e);for(var o=new t,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()&&!r.isInRing()){var i=this.findEdgeRing(r);o.add(i)}}return o},c.findLabeledEdgeRings=function(e){for(var o=new t,n=1,r=e.iterator();r.hasNext();){var i=r.next();if(!i.isMarked()&&!(i.getLabel()>=0)){o.add(i);var s=c.findDirEdgesInRing(i);c.label(s,n),n++}}return o},c.prototype.deleteCutEdges=function(){this.computeNextCWEdges(),c.findLabeledEdgeRings(this.dirEdges);for(var e=new t,o=this.dirEdges.iterator();o.hasNext();){var n=o.next();if(!n.isMarked()){var r=n.getSym();if(n.getLabel()==r.getLabel()){n.setMarked(!0),r.setMarked(!0);var i=n.getEdge();e.add(i.getLine())}}}return e},c.label=function(t,e){for(var o=t.iterator();o.hasNext();){o.next().setLabel(e)}},c.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),o=null,n=null,r=e.getEdges().iterator();r.hasNext();){var i=r.next();if(!i.isMarked()){if(null==o&&(o=i),null!=n){var s=n.getSym();s.setNext(i)}n=i}}if(null!=n){var s=n.getSym();s.setNext(o)}},c.computeNextCCWEdges=function(t,e){for(var o=t.getOutEdges(),r=null,i=null,s=o.getEdges(),a=s.size()-1;a>=0;a--){var l=s.get(a),c=l.getSym(),u=null;l.getLabel()==e&&(u=l);var g=null;c.getLabel()==e&&(g=c),null==u&&null==g||(null!=g&&(i=g),null!=u&&(null!=i&&(i.setNext(u),i=null),null==r&&(r=u)))}null!=i&&(n.isTrue(null!=r),i.setNext(r))},c.findDirEdgesInRing=function(e){var o=e,r=new t;do{r.add(o),o=o.getNext(),n.isTrue(null!=o,"found null DE in ring"),n.isTrue(o==e||!o.isInRing(),"found DE already in ring")}while(o!=e);return r},c.prototype.findEdgeRing=function(t){var e=t,o=new r(this.factory);do{o.add(e),e.setRing(o),e=e.getNext(),n.isTrue(null!=e,"found null DE in ring"),n.isTrue(e==t||!e.isInRing(),"found DE already in ring")}while(e!=t);return o},c.prototype.deleteDangles=function(){for(var t=this.findNodesOfDegree(1),n=new o,r=new e,i=t.iterator();i.hasNext();)r.push(i.next());for(;!r.isEmpty();){var s=r.pop();c.deleteAllEdges(s);for(var a=s.getOutEdges().getEdges(),i=a.iterator();i.hasNext();){var l=i.next();l.setMarked(!0);var u=l.getSym();null!=u&&u.setMarked(!0);var g=l.getEdge();n.add(g.getLine());var h=l.getToNode();1==c.getDegreeNonDeleted(h)&&r.push(h)}}return n},c.prototype.computeDepthParity=function(){for(;;){return}},c.prototype.computeDepthParity=function(t){},jsts.operation.polygonize.PolygonizeGraph=c}(),jsts.index.strtree.Interval=function(){var t;if(1===arguments.length)return t=arguments[0],jsts.index.strtree.Interval(t.min,t.max);2===arguments.length&&(jsts.util.Assert.isTrue(this.min<=this.max),this.min=arguments[0],this.max=arguments[1])},jsts.index.strtree.Interval.prototype.min=null,jsts.index.strtree.Interval.prototype.max=null,jsts.index.strtree.Interval.prototype.getCentre=function(){return(this.min+this.max)/2},jsts.index.strtree.Interval.prototype.expandToInclude=function(t){return this.max=Math.max(this.max,t.max),this.min=Math.min(this.min,t.min),this},jsts.index.strtree.Interval.prototype.intersects=function(t){return!(t.min>this.max||t.max<this.min)},jsts.index.strtree.Interval.prototype.equals=function(t){return t instanceof jsts.index.strtree.Interval&&(other=t,this.min===other.min&&this.max===other.max)},jsts.geom.GeometryFactory=function(t){this.precisionModel=t||new jsts.geom.PrecisionModel},jsts.geom.GeometryFactory.prototype.precisionModel=null,jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel},jsts.geom.GeometryFactory.prototype.createPoint=function(t){return new jsts.geom.Point(t,this)},jsts.geom.GeometryFactory.prototype.createLineString=function(t){return new jsts.geom.LineString(t,this)},jsts.geom.GeometryFactory.prototype.createLinearRing=function(t){return new jsts.geom.LinearRing(t,this)},jsts.geom.GeometryFactory.prototype.createPolygon=function(t,e){return new jsts.geom.Polygon(t,e,this)},jsts.geom.GeometryFactory.prototype.createMultiPoint=function(t){if(t&&t[0]instanceof jsts.geom.Coordinate){var e,o=[];for(e=0;e<t.length;e++)o.push(this.createPoint(t[e]));t=o}return new jsts.geom.MultiPoint(t,this)},jsts.geom.GeometryFactory.prototype.createMultiLineString=function(t){return new jsts.geom.MultiLineString(t,this)},jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(t){return new jsts.geom.MultiPolygon(t,this)},jsts.geom.GeometryFactory.prototype.buildGeometry=function(t){for(var e=null,o=!1,n=!1,r=t.iterator();r.hasNext();){var i=r.next(),s=i.CLASS_NAME;null===e&&(e=s),s!==e&&(o=!0),i.isGeometryCollectionBase()&&(n=!0)}if(null===e)return this.createGeometryCollection(null);if(o||n)return this.createGeometryCollection(t.toArray());var a=t.get(0);if(t.size()>1){if(a instanceof jsts.geom.Polygon)return this.createMultiPolygon(t.toArray());if(a instanceof jsts.geom.LineString)return this.createMultiLineString(t.toArray());if(a instanceof jsts.geom.Point)return this.createMultiPoint(t.toArray());jsts.util.Assert.shouldNeverReachHere("Unhandled class: "+a)}return a},jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(t){return new jsts.geom.GeometryCollection(t,this)},jsts.geom.GeometryFactory.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new jsts.geom.Coordinate(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new jsts.geom.Coordinate(t.getMinX(),t.getMinY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(t.getMinX(),t.getMinY()),new jsts.geom.Coordinate(t.getMinX(),t.getMaxY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMaxY()),new jsts.geom.Coordinate(t.getMaxX(),t.getMinY()),new jsts.geom.Coordinate(t.getMinX(),t.getMinY())]),null)},jsts.geomgraph.NodeFactory=function(){},jsts.geomgraph.NodeFactory.prototype.createNode=function(t){return new jsts.geomgraph.Node(t,null)},function(){jsts.geomgraph.Position=function(){},jsts.geomgraph.Position.ON=0,jsts.geomgraph.Position.LEFT=1,jsts.geomgraph.Position.RIGHT=2,jsts.geomgraph.Position.opposite=function(t){return t===jsts.geomgraph.Position.LEFT?jsts.geomgraph.Position.RIGHT:t===jsts.geomgraph.Position.RIGHT?jsts.geomgraph.Position.LEFT:t}}(),jsts.geomgraph.TopologyLocation=function(){if(this.location=[],3===arguments.length){var t=arguments[0],e=arguments[1],o=arguments[2];this.init(3),this.location[jsts.geomgraph.Position.ON]=t,this.location[jsts.geomgraph.Position.LEFT]=e,this.location[jsts.geomgraph.Position.RIGHT]=o}else if(arguments[0]instanceof jsts.geomgraph.TopologyLocation){var n=arguments[0];if(this.init(n.location.length),null!=n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}else if("number"==typeof arguments[0]){var t=arguments[0];this.init(1),this.location[jsts.geomgraph.Position.ON]=t}else if(arguments[0]instanceof Array){var i=arguments[0];this.init(i.length)}},jsts.geomgraph.TopologyLocation.prototype.location=null,jsts.geomgraph.TopologyLocation.prototype.init=function(t){this.location[t-1]=null,this.setAllLocations(jsts.geom.Location.NONE)},jsts.geomgraph.TopologyLocation.prototype.get=function(t){return t<this.location.length?this.location[t]:jsts.geom.Location.NONE},jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==jsts.geom.Location.NONE)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===jsts.geom.Location.NONE)return!0;return!1},jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(t,e){return this.location[e]==t.location[e]},jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1},jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return 1===this.location.length},jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(!(this.location.length<=1)){var t=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT],this.location[jsts.geomgraph.Position.RIGHT]=t}},jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===jsts.geom.Location.NONE&&(this.location[e]=t)},jsts.geomgraph.TopologyLocation.prototype.setLocation=function(t,e){void 0!==e?this.location[t]=e:this.setLocation(jsts.geomgraph.Position.ON,t)},jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location},jsts.geomgraph.TopologyLocation.prototype.setLocations=function(t,e,o){this.location[jsts.geomgraph.Position.ON]=t,this.location[jsts.geomgraph.Position.LEFT]=e,this.location[jsts.geomgraph.Position.RIGHT]=o},jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},jsts.geomgraph.TopologyLocation.prototype.merge=function(t){if(t.location.length>this.location.length){var e=[];e[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON],e[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE,e[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE,this.location=e}for(var o=0;o<this.location.length;o++)this.location[o]===jsts.geom.Location.NONE&&o<t.location.length&&(this.location[o]=t.location[o])},jsts.geomgraph.Label=function(){this.elt=[];var t,e,o,n,r;4===arguments.length?(t=arguments[0],e=arguments[1],o=arguments[2],r=arguments[3],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE),this.elt[t].setLocations(e,o,r)):3===arguments.length?(e=arguments[0],o=arguments[1],r=arguments[2],this.elt[0]=new jsts.geomgraph.TopologyLocation(e,o,r),this.elt[1]=new jsts.geomgraph.TopologyLocation(e,o,r)):2===arguments.length?(t=arguments[0],e=arguments[1],this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE),this.elt[t].setLocation(e)):arguments[0]instanceof jsts.geomgraph.Label?(n=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(n.elt[0]),this.elt[1]=new jsts.geomgraph.TopologyLocation(n.elt[1])):"number"==typeof arguments[0]&&(e=arguments[0],this.elt[0]=new jsts.geomgraph.TopologyLocation(e),this.elt[1]=new jsts.geomgraph.TopologyLocation(e))},jsts.geomgraph.Label.toLineLabel=function(t){var e,o=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(e=0;e<2;e++)o.setLocation(e,t.getLocation(e));return o},jsts.geomgraph.Label.prototype.elt=null,jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},jsts.geomgraph.Label.prototype.getLocation=function(t,e){return 1==arguments.length?this.getLocation2.apply(this,arguments):this.elt[t].get(e)},jsts.geomgraph.Label.prototype.getLocation2=function(t){return this.elt[t].get(jsts.geomgraph.Position.ON)},jsts.geomgraph.Label.prototype.setLocation=function(t,e,o){if(2==arguments.length)return void this.setLocation2.apply(this,arguments);this.elt[t].setLocation(e,o)},jsts.geomgraph.Label.prototype.setLocation2=function(t,e){this.elt[t].setLocation(jsts.geomgraph.Position.ON,e)},jsts.geomgraph.Label.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(t,e){if(1==arguments.length)return void this.setAllLocationsIfNull2.apply(this,arguments);this.elt[t].setAllLocationsIfNull(e)},jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(t){this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)},jsts.geomgraph.Label.prototype.merge=function(t){var e;for(e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new jsts.geomgraph.TopologyLocation(t.elt[e]):this.elt[e].merge(t.elt[e])},jsts.geomgraph.Label.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},jsts.geomgraph.Label.prototype.isNull=function(t){return this.elt[t].isNull()},jsts.geomgraph.Label.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},jsts.geomgraph.Label.prototype.isArea=function(){return 1==arguments.length?this.isArea2(arguments[0]):this.elt[0].isArea()||this.elt[1].isArea()},jsts.geomgraph.Label.prototype.isArea2=function(t){return this.elt[t].isArea()},jsts.geomgraph.Label.prototype.isLine=function(t){return this.elt[t].isLine()},jsts.geomgraph.Label.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},jsts.geomgraph.Label.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},jsts.geomgraph.Label.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new jsts.geomgraph.TopologyLocation(this.elt[t].location[0]))},jsts.geomgraph.EdgeRing=function(t,e){this.edges=[],this.pts=[],this.holes=[],this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE),this.geometryFactory=e,t&&(this.computePoints(t),this.computeRing())},jsts.geomgraph.EdgeRing.prototype.startDe=null,jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1,jsts.geomgraph.EdgeRing.prototype.edges=null,jsts.geomgraph.EdgeRing.prototype.pts=null,jsts.geomgraph.EdgeRing.prototype.label=null,jsts.geomgraph.EdgeRing.prototype.ring=null,jsts.geomgraph.EdgeRing.prototype._isHole=null,jsts.geomgraph.EdgeRing.prototype.shell=null,jsts.geomgraph.EdgeRing.prototype.holes=null,jsts.geomgraph.EdgeRing.prototype.geometryFactory=null,jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return 1==this.label.getGeometryCount()},jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole},jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(t){return this.pts[t]},jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring},jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeRing.prototype.isShell=function(){return null===this.shell},jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell},jsts.geomgraph.EdgeRing.prototype.setShell=function(t){this.shell=t,null!==t&&t.addHole(this)},jsts.geomgraph.EdgeRing.prototype.addHole=function(t){this.holes.push(t)},jsts.geomgraph.EdgeRing.prototype.toPolygon=function(t){for(var e=[],o=0;o<this.holes.length;o++)e[o]=this.holes[o].getLinearRing();return this.geometryFactory.createPolygon(this.getLinearRing(),e)},jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(null===this.ring){for(var t=[],e=0;e<this.pts.length;e++)t[e]=this.pts[e];this.ring=this.geometryFactory.createLinearRing(t),this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates())}},jsts.geomgraph.EdgeRing.prototype.getNext=function(t){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(t,e){throw new jsts.error.AbstractInvocationError},jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeRing.prototype.computePoints=function(t){this.startDe=t;var e=t,o=!0;do{if(null===e)throw new jsts.error.TopologyError("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new jsts.error.TopologyError("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.push(e);var n=e.getLabel();jsts.util.Assert.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),o),o=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),o=e.getEdges().getOutgoingDegree(this);o>this.maxNodeDegree&&(this.maxNodeDegree=o),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var t=this.startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!=this.startDe)},jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(t){this.mergeLabel2(t,0),this.mergeLabel2(t,1)},jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(t,e){var o=t.getLocation(e,jsts.geomgraph.Position.RIGHT);if(o!=jsts.geom.Location.NONE)return this.label.getLocation(e)===jsts.geom.Location.NONE?void this.label.setLocation(e,o):void 0},jsts.geomgraph.EdgeRing.prototype.addPoints=function(t,e,o){var n=t.getCoordinates();if(e){var r=1;o&&(r=0);for(var i=r;i<n.length;i++)this.pts.push(n[i])}else{var r=n.length-2;o&&(r=n.length-1);for(var i=r;i>=0;i--)this.pts.push(n[i])}},jsts.geomgraph.EdgeRing.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!jsts.algorithm.CGAlgorithms.isPointInRing(t,e.getCoordinates()))return!1;for(var o=0;o<this.holes.length;o++){if(this.holes[o].containsPoint(t))return!1}return!0},jsts.geom.Dimension=function(){},jsts.geom.Dimension.P=0,jsts.geom.Dimension.L=1,jsts.geom.Dimension.A=2,jsts.geom.Dimension.FALSE=-1,jsts.geom.Dimension.TRUE=-2;jsts.geom.Dimension.DONTCARE=-3,jsts.geom.Dimension.toDimensionSymbol=function(t){switch(t){case jsts.geom.Dimension.FALSE:return"F";case jsts.geom.Dimension.TRUE:return"T";case jsts.geom.Dimension.DONTCARE:return"*";case jsts.geom.Dimension.P:return"0";case jsts.geom.Dimension.L:return"1";case jsts.geom.Dimension.A:return"2"}throw new jsts.IllegalArgumentError("Unknown dimension value: "+t)},jsts.geom.Dimension.toDimensionValue=function(t){switch(t.toUpperCase()){case"F":return jsts.geom.Dimension.FALSE;case"T":return jsts.geom.Dimension.TRUE;case"*":return jsts.geom.Dimension.DONTCARE;case"0":return jsts.geom.Dimension.P;case"1":return jsts.geom.Dimension.L;case"2":return jsts.geom.Dimension.A}throw new jsts.error.IllegalArgumentError("Unknown dimension symbol: "+t)},function(){var t=jsts.geom.Dimension;jsts.geom.LineString=function(t,e){this.factory=e,this.points=t||[]},jsts.geom.LineString.prototype=new jsts.geom.Geometry,jsts.geom.LineString.constructor=jsts.geom.LineString,jsts.geom.LineString.prototype.points=null,jsts.geom.LineString.prototype.getCoordinates=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points},jsts.geom.LineString.prototype.getCoordinateN=function(t){return this.points[t]},jsts.geom.LineString.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getCoordinateN(0)},jsts.geom.LineString.prototype.getDimension=function(){return 1},jsts.geom.LineString.prototype.getBoundaryDimension=function(){return this.isClosed()?t.FALSE:0},jsts.geom.LineString.prototype.isEmpty=function(){return 0===this.points.length},jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length},jsts.geom.LineString.prototype.getPointN=function(t){return this.getFactory().createPoint(this.points[t])},jsts.geom.LineString.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},jsts.geom.LineString.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},jsts.geom.LineString.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1))},jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},jsts.geom.LineString.prototype.getGeometryType=function(){return"LineString"},jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points)},jsts.geom.LineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new jsts.geom.Envelope;var t=new jsts.geom.Envelope;return this.points.forEach(function(e){t.expandToInclude(e)}),t},jsts.geom.LineString.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&(this.points.length===t.points.length&&(!(!this.isEmpty()||!t.isEmpty())||this.points.reduce(function(o,n,r){return o&&jsts.geom.Geometry.prototype.equal(n,t.points[r],e)})))},jsts.geom.LineString.prototype.isEquivalentClass=function(t){return t instanceof jsts.geom.LineString},jsts.geom.LineString.prototype.compareToSameClass=function(t){for(var e=t,o=0,n=this.points.length,r=0,i=e.points.length;o<n&&r<i;){var s=this.points[o].compareTo(e.points[r]);if(0!==s)return s;o++,r++}return o<n?1:r<i?-1:0},jsts.geom.LineString.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter)for(var e=0,o=this.points.length;e<o;e++)t.filter(this.points[e]);else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.LineString.prototype.apply2=function(t){if(0!==this.points.length){for(var e=0;e<this.points.length&&(t.filter(this.points,e),!t.isDone());e++);t.isGeometryChanged()}},jsts.geom.LineString.prototype.clone=function(){for(var t=[],e=0,o=this.points.length;e<o;e++)t.push(this.points[e].clone());return this.factory.createLineString(t)},jsts.geom.LineString.prototype.normalize=function(){var t,e,o,n,r,i;for(i=this.points.length,e=parseInt(i/2),t=0;t<e;t++)if(o=i-1-t,n=this.points[t],r=this.points[o],!n.equals(r))return void(n.compareTo(r)>0&&this.points.reverse())},jsts.geom.LineString.prototype.CLASS_NAME="jsts.geom.LineString"}(),function(){jsts.geom.LinearRing=function(t,e){jsts.geom.LineString.apply(this,arguments)},jsts.geom.LinearRing.prototype=new jsts.geom.LineString,jsts.geom.LinearRing.constructor=jsts.geom.LinearRing,jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE},jsts.geom.LinearRing.prototype.isSimple=function(){return!0},jsts.geom.LinearRing.prototype.getGeometryType=function(){return"LinearRing"},jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4,jsts.geom.LinearRing.prototype.CLASS_NAME="jsts.geom.LinearRing"}(),jsts.index.strtree.Boundable=function(){},jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode=function(t){this.level=t,this.childBoundables=[]},jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode,jsts.index.strtree.AbstractNode.prototype.childBoundables=null,jsts.index.strtree.AbstractNode.prototype.bounds=null,jsts.index.strtree.AbstractNode.prototype.level=null,jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables},jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractNode.prototype.getBounds=function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level},jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(t){this.childBoundables.push(t)},jsts.operation.buffer.SubgraphDepthLocater=function(t){this.subgraphs=[],this.seg=new jsts.geom.LineSegment,this.subgraphs=t},jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null,jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.length?0:(e.sort(),e[0].leftDepth)},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(t){if(3===arguments.length)return void this.findStabbedSegments2.apply(this,arguments);for(var e=[],o=0;o<this.subgraphs.length;o++){var n=this.subgraphs[o],r=n.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments2(t,n.getDirectedEdges(),e)}return e},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(t,e,o){if(arguments[1]instanceof jsts.geomgraph.DirectedEdge)return void this.findStabbedSegments3(t,e,o);for(var n=e.iterator();n.hasNext();){var r=n.next();r.isForward()&&this.findStabbedSegments3(t,r,o)}},jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(t,e,o){for(var n=e.getEdge().getCoordinates(),r=0;r<n.length-1;r++){this.seg.p0=n[r],this.seg.p1=n[r+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();if(!(Math.max(this.seg.p0.x,this.seg.p1.x)<t.x)&&!(this.seg.isHorizontal()||t.y<this.seg.p0.y||t.y>this.seg.p1.y||jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,t)===jsts.algorithm.CGAlgorithms.RIGHT)){var i=e.getDepth(jsts.geomgraph.Position.LEFT);this.seg.p0.equals(n[r])||(i=e.getDepth(jsts.geomgraph.Position.RIGHT));var s=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,i);o.push(s)}}},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(t,e){this.upwardSeg=new jsts.geom.LineSegment(t),this.leftDepth=e},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null,jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(t){var e=t,o=this.upwardSeg.orientationIndex(e.upwardSeg);return 0===o&&(o=-1*e.upwardSeg.orientationIndex(upwardSeg)),0!==o?o:this.compareX(this.upwardSeg,e.upwardSeg)},jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(t,e){var o=t.p0.compareTo(e.p0);return 0!==o?o:t.p1.compareTo(e.p1)},jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree},jsts.simplify.LineSegmentIndex.prototype.index=null,jsts.simplify.LineSegmentIndex.prototype.add=function(t){if(t instanceof jsts.geom.LineSegment)return void this.add2(t);for(var e=t.getSegments(),o=0;o<e.length;o++){var n=e[o];this.add2(n)}},jsts.simplify.LineSegmentIndex.prototype.add2=function(t){this.index.insert(new jsts.geom.Envelope(t.p0,t.p1),t)},jsts.simplify.LineSegmentIndex.prototype.remove=function(t){this.index.remove(new jsts.geom.Envelope(t.p0,t.p1),t)},jsts.simplify.LineSegmentIndex.prototype.query=function(t){var e=new jsts.geom.Envelope(t.p0,t.p1),o=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(t);return this.index.query(e,o),o.getItems()},jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(t){this.items=[],this.querySeg=t},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null,jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(t){var e=t;jsts.geom.Envelope.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.push(t)},jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items},jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap,this.edgeList=null,this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE]},jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null,jsts.geomgraph.EdgeEndStar.prototype.edgeList=null,jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null,jsts.geomgraph.EdgeEndStar.prototype.insert=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(t,e){this.edgeMap.put(t,e),this.edgeList=null},jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size()},jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()},jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){return null===this.edgeList&&(this.edgeList=new javascript.util.ArrayList(this.edgeMap.values())),this.edgeList},jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(t){this.getEdges();var e=this.edgeList.indexOf(t),o=e-1;return 0===e&&(o=this.edgeList.length-1),this.edgeList[o]},jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],o=this.iterator();o.hasNext();)for(var n=o.next(),r=n.getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===jsts.geom.Location.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var n=o.next(),r=n.getLabel(),i=0;i<2;i++)if(r.isAnyNull(i)){var s=jsts.geom.Location.NONE;if(e[i])s=jsts.geom.Location.EXTERIOR;else{var a=n.getCoordinate();s=this.getLocation(i,a,t)}r.setAllLocationsIfNull(i,s)}},jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(t,e,o){return this.ptInAreaLocation[t]===jsts.geom.Location.NONE&&(this.ptInAreaLocation[t]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(e,o[t].getGeometry())),this.ptInAreaLocation[t]},jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var o=e.size()-1,n=e.get(o).getLabel(),r=n.getLocation(t,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(r!=jsts.geom.Location.NONE,"Found unlabelled area edge");for(var i=r,s=this.iterator();s.hasNext();){var a=s.next(),l=a.getLabel();jsts.util.Assert.isTrue(l.isArea(t),"Found non-area edge");var c=l.getLocation(t,jsts.geomgraph.Position.LEFT),u=l.getLocation(t,jsts.geomgraph.Position.RIGHT);if(c===u)return!1;if(u!==i)return!1;i=c}return!0},jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(t){for(var e=jsts.geom.Location.NONE,o=this.iterator();o.hasNext();){var n=o.next(),r=n.getLabel();r.isArea(t)&&r.getLocation(t,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE&&(e=r.getLocation(t,jsts.geomgraph.Position.LEFT))}if(e!==jsts.geom.Location.NONE)for(var i=e,o=this.iterator();o.hasNext();){var n=o.next(),r=n.getLabel();if(r.getLocation(t,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE&&r.setLocation(t,jsts.geomgraph.Position.ON,i),r.isArea(t)){var s=r.getLocation(t,jsts.geomgraph.Position.LEFT),a=r.getLocation(t,jsts.geomgraph.Position.RIGHT);if(a!==jsts.geom.Location.NONE){if(a!==i)throw new jsts.error.TopologyError("side location conflict",n.getCoordinate());s===jsts.geom.Location.NONE&&jsts.util.Assert.shouldNeverReachHere("found single null side (at "+n.getCoordinate()+")"),i=s}else jsts.util.Assert.isTrue(r.getLocation(t,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,"found single null side"),r.setLocation(t,jsts.geomgraph.Position.RIGHT,i),r.setLocation(t,jsts.geomgraph.Position.LEFT,i)}}},jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){if(this.edgeList.get(e)===t)return e}return-1},jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments)},jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar,jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(t){var e=this.edgeMap.get(t);null===e?(e=new jsts.operation.relate.EdgeEndBundle(t),this.insertEdgeEnd(t,e)):e.insert(t)},jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}},function(){jsts.geom.Polygon=function(t,e,o){this.shell=t||o.createLinearRing(null),this.holes=e||[],this.factory=o},jsts.geom.Polygon.prototype=new jsts.geom.Geometry,jsts.geom.Polygon.constructor=jsts.geom.Polygon,jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate()},jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=[],e=-1,o=this.shell.getCoordinates(),n=0;n<o.length;n++)e++,t[e]=o[n];for(var r=0;r<this.holes.length;r++)for(var i=this.holes[r].getCoordinates(),s=0;s<i.length;s++)e++,t[e]=i[s];return t},jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty()},jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell},jsts.geom.Polygon.prototype.getInteriorRingN=function(t){return this.holes[t]},jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length},jsts.geom.Polygon.prototype.getArea=function(){var t=0;t+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[e].getCoordinateSequence()));return t},jsts.geom.Polygon.prototype.getLength=function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);var t=[];t[0]=this.shell.clone();for(var e=0,o=this.holes.length;e<o;e++)t[e+1]=this.holes[e].clone();return t.length<=1?t[0]:this.getFactory().createMultiLineString(t)},jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal()},jsts.geom.Polygon.prototype.getDimension=function(){return 2},jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1},jsts.geom.Polygon.prototype.equalsExact=function(t,e){if(!this.isEquivalentClass(t))return!1;if(this.isEmpty()&&t.isEmpty())return!0;if(this.isEmpty()!==t.isEmpty())return!1;if(!this.shell.equalsExact(t.shell,e))return!1;if(this.holes.length!==t.holes.length)return!1;if(this.holes.length!==t.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(t.holes[o],e))return!1;return!0},jsts.geom.Polygon.prototype.compareToSameClass=function(t){return this.shell.compareToSameClass(t.shell)},jsts.geom.Polygon.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryComponentFilter){t.filter(this),this.shell.apply(t);for(var e=0,o=this.holes.length;e<o;e++)this.holes[e].apply(t)}else if(t instanceof jsts.geom.GeometryFilter)t.filter(this);else if(t instanceof jsts.geom.CoordinateFilter){this.shell.apply(t);for(var e=0,o=this.holes.length;e<o;e++)this.holes[e].apply(t)}else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.Polygon.prototype.apply2=function(t){if(this.shell.apply(t),!t.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()},jsts.geom.Polygon.prototype.clone=function(){for(var t=[],e=0,o=this.holes.length;e<o;e++)t.push(this.holes[e].clone());return this.factory.createPolygon(this.shell.clone(),t)},jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,!0);for(var t=0,e=this.holes.length;t<e;t++)this.normalize2(this.holes[t],!1);this.holes.sort()},jsts.geom.Polygon.prototype.normalize2=function(t,e){if(!t.isEmpty()){var o=t.points.slice(0,t.points.length-1),n=jsts.geom.CoordinateArrays.minCoordinate(t.points);jsts.geom.CoordinateArrays.scroll(o,n),t.points=o.concat(),t.points[o.length]=o[0],jsts.algorithm.CGAlgorithms.isCCW(t.points)===e&&t.points.reverse()}},jsts.geom.Polygon.prototype.CLASS_NAME="jsts.geom.Polygon"}(),jsts.algorithm.distance.DistanceToPoint=function(){},jsts.algorithm.distance.DistanceToPoint.computeDistance=function(t,e,o){if(t instanceof jsts.geom.LineString)jsts.algorithm.distance.DistanceToPoint.computeDistance2(t,e,o);else if(t instanceof jsts.geom.Polygon)jsts.algorithm.distance.DistanceToPoint.computeDistance4(t,e,o);else if(t instanceof jsts.geom.GeometryCollection)for(var n=t,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);jsts.algorithm.distance.DistanceToPoint.computeDistance(i,e,o)}else o.setMinimum(t.getCoordinate(),e)},jsts.algorithm.distance.DistanceToPoint.computeDistance2=function(t,e,o){for(var n=new jsts.geom.LineSegment,r=t.getCoordinates(),i=0;i<r.length-1;i++){n.setCoordinates(r[i],r[i+1]);var s=n.closestPoint(e);o.setMinimum(s,e)}},jsts.algorithm.distance.DistanceToPoint.computeDistance3=function(t,e,o){var n=t.closestPoint(e);o.setMinimum(n,e)},jsts.algorithm.distance.DistanceToPoint.computeDistance4=function(t,e,o){jsts.algorithm.distance.DistanceToPoint.computeDistance2(t.getExteriorRing(),e,o);for(var n=0;n<t.getNumInteriorRing();n++)jsts.algorithm.distance.DistanceToPoint.computeDistance2(t.getInteriorRingN(n),e,o)},jsts.index.strtree.ItemBoundable=function(t,e){this.bounds=t,this.item=e},jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable,jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable,jsts.index.strtree.ItemBoundable.prototype.bounds=null,jsts.index.strtree.ItemBoundable.prototype.item=null,jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds},jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item},function(){var t=javascript.util.ArrayList,e=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new t,this.ocaMap=new e},jsts.geomgraph.EdgeList.prototype.edges=null,jsts.geomgraph.EdgeList.prototype.ocaMap=null,jsts.geomgraph.EdgeList.prototype.add=function(t){this.edges.add(t);var e=new jsts.noding.OrientedCoordinateArray(t.getCoordinates());this.ocaMap.put(e,t)},jsts.geomgraph.EdgeList.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(t){var e=new jsts.noding.OrientedCoordinateArray(t.getCoordinates());return this.ocaMap.get(e)},jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges},jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator()},jsts.geomgraph.EdgeList.prototype.get=function(t){return this.edges.get(t)},jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1}}(),jsts.operation.IsSimpleOp=function(t){this.geom=t},jsts.operation.IsSimpleOp.prototype.geom=null,jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=!0,jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null,jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(t){this.geom=t},jsts.operation.IsSimpleOp.prototype.isSimple=function(){return this.nonSimpleLocation=null,this.geom instanceof jsts.geom.LineString?this.isSimpleLinearGeometry(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.isSimpleLinearGeometry(this.geom):!(this.geom instanceof jsts.geom.MultiPoint)||this.isSimpleMultiPoint(this.geom)},jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(t){if(t.isEmpty())return!0;for(var e=[],o=0;o<t.getNumGeometries();o++){for(var n=t.getGeometryN(o),r=n.getCoordinate(),i=0;i<e.length;i++){var s=e[i];if(r.equals2D(s))return this.nonSimpleLocation=r,!1}e.push(r)}return!0},jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(t){if(t.isEmpty())return!0;var e=new jsts.geomgraph.GeometryGraph(0,t),o=new jsts.algorithm.RobustLineIntersector,n=e.computeSelfNodes(o,!0);return!n.hasIntersection()||(n.hasProperIntersection()?(this.nonSimpleLocation=n.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var o=e.next(),n=o.getMaximumSegmentIndex(),r=o.getEdgeIntersectionList().iterator();r.hasNext();){var i=r.next();if(!i.isEndPoint(n))return this.nonSimpleLocation=i.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(t){for(var e=new javascript.util.TreeMap,o=t.getEdgeIterator();o.hasNext();){var n=o.next(),r=(n.getMaximumSegmentIndex(),n.isClosed()),i=n.getCoordinate(0);this.addEndpoint(e,i,r);var s=n.getCoordinate(n.getNumPoints()-1);this.addEndpoint(e,s,r)}for(var o=e.values().iterator();o.hasNext();){var a=o.next();if(a.isClosed&&2!=a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},jsts.operation.IsSimpleOp.EndpointInfo=function(t){this.pt=t,this.isClosed=!1,this.degree=0},jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null,jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt},jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(t){this.degree++,this.isClosed=this.isClosed||t},jsts.operation.IsSimpleOp.prototype.addEndpoint=function(t,e,o){var n=t.get(e);null===n&&(n=new jsts.operation.IsSimpleOp.EndpointInfo(e),t.put(e,n)),n.addEndpoint(o)},function(){var t=function(){this.snapTolerance=0,this.seg=new jsts.geom.LineSegment,this.allowSnappingToSourceVertices=!1,this.isClosed=!1,this.srcPts=[],arguments[0]instanceof jsts.geom.LineString?this.initFromLine.apply(this,arguments):this.initFromPoints.apply(this,arguments)};t.prototype.initFromLine=function(t,e){this.initFromPoints(t.getCoordinates(),e)},t.prototype.initFromPoints=function(t,e){this.srcPts=t,this.isClosed=this.calcIsClosed(t),this.snapTolerance=e},t.prototype.setAllowSnappingToSourceVertices=function(t){this.allowSnappingToSourceVertices=t},t.prototype.calcIsClosed=function(t){return!(t.length<=1)&&t[0].equals(t[t.length-1])},t.prototype.snapTo=function(t){var e=new jsts.geom.CoordinateList(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},t.prototype.snapVertices=function(t,e){var o,n,r=this.isClosed?t.size()-1:t.size(),i=0;for(i;i<r;i++)o=t.get(i),null!==(n=this.findSnapForVertex(o,e))&&(t.set(i,new jsts.geom.Coordinate(n)),0===i&&this.isClosed&&t.set(t.size()-1,new jsts.geom.Coordinate(n)))},t.prototype.findSnapForVertex=function(t,e){var o=0,n=e.length;for(o=0;o<n;o++){if(t.equals(e[o]))return null;if(t.distance(e[o])<this.snapTolerance)return e[o]}return null},t.prototype.snapSegments=function(t,e){if(0!==e.length){var o,n,r,i=e.length;for(e.length>1&&e[0].equals2D(e[e.length-1])&&(i=e.length-1),o=0;o<i;o++)n=e[o],(r=this.findSegmentIndexToSnap(n,t))>=0&&t.add(r+1,new jsts.geom.Coordinate(n),!1)}},t.prototype.findSegmentIndexToSnap=function(t,e){var o,n=Number.MAX_VALUE,r=-1,i=0;for(i;i<e.size()-1;i++){if(this.seg.p0=e.get(i),this.seg.p1=e.get(i+1),this.seg.p0.equals(t)||this.seg.p1.equals(t)){if(this.allowSnappingToSourceVertices)continue;return-1}o=this.seg.distance(t),o<this.snapTolerance&&o<n&&(n=o,r=i)}return r},jsts.operation.overlay.snap.LineStringSnapper=t}(),jsts.operation.buffer.BufferOp=function(t,e){this.argGeom=t,this.bufParams=e||new jsts.operation.buffer.BufferParameters},jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12,jsts.operation.buffer.BufferOp.precisionScaleFactor=function(t,e,o){var n=t.getEnvelopeInternal(),r=Math.max(n.getHeight(),n.getWidth()),i=e>0?e:0,s=r+2*i,a=Math.log(s)/Math.log(10)+1,l=a-o;return Math.pow(10,-l)},jsts.operation.buffer.BufferOp.bufferOp=function(t,e){return arguments.length>2?jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments):new jsts.operation.buffer.BufferOp(t).getResultGeometry(e)},jsts.operation.buffer.BufferOp.bufferOp2=function(t,e,o){return arguments.length>3?jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments):new jsts.operation.buffer.BufferOp(t,o).getResultGeometry(e)},jsts.operation.buffer.BufferOp.bufferOp3=function(t,e,o){if(arguments.length>4)return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments);var n=new jsts.operation.buffer.BufferOp(t);return n.setQuadrantSegments(o),n.getResultGeometry(e)},jsts.operation.buffer.BufferOp.bufferOp4=function(t,e,o,n){var r=new jsts.operation.buffer.BufferOp(t);return r.setQuadrantSegments(o),r.setEndCapStyle(n),r.getResultGeometry(e)},jsts.operation.buffer.BufferOp.prototype.argGeom=null,jsts.operation.buffer.BufferOp.prototype.distance=null,jsts.operation.buffer.BufferOp.prototype.bufParams=null,jsts.operation.buffer.BufferOp.prototype.resultGeometry=null,jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(t){this.bufParams.setEndCapStyle(t)},jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(t){this.bufParams.setQuadrantSegments(t)},jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null===this.resultGeometry){var t=this.argGeom.getPrecisionModel();t.getType()===jsts.geom.PrecisionModel.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var t,e=null;for(t=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision2(t)}catch(t){e=t}if(null!==this.resultGeometry)return}throw e},jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var t=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){}},jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(t){var e=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,t),o=new jsts.geom.PrecisionModel(e);this.bufferFixedPrecision(o)},jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(t){var e=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1)),t.getScale()),o=new jsts.operation.buffer.BufferBuilder(this.bufParams);o.setWorkingPrecisionModel(t),o.setNoder(e),this.resultGeometry=o.buffer(this.argGeom,this.distance)},jsts.geomgraph.index.EdgeSetIntersector=function(){},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(t,e,o){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(t,e,o){throw new jsts.error.AbstractMethodInvocationError},jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){throw new jsts.error.NotImplementedError},jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.algorithm.locate.SimplePointInAreaLocator=function(t){this.geom=t},jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(t,e){return e.isEmpty()?jsts.geom.Location.EXTERIOR:jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(t,e)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(t,e){if(e instanceof jsts.geom.Polygon)return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(t,e);if(e instanceof jsts.geom.GeometryCollection||e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.MultiLineString||e instanceof jsts.geom.MultiPolygon)for(var o=0;o<e.geometries.length;o++){var n=e.geometries[o];if(n!==e&&jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(t,n))return!0}return!1},jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var o=e.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(t,o))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var r=e.getInteriorRingN(n);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(t,r))return!1}return!0},jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&jsts.algorithm.CGAlgorithms.isPointInRing(t,e.getCoordinates())},jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null,jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(t){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(t,geom)},jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTWriter.prototype.write=function(t){return this.parser.write(t)},jsts.io.WKTWriter.toLineString=function(t,e){if(2!==arguments.length)throw new jsts.error.NotImplementedError;return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"},jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidLine.prototype.centSum=null,jsts.algorithm.CentroidLine.prototype.totalLength=0,jsts.algorithm.CentroidLine.prototype.add=function(t){if(t instanceof Array)return void this.add2.apply(this,arguments);if(t instanceof jsts.geom.LineString)this.add(t.getCoordinates());else if(t instanceof jsts.geom.Polygon){var e=t;this.add(e.getExteriorRing().getCoordinates());for(var o=0;o<e.getNumInteriorRing();o++)this.add(e.getInteriorRingN(o).getCoordinates())}else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var n=t,o=0;o<n.getNumGeometries();o++)this.add(n.getGeometryN(o))},jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return t.x=this.centSum.x/this.totalLength,t.y=this.centSum.y/this.totalLength,t},jsts.algorithm.CentroidLine.prototype.add2=function(t){for(var e=0;e<t.length-1;e++){var o=t[e].distance(t[e+1]);this.totalLength+=o;var n=(t[e].x+t[e+1].x)/2;this.centSum.x+=o*n;var r=(t[e].y+t[e+1].y)/2;this.centSum.y+=o*r}},jsts.algorithm.PointLocator=function(t){this.boundaryRule=t||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE},jsts.algorithm.PointLocator.prototype.boundaryRule=null,jsts.algorithm.PointLocator.prototype.isIn=null,jsts.algorithm.PointLocator.prototype.numBoundaries=null,jsts.algorithm.PointLocator.prototype.intersects=function(t,e){return this.locate(t,e)!==jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate=function(t,e){return e.isEmpty()?jsts.geom.Location.EXTERIOR:e instanceof jsts.geom.Point?this.locate2(t,e):e instanceof jsts.geom.LineString?this.locate3(t,e):e instanceof jsts.geom.Polygon?this.locate4(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?jsts.geom.Location.BOUNDARY:this.numBoundaries>0||this.isIn?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR)},jsts.algorithm.PointLocator.prototype.computeLocation=function(t,e){if(e instanceof jsts.geom.Point||e instanceof jsts.geom.LineString||e instanceof jsts.geom.Polygon)this.updateLocationInfo(this.locate(t,e));else if(e instanceof jsts.geom.MultiLineString)for(var o=e,n=0;n<o.getNumGeometries();n++){var r=o.getGeometryN(n);this.updateLocationInfo(this.locate(t,r))}else if(e instanceof jsts.geom.MultiPolygon)for(var i=e,n=0;n<i.getNumGeometries();n++){var s=i.getGeometryN(n);this.updateLocationInfo(this.locate(t,s))}else if(e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.GeometryCollection)for(var n=0;n<e.getNumGeometries();n++){var a=e.getGeometryN(n);a!==e&&this.computeLocation(t,a)}},jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(t){t===jsts.geom.Location.INTERIOR&&(this.isIn=!0),t===jsts.geom.Location.BOUNDARY&&this.numBoundaries++},jsts.algorithm.PointLocator.prototype.locate2=function(t,e){return e.getCoordinate().equals2D(t)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate3=function(t,e){if(!e.getEnvelopeInternal().intersects(t))return jsts.geom.Location.EXTERIOR;var o=e.getCoordinates();return e.isClosed()||!t.equals(o[0])&&!t.equals(o[o.length-1])?jsts.algorithm.CGAlgorithms.isOnLine(t,o)?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR:jsts.geom.Location.BOUNDARY},jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?jsts.algorithm.CGAlgorithms.locatePointInRing(t,e.getCoordinates()):jsts.geom.Location.EXTERIOR},jsts.algorithm.PointLocator.prototype.locate4=function(t,e){if(e.isEmpty())return jsts.geom.Location.EXTERIOR;var o=e.getExteriorRing(),n=this.locateInPolygonRing(t,o);if(n===jsts.geom.Location.EXTERIOR)return jsts.geom.Location.EXTERIOR;if(n===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,i);if(s===jsts.geom.Location.INTERIOR)return jsts.geom.Location.EXTERIOR;if(s===jsts.geom.Location.BOUNDARY)return jsts.geom.Location.BOUNDARY}return jsts.geom.Location.INTERIOR},function(){var t=jsts.geom.Location,e=javascript.util.ArrayList,o=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(t){this.nodeMap=new o,this.nodeFact=t},jsts.geomgraph.NodeMap.prototype.nodeMap=null,jsts.geomgraph.NodeMap.prototype.nodeFact=null,jsts.geomgraph.NodeMap.prototype.addNode=function(t){var e,o;if(t instanceof jsts.geom.Coordinate)return o=t,e=this.nodeMap.get(o),null===e&&(e=this.nodeFact.createNode(o),this.nodeMap.put(o,e)),e;if(t instanceof jsts.geomgraph.Node){var n=t;return o=n.getCoordinate(),null===(e=this.nodeMap.get(o))?(this.nodeMap.put(o,n),n):(e.mergeLabel(n),e)}},jsts.geomgraph.NodeMap.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},jsts.geomgraph.NodeMap.prototype.find=function(t){return this.nodeMap.get(t)},jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values()},jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator()},jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(o){for(var n=new e,r=this.iterator();r.hasNext();){var i=r.next();i.getLabel().getLocation(o)===t.BOUNDARY&&n.add(i)}return n}}(),function(){var t=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(e){this.edges=new t,this.edgeEndList=new t,this.nodes=new jsts.geomgraph.NodeMap(e||new jsts.geomgraph.NodeFactory)},jsts.geomgraph.PlanarGraph.prototype.edges=null,jsts.geomgraph.PlanarGraph.prototype.nodes=null,jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null,jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator()},jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList},jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(t,e){var o=this.nodes.find(e);if(null===o)return!1;var n=o.getLabel();return null!==n&&n.getLocation(t)===jsts.geom.Location.BOUNDARY},jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(t){this.edges.add(t)},jsts.geomgraph.PlanarGraph.prototype.add=function(t){this.nodes.add(t),this.edgeEndList.add(t)},jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()},jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values()},jsts.geomgraph.PlanarGraph.prototype.addNode=function(t){return this.nodes.addNode(t)},jsts.geomgraph.PlanarGraph.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();this.edges.add(o);var n=new jsts.geomgraph.DirectedEdge(o,!0),r=new jsts.geomgraph.DirectedEdge(o,!1);n.setSym(r),r.setSym(n),this.add(n),this.add(r)}},jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(t,e){var o,n,r=0,i=this.edges.size();for(r;r<i;r++){if(o=this.edges.get(r),n=o.getCoordinates(),this.matchInSameDirection(t,e,n[0],n[1]))return o;if(this.matchInSameDirection(t,e,n[n.length-1],n[n.length-2]))return o}return null},jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(t,e,o,n){return!!t.equals(o)&&(jsts.algorithm.CGAlgorithms.computeOrientation(t,e,n)===jsts.algorithm.CGAlgorithms.COLLINEAR&&jsts.geomgraph.Quadrant.quadrant(t,e)===jsts.geomgraph.Quadrant.quadrant(o,n))},jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var o=e.next();if(o.getEdge()===t)return o}return null}}(),jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]],this.intPt=[null,null],this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.NO_INTERSECTION=0,jsts.algorithm.LineIntersector.POINT_INTERSECTION=1,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2,jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(t){this.precisionModel=t},jsts.algorithm.LineIntersector.prototype.getEndpoint=function(t,e){return this.inputLines[t][e]},jsts.algorithm.LineIntersector.computeEdgeDistance=function(t,e,o){var n=Math.abs(o.x-e.x),r=Math.abs(o.y-e.y),i=-1;if(t.equals(e))i=0;else if(t.equals(o))i=n>r?n:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);i=n>r?s:a,0!==i||t.equals(e)||(i=Math.max(s,a))}if(0===i&&!t.equals(e))throw new jsts.error.IllegalArgumentError("Bad distance calculation");return i},jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(t,e,o){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);if(0!==i||t.equals(e))throw new jsts.error.IllegalArgumentError("Invalid distance calculation");return i},jsts.algorithm.LineIntersector.prototype.result=null,jsts.algorithm.LineIntersector.prototype.inputLines=null,jsts.algorithm.LineIntersector.prototype.intPt=null,jsts.algorithm.LineIntersector.prototype.intLineIndex=null,jsts.algorithm.LineIntersector.prototype._isProper=null,jsts.algorithm.LineIntersector.prototype.pa=null,jsts.algorithm.LineIntersector.prototype.pb=null,jsts.algorithm.LineIntersector.prototype.precisionModel=null,jsts.algorithm.LineIntersector.prototype.computeIntersection=function(t,e,o){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION},jsts.algorithm.LineIntersector.prototype.computeIntersection=function(t,e,o,n){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=o,this.inputLines[1][1]=n,this.result=this.computeIntersect(t,e,o,n)},jsts.algorithm.LineIntersector.prototype.computeIntersect=function(t,e,o,n){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result},jsts.algorithm.LineIntersector.prototype.getIntersection=function(t){return this.intPt[t]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){null===this.intLineIndex&&(this.intLineIndex=[[],[]],this.computeIntLineIndex(0),this.computeIntLineIndex(1))},jsts.algorithm.LineIntersector.prototype.isIntersection=function(t){var e;for(e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){return 1===arguments.length?this.isInteriorIntersection2.apply(this,arguments):!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1)},jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(t){var e;for(e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1},jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this.intPt[intLineIndex[t][e]]},jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(t){this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)},jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(t,e){return jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1])},jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this)},jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector,jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(t,e,o){return 4===arguments.length?void jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments):(this._isProper=!1,jsts.geom.Envelope.intersects(e,o,t)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(e,o,t)&&0===jsts.algorithm.CGAlgorithms.orientationIndex(o,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(o))&&(this._isProper=!1),void(this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION)):void(this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION))},jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(t,e,o,n){if(this._isProper=!1,!jsts.geom.Envelope.intersects(t,e,o,n))return jsts.algorithm.LineIntersector.NO_INTERSECTION;var r=jsts.algorithm.CGAlgorithms.orientationIndex(t,e,o),i=jsts.algorithm.CGAlgorithms.orientationIndex(t,e,n);if(r>0&&i>0||r<0&&i<0)return jsts.algorithm.LineIntersector.NO_INTERSECTION;var s=jsts.algorithm.CGAlgorithms.orientationIndex(o,n,t),a=jsts.algorithm.CGAlgorithms.orientationIndex(o,n,e);return s>0&&a>0||s<0&&a<0?jsts.algorithm.LineIntersector.NO_INTERSECTION:0===r&&0===i&&0===s&&0===a?this.computeCollinearIntersection(t,e,o,n):(0===r||0===i||0===s||0===a?(this._isProper=!1,t.equals2D(o)||t.equals2D(n)?this.intPt[0]=t:e.equals2D(o)||e.equals2D(n)?this.intPt[0]=e:0===r?this.intPt[0]=new jsts.geom.Coordinate(o):0===i?this.intPt[0]=new jsts.geom.Coordinate(n):0===s?this.intPt[0]=new jsts.geom.Coordinate(t):0===a&&(this.intPt[0]=new jsts.geom.Coordinate(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,o,n)),jsts.algorithm.LineIntersector.POINT_INTERSECTION)},jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(t,e,o,n){var r=jsts.geom.Envelope.intersects(t,e,o),i=jsts.geom.Envelope.intersects(t,e,n),s=jsts.geom.Envelope.intersects(o,n,t),a=jsts.geom.Envelope.intersects(o,n,e);return r&&i?(this.intPt[0]=o,this.intPt[1]=n,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION):r&&s?(this.intPt[0]=o,this.intPt[1]=t,!o.equals(t)||i||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):r&&a?(this.intPt[0]=o,this.intPt[1]=e,!o.equals(e)||i||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):i&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||r||a?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):i&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||r||s?jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION:jsts.algorithm.LineIntersector.POINT_INTERSECTION):jsts.algorithm.LineIntersector.NO_INTERSECTION},jsts.algorithm.RobustLineIntersector.prototype.intersection=function(t,e,o,n){var r=this.intersectionWithNormalization(t,e,o,n);return this.isInSegmentEnvelopes(r)||(r=jsts.algorithm.CentralEndpointIntersector.getIntersection(t,e,o,n)),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(t,e,o,n){var r=new jsts.geom.Coordinate(t),i=new jsts.geom.Coordinate(e),s=new jsts.geom.Coordinate(o),a=new jsts.geom.Coordinate(n),l=new jsts.geom.Coordinate;this.normalizeToEnvCentre(r,i,s,a,l);var c=this.safeHCoordinateIntersection(r,i,s,a);return c.x+=l.x,c.y+=l.y,c},jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(t,e,o,n){var r=null;try{r=jsts.algorithm.HCoordinate.intersection(t,e,o,n)}catch(i){if(!(i instanceof jsts.error.NotRepresentableError))throw i;r=jsts.algorithm.CentralEndpointIntersector.getIntersection(t,e,o,n)}return r},jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(t,e,o,n,r){r.x=this.smallestInAbsValue(t.x,e.x,o.x,n.x),r.y=this.smallestInAbsValue(t.y,e.y,o.y,n.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,o.x-=r.x,o.y-=r.y,n.x-=r.x,n.y-=r.y},jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(t,e,o,n,r){var i=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,c=o.x<n.x?o.x:n.x,u=o.y<n.y?o.y:n.y,g=o.x>n.x?o.x:n.x,h=o.y>n.y?o.y:n.y,p=i>c?i:c,d=a<g?a:g,f=s>u?s:u,m=l<h?l:h,y=(p+d)/2,v=(f+m)/2;r.x=y,r.y=v,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,o.x-=r.x,o.y-=r.y,n.x-=r.x,n.y-=r.y},jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(t,e,o,n){var r=t,i=Math.abs(r);return Math.abs(e)<i&&(r=e,i=Math.abs(e)),Math.abs(o)<i&&(r=o,i=Math.abs(o)),Math.abs(n)<i&&(r=n),r},jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(t){var e=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]),o=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&o.contains(t)},jsts.noding.SegmentIntersector=function(){},jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc,jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc,function(){var t=jsts.noding.SegmentIntersector,e=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(t){this.li=t,this.intersections=new e,this.interiorIntersection=null},jsts.noding.InteriorIntersectionFinder.prototype=new t,jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder,jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=!1,jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=!1,jsts.noding.InteriorIntersectionFinder.prototype.li=null,jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null,jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null,jsts.noding.InteriorIntersectionFinder.prototype.intersections=null,jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(t){this.findAllIntersections=t},jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections},jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(t){this.isCheckEndSegmentsOnly=t},jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return null!=this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection},jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments},jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(t,e,o,n){if(!this.hasIntersection()&&(t!=o||e!=n)){if(this.isCheckEndSegmentsOnly){if(!(this.isEndSegment(t,e)||isEndSegment(o,n)))return}var r=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=o.getCoordinates()[n],a=o.getCoordinates()[n+1];this.li.computeIntersection(r,i,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=[],this.intSegments[0]=r,this.intSegments[1]=i,this.intSegments[2]=s,this.intSegments[3]=a,this.interiorIntersection=this.li.getIntersection(0),this.intersections.add(this.interiorIntersection))}},jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(t,e){return 0==e||e>=t.size()-2},jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){return!this.findAllIntersections&&null!=this.interiorIntersection}}(),function(){jsts.noding.Noder=function(){},jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc,jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc}();!function(){var t=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){},jsts.noding.SinglePassNoder.prototype=new t,jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder,jsts.noding.SinglePassNoder.prototype.segInt=null,jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(t){this.segInt=t}}(),jsts.index.SpatialIndex=function(){},jsts.index.SpatialIndex.prototype.insert=function(t,e){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.query=function(t,e){throw new jsts.error.AbstractMethodInvocationError},jsts.index.SpatialIndex.prototype.remove=function(t,e){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree=function(t){void 0!==t&&(this.itemBoundables=[],jsts.util.Assert.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t)},jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){},jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(t,e){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.root=null,jsts.index.strtree.AbstractSTRtree.prototype.built=!1,jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null,jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null,jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built),this.root=0===this.itemBoundables.length?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.built=!0},jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));var o=[];o.push(this.createNode(e));for(var n=[],r=0;r<t.length;r++)n.push(t[r]);n.sort(this.getComparator());for(var r=0;r<n.length;r++){var i=n[r];this.lastNode(o).getChildBoundables().length===this.getNodeCapacity()&&o.push(this.createNode(e)),this.lastNode(o).addChildBoundable(i)}return o},jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(t){return t[t.length-1]},jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));var o=this.createParentBoundables(t,e+1);return 1===o.length?o[0]:this.createHigherLevels(o,e+1)},jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){return this.built||this.build(),this.root},jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity},jsts.index.strtree.AbstractSTRtree.prototype.size=function(){return 1===arguments.length?this.size2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.size2(root))},jsts.index.strtree.AbstractSTRtree.prototype.size2=function(t){for(var e=0,o=t.getChildBoundables(),n=0;n<o.length;n++){var r=o[n];r instanceof jsts.index.strtree.AbstractNode?e+=this.size(r):r instanceof jsts.index.strtree.ItemBoundable&&(e+=1)}return e},jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){return 1===arguments.length?this.depth2(arguments[0]):(this.built||this.build(),0===this.itemBoundables.length?0:this.depth2(root))},jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){for(var t=0,e=node.getChildBoundables(),o=0;o<e.length;o++){var n=e[o];if(n instanceof jsts.index.strtree.AbstractNode){var r=this.depth(n);r>t&&(t=r)}}return t+1},jsts.index.strtree.AbstractSTRtree.prototype.insert=function(t,e){jsts.util.Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(t,e))},jsts.index.strtree.AbstractSTRtree.prototype.query=function(t){arguments.length>1&&this.query2.apply(this,arguments),this.built||this.build();var e=[];return 0===this.itemBoundables.length?(jsts.util.Assert.isTrue(null===this.root.getBounds()),e):(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query3(t,this.root,e),e)},jsts.index.strtree.AbstractSTRtree.prototype.query2=function(t,e){arguments.length>2&&this.query3.apply(this,arguments),this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null===this.root.getBounds()),this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query4(t,this.root,e)},jsts.index.strtree.AbstractSTRtree.prototype.query3=function(t,e,o){arguments[2]instanceof Array||this.query4.apply(this,arguments);for(var n=e.getChildBoundables(),r=0;r<n.length;r++){var i=n[r];this.getIntersectsOp().intersects(i.getBounds(),t)&&(i instanceof jsts.index.strtree.AbstractNode?this.query3(t,i,o):i instanceof jsts.index.strtree.ItemBoundable?o.push(i.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.query4=function(t,e,o){for(var n=e.getChildBoundables(),r=0;r<n.length;r++){var i=n[r];this.getIntersectsOp().intersects(i.getBounds(),t)&&(i instanceof jsts.index.strtree.AbstractNode?this.query4(t,i,o):i instanceof jsts.index.strtree.ItemBoundable?o.visitItem(i.getItem()):jsts.util.Assert.shouldNeverReachHere())}},jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(1===arguments.length)return this.itemsTree2.apply(this,arguments);this.built||this.build();var t=this.itemsTree2(this.root);return null===t?[]:t},jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(t){for(var e=[],o=t.getChildBoundables(),n=0;n<o.length;n++){var r=o[n];if(r instanceof jsts.index.strtree.AbstractNode){var i=this.itemsTree(r);null!=i&&e.push(i)}else r instanceof jsts.index.strtree.ItemBoundable?e.push(r.getItem()):jsts.util.Assert.shouldNeverReachHere()}return e.length<=0?null:e},jsts.index.strtree.AbstractSTRtree.prototype.remove=function(t,e){return this.built||this.build(),0===this.itemBoundables.length&&jsts.util.Assert.isTrue(null==this.root.getBounds()),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove2(t,this.root,e)},jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(t,e,o){var n=this.removeItem(e,o);if(n)return!0;for(var r=null,i=e.getChildBoundables(),s=0;s<i.length;s++){var a=i[s];if(this.getIntersectsOp().intersects(a.getBounds(),t)&&(a instanceof jsts.index.strtree.AbstractNode&&(n=this.remove(t,a,o)))){r=a;break}}return null!=r&&0===r.getChildBoundables().length&&i.splice(i.indexOf(r),1),n},jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(t,e){for(var o=null,n=t.getChildBoundables(),r=0;r<n.length;r++){var i=n[r];i instanceof jsts.index.strtree.ItemBoundable&&i.getItem()===e&&(o=i)}return null!==o&&(n.splice(n.indexOf(o),1),!0)},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(t){if(arguments.length>1)return void this.boundablesAtLevel2.apply(this,arguments);var e=[];return this.boundablesAtLevel2(t,this.root,e),e},jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(t,e,o){if(jsts.util.Assert.isTrue(t>-2),e.getLevel()===t)return void o.add(e);for(var n=node.getChildBoundables(),r=0;r<n.length;r++){var i=n[r];i instanceof jsts.index.strtree.AbstractNode?this.boundablesAtLevel(t,i,o):(jsts.util.Assert.isTrue(i instanceof jsts.index.strtree.ItemBoundable),-1===t&&o.add(i))}},jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.index.strtree.STRtree=function(t){t=t||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY,jsts.index.strtree.AbstractSTRtree.call(this,t)},jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree,jsts.index.strtree.STRtree.prototype.xComparator=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(t.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(e.getBounds()))},jsts.index.strtree.STRtree.prototype.yComparator=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(t.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(e.getBounds()))},jsts.index.strtree.STRtree.prototype.centreX=function(t){return jsts.index.strtree.STRtree.prototype.avg(t.getMinX(),t.getMaxX())},jsts.index.strtree.STRtree.prototype.centreY=function(t){return jsts.index.strtree.STRtree.prototype.avg(t.getMinY(),t.getMaxY())},jsts.index.strtree.STRtree.prototype.avg=function(t,e){return(t+e)/2},jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(t,e){return t.intersects(e)}},jsts.index.strtree.STRtree.prototype.createParentBoundables=function(t,e){jsts.util.Assert.isTrue(!(0===t.length));for(var o=Math.ceil(t.length/this.getNodeCapacity()),n=[],r=0;r<t.length;r++)n.push(t[r]);n.sort(this.xComparator);var i=this.verticalSlices(n,Math.ceil(Math.sqrt(o)));return this.createParentBoundablesFromVerticalSlices(i,e)},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(t,e){jsts.util.Assert.isTrue(t.length>0);for(var o=[],n=0;n<t.length;n++)o=o.concat(this.createParentBoundablesFromVerticalSlice(t[n],e));return o},jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,t,e)},jsts.index.strtree.STRtree.prototype.verticalSlices=function(t,e){for(var o,n,r=Math.ceil(t.length/e),i=[],s=0,a=0;a<e;a++)for(i[a]=[],o=0;s<t.length&&o<r;)n=t[s++],i[a].push(n),o++;return i},jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10,jsts.index.strtree.STRtree.prototype.createNode=function(t){var e=new jsts.index.strtree.AbstractNode(t);return e.computeBounds=function(){for(var t=null,e=this.getChildBoundables(),o=0;o<e.length;o++){var n=e[o];null===t?t=new jsts.geom.Envelope(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e},jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp},jsts.index.strtree.STRtree.prototype.insert=function(t,e){t.isNull()||jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,t,e)},jsts.index.strtree.STRtree.prototype.query=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments)},jsts.index.strtree.STRtree.prototype.remove=function(t,e){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,t,e)},jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this)},jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this)},jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator},jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(t){var e=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour4(e)},jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(t,e,o){var n=new jsts.index.strtree.ItemBoundable(t,e),r=new jsts.index.strtree.BoundablePair(this.getRoot(),n,o);return this.nearestNeighbour4(r)[0]},jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(t,e){var o=new jsts.index.strtree.BoundablePair(this.getRoot(),t.getRoot(),e);return this.nearestNeighbour4(o)},jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(t){return this.nearestNeighbour5(t,Double.POSITIVE_INFINITY)},jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(t,e){var o=e,n=null,r=[];for(r.push(t);!r.isEmpty()&&o>0;){var i=r.pop(),s=i.getDistance();if(s>=o)break;i.isLeaves()?(o=s,n=i):i.expandToQueue(r,o)}return[n.getBoundable(0).getItem(),n.getBoundable(1).getItem()]},jsts.noding.SegmentString=function(){},jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc,jsts.noding.SegmentString.prototype.size=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc,jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc,jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc,jsts.noding.NodableSegmentString=function(){},jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc,jsts.noding.NodedSegmentString=function(t,e){this.nodeList=new jsts.noding.SegmentNodeList(this),this.pts=t,this.data=e},jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString,jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString,jsts.noding.NodedSegmentString.getNodedSubstrings=function(t){if(2===arguments.length)return void jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);var e=new javascript.util.ArrayList;return jsts.noding.NodedSegmentString.getNodedSubstrings2(t,e),e},jsts.noding.NodedSegmentString.getNodedSubstrings2=function(t,e){for(var o=t.iterator();o.hasNext();){o.next().getNodeList().addSplitEdges(e)}},jsts.noding.NodedSegmentString.prototype.nodeList=null,jsts.noding.NodedSegmentString.prototype.pts=null,jsts.noding.NodedSegmentString.prototype.data=null,jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data},jsts.noding.NodedSegmentString.prototype.setData=function(t){this.data=t},jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList},jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.NodedSegmentString.prototype.getCoordinate=function(t){return this.pts[t]},jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},jsts.noding.NodedSegmentString.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:jsts.noding.Octant.octant(t,e)},jsts.noding.NodedSegmentString.prototype.addIntersections=function(t,e,o){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,o,n)},jsts.noding.NodedSegmentString.prototype.addIntersection=function(t,e,o,n){if(t instanceof jsts.geom.Coordinate)return void this.addIntersection2.apply(this,arguments);var r=new jsts.geom.Coordinate(t.getIntersection(n));this.addIntersection2(r,e)},jsts.noding.NodedSegmentString.prototype.addIntersection2=function(t,e){this.addIntersectionNode(t,e)},jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(t,e){var o=e,n=o+1;if(n<this.pts.length){var r=this.pts[n];t.equals2D(r)&&(o=n)}return this.nodeList.add(t,o)},jsts.noding.NodedSegmentString.prototype.toString=function(){var t=new jsts.geom.GeometryFactory;return(new jsts.io.WKTWriter).write(t.createLineString(this.pts))},jsts.index.chain.MonotoneChainBuilder=function(){},jsts.index.chain.MonotoneChainBuilder.toIntArray=function(t){for(var e=[],o=0;o<t.length;o++)e[o]=t[o];return e},jsts.index.chain.MonotoneChainBuilder.getChains=function(t){return 2===arguments.length?jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments):jsts.index.chain.MonotoneChainBuilder.getChains2(t,null)},jsts.index.chain.MonotoneChainBuilder.getChains2=function(t,e){for(var o=[],n=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(t),r=0;r<n.length-1;r++){var i=new jsts.index.chain.MonotoneChain(t,n[r],n[r+1],e);o.push(i)}return o},jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(t){var e=0,o=[];o.push(e);do{var n=jsts.index.chain.MonotoneChainBuilder.findChainEnd(t,e);o.push(n),e=n}while(e<t.length-1);return jsts.index.chain.MonotoneChainBuilder.toIntArray(o)},jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(t,e){for(var o=e;o<t.length-1&&t[o].equals2D(t[o+1]);)o++;if(o>=t.length-1)return t.length-1;for(var n=jsts.geomgraph.Quadrant.quadrant(t[o],t[o+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r])){if(jsts.geomgraph.Quadrant.quadrant(t[r-1],t[r])!==n)break}r++}return r-1},jsts.geom.LineSegment=function(t,e){if(void 0===t)return this.p0=new jsts.geom.Coordinate,void(this.p1=new jsts.geom.Coordinate);this.p0=t,this.p1=e},jsts.geom.LineSegment.prototype.p0=null,jsts.geom.LineSegment.prototype.p1=null,jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(p1)},jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x},jsts.geom.LineSegment.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},jsts.geom.LineSegment.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,n=e*e+o*o;return((t.x-this.p0.x)*e+(t.y-this.p0.y)*o)/n},jsts.geom.LineSegment.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},jsts.geom.LineSegment.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var o,n=[],r=Number.MAX_VALUE,i=this.closestPoint(t.p0);r=i.distance(t.p0),n[0]=i,n[1]=t.p0;var s=this.closestPoint(t.p1);(o=s.distance(t.p1))<r&&(r=o,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(o=a.distance(this.p0))<r&&(r=o,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return o=l.distance(this.p1),o<r&&(r=o,n[0]=this.p1,n[1]=l),n},jsts.geom.LineSegment.prototype.intersection=function(t){var e=new jsts.algorithm.RobustLineIntersector;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},jsts.geom.LineSegment.prototype.project=function(t){if(t.equals(this.p0)||t.equals(this.p1))return new jsts.geom.Coordinate(t);var e=this.projectionFactor(t),o=new jsts.geom.Coordinate;return o.x=this.p0.x+e*(this.p1.x-this.p0.x),o.y=this.p0.y+e*(this.p1.y-this.p0.y),o},jsts.geom.LineSegment.prototype.setCoordinates=function(t){if(t instanceof jsts.geom.Coordinate)return void this.setCoordinates2.apply(this,arguments);this.setCoordinates2(t.p0,t.p1)},jsts.geom.LineSegment.prototype.setCoordinates2=function(t,e){this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y},jsts.geom.LineSegment.prototype.distance=function(t){return jsts.algorithm.CGAlgorithms.distancePointLine(t,this.p0,this.p1)},jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.tempEnv2=new jsts.geom.Envelope,this.overlapSeg1=new jsts.geom.LineSegment,this.overlapSeg2=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null,jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(t,e,o,n){this.mc1.getLineSegment(e,this.overlapSeg1),this.mc2.getLineSegment(n,this.overlapSeg2),this.overlap2(this.overlapSeg1,this.overlapSeg2)},jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(t,e){},function(){var t=jsts.index.chain.MonotoneChainOverlapAction,e=jsts.noding.SinglePassNoder,o=jsts.index.strtree.STRtree,n=jsts.noding.NodedSegmentString,r=jsts.index.chain.MonotoneChainBuilder,i=function(t){this.si=t};i.prototype=new t,i.constructor=i,i.prototype.si=null,i.prototype.overlap=function(t,e,o,n){var r=t.getContext(),i=o.getContext();this.si.processIntersections(r,e,i,n)},jsts.noding.MCIndexNoder=function(){this.monoChains=[],this.index=new o},jsts.noding.MCIndexNoder.prototype=new e,jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder,jsts.noding.MCIndexNoder.prototype.monoChains=null,jsts.noding.MCIndexNoder.prototype.index=null,jsts.noding.MCIndexNoder.prototype.idCounter=0,jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null,jsts.noding.MCIndexNoder.prototype.nOverlaps=0,jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains},jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index},jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return n.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.MCIndexNoder.prototype.computeNodes=function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},jsts.noding.MCIndexNoder.prototype.intersectChains=function(){for(var t=new i(this.segInt),e=0;e<this.monoChains.length;e++)for(var o=this.monoChains[e],n=this.index.query(o.getEnvelope()),r=0;r<n.length;r++){var s=n[r];if(s.getId()>o.getId()&&(o.computeOverlaps(s,t),this.nOverlaps++),this.segInt.isDone())return}},jsts.noding.MCIndexNoder.prototype.add=function(t){for(var e=r.getChains(t.getCoordinates(),t),o=0;o<e.length;o++){var n=e[o];n.setId(this.idCounter++),this.index.insert(n.getEnvelope(),n),this.monoChains.push(n)}}}(),function(){var t=jsts.algorithm.RobustLineIntersector,e=jsts.noding.InteriorIntersectionFinder,o=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(e){this.li=new t,this.segStrings=e},jsts.noding.FastNodingValidator.prototype.li=null,jsts.noding.FastNodingValidator.prototype.segStrings=null,jsts.noding.FastNodingValidator.prototype.findAllIntersections=!1,jsts.noding.FastNodingValidator.prototype.segInt=null,jsts.noding.FastNodingValidator.prototype._isValid=!0,jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(t){this.findAllIntersections=t},jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections()},jsts.noding.FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid},jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+jsts.io.WKTWriter.toLineString(t[0],t[1])+" and "+jsts.io.WKTWriter.toLineString(t[2],t[3])},jsts.noding.FastNodingValidator.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection())},jsts.noding.FastNodingValidator.prototype.execute=function(){null==this.segInt&&this.checkInteriorIntersections()},jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this.segInt=new e(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new o;if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return void(this._isValid=!1)}}(),function(){jsts.noding.BasicSegmentString=function(t,e){this.pts=t,this.data=e},jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString,jsts.noding.BasicSegmentString.prototype.pts=null,jsts.noding.BasicSegmentString.prototype.data=null,jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data},jsts.noding.BasicSegmentString.prototype.setData=function(t){this.data=t},jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length},jsts.noding.BasicSegmentString.prototype.getCoordinate=function(t){return this.pts[t]},jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts},jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(t){return t==this.pts.length-1?-1:jsts.noding.Octant.octant(this.getCoordinate(t),this.getCoordinate(t+1))}}(),function(){var t=jsts.noding.FastNodingValidator,e=jsts.noding.BasicSegmentString,o=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(e){this.nv=new t(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(e))},jsts.geomgraph.EdgeNodingValidator.checkValid=function(t){new jsts.geomgraph.EdgeNodingValidator(t).checkValid()},jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(t){for(var n=new o,r=t.iterator();r.hasNext();){var i=r.next();n.add(new e(i.getCoordinates(),i))}return n},jsts.geomgraph.EdgeNodingValidator.prototype.nv=null,jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid()}}(),jsts.operation.GeometryGraphOperation=function(t,e,o){if(this.li=new jsts.algorithm.RobustLineIntersector,this.arg=[],void 0!==t){if(void 0===e)return this.setComputationPrecision(t.getPrecisionModel()),void(this.arg[0]=new jsts.geomgraph.GeometryGraph(0,t));o=o||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this.arg[0]=new jsts.geomgraph.GeometryGraph(0,t,o),this.arg[1]=new jsts.geomgraph.GeometryGraph(1,e,o)}},jsts.operation.GeometryGraphOperation.prototype.li=null,jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null,jsts.operation.GeometryGraphOperation.prototype.arg=null,jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(t){return arg[t].getGeometry()},jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},jsts.operation.overlay.OverlayNodeFactory=function(){},jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory,jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(t){return new jsts.geomgraph.Node(t,new jsts.geomgraph.DirectedEdgeStar)},jsts.operation.overlay.PolygonBuilder=function(t){this.shellList=[],this.geometryFactory=t},jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null,jsts.operation.overlay.PolygonBuilder.prototype.shellList=null,jsts.operation.overlay.PolygonBuilder.prototype.add=function(t){if(2===arguments.length)return void this.add2.apply(this,arguments);this.add2(t.getEdgeEnds(),t.getNodes())},jsts.operation.overlay.PolygonBuilder.prototype.add2=function(t,e){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(e);var o=this.buildMaximalEdgeRings(t),n=[],r=this.buildMinimalEdgeRings(o,this.shellList,n);this.sortShellsAndHoles(r,this.shellList,n),this.placeFreeHoles(this.shellList,n)},jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){return this.computePolygons(this.shellList)},jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(t){for(var e=[],o=t.iterator();o.hasNext();){var n=o.next();if(n.isInResult()&&n.getLabel().isArea()&&null==n.getEdgeRing()){var r=new jsts.operation.overlay.MaximalEdgeRing(n,this.geometryFactory);e.push(r),r.setInResult()}}return e},jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(t,e,o){for(var n=[],r=0;r<t.length;r++){var i=t[r];if(i.getMaxNodeDegree()>2){i.linkDirectedEdgesForMinimalEdgeRings();var s=i.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.push(a)):o=o.concat(s)}else n.push(i)}return n},jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(t){for(var e=0,o=null,n=0;n<t.length;n++){var r=t[n];r.isHole()||(o=r,e++)}return jsts.util.Assert.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),o},jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.isHole()&&n.setShell(t)}},jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(t,e,o){for(var n=0;n<t.length;n++){var r=t[n];r.isHole()?o.push(r):e.push(r)}},jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(t,e){for(var o=0;o<e.length;o++){var n=e[o];if(null==n.getShell()){var r=this.findEdgeRingContaining(n,t);if(null===r)throw new jsts.error.TopologyError("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(r)}}},jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(t,e){for(var o=t.getLinearRing(),n=o.getEnvelopeInternal(),r=o.getCoordinateN(0),i=null,s=null,a=0;a<e.length;a++){var l=e[a],c=l.getLinearRing(),u=c.getEnvelopeInternal();null!==i&&(s=i.getLinearRing().getEnvelopeInternal());var g=!1;u.contains(n)&&jsts.algorithm.CGAlgorithms.isPointInRing(r,c.getCoordinates())&&(g=!0),g&&(null==i||s.contains(u))&&(i=l)}return i},jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(t){for(var e=new javascript.util.ArrayList,o=0;o<t.length;o++){var n=t[o],r=n.toPolygon(this.geometryFactory);e.add(r)}return e},jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(t){for(var e=0;e<this.shellList.length;e++){if(this.shellList[e].containsPoint(t))return!0}return!1},function(){var t=jsts.util.Assert,e=javascript.util.ArrayList,o=function(t,o,n){this.lineEdgesList=new e,this.resultLineList=new e,this.op=t,this.geometryFactory=o,this.ptLocator=n};o.prototype.op=null,o.prototype.geometryFactory=null,o.prototype.ptLocator=null,o.prototype.lineEdgesList=null,o.prototype.resultLineList=null,o.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},o.prototype.findCoveredLineEdges=function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var o=e.next(),n=o.getEdge();if(o.isLineEdge()&&!n.isCoveredSet()){var r=this.op.isCoveredByA(o.getCoordinate());n.setCovered(r)}}},o.prototype.collectLines=function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var o=e.next();this.collectLineEdge(o,t,this.lineEdgesList),this.collectBoundaryTouchEdge(o,t,this.lineEdgesList)}},o.prototype.collectLineEdge=function(t,e,o){var n=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!jsts.operation.overlay.OverlayOp.isResultOfOp(n,e)||r.isCovered()||(o.add(r),t.setVisitedEdge(!0)))},o.prototype.collectBoundaryTouchEdge=function(e,o,n){var r=e.getLabel();e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()||(t.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),jsts.operation.overlay.OverlayOp.isResultOfOp(r,o)&&o===jsts.operation.overlay.OverlayOp.INTERSECTION&&(n.add(e.getEdge()),e.setVisitedEdge(!0)))},o.prototype.buildLines=function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var o=e.next(),n=(o.getLabel(),this.geometryFactory.createLineString(o.getCoordinates()));this.resultLineList.add(n),o.setInResult(!0)}},o.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next(),n=o.getLabel();o.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(o,0):this.labelIsolatedLine(o,1))}},o.prototype.labelIsolatedLine=function(t,e){var o=ptLocator.locate(t.getCoordinate(),op.getArgGeometry(e));t.getLabel().setLocation(e,o)},jsts.operation.overlay.LineBuilder=o}(),function(){var t=javascript.util.ArrayList,e=function(e,o,n){this.resultPointList=new t,this.op=e,this.geometryFactory=o};e.prototype.op=null,e.prototype.geometryFactory=null,e.prototype.resultPointList=null,e.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},e.prototype.extractNonCoveredResultNodes=function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var o=e.next();if(!o.isInResult()&&(!o.isIncidentEdgeInResult()&&(0===o.getEdges().getDegree()||t===jsts.operation.overlay.OverlayOp.INTERSECTION))){var n=o.getLabel();jsts.operation.overlay.OverlayOp.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(o)}}},e.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var o=this.geometryFactory.createPoint(e);this.resultPointList.add(o)}},jsts.operation.overlay.PointBuilder=e}(),function(){var t=jsts.algorithm.PointLocator,e=jsts.geom.Location,o=jsts.geomgraph.EdgeList,n=jsts.geomgraph.Label,r=jsts.geomgraph.PlanarGraph,i=jsts.geomgraph.Position,s=jsts.geomgraph.EdgeNodingValidator,a=jsts.operation.GeometryGraphOperation,l=jsts.operation.overlay.OverlayNodeFactory,c=jsts.operation.overlay.PolygonBuilder,u=jsts.operation.overlay.LineBuilder,g=jsts.operation.overlay.PointBuilder,h=jsts.util.Assert,p=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(e,n){this.ptLocator=new t,this.edgeList=new o,this.resultPolyList=new p,this.resultLineList=new p,this.resultPointList=new p,a.call(this,e,n),this.graph=new r(new l),this.geomFact=e.getFactory()},jsts.operation.overlay.OverlayOp.prototype=new a,jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp,jsts.operation.overlay.OverlayOp.INTERSECTION=1,jsts.operation.overlay.OverlayOp.UNION=2,jsts.operation.overlay.OverlayOp.DIFFERENCE=3,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4,jsts.operation.overlay.OverlayOp.overlayOp=function(t,e,o){return new jsts.operation.overlay.OverlayOp(t,e).getResultGeometry(o)},jsts.operation.overlay.OverlayOp.isResultOfOp=function(t,e){if(3===arguments.length)return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments);var o=t.getLocation(0),n=t.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(o,n,e)},jsts.operation.overlay.OverlayOp.isResultOfOp2=function(t,o,n){switch(t==e.BOUNDARY&&(t=e.INTERIOR),o==e.BOUNDARY&&(o=e.INTERIOR),n){case jsts.operation.overlay.OverlayOp.INTERSECTION:return t==e.INTERIOR&&o==e.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return t==e.INTERIOR||o==e.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return t==e.INTERIOR&&o!=e.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return t==e.INTERIOR&&o!=e.INTERIOR||t!=e.INTERIOR&&o==e.INTERIOR}return!1},jsts.operation.overlay.OverlayOp.prototype.ptLocator=null,jsts.operation.overlay.OverlayOp.prototype.geomFact=null,jsts.operation.overlay.OverlayOp.prototype.resultGeom=null,jsts.operation.overlay.OverlayOp.prototype.graph=null,jsts.operation.overlay.OverlayOp.prototype.edgeList=null,jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null,jsts.operation.overlay.OverlayOp.prototype.resultLineList=null,jsts.operation.overlay.OverlayOp.prototype.resultPointList=null,jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this.resultGeom},jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph},jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new p;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e);this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),s.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var o=new c(this.geomFact);o.add(this.graph),this.resultPolyList=o.getPolygons();var n=new u(this,this.geomFact,this.ptLocator);this.resultLineList=n.build(t);var r=new g(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();this.insertUniqueEdge(o)}},jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var o=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new n(t.getLabel()),r.flip());var i=e.getDepth();i.isNull()&&i.add(o),i.add(r),o.merge(r)}else this.edgeList.add(t)},jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),o=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var r=0;r<2;r++)o.isNull(r)||!o.isArea()||n.isNull(r)||(0==n.getDelta(r)?o.toLine(r):(h.isTrue(!n.isNull(r,i.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(r,i.LEFT,n.getLocation(r,i.LEFT)),h.isTrue(!n.isNull(r,i.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(r,i.RIGHT,n.getLocation(r,i.RIGHT))))}}},jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){for(var t=new p,e=this.edgeList.iterator();e.hasNext();){var o=e.next();o.isCollapsed()&&(e.remove(),t.add(o.getCollapsedEdge()))}this.edgeList.addAll(t)},jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var o=e.next();this.graph.addNode(o.getCoordinate()).setLabel(t,o.getLabel().getLocation(t))}},jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),o=e.getEdges().getLabel();e.getLabel().merge(o)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var o=e.next(),n=o.getLabel();o.isIsolated()&&(t++,n.isNull(0)?this.labelIncompleteNode(o,0):this.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(n)}},jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(t,e){var o=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,o)},jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var o=e.next(),n=o.getLabel();n.isArea()&&!o.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(n.getLocation(0,i.RIGHT),n.getLocation(1,i.RIGHT),t)&&o.setInResult(!0)}},jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),o=e.getSym();e.isInResult()&&o.isInResult()&&(e.setInResult(!1),o.setInResult(!1))}},jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this.resultPolyList)},jsts.operation.overlay.OverlayOp.prototype.isCovered=function(t,o){for(var n=o.iterator();n.hasNext();){var r=n.next();if(this.ptLocator.locate(t,r)!=e.EXTERIOR)return!0}return!1},jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(t,e,o,n){var r=new p;return r.addAll(t),r.addAll(e),r.addAll(o),this.geomFact.buildGeometry(r)},jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(t){var e=null;switch(resultDimension(t,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case-1:e=geomFact.createGeometryCollection();break;case 0:e=geomFact.createPoint(null);break;case 1:e=geomFact.createLineString(null);break;case 2:e=geomFact.createPolygon(null,null)}return e},jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(t,e,o){var n=e.getDimension(),r=o.getDimension(),i=-1;switch(t){case jsts.operation.overlay.OverlayOp.INTERSECTION:i=Math.min(n,r);break;case jsts.operation.overlay.OverlayOp.UNION:i=Math.max(n,r);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:i=n;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:i=Math.max(n,r)}return i}}(),function(){var t=function(){this.items=new javascript.util.ArrayList,this.subnode=[null,null]};t.getSubnodeIndex=function(t,e){var o=-1;return t.min>=e&&(o=1),t.max<=e&&(o=0),o},t.prototype.getItems=function(){return this.items},t.prototype.add=function(t){this.items.add(t)},t.prototype.addAllItems=function(t){t.addAll(this.items);var e=0;for(e;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},t.prototype.addAllItemsFromOverlapping=function(t,e){(null===t||this.isSearchMatch(t))&&(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))},t.prototype.remove=function(t,e){if(!this.isSearchMatch(t))return!1;var o=!1,n=0;for(n;n<2;n++)if(null!==this.subnode[n]&&(o=this.subnode[n].remove(t,e))){this.subnode[n].isPrunable()&&(this.subnode[n]=null);break}return o||(o=this.items.remove(e))},t.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},t.prototype.hasChildren=function(){var t=0;for(t;t<2;t++)if(null!==this.subnode[t])return!0;return!1},t.prototype.hasItems=function(){return!this.items.isEmpty()},t.prototype.depth=function(){var t,e=0,o=0;for(o;o<2;o++)null!==this.subnode[o]&&(t=this.subnode[o].depth())>e&&(e=t);return e+1},t.prototype.size=function(){var t=0,e=0;for(e;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},t.prototype.nodeSize=function(){var t=0,e=0;for(e;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},jsts.index.bintree.NodeBase=t}(),function(){var t=function(){if(this.min=0,this.max=0,1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else 2===arguments.length&&this.init(arguments[0],arguments[1])};t.prototype.init=function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.getWidth=function(){return this.max-this.min},t.prototype.expandToInclude=function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},t.prototype.overlaps=function(){return 1===arguments.length?this.overlapsInterval.apply(this,arguments):this.overlapsMinMax.apply(this,arguments)},t.prototype.overlapsInterval=function(t){return this.overlaps(t.min,t.max)},t.prototype.overlapsMinMax=function(t,e){return!(this.min>e||this.max<t)},t.prototype.contains=function(){var t;return arguments[0]instanceof jsts.index.bintree.Interval?(t=arguments[0],this.containsMinMax(t.min,t.max)):1===arguments.length?this.containsPoint(arguments[0]):this.containsMinMax(arguments[0],arguments[1])},t.prototype.containsMinMax=function(t,e){return t>=this.min&&e<=this.max},t.prototype.containsPoint=function(t){return t>=this.min&&t<=this.max},jsts.index.bintree.Interval=t}(),jsts.index.DoubleBits=function(){},jsts.index.DoubleBits.powerOf2=function(t){return Math.pow(2,t)},jsts.index.DoubleBits.exponent=function(t){return jsts.index.DoubleBits.CVTFWD(64,t)-1023},jsts.index.DoubleBits.CVTFWD=function(t,e){var o,n,r,i,s={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},a={32:8,64:11}[t];if(i||(o=e<0||1/e<0,isFinite(e)||(i=s[t],o&&(i.d+=1<<t/4-1),n=Math.pow(2,a)-1,r=0)),!i){for(n={32:127,64:1023}[t],r=Math.abs(e);r>=2;)n++,r/=2;for(;r<1&&n>0;)n--,r*=2;n<=0&&(r/=2,"Zero or Denormal"),32===t&&n>254&&("Too big for Single",i={d:o?255:127,c:128,b:0,a:0},n=Math.pow(2,a)-1,r=0)}return n},function(){var t=jsts.index.DoubleBits,e=jsts.index.bintree.Interval,o=function(t){this.pt=0,this.level=0,this.computeKey(t)};o.computeLevel=function(e){var o=e.getWidth();return t.exponent(o)+1},o.prototype.getPoint=function(){return this.pt},o.prototype.getLevel=function(){return this.level},o.prototype.getInterval=function(){return this.interval},o.prototype.computeKey=function(t){for(this.level=o.computeLevel(t),this.interval=new e,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},o.prototype.computeInterval=function(e,o){var n=t.powerOf2(e);this.pt=Math.floor(o.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},jsts.index.bintree.Key=o}(),function(){var t=jsts.index.bintree.NodeBase,e=jsts.index.bintree.Key,o=jsts.index.bintree.Interval,n=function(t,e){this.items=new javascript.util.ArrayList,this.subnode=[null,null],this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2};n.prototype=new t,n.constructor=n,n.createNode=function(t){var o;return o=new e(t),new n(o.getInterval(),o.getLevel())},n.createExpanded=function(t,e){var r,i;return r=new o(e),null!==t&&r.expandToInclude(t.interval),i=n.createNode(r),null!==t&&i.insert(t),i},n.prototype.getInterval=function(){return this.interval},n.prototype.isSearchMatch=function(t){return t.overlaps(this.interval)},n.prototype.getNode=function(e){var o,n=t.getSubnodeIndex(e,this.centre);return-1!=n?(o=this.getSubnode(n),o.getNode(e)):this},n.prototype.find=function(e){var o,n=t.getSubnodeIndex(e,this.centre);return-1===n?this:null!==this.subnode[n]?(o=this.subnode[n],o.find(e)):this},n.prototype.insert=function(e){var o,n=t.getSubnodeIndex(e.interval,this.centre);e.level===this.level-1?this.subnode[n]=e:(o=this.createSubnode(n),o.insert(e),this.subnode[n]=o)},n.prototype.getSubnode=function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},n.prototype.createSubnode=function(t){var e,r,i;switch(e=0,r=0,t){case 0:e=this.interval.getMin(),r=this.centre;break;case 1:e=this.centre,r=this.interval.getMax()}return i=new o(e,r),new n(i,this.level-1)},jsts.index.bintree.Node=n}(),function(){var t=jsts.index.bintree.Node,e=jsts.index.bintree.NodeBase,o=function(){this.subnode=[null,null],this.items=new javascript.util.ArrayList};o.prototype=new jsts.index.bintree.NodeBase,o.constructor=o,o.origin=0,o.prototype.insert=function(n,r){var i,s,a=e.getSubnodeIndex(n,o.origin);if(-1===a)return void this.add(r);i=this.subnode[a],null!==i&&i.getInterval().contains(n)||(s=t.createExpanded(i,n),this.subnode[a]=s),this.insertContained(this.subnode[a],n,r)},o.prototype.insertContained=function(t,e,o){var n,r;n=jsts.index.IntervalSize.isZeroWidth(e.getMin(),e.getMax()),r=n?t.find(e):t.getNode(e),r.add(o)},o.prototype.isSearchMatch=function(t){return!0},jsts.index.bintree.Root=o}(),function(){var t=jsts.index.bintree.Interval,e=jsts.index.bintree.Root,o=function(){this.root=new e,this.minExtent=1};o.ensureExtent=function(e,o){var n,r;return n=e.getMin(),r=e.getMax(),n!==r?e:(n===r&&(n-=o/2,r=n+o/2),new t(n,r))},o.prototype.depth=function(){return null!==this.root?this.root.depth():0},o.prototype.size=function(){return null!==this.root?this.root.size():0},o.prototype.nodeSize=function(){return null!==this.root?this.root.nodeSize():0},o.prototype.insert=function(t,e){this.collectStats(t);var n=o.ensureExtent(t,this.minExtent);this.root.insert(n,e)},o.prototype.remove=function(t,e){var n=o.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},o.prototype.iterator=function(){var t=new javascript.util.ArrayList;return this.root.addAllItems(t),t.iterator()},o.prototype.query=function(){if(2!==arguments.length){var e=arguments[0];return!e instanceof t&&(e=new t(e,e)),this.queryInterval(e)}this.queryAndAdd(arguments[0],arguments[1])},o.prototype.queryInterval=function(t){var e=new javascript.util.ArrayList;return this.query(t,e),e},o.prototype.queryAndAdd=function(t,e){this.root.addAllItemsFromOverlapping(t,e)},o.prototype.collectStats=function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},jsts.index.bintree.Bintree=o}(),jsts.index.IntervalSize=function(){},jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50,jsts.index.IntervalSize.isZeroWidth=function(t,e){var o=e-t;if(0===o)return!0;var n,r;return n=Math.max(Math.abs(t),Math.abs(e)),r=o/n,jsts.index.DoubleBits.exponent(r)<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT},jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0,jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(t,e,o){if(e instanceof javascript.util.List)return void this.computeIntersections2.apply(this,arguments);this.nOverlaps=0;for(var n=t.iterator();n.hasNext();)for(var r=n.next(),i=t.iterator();i.hasNext();){var s=i.next();(o||r!=s)&&this.computeIntersects(r,s,e)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(t,e,o){this.nOverlaps=0;for(var n=t.iterator();n.hasNext();)for(var r=n.next(),i=e.iterator();i.hasNext();){var s=i.next();this.computeIntersects(r,s,o)}},jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(t,e,o){var n,r,i=t.getCoordinates(),s=e.getCoordinates();for(n=0;n<i.length-1;n++)for(r=0;r<s.length-1;r++)o.addIntersections(t,n,e,r)},jsts.index.ArrayListVisitor=function(){this.items=[]},jsts.index.ArrayListVisitor.prototype.visitItem=function(t){this.items.push(t)},jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items},jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError()},jsts.noding.Octant.octant=function(t,e){if(t instanceof jsts.geom.Coordinate)return jsts.noding.Octant.octant2.apply(this,arguments);if(0===t&&0===e)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for point ( "+t+", "+e+" )");var o=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?o>=n?0:1:o>=n?7:6:e>=0?o>=n?3:2:o>=n?4:5},jsts.noding.Octant.octant2=function(t,e){var o=e.x-t.x,n=e.y-t.y;if(0===o&&0===n)throw new jsts.error.IllegalArgumentError("Cannot compute the octant for two identical points "+t);return jsts.noding.Octant.octant(o,n)},jsts.operation.union.UnionInteracting=function(t,e){this.g0=t,this.g1=e,this.geomFactory=t.getFactory(),this.interacts0=[],this.interacts1=[]},jsts.operation.union.UnionInteracting.union=function(t,e){return new jsts.operation.union.UnionInteracting(t,e).union()},jsts.operation.union.UnionInteracting.prototype.geomFactory=null,jsts.operation.union.UnionInteracting.prototype.g0=null,jsts.operation.union.UnionInteracting.prototype.g1=null,jsts.operation.union.UnionInteracting.prototype.interacts0=null,jsts.operation.union.UnionInteracting.prototype.interacts1=null,jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var t=this.extractElements(this.g0,this.interacts0,!0),e=this.extractElements(this.g1,this.interacts1,!0);t.isEmpty()||e.isEmpty();var o=in0.union(e),n=this.extractElements(this.g0,this.interacts0,!1),r=this.extractElements(this.g1,this.interacts1,!1);return jsts.geom.util.GeometryCombiner.combine(o,n,r)},jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(t,e){return t.getFactory().createGeometryCollection([t,e]).buffer(0)},jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(t){if(t){for(var e=!1,o=0,n=g1.getNumGeometries();o<n;o++){this.g1.getGeometryN(o).getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&(this.interacts1[o]=!0,e=!0)}return e}for(var o=0,n=this.g0.getNumGeometries();o<n;o++){var r=this.g0.getGeometryN(o);this.interacts0[o]=this.computeInteracting(r)}},jsts.operation.union.UnionInteracting.prototype.extractElements=function(t,e,o){for(var n=[],r=0,i=t.getNumGeometries();r<i;r++){var s=t.getGeometryN(r);e[r]===o&&n.push(s)}return this.geomFactory.buildGeometry(n)},jsts.io.OpenLayersParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory},jsts.io.OpenLayersParser.prototype.read=function(t){return"OpenLayers.Geometry.Point"===t.CLASS_NAME?this.convertFromPoint(t):"OpenLayers.Geometry.LineString"===t.CLASS_NAME?this.convertFromLineString(t):"OpenLayers.Geometry.LinearRing"===t.CLASS_NAME?this.convertFromLinearRing(t):"OpenLayers.Geometry.Polygon"===t.CLASS_NAME?this.convertFromPolygon(t):"OpenLayers.Geometry.MultiPoint"===t.CLASS_NAME?this.convertFromMultiPoint(t):"OpenLayers.Geometry.MultiLineString"===t.CLASS_NAME?this.convertFromMultiLineString(t):"OpenLayers.Geometry.MultiPolygon"===t.CLASS_NAME?this.convertFromMultiPolygon(t):"OpenLayers.Geometry.Collection"===t.CLASS_NAME?this.convertFromCollection(t):void 0},jsts.io.OpenLayersParser.prototype.convertFromPoint=function(t){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(t.x,t.y))},jsts.io.OpenLayersParser.prototype.convertFromLineString=function(t){var e,o=[];for(e=0;e<t.components.length;e++)o.push(new jsts.geom.Coordinate(t.components[e].x,t.components[e].y));return this.geometryFactory.createLineString(o)},jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(t){var e,o=[];for(e=0;e<t.components.length;e++)o.push(new jsts.geom.Coordinate(t.components[e].x,t.components[e].y));return this.geometryFactory.createLinearRing(o)},jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(t){var e,o=null,n=[];for(e=0;e<t.components.length;e++){var r=this.convertFromLinearRing(t.components[e]);0===e?o=r:n.push(r)}return this.geometryFactory.createPolygon(o,n)},jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(t){var e,o=[];for(e=0;e<t.components.length;e++)o.push(this.convertFromPoint(t.components[e]));return this.geometryFactory.createMultiPoint(o)};jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(t){var e,o=[];for(e=0;e<t.components.length;e++)o.push(this.convertFromLineString(t.components[e]));return this.geometryFactory.createMultiLineString(o)},jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(t){var e,o=[];for(e=0;e<t.components.length;e++)o.push(this.convertFromPolygon(t.components[e]));return this.geometryFactory.createMultiPolygon(o)},jsts.io.OpenLayersParser.prototype.convertFromCollection=function(t){var e,o=[];for(e=0;e<t.components.length;e++)o.push(this.convertFrom(t.components[e]));return this.geometryFactory.createGeometryCollection(o)},jsts.io.OpenLayersParser.prototype.write=function(t){return"jsts.geom.Point"===t.CLASS_NAME?this.convertToPoint(t.coordinate):"jsts.geom.LineString"===t.CLASS_NAME?this.convertToLineString(t):"jsts.geom.LinearRing"===t.CLASS_NAME?this.convertToLinearRing(t):"jsts.geom.Polygon"===t.CLASS_NAME?this.convertToPolygon(t):"jsts.geom.MultiPoint"===t.CLASS_NAME?this.convertToMultiPoint(t):"jsts.geom.MultiLineString"===t.CLASS_NAME?this.convertToMultiLineString(t):"jsts.geom.MultiPolygon"===t.CLASS_NAME?this.convertToMultiPolygon(t):"jsts.geom.GeometryCollection"===t.CLASS_NAME?this.convertToCollection(t):void 0},jsts.io.OpenLayersParser.prototype.convertToPoint=function(t){return new OpenLayers.Geometry.Point(t.x,t.y)},jsts.io.OpenLayersParser.prototype.convertToLineString=function(t){var e,o=[];for(e=0;e<t.points.length;e++){var n=t.points[e];o.push(this.convertToPoint(n))}return new OpenLayers.Geometry.LineString(o)},jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(t){var e,o=[];for(e=0;e<t.points.length;e++){var n=t.points[e];o.push(this.convertToPoint(n))}return new OpenLayers.Geometry.LinearRing(o)},jsts.io.OpenLayersParser.prototype.convertToPolygon=function(t){var e,o=[];for(o.push(this.convertToLinearRing(t.shell)),e=0;e<t.holes.length;e++){var n=t.holes[e];o.push(this.convertToLinearRing(n))}return new OpenLayers.Geometry.Polygon(o)},jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(t){var e,o=[];for(e=0;e<t.geometries.length;e++){var n=t.geometries[e].coordinate;o.push(new OpenLayers.Geometry.Point(n.x,n.y))}return new OpenLayers.Geometry.MultiPoint(o)},jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(t){var e,o=[];for(e=0;e<t.geometries.length;e++)o.push(this.convertToLineString(t.geometries[e]));return new OpenLayers.Geometry.MultiLineString(o)},jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(t){var e,o=[];for(e=0;e<t.geometries.length;e++)o.push(this.convertToPolygon(t.geometries[e]));return new OpenLayers.Geometry.MultiPolygon(o)},jsts.io.OpenLayersParser.prototype.convertToCollection=function(t){var e,o=[];for(e=0;e<t.geometries.length;e++){var n=t.geometries[e],r=this.write(n);o.push(r)}return new OpenLayers.Geometry.Collection(o)},jsts.operation.union.PointGeometryUnion=function(t,e){this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()},jsts.operation.union.PointGeometryUnion.union=function(t,e){return new jsts.operation.union.PointGeometryUnion(t,e).union()},jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null,jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null,jsts.operation.union.PointGeometryUnion.prototype.geomFact=null,jsts.operation.union.PointGeometryUnion.prototype.union=function(){for(var t=new jsts.algorithm.PointLocator,e=[],o=0,n=this.pointGeom.getNumGeometries();o<n;o++){var r=this.pointGeom.getGeometryN(o),i=r.getCoordinate();if(t.locate(i,this.otherGeom)===jsts.geom.Location.EXTERIOR){for(var s=!0,a=e.length;o--;)if(e[a].equals(i)){s=!1;break}s&&e.push(i)}}if(e.sort(function(t,e){return t.compareTo(e)}),0===e.length)return this.otherGeom;var l=null,c=jsts.geom.CoordinateArrays.toCoordinateArray(e);return l=1===c.length?this.geomFact.createPoint(c[0]):this.geomFact.createMultiPoint(c),jsts.geom.util.GeometryCombiner.combine(l,this.otherGeom)},jsts.noding.IntersectionFinderAdder=function(t){this.li=t,this.interiorIntersections=new javascript.util.ArrayList},jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder,jsts.noding.IntersectionFinderAdder.prototype.li=null,jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null,jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections},jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(t,e,o,n){if(t!==o||e!==n){var r=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=o.getCoordinates()[n],a=o.getCoordinates()[n+1];if(this.li.computeIntersection(r,i,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var l=0;l<this.li.getIntersectionNum();l++)this.interiorIntersections.add(this.li.getIntersection(l));t.addIntersections(this.li,e,0),o.addIntersections(this.li,n,1)}}},jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return!1},jsts.operation.valid.ConnectedInteriorTester=function(t){this.geomGraph=t,this.geometryFactory=new jsts.geom.GeometryFactory,this.disconnectedRingcoord=null},jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(t,e){var o=0,n=t.length;for(o;o<n;o++)if(!t[o].equals(e))return t[o];return null},jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord},jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var t=new javascript.util.ArrayList;this.geomGraph.computeSplitEdges(t);var e=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var o=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(o)},jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(t){for(var e,o=t.getEdgeEnds().iterator();o.hasNext();)e=o.next(),e.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&e.setInResult(!0)},jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(t){for(var e=new javascript.util.ArrayList,o=t.iterator();o.hasNext();){var n=o.next();if(n.isInResult()&&null==n.getEdgeRing()){var r=new jsts.operation.overlay.MaximalEdgeRing(n,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var i=r.buildMinimalRings(),s=0,a=i.length;for(s;s<a;s++)e.add(i[s])}}return e},jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(t,e){if(t instanceof jsts.geom.Polygon){var o=t;this.visitInteriorRing(o.getExteriorRing(),e)}if(t instanceof jsts.geom.MultiPolygon)for(var n=t,r=0;r<n.getNumGeometries();r++){var o=n.getGeometryN(r);this.visitInteriorRing(o.getExteriorRing(),e)}},jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(t,e){var o=t.getCoordinates(),n=o[0],r=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(o,n),i=e.findEdgeInSameDirection(n,r),s=e.findEdgeEnd(i),a=null;s.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR&&(a=s.getSym()),this.visitLinkedDirectedEdges(a)},jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(t){var e=t,o=t;do{o.setVisited(!0),o=o.getNext()}while(o!=e)},jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(t){for(var e=0;e<t.size();e++){var o=t.get(e);if(!o.isHole()){var n=o.getEdges(),r=n[0];if(r.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR)for(var i=0;i<n.length;i++)if(r=n[i],!r.isVisited())return disconnectedRingcoord=r.getCoordinate(),!0}}return!1},jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope,this.selectedSegment=new jsts.geom.LineSegment},jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null,jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null,jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(t,e){t.getLineSegment(e,this.selectedSegment),this.select2(this.selectedSegment)},jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(t){},jsts.algorithm.MCPointInRing=function(t){this.ring=t,this.tree=null,this.crossings=0,this.interval=new jsts.index.bintree.Interval,this.buildIndex()},jsts.algorithm.MCPointInRing.MCSelecter=function(t,e){this.parent=e,this.p=t},jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction,jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter,jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(t){this.parent.testLineSegment.apply(this.parent,[this.p,t])},jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree;for(var t=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates()),e=jsts.index.chain.MonotoneChainBuilder.getChains(t),o=0;o<e.length;o++){var n=e[o],r=n.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,n)}},jsts.algorithm.MCPointInRing.prototype.isInside=function(t){this.crossings=0;var e=new jsts.geom.Envelope(-Number.MAX_VALUE,Number.MAX_VALUE,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var o=this.tree.query(this.interval),n=new jsts.algorithm.MCPointInRing.MCSelecter(t,this),r=o.iterator();r.hasNext();){var i=r.next();this.testMonotoneChain(e,n,i)}return this.crossings%2==1},jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(t,e,o){o.select(t,e)},jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(t,e){var o,n,r,i,s,a;s=e.p0,a=e.p1,o=s.x-t.x,n=s.y-t.y,r=a.x-t.x,i=a.y-t.y,(n>0&&i<=0||i>0&&n<=0)&&0<jsts.algorithm.RobustDeterminant.signOfDet2x2(o,n,r,i)/(i-n)&&this.crossings++},jsts.operation.valid.TopologyValidationError=function(t,e){this.errorType=t,this.pt=null,null!=e&&(this.pt=e.clone())},jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2,jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3,jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4,jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5,jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6,jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7,jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8,jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9,jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10,jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11,jsts.operation.valid.TopologyValidationError.prototype.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt},jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType},jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType]},jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var t="";return null!=this.pt?(t=" at or near point "+this.pt,this.getMessage()+t):t},function(){var t=jsts.geom.Geometry,e=javascript.util.TreeSet,o=javascript.util.Arrays;jsts.geom.GeometryCollection=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.GeometryCollection.prototype=new t,jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection,jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var t=0,e=this.geometries.length;t<e;t++){if(!this.getGeometryN(t).isEmpty())return!1}return!0},jsts.geom.Geometry.prototype.getArea=function(){for(var t=0,e=0,o=this.geometries.length;e<o;e++)t+=this.getGeometryN(e).getArea();return t},jsts.geom.Geometry.prototype.getLength=function(){for(var t=0,e=0,o=this.geometries.length;e<o;e++)t+=this.getGeometryN(e).getLength();return t},jsts.geom.GeometryCollection.prototype.getCoordinate=function(){return this.isEmpty()?null:this.getGeometryN(0).getCoordinate()},jsts.geom.GeometryCollection.prototype.getCoordinates=function(){for(var t=[],e=-1,o=0,n=this.geometries.length;o<n;o++)for(var r=this.getGeometryN(o),i=r.getCoordinates(),s=0;s<i.length;s++)e++,t[e]=i[s];return t},jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length},jsts.geom.GeometryCollection.prototype.getGeometryN=function(t){var e=this.geometries[t];return e instanceof jsts.geom.Coordinate&&(e=new jsts.geom.Point(e)),e},jsts.geom.GeometryCollection.prototype.equalsExact=function(t,e){if(!this.isEquivalentClass(t))return!1;if(this.geometries.length!==t.geometries.length)return!1;for(var o=0,n=this.geometries.length;o<n;o++){if(!this.getGeometryN(o).equalsExact(t.getGeometryN(o),e))return!1}return!0},jsts.geom.GeometryCollection.prototype.clone=function(){for(var t=[],e=0,o=this.geometries.length;e<o;e++)t.push(this.geometries[e].clone());return this.factory.createGeometryCollection(t)},jsts.geom.GeometryCollection.prototype.normalize=function(){for(var t=0,e=this.geometries.length;t<e;t++)this.getGeometryN(t).normalize();this.geometries.sort()},jsts.geom.GeometryCollection.prototype.compareToSameClass=function(t){var n=new e(o.asList(this.geometries)),r=new e(o.asList(t.geometries));return this.compare(n,r)},jsts.geom.GeometryCollection.prototype.apply=function(t){if(t instanceof jsts.geom.GeometryFilter||t instanceof jsts.geom.GeometryComponentFilter){t.filter(this);for(var e=0,o=this.geometries.length;e<o;e++)this.getGeometryN(e).apply(t)}else if(t instanceof jsts.geom.CoordinateFilter)for(var e=0,o=this.geometries.length;e<o;e++)this.getGeometryN(e).apply(t);else t instanceof jsts.geom.CoordinateSequenceFilter&&this.apply2.apply(this,arguments)},jsts.geom.GeometryCollection.prototype.apply2=function(t){if(0!=this.geometries.length){for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()}},jsts.geom.GeometryCollection.prototype.getDimension=function(){for(var t=jsts.geom.Dimension.FALSE,e=0,o=this.geometries.length;e<o;e++){var n=this.getGeometryN(e);t=Math.max(t,n.getDimension())}return t},jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){for(var t=new jsts.geom.Envelope,e=0,o=this.geometries.length;e<o;e++){var n=this.getGeometryN(e);t.expandToInclude(n.getEnvelopeInternal())}return t},jsts.geom.GeometryCollection.prototype.CLASS_NAME="jsts.geom.GeometryCollection"}(),function(){jsts.geom.MultiPolygon=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon,jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString(null);for(var t=[],e=0;e<this.geometries.length;e++)for(var o=this.geometries[e],n=o.getBoundary(),r=0;r<n.getNumGeometries();r++)t.push(n.getGeometryN(r));return this.getFactory().createMultiLineString(t)},jsts.geom.MultiPolygon.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e)},jsts.geom.MultiPolygon.prototype.CLASS_NAME="jsts.geom.MultiPolygon"}(),function(){var t=javascript.util.ArrayList,e=function(){};e.prototype.inputGeom=null,e.prototype.factory=null,e.prototype.pruneEmptyGeometry=!0,e.prototype.preserveGeometryCollectionType=!0,e.prototype.preserveCollections=!1,e.prototype.reserveType=!1,e.prototype.getInputGeometry=function(){return this.inputGeom},e.prototype.transform=function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof jsts.geom.Point)return this.transformPoint(t,null);if(t instanceof jsts.geom.MultiPoint)return this.transformMultiPoint(t,null);if(t instanceof jsts.geom.LinearRing)return this.transformLinearRing(t,null);if(t instanceof jsts.geom.LineString)return this.transformLineString(t,null);if(t instanceof jsts.geom.MultiLineString)return this.transformMultiLineString(t,null);if(t instanceof jsts.geom.Polygon)return this.transformPolygon(t,null);if(t instanceof jsts.geom.MultiPolygon)return this.transformMultiPolygon(t,null);if(t instanceof jsts.geom.GeometryCollection)return this.transformGeometryCollection(t,null);throw new jsts.error.IllegalArgumentException("Unknown Geometry subtype: "+t.getClass().getName())},e.prototype.createCoordinateSequence=function(t){return this.factory.getCoordinateSequenceFactory().create(t)},e.prototype.copy=function(t){return t.clone()},e.prototype.transformCoordinates=function(t,e){return this.copy(t)},e.prototype.transformPoint=function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},e.prototype.transformMultiPoint=function(e,o){for(var n=new t,r=0;r<e.getNumGeometries();r++){var i=this.transformPoint(e.getGeometryN(r),e);null!=i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},e.prototype.transformLinearRing=function(t,e){var o=this.transformCoordinates(t.getCoordinateSequence(),t),n=o.length;return n>0&&n<4&&!this.preserveType?this.factory.createLineString(o):this.factory.createLinearRing(o)},e.prototype.transformLineString=function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},e.prototype.transformMultiLineString=function(e,o){for(var n=new t,r=0;r<e.getNumGeometries();r++){var i=this.transformLineString(e.getGeometryN(r),e);null!=i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},e.prototype.transformPolygon=function(e,o){var n=!0,r=this.transformLinearRing(e.getExteriorRing(),e);null!=r&&r instanceof jsts.geom.LinearRing&&!r.isEmpty()||(n=!1);for(var i=new t,s=0;s<e.getNumInteriorRing();s++){var a=this.transformLinearRing(e.getInteriorRingN(s),e);null==a||a.isEmpty()||(a instanceof jsts.geom.LinearRing||(n=!1),i.add(a))}if(n)return this.factory.createPolygon(r,i.toArray());var l=new t;return null!=r&&l.add(r),l.addAll(i),this.factory.buildGeometry(l)},e.prototype.transformMultiPolygon=function(e,o){for(var n=new t,r=0;r<e.getNumGeometries();r++){var i=this.transformPolygon(e.getGeometryN(r),e);null!=i&&(i.isEmpty()||n.add(i))}return this.factory.buildGeometry(n)},e.prototype.transformGeometryCollection=function(e,o){for(var n=new t,r=0;r<e.getNumGeometries();r++){var i=this.transform(e.getGeometryN(r));null!=i&&(this.pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(n)):this.factory.buildGeometry(n)},jsts.geom.util.GeometryTransformer=e}(),function(){var t=jsts.operation.overlay.snap.LineStringSnapper,e=jsts.geom.PrecisionModel,o=javascript.util.TreeSet,n=function(t,e,o){this.snapTolerance=t,this.snapPts=e,this.isSelfSnap=o||!1};n.prototype=new jsts.geom.util.GeometryTransformer,n.prototype.snapTolerance=null,n.prototype.snapPts=null,n.prototype.isSelfSnap=!1,n.prototype.transformCoordinates=function(t,e){var o=t;return this.snapLine(o,this.snapPts)},n.prototype.snapLine=function(e,o){var n=new t(e,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(o)};var r=function(t){this.srcGeom=t};r.SNAP_PRECISION_FACTOR=1e-9,r.computeOverlaySnapTolerance=function(t){if(2===arguments.length)return r.computeOverlaySnapTolerance2.apply(this,arguments);var o=this.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()==e.FIXED){var i=1/n.getScale()*2/1.415;i>o&&(o=i)}return o},r.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*r.SNAP_PRECISION_FACTOR},r.computeOverlaySnapTolerance2=function(t,e){return Math.min(this.computeOverlaySnapTolerance(t),this.computeOverlaySnapTolerance(e))},r.snap=function(t,e,o){var n=[],i=new r(t);n[0]=i.snapTo(e,o);var s=new r(e);return n[1]=s.snapTo(n[0],o),n},r.snapToSelf=function(t,e,o){return new r(t).snapToSelf(e,o)},r.prototype.srcGeom=null,r.prototype.snapTo=function(t,e){var o=this.extractTargetCoordinates(t);return new n(e,o).transform(this.srcGeom)},r.prototype.snapToSelf=function(t,e){var o=this.extractTargetCoordinates(srcGeom),r=new n(t,o,!0),i=r.transform(srcGeom),s=i;return e&&s instanceof Polygonal&&(s=i.buffer(0)),s},r.prototype.extractTargetCoordinates=function(t){for(var e=new o,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray()},r.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},r.prototype.computeMinimumSegmentLength=function(t){for(var e=Number.MAX_VALUE,o=0;o<t.length-1;o++){var n=t[o].distance(t[o+1]);n<e&&(e=n)}return e},jsts.operation.overlay.snap.GeometrySnapper=r}(),function(){var t=jsts.operation.overlay.OverlayOp,e=jsts.operation.overlay.snap.GeometrySnapper,o=function(t,e){this.geom=[],this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()};o.overlayOp=function(t,e,n){return new o(t,e).getResultGeometry(n)},o.intersection=function(e,o){return this.overlayOp(e,o,t.INTERSECTION)},o.union=function(e,o){return this.overlayOp(e,o,t.UNION)},o.difference=function(e,o){return overlayOp(e,o,t.DIFFERENCE)},o.symDifference=function(e,o){return overlayOp(e,o,t.SYMDIFFERENCE)},o.prototype.geom=null,o.prototype.snapTolerance=null,o.prototype.computeSnapTolerance=function(){this.snapTolerance=e.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},o.prototype.getResultGeometry=function(e){var o=this.snap(this.geom),n=t.overlayOp(o[0],o[1],e);return this.prepareResult(n)},o.prototype.selfSnap=function(t){return new e(t).snapTo(t,this.snapTolerance)},o.prototype.snap=function(t){var o=t;return e.snap(o[0],o[1],this.snapTolerance)},o.prototype.prepareResult=function(t){return t},o.prototype.cbr=null,o.prototype.removeCommonBits=function(t){this.cbr=new jsts.precision.CommonBitsRemover,this.cbr.add(this.geom[0]),this.cbr.add(this.geom[1]);var e=[];return e[0]=cbr.removeCommonBits(this.geom[0].clone()),e[1]=cbr.removeCommonBits(this.geom[1].clone()),e},jsts.operation.overlay.snap.SnapOverlayOp=o}(),jsts.noding.snapround.HotPixel=function(t,e,o){this.corner=[],this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=o,1!==this.scaleFactor&&(this.pt=new jsts.geom.Coordinate(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new jsts.geom.Coordinate,this.p1Scaled=new jsts.geom.Coordinate),this.initCorners(this.pt)},jsts.noding.snapround.HotPixel.prototype.li=null,jsts.noding.snapround.HotPixel.prototype.pt=null,jsts.noding.snapround.HotPixel.prototype.originalPt=null,jsts.noding.snapround.HotPixel.prototype.ptScaled=null,jsts.noding.snapround.HotPixel.prototype.p0Scaled=null,jsts.noding.snapround.HotPixel.prototype.p1Scaled=null,jsts.noding.snapround.HotPixel.prototype.scaleFactor=void 0,jsts.noding.snapround.HotPixel.prototype.minx=void 0,jsts.noding.snapround.HotPixel.prototype.maxx=void 0,jsts.noding.snapround.HotPixel.prototype.miny=void 0,jsts.noding.snapround.HotPixel.prototype.maxy=void 0,jsts.noding.snapround.HotPixel.prototype.corner=null,jsts.noding.snapround.HotPixel.prototype.safeEnv=null,jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt},jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=.75,jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(null===this.safeEnv){var t=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},jsts.noding.snapround.HotPixel.prototype.initCorners=function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy),this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy),this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny),this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny)},jsts.noding.snapround.HotPixel.prototype.scale=function(t){return Math.round(t*this.scaleFactor)},jsts.noding.snapround.HotPixel.prototype.intersects=function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},jsts.noding.snapround.HotPixel.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(t,e){var o=Math.min(t.x,e.x),n=Math.max(t.x,e.x),r=Math.min(t.y,e.y),i=Math.max(t.y,e.y),s=this.maxx<o||this.minx>n||this.maxy<r||this.miny>i;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return jsts.util.Assert.isTrue(!(s&&a),"Found bad envelope test"),a},jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(t,e){var o=!1,n=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(o=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!o||!n)||(!!t.equals(this.pt)||!!e.equals(this.pt))))))},jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(t,e){var o=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(o,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},jsts.operation.buffer.BufferInputLineSimplifier=function(t){this.inputLine=t},jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(t,e){return new jsts.operation.buffer.BufferInputLineSimplifier(t).simplify(e)},jsts.operation.buffer.BufferInputLineSimplifier.INIT=0,jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1,jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1,jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null,jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE,jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE),this.isDeleted=[],this.isDeleted.length=this.inputLine.length;var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),o=this.findNextNonDeletedIndex(e),n=!1;o<this.inputLine.length;){var r=!1;this.isDeletable(t,e,o,this.distanceTol)&&(this.isDeleted[e]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE,r=!0,n=!0),t=r?o:e,e=this.findNextNonDeletedIndex(t),o=this.findNextNonDeletedIndex(e)}return n},jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE;)e++;return e},jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){for(var t=[],e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE&&t.push(this.inputLine[e]);return t},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(t,e,o,n){var r=this.inputLine[t],i=this.inputLine[e],s=this.inputLine[o];return!!this.isConcave(r,i,s)&&(!!this.isShallow(r,i,s,n)&&this.isShallowSampled(r,i,t,o,n))},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(t,e,o,n){return jsts.algorithm.CGAlgorithms.computeOrientation(t,e,o)===this.angleOrientation&&jsts.algorithm.CGAlgorithms.distancePointLine(e,t,o)<n},jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10,jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(t,e,o,n,r){var i=parseInt((n-o)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);i<=0&&(i=1);for(var s=o;s<n;s+=i)if(!this.isShallow(t,e,this.inputLine[s],r))return!1;return!0},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(t,e,o,n){return jsts.algorithm.CGAlgorithms.distancePointLine(e,t,o)<n},jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(t,e,o){return jsts.algorithm.CGAlgorithms.computeOrientation(t,e,o)===this.angleOrientation},jsts.geom.CoordinateList=function(t,e){javascript.util.ArrayList.apply(this,arguments),e=void 0===e||e,void 0!==t&&this.add(t,e)},jsts.geom.CoordinateList.prototype=new javascript.util.ArrayList,jsts.geom.CoordinateList.prototype.add=function(){return arguments.length>1?this.addCoordinates.apply(this,arguments):javascript.util.ArrayList.prototype.add.apply(this,arguments)},jsts.geom.CoordinateList.prototype.addCoordinates=function(t,e,o){if(t instanceof jsts.geom.Coordinate)return this.addCoordinate.apply(this,arguments);if("number"==typeof t)return this.insertCoordinate.apply(this,arguments);if(o=o||!0)for(var n=0;n<t.length;n++)this.addCoordinate(t[n],e);else for(var n=t.length-1;n>=0;n--)this.addCoordinate(t[n],e);return!0},jsts.geom.CoordinateList.prototype.addCoordinate=function(t,e){if(!e&&this.size()>=1){if(this.get(this.size()-1).equals2D(t))return}this.add(t)},jsts.geom.CoordinateList.prototype.insertCoordinate=function(t,e,o){if(!o){var n=t>0?t-1:-1;if(-1!==n&&this.get(n).equals2D(e))return;var r=t<this.size()-1?t+1:-1;if(-1!==r&&this.get(r).equals2D(e))return}this.array.splice(t,0,e)},jsts.geom.CoordinateList.prototype.closeRing=function(){this.size()>0&&this.addCoordinate(new jsts.geom.Coordinate(this.get(0)),!1)},jsts.geom.CoordinateList.prototype.toArray=function(){var t,e,o;for(t=0,e=this.size(),o=[],t;t<e;t++)o[t]=this.get(t);return o},jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.toArray()},jsts.operation.buffer.OffsetSegmentGenerator=function(t,e,o){this.seg0=new jsts.geom.LineSegment,this.seg1=new jsts.geom.LineSegment,this.offset0=new jsts.geom.LineSegment,this.offset1=new jsts.geom.LineSegment,this.precisionModel=t,this.bufParams=e,this.li=new jsts.algorithm.RobustLineIntersector,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR),this.init(o)},jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80,jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null,jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=!1,jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle},jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(t){this.distance=t,this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new jsts.operation.buffer.OffsetSegmentString,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(t,e,o){this.s1=t,this.s2=e,this.side=o,this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(t,e){this.segList.addPts(t,e)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),!this.s1.equals(this.s2)){var o=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2),n=o===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT||o===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT;0==o?this.addCollinear(e):n?this.addOutsideTurn(o,e):this.addInsideTurn(o,e)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),this.li.getIntersectionNum()>=2&&(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(t,e){if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR)return void this.segList.addPt(this.offset0.p1);this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this.hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var o=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(o);var n=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(t,e,o,n){var r=e===jsts.geomgraph.Position.LEFT?1:-1,i=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(i*i+s*s),l=r*o*i/a,c=r*o*s/a;n.p0.x=t.p0.x-c,n.p0.y=t.p0.y+l,n.p1.x=t.p1.x-c,n.p1.y=t.p1.y+l},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(t,e){var o=new jsts.geom.LineSegment(t,e),n=new jsts.geom.LineSegment;this.computeOffsetSegment(o,jsts.geomgraph.Position.LEFT,this.distance,n);var r=new jsts.geom.LineSegment;this.computeOffsetSegment(o,jsts.geomgraph.Position.RIGHT,this.distance,r);var i=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,i);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(n.p1),this.addFillet(e,a+Math.PI/2,a-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(n.p1),this.segList.addPt(r.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var l=new jsts.geom.Coordinate;l.x=Math.abs(this.distance)*Math.cos(a),l.y=Math.abs(this.distance)*Math.sin(a);var c=new jsts.geom.Coordinate(n.p1.x+l.x,n.p1.y+l.y),u=new jsts.geom.Coordinate(r.p1.x+l.x,r.p1.y+l.y);this.segList.addPt(c),this.segList.addPt(u)}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(t,e,o,n){var r=null;try{r=jsts.algorithm.HCoordinate.intersection(e.p0,e.p1,o.p0,o.p1);(n<=0?1:r.distance(t)/Math.abs(n))>this.bufParams.getMitreLimit()&&(this.isMitreWithinLimit=!1)}catch(t){t instanceof jsts.error.NotRepresentableError&&(r=new jsts.geom.Coordinate(0,0),this.isMitreWithinLimit=!1)}this.segList.addPt(r)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(t,e,o,n){var r=this.seg0.p1,i=jsts.algorithm.Angle.angle(r,this.seg0.p0),s=(jsts.algorithm.Angle.angle(r,this.seg1.p1),jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1)),a=s/2,l=jsts.algorithm.Angle.normalize(i+a),c=jsts.algorithm.Angle.normalize(l+Math.PI),u=n*o,g=u*Math.abs(Math.sin(a)),h=o-g,p=r.x+u*Math.cos(c),d=r.y+u*Math.sin(c),f=new jsts.geom.Coordinate(p,d),m=new jsts.geom.LineSegment(r,f),y=m.pointAlongOffset(1,h),v=m.pointAlongOffset(1,-h);this.side==jsts.geomgraph.Position.LEFT?(this.segList.addPt(y),this.segList.addPt(v)):(this.segList.addPt(v),this.segList.addPt(y))},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(t,e,o,n,r){if(!(o instanceof jsts.geom.Coordinate))return void this.addFillet2.apply(this,arguments);var i=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,i),l=o.x-t.x,c=o.y-t.y,u=Math.atan2(c,l);n===jsts.algorithm.CGAlgorithms.CLOCKWISE?a<=u&&(a+=2*Math.PI):a>=u&&(a-=2*Math.PI),this.segList.addPt(e),this.addFillet(t,a,u,n,r),this.segList.addPt(o)},jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(t,e,o,n,r){var i=n===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1,s=Math.abs(e-o),a=parseInt(s/this.filletAngleQuantum+.5);if(!(a<1)){var l,c;l=0,c=s/a;for(var u=l,g=new jsts.geom.Coordinate;u<s;){var h=e+i*u;g.x=t.x+r*Math.cos(h),g.y=t.y+r*Math.sin(h),this.segList.addPt(g),u+=c}}},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(t){var e=new jsts.geom.Coordinate(t.x+this.distance,t.y);this.segList.addPt(e),this.addFillet(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(t){this.segList.addPt(new jsts.geom.Coordinate(t.x+distance,t.y+distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x+distance,t.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x-distance,t.y-distance)),this.segList.addPt(new jsts.geom.Coordinate(t.x-distance,t.y+distance)),this.segList.closeRing()},jsts.operation.overlay.MaximalEdgeRing=function(t,e){jsts.geomgraph.EdgeRing.call(this,t,e)},jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing,jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(t){return t.getNext()},jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this.startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!=this.startDe)},jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function(){var t=[],e=this.startDe;do{if(null===e.getMinEdgeRing()){var o=new jsts.operation.overlay.MinimalEdgeRing(e,this.geometryFactory);t.push(o)}e=e.getNext()}while(e!=this.startDe);return t},jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate},jsts.algorithm.CentroidPoint.prototype.ptCount=0,jsts.algorithm.CentroidPoint.prototype.centSum=null,jsts.algorithm.CentroidPoint.prototype.add=function(t){if(t instanceof jsts.geom.Point)this.add2(t.getCoordinate());else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)for(var e=t,o=0;o<e.getNumGeometries();o++)this.add(e.getGeometryN(o))},jsts.algorithm.CentroidPoint.prototype.add2=function(t){this.ptCount+=1,this.centSum.x+=t.x,this.centSum.y+=t.y},jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return t.x=this.centSum.x/this.ptCount,t.y=this.centSum.y/this.ptCount,t},jsts.operation.distance.ConnectedElementLocationFilter=function(t){this.locations=t},jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter,jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null,jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(t){var e=[];return t.apply(new jsts.operation.distance.ConnectedElementLocationFilter(e)),e},jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(t){(t instanceof jsts.geom.Point||t instanceof jsts.geom.LineString||t instanceof jsts.geom.Polygon)&&this.locations.push(new jsts.operation.distance.GeometryLocation(t,0,t.getCoordinate()))},function(){var t=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(e){if(2==arguments.length)return void this.computeEdgeEnds2.apply(this,arguments);for(var o=new t,n=e;n.hasNext();){var r=n.next();this.computeEdgeEnds2(r,o)}return o},jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(t,e){var o=t.getEdgeIntersectionList();o.addEndpoints();var n=o.iterator(),r=null,i=null;if(n.hasNext()){var s=n.next();do{r=i,i=s,s=null,n.hasNext()&&(s=n.next()),null!==i&&(this.createEdgeEndForPrev(t,e,i,r),this.createEdgeEndForNext(t,e,i,s))}while(null!==i)}},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(t,e,o,n){var r=o.segmentIndex;if(0===o.dist){if(0===r)return;r--}var i=t.getCoordinate(r);null!==n&&n.segmentIndex>=r&&(i=n.coord);var s=new jsts.geomgraph.Label(t.getLabel());s.flip();var a=new jsts.geomgraph.EdgeEnd(t,o.coord,i,s);e.add(a)},jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(t,e,o,n){var r=o.segmentIndex+1;if(!(r>=t.getNumPoints()&&null===n)){var i=t.getCoordinate(r);null!==n&&n.segmentIndex===o.segmentIndex&&(i=n.coord);var s=new jsts.geomgraph.EdgeEnd(t,o.coord,i,new jsts.geomgraph.Label(t.getLabel()));e.add(s)}}}(),jsts.geomgraph.Edge=function(t,e){this.pts=t,this.label=e,this.eiList=new jsts.geomgraph.EdgeIntersectionList(this),this.depth=new jsts.geomgraph.Depth},jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent,jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge,jsts.geomgraph.Edge.updateIM=function(t,e){e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.ON),t.getLocation(1,jsts.geomgraph.Position.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.LEFT),t.getLocation(1,jsts.geomgraph.Position.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,jsts.geomgraph.Position.RIGHT),t.getLocation(1,jsts.geomgraph.Position.RIGHT),2))},jsts.geomgraph.Edge.prototype.pts=null,jsts.geomgraph.Edge.prototype.env=null,jsts.geomgraph.Edge.prototype.name=null,jsts.geomgraph.Edge.prototype.mce=null,jsts.geomgraph.Edge.prototype._isIsolated=!0,jsts.geomgraph.Edge.prototype.depth=null,jsts.geomgraph.Edge.prototype.depthDelta=0,jsts.geomgraph.Edge.prototype.eiList=null,jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length},jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(null===this.env){this.env=new jsts.geom.Envelope;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(pts[t])}return env};jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth},jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta},jsts.geomgraph.Edge.prototype.setDepthDelta=function(t){this.depthDelta=t},jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts},jsts.geomgraph.Edge.prototype.getCoordinate=function(t){return void 0===t?this.pts.length>0?this.pts[0]:null:this.pts[t]},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.setIsolated=function(t){this._isIsolated=t},jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated},jsts.geomgraph.Edge.prototype.addIntersections=function(t,e,o){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,o,n)},jsts.geomgraph.Edge.prototype.addIntersection=function(t,e,o,n){var r=new jsts.geom.Coordinate(t.getIntersection(n)),i=e,s=t.getEdgeDistance(o,n),a=i+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(i=a,s=0)}this.eiList.add(r,i,s)},jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList},jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},jsts.geomgraph.Edge.prototype.isCollapsed=function(){return!!this.label.isArea()&&(3==this.pts.length&&!!this.pts[0].equals(this.pts[2]))},jsts.geomgraph.Edge.prototype.getCollapsedEdge=function(){var t=[];return t[0]=this.pts[0],t[1]=this.pts[1],new jsts.geomgraph.Edge(t,jsts.geomgraph.Label.toLineLabel(this.label))},jsts.geomgraph.Edge.prototype.computeIM=function(t){jsts.geomgraph.Edge.updateIM(this.label,t)},jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(t){if(this.pts.length!=t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},jsts.operation.valid.IsValidOp=function(t){this.parentGeometry=t,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null},jsts.operation.valid.IsValidOp.isValid=function(t){return arguments[0]instanceof jsts.geom.Coordinate?!isNaN(t.x)&&(!(!isFinite(t.x)&&!isNaN(t.x))&&(!isNaN(t.y)&&!(!isFinite(t.y)&&!isNaN(t.y)))):new jsts.operation.valid.IsValidOp(t).isValid()},jsts.operation.valid.IsValidOp.findPtNotNode=function(t,e,o){for(var n=o.findEdge(e),r=n.getEdgeIntersectionList(),i=0;i<t.length;i++){var s=t[i];if(!r.isIntersection(s))return s}return null},jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(t){this.isSelfTouchingRingFormingHoleValid=t},jsts.operation.valid.IsValidOp.prototype.isValid=function(){return this.checkValid(this.parentGeometry),null==this.validErr},jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){return this.checkValid(this.parentGeometry),this.validErr},jsts.operation.valid.IsValidOp.prototype.checkValid=function(t){if(this.validErr=null,!t.isEmpty())if(t instanceof jsts.geom.Point)this.checkValidPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.checkValidMultiPoint(t);else if(t instanceof jsts.geom.LinearRing)this.checkValidLinearRing(t);else if(t instanceof jsts.geom.LineString)this.checkValidLineString(t);else if(t instanceof jsts.geom.Polygon)this.checkValidPolygon(t);else if(t instanceof jsts.geom.MultiPolygon)this.checkValidMultiPolygon(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw t.constructor;this.checkValidGeometryCollection(t)}},jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(t){this.checkInvalidCoordinates(t.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(t){this.checkInvalidCoordinates(t.getCoordinates())},jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(t){if(this.checkInvalidCoordinates(t.getCoordinates()),null==this.validErr){var e=new jsts.geomgraph.GeometryGraph(0,t);this.checkTooFewPoints(e)}},jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(t){if(this.checkInvalidCoordinates(t.getCoordinates()),null==this.validErr&&(this.checkClosedRing(t),null==this.validErr)){var e=new jsts.geomgraph.GeometryGraph(0,t);if(this.checkTooFewPoints(e),null==this.validErr){var o=new jsts.algorithm.RobustLineIntersector;e.computeSelfNodes(o,!0),this.checkNoSelfIntersectingRings(e)}}},jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(t){if(this.checkInvalidCoordinates(t),null==this.validErr&&(this.checkClosedRings(t),null==this.validErr)){var e=new jsts.geomgraph.GeometryGraph(0,t);this.checkTooFewPoints(e),null==this.validErr&&(this.checkConsistentArea(e),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(e),null==this.validErr))&&(this.checkHolesInShell(t,e),null==this.validErr&&(this.checkHolesNotNested(t,e),null==this.validErr&&this.checkConnectedInteriors(e))))}},jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(t){for(var e=t.getNumGeometries(),o=0;o<e;o++){var n=t.getGeometryN(o);if(this.checkInvalidCoordinates(n),null!=this.validErr)return;if(this.checkClosedRings(n),null!=this.validErr)return}var r=new jsts.geomgraph.GeometryGraph(0,t);if(this.checkTooFewPoints(r),null==this.validErr&&(this.checkConsistentArea(r),null==this.validErr&&(this.isSelfTouchingRingFormingHoleValid||(this.checkNoSelfIntersectingRings(r),null==this.validErr)))){for(var o=0;o<t.getNumGeometries();o++){var n=t.getGeometryN(o);if(this.checkHolesInShell(n,r),null!=this.validErr)return}for(var o=0;o<t.getNumGeometries();o++){var n=t.getGeometryN(o);if(this.checkHolesNotNested(n,r),null!=this.validErr)return}this.checkShellsNotNested(t,r),null==this.validErr&&this.checkConnectedInteriors(r)}},jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var o=t.getGeometryN(e);if(this.checkValid(o),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(t){if(t instanceof jsts.geom.Polygon){var e=t;if(this.checkInvalidCoordinates(e.getExteriorRing().getCoordinates()),null!=this.validErr)return;for(var o=0;o<e.getNumInteriorRing();o++)if(this.checkInvalidCoordinates(e.getInteriorRingN(o).getCoordinates()),null!=this.validErr)return}else for(var n=t,o=0;o<n.length;o++)if(!jsts.operation.valid.IsValidOp.isValid(n[o]))return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,n[o]))},jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(t){if(this.checkClosedRing(t.getExteriorRing()),null==this.validErr)for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!=this.validErr)return},jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,e)}},jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(t){if(t.hasTooFewPoints)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,t.getInvalidPoint()))},jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(t){var e=new jsts.operation.valid.ConsistentAreaTester(t);if(!e.isNodeConsistentArea())return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,e.getInvalidPoint()));e.hasDuplicateRings()&&(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,e.getInvalidPoint()))},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(t){for(var e=t.getEdgeIterator();e.hasNext();){var o=e.next();if(this.checkNoSelfIntersectingRing(o.getEdgeIntersectionList()),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(t){for(var e=[],o=!0,n=t.iterator();n.hasNext();){var r=n.next();if(o)o=!1;else{if(e.indexOf(r.coord)>=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,r.coord));e.push(r.coord)}}},jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(t,e){for(var o=t.getExteriorRing(),n=new jsts.algorithm.MCPointInRing(o),r=0;r<t.getNumInteriorRing();r++){var i=t.getInteriorRingN(r),s=jsts.operation.valid.IsValidOp.findPtNotNode(i.getCoordinates(),o,e);if(null==s)return;if(!n.isInside(s))return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,s))}},jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(t,e){for(var o=new jsts.operation.valid.IndexedNestedRingTester(e),n=0;n<t.getNumInteriorRing();n++){var r=t.getInteriorRingN(n);o.add(r)}o.isNonNested()||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,o.getNestedPoint()))},jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(t,e){for(var o=0;o<t.getNumGeometries();o++)for(var n=t.getGeometryN(o),r=n.getExteriorRing(),i=0;i<t.getNumGeometries();i++)if(o!=i){var s=t.getGeometryN(i);if(this.checkShellNotNested(r,s,e),null!=this.validErr)return}},jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(t,e,o){var n=t.getCoordinates(),r=e.getExteriorRing(),i=r.getCoordinates(),s=jsts.operation.valid.IsValidOp.findPtNotNode(n,r,o);if(null!=s){if(jsts.algorithm.CGAlgorithms.isPointInRing(s,i)){if(e.getNumInteriorRing()<=0)return void(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,s));for(var a=null,l=0;l<e.getNumInteriorRing();l++){var c=e.getInteriorRingN(l);if(null==(a=this.checkShellInsideHole(t,c,o)))return}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,a)}}},jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(t,e,o){var n=t.getCoordinates(),r=e.getCoordinates(),i=jsts.operation.valid.IsValidOp.findPtNotNode(n,e,o);if(null!=i){if(!jsts.algorithm.CGAlgorithms.isPointInRing(i,r))return i}var s=jsts.operation.valid.IsValidOp.findPtNotNode(r,t,o);if(null!=s){return jsts.algorithm.CGAlgorithms.isPointInRing(s,n)?s:null}return jsts.util.Assert.shouldNeverReachHere("points in shell and hole appear to be equal"),null},jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(t){var e=new jsts.operation.valid.ConnectedInteriorTester(t);e.isInteriorsConnected()||(this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,e.getCoordinate()))},jsts.algorithm.RobustDeterminant=function(){},jsts.algorithm.RobustDeterminant.signOfDet2x2=function(t,e,o,n){var r,i,s,a;if(a=0,r=1,0===t||0===n)return 0===e||0===o?0:e>0?o>0?-r:r:o>0?r:-r;if(0===e||0===o)return n>0?t>0?r:-r:t>0?-r:r;if(0<e?0<n?e>n&&(r=-r,i=t,t=o,o=i,i=e,e=n,n=i):e<=-n?(r=-r,o=-o,n=-n):(i=t,t=-o,o=i,i=e,e=-n,n=i):0<n?-e<=n?(r=-r,t=-t,e=-e):(i=-t,t=o,o=i,i=-e,e=n,n=i):e>=n?(t=-t,e=-e,o=-o,n=-n):(r=-r,i=-t,t=-o,o=i,i=-e,e=-n,n=i),0<t){if(!(0<o))return r;if(t>o)return r}else{if(0<o)return-r;if(!(t>=o))return-r;r=-r,t=-t,o=-o}for(;;){if(a+=1,s=Math.floor(o/t),o-=s*t,(n-=s*e)<0)return-r;if(n>e)return r;if(t>o+o){if(e<n+n)return r}else{if(e>n+n)return-r;o=t-o,n=e-n,r=-r}if(0===n)return 0===o?0:-r;if(0===o)return r;if(s=Math.floor(t/o),t-=s*o,(e-=s*n)<0)return r;if(e>n)return-r;if(o>t+t){if(n<e+e)return-r}else{if(n>e+e)return r;t=o-t,e=n-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},jsts.algorithm.RobustDeterminant.orientationIndex=function(t,e,o){var n=e.x-t.x,r=e.y-t.y,i=o.x-e.x,s=o.y-e.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(n,r,i,s)},jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4),this.subnode[0]=null,this.subnode[1]=null,this.subnode[2]=null,this.subnode[3]=null,this.items=[]},jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(t,e){var o=-1;return t.getMinX()>=e.x&&(t.getMinY()>=e.y&&(o=3),t.getMaxY()<=e.y&&(o=1)),t.getMaxX()<=e.x&&(t.getMinY()>=e.y&&(o=2),t.getMaxY()<=e.y&&(o=0)),o},jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items},jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return this.items.length>0},jsts.index.quadtree.NodeBase.prototype.add=function(t){this.items.push(t)},jsts.index.quadtree.NodeBase.prototype.remove=function(t,e){if(!this.isSearchMatch(t))return!1;var o=!1,n=0;for(n;n<4;n++)if(null!==this.subnode[n]&&(o=this.subnode[n].remove(t,e))){this.subnode[n].isPrunable()&&(this.subnode[n]=null);break}if(o)return o;if(-1!==this.items.indexOf(e)){for(var n=this.items.length-1;n>=0;n--)this.items[n]===e&&this.items.splice(n,1);o=!0}return o},jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return!(this.hasChildren()||this.hasItems())},jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var t=0;for(t;t<4;t++)if(null!==this.subnode[t])return!0;return!1},jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var t=!0;this.items.length>0&&(t=!1);var e=0;for(e;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},jsts.index.quadtree.NodeBase.prototype.addAllItems=function(t){t=t.concat(this.items);var e=0;for(e;e<4;e++)null!==this.subnode[e]&&(t=this.subnode[e].addAllItems(t));return t},jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=function(t,e){if(this.isSearchMatch(t)){e=e.concat(this.items);var o=0;for(o;o<4;o++)null!==this.subnode[o]&&(e=this.subnode[o].addAllItemsFromOverlapping(t,e))}},jsts.index.quadtree.NodeBase.prototype.visit=function(t,e){if(this.isSearchMatch(t)){this.visitItems(t,e);var o=0;for(o;o<4;o++)null!==this.subnode[o]&&this.subnode[o].visit(t,e)}},jsts.index.quadtree.NodeBase.prototype.visitItems=function(t,e){var o=0,n=this.items.length;for(o;o<n;o++)e.visitItem(this.items[o])},jsts.index.quadtree.NodeBase.prototype.depth=function(){var t,e=0,o=0;for(o;o<4;o++)null!==this.subnode[o]&&(t=this.subnode[o].depth())>e&&(e=t);return e+1},jsts.index.quadtree.NodeBase.prototype.size=function(){var t=0,e=0;for(e;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.length},jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var t=0,e=0;for(e;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},jsts.index.quadtree.Node=function(t,e){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.env=t,this.level=e,this.centre=new jsts.geom.Coordinate,this.centre.x=(t.getMinX()+t.getMaxX())/2,this.centre.y=(t.getMinY()+t.getMaxY())/2},jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Node.createNode=function(t){var e;return e=new jsts.index.quadtree.Key(t),new jsts.index.quadtree.Node(e.getEnvelope(),e.getLevel())},jsts.index.quadtree.Node.createExpanded=function(t,e){var o,n=new jsts.geom.Envelope(e);return null!==t&&n.expandToInclude(t.env),o=jsts.index.quadtree.Node.createNode(n),null!==t&&o.insertNode(t),o},jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Node.prototype.isSearchMatch=function(t){return this.env.intersects(t)},jsts.index.quadtree.Node.prototype.getNode=function(t){var e,o=this.getSubnodeIndex(t,this.centre);return-1!==o?(e=this.getSubnode(o),e.getNode(t)):this},jsts.index.quadtree.Node.prototype.find=function(t){var e,o=this.getSubnodeIndex(t,this.centre);return-1===o?this:null!==this.subnode[o]?(e=this.subnode[o],e.find(t)):this},jsts.index.quadtree.Node.prototype.insertNode=function(t){var e,o=this.getSubnodeIndex(t.env,this.centre);t.level===this.level-1?this.subnode[o]=t:(e=this.createSubnode(o),e.insertNode(t),this.subnode[o]=e)},jsts.index.quadtree.Node.prototype.getSubnode=function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},jsts.index.quadtree.Node.prototype.createSubnode=function(t){var e,o=0,n=0,r=0,i=0;switch(t){case 0:o=this.env.getMinX(),n=this.centre.x,r=this.env.getMinY(),i=this.centre.y;break;case 1:o=this.centre.x,n=this.env.getMaxX(),r=this.env.getMinY(),i=this.centre.y;break;case 2:o=this.env.getMinX(),n=this.centre.x,r=this.centre.y,i=this.env.getMaxY();break;case 3:o=this.centre.x,n=this.env.getMaxX(),r=this.centre.y,i=this.env.getMaxY()}return e=new jsts.geom.Envelope(o,n,r,i),new jsts.index.quadtree.Node(e,this.level-1)},function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null,this.vertex=null,this.next=null,this.data=null};var t=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(e,o){var n,r,i,s,a;return n=new t,r=new t,i=new t,s=new t,n.rot=r,r.rot=i,i.rot=s,s.rot=n,n.setNext(n),r.setNext(s),i.setNext(i),s.setNext(r),a=n,a.setOrig(e),a.setDest(o),a},jsts.triangulate.quadedge.QuadEdge.connect=function(e,o){var n=t.makeEdge(e.dest(),o.orig());return t.splice(n,e.lNext()),t.splice(n.sym(),o),n},jsts.triangulate.quadedge.QuadEdge.splice=function(t,e){var o,n,r,i,s,a;o=t.oNext().rot,n=e.oNext().rot,r=e.oNext(),i=t.oNext(),s=n.oNext(),a=o.oNext(),t.setNext(r),e.setNext(i),o.setNext(s),n.setNext(a)},jsts.triangulate.quadedge.QuadEdge.swap=function(e){var o,n;o=e.oPrev(),n=e.sym().oPrev(),t.splice(e,o),t.splice(e.sym(),n),t.splice(e,o.lNext()),t.splice(e.sym(),n.lNext()),e.setOrig(o.dest()),e.setDest(n.dest())},jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(t){this.data=t},jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data},jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null},jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return null!==this.rot},jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(t){this.next=t},jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot},jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next},jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot},jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym()},jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot},jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym()},jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot()},jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext()},jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(t){this.vertex=t},jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(t){this.sym().setOrig(t)},jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex},jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig()},jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function(){return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate())},jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var t,e;return t=this.vertex.getCoordinate(),e=this.dest().getCoordinate(),jsts.io.WKTWriter.toLineString(t,e)}}(),function(){var t=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(t,e,o,n){this.edge=t,e&&o&&this.init(e,o),n&&(this.label=n||null)},jsts.geomgraph.EdgeEnd.prototype.edge=null,jsts.geomgraph.EdgeEnd.prototype.label=null,jsts.geomgraph.EdgeEnd.prototype.node=null,jsts.geomgraph.EdgeEnd.prototype.p0=null,jsts.geomgraph.EdgeEnd.prototype.p1=null,jsts.geomgraph.EdgeEnd.prototype.dx=null,jsts.geomgraph.EdgeEnd.prototype.dy=null,jsts.geomgraph.EdgeEnd.prototype.quadrant=null,jsts.geomgraph.EdgeEnd.prototype.init=function(e,o){this.p0=e,this.p1=o,this.dx=o.x-e.x,this.dy=o.y-e.y,this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy),t.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge},jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label},jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0},jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1},jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant},jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx},jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy},jsts.geomgraph.EdgeEnd.prototype.setNode=function(t){this.node=t},jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node},jsts.geomgraph.EdgeEnd.prototype.compareTo=function(t){return this.compareDirection(t)},jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:jsts.algorithm.CGAlgorithms.computeOrientation(t.p0,t.p1,this.p1)},jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(t){}}(),jsts.triangulate.quadedge.TrianglePredicate=function(){},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(t,e,o,n){return(t.x*t.x+t.y*t.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,o,n)-(e.x*e.x+e.y*e.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,o,n)+(o.x*o.x+o.y*o.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,e,n)-(n.x*n.x+n.y*n.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(t,e,o)>0},jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(t,e,o,n){var r,i,s,a,l,c,u,g,h,p,d,f;return r=t.x-n.x,i=t.y-n.y,s=e.x-n.x,a=e.y-n.y,l=o.x-n.x,c=o.y-n.y,u=r*a-s*i,g=s*c-l*a,h=l*i-r*c,p=r*r+i*i,d=s*s+a*a,f=l*l+c*c,p*g+d*h+f*u>0},jsts.triangulate.quadedge.TrianglePredicate.triArea=function(t,e,o){return(e.x-t.x)*(o.y-t.y)-(e.y-t.y)*(o.x-t.x)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(t,e,o,n){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(t,e,o,n)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(t,e,o,n){var r,i,s,a,l,c,u,g,h,p,d,f,m;return r=jsts.math.DD.valueOf(n.x),i=jsts.math.DD.valueOf(n.y),s=jsts.math.DD.valueOf(t.x),a=jsts.math.DD.valueOf(t.y),l=jsts.math.DD.valueOf(e.x),c=jsts.math.DD.valueOf(e.y),u=jsts.math.DD.valueOf(o.x),g=jsts.math.DD.valueOf(o.y),h=s.multiply(s).add(a.multiply(a)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(l,c,u,g,r,i)),p=l.multiply(l).add(c.multiply(c)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,u,g,r,i)),d=u.multiply(u).add(g.multiply(g)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,l,c,r,i)),f=r.multiply(r).add(i.multiply(i)).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(s,a,l,c,u,g)),m=h.subtract(p).add(d).subtract(f),m.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(t,e,o,n,r,i){return o.subtract(t).multiply(i.subtract(e)).subtract(n.subtract(e).multiply(r.subtract(t)))},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(t,e,o,n){var r,i,s,a,l;return r=jsts.math.DD.sqr(t.x).selfAdd(jsts.math.DD.sqr(t.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(e,o,n)),i=jsts.math.DD.sqr(e.x).selfAdd(jsts.math.DD.sqr(e.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,o,n)),s=jsts.math.DD.sqr(o.x).selfAdd(jsts.math.DD.sqr(o.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,e,n)),a=jsts.math.DD.sqr(n.x).selfAdd(jsts.math.DD.sqr(n.y)).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(t,e,o)),l=r.selfSubtract(i).selfAdd(s).selfSubtract(a),l.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(t,e,o){var n,r;return n=jsts.math.DD.valueOf(e.x).selfSubtract(t.x).selfMultiply(jsts.math.DD.valueOf(o.y).selfSubtract(t.y)),r=jsts.math.DD.valueOf(e.y).selSubtract(t.y).selfMultiply(jsts.math.DD.valueOf(o.x).selfSubtract(t.x)),n.selfSubtract(r)},jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(t,e,o,n){var r,i,s,a,l,c,u,g,h,p,d,f,m;return r=jsts.math.DD.valueOf(t.x).selfSubtract(n.x),i=jsts.math.DD.valueOf(t.y).selfSubtract(n.y),s=jsts.math.DD.valueOf(e.x).selfSubtract(n.x),s=jsts.math.DD.valueOf(e.y).selfSubtract(n.y),l=jsts.math.DD.valueOf(o.x).selfSubtract(n.x),l=jsts.math.DD.valueOf(o.y).selfSubtract(n.y),u=r.multiply(a).selfSubtract(s.multiply(i)),g=s.multiply(c).selfSubtract(l.multiply(a)),h=l.multiply(i).selfSubtract(r.multiply(c)),p=r.multiply(r).selfAdd(i.multiply(i)),d=s.multiply(s).selfAdd(a.multiply(a)),f=l.multiply(l).selfAdd(c.multiply(c)),m=p.selfMultiply(g).selfAdd(d.selfMultiply(h)).selfAdd(f.selfMultiply(u)),m.doubleValue()>0},jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(t,e,o,n){var r,i;return r=jsts.geom.Triangle.circumcentre(t,e,o),i=t.distance(r),n.distance(r)-i<=0},jsts.operation.buffer.RightmostEdgeFinder=function(){},jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1,jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null,jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe},jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord},jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();o.isForward()&&this.checkForRightmostCoordinate(o)}jsts.util.Assert.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)==jsts.geomgraph.Position.LEFT&&(this.orientedDe=this.minDe.getSym())},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var t=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],o=t[this.minIndex+1],n=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,o,e),r=!1;e.y<this.minCoord.y&&o.y<this.minCoord.y&&n===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&o.y>this.minCoord.y&&n===jsts.algorithm.CGAlgorithms.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),o=0;o<e.length-1;o++)(null===this.minCoord||e[o].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=o,this.minCoord=e[o])},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(t,e){var o=this.getRightmostSideOfSegment(t,e);return o<0&&(o=this.getRightmostSideOfSegment(t,e-1)),o<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),o},jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(t,e){var o=t.getEdge(),n=o.getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y==n[e+1].y)return-1;var r=jsts.geomgraph.Position.LEFT;return n[e].y<n[e+1].y&&(r=jsts.geomgraph.Position.RIGHT),r},function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(t){this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(t){var e,o=0,n=t.length;for(o;o<n;o++)e=t[o],this.insertSite(e)},jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(t){var e,o,n,r;if(e=this.subdiv.locate(t),this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete_jsts(e.oNext())),o=this.subdiv.makeEdge(e.orig(),t),jsts.triangulate.quadedge.QuadEdge.splice(o,e),n=o;do{o=this.subdiv.connect(e,o.sym()),e=o.oPrev()}while(e.lNext()!=n);for(;;)if(r=e.oPrev(),r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))jsts.triangulate.quadedge.QuadEdge.swap(e),e=e.oPrev();else{if(e.oNext()==n)return o;e=e.oNext().lPrev()}}}(),jsts.noding.OrientedCoordinateArray=function(t){this.pts=t,this._orientation=jsts.noding.OrientedCoordinateArray.orientation(t)},jsts.noding.OrientedCoordinateArray.prototype.pts=null,jsts.noding.OrientedCoordinateArray.prototype._orientation=void 0,jsts.noding.OrientedCoordinateArray.orientation=function(t){return 1===jsts.geom.CoordinateArrays.increasingDirection(t)},jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(t){var e=t;return jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,e.pts,e._orientation)},jsts.noding.OrientedCoordinateArray.compareOriented=function(t,e,o,n){for(var r=e?1:-1,i=n?1:-1,s=e?t.length:-1,a=n?o.length:-1,l=e?0:t.length-1,c=n?0:o.length-1;;){var u=t[l].compareTo(o[c]);if(0!==u)return u;l+=r,c+=i;var g=l===s,h=c===a;if(g&&!h)return-1;if(!g&&h)return 1;if(g&&h)return 0}},jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments),this.origin=new jsts.geom.Coordinate(0,0)},jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase,jsts.index.quadtree.Root.prototype.insert=function(t,e){var o=this.getSubnodeIndex(t,this.origin);if(-1===o)return void this.add(e);var n=this.subnode[o];if(null===n||!n.getEnvelope().contains(t)){var r=jsts.index.quadtree.Node.createExpanded(n,t);this.subnode[o]=r}this.insertContained(this.subnode[o],t,e)},jsts.index.quadtree.Root.prototype.insertContained=function(t,e,o){var n,r,i;n=jsts.index.IntervalSize.isZeroWidth(e.getMinX(),e.getMaxX()),r=jsts.index.IntervalSize.isZeroWidth(e.getMinY(),e.getMaxY()),i=n||r?t.find(e):t.getNode(e),i.add(o)},jsts.index.quadtree.Root.prototype.isSearchMatch=function(t){return!0},jsts.triangulate.quadedge.Vertex=function(){1===arguments.length?this.initFromCoordinate(arguments[0]):this.initFromXY(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.LEFT=0,jsts.triangulate.quadedge.Vertex.RIGHT=1,jsts.triangulate.quadedge.Vertex.BEYOND=2,jsts.triangulate.quadedge.Vertex.BEHIND=3,jsts.triangulate.quadedge.Vertex.BETWEEN=4,jsts.triangulate.quadedge.Vertex.ORIGIN=5,jsts.triangulate.quadedge.Vertex.DESTINATION=6,jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(t,e){this.p=new jsts.geom.Coordinate(t,e)},jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(t){this.p=new jsts.geom.Coordinate(t)},jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x},jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y},jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z},jsts.triangulate.quadedge.Vertex.prototype.setZ=function(t){this.p.z=t},jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p},jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return"POINT ("+this.p.x+" "+this.p.y+")"},jsts.triangulate.quadedge.Vertex.prototype.equals=function(){return 1===arguments.length?this.equalsExact(arguments[0]):this.equalsWithTolerance(arguments[0],arguments[1])},jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(t){return this.p.x===t.getX()&&this.p.y===t.getY()},jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(t,e){return this.p.distance(t.getCoordinate())<e},jsts.triangulate.quadedge.Vertex.prototype.classify=function(t,e){var o,n,r,i;return o=this,n=e.sub(t),r=o.sub(t),i=n.crossProduct(r),i>0?jsts.triangulate.quadedge.Vertex.LEFT:i<0?jsts.triangulate.quadedge.Vertex.RIGHT:n.getX()*r.getX()<0||n.getY()*r.getY()<0?jsts.triangulate.quadedge.Vertex.BEHIND:n.magn()<r.magn()?jsts.triangulate.quadedge.Vertex.BEYOND:t.equals(o)?jsts.triangulate.quadedge.Vertex.ORIGIN:e.equals(o)?jsts.triangulate.quadedge.Vertex.DESTINATION:jsts.triangulate.quadedge.Vertex.BETWEEN},jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(t){return this.p.x*t.getY()-this.p.y*t.getX()},jsts.triangulate.quadedge.Vertex.prototype.dot=function(t){return this.p.x*t.getX()+this.p.y*t.getY()},jsts.triangulate.quadedge.Vertex.prototype.times=function(t){return new jsts.triangulate.quadedge.Vertex(t*this.p.x,t*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.sum=function(t){return new jsts.triangulate.quadedge.Vertex(this.p.x+t.getX(),this.p.y+t.getY())},jsts.triangulate.quadedge.Vertex.prototype.sub=function(t){return new jsts.triangulate.quadedge.Vertex(this.p.x-t.getX(),this.p.y-t.getY())},jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,-this.p.x)},jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(t,e,o){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(t.p,e.p,o.p,this.p)},jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(t){return this.isCCW(t.dest(),t.orig())},jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(t){return this.isCCW(t.orig(),t.dest())},jsts.triangulate.quadedge.Vertex.prototype.bisector=function(t,e){var o,n,r,i;return o=e.getX()-t.getX(),n=e.getY()-t.getY(),r=new jsts.algorithm.HCoordinate(t.getX()+o/2,t.getY()+n/2,1),i=new jsts.algorithm.HCoordinate(t.getX()-n+o/2,t.getY()+o+n/2,1),new jsts.algorithm.HCoordinate(r,i)},jsts.triangulate.quadedge.Vertex.prototype.distance=function(t,e){return t.p.distance(e.p)},jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(t,e){var o,n,r,i;return o=this.circleCenter(t,e),n=this.distance(o,t),r=this.distance(this,t),i=this.distance(t,e),i<r&&(r=i),i=this.distance(e,this),i<r&&(r=i),n/r},jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(t){var e,o;return e=(this.p.x+t.getX())/2,o=(this.p.y+t.getY())/2,new jsts.triangulate.quadedge.Vertex(e,o)},jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(t,e){var o,n,r,i,s;o=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY()),n=this.bisector(o,t),r=this.bisector(t,e),i=new jsts.algorithm.HCoordinate(n,r),s=null;try{s=new jsts.triangulate.quadedge.Vertex(i.getX(),i.getY())}catch(t){}return s},jsts.noding.SegmentNodeList=function(t){this.nodeMap=new javascript.util.TreeMap,this.edge=t},jsts.noding.SegmentNodeList.prototype.nodeMap=null,jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator()},jsts.noding.SegmentNodeList.prototype.edge=null,jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge},jsts.noding.SegmentNodeList.prototype.add=function(t,e){var o=new jsts.noding.SegmentNode(this.edge,t,e,this.edge.getSegmentOctant(e)),n=this.nodeMap.get(o);return null!==n?(jsts.util.Assert.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this.nodeMap.put(o,o),o)},jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var t=[];this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=0;e<t.length;e++){var o=t[e];this.add(this.edge.getCoordinate(o),o)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this.edge.size()-2;e++){var o=this.edge.getCoordinate(e),n=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));o.equals2D(n)&&t.push(e+1)}},jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=[null],o=this.iterator(),n=o.next();o.hasNext();){var r=o.next();this.findCollapseIndex(n,r,e)&&t.push(e[0]),n=r}},jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(t,e,o){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(o[0]=t.segmentIndex+1,!0)},jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),o=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(o,n);t.add(r),o=n}},jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(t){var e=edge.getCoordinates(),o=t[0],n=o.getCoordinate(0);if(!n.equals2D(e[0]))throw new Error("bad split edge start point at "+n);var r=t[t.length-1],i=r.getCoordinates(),s=i[i.length-1];if(!s.equals2D(e[e.length-1]))throw new Error("bad split edge end point at "+s)},jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(t,e){var o=e.segmentIndex-t.segmentIndex+2,n=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);r||o--;var i=[],s=0;i[s++]=new jsts.geom.Coordinate(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)i[s++]=this.edge.getCoordinate(a);return r&&(i[s]=e.coord),new jsts.noding.NodedSegmentString(i,this.edge.getData())},jsts.operation.union.CascadedPolygonUnion=function(t){this.inputPolys=t},jsts.operation.union.CascadedPolygonUnion.union=function(t){return new jsts.operation.union.CascadedPolygonUnion(t).union()},jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys,jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null,jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4,jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(0===this.inputPolys.length)return null;this.geomFactory=this.inputPolys[0].getFactory();for(var t=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY),e=0,o=this.inputPolys.length;e<o;e++){var n=this.inputPolys[e];t.insert(n.getEnvelopeInternal(),n)}var r=t.itemsTree();return this.unionTree(r)},jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(t,e,o){if(e=e||0,(o=o||t.length)-e<=1){var n=this.getGeometry(t,e);return this.unionSafe(n,null)}if(o-e==2)return this.unionSafe(this.getGeometry(t,e),this.getGeometry(t,e+1));var r=parseInt((o+e)/2),n=this.binaryUnion(t,e,r),i=this.binaryUnion(t,r,o);return this.unionSafe(n,i)},jsts.operation.union.CascadedPolygonUnion.prototype.getGeometry=function(t,e){return e>=t.length?null:t[e]},jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(t){for(var e=[],o=0,n=t.length;o<n;o++){var r=t[o],i=null;r instanceof Array?i=this.unionTree(r):r instanceof jsts.geom.Geometry&&(i=r),e.push(i)}return e},jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.clone():null===e?t.clone():this.unionOptimized(t,e)},jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(t,e){var o=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!o.intersects(n)){return jsts.geom.util.GeometryCombiner.combine(t,e)}if(t.getNumGeometries<=1&&e.getNumGeometries<=1)return this.unionActual(t,e);var r=o.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,r)},jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(t,e,o){var n=new javascript.util.ArrayList,r=this.extractByEnvelope(o,t,n),i=this.extractByEnvelope(o,e,n),s=this.unionActual(r,i);return n.add(s),jsts.geom.util.GeometryCombiner.combine(n)},jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(t,e,o){for(var n=new javascript.util.ArrayList,r=0;r<e.getNumGeometries();r++){var i=e.getGeometryN(r);i.getEnvelopeInternal().intersects(t)?n.add(i):o.add(i)}return this.geomFactory.buildGeometry(n)},jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(t,e){return t.union(e)},function(){jsts.geom.MultiPoint=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint,jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},jsts.geom.MultiPoint.prototype.getGeometryN=function(t){return this.geometries[t]},jsts.geom.MultiPoint.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e)},jsts.geom.MultiPoint.prototype.CLASS_NAME="jsts.geom.MultiPoint"}(),jsts.operation.distance.DistanceOp=function(t,e,o){this.ptLocator=new jsts.algorithm.PointLocator,this.geom=[],this.geom[0]=t,this.geom[1]=e,this.terminateDistance=o},jsts.operation.distance.DistanceOp.prototype.geom=null,jsts.operation.distance.DistanceOp.prototype.terminateDistance=0,jsts.operation.distance.DistanceOp.prototype.ptLocator=null,jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null,jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE,jsts.operation.distance.DistanceOp.distance=function(t,e){return new jsts.operation.distance.DistanceOp(t,e,0).distance()},jsts.operation.distance.DistanceOp.isWithinDistance=function(t,e,o){return new jsts.operation.distance.DistanceOp(t,e,o).distance()<=o},jsts.operation.distance.DistanceOp.nearestPoints=function(t,e){return new jsts.operation.distance.DistanceOp(t,e,0).nearestPoints()},jsts.operation.distance.DistanceOp.prototype.distance=function(){if(null===this.geom[0]||null===this.geom[1])throw new jsts.error.IllegalArgumentError("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()]},jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this.minDistanceLocation},jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(t,e){null!==t[0]&&(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){if(arguments.length>0)return void this.computeMinDistance2.apply(this,arguments);null===this.minDistanceLocation&&(this.minDistanceLocation=[],this.computeContainmentDistance(),this.minDistance<=this.terminateDistance||this.computeFacetDistance())},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(2===arguments.length)return void this.computeContainmentDistance2.apply(this,arguments);if(3===arguments.length&&!arguments[0]instanceof jsts.operation.distance.GeometryLocation)return void this.computeContainmentDistance3.apply(this,arguments);if(3===arguments.length)return void this.computeContainmentDistance4.apply(this,arguments);var t=[];this.computeContainmentDistance2(0,t),this.minDistance<=this.terminateDistance||this.computeContainmentDistance2(1,t)},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(t,e){var o=1-t,n=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[t]);if(n.length>0){var r=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[o]);if(this.computeContainmentDistance3(r,n,e),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[o]=e[0],void(this.minDistanceLocation[t]=e[1])}},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(t,e,o){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++)if(this.computeContainmentDistance4(r,e[i],o),this.minDistance<=this.terminateDistance)return},jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(t,e,o){var n=t.getCoordinate();if(jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(n,e))return this.minDistance=0,o[0]=t,void(o[1]=new jsts.operation.distance.GeometryLocation(e,n))},jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var t=[],e=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]),o=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]),n=jsts.geom.util.PointExtracter.getPoints(this.geom[0]),r=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(e,o,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(o,n,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,r,t),this.updateMinDistance(t,!1))))},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(t,e,o){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var s=e[i];if(this.computeMinDistance(r,s,o),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(t,e,o){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var s=e[i],a=r.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,o[0]=new jsts.operation.distance.GeometryLocation(r,0,r.getCoordinate()),o[1]=new jsts.operation.distance.GeometryLocation(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(t,e,o){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var s=e[i];if(this.computeMinDistance(r,s,o),this.minDistance<=this.terminateDistance)return}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(t,e,o){if(e instanceof jsts.geom.Point)return void this.computeMinDistance3(t,e,o);if(!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance))for(var n=t.getCoordinates(),r=e.getCoordinates(),i=0;i<n.length-1;i++)for(var s=0;s<r.length-1;s++){var a=jsts.algorithm.CGAlgorithms.distanceLineLine(n[i],n[i+1],r[s],r[s+1]);if(a<this.minDistance){this.minDistance=a;var l=new jsts.geom.LineSegment(n[i],n[i+1]),c=new jsts.geom.LineSegment(r[s],r[s+1]),u=l.closestPoints(c);o[0]=new jsts.operation.distance.GeometryLocation(t,i,u[0]),o[1]=new jsts.operation.distance.GeometryLocation(e,s,u[1])}if(this.minDistance<=this.terminateDistance)return}},jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(t,e,o){if(!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance))for(var n=t.getCoordinates(),r=e.getCoordinate(),i=0;i<n.length-1;i++){var s=jsts.algorithm.CGAlgorithms.distancePointLine(r,n[i],n[i+1]);if(s<this.minDistance){this.minDistance=s;var a=new jsts.geom.LineSegment(n[i],n[i+1]),l=a.closestPoint(r);o[0]=new jsts.operation.distance.GeometryLocation(t,i,l),o[1]=new jsts.operation.distance.GeometryLocation(e,0,r)}if(this.minDistance<=this.terminateDistance)return}},function(){var t=function(t,e,o){this.hotPixel=t,this.parentEdge=e,this.vertexIndex=o};t.prototype=new jsts.index.chain.MonotoneChainSelectAction,t.constructor=t,t.prototype.hotPixel=null,t.prototype.parentEdge=null,t.prototype.vertexIndex=null,t.prototype._isNodeAdded=!1,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(t,e){var o=t.getContext();null!==this.parentEdge&&o===this.parentEdge&&e===this.vertexIndex||(this._isNodeAdded=this.hotPixel.addSnappedNode(o,e))},jsts.noding.snapround.MCIndexPointSnapper=function(t){this.index=t},jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null,jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(e,o,n){if(1===arguments.length)return void this.snap2.apply(this,arguments);var r=e.getSafeEnvelope(),i=new t(e,o,n);return this.index.query(r,{visitItem:function(t){t.select(r,i)}}),i.isNodeAdded()},jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(t){return this.snap(t,null,-1)}}(),jsts.noding.snapround.MCIndexSnapRounder=function(t){this.pm=t,this.li=new jsts.algorithm.RobustLineIntersector,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()},jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder,jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder,jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null,jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(t){this.nodedSegStrings=t,this.noder=new jsts.noding.MCIndexNoder,this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex()),this.snapRound(t,this.li)},jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(t,e){var o=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(o),this.computeVertexSnaps(t)},jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(t,e){var o=new jsts.noding.IntersectionFinderAdder(e);return this.noder.setSegmentIntersector(o),this.noder.computeNodes(t),o.getInteriorIntersections()},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next(),n=new jsts.noding.snapround.HotPixel(o,this.scaleFactor,this.li);this.pointSnapper.snap(n)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(t){if(t instanceof jsts.noding.NodedSegmentString)return void this.computeVertexSnaps2.apply(this,arguments);for(var e=t.iterator();e.hasNext();){var o=e.next();this.computeVertexSnaps(o)}},jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(t){for(var e=t.getCoordinates(),o=0;o<e.length-1;o++){var n=new jsts.noding.snapround.HotPixel(e[o],this.scaleFactor,this.li);this.pointSnapper.snap(n,t,o)&&t.addIntersection(e[o],o)}},jsts.geomgraph.Quadrant=function(){},jsts.geomgraph.Quadrant.NE=0,jsts.geomgraph.Quadrant.NW=1,jsts.geomgraph.Quadrant.SW=2,jsts.geomgraph.Quadrant.SE=3,jsts.geomgraph.Quadrant.quadrant=function(t,e){if(t instanceof jsts.geom.Coordinate)return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments);if(0===t&&0===e)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:e>=0?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.quadrant2=function(t,e){if(e.x===t.x&&e.y===t.y)throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?jsts.geomgraph.Quadrant.NE:jsts.geomgraph.Quadrant.SE:e.y>=t.y?jsts.geomgraph.Quadrant.NW:jsts.geomgraph.Quadrant.SW},jsts.geomgraph.Quadrant.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},jsts.geomgraph.Quadrant.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var o=t<e?t:e,n=t>e?t:e;return 0===o&&3===n?3:o},jsts.geomgraph.Quadrant.isInHalfPlane=function(t,e){return e===jsts.geomgraph.Quadrant.SE?t===jsts.geomgraph.Quadrant.SE||t===jsts.geomgraph.Quadrant.SW:t===e||t===e+1},jsts.geomgraph.Quadrant.isNorthern=function(t){return t===jsts.geomgraph.Quadrant.NE||t===jsts.geomgraph.Quadrant.NW},jsts.operation.valid.ConsistentAreaTester=function(t){this.geomGraph=t,this.li=new jsts.algorithm.RobustLineIntersector,this.nodeGraph=new jsts.operation.relate.RelateNodeGraph,this.invalidPoint=null},jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var t=this.geomGraph.computeSelfNodes(this.li,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().clone(),!1}return!0},jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),o=e.getEdges().iterator();o.hasNext();){var n=o.next();if(n.getEdgeEnds().length>1)return invalidPoint=n.getEdge().getCoordinate(0),!0}return!1},jsts.operation.relate.RelateNode=function(t,e){jsts.geomgraph.Node.apply(this,arguments)},jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node,jsts.operation.relate.RelateNode.prototype.computeIM=function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(t){this.edges.updateIM(t)},function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,o=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(t,e){if(o.call(this,t),this.depth=[0,-999,-999],this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()},jsts.geomgraph.DirectedEdge.prototype=new o,jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge,jsts.geomgraph.DirectedEdge.depthFactor=function(e,o){return e===t.EXTERIOR&&o===t.INTERIOR?1:e===t.INTERIOR&&o===t.EXTERIOR?-1:0},jsts.geomgraph.DirectedEdge.prototype._isForward=null,jsts.geomgraph.DirectedEdge.prototype._isInResult=!1,jsts.geomgraph.DirectedEdge.prototype._isVisited=!1,jsts.geomgraph.DirectedEdge.prototype.sym=null,jsts.geomgraph.DirectedEdge.prototype.next=null,jsts.geomgraph.DirectedEdge.prototype.nextMin=null,jsts.geomgraph.DirectedEdge.prototype.edgeRing=null,jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null,jsts.geomgraph.DirectedEdge.prototype.depth=null,jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge},jsts.geomgraph.DirectedEdge.prototype.setInResult=function(t){this._isInResult=t},jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult},jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited},jsts.geomgraph.DirectedEdge.prototype.setVisited=function(t){this._isVisited=t},jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(t){this.edgeRing=t},jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing},jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(t){this.minEdgeRing=t},jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing},jsts.geomgraph.DirectedEdge.prototype.getDepth=function(t){return this.depth[t]},jsts.geomgraph.DirectedEdge.prototype.setDepth=function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new jsts.error.TopologyError("assigned depths do not match",this.getCoordinate());this.depth[t]=e},jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(t){this.setVisited(t),this.sym.setVisited(t)},jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym},jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward},jsts.geomgraph.DirectedEdge.prototype.setSym=function(t){this.sym=t},jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next},jsts.geomgraph.DirectedEdge.prototype.setNext=function(t){this.next=t},jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin},jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(t){this.nextMin=t},jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var e=this.label.isLine(0)||this.label.isLine(1),o=!this.label.isArea(0)||this.label.allPositionsEqual(0,t.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,t.EXTERIOR);return e&&o&&n},jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){for(var o=!0,n=0;n<2;n++)this.label.isArea(n)&&this.label.getLocation(n,e.LEFT)===t.INTERIOR&&this.label.getLocation(n,e.RIGHT)===t.INTERIOR||(o=!1);return o},jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel()),this._isForward||this.label.flip()},jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(t,o){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===e.LEFT&&(r=-1);var i=e.opposite(t),s=n*r,a=o+s;this.setDepth(t,o),this.setDepth(i,a)}}(),jsts.operation.buffer.OffsetCurveBuilder=function(t,e){this.precisionModel=t,this.bufParams=e},jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0,jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null,jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams},jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(t,e){if(this.distance=e,this.distance<0&&!this.bufParams.isSingleSided())return null;if(0==this.distance)return null;var o=Math.abs(this.distance),n=this.getSegGen(o);if(t.length<=1)this.computePointCurve(t[0],n);else if(this.bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(t,e,o){if(this.distance=o,t.length<=2)return this.getLineCurve(t,o);if(0==this.distance)return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(t);var n=this.getSegGen(this.distance);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(t,e){if(this.distance=e,0===this.distance)return null;var o=this.distance<0,n=Math.abs(this.distance),r=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,o,r);var i=r.getCoordinates();return o&&i.reverse(),i},jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(t){for(var e=[],o=0;o<t.length;o++)e.push(t[o].clone());return e},jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(t){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,t)},jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100,jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(t){return t/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR},jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(t,e){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:e.createCircle(t);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:e.createSquare(t)}},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(t,e){var o=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance),n=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,o),r=n.length-1;e.initSideSegments(n[0],n[1],jsts.geomgraph.Position.LEFT);for(var i=2;i<=r;i++)e.addNextSegment(n[i],!0);e.addLastSegment(),e.addLineEndCap(n[r-1],n[r]);var s=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-o),a=s.length-1;e.initSideSegments(s[a],s[a-1],jsts.geomgraph.Position.LEFT);for(var i=a-2;i>=0;i--)e.addNextSegment(s[i],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(t,e,o){var n=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(e){o.addSegments(t,!0);var r=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-n),i=r.length-1;o.initSideSegments(r[i],r[i-1],jsts.geomgraph.Position.LEFT),o.addFirstSegment();for(var s=i-2;s>=0;s--)o.addNextSegment(r[s],!0)}else{o.addSegments(t,!1);var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,n),l=a.length-1;o.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),o.addFirstSegment();for(var s=2;s<=l;s++)o.addNextSegment(a[s],!0)}o.addLastSegment(),o.closeRing()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(t,e,o){var n=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(e){var r=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,-n),i=r.length-1;o.initSideSegments(r[i],r[i-1],jsts.geomgraph.Position.LEFT),o.addFirstSegment();for(var s=i-2;s>=0;s--)o.addNextSegment(r[s],!0)}else{var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,n),l=a.length-1;o.initSideSegments(a[0],a[1],jsts.geomgraph.Position.LEFT),o.addFirstSegment();for(var s=2;s<=l;s++)o.addNextSegment(a[s],!0)}o.addLastSegment()},jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(t,e,o){var n=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);e===jsts.geomgraph.Position.RIGHT&&(n=-n);var r=jsts.operation.buffer.BufferInputLineSimplifier.simplify(t,n),i=r.length-1;o.initSideSegments(r[i-1],r[0],e);for(var s=1;s<=i;s++){var a=1!==s;o.addNextSegment(r[s],a)}o.closeRing()},jsts.index.strtree.SIRtree=function(t){t=t||10,jsts.index.strtree.AbstractSTRtree.call(this,t)},jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree,jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree,jsts.index.strtree.SIRtree.prototype.comperator={compare:function(t,e){return t.getBounds().getCentre()-e.getBounds().getCentre()}},jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(t,e){return t.intersects(e)}},jsts.index.strtree.SIRtree.prototype.createNode=function(t){var e=function(t){jsts.index.strtree.AbstractNode.apply(this,arguments)};return e.prototype=new jsts.index.strtree.AbstractNode,e.constructor=e,e.prototype.computeBounds=function(){for(var t,e=null,o=this.getChildBoundables(),n=0,r=o.length;n<r;n++)t=o[n],null===e?e=new jsts.index.strtree.Interval(t.getBounds()):e.expandToInclude(t.getBounds());return e},e},jsts.index.strtree.SIRtree.prototype.insert=function(t,e,o){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(t,e),Math.max(t,e)),o)},jsts.index.strtree.SIRtree.prototype.query=function(t,e){e=e||t,jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(t,e),Math.max(t,e)))},jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp},jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator},function(){var t=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory)},jsts.operation.relate.RelateNodeGraph.prototype.nodes=null,jsts.operation.relate.RelateNodeGraph.prototype.build=function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new jsts.operation.relate.EdgeEndBuilder,o=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(o)},jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(e,o){for(var n=e.getEdgeIterator();n.hasNext();)for(var r=n.next(),i=r.getLabel().getLocation(o),s=r.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),l=this.nodes.addNode(a.coord);i===t.BOUNDARY?l.setLabelBoundary(o):l.getLabel().isNull(o)&&l.setLabel(o,t.INTERIOR)}},jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(t,e){for(var o=t.getNodeIterator();o.hasNext();){var n=o.next();this.nodes.addNode(n.getCoordinate()).setLabel(e,n.getLabel().getLocation(e))}},jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(t){for(var e=t.iterator();e.hasNext();){var o=e.next();this.nodes.add(o)}},jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()}}(),function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.NULL_VALUE=-1,jsts.geomgraph.Depth.depthAtLocation=function(e){return e===t.EXTERIOR?0:e===t.INTERIOR?1:jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.depth=null,jsts.geomgraph.Depth.prototype.getDepth=function(t,e){return this.depth[t][e]},jsts.geomgraph.Depth.prototype.setDepth=function(t,e,o){this.depth[t][e]=o},jsts.geomgraph.Depth.prototype.getLocation=function(e,o){return this.depth[e][o]<=0?t.EXTERIOR:t.INTERIOR},jsts.geomgraph.Depth.prototype.add=function(e,o,n){n===t.INTERIOR&&this.depth[e][o]++},jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0)return this.isNull2.apply(this,arguments);for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==jsts.geomgraph.Depth.NULL_VALUE)return!1;return!0},jsts.geomgraph.Depth.prototype.isNull2=function(t){return arguments.length>1?this.isNull3.apply(this,arguments):this.depth[t][1]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.isNull3=function(t,e){return this.depth[t][e]==jsts.geomgraph.Depth.NULL_VALUE},jsts.geomgraph.Depth.prototype.add=function(e){for(var o=0;o<2;o++)for(var n=1;n<3;n++){var r=e.getLocation(o,n);r!==t.EXTERIOR&&r!==t.INTERIOR||(this.isNull(o,n)?this.depth[o][n]=jsts.geomgraph.Depth.depthAtLocation(r):this.depth[o][n]+=jsts.geomgraph.Depth.depthAtLocation(r))}},jsts.geomgraph.Depth.prototype.getDelta=function(t){return this.depth[t][e.RIGHT]-this.depth[t][e.LEFT]},jsts.geomgraph.Depth.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var o=1;o<3;o++){var n=0;this.depth[t][o]>e&&(n=1),this.depth[t][o]=n}}},jsts.geomgraph.Depth.prototype.toString=function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}}(),jsts.algorithm.BoundaryNodeRule=function(){},jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(t){throw new jsts.error.AbstractMethodInvocationError},jsts.algorithm.Mod2BoundaryNodeRule=function(){},jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule,jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(t){return t%2==1},jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule,jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE,jsts.geom.CoordinateSequenceFilter=function(){},jsts.geom.CoordinateSequenceFilter.prototype.filter=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isDone=jsts.abstractFunc,jsts.geom.CoordinateSequenceFilter.prototype.isGeometryChanged=jsts.abstractFunc,jsts.algorithm.distance.PointPairDistance=function(){this.pt=[new jsts.geom.Coordinate,new jsts.geom.Coordinate]},jsts.algorithm.distance.PointPairDistance.prototype.pt=null,jsts.algorithm.distance.PointPairDistance.prototype.distance=NaN,jsts.algorithm.distance.PointPairDistance.prototype.isNull=!0,jsts.algorithm.distance.PointPairDistance.prototype.initialize=function(t,e,o){if(void 0===t)return void(this.isNull=!0);this.pt[0].setCoordinate(t),this.pt[1].setCoordinate(e),this.distance=void 0!==o?o:t.distance(e),this.isNull=!1},jsts.algorithm.distance.PointPairDistance.prototype.getDistance=function(){return this.distance},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinates=function(){return this.pt},jsts.algorithm.distance.PointPairDistance.prototype.getCoordinate=function(t){return this.pt[t]},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum=function(t){if(2===arguments.length)return void this.setMaximum2.apply(this,arguments);this.setMaximum(t.pt[0],t.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMaximum2=function(t,e){if(this.isNull)return void this.initialize(t,e);var o=t.distance(e);o>this.distance&&this.initialize(t,e,o)},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum=function(t){if(2===arguments.length)return void this.setMinimum2.apply(this,arguments);this.setMinimum(t.pt[0],t.pt[1])},jsts.algorithm.distance.PointPairDistance.prototype.setMinimum2=function(t,e){if(this.isNull)return void this.initialize(t,e);var o=t.distance(e);o<this.distance&&this.initialize(t,e,o)},function(){var t=jsts.algorithm.distance.PointPairDistance,e=jsts.algorithm.distance.DistanceToPoint,o=function(o){this.maxPtDist=new t,this.minPtDist=new t,this.euclideanDist=new e,this.geom=o};o.prototype=new jsts.geom.CoordinateFilter,o.prototype.maxPtDist=new t,o.prototype.minPtDist=new t,o.prototype.euclideanDist=new e,o.prototype.geom,o.prototype.filter=function(t){this.minPtDist.initialize(),e.computeDistance(this.geom,t,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)},o.prototype.getMaxPointDistance=function(){return this.maxPtDist};var n=function(e,o){this.maxPtDist=new t,this.minPtDist=new t,this.geom=e,this.numSubSegs=Math.round(1/o)};n.prototype=new jsts.geom.CoordinateSequenceFilter,n.prototype.maxPtDist=new t,n.prototype.minPtDist=new t,n.prototype.geom,n.prototype.numSubSegs=0,n.prototype.filter=function(t,o){if(0!=o)for(var n=t[o-1],r=t[o],i=(r.x-n.x)/this.numSubSegs,s=(r.y-n.y)/this.numSubSegs,a=0;a<this.numSubSegs;a++){var l=n.x+a*i,c=n.y+a*s,u=new jsts.geom.Coordinate(l,c);this.minPtDist.initialize(),e.computeDistance(this.geom,u,this.minPtDist),this.maxPtDist.setMaximum(this.minPtDist)}},n.prototype.isGeometryChanged=function(){return!1},n.prototype.isDone=function(){return!1},n.prototype.getMaxPointDistance=function(){return this.maxPtDist},jsts.algorithm.distance.DiscreteHausdorffDistance=function(t,e){this.g0=t,this.g1=e,this.ptDist=new jsts.algorithm.distance.PointPairDistance},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g0=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g1=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.ptDist=null,jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.densifyFrac=0,jsts.algorithm.distance.DiscreteHausdorffDistance.distance=function(t,e,o){var n=new jsts.algorithm.distance.DiscreteHausdorffDistance(t,e);return void 0!==o&&n.setDensifyFraction(o),n.distance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new jsts.error.IllegalArgumentError("Fraction is not in range (0.0 - 1.0]");this.densifyFrac=t},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.distance=function(){return this.compute(this.g0,this.g1),ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.orientedDistance=function(){return this.computeOrientedDistance(this.g0,this.g1,this.ptDist),this.ptDist.getDistance()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.getCoordinates=function(){return ptDist.getCoordinates()},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this.ptDist),this.computeOrientedDistance(e,t,this.ptDist)},jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(t,e,r){var i=new o(e);if(t.apply(i),r.setMaximum(i.getMaxPointDistance()),this.densifyFrac>0){var s=new n(e,this.densifyFrac);t.apply(s),r.setMaximum(s.getMaxPointDistance())}}}(),jsts.operation.distance.GeometryLocation=function(t,e,o){this.component=t,this.segIndex=e,this.pt=o},jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1,jsts.operation.distance.GeometryLocation.prototype.component=null,jsts.operation.distance.GeometryLocation.prototype.segIndex=null,jsts.operation.distance.GeometryLocation.prototype.pt=null,jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component},jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex},jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt},jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA},jsts.geom.util.PointExtracter=function(t){this.pts=t},jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.PointExtracter.prototype.pts=null,jsts.geom.util.PointExtracter.getPoints=function(t,e){return void 0===e&&(e=[]),t instanceof jsts.geom.Point?e.push(t):(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&t.apply(new jsts.geom.util.PointExtracter(e)),e},jsts.geom.util.PointExtracter.prototype.filter=function(t){t instanceof jsts.geom.Point&&this.pts.push(t)},jsts.noding.ScaledNoder=function(t,e,o,n){this.offsetX=o||0,this.offsetY=n||0,this.noder=t,this.scaleFactor=e,this.isScaled=!this.isIntegerPrecision()},jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder,jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder,jsts.noding.ScaledNoder.prototype.noder=null,jsts.noding.ScaledNoder.prototype.scaleFactor=void 0,jsts.noding.ScaledNoder.prototype.offsetX=void 0,jsts.noding.ScaledNoder.prototype.offsetY=void 0,jsts.noding.ScaledNoder.prototype.isScaled=!1,jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return 1===this.scaleFactor},jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},jsts.noding.ScaledNoder.prototype.computeNodes=function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},jsts.noding.ScaledNoder.prototype.scale=function(t){if(t instanceof Array)return this.scale2(t);for(var e=new javascript.util.ArrayList,o=t.iterator();o.hasNext();){var n=o.next();e.add(new jsts.noding.NodedSegmentString(this.scale(n.getCoordinates()),n.getData()))}return e},jsts.noding.ScaledNoder.prototype.scale2=function(t){for(var e=[],o=0;o<t.length;o++)e[o]=new jsts.geom.Coordinate(Math.round((t[o].x-this.offsetX)*this.scaleFactor),Math.round((t[o].y-this.offsetY)*this.scaleFactor));return jsts.geom.CoordinateArrays.removeRepeatedPoints(e)},jsts.noding.ScaledNoder.prototype.rescale=function(t){if(t instanceof Array)return void this.rescale2(t);for(var e=t.iterator();e.hasNext();){var o=e.next();this.rescale(o.getCoordinates())}},jsts.noding.ScaledNoder.prototype.rescale2=function(t){for(var e=0;e<t.length;e++)t[e].x=t[e].x/this.scaleFactor+this.offsetX,t[e].y=t[e].y/this.scaleFactor+this.offsetY},jsts.noding.IntersectionAdder=function(t){this.li=t},jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector,jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder,jsts.noding.IntersectionAdder.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},jsts.noding.IntersectionAdder.prototype._hasIntersection=!1,jsts.noding.IntersectionAdder.prototype.hasProper=!1,jsts.noding.IntersectionAdder.prototype.hasProperInterior=!1,jsts.noding.IntersectionAdder.prototype.hasInterior=!1,jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null,jsts.noding.IntersectionAdder.prototype.li=null,jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null,jsts.noding.IntersectionAdder.prototype.numIntersections=0,jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0,jsts.noding.IntersectionAdder.prototype.numProperIntersections=0,jsts.noding.IntersectionAdder.prototype.numTests=0,jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li},jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection},jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper},jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior},jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(t,e,o,n){if(t==o&&1==this.li.getIntersectionNum()){if(jsts.noding.IntersectionAdder.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},jsts.noding.IntersectionAdder.prototype.processIntersections=function(t,e,o,n){if(t!==o||e!==n){this.numTests++;var r=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=o.getCoordinates()[n],a=o.getCoordinates()[n+1];this.li.computeIntersection(r,i,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,o,n)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),o.addIntersections(this.li,n,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))}},jsts.noding.IntersectionAdder.prototype.isDone=function(){return!1},jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var t=arguments[0];t instanceof jsts.geom.Geometry||t instanceof jsts.geom.Coordinate||t instanceof jsts.geom.Point||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.LineString||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.MultiPolygon?this.setSitesByGeometry(t):this.setSitesByArray(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(t){this.clipEnv=t},jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(t){this.tolerance=t},jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(null===this.subdiv){var t,e,o,n;t=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),this.diagramEnv=t,e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight()),this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv),o=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(t,this.tolerance),n=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),n.insertSites(o)}},jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return this.clipGeometryCollection(e,this.diagramEnv)},jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(t,e){var o,n,r,i,s,a;for(o=t.getFactory().toGeometry(e),n=[],r=0,i=t.getNumGeometries(),r;r<i;r++)s=t.getGeometryN(r),a=null,e.contains(s.getEnvelopeInternal())?a=s:e.intersects(s.getEnvelopeInternal())&&(a=o.intersection(s)),null===a||a.isEmpty()||n.push(a);return t.getFactory().createGeometryCollection(n)},jsts.operation.valid.IndexedNestedRingTester=function(t){this.graph=t,this.rings=new javascript.util.ArrayList,this.totalEnv=new jsts.geom.Envelope,this.index=null,this.nestedPt=null},jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt},jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),o=e.getCoordinates(),n=this.index.query(e.getEnvelopeInternal()),r=0;r<n.length;r++){var i=n[r],s=i.getCoordinates();if(e!=i&&e.getEnvelopeInternal().intersects(i.getEnvelopeInternal())){var a=jsts.operation.valid.IsValidOp.findPtNotNode(o,i,this.graph);if(null!=a){var l=jsts.algorithm.CGAlgorithms.isPointInRing(a,s);if(l)return this.nestedPt=a,!1}}}return!0},jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),o=e.getEnvelopeInternal();this.index.insert(o,e)}},jsts.noding.SegmentNode=function(t,e,o,n){this.segString=t,this.coord=new jsts.geom.Coordinate(e),this.segmentIndex=o,this.segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(o))},jsts.noding.SegmentNode.prototype.segString=null,jsts.noding.SegmentNode.prototype.coord=null,jsts.noding.SegmentNode.prototype.segmentIndex=null,jsts.noding.SegmentNode.prototype.segmentOctant=null,jsts.noding.SegmentNode.prototype._isInterior=null,jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord},jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior},jsts.noding.SegmentNode.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===this.maxSegmentIndex},jsts.noding.SegmentNode.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,e.coord)},function(){jsts.io.GeoJSONParser=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"]},jsts.io.GeoJSONParser.prototype.read=function(t){var e;e="string"==typeof t?JSON.parse(t):t;var o=e.type;if(!this.parse[o])throw new Error("Unknown GeoJSON type: "+e.type);return-1!=this.geometryTypes.indexOf(o)?this.parse[o].apply(this,[e.coordinates]):"GeometryCollection"===o?this.parse[o].apply(this,[e.geometries]):this.parse[o].apply(this,[e])},jsts.io.GeoJSONParser.prototype.parse={Feature:function(t){var e={};for(var o in t)e[o]=t[o];if(t.geometry){var n=t.geometry.type;if(!this.parse[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var o=0;o<t.features.length;++o)e.features.push(this.read(t.features[o]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],o=0;o<t.length;++o){var n=t[o];e.push(new jsts.geom.Coordinate(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new jsts.geom.Coordinate(t[0],t[1]),new jsts.geom.Coordinate(t[2],t[1]),new jsts.geom.Coordinate(t[2],t[3]),new jsts.geom.Coordinate(t[0],t[3]),new jsts.geom.Coordinate(t[0],t[1])])},Point:function(t){var e=new jsts.geom.Coordinate(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],o=0;o<t.length;++o)e.push(this.parse.Point.apply(this,[t[o]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=this.parse.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],o=0;o<t.length;++o)e.push(this.parse.LineString.apply(this,[t[o]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=this.parse.coordinates.apply(this,[t[0]]),o=this.geometryFactory.createLinearRing(e),n=[],r=1;r<t.length;++r){var i=t[r],s=this.parse.coordinates.apply(this,[i]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(o,n)},MultiPolygon:function(t){for(var e=[],o=0;o<t.length;++o){var n=t[o];e.push(this.parse.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],o=0;o<t.length;++o){var n=t[o];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},jsts.io.GeoJSONParser.prototype.write=function(t){var e=t.CLASS_NAME.slice(10);if(!this.extract[e])throw new Error("Geometry is not supported");return this.extract[e].apply(this,[t])},jsts.io.GeoJSONParser.prototype.extract={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:this.extract.coordinate.apply(this,[t.coordinate])}},MultiPoint:function(t){for(var e=[],o=0;o<t.geometries.length;++o){var n=t.geometries[o],r=this.extract.Point.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],o=0;o<t.points.length;++o){var n=t.points[o];e.push(this.extract.coordinate.apply(this,[n]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],o=0;o<t.geometries.length;++o){var n=t.geometries[o],r=this.extract.LineString.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],o=this.extract.LineString.apply(this,[t.shell]);e.push(o.coordinates);for(var n=0;n<t.holes.length;++n){var r=t.holes[n],i=this.extract.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],o=0;o<t.geometries.length;++o){var n=t.geometries[o],r=this.extract.Polygon.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],o=0;o<t.geometries.length;++o){var n=t.geometries[o],r=n.CLASS_NAME.slice(10);e.push(this.extract[r].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}}}(),jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root,this.minExtent=1},jsts.index.quadtree.Quadtree.ensureExtent=function(t,e){var o,n,r,i;return o=t.getMinX(),n=t.getMaxX(),r=t.getMinY(),i=t.getMaxY(),o!==n&&r!==i?t:(o===n&&(o-=e/2,n=o+e/2),r===i&&(r-=e/2,i=r+e/2),new jsts.geom.Envelope(o,n,r,i))},jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth()},jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size()},jsts.index.quadtree.Quadtree.prototype.insert=function(t,e){this.collectStats(t);var o=jsts.index.quadtree.Quadtree.ensureExtent(t,this.minExtent);this.root.insert(o,e)},jsts.index.quadtree.Quadtree.prototype.remove=function(t,e){var o=jsts.index.quadtree.Quadtree.ensureExtent(t,this.minExtent);return this.root.remove(o,e)},jsts.index.quadtree.Quadtree.prototype.query=function(){if(1===arguments.length)return jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments);jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments)},jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(t){var e=new jsts.index.ArrayListVisitor;return this.query(t,e),e.getItems()},jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(t,e){this.root.visit(t,e)},jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var t=[];return t=this.root.addAllItems(t)},jsts.index.quadtree.Quadtree.prototype.collectStats=function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var o=t.getHeight();o<this.minExtent&&o>0&&(this.minExtent=o)},jsts.operation.relate.RelateNodeFactory=function(){},jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory,jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(t){return new jsts.operation.relate.RelateNode(t,new jsts.operation.relate.EdgeEndBundleStar)},jsts.index.quadtree.Key=function(t){this.pt=new jsts.geom.Coordinate,this.level=0,this.env=null,this.computeKey(t)},jsts.index.quadtree.Key.computeQuadLevel=function(t){var e,o,n;return e=t.getWidth(),o=t.getHeight(),n=e>o?e:o,jsts.index.DoubleBits.exponent(n)+1},jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt},jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level},jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env},jsts.index.quadtree.Key.prototype.getCentre=function(){var t,e;return t=(this.env.getMinX()+this.env.getMaxX())/2,e=(this.env.getMinY()+this.env.getMaxY())/2,new jsts.geom.Coordinate(t,e)},jsts.index.quadtree.Key.prototype.computeKey=function(){arguments[0]instanceof jsts.geom.Envelope?this.computeKeyFromEnvelope(arguments[0]):this.computeKeyFromLevel(arguments[0],arguments[1])},jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(t){for(this.level=jsts.index.quadtree.Key.computeQuadLevel(t),this.env=new jsts.geom.Envelope,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)},jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(t,e){var o=jsts.index.DoubleBits.powerOf2(t);this.pt.x=Math.floor(e.getMinX()/o)*o,this.pt.y=Math.floor(e.getMinY()/o)*o,this.env.init(this.pt.x,this.pt.x+o,this.pt.y,this.pt.y+o)},jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError},jsts.geom.CoordinateArrays.removeRepeatedPoints=function(t){var e;return this.hasRepeatedPoints(t)?(e=new jsts.geom.CoordinateList(t,!1),e.toCoordinateArray()):t},jsts.geom.CoordinateArrays.hasRepeatedPoints=function(t){var e;for(e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},jsts.geom.CoordinateArrays.ptNotInList=function(t,e){for(var o=0;o<t.length;o++){var n=t[o];if(jsts.geom.CoordinateArrays.indexOf(n,e)<0)return n}return null},jsts.geom.CoordinateArrays.increasingDirection=function(t){for(var e=0;e<parseInt(t.length/2);e++){var o=t.length-1-e,n=t[e].compareTo(t[o]);if(0!=n)return n}return 1};jsts.geom.CoordinateArrays.minCoordinate=function(t){for(var e=null,o=0;o<t.length;o++)(null===e||e.compareTo(t[o])>0)&&(e=t[o]);return e},jsts.geom.CoordinateArrays.scroll=function(t,e){var o=jsts.geom.CoordinateArrays.indexOf(e,t);if(!(o<0)){var n=t.slice(o).concat(t.slice(0,o));for(o=0;o<n.length;o++)t[o]=n[o]}},jsts.geom.CoordinateArrays.indexOf=function(t,e){for(var o=0;o<e.length;o++)if(t.equals(e[o]))return o;return-1},jsts.operation.overlay.MinimalEdgeRing=function(t,e){jsts.geomgraph.EdgeRing.call(this,t,e)},jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing,jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing,jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(t){return t.getNextMin()},jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null,this.tolerance=0,this.subdiv=null},jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(t){if(void 0===t||null===t)return new jsts.geom.CoordinateList([],!1).toArray();var e=t.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(e)},jsts.triangulate.DelaunayTriangulationBuilder.unique=function(t){return t.sort(function(t,e){return t.compareTo(e)}),new jsts.geom.CoordinateList(t,!1).toArray()},jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(t){var e,o=new Array(t.length),n=0,r=t.length;for(n;n<r;n++)e=t[n],o[n]=new jsts.triangulate.quadedge.Vertex(e);return o},jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(t){var e=new jsts.geom.Envelope,o=0,n=t.length;for(o;o<n;o++)e.expandToInclude(t[o]);return e},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var t=arguments[0];t instanceof jsts.geom.Geometry||t instanceof jsts.geom.Coordinate||t instanceof jsts.geom.Point||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.LineString||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.LinearRing||t instanceof jsts.geom.Polygon||t instanceof jsts.geom.MultiPolygon?this.setSitesFromGeometry(t):this.setSitesFromCollection(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(t){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(t){this.tolerance=t},jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(null===this.subdiv){var t,e,o;t=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords),e=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords),this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(t,this.tolerance),o=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv),o.insertSites(e)}},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){return this.create(),this.subdiv},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(t){return this.create(),this.subdiv.getEdges(t)},jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(t){return this.create(),this.subdiv.getTriangles(t)},jsts.algorithm.RayCrossingCounter=function(t){this.p=t},jsts.algorithm.RayCrossingCounter.locatePointInRing=function(t,e){for(var o=new jsts.algorithm.RayCrossingCounter(t),n=1;n<e.length;n++){var r=e[n],i=e[n-1];if(o.countSegment(r,i),o.isOnSegment())return o.getLocation()}return o.getLocation()},jsts.algorithm.RayCrossingCounter.prototype.p=null,jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0,jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=!1,jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(t,e){if(!(t.x<this.p.x&&e.x<this.p.x)){if(this.p.x==e.x&&this.p.y===e.y)return void(this.isPointOnSegment=!0);if(t.y===this.p.y&&e.y===this.p.y){var o=t.x,n=e.x;return o>n&&(o=e.x,n=t.x),void(this.p.x>=o&&this.p.x<=n&&(this.isPointOnSegment=!0))}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,i=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,l=jsts.algorithm.RobustDeterminant.signOfDet2x2(r,i,s,a);if(0===l)return void(this.isPointOnSegment=!0);a<i&&(l=-l),l>0&&this.crossingCount++}}},jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment},jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){return this.isPointOnSegment?jsts.geom.Location.BOUNDARY:this.crossingCount%2==1?jsts.geom.Location.INTERIOR:jsts.geom.Location.EXTERIOR},jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR},jsts.operation.BoundaryOp=function(t,e){this.geom=t,this.geomFact=t.getFactory(),this.bnRule=e||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE},jsts.operation.BoundaryOp.prototype.geom=null,jsts.operation.BoundaryOp.prototype.geomFact=null,jsts.operation.BoundaryOp.prototype.bnRule=null,jsts.operation.BoundaryOp.prototype.getBoundary=function(){return this.geom instanceof jsts.geom.LineString?this.boundaryLineString(this.geom):this.geom instanceof jsts.geom.MultiLineString?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null)},jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1==e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPoint(e)},jsts.operation.BoundaryOp.prototype.endpoints=null,jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(t){var e,o,n,r=[];for(this.endpoints=[],e=0;e<t.getNumGeometries();e++)o=t.getGeometryN(e),0!=o.getNumPoints()&&(this.addEndpoint(o.getCoordinateN(0)),this.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)));for(e=0;e<this.endpoints.length;e++)n=this.endpoints[e],this.bnRule.isInBoundary(n.count)&&r.push(n.coordinate);return r},jsts.operation.BoundaryOp.prototype.addEndpoint=function(t){var e,o,n=!1;for(e=0;e<this.endpoints.length;e++)if(o=this.endpoints[e],o.coordinate.equals(t)){n=!0;break}n||(o={},o.coordinate=t,o.count=0,this.endpoints.push(o)),o.count++},jsts.operation.BoundaryOp.prototype.boundaryLineString=function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){return this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint(null)}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},jsts.operation.buffer.OffsetCurveSetBuilder=function(t,e,o){this.inputGeom=t,this.distance=e,this.curveBuilder=o,this.curveList=new javascript.util.ArrayList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null,jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this.inputGeom),this.curveList},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(t,e,o){if(!(null==t||t.length<2)){var n=new jsts.noding.NodedSegmentString(t,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,e,o));this.curveList.add(n)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(t){if(!t.isEmpty())if(t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.LineString)this.addLineString(t);else if(t instanceof jsts.geom.Point)this.addPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.addCollection(t);else if(t instanceof jsts.geom.MultiLineString)this.addCollection(t);else if(t instanceof jsts.geom.MultiPolygon)this.addCollection(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError;this.addCollection(t)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var o=t.getGeometryN(e);this.add(o)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(t){if(!(this.distance<=0)){var e=t.getCoordinates(),o=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(o,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(t){if(!(this.distance<=0)||this.curveBuilder.getBufferParameters().isSingleSided()){var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(t.getCoordinates()),o=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(o,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(t){var e=this.distance,o=jsts.geomgraph.Position.LEFT;this.distance<0&&(e=-this.distance,o=jsts.geomgraph.Position.RIGHT);var n=t.getExteriorRing(),r=jsts.geom.CoordinateArrays.removeRepeatedPoints(n.getCoordinates());if(!(this.distance<0&&this.isErodedCompletely(n,this.distance)||this.distance<=0&&r.length<3)){this.addPolygonRing(r,e,o,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var i=0;i<t.getNumInteriorRing();i++){var s=t.getInteriorRingN(i),a=jsts.geom.CoordinateArrays.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,jsts.geomgraph.Position.opposite(o),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR)}}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(t,e,o,n,r){if(!(0==e&&t.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE)){var i=n,s=r;t.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(t)&&(i=r,s=n,o=jsts.geomgraph.Position.opposite(o));var a=this.curveBuilder.getRingCurve(t,o,e);this.addCurve(a,i,s)}},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(t,e){var o=t.getCoordinates();if(o.length<4)return e<0;if(4==o.length)return this.isTriangleErodedCompletely(o,e);var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>r},jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(t,e){var o=new jsts.geom.Triangle(t[0],t[1],t[2]),n=o.inCentre();return jsts.algorithm.CGAlgorithms.distancePointLine(n,o.p0,o.p1)<Math.abs(e)},jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList,this.nodes=new javascript.util.ArrayList,this.finder=new jsts.operation.buffer.RightmostEdgeFinder},jsts.operation.buffer.BufferSubgraph.prototype.finder=null,jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null,jsts.operation.buffer.BufferSubgraph.prototype.nodes=null,jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null,jsts.operation.buffer.BufferSubgraph.prototype.env=null,jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList},jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes},jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(null===this.env){for(var t=new jsts.geom.Envelope,e=this.dirEdgeList.iterator();e.hasNext();)for(var o=e.next(),n=o.getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this.env=t}return this.env},jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord},jsts.operation.buffer.BufferSubgraph.prototype.create=function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(t){var e=[];for(e.push(t);0!==e.length;){var o=e.pop();this.add(o,e)}},jsts.operation.buffer.BufferSubgraph.prototype.add=function(t,e){t.setVisited(!0),this.nodes.add(t);for(var o=t.getEdges().iterator();o.hasNext();){var n=o.next();this.dirEdgeList.add(n);var r=n.getSym(),i=r.getNode();i.isVisited()||e.push(i)}},jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel();e.setEdgeDepths(jsts.geomgraph.Position.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(t){var e=[],o=[],n=t.getNode();for(o.push(n),e.push(n),t.setVisited(!0);0!==o.length;){var r=o.shift();e.push(r),this.computeNodeDepth(r);for(var i=r.getEdges().iterator();i.hasNext();){var s=i.next(),a=s.getSym();if(!a.isVisited()){var l=a.getNode();-1===e.indexOf(l)&&(o.push(l),e.push(l))}}}},jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(t){for(var e=null,o=t.getEdges().iterator();o.hasNext();){var n=o.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null==e)throw new jsts.error.TopologyError("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var o=t.getEdges().iterator();o.hasNext();){var n=o.next();n.setVisited(!0),this.copySymDepths(n)}},jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(jsts.geomgraph.Position.LEFT,t.getDepth(jsts.geomgraph.Position.RIGHT)),e.setDepth(jsts.geomgraph.Position.RIGHT,t.getDepth(jsts.geomgraph.Position.LEFT))},jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&e.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},jsts.geom.util.GeometryExtracter=function(t,e){this.clz=t,this.comps=e},jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter,jsts.geom.util.GeometryExtracter.prototype.clz=null,jsts.geom.util.GeometryExtracter.prototype.comps=null,jsts.geom.util.GeometryExtracter.extract=function(t,e,o){return o=o||new javascript.util.ArrayList,t instanceof e?o.add(t):(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPoint||t instanceof jsts.geom.MultiLineString||t instanceof jsts.geom.MultiPolygon)&&t.apply(new jsts.geom.util.GeometryExtracter(e,o)),o},jsts.geom.util.GeometryExtracter.prototype.filter=function(t){(null===this.clz||t instanceof this.clz)&&this.comps.add(t)},function(){var t=jsts.operation.overlay.OverlayOp,e=jsts.operation.overlay.snap.SnapOverlayOp,o=function(t,e){this.geom=[],this.geom[0]=t,this.geom[1]=e};o.overlayOp=function(t,e,n){return new o(t,e).getResultGeometry(n)},o.intersection=function(e,o){return overlayOp(e,o,t.INTERSECTION)},o.union=function(e,o){return overlayOp(e,o,t.UNION)},o.difference=function(e,o){return overlayOp(e,o,t.DIFFERENCE)},o.symDifference=function(e,o){return overlayOp(e,o,t.SYMDIFFERENCE)},o.prototype.geom=null,o.prototype.getResultGeometry=function(o){var n=null,r=!1,i=null;try{n=t.overlayOp(this.geom[0],this.geom[1],o);r=!0}catch(t){i=t}if(!r)try{n=e.overlayOp(this.geom[0],this.geom[1],o)}catch(t){throw i}return n},jsts.operation.overlay.snap.SnapIfNeededOverlayOp=o}(),function(){var t=jsts.geom.util.GeometryExtracter,e=jsts.operation.union.CascadedPolygonUnion,o=jsts.operation.union.PointGeometryUnion,n=jsts.operation.overlay.OverlayOp,r=jsts.operation.overlay.snap.SnapIfNeededOverlayOp,i=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(t,e){this.polygons=new i,this.lines=new i,this.points=new i,e&&(this.geomFact=e),this.extract(t)},jsts.operation.union.UnaryUnionOp.union=function(t,e){return new jsts.operation.union.UnaryUnionOp(t,e).union()},jsts.operation.union.UnaryUnionOp.prototype.polygons=null,jsts.operation.union.UnaryUnionOp.prototype.lines=null,jsts.operation.union.UnaryUnionOp.prototype.points=null,jsts.operation.union.UnaryUnionOp.prototype.geomFact=null,jsts.operation.union.UnaryUnionOp.prototype.extract=function(e){if(e instanceof i)for(var o=e.iterator();o.hasNext();){var n=o.next();this.extract(n)}else null===this.geomFact&&(this.geomFact=e.getFactory()),t.extract(e,jsts.geom.Polygon,this.polygons),t.extract(e,jsts.geom.LineString,this.lines),t.extract(e,jsts.geom.Point,this.points)},jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(i)}var s=null;this.polygons.size()>0&&(s=e.union(this.polygons));var a=this.unionWithNull(r,s),l=null;return l=null===t?a:null===a?t:o(t,a),null===l?this.geomFact.createGeometryCollection(null):l},jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(t){var e=this.geomFact.createPoint(null);return r.overlayOp(t,e,n.UNION)}}(),jsts.index.kdtree.KdNode=function(){this.left=null,this.right=null,this.count=1,2===arguments.length?this.initializeFromCoordinate.apply(this,arguments[0],arguments[1]):3===arguments.length&&this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2])},jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(t,e,o){this.p=new jsts.geom.Coordinate(t,e),this.data=o},jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(t,e){this.p=t,this.data=e},jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x},jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y},jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p},jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data},jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left},jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right},jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1},jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count},jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1},jsts.index.kdtree.KdNode.prototype.setLeft=function(t){this.left=t},jsts.index.kdtree.KdNode.prototype.setRight=function(t){this.right=t},function(){jsts.geom.MultiLineString=function(t,e){this.geometries=t||[],this.factory=e},jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection,jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString,jsts.geom.MultiLineString.prototype.getBoundary=function(){return new jsts.operation.BoundaryOp(this).getBoundary()},jsts.geom.MultiLineString.prototype.equalsExact=function(t,e){return!!this.isEquivalentClass(t)&&jsts.geom.GeometryCollection.prototype.equalsExact.call(this,t,e)},jsts.geom.MultiLineString.prototype.CLASS_NAME="jsts.geom.MultiLineString"}(),jsts.operation.buffer.BufferParameters=function(t,e,o,n){t&&this.setQuadrantSegments(t),e&&this.setEndCapStyle(e),o&&this.setJoinStyle(o),n&&this.setMitreLimit(n)},jsts.operation.buffer.BufferParameters.CAP_ROUND=1,jsts.operation.buffer.BufferParameters.CAP_FLAT=2,jsts.operation.buffer.BufferParameters.CAP_SQUARE=3,jsts.operation.buffer.BufferParameters.JOIN_ROUND=1,jsts.operation.buffer.BufferParameters.JOIN_MITRE=2,jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3,jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8,jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5,jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS,jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND,jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND,jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT,jsts.operation.buffer.BufferParameters.prototype._isSingleSided=!1,jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(t){this.quadrantSegments=t},jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND&&(this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS)},jsts.operation.buffer.BufferParameters.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle},jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(t){this.endCapStyle=t},jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle},jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(t){this.joinStyle=t},jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit},jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(t){this.mitreLimit=t},jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(t){this._isSingleSided=t},jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided},jsts.operation.buffer.BufferBuilder=function(t){this.bufParams=t,this.edgeList=new jsts.geomgraph.EdgeList},jsts.operation.buffer.BufferBuilder.depthDelta=function(t){var e=t.getLocation(0,jsts.geomgraph.Position.LEFT),o=t.getLocation(0,jsts.geomgraph.Position.RIGHT);return e===jsts.geom.Location.INTERIOR&&o===jsts.geom.Location.EXTERIOR?1:e===jsts.geom.Location.EXTERIOR&&o===jsts.geom.Location.INTERIOR?-1:0},jsts.operation.buffer.BufferBuilder.prototype.bufParams=null,jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null,jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null,jsts.operation.buffer.BufferBuilder.prototype.geomFact=null,jsts.operation.buffer.BufferBuilder.prototype.graph=null,jsts.operation.buffer.BufferBuilder.prototype.edgeList=null,jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(t){this.workingPrecisionModel=t},jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(t){this.workingNoder=t},jsts.operation.buffer.BufferBuilder.prototype.buffer=function(t,e){var o=this.workingPrecisionModel;null===o&&(o=t.getPrecisionModel()),this.geomFact=t.getFactory();var n=new jsts.operation.buffer.OffsetCurveBuilder(o,this.bufParams),r=new jsts.operation.buffer.OffsetCurveSetBuilder(t,e,n),i=r.getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,o),this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),a=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(s,a);var l=a.getPolygons();return l.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(l)},jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new jsts.noding.MCIndexNoder,o=new jsts.algorithm.RobustLineIntersector;return o.setPrecisionModel(t),e.setSegmentIntersector(new jsts.noding.IntersectionAdder(o)),e},jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(t,e){var o=this.getNoder(e);o.computeNodes(t);for(var n=o.getNodedSubstrings(),r=n.iterator();r.hasNext();){var i=r.next(),s=i.getData(),a=new jsts.geomgraph.Edge(i.getCoordinates(),new jsts.geomgraph.Label(s));this.insertUniqueEdge(a)}},jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(t){var e=this.edgeList.findEqualEdge(t);if(null!=e){var o=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new jsts.geomgraph.Label(t.getLabel()),n.flip()),o.merge(n);var r=jsts.operation.buffer.BufferBuilder.depthDelta(n),i=e.getDepthDelta(),s=i+r;e.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(jsts.operation.buffer.BufferBuilder.depthDelta(t.getLabel()))},jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(t){for(var e=[],o=t.getNodes().iterator();o.hasNext();){var n=o.next();if(!n.isVisited()){var r=new jsts.operation.buffer.BufferSubgraph;r.create(n),e.push(r)}}var i=function(t,e){return t.compareTo(e)};return e.sort(i),e.reverse(),e},jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(t,e){for(var o=[],n=0;n<t.length;n++){var r=t[n],i=r.getRightmostCoordinate(),s=new jsts.operation.buffer.SubgraphDepthLocater(o),a=s.getDepth(i);r.computeDepth(a),r.findResultEdges(),o.push(r),e.add(r.getDirectedEdges(),r.getNodes())}},jsts.operation.buffer.BufferBuilder.convertSegStrings=function(t){for(var e=new jsts.geom.GeometryFactory,o=new javascript.util.ArrayList;t.hasNext();){var n=t.next(),r=e.createLineString(n.getCoordinates());o.add(r)}return e.buildGeometry(o)},jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){return this.geomFact.createPolygon(null,null)},jsts.noding.SegmentPointComparator=function(){},jsts.noding.SegmentPointComparator.compare=function(t,e,o){if(e.equals2D(o))return 0;var n=jsts.noding.SegmentPointComparator.relativeSign(e.x,o.x),r=jsts.noding.SegmentPointComparator.relativeSign(e.y,o.y);switch(t){case 0:return jsts.noding.SegmentPointComparator.compareValue(n,r);case 1:return jsts.noding.SegmentPointComparator.compareValue(r,n);case 2:return jsts.noding.SegmentPointComparator.compareValue(r,-n);case 3:return jsts.noding.SegmentPointComparator.compareValue(-n,r);case 4:return jsts.noding.SegmentPointComparator.compareValue(-n,-r);case 5:return jsts.noding.SegmentPointComparator.compareValue(-r,-n);case 6:return jsts.noding.SegmentPointComparator.compareValue(-r,n);case 7:return jsts.noding.SegmentPointComparator.compareValue(n,-r)}return 0},jsts.noding.SegmentPointComparator.relativeSign=function(t,e){return t<e?-1:t>e?1:0},jsts.noding.SegmentPointComparator.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0},jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var t=arguments[0]instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1],e=t.getEdge(),o=t.getCoordinate(),n=t.getDirectedCoordinate(),r=new jsts.geomgraph.Label(t.getLabel());jsts.geomgraph.EdgeEnd.call(this,e,o,n,r),this.insert(t)},jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd,jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null,jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label},jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds},jsts.operation.relate.EdgeEndBundle.prototype.insert=function(t){this.edgeEnds.push(t)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(t){for(var e=!1,o=0;o<this.edgeEnds.length;o++){this.edgeEnds[o].getLabel().isArea()&&(e=!0)}this.label=e?new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE):new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(var o=0;o<2;o++)this.computeLabelOn(o,t),e&&this.computeLabelSides(o)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(t,e){for(var o=0,n=!1,r=0;r<this.edgeEnds.length;r++){var i=this.edgeEnds[r],s=i.getLabel().getLocation(t);s==jsts.geom.Location.BOUNDARY&&o++,s==jsts.geom.Location.INTERIOR&&(n=!0)}var s=jsts.geom.Location.NONE;n&&(s=jsts.geom.Location.INTERIOR),o>0&&(s=jsts.geomgraph.GeometryGraph.determineBoundary(e,o)),this.label.setLocation(t,s)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(t){this.computeLabelSide(t,jsts.geomgraph.Position.LEFT),this.computeLabelSide(t,jsts.geomgraph.Position.RIGHT)},jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(t,e){for(var o=0;o<this.edgeEnds.length;o++){var n=this.edgeEnds[o];if(n.getLabel().isArea()){var r=n.getLabel().getLocation(t,e);if(r===jsts.geom.Location.INTERIOR)return void this.label.setLocation(t,e,jsts.geom.Location.INTERIOR);r===jsts.geom.Location.EXTERIOR&&this.label.setLocation(t,e,jsts.geom.Location.EXTERIOR)}}},jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(t){jsts.geomgraph.Edge.updateIM(this.label,t)},jsts.index.chain.MonotoneChain=function(t,e,o,n){this.pts=t,this.start=e,this.end=o,this.context=n},jsts.index.chain.MonotoneChain.prototype.pts=null,jsts.index.chain.MonotoneChain.prototype.start=null,jsts.index.chain.MonotoneChain.prototype.end=null,jsts.index.chain.MonotoneChain.prototype.env=null,jsts.index.chain.MonotoneChain.prototype.context=null,jsts.index.chain.MonotoneChain.prototype.id=null,jsts.index.chain.MonotoneChain.prototype.setId=function(t){this.id=t},jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id},jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context},jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(null==this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new jsts.geom.Envelope(t,e)}return this.env},jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start},jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end},jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){for(var t=[],e=0,o=this.start;o<=this.end;o++)t[e++]=this.pts[o];return t},jsts.index.chain.MonotoneChain.prototype.select=function(t,e){this.computeSelect2(t,this.start,this.end,e)},jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(t,e,o,n){var r=this.pts[e],i=this.pts[o];if(n.tempEnv1.init(r,i),o-e==1)return void n.select(this,e);if(t.intersects(n.tempEnv1)){var s=parseInt((e+o)/2);e<s&&this.computeSelect2(t,e,s,n),s<o&&this.computeSelect2(t,s,o,n)}},jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(t,e){if(6===arguments.length)return this.computeOverlaps2.apply(this,arguments);this.computeOverlaps2(this.start,this.end,t,t.start,t.end,e)},jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(t,e,o,n,r,i){var s=this.pts[t],a=this.pts[e],l=o.pts[n],c=o.pts[r];if(e-t==1&&r-n==1)return void i.overlap(this,t,o,n);if(i.tempEnv1.init(s,a),i.tempEnv2.init(l,c),i.tempEnv1.intersects(i.tempEnv2)){var u=parseInt((t+e)/2),g=parseInt((n+r)/2);t<u&&(n<g&&this.computeOverlaps2(t,u,o,n,g,i),g<r&&this.computeOverlaps2(t,u,o,g,r,i)),u<e&&(n<g&&this.computeOverlaps2(u,e,o,n,g,i),g<r&&this.computeOverlaps2(u,e,o,g,r,i))}},jsts.algorithm.HCoordinate=function(){this.x=0,this.y=0,this.w=1,1===arguments.length?this.initFrom1Coordinate(arguments[0]):2===arguments.length&&arguments[0]instanceof jsts.geom.Coordinate?this.initFrom2Coordinates(arguments[0],arguments[1]):2===arguments.length&&arguments[0]instanceof jsts.algorithm.HCoordinate?this.initFrom2HCoordinates(arguments[0],arguments[1]):2===arguments.length?this.initFromXY(arguments[0],arguments[1]):3===arguments.length?this.initFromXYW(arguments[0],arguments[1],arguments[2]):4===arguments.length&&this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3])},jsts.algorithm.HCoordinate.intersection=function(t,e,o,n){var r,i,s,a,l,c,u,g,h,p,d;if(r=t.y-e.y,i=e.x-t.x,s=t.x*e.y-e.x*t.y,a=o.y-n.y,l=n.x-o.x,c=o.x*n.y-n.x*o.y,u=i*c-l*s,g=a*s-r*c,h=r*l-a*i,p=u/h,d=g/h,!isFinite(p)||!isFinite(d))throw new jsts.error.NotRepresentableError;return new jsts.geom.Coordinate(p,d)},jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(t){this.x=t.x,this.y=t.y,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(t,e){this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y},jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(t,e){this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y},jsts.algorithm.HCoordinate.prototype.initFromXYW=function(t,e,o){this.x=t,this.y=e,this.w=o},jsts.algorithm.HCoordinate.prototype.initFromXY=function(t,e){this.x=t,this.y=e,this.w=1},jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(t,e,o,n){var r,i,s,a,l,c;r=t.y-e.y,i=e.x-t.x,s=t.x*e.y-e.x*t.y,a=o.y-n.y,l=n.x-o.x,c=o.x*n.y-n.x*o.y,this.x=i*c-l*s,this.y=a*s-r*c,this.w=r*l-a*i},jsts.algorithm.HCoordinate.prototype.getX=function(){var t=this.x/this.w;if(!isFinite(t))throw new jsts.error.NotRepresentableError;return t},jsts.algorithm.HCoordinate.prototype.getY=function(){var t=this.y/this.w;if(!isFinite(t))throw new jsts.error.NotRepresentableError;return t},jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var t=new jsts.geom.Coordinate;return t.x=this.getX(),t.y=this.getY(),t},function(){var t=jsts.geom.Location,e=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(o){var n=o;void 0===o||null===o?(this.matrix=[[],[],[]],this.setAll(e.FALSE)):"string"==typeof o?this.set(o):n instanceof jsts.geom.IntersectionMatrix&&(this.matrix[t.INTERIOR][t.INTERIOR]=n.matrix[t.INTERIOR][t.INTERIOR],this.matrix[t.INTERIOR][t.BOUNDARY]=n.matrix[t.INTERIOR][t.BOUNDARY],this.matrix[t.INTERIOR][t.EXTERIOR]=n.matrix[t.INTERIOR][t.EXTERIOR],this.matrix[t.BOUNDARY][t.INTERIOR]=n.matrix[t.BOUNDARY][t.INTERIOR],this.matrix[t.BOUNDARY][t.BOUNDARY]=n.matrix[t.BOUNDARY][t.BOUNDARY],this.matrix[t.BOUNDARY][t.EXTERIOR]=n.matrix[t.BOUNDARY][t.EXTERIOR],this.matrix[t.EXTERIOR][t.INTERIOR]=n.matrix[t.EXTERIOR][t.INTERIOR],this.matrix[t.EXTERIOR][t.BOUNDARY]=n.matrix[t.EXTERIOR][t.BOUNDARY],this.matrix[t.EXTERIOR][t.EXTERIOR]=n.matrix[t.EXTERIOR][t.EXTERIOR])},jsts.geom.IntersectionMatrix.prototype.matrix=null,jsts.geom.IntersectionMatrix.prototype.add=function(t){var e,o;for(e=0;e<3;e++)for(o=0;o<3;o++)this.setAtLeast(e,o,t.get(e,o))},jsts.geom.IntersectionMatrix.matches=function(t,o){return"string"==typeof t?jsts.geom.IntersectionMatrix.matches2.call(this,arguments):"*"===o||("T"===o&&(t>=0||t===e.TRUE)||("F"===o&&t===e.FALSE||("0"===o&&t===e.P||("1"===o&&t===e.L||"2"===o&&t===e.A))))},jsts.geom.IntersectionMatrix.matches2=function(t,e){return new jsts.geom.IntersectionMatrix(t).matches(e)},jsts.geom.IntersectionMatrix.prototype.set=function(t,e,o){if("string"==typeof t)return void this.set2(t);this.matrix[t][e]=o},jsts.geom.IntersectionMatrix.prototype.set2=function(t){for(var o=0;o<t.length();o++){var n=o/3,r=o%3;this.matrix[n][r]=e.toDimensionValue(t.charAt(o))}},jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(t,e,o){if(1===arguments.length)return void this.setAtLeast2(arguments[0]);this.matrix[t][e]<o&&(this.matrix[t][e]=o)},jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(t,e,o){t>=0&&e>=0&&this.setAtLeast(t,e,o)},jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(t){var e;for(e=0;e<t.length;e++){var o=parseInt(e/3),n=parseInt(e%3);this.setAtLeast(o,n,jsts.geom.Dimension.toDimensionValue(t.charAt(e)))}},jsts.geom.IntersectionMatrix.prototype.setAll=function(t){var e,o;for(e=0;e<3;e++)for(o=0;o<3;o++)this.matrix[e][o]=t},jsts.geom.IntersectionMatrix.prototype.get=function(t,e){return this.matrix[t][e]},jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[t.INTERIOR][t.INTERIOR]===e.FALSE&&this.matrix[t.INTERIOR][t.BOUNDARY]===e.FALSE&&this.matrix[t.BOUNDARY][t.INTERIOR]===e.FALSE&&this.matrix[t.BOUNDARY][t.BOUNDARY]===e.FALSE},jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return!this.isDisjoint()},jsts.geom.IntersectionMatrix.prototype.isTouches=function(o,n){return o>n?this.isTouches(n,o):(o==e.A&&n==e.A||o==e.L&&n==e.L||o==e.L&&n==e.A||o==e.P&&n==e.A||o==e.P&&n==e.L)&&(this.matrix[t.INTERIOR][t.INTERIOR]===e.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T")))},jsts.geom.IntersectionMatrix.prototype.isCrosses=function(o,n){return o==e.P&&n==e.L||o==e.P&&n==e.A||o==e.L&&n==e.A?jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T"):o==e.L&&n==e.P||o==e.A&&n==e.P||o==e.A&&n==e.L?jsts.geom.IntersectionMatrix.matches(matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"):o===e.L&&n===e.L&&0===this.matrix[t.INTERIOR][t.INTERIOR]},jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.INTERIOR][t.EXTERIOR]==e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.EXTERIOR][t.INTERIOR]==e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isCovers=function(){return(jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T"))&&this.matrix[t.EXTERIOR][t.INTERIOR]==e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]==e.FALSE},jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){return(jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[t.BOUNDARY][t.BOUNDARY],"T"))&&this.matrix[t.INTERIOR][t.EXTERIOR]===e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]===e.FALSE},jsts.geom.IntersectionMatrix.prototype.isEquals=function(o,n){return o===n&&(jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&this.matrix[t.EXTERIOR][t.INTERIOR]===e.FALSE&&this.matrix[t.INTERIOR][t.EXTERIOR]===e.FALSE&&this.matrix[t.EXTERIOR][t.BOUNDARY]===e.FALSE&&this.matrix[t.BOUNDARY][t.EXTERIOR]===e.FALSE)},jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(o,n){return o==e.P&&n===e.P||o==e.A&&n===e.A?jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"):o===e.L&&n===e.L&&(1==this.matrix[t.INTERIOR][t.INTERIOR]&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.INTERIOR][t.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[t.EXTERIOR][t.INTERIOR],"T"))},jsts.geom.IntersectionMatrix.prototype.matches=function(t){if(9!=t.length)throw new jsts.error.IllegalArgumentException("Should be length 9: "+t);for(var e=0;e<3;e++)for(var o=0;o<3;o++)if(!jsts.geom.IntersectionMatrix.matches(this.matrix[e][o],t.charAt(3*e+o)))return!1;return!0},jsts.geom.IntersectionMatrix.prototype.transpose=function(){var t=matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},jsts.geom.IntersectionMatrix.prototype.toString=function(){var t,o,n="";for(t=0;t<3;t++)for(o=0;o<3;o++)n+=e.toDimensionSymbol(this.matrix[t][o]);return n}}(),jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(t){this.subdiv=t,this.lastEdge=null,this.init()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge()},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){return this.subdiv.getEdges()[0]},jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,o=jsts.geomgraph.EdgeEndStar,n=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this)},jsts.geomgraph.DirectedEdgeStar.prototype=new o,jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar,jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null,jsts.geomgraph.DirectedEdgeStar.prototype.label=null,jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t},jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(t){for(var e=0,o=this.iterator();o.hasNext();){o.next().getEdgeRing()===t&&e++}return e},jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var o=t.get(0);if(1==e)return o;var r=t.get(e-1),i=o.getQuadrant(),s=r.getQuadrant();if(jsts.geomgraph.Quadrant.isNorthern(i)&&jsts.geomgraph.Quadrant.isNorthern(s))return o;if(!jsts.geomgraph.Quadrant.isNorthern(i)&&!jsts.geomgraph.Quadrant.isNorthern(s))return r;return 0!=o.getDy()?o:0!=r.getDy()?r:(n.shouldNeverReachHere("found two horizontal edges incident on node"),null)},jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(e){o.prototype.computeLabelling.call(this,e),this.label=new jsts.geomgraph.Label(t.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),i=r.getEdge(),s=i.getLabel(),a=0;a<2;a++){var l=s.getLocation(a);l!==t.INTERIOR&&l!==t.BOUNDARY||this.label.setLocation(a,t.INTERIOR)}},jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var o=e.next(),n=o.getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new javascript.util.ArrayList;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1,jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2,jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,o=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var i=this.resultAreaEdgeList.get(r),s=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),o){case this.SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,o=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),o=this.SCANNING_FOR_INCOMING}}if(o===this.LINKING_TO_OUTGOING){if(null===t)throw new jsts.error.TopologyError("no outgoing dirEdge found",this.getCoordinate());n.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,o=null,r=this.SCANNING_FOR_INCOMING,i=this.resultAreaEdgeList.size()-1;i>=0;i--){var s=this.resultAreaEdgeList.get(i),a=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),r){case this.SCANNING_FOR_INCOMING:if(a.getEdgeRing()!=t)continue;o=a,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;o.setNextMin(s),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(n.isTrue(null!==e,"found null for first outgoing dirEdge"),n.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),o.setNextMin(e))},jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,o=this.edgeList.size()-1;o>=0;o--){var n=this.edgeList.get(o),r=n.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=n}e.setNext(t)},jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){for(var e=t.NONE,o=this.iterator();o.hasNext();){var n=o.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=t.INTERIOR;break}if(r.isInResult()){e=t.EXTERIOR;break}}}if(e!==t.NONE)for(var i=e,o=this.iterator();o.hasNext();){var n=o.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(i===t.INTERIOR):(n.isInResult()&&(i=t.EXTERIOR),r.isInResult()&&(i=t.INTERIOR))}},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(t){if(2===arguments.length)return void this.computeDepths2.apply(this,arguments);var o=this.findIndex(t),n=(t.getLabel(),t.getDepth(e.LEFT)),r=t.getDepth(e.RIGHT),i=this.computeDepths2(o+1,this.edgeList.size(),n);if(this.computeDepths2(0,o,i)!=r)throw new jsts.error.TopologyError("depth mismatch at "+t.getCoordinate())},jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(t,o,n){for(var r=n,i=t;i<o;i++){var s=this.edgeList.get(i);s.getLabel();s.setEdgeDepths(e.RIGHT,r),r=s.getDepth(e.LEFT)}return r}}(),jsts.io.WKTReader=function(t){this.geometryFactory=t||new jsts.geom.GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jsts.io.WKTParser(this.geometryFactory)},jsts.io.WKTReader.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED&&this.reducePrecision(e),e},jsts.io.WKTReader.prototype.reducePrecision=function(t){var e,o;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,o=t.points.length;e<o;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,o=t.geometries.length;e<o;e++)this.reducePrecision(t.geometries[e])},jsts.triangulate.quadedge.QuadEdgeSubdivision=function(t,e){this.tolerance=e,this.edgeCoincidenceTolerance=e/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR,this.visitedKey=0,this.quadEdges=[],this.startingEdge,this.tolerance,this.edgeCoincidenceTolerance,this.frameEnv,this.locator=null,this.seg=new jsts.geom.LineSegment,this.triEdges=new Array(3),this.frameVertex=new Array(3),this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this)},jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1e3,jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!=e[0])throw new jsts.IllegalArgumentError("Edges do not form a triangle")};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(t){var e,o,n;e=t.getWidth(),o=t.getHeight(),n=0,n=e>o?10*e:10*o,this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((t.getMaxX()+t.getMinX())/2,t.getMaxY()+n),this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(t.getMinX()-n,t.getMinY()-n),this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(t.getMaxX()+n,t.getMinY()-n),this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var t,e,o;return t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),e),o=this.makeEdge(this.frameVertex[2],this.frameVertex[0]),jsts.triangulate.quadedge.QuadEdge.splice(e.sym(),o),jsts.triangulate.quadedge.QuadEdge.splice(o.sym(),t),t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){return arguments.length>0?this.getEdgesByFactory(arguments[0]):this.quadEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(t){this.locator=t},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(t,e){var o=jsts.triangulate.quadedge.QuadEdge.makeEdge(t,e);return this.quadEdges.push(o),o},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(t,e){var o=jsts.triangulate.quadedge.QuadEdge.connect(t,e);return this.quadEdges.push(o),o},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(t){jsts.triangulate.quadedge.QuadEdge.splice(t,t.oPrev()),jsts.triangulate.quadedge.QuadEdge.splice(t.sym(),t.sym().oPrev());var e,o,n;t.eSym=t.sym(),o=t.rot,n=t.rot.sym();var r=this.quadEdges.indexOf(t);-1!==r&&this.quadEdges.splice(r,1),r=this.quadEdges.indexOf(e),-1!==r&&this.quadEdges.splice(r,1),r=this.quadEdges.indexOf(o),-1!==r&&this.quadEdges.splice(r,1),r=this.quadEdges.indexOf(n),-1!==r&&this.quadEdges.splice(r,1),t.delete_jsts(),e.delete_jsts(),o.delete_jsts(),n.delete_jsts()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(t,e){var o,n=0,r=this.quadEdges.length;for(o=e;;){if(++n>r)throw new jsts.error.LocateFailureError(o.toLineSegment());if(t.equals(o.orig())||t.equals(o.dest()))break;if(t.rightOf(o))o=o.sym();else if(t.rightOf(o.oNext())){if(t.rightOf(o.dPrev()))break;o=o.dPrev()}else o=o.oNext()}return o},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){return 1===arguments.length?arguments[0]instanceof jsts.triangulate.quadedge.Vertex?this.locateByVertex(arguments[0]):this.locateByCoordinate(arguments[0]):this.locateByCoordinates(arguments[0],arguments[1])},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(t){return this.locator.locate(t)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(t){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(t))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinates=function(t,e){var o,n,r,o=this.locator.locate(new jsts.triangulate.quadedge.Vertex(t));if(null===o)return null;n=o,o.dest().getCoordinate().equals2D(t)&&(n=o.sym()),r=n;do{if(r.dest().getCoordinate().equals2D(e))return r;r=r.oNext()}while(r!=n);return null},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(t){var e,o,n;if(e=this.locate(t),t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;o=this.makeEdge(e.orig(),t),jsts.triangulate.quadedge.QuadEdge.splice(o,e),n=o;do{o=this.connect(e,o.sym()),e=o.oPrev()}while(e.lNext()!=n);return n},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(t){var e,o,n,r;return e=new Array(3),this.getTriangleEdges(t,e),o=new Array(3),this.getTriangleEdges(t.sym(),o),n=t.lNext().dest(),!!this.isFrameVertex(n)||(r=t.sym().lNext().dest(),!!this.isFrameVertex(r))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(t){return!!t.equals(this.frameVertex[0])||(!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2]))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(t,e){return this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.seg.distance(e)<this.edgeCoincidenceTolerance},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(t){var e,o,n,r,i,s=[];for(e=0,o=this.quadEdges.length,e;e<o;e++)n=this.quadEdges[e],r=n.orig(),!t&&this.isFrameVertex(r)||s.push(r),i=n.dest(),!t&&this.isFrameVertex(i)||s.push(i);return s},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(t){var e,o,n,r,i,s,a,l;for(e=[],o=[],n=0,r=this.quadEdges.length,n;n<r;n++)i=this.quadEdges[n],s=i.orig(),-1===o.indexOf(s)&&(o.push(s),!t&&this.isFrameVertex(s)||e.push(i)),a=i.sym(),l=a.orig(),-1===o.indexOf(l)&&(o.push(l),!t&&this.isFrameVertex(l)||e.push(a));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(t){this.visitedKey++;var e,o,n,r,i;for(e=[],o=[],o.push(this.startingEdge),n=[];o.length>0;)r=o.pop(),-1===n.indexOf(r)&&(i=r.getPrimary(),!t&&this.isFrameEdge(i)||e.push(i),o.push(r.oNext()),o.push(r.sym().oNext()),n.push(r),n.push(r.sym()));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(t,e){this.visitedKey++;var o,n,r,i;for(o=[],o.push(this.startingEdge),n=[];o.length>0;)r=o.pop(),-1===n.indexOf(r)&&null!==(i=this.fetchTriangleToVisit(r,o,e,n))&&t.visit(i)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(t,e,o,n){var r,i,s,a;r=t,i=0,s=!1;do{this.triEdges[i]=r,this.isFrameEdge(r)&&(s=!0),a=r.sym(),-1===n.indexOf(a)&&e.push(a),n.push(r),i++,r=r.lNext()}while(r!==t);return s&&!o?null:this.triEdges},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(t){var e=new jsts.triangulate.quadedge.TriangleEdgesListVisitor;return this.visitTriangles(e,t),e.getTriangleEdges()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(t){var e=new TriangleVertexListVisitor;return this.visitTriangles(e,t),e.getTriangleVertices()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(t){var e=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor;return this.visitTriangles(e,t),e.getTriangles()},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(t){var e,o,n,r,i,s;for(e=this.getPrimaryEdges(!1),o=[],n=0,r=e.length,n;n<r;n++)i=e[n],s=[],s[0]=i.orig().getCoordinate(),s[1]=i.dest().getCoordinate(),o[n]=t.createLineString(s);return t.createMultiLineString(o)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(t){var e,o,n,r,i;for(e=this.getTriangleCoordinates(!1),o=new Array(e.length),r=0,i=e.length,r;r<i;r++)n=e[r],o[r]=t.createPolygon(t.createLinearRing(n,null));return t.createGeometryCollection(o)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(e)},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(t){this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor,!0);var e,o,n,r,i;for(e=[],o=this.getVertexUniqueEdges(!1),n=0,r=o.length,n;n<r;n++)i=o[n],e.push(this.getVoronoiCellPolygon(i,t));return e},jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(t,e){var o,n,r,i;o=[],startQE=t;do{n=t.rot.orig().getCoordinate(),o.push(n),t=t.oPrev()}while(t!==startQE);return r=new jsts.geom.CoordinateList([],!1),r.add(o,!1),r.closeRing(),r.size()<4&&r.add(r.get(r.size()-1),!0),i=e.createPolygon(e.createLinearRing(r.toArray()),null),startQE.orig(),i},jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){},jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(t){var e,o,n,r,i,s;for(e=t[0].orig().getCoordinate(),o=t[1].orig().getCoordinate(),n=t[2].orig().getCoordinate(),r=jsts.geom.Triangle.circumcentre(e,o,n),i=new jsts.triangulate.quadedge.Vertex(r),s=0;s<3;s++)t[s].rot.setOrig(i)},jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(t){var e=t.concat();this.triList.push(e)},jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList},jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[]},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(t){var e=[];e.push(trieEdges[0].orig()),e.push(trieEdges[1].orig()),e.push(trieEdges[2].orig()),this.triList.push(e)},jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList},jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],!1),this.triCoords=[]},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(t){this.coordList=new jsts.geom.CoordinateList([],!1);var e,o,n=0;for(n;n<3;n++)e=t[n].orig(),this.coordList.add(e.getCoordinate());if(this.coordList.size()>0){if(this.coordList.closeRing(),o=this.coordList.toArray(),4!==o.length)return;this.triCoords.push(o)}},jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords},jsts.index.kdtree.KdTree=function(t){var e=0;void 0!==t&&(e=t),this.root=null,this.last=null,this.numberOfNodes=0,this.tolerance=e},jsts.index.kdtree.KdTree.prototype.insert=function(){return 1===arguments.length?this.insertCoordinate.apply(this,arguments[0]):this.insertWithData.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(t){return this.insertWithData(t,null)},jsts.index.kdtree.KdTree.prototype.insertWithData=function(t,e){if(null===this.root)return this.root=new jsts.index.kdtree.KdNode(t,e),this.root;for(var o=this.root,n=this.root,r=!0,i=!0;o!==last;){if(i=r?t.x<o.getX():t.y<o.getY(),n=o,null!==(o=i?o.getLeft():o.getRight())){if(t.distance(o.getCoordinate())<=this.tolerance)return o.increment(),o}r=!r}this.numberOfNodes=numberOfNodes+1;var s=new jsts.index.kdtree.KdNode(t,e);return s.setLeft(this.last),s.setRight(this.last),i?n.setLeft(s):n.setRight(s),s},jsts.index.kdtree.KdTree.prototype.queryNode=function(t,e,o,n,r){if(t!==e){var i,s,a;n?(i=o.getMinX(),s=o.getMaxX(),a=t.getX()):(i=o.getMinY(),s=o.getMaxY(),a=t.getY());var l=i<a,c=a<=s;l&&this.queryNode(t.getLeft(),e,o,!n,r),o.contains(t.getCoordinate())&&r.add(t),c&&this.queryNode(t.getRight(),e,o,!n,r)}},jsts.index.kdtree.KdTree.prototype.query=function(){return 1===arguments.length?this.queryByEnvelope.apply(this,arguments[0]):this.queryWithArray.apply(this,arguments[0],arguments[1])},jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(t){var e=[];return this.queryNode(this.root,this.last,t,!0,e),e},jsts.index.kdtree.KdTree.prototype.queryWithArray=function(t,e){this.queryNode(this.root,this.last,t,!0,e)},jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments),this._relate=new jsts.operation.relate.RelateComputer(this.arg)},jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation,jsts.operation.relate.RelateOp.relate=function(t,e,o){return new jsts.operation.relate.RelateOp(t,e,o).getIntersectionMatrix()},jsts.operation.relate.RelateOp.prototype._relate=null,jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM()},jsts.geom.Triangle=function(t,e,o){this.p0=t,this.p1=e,this.p2=o},jsts.geom.Triangle.isAcute=function(t,e,o){return!!jsts.algorithm.Angle.isAcute(t,e,o)&&(!!jsts.algorithm.Angle.isAcute(e,o,t)&&!!jsts.algorithm.Angle.isAcute(o,t,e))},jsts.geom.Triangle.perpendicularBisector=function(t,e){var o,n,r,i;return o=e.x-t.x,n=e.y-t.y,r=new jsts.algorithm.HCoordinate(t.x+o/2,t.y+n/2,1),i=new jsts.algorithm.HCoordinate(t.x-n+o/2,t.y+o+n/2,1),new jsts.algorithm.HCoordinate(r,i)},jsts.geom.Triangle.circumcentre=function(t,e,o){var n,r,i,s,a,l,c,u,g,h,p;return n=o.x,r=o.y,i=t.x-n,s=t.y-r,a=e.x-n,l=e.y-r,c=2*jsts.geom.Triangle.det(i,s,a,l),u=jsts.geom.Triangle.det(s,i*i+s*s,l,a*a+l*l),g=jsts.geom.Triangle.det(i,i*i+s*s,a,a*a+l*l),h=n-u/c,p=r+g/c,new jsts.geom.Coordinate(h,p)},jsts.geom.Triangle.det=function(t,e,o,n){return t*n-e*o},jsts.geom.Triangle.inCentre=function(t,e,o){var n,r,i,s,a,l;return n=e.distance(o),r=t.distance(o),i=t.distance(e),s=n+r+i,a=(n*t.x+r*e.x+i*o.x)/s,l=(n*t.y+r*e.y+i*o.y)/s,new jsts.geom.Coordinate(a,l)},jsts.geom.Triangle.centroid=function(t,e,o){var n,r;return n=(t.x+e.x+o.x)/3,r=(t.y+e.y+o.y)/3,new jsts.geom.Coordinate(n,r)},jsts.geom.Triangle.longestSideLength=function(t,e,o){var n,r,i,s;return n=t.distance(e),r=e.distance(o),i=o.distance(t),s=n,r>s&&(s=r),i>s&&(s=i),s},jsts.geom.Triangle.angleBisector=function(t,e,o){var n,r,i,s,a;return n=e.distance(t),r=e.distance(o),i=n/(n+r),s=o.x-t.x,a=o.y-t.y,new jsts.geom.Coordinate(t.x+i*s,t.y+i*a)},jsts.geom.Triangle.area=function(t,e,o){return Math.abs(((o.x-t.x)*(e.y-t.y)-(e.x-t.x)*(o.y-t.y))/2)},jsts.geom.Triangle.signedArea=function(t,e,o){return((o.x-t.x)*(e.y-t.y)-(e.x-t.x)*(o.y-t.y))/2},jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2)},jsts.algorithm.CentroidArea=function(){this.basePt=null,this.triangleCent3=new jsts.geom.Coordinate,this.centSum=new jsts.geom.Coordinate,this.cg3=new jsts.geom.Coordinate},jsts.algorithm.CentroidArea.prototype.basePt=null,jsts.algorithm.CentroidArea.prototype.triangleCent3=null,jsts.algorithm.CentroidArea.prototype.areasum2=0,jsts.algorithm.CentroidArea.prototype.cg3=null,jsts.algorithm.CentroidArea.prototype.centSum=null,jsts.algorithm.CentroidArea.prototype.totalLength=0,jsts.algorithm.CentroidArea.prototype.add=function(t){if(t instanceof jsts.geom.Polygon){var e=t;this.setBasePoint(e.getExteriorRing().getCoordinateN(0)),this.add3(e)}else if(t instanceof jsts.geom.GeometryCollection||t instanceof jsts.geom.MultiPolygon)for(var o=t,n=0;n<o.getNumGeometries();n++)this.add(o.getGeometryN(n));else t instanceof Array&&this.add2(t)},jsts.algorithm.CentroidArea.prototype.add2=function(t){this.setBasePoint(t[0]),this.addShell(t)},jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var t=new jsts.geom.Coordinate;return Math.abs(this.areasum2)>0?(t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2):(t.x=this.centSum.x/this.totalLength,t.y=this.centSum.y/this.totalLength),t},jsts.algorithm.CentroidArea.prototype.setBasePoint=function(t){null==this.basePt&&(this.basePt=t)},jsts.algorithm.CentroidArea.prototype.add3=function(t){this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())},jsts.algorithm.CentroidArea.prototype.addShell=function(t){for(var e=!jsts.algorithm.CGAlgorithms.isCCW(t),o=0;o<t.length-1;o++)this.addTriangle(this.basePt,t[o],t[o+1],e);this.addLinearSegments(t)},jsts.algorithm.CentroidArea.prototype.addHole=function(t){for(var e=jsts.algorithm.CGAlgorithms.isCCW(t),o=0;o<t.length-1;o++)this.addTriangle(this.basePt,t[o],t[o+1],e);this.addLinearSegments(t)},jsts.algorithm.CentroidArea.prototype.addTriangle=function(t,e,o,n){var r=n?1:-1;jsts.algorithm.CentroidArea.centroid3(t,e,o,this.triangleCent3);var i=jsts.algorithm.CentroidArea.area2(t,e,o);this.cg3.x+=r*i*this.triangleCent3.x,this.cg3.y+=r*i*this.triangleCent3.y,this.areasum2+=r*i},jsts.algorithm.CentroidArea.centroid3=function(t,e,o,n){n.x=t.x+e.x+o.x,n.y=t.y+e.y+o.y},jsts.algorithm.CentroidArea.area2=function(t,e,o){return(e.x-t.x)*(o.y-t.y)-(o.x-t.x)*(e.y-t.y)},jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(t){for(var e=0;e<t.length-1;e++){var o=t[e].distance(t[e+1]);this.totalLength+=o;var n=(t[e].x+t[e+1].x)/2;this.centSum.x+=o*n;var r=(t[e].y+t[e+1].y)/2;this.centSum.y+=o*r}},jsts.algorithm.CentralEndpointIntersector=function(t,e,o,n){this.pts=[t,e,o,n],this.compute()},jsts.algorithm.CentralEndpointIntersector.getIntersection=function(t,e,o,n){return new jsts.algorithm.CentralEndpointIntersector(t,e,o,n).getIntersection()},jsts.algorithm.CentralEndpointIntersector.prototype.pts=null,jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null,jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var t=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(t,this.pts)},jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt},jsts.algorithm.CentralEndpointIntersector.average=function(t){var e,o=new jsts.geom.Coordinate,n=t.length;for(e=0;e<n;e++)o.x+=t[e].x,o.y+=t[e].y;return n>0&&(o.x/=n,o.y/=n),o},jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(t,e){var o,n,r=Number.MAX_VALUE,i=null;for(o=0;o<e.length;o++)(n=t.distance(e[o]))<r&&(r=n,i=e[o]);return i},function(){var t=javascript.util.ArrayList,e=jsts.geom.GeometryComponentFilter,o=jsts.geom.LineString,n=jsts.operation.polygonize.EdgeRing,r=jsts.operation.polygonize.PolygonizeGraph,i=function(){var n=this,r=function(){};r.prototype=new e,r.prototype.filter=function(t){t instanceof o&&n.add(t)},this.lineStringAdder=new r,this.dangles=new t,this.cutEdges=new t,this.invalidRingLines=new t};i.prototype.lineStringAdder=null,i.prototype.graph=null,i.prototype.dangles=null,i.prototype.cutEdges=null,i.prototype.invalidRingLines=null,i.prototype.holeList=null,i.prototype.shellList=null,i.prototype.polyList=null,i.prototype.add=function(t){if(t instanceof jsts.geom.LineString)return this.add3(t);if(t instanceof jsts.geom.Geometry)return this.add2(t);for(var e=t.iterator();e.hasNext();){var o=e.next();this.add2(o)}},i.prototype.add2=function(t){t.apply(this.lineStringAdder)},i.prototype.add3=function(t){null==this.graph&&(this.graph=new r(t.getFactory())),this.graph.addEdge(t)},i.prototype.getPolygons=function(){return this.polygonize(),this.polyList},i.prototype.getDangles=function(){return this.polygonize(),this.dangles},i.prototype.getCutEdges=function(){return this.polygonize(),this.cutEdges},i.prototype.getInvalidRingLines=function(){return this.polygonize(),this.invalidRingLines},i.prototype.polygonize=function(){if(null==this.polyList&&(this.polyList=new t,null!=this.graph)){this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var e=this.graph.getEdgeRings(),o=new t;this.invalidRingLines=new t,this.findValidRings(e,o,this.invalidRingLines),this.findShellsAndHoles(o),i.assignHolesToShells(this.holeList,this.shellList),this.polyList=new t;for(var n=this.shellList.iterator();n.hasNext();){var r=n.next();this.polyList.add(r.getPolygon())}}},i.prototype.findValidRings=function(t,e,o){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isValid()?e.add(r):o.add(r.getLineString())}},i.prototype.findShellsAndHoles=function(e){this.holeList=new t,this.shellList=new t;for(var o=e.iterator();o.hasNext();){var n=o.next();n.isHole()?this.holeList.add(n):this.shellList.add(n)}},i.assignHolesToShells=function(t,e){for(var o=t.iterator();o.hasNext();){var n=o.next();i.assignHoleToShell(n,e)}},i.assignHoleToShell=function(t,e){var o=n.findEdgeRingContaining(t,e);null!=o&&o.addHole(t.getRing())},jsts.operation.polygonize.Polygonizer=i}(),function(){var t=jsts.geom.Location,e=jsts.geomgraph.Position,o=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(t,e,o){jsts.geomgraph.PlanarGraph.call(this),this.lineEdgeMap=new javascript.util.HashMap,this.ptLocator=new jsts.algorithm.PointLocator,this.argIndex=t,this.parentGeom=e,this.boundaryNodeRule=o||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,null!==e&&this.add(e)},jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph,jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph,jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleEdgeSetIntersector},jsts.geomgraph.GeometryGraph.determineBoundary=function(e,o){return e.isInBoundary(o)?t.BOUNDARY:t.INTERIOR},jsts.geomgraph.GeometryGraph.prototype.parentGeom=null,jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null,jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=!0,jsts.geomgraph.GeometryGraph.prototype.argIndex=null,jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null,jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=!1,jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null,jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null,jsts.geomgraph.GeometryGraph.prototype.ptLocator=null,jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule},jsts.geomgraph.GeometryGraph.prototype.findEdge=function(t){return this.lineEdgeMap.get(t)},jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(t){for(var e=this.edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},jsts.geomgraph.GeometryGraph.prototype.add=function(t){if(!t.isEmpty())if(t instanceof jsts.geom.MultiPolygon&&(this.useBoundaryDeterminationRule=!1),t instanceof jsts.geom.Polygon)this.addPolygon(t);else if(t instanceof jsts.geom.LineString)this.addLineString(t);else if(t instanceof jsts.geom.Point)this.addPoint(t);else if(t instanceof jsts.geom.MultiPoint)this.addCollection(t);else if(t instanceof jsts.geom.MultiLineString)this.addCollection(t);else if(t instanceof jsts.geom.MultiPolygon)this.addCollection(t);else{if(!(t instanceof jsts.geom.GeometryCollection))throw new jsts.error.IllegalArgumentError("Geometry type not supported.");this.addCollection(t)}},jsts.geomgraph.GeometryGraph.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var o=t.getGeometryN(e);this.add(o)}},jsts.geomgraph.GeometryGraph.prototype.addEdge=function(e){this.insertEdge(e);var o=e.getCoordinates();this.insertPoint(this.argIndex,o[0],t.BOUNDARY),this.insertPoint(this.argIndex,o[o.length-1],t.BOUNDARY)},jsts.geomgraph.GeometryGraph.prototype.addPoint=function(e){var o=e.getCoordinate();this.insertPoint(this.argIndex,o,t.INTERIOR)},jsts.geomgraph.GeometryGraph.prototype.addLineString=function(e){var n=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(n.length<2)return this.hasTooFewPoints=!0,void(this.invalidPoint=coords[0]);var r=new jsts.geomgraph.Edge(n,new jsts.geomgraph.Label(this.argIndex,t.INTERIOR));this.lineEdgeMap.put(e,r),this.insertEdge(r),o.isTrue(n.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,n[0]),this.insertBoundaryPoint(this.argIndex,n[n.length-1])},jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(e,o,n){if(!e.isEmpty()){var r=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(r.length<4)return this.hasTooFewPoints=!0,void(this.invalidPoint=r[0]);var i=o,s=n;jsts.algorithm.CGAlgorithms.isCCW(r)&&(i=n,s=o);var a=new jsts.geomgraph.Edge(r,new jsts.geomgraph.Label(this.argIndex,t.BOUNDARY,i,s));this.lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this.argIndex,r[0],t.BOUNDARY)}},jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),t.EXTERIOR,t.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var n=e.getInteriorRingN(o);this.addPolygonRing(n,t.INTERIOR,t.EXTERIOR)}},jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(t,e,o){var n=new jsts.geomgraph.index.SegmentIntersector(e,o,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,n),n},jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(t,e){var o=new jsts.geomgraph.index.SegmentIntersector(t,!0,!1),n=this.createEdgeSetIntersector();return!e&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)?n.computeIntersections(this.edges,o,!1):n.computeIntersections(this.edges,o,!0),this.addSelfIntersectionNodes(this.argIndex),o},jsts.geomgraph.GeometryGraph.prototype.insertPoint=function(t,e,o){var n=this.nodes.addNode(e),r=n.getLabel();null==r?n.label=new jsts.geomgraph.Label(t,o):r.setLocation(t,o)},jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(o,n){var r=this.nodes.addNode(n),i=r.getLabel(),s=1,a=t.NONE;null!==i&&(a=i.getLocation(o,e.ON)),a===t.BOUNDARY&&s++;var l=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,s);i.setLocation(o,l)},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(t){for(var e=this.edges.iterator();e.hasNext();)for(var o=e.next(),n=o.getLabel().getLocation(t),r=o.eiList.iterator();r.hasNext();){var i=r.next();this.addSelfIntersectionNode(t,i.coord,n)}},jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(e,o,n){this.isBoundaryNode(e,o)||(n===t.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(e,o):this.insertPoint(e,o,n))},jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint}}(),jsts.operation.buffer.OffsetSegmentString=function(){this.ptList=[]},jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null,jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null,jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0,jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(t){this.precisionModel=t},jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(t){this.minimimVertexDistance=t},jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(t){var e=new jsts.geom.Coordinate(t);this.precisionModel.makePrecise(e),this.isRedundant(e)||this.ptList.push(e)},jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(t,e){if(e)for(var o=0;o<t.length;o++)this.addPt(t[o]);else for(var o=t.length-1;o>=0;o--)this.addPt(t[o])},jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(t){if(this.ptList.length<1)return!1;var e=this.ptList[this.ptList.length-1];return t.distance(e)<this.minimimVertexDistance},jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(!(this.ptList.length<1)){var t=new jsts.geom.Coordinate(this.ptList[0]),e=this.ptList[this.ptList.length-1];this.ptList.length>=2&&this.ptList[this.ptList.length-2],t.equals(e)||this.ptList.push(t)}},jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){},jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList},function(){var t=javascript.util.ArrayList,e=javascript.util.TreeSet,o=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new e,this.list=new t},jsts.util.UniqueCoordinateArrayFilter.prototype=new o,jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null,jsts.util.UniqueCoordinateArrayFilter.prototype.list=null,jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray()},jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))}}(),function(){var t=jsts.algorithm.CGAlgorithms,e=jsts.util.UniqueCoordinateArrayFilter,o=jsts.util.Assert,n=javascript.util.Stack,r=javascript.util.ArrayList,i=javascript.util.Arrays,s=function(t){this.origin=t};s.prototype.origin=null,s.prototype.compare=function(t,e){var o=t,n=e;return s.polarCompare(this.origin,o,n)},s.polarCompare=function(e,o,n){var r=o.x-e.x,i=o.y-e.y,s=n.x-e.x,a=n.y-e.y,l=t.computeOrientation(e,o,n);if(l==t.COUNTERCLOCKWISE)return 1;if(l==t.CLOCKWISE)return-1;var c=r*r+i*i,u=s*s+a*a;return c<u?-1:c>u?1:0},jsts.algorithm.ConvexHull=function(){if(1===arguments.length){var t=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(t),this.geomFactory=t.getFactory()}else this.pts=arguments[0],this.geomFactory=arguments[1]},jsts.algorithm.ConvexHull.prototype.geomFactory=null,jsts.algorithm.ConvexHull.prototype.inputPts=null,jsts.algorithm.ConvexHull.extractCoordinates=function(t){var o=new e;return t.apply(o),o.getCoordinates()},jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(0==this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1==this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2==this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),o=this.grahamScan(e),n=o.toArray();return this.lineOrPolygon(n)},jsts.algorithm.ConvexHull.prototype.reduce=function(e){var o=this.computeOctRing(e);if(null==o)return this.inputPts;for(var n=new javascript.util.TreeSet,r=0;r<o.length;r++)n.add(o[r]);for(var r=0;r<e.length;r++)t.isPointInRing(e[r],o)||n.add(e[r]);var i=n.toArray();return i.length<3?this.padArray3(i):i},jsts.algorithm.ConvexHull.prototype.padArray3=function(t){for(var e=[],o=0;o<e.length;o++)o<t.length?e[o]=t[o]:e[o]=t[0];return e},jsts.algorithm.ConvexHull.prototype.preSort=function(t){for(var e,o=1;o<t.length;o++)(t[o].y<t[0].y||t[o].y==t[0].y&&t[o].x<t[0].x)&&(e=t[0],t[0]=t[o],t[o]=e);return i.sort(t,1,t.length,new s(t[0])),t},jsts.algorithm.ConvexHull.prototype.grahamScan=function(e){var o,r=new n;o=r.push(e[0]),o=r.push(e[1]),o=r.push(e[2]);for(var i=3;i<e.length;i++){for(o=r.pop();!r.empty()&&t.computeOrientation(r.peek(),o,e[i])>0;)o=r.pop();o=r.push(o),o=r.push(e[i])}return o=r.push(e[0]),r},jsts.algorithm.ConvexHull.prototype.isBetween=function(e,o,n){if(0!==t.computeOrientation(e,o,n))return!1;if(e.x!=n.x){if(e.x<=o.x&&o.x<=n.x)return!0;if(n.x<=o.x&&o.x<=e.x)return!0}if(e.y!=n.y){if(e.y<=o.y&&o.y<=n.y)return!0;if(n.y<=o.y&&o.y<=e.y)return!0}return!1},jsts.algorithm.ConvexHull.prototype.computeOctRing=function(t){var e=this.computeOctPts(t),o=new jsts.geom.CoordinateList;return o.add(e,!1),o.size()<3?null:(o.closeRing(),o.toCoordinateArray())},jsts.algorithm.ConvexHull.prototype.computeOctPts=function(t){for(var e=[],o=0;o<8;o++)e[o]=t[0];for(var n=1;n<t.length;n++)t[n].x<e[0].x&&(e[0]=t[n]),t[n].x-t[n].y<e[1].x-e[1].y&&(e[1]=t[n]),t[n].y>e[2].y&&(e[2]=t[n]),t[n].x+t[n].y>e[3].x+e[3].y&&(e[3]=t[n]),t[n].x>e[4].x&&(e[4]=t[n]),t[n].x-t[n].y>e[5].x-e[5].y&&(e[5]=t[n]),t[n].y<e[6].y&&(e[6]=t[n]),t[n].x+t[n].y<e[7].x+e[7].y&&(e[7]=t[n]);return e},jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(t){if(t=this.cleanRing(t),3==t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},jsts.algorithm.ConvexHull.prototype.cleanRing=function(t){o.equals(t[0],t[t.length-1]);for(var e=new r,n=null,i=0;i<=t.length-2;i++){var s=t[i],a=t[i+1];s.equals(a)||(null!=n&&this.isBetween(n,s,a)||(e.add(s),n=s))}e.add(t[t.length-1]);var l=[];return e.toArray(l)}}(),function(){javascript.util.ArrayList;jsts.geomgraph.index.SegmentIntersector=function(t,e,o){this.li=t,this.includeProper=e,this.recordIsolated=o},jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=!1,jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=!1,jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null,jsts.geomgraph.index.SegmentIntersector.prototype.li=null,jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null,jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null,jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null,jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0,jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0,jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null,jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(t,e){this.bdyNodes=[],this.bdyNodes[0]=t,this.bdyNodes[1]=e},jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint},jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper},jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior},jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(t,e,o,n){if(t===o&&1===this.li.getIntersectionNum()){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(t,e,o,n){if(t!==o||e!==n){this.numTests++;var r=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=o.getCoordinates()[n],a=o.getCoordinates()[n+1];this.li.computeIntersection(r,i,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),o.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,o,n)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),o.addIntersections(this.li,n,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).clone(),this.hasProper=!0,this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))}},jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(t,e){if(null===e)return!1;if(e instanceof Array)return!!this.isBoundaryPoint(t,e[0])||!!this.isBoundaryPoint(t,e[1]);for(var o=e.iterator();o.hasNext();){var n=o.next(),r=n.getCoordinate();if(t.isIntersection(r))return!0}return!1}}()},function(t,e,o){/**
 * k-d Tree JavaScript - V 1.0
 *
 * https://github.com/ubilabs/kd-tree-javascript
 *
 * @author Mircea Pricop <pricop@ubilabs.net>, 2012
 * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
 * @author Ubilabs http://ubilabs.net, 2012
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
!function(){function t(t,e,o){this.obj=t,this.left=null,this.right=null,this.parent=o,this.dimension=e}function o(e,o,r){function i(e,o,n){var s,a,l=o%r.length;return 0===e.length?null:1===e.length?new t(e[0],l,n):(e.sort(function(t,e){return t[r[l]]-e[r[l]]}),s=Math.floor(e.length/2),a=new t(e[s],l,n),a.left=i(e.slice(0,s),o+1,a),a.right=i(e.slice(s+1),o+1,a),a)}var s=this,a=0;Array.isArray(e)?this.root=i(e,0,null):function(t){function e(t){t.left&&(t.left.parent=t,e(t.left)),t.right&&(t.right.parent=t,e(t.right))}s.root=t,e(s.root)}(e),this.toJSON=function(e){e||(e=this.root);var o=new t(e.obj,e.dimension,null);return e.left&&(o.left=s.toJSON(e.left)),e.right&&(o.right=s.toJSON(e.right)),o},this.insert=function(e){function o(t,n){if(null===t)return n;var i=r[t.dimension];return e[i]<t.obj[i]?o(t.left,t):o(t.right,t)}a++;var n,i,s=o(this.root,null);if(null===s)return void(this.root=new t(e,0,null));n=new t(e,(s.dimension+1)%r.length,s),i=r[s.dimension],e[i]<s.obj[i]?s.left=n:s.right=n},this.remove=function(t){function e(o){if(null===o)return null;if(o.obj===t)return o;var n=r[o.dimension];return t[n]<o.obj[n]?e(o.left,o):e(o.right,o)}function o(t){function e(t,o){var n,i,s,a,l;return null===t?null:(n=r[o],t.dimension===o?null!==t.right?e(t.right,o):t:(i=t.obj[n],s=e(t.left,o),a=e(t.right,o),l=t,null!==s&&s.obj[n]>i&&(l=s),null!==a&&a.obj[n]>l.obj[n]&&(l=a),l))}function n(t,e){var o,i,s,a,l;return null===t?null:(o=r[e],t.dimension===e?null!==t.left?n(t.left,e):t:(i=t.obj[o],s=n(t.left,e),a=n(t.right,e),l=t,null!==s&&s.obj[o]<i&&(l=s),null!==a&&a.obj[o]<l.obj[o]&&(l=a),l))}a--;var i,l,c;if(null===t.left&&null===t.right)return null===t.parent?void(s.root=null):(c=r[t.parent.dimension],void(t.obj[c]<t.parent.obj[c]?t.parent.left=null:t.parent.right=null));i=null!==t.left?e(t.left,t.dimension):n(t.right,t.dimension),l=i.obj,o(i),t.obj=l}var n;null!==(n=e(s.root))&&o(n)},this.size=function(){return a},this.nearest=function(t,e,i){function a(n){function i(t,o){u.push([t,o]),u.size()>e&&u.pop()}var s,l,c,g,h=r[n.dimension],p=o(t,n.obj),d={};for(g=0;g<r.length;g+=1)g===n.dimension?d[r[g]]=t[r[g]]:d[r[g]]=n.obj[r[g]];if(l=o(d,n.obj),null===n.right&&null===n.left)return void((u.size()<e||p<u.peek()[1])&&i(n,p));s=null===n.right?n.left:null===n.left?n.right:t[h]<n.obj[h]?n.left:n.right,a(s),(u.size()<e||p<u.peek()[1])&&i(n,p),(u.size()<e||Math.abs(l)<u.peek()[1])&&null!==(c=s===n.left?n.right:n.left)&&a(c)}var l,c,u;if(u=new n(function(t){return-t[1]}),i)for(l=0;l<e;l+=1)u.push([null,i]);if(null==s.root)return null;for(a(s.root),c=[],l=0;l<e;l+=1)u.content[l][0]&&c.push([u.content[l][0].obj,u.content[l][1]]);return c},this.balanceFactor=function(){function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}function e(t){return null===t?0:e(t.left)+e(t.right)+1}return t(s.root)/(Math.log(e(s.root))/Math.log(2))}}function n(t){this.content=[],this.scoreFunction=t}n.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,o=0;o<e;o++)if(this.content[o]==t){var n=this.content.pop();return void(o!=e-1&&(this.content[o]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.bubbleUp(o):this.sinkDown(o)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var o=Math.floor((t+1)/2)-1,n=this.content[o];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[o]=e,this.content[t]=n,t=o}},sinkDown:function(t){for(var e=this.content.length,o=this.content[t],n=this.scoreFunction(o);;){var r=2*(t+1),i=r-1,s=null;if(i<e){var a=this.content[i],l=this.scoreFunction(a);l<n&&(s=i)}if(r<e){var c=this.content[r];this.scoreFunction(c)<(null==s?n:l)&&(s=r)}if(null==s)break;this.content[t]=this.content[s],this.content[s]=o,t=s}}},this.kdTree=o,e.kdTree=o,e.BinaryHeap=n}()},function(module,exports,__webpack_require__){"use strict";(function(global){var numeric=exports;void 0!==global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(t,e){var o,n,r,i;for(void 0===e&&(e=15),r=.5,o=new Date;;){for(r*=2,i=r;i>3;i-=4)t(),t(),t(),t();for(;i>0;)t(),i--;if((n=new Date)-o>e)break}for(i=r;i>3;i-=4)t(),t(),t(),t();for(;i>0;)t(),i--;return n=new Date,1e3*(3*r-1)/(n-o)},numeric._myIndexOf=function(t){var e,o=this.length;for(e=0;e<o;++e)if(this[e]===t)return e;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(t){function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var o=Math.floor(Math.log(t)/Math.log(10)),n=t/Math.pow(10,o),r=n.toPrecision(numeric.precision);return 10===parseFloat(r)&&(o++,n=1,r=n.toPrecision(numeric.precision)),parseFloat(r).toString()+"e"+o.toString()}return"Infinity"}function o(t){var r;if(void 0===t)return n.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof t)return n.push('"'+t+'"'),!1;if("boolean"==typeof t)return n.push(t.toString()),!1;if("number"==typeof t){var i=e(t),s=t.toPrecision(numeric.precision),a=parseFloat(t.toString()).toString(),l=[i,s,a,parseFloat(s).toString(),parseFloat(a).toString()];for(r=1;r<l.length;r++)l[r].length<i.length&&(i=l[r]);return n.push(Array(numeric.precision+8-i.length).join(" ")+i),!1}if(null===t)return n.push("null"),!1;if("function"==typeof t){n.push(t.toString());var c=!1;for(r in t)t.hasOwnProperty(r)&&(c?n.push(",\n"):n.push("\n{"),c=!0,n.push(r),n.push(": \n"),o(t[r]));return c&&n.push("}\n"),!0}if(t instanceof Array){if(t.length>numeric.largeArray)return n.push("...Large Array..."),!0;var c=!1;for(n.push("["),r=0;r<t.length;r++)r>0&&(n.push(","),c&&n.push("\n ")),c=o(t[r]);return n.push("]"),!0}n.push("{");var c=!1;for(r in t)t.hasOwnProperty(r)&&(c&&n.push(",\n"),c=!0,n.push(r),n.push(": \n"),o(t[r]));return n.push("}"),!0}var n=[];return o(t),n.join("")},numeric.parseDate=function(t){function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(t instanceof Array){var o,n=[];for(o=0;o<t.length;o++)n[o]=e(t[o]);return n}throw new Error("parseDate: parameter must be arrays of strings")}return e(t)},numeric.parseFloat=function(t){function e(t){if("string"==typeof t)return parseFloat(t);if(t instanceof Array){var o,n=[];for(o=0;o<t.length;o++)n[o]=e(t[o]);return n}throw new Error("parseFloat: parameter must be arrays of strings")}return e(t)},numeric.parseCSV=function(t){var e,o,n=t.split("\n"),r=[],i=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,a=0;for(o=0;o<n.length;o++){var l,c=(n[o]+",").match(i);if(c.length>0){for(r[a]=[],e=0;e<c.length;e++)l=function(t){return t.substr(0,t.length-1)}(c[e]),s.test(l)?r[a][e]=parseFloat(l):r[a][e]=l;a++}}return r},numeric.toCSV=function(t){var e,o,n,r,i,s=numeric.dim(t);for(n=s[0],s[1],i=[],e=0;e<n;e++){for(r=[],o=0;o<n;o++)r[o]=t[e][o].toString();i[e]=r.join(", ")}return i.join("\n")+"\n"},numeric.getURL=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e},numeric.imageURL=function(t){function e(t,e,o){void 0===e&&(e=0),void 0===o&&(o=t.length);var n,r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],i=-1,s=0;t.length;for(n=e;n<o;n++)s=255&(i^t[n]),i=i>>>8^r[s];return-1^i}var o,n,r,i,s,a,l,c,u,g,h=t[0].length,p=t[0][0].length,d=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,p>>24&255,p>>16&255,p>>8&255,255&p,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(g=e(d,12,29),d[29]=g>>24&255,d[30]=g>>16&255,d[31]=g>>8&255,d[32]=255&g,o=1,n=0,l=0;l<h;l++){for(l<h-1?d.push(0):d.push(1),s=3*p+1+(0===l)&255,a=3*p+1+(0===l)>>8&255,d.push(s),d.push(a),d.push(255&~s),d.push(255&~a),0===l&&d.push(0),c=0;c<p;c++)for(r=0;r<3;r++)s=t[r][l][c],s=s>255?255:s<0?0:Math.round(s),o=(o+s)%65521,n=(n+o)%65521,d.push(s);d.push(0)}return u=(n<<16)+o,d.push(u>>24&255),d.push(u>>16&255),d.push(u>>8&255),d.push(255&u),i=d.length-41,d[33]=i>>24&255,d[34]=i>>16&255,d[35]=i>>8&255,d[36]=255&i,g=e(d,37),d.push(g>>24&255),d.push(g>>16&255),d.push(g>>8&255),d.push(255&g),d.push(0),d.push(0),d.push(0),d.push(0),d.push(73),d.push(69),d.push(78),d.push(68),d.push(174),d.push(66),d.push(96),d.push(130),"data:image/png;base64,"+function(t){var e,o,n,r,i,s,a,l,c=t.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g="";for(e=0;e<c;e+=3)o=t[e],n=t[e+1],r=t[e+2],i=o>>2,s=((3&o)<<4)+(n>>4),a=((15&n)<<2)+(r>>6),l=63&r,e+1>=c?a=l=64:e+2>=c&&(l=64),g+=u.charAt(i)+u.charAt(s)+u.charAt(a)+u.charAt(l);return g}(d)},numeric._dim=function(t){for(var e=[];"object"==typeof t;)e.push(t.length),t=t[0];return e},numeric.dim=function(t){var e,o;return"object"==typeof t?(e=t[0],"object"==typeof e?(o=e[0],"object"==typeof o?numeric._dim(t):[t.length,e.length]):[t.length]):[]},numeric.mapreduce=function(t,e){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+e+';\nif(typeof x === "number") { var xi = x; '+t+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+t+";\n    xi = x[i-1];\n    "+t+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+t+"\n}\nreturn accum;")},numeric.mapreduce2=function(t,e){return Function("x","var n = x.length;\nvar i,xi;\n"+e+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+t+";\n}\nreturn accum;")},numeric.same=function t(e,o){var n,r;if(e instanceof Array&&o instanceof Array){if((r=e.length)!==o.length)return!1;for(n=0;n<r;n++)if(e[n]!==o[n]){if("object"!=typeof e[n])return!1;if(!t(e[n],o[n]))return!1}return!0}return!1},numeric.rep=function(t,e,o){void 0===o&&(o=0);var n,r=t[o],i=Array(r);if(o===t.length-1){for(n=r-2;n>=0;n-=2)i[n+1]=e,i[n]=e;return-1===n&&(i[0]=e),i}for(n=r-1;n>=0;n--)i[n]=numeric.rep(t,e,o+1);return i},numeric.dotMMsmall=function(t,e){var o,n,r,i,s,a,l,c,u,g,h;for(i=t.length,s=e.length,a=e[0].length,l=Array(i),o=i-1;o>=0;o--){for(c=Array(a),u=t[o],r=a-1;r>=0;r--){for(g=u[s-1]*e[s-1][r],n=s-2;n>=1;n-=2)h=n-1,g+=u[n]*e[n][r]+u[h]*e[h][r];0===n&&(g+=u[0]*e[0][r]),c[r]=g}l[o]=c}return l},numeric._getCol=function(t,e,o){var n,r=t.length;for(n=r-1;n>0;--n)o[n]=t[n][e],--n,o[n]=t[n][e];0===n&&(o[0]=t[0][e])},numeric.dotMMbig=function(t,e){var o,n,r,i=numeric._getCol,s=e.length,a=Array(s),l=t.length,c=e[0].length,u=new Array(l),g=numeric.dotVV;for(--s,--l,n=l;-1!==n;--n)u[n]=Array(c);for(--c,n=c;-1!==n;--n)for(i(e,n,a),r=l;-1!==r;--r)0,o=t[r],u[r][n]=g(o,a);return u},numeric.dotMV=function(t,e){var o,n=t.length,r=(e.length,Array(n)),i=numeric.dotVV;for(o=n-1;o>=0;o--)r[o]=i(t[o],e);return r},numeric.dotVM=function(t,e){var o,n,r,i,s,a,l;for(r=t.length,i=e[0].length,s=Array(i),n=i-1;n>=0;n--){for(a=t[r-1]*e[r-1][n],o=r-2;o>=1;o-=2)l=o-1,a+=t[o]*e[o][n]+t[l]*e[l][n];0===o&&(a+=t[0]*e[0][n]),s[n]=a}return s},numeric.dotVV=function(t,e){var o,n,r=t.length,i=t[r-1]*e[r-1];for(o=r-2;o>=1;o-=2)n=o-1,i+=t[o]*e[o]+t[n]*e[n];return 0===o&&(i+=t[0]*e[0]),i},numeric.dot=function(t,e){var o=numeric.dim;switch(1e3*o(t).length+o(e).length){case 2002:return e.length<10?numeric.dotMMsmall(t,e):numeric.dotMMbig(t,e);case 2001:return numeric.dotMV(t,e);case 1002:return numeric.dotVM(t,e);case 1001:return numeric.dotVV(t,e);case 1e3:return numeric.mulVS(t,e);case 1:return numeric.mulSV(t,e);case 0:return t*e;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(t){var e,o,n,r,i=t.length,s=Array(i);for(e=i-1;e>=0;e--){for(r=Array(i),o=e+2,n=i-1;n>=o;n-=2)r[n]=0,r[n-1]=0;for(n>e&&(r[n]=0),r[e]=t[e],n=e-1;n>=1;n-=2)r[n]=0,r[n-1]=0;0===n&&(r[0]=0),s[e]=r}return s},numeric.getDiag=function(t){var e,o=Math.min(t.length,t[0].length),n=Array(o);for(e=o-1;e>=1;--e)n[e]=t[e][e],--e,n[e]=t[e][e];return 0===e&&(n[0]=t[0][0]),n},numeric.identity=function(t){return numeric.diag(numeric.rep([t],1))},numeric.pointwise=function(t,e,o){void 0===o&&(o="");var n,r,i=[],s=/\[i\]$/,a="",l=!1;for(n=0;n<t.length;n++)s.test(t[n])?(r=t[n].substring(0,t[n].length-3),a=r):r=t[n],"ret"===r&&(l=!0),i.push(r);return i[t.length]="_s",i[t.length+1]="_k",i[t.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+a+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\n    return ret;\n}\n"+o+"\nfor(i=_n-1;i!==-1;--i) {\n    "+e+"\n}\nreturn ret;",Function.apply(null,i)},numeric.pointwise2=function(t,e,o){void 0===o&&(o="");var n,r,i=[],s=/\[i\]$/,a="",l=!1;for(n=0;n<t.length;n++)s.test(t[n])?(r=t[n].substring(0,t[n].length-3),a=r):r=t[n],"ret"===r&&(l=!0),i.push(r);return i[t.length]="var _n = "+a+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+o+"\nfor(i=_n-1;i!==-1;--i) {\n"+e+"\n}\nreturn ret;",Function.apply(null,i)},numeric._biforeach=function t(e,o,n,r,i){if(r===n.length-1)return void i(e,o);var s,a=n[r];for(s=a-1;s>=0;s--)t("object"==typeof e?e[s]:e,"object"==typeof o?o[s]:o,n,r+1,i)},numeric._biforeach2=function t(e,o,n,r,i){if(r===n.length-1)return i(e,o);var s,a=n[r],l=Array(a);for(s=a-1;s>=0;--s)l[s]=t("object"==typeof e?e[s]:e,"object"==typeof o?o[s]:o,n,r+1,i);return l},numeric._foreach=function t(e,o,n,r){if(n===o.length-1)return void r(e);var i,s=o[n];for(i=s-1;i>=0;i--)t(e[i],o,n+1,r)},numeric._foreach2=function t(e,o,n,r){if(n===o.length-1)return r(e);var i,s=o[n],a=Array(s);for(i=s-1;i>=0;i--)a[i]=t(e[i],o,n+1,r);return a},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,e;for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],numeric.ops2[e]=e;for(t in numeric.ops2)if(numeric.ops2.hasOwnProperty(t)){e=numeric.ops2[t];var o,n,r="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,t)?(r="var "+e+" = Math."+e+";\n",o=function(t,o,n){return t+" = "+e+"("+o+","+n+")"},n=function(t,o){return t+" = "+e+"("+t+","+o+")"}):(o=function(t,o,n){return t+" = "+o+" "+e+" "+n},n=numeric.opseq.hasOwnProperty(t+"eq")?function(t,o){return t+" "+e+"= "+o}:function(t,o){return t+" = "+t+" "+e+" "+o}),numeric[t+"VV"]=numeric.pointwise2(["x[i]","y[i]"],o("ret[i]","x[i]","y[i]"),r),numeric[t+"SV"]=numeric.pointwise2(["x","y[i]"],o("ret[i]","x","y[i]"),r),numeric[t+"VS"]=numeric.pointwise2(["x[i]","y"],o("ret[i]","x[i]","y"),r),numeric[t]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+n("x","y")+"\n}\nreturn x;\n"),numeric[e]=numeric[t],numeric[t+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],n("ret[i]","x[i]"),r),numeric[t+"eqS"]=numeric.pointwise2(["ret[i]","x"],n("ret[i]","x"),r),numeric[t+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+t+"eqV, S = numeric."+t+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(t=0;t<numeric.mathfuns2.length;++t)e=numeric.mathfuns2[t],delete numeric.ops2[e];for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],numeric.ops1[e]=e;for(t in numeric.ops1)numeric.ops1.hasOwnProperty(t)&&(r="",e=numeric.ops1[t],-1!==numeric.myIndexOf.call(numeric.mathfuns,t)&&Math.hasOwnProperty(e)&&(r="var "+e+" = Math."+e+";\n"),numeric[t+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+e+"(ret[i]);",r),numeric[t+"eq"]=Function("x",'if(typeof x !== "object") return '+e+"x\nvar i;\nvar V = numeric."+t+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[t+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+e+"(x[i]);",r),numeric[t]=Function("x",'if(typeof x !== "object") return '+e+"(x)\nvar i;\nvar V = numeric."+t+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(t=0;t<numeric.mathfuns.length;++t)e=numeric.mathfuns[t],delete numeric.ops1[e];for(t in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(t)&&(e=numeric.mapreducers[t],numeric[t+"V"]=numeric.mapreduce2(e[0],e[1]),numeric[t]=Function("x","s","k",e[1]+'if(typeof x !== "object") {    xi = x;\n'+e[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+t+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+e[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(t,e){return"object"==typeof t?"object"==typeof e?numeric.truncVV(t,e):numeric.truncVS(t,e):"object"==typeof e?numeric.truncSV(t,e):Math.round(t/e)*e},numeric.inv=function(t){var e,o,n,r,i,s,a,t,l=numeric.dim(t),c=Math.abs,u=l[0],g=l[1],h=numeric.clone(t),p=numeric.identity(u);for(s=0;s<g;++s){var d=-1,f=-1;for(i=s;i!==u;++i)(a=c(h[i][s]))>f&&(d=i,f=a);for(o=h[d],h[d]=h[s],h[s]=o,r=p[d],p[d]=p[s],p[s]=r,t=o[s],a=s;a!==g;++a)o[a]/=t;for(a=g-1;-1!==a;--a)r[a]/=t;for(i=u-1;-1!==i;--i)if(i!==s){for(e=h[i],n=p[i],t=e[s],a=s+1;a!==g;++a)e[a]-=o[a]*t;for(a=g-1;a>0;--a)n[a]-=r[a]*t,--a,n[a]-=r[a]*t;0===a&&(n[0]-=r[0]*t)}}return p},numeric.det=function(t){var e=numeric.dim(t);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: det() only works on square matrices");var o,n,r,i,s,a,l,c,u=e[0],g=1,h=numeric.clone(t);for(n=0;n<u-1;n++){for(r=n,o=n+1;o<u;o++)Math.abs(h[o][n])>Math.abs(h[r][n])&&(r=o);for(r!==n&&(l=h[r],h[r]=h[n],h[n]=l,g*=-1),i=h[n],o=n+1;o<u;o++){for(s=h[o],a=s[n]/i[n],r=n+1;r<u-1;r+=2)c=r+1,s[r]-=i[r]*a,s[c]-=i[c]*a;r!==u&&(s[r]-=i[r]*a)}if(0===i[n])return 0;g*=i[n]}return g*h[n][n]},numeric.transpose=function(t){var e,o,n,r,i,s=t.length,a=t[0].length,l=Array(a);for(o=0;o<a;o++)l[o]=Array(s);for(e=s-1;e>=1;e-=2){for(r=t[e],n=t[e-1],o=a-1;o>=1;--o)i=l[o],i[e]=r[o],i[e-1]=n[o],--o,i=l[o],i[e]=r[o],i[e-1]=n[o];0===o&&(i=l[0],i[e]=r[0],i[e-1]=n[0])}if(0===e){for(n=t[0],o=a-1;o>=1;--o)l[o][0]=n[o],--o,l[o][0]=n[o];0===o&&(l[0][0]=n[0])}return l},numeric.negtranspose=function(t){var e,o,n,r,i,s=t.length,a=t[0].length,l=Array(a);for(o=0;o<a;o++)l[o]=Array(s);for(e=s-1;e>=1;e-=2){for(r=t[e],n=t[e-1],o=a-1;o>=1;--o)i=l[o],i[e]=-r[o],i[e-1]=-n[o],--o,i=l[o],i[e]=-r[o],i[e-1]=-n[o];0===o&&(i=l[0],i[e]=-r[0],i[e-1]=-n[0])}if(0===e){for(n=t[0],o=a-1;o>=1;--o)l[o][0]=-n[o],--o,l[o][0]=-n[o];0===o&&(l[0][0]=-n[0])}return l},numeric._random=function t(e,o){var n,r,i=e[o],s=Array(i);if(o===e.length-1){for(r=Math.random,n=i-1;n>=1;n-=2)s[n]=r(),s[n-1]=r();return 0===n&&(s[0]=r()),s}for(n=i-1;n>=0;n--)s[n]=t(e,o+1);return s},numeric.random=function(t){return numeric._random(t,0)},numeric.norm2=function(t){return Math.sqrt(numeric.norm2Squared(t))},numeric.linspace=function(t,e,o){if(void 0===o&&(o=Math.max(Math.round(e-t)+1,1)),o<2)return 1===o?[t]:[];var n,r=Array(o);for(o--,n=o;n>=0;n--)r[n]=(n*e+(o-n)*t)/o;return r},numeric.getBlock=function(t,e,o){function n(t,i){var s,a=e[i],l=o[i]-a,c=Array(l);if(i===r.length-1){for(s=l;s>=0;s--)c[s]=t[s+a];return c}for(s=l;s>=0;s--)c[s]=n(t[s+a],i+1);return c}var r=numeric.dim(t);return n(t,0)},numeric.setBlock=function(t,e,o,n){function r(t,n,s){var a,l=e[s],c=o[s]-l;if(s===i.length-1)for(a=c;a>=0;a--)t[a+l]=n[a];for(a=c;a>=0;a--)r(t[a+l],n[a],s+1)}var i=numeric.dim(t);return r(t,n,0),t},numeric.getRange=function(t,e,o){var n,r,i,s,a=e.length,l=o.length,c=Array(a);for(n=a-1;-1!==n;--n)for(c[n]=Array(l),i=c[n],s=t[e[n]],r=l-1;-1!==r;--r)i[r]=s[o[r]];return c},numeric.blockMatrix=function(t){var e=numeric.dim(t);if(e.length<4)return numeric.blockMatrix([t]);var o,n,r,i,s,a=e[0],l=e[1];for(o=0,n=0,r=0;r<a;++r)o+=t[r][0].length;for(i=0;i<l;++i)n+=t[0][i][0].length;var c=Array(o);for(r=0;r<o;++r)c[r]=Array(n);var u,g,h,p,d,f=0;for(r=0;r<a;++r){for(u=n,i=l-1;-1!==i;--i)for(s=t[r][i],u-=s[0].length,h=s.length-1;-1!==h;--h)for(d=s[h],g=c[f+h],p=d.length-1;-1!==p;--p)g[u+p]=d[p];f+=t[r][0].length}return c},numeric.tensor=function(t,e){if("number"==typeof t||"number"==typeof e)return numeric.mul(t,e);var o=numeric.dim(t),n=numeric.dim(e);if(1!==o.length||1!==n.length)throw new Error("numeric: tensor product is only defined for vectors");var r,i,s,a,l=o[0],c=n[0],u=Array(l);for(i=l-1;i>=0;i--){for(r=Array(c),a=t[i],s=c-1;s>=3;--s)r[s]=a*e[s],--s,r[s]=a*e[s],--s,r[s]=a*e[s],--s,r[s]=a*e[s];for(;s>=0;)r[s]=a*e[s],--s;u[i]=r}return u},numeric.T=function(t,e){this.x=t,this.y=e},numeric.t=function(t,e){return new numeric.T(t,e)},numeric.Tbinop=function(t,e,o,n,r){numeric.indexOf;if("string"!=typeof r){var i;r="";for(i in numeric)numeric.hasOwnProperty(i)&&(t.indexOf(i)>=0||e.indexOf(i)>=0||o.indexOf(i)>=0||n.indexOf(i)>=0)&&i.length>1&&(r+="var "+i+" = numeric."+i+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+r+"\nif(x.y) {  if(y.y) {    return new numeric.T("+n+");\n  }\n  return new numeric.T("+o+");\n}\nif(y.y) {\n  return new numeric.T("+e+");\n}\nreturn new numeric.T("+t+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var t=numeric.mul,e=numeric.div;if(this.y){var o=numeric.add(t(this.x,this.x),t(this.y,this.y));return new numeric.T(e(this.x,o),e(numeric.neg(this.y),o))}return new T(e(1,this.x))},numeric.T.prototype.div=function(t){if(t instanceof numeric.T||(t=new numeric.T(t)),t.y)return this.mul(t.reciprocal());var e=numeric.div;return this.y?new numeric.T(e(this.x,t.x),e(this.y,t.x)):new numeric.T(e(this.x,t.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var t=numeric.transpose,e=this.x,o=this.y;return o?new numeric.T(t(e),t(o)):new numeric.T(t(e))},numeric.T.prototype.transjugate=function(){var t=numeric.transpose,e=this.x,o=this.y;return o?new numeric.T(t(e),numeric.negtranspose(o)):new numeric.T(t(e))},numeric.Tunop=function(t,e,o){return"string"!=typeof o&&(o=""),Function("var x = this;\n"+o+"\nif(x.y) {  "+e+";\n}\n"+t+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var t=this;if(void 0===t.y)return new numeric.T(numeric.inv(t.x));var e,o,n,r,i,s,a,l,c,u,g,e,o,n,h,p,d,f,m,y,v,_=t.x.length,b=numeric.identity(_),E=numeric.rep([_,_],0),S=numeric.clone(t.x),k=numeric.clone(t.y);for(e=0;e<_;e++){for(d=S[e][e],f=k[e][e],h=d*d+f*f,n=e,o=e+1;o<_;o++)d=S[o][e],f=k[o][e],(p=d*d+f*f)>h&&(n=o,h=p);for(n!==e&&(v=S[e],S[e]=S[n],S[n]=v,v=k[e],k[e]=k[n],k[n]=v,v=b[e],b[e]=b[n],b[n]=v,v=E[e],E[e]=E[n],E[n]=v),r=S[e],i=k[e],l=b[e],c=E[e],d=r[e],f=i[e],o=e+1;o<_;o++)m=r[o],y=i[o],r[o]=(m*d+y*f)/h,i[o]=(y*d-m*f)/h;for(o=0;o<_;o++)m=l[o],y=c[o],l[o]=(m*d+y*f)/h,c[o]=(y*d-m*f)/h;for(o=e+1;o<_;o++){for(s=S[o],a=k[o],u=b[o],g=E[o],d=s[e],f=a[e],n=e+1;n<_;n++)m=r[n],y=i[n],s[n]-=m*d-y*f,a[n]-=y*d+m*f;for(n=0;n<_;n++)m=l[n],y=c[n],u[n]-=m*d-y*f,g[n]-=y*d+m*f}}for(e=_-1;e>0;e--)for(l=b[e],c=E[e],o=e-1;o>=0;o--)for(u=b[o],g=E[o],d=S[o][e],f=k[o][e],n=_-1;n>=0;n--)m=l[n],y=c[n],u[n]-=d*m-f*y,g[n]-=d*y+f*m;return new numeric.T(b,E)},numeric.T.prototype.get=function(t){var e,o=this.x,n=this.y,r=0,i=t.length;if(n){for(;r<i;)e=t[r],o=o[e],n=n[e],r++;return new numeric.T(o,n)}for(;r<i;)e=t[r],o=o[e],r++;return new numeric.T(o)},numeric.T.prototype.set=function(t,e){var o,n=this.x,r=this.y,i=0,s=t.length,a=e.x,l=e.y;if(0===s)return l?this.y=l:r&&(this.y=void 0),this.x=n,this;if(l){for(r||(r=numeric.rep(numeric.dim(n),0),this.y=r);i<s-1;)o=t[i],n=n[o],r=r[o],i++;return o=t[i],n[o]=a,r[o]=l,this}if(r){for(;i<s-1;)o=t[i],n=n[o],r=r[o],i++;return o=t[i],n[o]=a,a instanceof Array?r[o]=numeric.rep(numeric.dim(a),0):r[o]=0,this}for(;i<s-1;)o=t[i],n=n[o],i++;return o=t[i],n[o]=a,this},numeric.T.prototype.getRows=function(t,e){var o,n,r=e-t+1,i=Array(r),s=this.x,a=this.y;for(o=t;o<=e;o++)i[o-t]=s[o];if(a){for(n=Array(r),o=t;o<=e;o++)n[o-t]=a[o];return new numeric.T(i,n)}return new numeric.T(i)},numeric.T.prototype.setRows=function(t,e,o){var n,r=this.x,i=this.y,s=o.x,a=o.y;for(n=t;n<=e;n++)r[n]=s[n-t];if(a)for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i),n=t;n<=e;n++)i[n]=a[n-t];else if(i)for(n=t;n<=e;n++)i[n]=numeric.rep([s[n-t].length],0);return this},numeric.T.prototype.getRow=function(t){var e=this.x,o=this.y;return o?new numeric.T(e[t],o[t]):new numeric.T(e[t])},numeric.T.prototype.setRow=function(t,e){var o=this.x,n=this.y,r=e.x,i=e.y;return o[t]=r,i?(n||(n=numeric.rep(numeric.dim(o),0),this.y=n),n[t]=i):n&&(n=numeric.rep([r.length],0)),this},numeric.T.prototype.getBlock=function(t,e){var o=this.x,n=this.y,r=numeric.getBlock;return n?new numeric.T(r(o,t,e),r(n,t,e)):new numeric.T(r(o,t,e))},numeric.T.prototype.setBlock=function(t,e,o){o instanceof numeric.T||(o=new numeric.T(o));var n=this.x,r=this.y,i=numeric.setBlock,s=o.x,a=o.y;if(a)return r||(this.y=numeric.rep(numeric.dim(this),0),r=this.y),i(n,t,e,s),i(r,t,e,a),this;i(n,t,e,s),r&&i(r,t,e,numeric.rep(numeric.dim(s),0))},numeric.T.rep=function(t,e){var o=numeric.T;e instanceof o||(e=new o(e));var n=e.x,r=e.y,i=numeric.rep;return r?new o(i(t,n),i(t,r)):new o(i(t,n))},numeric.T.diag=function(t){t instanceof numeric.T||(t=new numeric.T(t));var e=t.x,o=t.y,n=numeric.diag;return o?new numeric.T(n(e),n(o)):new numeric.T(n(e))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(t){return new numeric.T(numeric.identity(t))},numeric.T.prototype.getDiag=function(){var t=numeric,e=this.x,o=this.y;return o?new t.T(t.getDiag(e),t.getDiag(o)):new t.T(t.getDiag(e))},numeric.house=function(t){var e=numeric.clone(t),o=t[0]>=0?1:-1,n=o*numeric.norm2(t);e[0]+=n;var r=numeric.norm2(e);if(0===r)throw new Error("eig: internal error");return numeric.div(e,r)},numeric.toUpperHessenberg=function(t){var e=numeric.dim(t);if(2!==e.length||e[0]!==e[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var o,n,r,i,s,a,l,c,u,g,h=e[0],p=numeric.clone(t),d=numeric.identity(h);for(n=0;n<h-2;n++){for(i=Array(h-n-1),o=n+1;o<h;o++)i[o-n-1]=p[o][n];if(numeric.norm2(i)>0){for(s=numeric.house(i),a=numeric.getBlock(p,[n+1,n],[h-1,h-1]),l=numeric.tensor(s,numeric.dot(s,a)),o=n+1;o<h;o++)for(c=p[o],u=l[o-n-1],r=n;r<h;r++)c[r]-=2*u[r-n];for(a=numeric.getBlock(p,[0,n+1],[h-1,h-1]),l=numeric.tensor(numeric.dot(a,s),s),o=0;o<h;o++)for(c=p[o],u=l[o],r=n+1;r<h;r++)c[r]-=2*u[r-n-1];for(a=Array(h-n-1),o=n+1;o<h;o++)a[o-n-1]=d[o];for(l=numeric.tensor(s,numeric.dot(s,a)),o=n+1;o<h;o++)for(g=d[o],u=l[o-n-1],r=0;r<h;r++)g[r]-=2*u[r]}}return{H:p,Q:d}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(t,e){void 0===e&&(e=1e4),t=numeric.clone(t);var o,n,r,i,s,a,l,c,u,g,h,p,d,f,m,y,v,_,b=(numeric.clone(t),numeric.dim(t)),E=b[0],S=numeric.identity(E);if(E<3)return{Q:S,B:[[0,E-1]]};var k=numeric.epsilon;for(_=0;_<e;_++){for(y=0;y<E-1;y++)if(Math.abs(t[y+1][y])<k*(Math.abs(t[y][y])+Math.abs(t[y+1][y+1]))){var T=numeric.QRFrancis(numeric.getBlock(t,[0,0],[y,y]),e),C=numeric.QRFrancis(numeric.getBlock(t,[y+1,y+1],[E-1,E-1]),e);for(p=Array(y+1),m=0;m<=y;m++)p[m]=S[m];for(d=numeric.dot(T.Q,p),m=0;m<=y;m++)S[m]=d[m];for(p=Array(E-y-1),m=y+1;m<E;m++)p[m-y-1]=S[m];for(d=numeric.dot(C.Q,p),m=y+1;m<E;m++)S[m]=d[m-y-1];return{Q:S,B:T.B.concat(numeric.add(C.B,y+1))}}if(r=t[E-2][E-2],i=t[E-2][E-1],s=t[E-1][E-2],a=t[E-1][E-1],c=r+a,l=r*a-i*s,u=numeric.getBlock(t,[0,0],[2,2]),c*c>=4*l){var x,w;x=.5*(c+Math.sqrt(c*c-4*l)),w=.5*(c-Math.sqrt(c*c-4*l)),u=numeric.add(numeric.sub(numeric.dot(u,u),numeric.mul(u,x+w)),numeric.diag(numeric.rep([3],x*w)))}else u=numeric.add(numeric.sub(numeric.dot(u,u),numeric.mul(u,c)),numeric.diag(numeric.rep([3],l)));for(o=[u[0][0],u[1][0],u[2][0]],n=numeric.house(o),p=[t[0],t[1],t[2]],d=numeric.tensor(n,numeric.dot(n,p)),m=0;m<3;m++)for(h=t[m],f=d[m],v=0;v<E;v++)h[v]-=2*f[v];for(p=numeric.getBlock(t,[0,0],[E-1,2]),d=numeric.tensor(numeric.dot(p,n),n),m=0;m<E;m++)for(h=t[m],f=d[m],v=0;v<3;v++)h[v]-=2*f[v];for(p=[S[0],S[1],S[2]],d=numeric.tensor(n,numeric.dot(n,p)),m=0;m<3;m++)for(g=S[m],f=d[m],v=0;v<E;v++)g[v]-=2*f[v];var B;for(y=0;y<E-2;y++){for(v=y;v<=y+1;v++)if(Math.abs(t[v+1][v])<k*(Math.abs(t[v][v])+Math.abs(t[v+1][v+1]))){var T=numeric.QRFrancis(numeric.getBlock(t,[0,0],[v,v]),e),C=numeric.QRFrancis(numeric.getBlock(t,[v+1,v+1],[E-1,E-1]),e);for(p=Array(v+1),m=0;m<=v;m++)p[m]=S[m];for(d=numeric.dot(T.Q,p),m=0;m<=v;m++)S[m]=d[m];for(p=Array(E-v-1),m=v+1;m<E;m++)p[m-v-1]=S[m];for(d=numeric.dot(C.Q,p),m=v+1;m<E;m++)S[m]=d[m-v-1];return{Q:S,B:T.B.concat(numeric.add(C.B,v+1))}}for(B=Math.min(E-1,y+3),o=Array(B-y),m=y+1;m<=B;m++)o[m-y-1]=t[m][y];for(n=numeric.house(o),p=numeric.getBlock(t,[y+1,y],[B,E-1]),d=numeric.tensor(n,numeric.dot(n,p)),m=y+1;m<=B;m++)for(h=t[m],f=d[m-y-1],v=y;v<E;v++)h[v]-=2*f[v-y];for(p=numeric.getBlock(t,[0,y+1],[E-1,B]),d=numeric.tensor(numeric.dot(p,n),n),m=0;m<E;m++)for(h=t[m],f=d[m],v=y+1;v<=B;v++)h[v]-=2*f[v-y-1];for(p=Array(B-y),m=y+1;m<=B;m++)p[m-y-1]=S[m];for(d=numeric.tensor(n,numeric.dot(n,p)),m=y+1;m<=B;m++)for(g=S[m],f=d[m-y-1],v=0;v<E;v++)g[v]-=2*f[v]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(t,e){var o,n,r,i,s,a,l,c,u,g,h,p,d,f,m,y,v,_=numeric.toUpperHessenberg(t),b=numeric.QRFrancis(_.H,e),E=numeric.T,S=t.length,k=b.B,T=numeric.dot(b.Q,numeric.dot(_.H,numeric.transpose(b.Q))),C=new E(numeric.dot(b.Q,_.Q)),x=k.length,w=Math.sqrt;for(n=0;n<x;n++)if((o=k[n][0])!==k[n][1]){if(i=o+1,s=T[o][o],a=T[o][i],l=T[i][o],c=T[i][i],0===a&&0===l)continue;u=-s-c,g=s*c-a*l,h=u*u-4*g,h>=0?(p=u<0?-.5*(u-w(h)):-.5*(u+w(h)),y=(s-p)*(s-p)+a*a,v=l*l+(c-p)*(c-p),y>v?(y=w(y),f=(s-p)/y,m=a/y):(v=w(v),f=l/v,m=(c-p)/v),r=new E([[m,-f],[f,m]]),C.setRows(o,i,r.dot(C.getRows(o,i)))):(p=-.5*u,d=.5*w(-h),y=(s-p)*(s-p)+a*a,v=l*l+(c-p)*(c-p),y>v?(y=w(y+d*d),f=(s-p)/y,m=a/y,p=0,d/=y):(v=w(v+d*d),f=l/v,m=(c-p)/v,p=d/v,d=0),r=new E([[m,-f],[f,m]],[[p,d],[d,-p]]),C.setRows(o,i,r.dot(C.getRows(o,i))))}var B=C.dot(t).dot(C.transjugate()),S=t.length,I=numeric.T.identity(S);for(i=0;i<S;i++)if(i>0)for(n=i-1;n>=0;n--){var A=B.get([n,n]),N=B.get([i,i]);numeric.neq(A.x,N.x)||numeric.neq(A.y,N.y)?(p=B.getRow(n).getBlock([n],[i-1]),d=I.getRow(i).getBlock([n],[i-1]),I.set([i,n],B.get([n,i]).neg().sub(p.dot(d)).div(A.sub(N)))):I.setRow(i,I.getRow(n))}for(i=0;i<S;i++)p=I.getRow(i),I.setRow(i,p.div(p.norm2()));return I=I.transpose(),I=C.transjugate().dot(I),{lambda:B.getDiag(),E:I}},numeric.ccsSparse=function(t){var e,o,n,r,i=t.length,s=[];for(n=i-1;-1!==n;--n){o=t[n];for(r in o){for(r=parseInt(r);r>=s.length;)s[s.length]=0;0!==o[r]&&s[r]++}}var e=s.length,a=Array(e+1);for(a[0]=0,n=0;n<e;++n)a[n+1]=a[n]+s[n];var l=Array(a[e]),c=Array(a[e]);for(n=i-1;-1!==n;--n){o=t[n];for(r in o)0!==o[r]&&(s[r]--,l[a[r]+s[r]]=n,c[a[r]+s[r]]=o[r])}return[a,l,c]},numeric.ccsFull=function(t){var e,o,n,r,i=t[0],s=t[1],a=t[2],l=numeric.ccsDim(t),c=l[0],u=l[1],g=numeric.rep([c,u],0);for(e=0;e<u;e++)for(n=i[e],r=i[e+1],o=n;o<r;++o)g[s[o]][e]=a[o];return g},numeric.ccsTSolve=function(t,e,o,n,r){function i(t){var e;if(0===o[t]){for(o[t]=1,e=s[t];e<s[t+1];++e)i(a[e]);r[g]=t,++g}}var s=t[0],a=t[1],l=t[2],c=s.length-1,u=Math.max,g=0;void 0===n&&(o=numeric.rep([c],0)),void 0===n&&(n=numeric.linspace(0,o.length-1)),void 0===r&&(r=[]);var h,p,d,f,m,y,v;for(h=n.length-1;-1!==h;--h)i(n[h]);for(r.length=g,h=r.length-1;-1!==h;--h)o[r[h]]=0;for(h=n.length-1;-1!==h;--h)p=n[h],o[p]=e[p];for(h=r.length-1;-1!==h;--h){for(p=r[h],d=s[p],f=u(s[p+1],d),m=d;m!==f;++m)if(a[m]===p){o[p]/=l[m];break}for(v=o[p],m=d;m!==f;++m)(y=a[m])!==p&&(o[y]-=v*l[m])}return o},numeric.ccsDFS=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS.prototype.dfs=function(t,e,o,n,r,i){var s,a,l,c=0,u=r.length,g=this.k,h=this.k1,p=this.j;if(0===n[t])for(n[t]=1,p[0]=t,g[0]=a=e[t],h[0]=l=e[t+1];;)if(a>=l){if(r[u]=p[c],0===c)return;++u,--c,a=g[c],l=h[c]}else s=i[o[a]],0===n[s]?(n[s]=1,g[c]=a,++c,p[c]=s,a=e[s],h[c]=l=e[s+1]):++a},numeric.ccsLPSolve=function(t,e,o,n,r,i,s){var a,l,c,u,g,h,p,d,f,m=t[0],y=t[1],v=t[2],_=(m.length,e[0]),b=e[1],E=e[2];for(l=_[r],c=_[r+1],n.length=0,a=l;a<c;++a)s.dfs(i[b[a]],m,y,o,n,i);for(a=n.length-1;-1!==a;--a)o[n[a]]=0;for(a=l;a!==c;++a)u=i[b[a]],o[u]=E[a];for(a=n.length-1;-1!==a;--a){for(u=n[a],g=m[u],h=m[u+1],p=g;p<h;++p)if(i[y[p]]===u){o[u]/=v[p];break}for(f=o[u],p=g;p<h;++p)(d=i[y[p]])!==u&&(o[d]-=f*v[p])}return o},numeric.ccsLUP1=function(t,e){var o,n,r,i,s,a,l,c=t[0].length-1,u=[numeric.rep([c+1],0),[],[]],g=[numeric.rep([c+1],0),[],[]],h=u[0],p=u[1],d=u[2],f=g[0],m=g[1],y=g[2],v=numeric.rep([c],0),_=numeric.rep([c],0),b=numeric.ccsLPSolve,E=(Math.max,Math.abs),S=numeric.linspace(0,c-1),k=numeric.linspace(0,c-1),T=new numeric.ccsDFS(c);for(void 0===e&&(e=1),o=0;o<c;++o){for(b(u,t,v,_,o,k,T),i=-1,s=-1,n=_.length-1;-1!==n;--n)(r=_[n])<=o||(a=E(v[r]))>i&&(s=r,i=a);for(E(v[o])<e*i&&(n=S[o],i=S[s],S[o]=i,k[i]=o,S[s]=n,k[n]=s,i=v[o],v[o]=v[s],v[s]=i),i=h[o],s=f[o],l=v[o],p[i]=S[o],d[i]=1,++i,n=_.length-1;-1!==n;--n)r=_[n],a=v[r],_[n]=0,v[r]=0,r<=o?(m[s]=r,y[s]=a,++s):(p[i]=S[r],d[i]=a/l,++i);h[o+1]=i,f[o+1]=s}for(n=p.length-1;-1!==n;--n)p[n]=k[p[n]];return{L:u,U:g,P:S,Pinv:k}},numeric.ccsDFS0=function(t){this.k=Array(t),this.k1=Array(t),this.j=Array(t)},numeric.ccsDFS0.prototype.dfs=function(t,e,o,n,r,i,s){var a,l,c,u=0,g=r.length,h=this.k,p=this.k1,d=this.j;if(0===n[t])for(n[t]=1,d[0]=t,h[0]=l=e[i[t]],p[0]=c=e[i[t]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=c){if(r[g]=i[d[u]],0===u)return;++g,--u,l=h[u],c=p[u]}else a=o[l],0===n[a]?(n[a]=1,h[u]=l,++u,d[u]=a,a=i[a],l=e[a],p[u]=c=e[a+1]):++l}},numeric.ccsLPSolve0=function(t,e,o,n,r,i,s,a){var l,c,u,g,h,p,d,f,m,y=t[0],v=t[1],_=t[2],b=(y.length,e[0]),E=e[1],S=e[2];for(c=b[r],u=b[r+1],n.length=0,l=c;l<u;++l)a.dfs(E[l],y,v,o,n,i,s);for(l=n.length-1;-1!==l;--l)g=n[l],o[s[g]]=0;for(l=c;l!==u;++l)g=E[l],o[g]=S[l];for(l=n.length-1;-1!==l;--l){for(g=n[l],f=s[g],h=y[g],p=y[g+1],d=h;d<p;++d)if(v[d]===f){o[f]/=_[d];break}for(m=o[f],d=h;d<p;++d)o[v[d]]-=m*_[d];o[f]=m}},numeric.ccsLUP0=function(t,e){var o,n,r,i,s,a,l,c=t[0].length-1,u=[numeric.rep([c+1],0),[],[]],g=[numeric.rep([c+1],0),[],[]],h=u[0],p=u[1],d=u[2],f=g[0],m=g[1],y=g[2],v=numeric.rep([c],0),_=numeric.rep([c],0),b=numeric.ccsLPSolve0,E=(Math.max,Math.abs),S=numeric.linspace(0,c-1),k=numeric.linspace(0,c-1),T=new numeric.ccsDFS0(c);for(void 0===e&&(e=1),o=0;o<c;++o){for(b(u,t,v,_,o,k,S,T),i=-1,s=-1,n=_.length-1;-1!==n;--n)(r=_[n])<=o||(a=E(v[S[r]]))>i&&(s=r,i=a);for(E(v[S[o]])<e*i&&(n=S[o],i=S[s],S[o]=i,k[i]=o,S[s]=n,k[n]=s),i=h[o],s=f[o],l=v[S[o]],p[i]=S[o],d[i]=1,++i,n=_.length-1;-1!==n;--n)r=_[n],a=v[S[r]],_[n]=0,v[S[r]]=0,r<=o?(m[s]=r,y[s]=a,++s):(p[i]=S[r],d[i]=a/l,++i);h[o+1]=i,f[o+1]=s}for(n=p.length-1;-1!==n;--n)p[n]=k[p[n]];return{L:u,U:g,P:S,Pinv:k}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(t){return[numeric.sup(t[1])+1,t[0].length-1]},numeric.ccsGetBlock=function(t,e,o){var n=numeric.ccsDim(t),r=n[0],i=n[1];void 0===e?e=numeric.linspace(0,r-1):"number"==typeof e&&(e=[e]),void 0===o?o=numeric.linspace(0,i-1):"number"==typeof o&&(o=[o]);var s,a,l,c,u,g=e.length,h=o.length,p=numeric.rep([i],0),d=[],f=[],m=[p,d,f],y=t[0],v=t[1],_=t[2],b=numeric.rep([r],0),E=0,S=numeric.rep([r],0);for(a=0;a<h;++a){c=o[a];var k=y[c],T=y[c+1];for(s=k;s<T;++s)l=v[s],S[l]=1,b[l]=_[s];for(s=0;s<g;++s)u=e[s],S[u]&&(d[E]=s,f[E]=b[e[s]],++E);for(s=k;s<T;++s)l=v[s],S[l]=0;p[a+1]=E}return m},numeric.ccsDot=function(t,e){var o,n,r,i,s,a,l,c,u,g,h,p=t[0],d=t[1],f=t[2],m=e[0],y=e[1],v=e[2],_=numeric.ccsDim(t),b=numeric.ccsDim(e),E=_[0],S=(_[1],b[1]),k=numeric.rep([E],0),T=numeric.rep([E],0),C=Array(E),x=numeric.rep([S],0),w=[],B=[],I=[x,w,B];for(r=0;r!==S;++r){for(i=m[r],s=m[r+1],u=0,n=i;n<s;++n)for(g=y[n],h=v[n],a=p[g],l=p[g+1],o=a;o<l;++o)c=d[o],0===T[c]&&(C[u]=c,T[c]=1,u+=1),k[c]=k[c]+f[o]*h;for(i=x[r],s=i+u,x[r+1]=s,n=u-1;-1!==n;--n)h=i+n,o=C[n],w[h]=o,B[h]=k[o],T[o]=0,k[o]=0;x[r+1]=x[r]+u}return I},numeric.ccsLUPSolve=function(t,e){var o=t.L,n=t.U,r=(t.P,e[0]),i=!1;"object"!=typeof r&&(e=[[0,e.length],numeric.linspace(0,e.length-1),e],r=e[0],i=!0);var s,a,l,c,u,g,h=e[1],p=e[2],d=o[0].length-1,f=r.length-1,m=numeric.rep([d],0),y=Array(d),v=numeric.rep([d],0),_=Array(d),b=numeric.rep([f+1],0),E=[],S=[],k=numeric.ccsTSolve,T=0;for(s=0;s<f;++s){for(u=0,l=r[s],c=r[s+1],a=l;a<c;++a)g=t.Pinv[h[a]],_[u]=g,v[g]=p[a],++u;for(_.length=u,k(o,v,m,_,y),a=_.length-1;-1!==a;--a)v[_[a]]=0;if(k(n,m,v,y,_),i)return v;for(a=y.length-1;-1!==a;--a)m[y[a]]=0;for(a=_.length-1;-1!==a;--a)g=_[a],E[T]=g,S[T]=v[g],v[g]=0,++T;b[s+1]=T}return[b,E,S]},numeric.ccsbinop=function(t,e){return void 0===e&&(e=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+e+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+t+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(t){var e,o=t[0],n=t[1],r=t[2],i=numeric.sup(n)+1,s=o.length,a=numeric.rep([i],0),l=Array(s),c=Array(s),u=numeric.rep([i],0);for(e=0;e<s;++e)u[n[e]]++;for(e=0;e<i;++e)a[e+1]=a[e]+u[e];var g,h,p=a.slice(0);for(e=0;e<s;++e)h=n[e],g=p[h],l[g]=o[e],c[g]=r[e],p[h]=p[h]+1;return[a,l,c]},numeric.ccsGather=function(t){var e,o,n,r,i,s=t[0],a=t[1],l=t[2],c=s.length-1,u=a.length,g=Array(u),h=Array(u),p=Array(u);for(i=0,e=0;e<c;++e)for(n=s[e],r=s[e+1],o=n;o!==r;++o)h[i]=e,g[i]=a[o],p[i]=l[o],++i;return[g,h,p]},numeric.sdim=function t(e,o,n){if(void 0===o&&(o=[]),"object"!=typeof e)return o;void 0===n&&(n=0),n in o||(o[n]=0),e.length>o[n]&&(o[n]=e.length);var r;for(r in e)e.hasOwnProperty(r)&&t(e[r],o,n+1);return o},numeric.sclone=function t(e,o,n){void 0===o&&(o=0),void 0===n&&(n=numeric.sdim(e).length);var r,i=Array(e.length);if(o===n-1){for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}for(r in e)e.hasOwnProperty(r)&&(i[r]=t(e[r],o+1,n));return i},numeric.sdiag=function(t){var e,o,n=t.length,r=Array(n);for(e=n-1;e>=1;e-=2)o=e-1,r[e]=[],r[e][e]=t[e],r[o]=[],r[o][o]=t[o];return 0===e&&(r[0]=[],r[0][0]=t[e]),r},numeric.sidentity=function(t){return numeric.sdiag(numeric.rep([t],1))},numeric.stranspose=function(t){var e,o,n,r=[];t.length;for(e in t)if(t.hasOwnProperty(e)){n=t[e];for(o in n)n.hasOwnProperty(o)&&("object"!=typeof r[o]&&(r[o]=[]),r[o][e]=n[o])}return r},numeric.sLUP=function(t,e){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(t,e){var o,n,r,i,s,a,l,c=t.length,u=(e.length,numeric.stranspose(e)),g=u.length,h=Array(c);for(r=c-1;r>=0;r--){for(l=[],o=t[r],s=g-1;s>=0;s--){a=0,n=u[s];for(i in o)o.hasOwnProperty(i)&&i in n&&(a+=o[i]*n[i]);a&&(l[s]=a)}h[r]=l}return h},numeric.sdotMV=function(t,e){var o,n,r,i,s=t.length,a=Array(s);for(n=s-1;n>=0;n--){o=t[n],i=0;for(r in o)o.hasOwnProperty(r)&&e[r]&&(i+=o[r]*e[r]);i&&(a[n]=i)}return a},numeric.sdotVM=function(t,e){var o,n,r,i,s=[];for(o in t)if(t.hasOwnProperty(o)){r=e[o],i=t[o];for(n in r)r.hasOwnProperty(n)&&(s[n]||(s[n]=0),s[n]+=i*r[n])}return s},numeric.sdotVV=function(t,e){var o,n=0;for(o in t)t[o]&&e[o]&&(n+=t[o]*e[o]);return n},numeric.sdot=function(t,e){var o=numeric.sdim(t).length,n=numeric.sdim(e).length;switch(1e3*o+n){case 0:return t*e;case 1001:return numeric.sdotVV(t,e);case 2001:return numeric.sdotMV(t,e);case 1002:return numeric.sdotVM(t,e);case 2002:return numeric.sdotMM(t,e);default:throw new Error("numeric.sdot not implemented for tensors of order "+o+" and "+n)}},numeric.sscatter=function(t){var e,o,n,r,i=t[0].length,s=t.length,a=[];for(o=i-1;o>=0;--o)if(t[s-1][o]){for(r=a,n=0;n<s-2;n++)e=t[n][o],r[e]||(r[e]=[]),r=r[e];r[t[n][o]]=t[n+1][o]}return a},numeric.sgather=function t(e,o,n){void 0===o&&(o=[]),void 0===n&&(n=[]);var r,i,s;r=n.length;for(i in e)if(e.hasOwnProperty(i))if(n[r]=parseInt(i),"number"==typeof(s=e[i])){if(s){if(0===o.length)for(i=r+1;i>=0;--i)o[i]=[];for(i=r;i>=0;--i)o[i].push(n[i]);o[r+1].push(s)}}else t(s,o,n);return n.length>r&&n.pop(),o},numeric.cLU=function(t){var e,o,n,r,i,s,a=t[0],l=t[1],c=t[2],u=a.length,g=0;for(e=0;e<u;e++)a[e]>g&&(g=a[e]);g++;var h,p,d,f=Array(g),m=Array(g),y=numeric.rep([g],1/0),v=numeric.rep([g],-1/0);for(n=0;n<u;n++)e=a[n],o=l[n],o<y[e]&&(y[e]=o),o>v[e]&&(v[e]=o);for(e=0;e<g-1;e++)v[e]>v[e+1]&&(v[e+1]=v[e]);for(e=g-1;e>=1;e--)y[e]<y[e-1]&&(y[e-1]=y[e]);var _=0,b=0;for(e=0;e<g;e++)m[e]=numeric.rep([v[e]-y[e]+1],0),f[e]=numeric.rep([e-y[e]],0),_+=e-y[e]+1,b+=v[e]-e+1;for(n=0;n<u;n++)e=a[n],m[e][l[n]-y[e]]=c[n];for(e=0;e<g-1;e++)for(r=e-y[e],h=m[e],o=e+1;y[o]<=e&&o<g;o++)if(i=e-y[o],s=v[e]-e,p=m[o],d=p[i]/h[r],d){for(n=1;n<=s;n++)p[n+i]-=d*h[n+r];f[o][e-y[o]]=d}var u,E,S,h=[],p=[],k=[],T=[],C=[],x=[];for(u=0,E=0,e=0;e<g;e++){for(r=y[e],i=v[e],S=m[e],o=e;o<=i;o++)S[o-r]&&(h[u]=e,p[u]=o,k[u]=S[o-r],u++);for(S=f[e],o=r;o<e;o++)S[o-r]&&(T[E]=e,C[E]=o,x[E]=S[o-r],E++);T[E]=e,C[E]=e,x[E]=1,E++}return{U:[h,p,k],L:[T,C,x]}},numeric.cLUsolve=function(t,e){var o,n,r=t.L,i=t.U,s=numeric.clone(e),a=r[0],l=r[1],c=r[2],u=i[0],g=i[1],h=i[2],p=u.length,d=(a.length,s.length);for(n=0,o=0;o<d;o++){for(;l[n]<o;)s[o]-=c[n]*s[l[n]],n++;n++}for(n=p-1,o=d-1;o>=0;o--){for(;g[n]>o;)s[o]-=h[n]*s[g[n]],n--;s[o]/=h[n],n--}return s},numeric.cgrid=function(t,e){"number"==typeof t&&(t=[t,t]);var o,n,r,i=numeric.rep(t,-1);if("function"!=typeof e)switch(e){case"L":e=function(e,o){return e>=t[0]/2||o<t[1]/2};break;default:e=function(t,e){return!0}}for(r=0,o=1;o<t[0]-1;o++)for(n=1;n<t[1]-1;n++)e(o,n)&&(i[o][n]=r,r++);return i},numeric.cdelsq=function(t){var e,o,n,r,i,s=[[-1,0],[0,-1],[0,1],[1,0]],a=numeric.dim(t),l=a[0],c=a[1],u=[],g=[],h=[];for(e=1;e<l-1;e++)for(o=1;o<c-1;o++)if(!(t[e][o]<0)){for(n=0;n<4;n++)r=e+s[n][0],i=o+s[n][1],t[r][i]<0||(u.push(t[e][o]),g.push(t[r][i]),h.push(-1));u.push(t[e][o]),g.push(t[e][o]),h.push(4)}return[u,g,h]},numeric.cdotMV=function(t,e){var o,n,r,i=t[0],s=t[1],a=t[2],l=i.length;for(r=0,n=0;n<l;n++)i[n]>r&&(r=i[n]);for(r++,o=numeric.rep([r],0),n=0;n<l;n++)o[i[n]]+=a[n]*e[s[n]];return o},numeric.Spline=function(t,e,o,n,r){this.x=t,this.yl=e,this.yr=o,this.kl=n,this.kr=r},numeric.Spline.prototype._at=function(t,e){var t,o,n,r,i=this.x,s=this.yl,a=this.yr,l=this.kl,c=this.kr,u=numeric.add,g=numeric.sub,h=numeric.mul;o=g(h(l[e],i[e+1]-i[e]),g(a[e+1],s[e])),n=u(h(c[e+1],i[e]-i[e+1]),g(a[e+1],s[e])),r=(t-i[e])/(i[e+1]-i[e]);var p=r*(1-r);return u(u(u(h(1-r,s[e]),h(r,a[e+1])),h(o,p*(1-r))),h(n,p*r))},numeric.Spline.prototype.at=function(t){if("number"==typeof t){var e,o,n,r=this.x,i=r.length,s=Math.floor;for(e=0,o=i-1;o-e>1;)n=s((e+o)/2),r[n]<=t?e=n:o=n;return this._at(t,e)}var a,i=t.length,l=Array(i);for(a=i-1;-1!==a;--a)l[a]=this.at(t[a]);return l},numeric.Spline.prototype.diff=function(){var t,e,o,n=this.x,r=this.yl,i=this.yr,s=this.kl,a=this.kr,l=r.length,c=s,u=a,g=Array(l),h=Array(l),p=numeric.add,d=numeric.mul,f=numeric.div,m=numeric.sub;for(t=l-1;-1!==t;--t)e=n[t+1]-n[t],o=m(i[t+1],r[t]),g[t]=f(p(d(o,6),d(s[t],-4*e),d(a[t+1],-2*e)),e*e),h[t+1]=f(p(d(o,-6),d(s[t],2*e),d(a[t+1],4*e)),e*e);return new numeric.Spline(n,c,u,g,h)},numeric.Spline.prototype.roots=function(){var t=[],e=this.x,o=this.yl,n=this.yr,r=this.kl,i=this.kr;"number"==typeof o[0]&&(o=[o],n=[n],r=[r],i=[i]);var s,a,l,c,u,g,h,p,d,f,m,y,v,_,b,E,S,k,T,C,x,w,B,I=o.length,A=e.length-1,t=Array(I),N=Math.sqrt;for(s=0;s!==I;++s){for(c=o[s],u=n[s],g=r[s],h=i[s],p=[],a=0;a!==A;a++){for(a>0&&u[a]*c[a]<0&&p.push(e[a]),E=e[a+1]-e[a],e[a],m=c[a],y=u[a+1],d=g[a]/E,f=h[a+1]/E,b=function(t){return t*t}(d-f+3*(m-y))+12*f*m,v=f+3*m+2*d-3*y,_=3*(f+d+2*(m-y)),b<=0?(k=v/_,S=k>e[a]&&k<e[a+1]?[e[a],k,e[a+1]]:[e[a],e[a+1]]):(k=(v-N(b))/_,T=(v+N(b))/_,S=[e[a]],k>e[a]&&k<e[a+1]&&S.push(k),T>e[a]&&T<e[a+1]&&S.push(T),S.push(e[a+1])),x=S[0],k=this._at(x,a),l=0;l<S.length-1;l++)if(w=S[l+1],T=this._at(w,a),0!==k)if(0===T||k*T>0)x=w,k=T;else{for(var L=0;!((B=(k*w-T*x)/(k-T))<=x||B>=w);)if((C=this._at(B,a))*T>0)w=B,T=C,-1===L&&(k*=.5),L=-1;else{if(!(C*k>0))break;x=B,k=C,1===L&&(T*=.5),L=1}p.push(B),x=S[l+1],k=this._at(x,a)}else p.push(x),x=w,k=T;0===T&&p.push(w)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(t,e,o,n){var r,i=t.length,s=[],a=[],l=[],c=numeric.sub,u=numeric.mul,g=numeric.add;for(r=i-2;r>=0;r--)a[r]=t[r+1]-t[r],l[r]=c(e[r+1],e[r]);"string"!=typeof o&&"string"!=typeof n||(o=n="periodic");var h=[[],[],[]];switch(typeof o){case"undefined":s[0]=u(3/(a[0]*a[0]),l[0]),h[0].push(0,0),h[1].push(0,1),h[2].push(2/a[0],1/a[0]);break;case"string":s[0]=g(u(3/(a[i-2]*a[i-2]),l[i-2]),u(3/(a[0]*a[0]),l[0])),h[0].push(0,0,0),h[1].push(i-2,0,1),h[2].push(1/a[i-2],2/a[i-2]+2/a[0],1/a[0]);break;default:s[0]=o,h[0].push(0),h[1].push(0),h[2].push(1)}for(r=1;r<i-1;r++)s[r]=g(u(3/(a[r-1]*a[r-1]),l[r-1]),u(3/(a[r]*a[r]),l[r])),h[0].push(r,r,r),h[1].push(r-1,r,r+1),h[2].push(1/a[r-1],2/a[r-1]+2/a[r],1/a[r]);switch(typeof n){case"undefined":s[i-1]=u(3/(a[i-2]*a[i-2]),l[i-2]),h[0].push(i-1,i-1),h[1].push(i-2,i-1),h[2].push(1/a[i-2],2/a[i-2]);break;case"string":h[1][h[1].length-1]=0;break;default:s[i-1]=n,h[0].push(i-1),h[1].push(i-1),h[2].push(1)}s="number"!=typeof s[0]?numeric.transpose(s):[s];var p=Array(s.length);if("string"==typeof o)for(r=p.length-1;-1!==r;--r)p[r]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(h)),s[r]),p[r][i-1]=p[r][0];else for(r=p.length-1;-1!==r;--r)p[r]=numeric.cLUsolve(numeric.cLU(h),s[r]);return p="number"==typeof e[0]?p[0]:numeric.transpose(p),new numeric.Spline(t,e,e,p,p)},numeric.fftpow2=function t(e,o){var n=e.length;if(1!==n){var r,i,s=Math.cos,a=Math.sin,l=Array(n/2),c=Array(n/2),u=Array(n/2),g=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],g[i]=o[r],--r,l[i]=e[r],c[i]=o[r];t(l,c),t(u,g),i=n/2;var h,p,d,f=-6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),h=f*r,p=s(h),d=a(h),e[r]=l[i]+p*u[i]-d*g[i],o[r]=c[i]+p*g[i]+d*u[i]}},numeric._ifftpow2=function t(e,o){var n=e.length;if(1!==n){var r,i,s=Math.cos,a=Math.sin,l=Array(n/2),c=Array(n/2),u=Array(n/2),g=Array(n/2);for(i=n/2,r=n-1;-1!==r;--r)--i,u[i]=e[r],g[i]=o[r],--r,l[i]=e[r],c[i]=o[r];t(l,c),t(u,g),i=n/2;var h,p,d,f=6.283185307179586/n;for(r=n-1;-1!==r;--r)--i,-1===i&&(i=n/2-1),h=f*r,p=s(h),d=a(h),e[r]=l[i]+p*u[i]-d*g[i],o[r]=c[i]+p*g[i]+d*u[i]}},numeric.ifftpow2=function(t,e){numeric._ifftpow2(t,e),numeric.diveq(t,t.length),numeric.diveq(e,e.length)},numeric.convpow2=function(t,e,o,n){numeric.fftpow2(t,e),numeric.fftpow2(o,n);var r,i,s,a,l,c=t.length;for(r=c-1;-1!==r;--r)i=t[r],a=e[r],s=o[r],l=n[r],t[r]=i*s-a*l,e[r]=i*l+a*s;numeric.ifftpow2(t,e)},numeric.T.prototype.fft=function(){var t,e,o=this.x,n=this.y,r=o.length,i=Math.log,s=i(2),a=Math.ceil(i(2*r-1)/s),l=Math.pow(2,a),c=numeric.rep([l],0),u=numeric.rep([l],0),g=Math.cos,h=Math.sin,p=-3.141592653589793/r,d=numeric.rep([l],0),f=numeric.rep([l],0);Math.floor(r/2);for(t=0;t<r;t++)d[t]=o[t];if(void 0!==n)for(t=0;t<r;t++)f[t]=n[t];for(c[0]=1,t=1;t<=l/2;t++)e=p*t*t,c[t]=g(e),u[t]=h(e),c[l-t]=g(e),u[l-t]=h(e);var m=new numeric.T(d,f),y=new numeric.T(c,u);return m=m.mul(y),numeric.convpow2(m.x,m.y,numeric.clone(y.x),numeric.neg(y.y)),m=m.mul(y),m.x.length=r,m.y.length=r,m},numeric.T.prototype.ifft=function(){var t,e,o=this.x,n=this.y,r=o.length,i=Math.log,s=i(2),a=Math.ceil(i(2*r-1)/s),l=Math.pow(2,a),c=numeric.rep([l],0),u=numeric.rep([l],0),g=Math.cos,h=Math.sin,p=3.141592653589793/r,d=numeric.rep([l],0),f=numeric.rep([l],0);Math.floor(r/2);for(t=0;t<r;t++)d[t]=o[t];if(void 0!==n)for(t=0;t<r;t++)f[t]=n[t];for(c[0]=1,t=1;t<=l/2;t++)e=p*t*t,c[t]=g(e),u[t]=h(e),c[l-t]=g(e),u[l-t]=h(e);var m=new numeric.T(d,f),y=new numeric.T(c,u);return m=m.mul(y),numeric.convpow2(m.x,m.y,numeric.clone(y.x),numeric.neg(y.y)),m=m.mul(y),m.x.length=r,m.y.length=r,m.div(r)},numeric.gradient=function(t,e){var o=e.length,n=t(e);if(isNaN(n))throw new Error("gradient: f(x) is a NaN!");var r,i,s,a,l,c,u,g,h,p,d=Math.max,f=numeric.clone(e),m=Array(o),d=(numeric.div,numeric.sub,Math.max),y=Math.abs,v=Math.min,_=0;for(r=0;r<o;r++)for(var b=d(1e-6*n,1e-8);;){if(++_>20)throw new Error("Numerical gradient fails");if(f[r]=e[r]+b,i=t(f),f[r]=e[r]-b,s=t(f),f[r]=e[r],isNaN(i)||isNaN(s))b/=16;else{if(m[r]=(i-s)/(2*b),l=e[r]-b,c=e[r],u=e[r]+b,g=(i-n)/b,h=(n-s)/b,p=d(y(m[r]),y(n),y(i),y(s),y(l),y(c),y(u),1e-8),a=v(d(y(g-m[r]),y(h-m[r]),y(g-h))/p,b/p),!(a>.001))break;b/=16}}return m},numeric.uncmin=function(t,e,o,n,r,i,s){var a=numeric.gradient;void 0===s&&(s={}),void 0===o&&(o=1e-8),void 0===n&&(n=function(e){return a(t,e)}),void 0===r&&(r=1e3),e=numeric.clone(e);var l,c,u=e.length,g=t(e);if(isNaN(g))throw new Error("uncmin: f(x0) is a NaN!");var h=Math.max,p=numeric.norm2;o=h(o,numeric.epsilon);var d,f,m,y,v,_,b,E,S,k,T=s.Hinv||numeric.identity(u),C=numeric.dot,x=(numeric.inv,numeric.sub),w=numeric.add,B=numeric.tensor,I=numeric.div,A=numeric.mul,N=numeric.all,L=numeric.isFinite,R=numeric.neg,D=0,O="";for(f=n(e);D<r;){if("function"==typeof i&&i(D,e,g,f,T)){O="Callback returned true";break}if(!N(L(f))){O="Gradient has Infinity or NaN";break}if(d=R(C(T,f)),!N(L(d))){O="Search direction has Infinity or NaN";break}if((k=p(d))<o){O="Newton step smaller than tol";break}for(S=1,c=C(f,d),v=e;D<r&&!(S*k<o)&&(y=A(d,S),v=w(e,y),(l=t(v))-g>=.1*S*c||isNaN(l));)S*=.5,++D;if(S*k<o){O="Line search step size smaller than tol";break}if(D===r){O="maxit reached during line search";break}m=n(v),_=x(m,f),E=C(_,y),b=C(T,_),T=x(w(T,A((E+C(_,b))/(E*E),B(y,y))),I(w(B(b,y),B(y,b)),E)),e=v,g=l,f=m,++D}return{solution:e,f:g,gradient:f,invHessian:T,iterations:D,message:O}},numeric.Dopri=function(t,e,o,n,r,i,s){this.x=t,this.y=e,this.f=o,this.ymid=n,this.iterations=r,this.events=s,this.message=i},numeric.Dopri.prototype._at=function(t,e){function o(t){return t*t}var n,r,i,s,a,l,t,c,u,g,h,p=this,d=p.x,f=p.y,m=p.f,y=p.ymid,v=(d.length,Math.floor,numeric.add),_=numeric.mul,b=numeric.sub;return n=d[e],r=d[e+1],s=f[e],a=f[e+1],c=r-n,i=n+.5*c,l=y[e],u=b(m[e],_(s,1/(n-i)+2/(n-r))),g=b(m[e+1],_(a,1/(r-i)+2/(r-n))),h=[o(t-r)*(t-i)/o(n-r)/(n-i),o(t-n)*o(t-r)/o(n-i)/o(r-i),o(t-n)*(t-i)/o(r-n)/(r-i),(t-n)*o(t-r)*(t-i)/o(n-r)/(n-i),(t-r)*o(t-n)*(t-i)/o(n-r)/(r-i)],v(v(v(v(_(s,h[0]),_(l,h[1])),_(a,h[2])),_(u,h[3])),_(g,h[4]))},numeric.Dopri.prototype.at=function(t){var e,o,n,r=Math.floor;if("number"!=typeof t){var i=t.length,s=Array(i);for(e=i-1;-1!==e;--e)s[e]=this.at(t[e]);return s}var a=this.x;for(e=0,o=a.length-1;o-e>1;)n=r(.5*(e+o)),a[n]<=t?e=n:o=n;return this._at(t,e)},numeric.dopri=function(t,e,o,n,r,i,s){void 0===r&&(r=1e-6),void 0===i&&(i=1e3);var a,l,c,u,g,h,p,d,f,m,y,v,_,b=[t],E=[o],S=[n(t,o)],k=[],T=[.075,.225],C=[44/45,-56/15,32/9],x=[19372/6561,-25360/2187,64448/6561,-212/729],w=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],B=[35/384,0,500/1113,125/192,-2187/6784,11/84],I=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],A=[.2,.3,.8,8/9,1,1],N=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],L=0,R=(e-t)/10,D=0,O=numeric.add,j=numeric.mul,M=(Math.max,Math.min),P=Math.abs,F=numeric.norminf,H=Math.pow,U=numeric.any,G=numeric.lt,V=numeric.and,W=(numeric.sub,new numeric.Dopri(b,E,S,k,-1,""));for("function"==typeof s&&(y=s(t,o));t<e&&D<i;)if(++D,t+R>e&&(R=e-t),a=n(t+A[0]*R,O(o,j(.2*R,S[L]))),l=n(t+A[1]*R,O(O(o,j(T[0]*R,S[L])),j(T[1]*R,a))),c=n(t+A[2]*R,O(O(O(o,j(C[0]*R,S[L])),j(C[1]*R,a)),j(C[2]*R,l))),u=n(t+A[3]*R,O(O(O(O(o,j(x[0]*R,S[L])),j(x[1]*R,a)),j(x[2]*R,l)),j(x[3]*R,c))),g=n(t+A[4]*R,O(O(O(O(O(o,j(w[0]*R,S[L])),j(w[1]*R,a)),j(w[2]*R,l)),j(w[3]*R,c)),j(w[4]*R,u))),f=O(O(O(O(O(o,j(S[L],R*B[0])),j(l,R*B[2])),j(c,R*B[3])),j(u,R*B[4])),j(g,R*B[5])),h=n(t+R,f),p=O(O(O(O(O(j(S[L],R*N[0]),j(l,R*N[2])),j(c,R*N[3])),j(u,R*N[4])),j(g,R*N[5])),j(h,R*N[6])),m="number"==typeof p?P(p):F(p),m>r){if(R=.2*R*H(r/m,.25),t+R===t){W.msg="Step size became too small";break}}else{if(k[L]=O(O(O(O(O(O(o,j(S[L],R*I[0])),j(l,R*I[2])),j(c,R*I[3])),j(u,R*I[4])),j(g,R*I[5])),j(h,R*I[6])),++L,b[L]=t+R,E[L]=f,S[L]=h,"function"==typeof s){var z,q,X=t,K=t+.5*R;if(v=s(K,k[L-1]),_=V(G(y,0),G(0,v)),U(_)||(X=K,K=t+R,y=v,v=s(K,f),_=V(G(y,0),G(0,v))),U(_)){for(var Y,$,Q=0,J=1,Z=1;;){if("number"==typeof y)q=(Z*v*X-J*y*K)/(Z*v-J*y);else for(q=K,d=y.length-1;-1!==d;--d)y[d]<0&&v[d]>0&&(q=M(q,(Z*v[d]*X-J*y[d]*K)/(Z*v[d]-J*y[d])));if(q<=X||q>=K)break;z=W._at(q,L-1),$=s(q,z),Y=V(G(y,0),G(0,$)),U(Y)?(K=q,v=$,_=Y,Z=1,-1===Q?J*=.5:J=1,Q=-1):(X=q,y=$,J=1,1===Q?Z*=.5:Z=1,Q=1)}return f=W._at(.5*(t+q),L-1),W.f[L]=n(q,z),W.x[L]=q,W.y[L]=z,W.ymid[L-1]=f,W.events=_,W.iterations=D,W}}t+=R,o=f,y=v,R=M(.8*R*H(r/m,.25),4*R)}return W.iterations=D,W},numeric.LU=function(t,e){e=e||!1;var o,n,r,i,s,a,l,c,u,g=Math.abs,h=t.length,p=h-1,d=new Array(h);for(e||(t=numeric.clone(t)),r=0;r<h;++r){for(l=r,a=t[r],u=g(a[r]),n=r+1;n<h;++n)i=g(t[n][r]),u<i&&(u=i,l=n);for(d[r]=l,l!=r&&(t[r]=t[l],t[l]=a,a=t[r]),s=a[r],o=r+1;o<h;++o)t[o][r]/=s;for(o=r+1;o<h;++o){for(c=t[o],n=r+1;n<p;++n)c[n]-=c[r]*a[n],++n,c[n]-=c[r]*a[n];n===p&&(c[n]-=c[r]*a[n])}}return{LU:t,P:d}},numeric.LUsolve=function(t,e){var o,n,r,i,s,a=t.LU,l=a.length,c=numeric.clone(e),u=t.P;for(o=l-1;-1!==o;--o)c[o]=e[o];for(o=0;o<l;++o)for(r=u[o],u[o]!==o&&(s=c[o],c[o]=c[r],c[r]=s),i=a[o],n=0;n<o;++n)c[o]-=c[n]*i[n];for(o=l-1;o>=0;--o){for(i=a[o],n=o+1;n<l;++n)c[o]-=c[n]*i[n];c[o]/=i[o]}return c},numeric.solve=function(t,e,o){return numeric.LUsolve(numeric.LU(t,o),e)},numeric.echelonize=function(t){var e,o,n,r,i,s,a,l,c=numeric.dim(t),u=c[0],g=c[1],h=numeric.identity(u),p=Array(u),d=Math.abs,f=numeric.diveq;for(t=numeric.clone(t),e=0;e<u;++e){for(n=0,i=t[e],s=h[e],o=1;o<g;++o)d(i[n])<d(i[o])&&(n=o);for(p[e]=n,f(s,i[n]),f(i,i[n]),o=0;o<u;++o)if(o!==e){for(a=t[o],l=a[n],r=g-1;-1!==r;--r)a[r]-=i[r]*l;for(a=h[o],r=u-1;-1!==r;--r)a[r]-=s[r]*l}}return{I:h,A:t,P:p}},numeric.__solveLP=function(t,e,o,n,r,i,s){var a,l,c,u,g=numeric.sum,h=(numeric.log,numeric.mul),p=numeric.sub,d=numeric.dot,f=numeric.div,m=numeric.add,y=t.length,v=o.length,_=!1,b=1,E=(numeric.transpose(e),numeric.svd,numeric.transpose),S=(numeric.leq,Math.sqrt),k=Math.abs,T=(numeric.muleq,numeric.norminf,numeric.any,Math.min),C=numeric.all,x=numeric.gt,w=Array(y),B=Array(v),I=(numeric.rep([v],1),numeric.solve),A=p(o,d(e,i)),N=d(t,t);for(c=0;c<r;++c){var L,R;for(L=v-1;-1!==L;--L)B[L]=f(e[L],A[L]);var D=E(B);for(L=y-1;-1!==L;--L)w[L]=g(D[L]);b=.25*k(N/d(t,w));var O=100*S(N/d(w,w));for((!isFinite(b)||b>O)&&(b=O),u=m(t,h(b,w)),l=d(D,B),L=y-1;-1!==L;--L)l[L][L]+=1;R=I(l,f(u,b),!0);var j=f(A,d(e,R)),M=1;for(L=v-1;-1!==L;--L)j[L]<0&&(M=T(M,-.999*j[L]));if(a=p(i,h(R,M)),A=p(o,d(e,a)),!C(x(A,0)))return{solution:i,message:"",iterations:c};if(i=a,b<n)return{solution:a,message:"",iterations:c};if(s){var P=d(t,u),F=d(e,u);for(_=!0,L=v-1;-1!==L;--L)if(P*F[L]<0){_=!1;break}}else _=!(i[y-1]>=0);if(_)return{solution:a,message:"Unbounded",iterations:c}}return{solution:i,message:"maximum iteration count exceeded",iterations:c}},numeric._solveLP=function(t,e,o,n,r){var i,s=t.length,a=o.length,l=(numeric.sum,numeric.log,numeric.mul,numeric.sub),c=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([s],0).concat([1])),g=numeric.rep([a,1],-1),h=numeric.blockMatrix([[e,g]]),p=o,i=numeric.rep([s],0).concat(Math.max(0,numeric.sup(numeric.neg(o)))+1),d=numeric.__solveLP(u,h,p,n,r,i,!1),f=numeric.clone(d.solution);if(f.length=s,numeric.inf(l(o,c(e,f)))<0)return{solution:NaN,message:"Infeasible",iterations:d.iterations};var m=numeric.__solveLP(t,e,o,n,r-d.iterations,f,!0);return m.iterations+=d.iterations,m},numeric.solveLP=function(t,e,o,n,r,i,s){if(void 0===s&&(s=1e3),void 0===i&&(i=numeric.epsilon),void 0===n)return numeric._solveLP(t,e,o,i,s);var a,l=n.length,c=n[0].length,u=e.length,g=numeric.echelonize(n),h=numeric.rep([c],0),p=g.P,d=[];for(a=p.length-1;-1!==a;--a)h[p[a]]=1;for(a=c-1;-1!==a;--a)0===h[a]&&d.push(a);var f=numeric.getRange,m=numeric.linspace(0,l-1),y=numeric.linspace(0,u-1),v=f(n,m,d),_=f(e,y,p),b=f(e,y,d),E=numeric.dot,S=numeric.sub,k=E(_,g.I),T=S(b,E(k,v)),C=S(o,E(k,r)),x=Array(p.length),w=Array(d.length);for(a=p.length-1;-1!==a;--a)x[a]=t[p[a]];for(a=d.length-1;-1!==a;--a)w[a]=t[d[a]];var B=S(w,E(x,E(g.I,v))),I=numeric._solveLP(B,T,C,i,s),A=I.solution;if(A!==A)return I;var N=E(g.I,S(r,E(v,A))),L=Array(t.length);for(a=p.length-1;-1!==a;--a)L[p[a]]=N[a];for(a=d.length-1;-1!==a;--a)L[d[a]]=A[a];return{solution:L,message:I.message,iterations:I.iterations}},numeric.MPStoLP=function(t){function e(e){throw new Error("MPStoLP: "+e+"\nLine "+o+": "+t[o]+"\nCurrent state: "+a[s]+"\n")}t instanceof String&&t.split("\n");var o,n,r,i,s=0,a=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],l=t.length,c=0,u={},g=[],h=0,p={},d=0,f=[],m=[],y=[];for(o=0;o<l;++o){r=t[o];var v=r.match(/\S*/g),_=[];for(n=0;n<v.length;++n)""!==v[n]&&_.push(v[n]);if(0!==_.length){for(n=0;n<a.length&&r.substr(0,a[n].length)!==a[n];++n);if(n<a.length){if(s=n,1===n&&(i=_[1]),6===n)return{name:i,c:f,A:numeric.transpose(m),b:y,rows:u,vars:p}}else switch(s){case 0:case 1:e("Unexpected line");case 2:switch(_[0]){case"N":0===c?c=_[1]:e("Two or more N rows");break;case"L":u[_[1]]=h,g[h]=1,y[h]=0,++h;break;case"G":u[_[1]]=h,g[h]=-1,y[h]=0,++h;break;case"E":u[_[1]]=h,g[h]=0,y[h]=0,++h;break;default:e("Parse error "+numeric.prettyPrint(_))}break;case 3:p.hasOwnProperty(_[0])||(p[_[0]]=d,f[d]=0,m[d]=numeric.rep([h],0),++d);var b=p[_[0]];for(n=1;n<_.length;n+=2)if(_[n]!==c){var E=u[_[n]];m[b][E]=(g[E]<0?-1:1)*parseFloat(_[n+1])}else f[b]=parseFloat(_[n+1]);break;case 4:for(n=1;n<_.length;n+=2)y[u[_[n]]]=(g[u[_[n]]]<0?-1:1)*parseFloat(_[n+1]);break;case 5:break;case 6:e("Internal error")}}}e("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(t,e,o,n,r,i,s){function a(t){var e,n,r=this,i=t.length,s=0,a=r.i=r.j=r.m=0;for(r.S=[],r.c=[],i||(t=[i++]);s<o;)r.S[s]=s++;for(s=0;s<o;s++)e=r.S[s],a=u(a+e+t[s%i]),n=r.S[a],r.S[s]=n,r.S[a]=e;r.g=function(t){var e=r.S,n=u(r.i+1),i=e[n],s=u(r.j+i),a=e[s];e[n]=a,e[s]=i;for(var l=e[u(i+a)];--t;)n=u(n+1),i=e[n],s=u(s+i),a=e[s],e[n]=a,e[s]=i,l=l*o+e[u(i+a)];return r.i=n,r.j=s,l},r.g(o)}function l(t,e,o,n,r){if(o=[],r=typeof t,e&&"object"==r)for(n in t)if(n.indexOf("S")<5)try{o.push(l(t[n],e-1))}catch(t){}return o.length?o:t+("string"!=r?"\0":"")}function c(t,e,o,n){for(t+="",o=0,n=0;n<t.length;n++)e[u(n)]=u((o^=19*e[u(n)])+t.charCodeAt(n));t="";for(n in e)t+=String.fromCharCode(e[n]);return t}function u(t){return t&o-1}e.seedrandom=function(n,u){var g,h=[];return n=c(l(u?[n,t]:arguments.length?n:[(new Date).getTime(),t,window],3),h),g=new a(h),c(g.S,t),e.random=function(){for(var t=g.g(6),e=s,n=0;t<r;)t=(t+n)*o,e*=o,n=g.g(1);for(;t>=i;)t/=2,e/=2,n>>>=1;return(t+n)/e},n},s=e.pow(o,6),r=e.pow(2,r),i=2*r,c(e.random(),t)}([],numeric.seedrandom,256,0,52),function(t){function e(t){if("object"!=typeof t)return t;var o,n=[],r=t.length;for(o=0;o<r;o++)n[o+1]=e(t[o]);return n}function o(t){if("object"!=typeof t)return t;var e,n=[],r=t.length;for(e=1;e<r;e++)n[e-1]=o(t[e]);return n}function n(t,e,o){var n,r,i,s,a;for(i=1;i<=o;i+=1){for(t[i][i]=1/t[i][i],a=-t[i][i],n=1;n<i;n+=1)t[n][i]=a*t[n][i];if(s=i+1,o<s)break;for(r=s;r<=o;r+=1)for(a=t[i][r],t[i][r]=0,n=1;n<=i;n+=1)t[n][r]=t[n][r]+a*t[n][i]}}function r(t,e,o,n){var r,i,s,a;for(i=1;i<=o;i+=1){for(a=0,r=1;r<i;r+=1)a+=t[r][i]*n[r];n[i]=(n[i]-a)/t[i][i]}for(s=1;s<=o;s+=1)for(i=o+1-s,n[i]=n[i]/t[i][i],a=-n[i],r=1;r<i;r+=1)n[r]=n[r]+a*t[r][i]}function i(t,e,o,n){var r,i,s,a,l,c;for(i=1;i<=o;i+=1){if(n[1]=i,c=0,s=i-1,s<1){if((c=t[i][i]-c)<=0)break;t[i][i]=Math.sqrt(c)}else{for(a=1;a<=s;a+=1){for(l=t[a][i],r=1;r<a;r+=1)l-=t[r][i]*t[r][a];l/=t[a][a],t[a][i]=l,c+=l*l}if((c=t[i][i]-c)<=0)break;t[i][i]=Math.sqrt(c)}n[1]=0}}function s(t,e,o,s,a,l,c,u,g,h,p,d,f,m,y,v){function _(){return y[A+f]=y[A+f+1],y[A+f+1]=0,d[f]=0,f-=1,m[2]=m[2]+1,0}var b,E,S,k,T,C,x,w,B,I,A,N,L,R,D,O,j,M,P,F,H,U,G,V,W,z,q;L=Math.min(s,h),S=2*s+L*(L+5)/2+2*h+1,V=1e-60;do{V+=V,W=1+.1*V,z=1+.2*V}while(W<=1||z<=1);for(b=1;b<=s;b+=1)y[b]=e[b];for(b=s+1;b<=S;b+=1)y[b]=0;for(b=1;b<=h;b+=1)d[b]=0;if(T=[],0===v[1]){if(i(t,o,s,T),0!==T[1])return void(v[1]=2);r(t,o,s,e),n(t,o,s)}else{for(E=1;E<=s;E+=1)for(a[E]=0,b=1;b<=E;b+=1)a[E]=a[E]+t[b][E]*e[b];for(E=1;E<=s;E+=1)for(e[E]=0,b=E;b<=s;b+=1)e[E]=e[E]+t[E][b]*a[b]}for(l[1]=0,E=1;E<=s;E+=1)for(a[E]=e[E],l[1]=l[1]+y[E]*a[E],y[E]=0,b=E+1;b<=s;b+=1)t[b][E]=0;for(l[1]=-l[1]/2,v[1]=0,x=s,w=x+s,A=w+L,B=A+L+1,I=B+L*(L+1)/2,R=I+h,b=1;b<=h;b+=1){for(O=0,E=1;E<=s;E+=1)O+=c[E][b]*c[E][b];y[R+b]=Math.sqrt(O)}for(f=0,m[1]=0,m[2]=0,q=0;;){if(999===(q=function(){for(m[1]=m[1]+1,S=I,b=1;b<=h;b+=1){for(S+=1,O=-u[b],E=1;E<=s;E+=1)O+=c[E][b]*a[E];if(Math.abs(O)<V&&(O=0),b>p)y[S]=O;else if(y[S]=-Math.abs(O),O>0){for(E=1;E<=s;E+=1)c[E][b]=-c[E][b];u[b]=-u[b]}}for(b=1;b<=f;b+=1)y[I+d[b]]=0;for(N=0,D=0,b=1;b<=h;b+=1)y[I+b]<D*y[R+b]&&(N=b,D=y[I+b]/y[R+b]);return 0===N?999:0}()))return;for(;0!==(q=function(){for(b=1;b<=s;b+=1){for(O=0,E=1;E<=s;E+=1)O+=t[E][b]*c[E][N];y[b]=O}for(k=x,b=1;b<=s;b+=1)y[k+b]=0;for(E=f+1;E<=s;E+=1)for(b=1;b<=s;b+=1)y[k+b]=y[k+b]+t[b][E]*y[E];for(U=!0,b=f;b>=1;b-=1){for(O=y[b],S=B+b*(b+3)/2,k=S-b,E=b+1;E<=f;E+=1)O-=y[S]*y[w+E],S+=E;if(O/=y[k],y[w+b]=O,d[b]<p)break;if(O<0)break;U=!1,C=b}if(!U)for(j=y[A+C]/y[w+C],b=1;b<=f&&!(d[b]<p)&&!(y[w+b]<0);b+=1)(D=y[A+b]/y[w+b])<j&&(j=D,C=b);for(O=0,b=x+1;b<=x+s;b+=1)O+=y[b]*y[b];if(Math.abs(O)<=V){if(U)return v[1]=1,999;for(b=1;b<=f;b+=1)y[A+b]=y[A+b]-j*y[w+b];return y[A+f+1]=y[A+f+1]+j,700}for(O=0,b=1;b<=s;b+=1)O+=y[x+b]*c[b][N];for(M=-y[I+N]/O,G=!0,U||j<M&&(M=j,G=!1),b=1;b<=s;b+=1)a[b]=a[b]+M*y[x+b],Math.abs(a[b])<V&&(a[b]=0);for(l[1]=l[1]+M*O*(M/2+y[A+f+1]),b=1;b<=f;b+=1)y[A+b]=y[A+b]-M*y[w+b];if(y[A+f+1]=y[A+f+1]+M,!G){for(O=-u[N],E=1;E<=s;E+=1)O+=a[E]*c[E][N];if(N>p)y[I+N]=O;else if(y[I+N]=-Math.abs(O),O>0){for(E=1;E<=s;E+=1)c[E][N]=-c[E][N];u[N]=-u[N]}return 700}for(f+=1,d[f]=N,S=B+(f-1)*f/2+1,b=1;b<=f-1;b+=1)y[S]=y[b],S+=1;if(f===s)y[S]=y[s];else{for(b=s;b>=f+1&&0!==y[b]&&(P=Math.max(Math.abs(y[b-1]),Math.abs(y[b])),F=Math.min(Math.abs(y[b-1]),Math.abs(y[b])),D=y[b-1]>=0?Math.abs(P*Math.sqrt(1+F*F/(P*P))):-Math.abs(P*Math.sqrt(1+F*F/(P*P))),P=y[b-1]/D,F=y[b]/D,1!==P);b-=1)if(0===P)for(y[b-1]=F*D,E=1;E<=s;E+=1)D=t[E][b-1],t[E][b-1]=t[E][b],t[E][b]=D;else for(y[b-1]=D,H=F/(1+P),E=1;E<=s;E+=1)D=P*t[E][b-1]+F*t[E][b],t[E][b]=H*(t[E][b-1]+D)-t[E][b],t[E][b-1]=D;y[S]=y[f]}return 0}());){if(999===q)return;if(700===q)if(C===f)_();else{for(;function(){if(S=B+C*(C+1)/2+1,k=S+C,0===y[k])return 798;if(P=Math.max(Math.abs(y[k-1]),Math.abs(y[k])),F=Math.min(Math.abs(y[k-1]),Math.abs(y[k])),D=y[k-1]>=0?Math.abs(P*Math.sqrt(1+F*F/(P*P))):-Math.abs(P*Math.sqrt(1+F*F/(P*P))),P=y[k-1]/D,F=y[k]/D,1===P)return 798;if(0===P){for(b=C+1;b<=f;b+=1)D=y[k-1],y[k-1]=y[k],y[k]=D,k+=b;for(b=1;b<=s;b+=1)D=t[b][C],t[b][C]=t[b][C+1],t[b][C+1]=D}else{for(H=F/(1+P),b=C+1;b<=f;b+=1)D=P*y[k-1]+F*y[k],y[k]=H*(y[k-1]+D)-y[k],y[k-1]=D,k+=b;for(b=1;b<=s;b+=1)D=P*t[b][C]+F*t[b][C+1],t[b][C+1]=H*(t[b][C]+D)-t[b][C+1],t[b][C]=D}return 0}(),797===(q=function(){for(k=S-C,b=1;b<=C;b+=1)y[k]=y[S],S+=1,k+=1;return y[A+C]=y[A+C+1],d[C]=d[C+1],C+=1,C<f?797:0}()););_()}}}}function a(t,n,r,i,a,l){t=e(t),n=e(n),r=e(r);var c,u,g,h,p,d,f=[],m=[],y=[],v=[],_=[];if(a=a||0,l=l?e(l):[void 0,0],i=i?e(i):[],u=t.length-1,g=r[1].length-1,!i)for(c=1;c<=g;c+=1)i[c]=0;for(c=1;c<=g;c+=1)m[c]=0;for(h=0,p=Math.min(u,g),c=1;c<=u;c+=1)y[c]=0;for(f[1]=0,c=1;c<=2*u+p*(p+5)/2+2*g+1;c+=1)v[c]=0;for(c=1;c<=2;c+=1)_[c]=0;return s(t,n,u,u,y,f,r,i,u,g,a,m,h,_,v,l),d="",1===l[1]&&(d="constraints are inconsistent, no solution!"),2===l[1]&&(d="matrix D in quadratic function is not positive definite!"),{solution:o(y),value:o(f),unconstrained_solution:o(n),iterations:o(_),iact:o(m),message:d}}t.solveQP=a}(numeric),numeric.svd=function(t){function e(t,e){return t=Math.abs(t),e=Math.abs(e),t>e?t*Math.sqrt(1+e*e/t/t):0==e?t:e*Math.sqrt(1+t*t/e/e)}var o,n=numeric.epsilon,r=1e-64/n,i=0,s=0,a=0,l=0,c=0,u=numeric.clone(t),g=u.length,h=u[0].length;if(g<h)throw"Need more rows than columns";var p=new Array(h),d=new Array(h);for(s=0;s<h;s++)p[s]=d[s]=0;var f=numeric.rep([h,h],0),m=0,y=0,v=0,_=0,b=0,E=0,S=0;for(s=0;s<h;s++){for(p[s]=y,S=0,c=s+1,a=s;a<g;a++)S+=u[a][s]*u[a][s];if(S<=r)y=0;else for(m=u[s][s],y=Math.sqrt(S),m>=0&&(y=-y),v=m*y-S,u[s][s]=m-y,a=c;a<h;a++){for(S=0,l=s;l<g;l++)S+=u[l][s]*u[l][a];for(m=S/v,l=s;l<g;l++)u[l][a]+=m*u[l][s]}for(d[s]=y,S=0,a=c;a<h;a++)S+=u[s][a]*u[s][a];if(S<=r)y=0;else{for(m=u[s][s+1],y=Math.sqrt(S),m>=0&&(y=-y),v=m*y-S,u[s][s+1]=m-y,a=c;a<h;a++)p[a]=u[s][a]/v;for(a=c;a<g;a++){for(S=0,l=c;l<h;l++)S+=u[a][l]*u[s][l];for(l=c;l<h;l++)u[a][l]+=S*p[l]}}(b=Math.abs(d[s])+Math.abs(p[s]))>_&&(_=b)}for(s=h-1;-1!=s;s+=-1){if(0!=y){for(v=y*u[s][s+1],a=c;a<h;a++)f[a][s]=u[s][a]/v;for(a=c;a<h;a++){for(S=0,l=c;l<h;l++)S+=u[s][l]*f[l][a];for(l=c;l<h;l++)f[l][a]+=S*f[l][s]}}for(a=c;a<h;a++)f[s][a]=0,f[a][s]=0;f[s][s]=1,y=p[s],c=s}for(s=h-1;-1!=s;s+=-1){for(c=s+1,y=d[s],a=c;a<h;a++)u[s][a]=0;if(0!=y){for(v=u[s][s]*y,a=c;a<h;a++){for(S=0,l=c;l<g;l++)S+=u[l][s]*u[l][a];for(m=S/v,l=s;l<g;l++)u[l][a]+=m*u[l][s]}for(a=s;a<g;a++)u[a][s]=u[a][s]/y}else for(a=s;a<g;a++)u[a][s]=0;u[s][s]+=1}for(n*=_,l=h-1;-1!=l;l+=-1)for(var k=0;k<50;k++){var T=!1;for(c=l;-1!=c;c+=-1){if(Math.abs(p[c])<=n){T=!0;break}if(Math.abs(d[c-1])<=n)break}if(!T){i=0,S=1;var C=c-1;for(s=c;s<l+1&&(m=S*p[s],p[s]=i*p[s],!(Math.abs(m)<=n));s++)for(y=d[s],v=e(m,y),d[s]=v,i=y/v,S=-m/v,a=0;a<g;a++)b=u[a][C],E=u[a][s],u[a][C]=b*i+E*S,u[a][s]=-b*S+E*i}if(E=d[l],c==l){if(E<0)for(d[l]=-E,a=0;a<h;a++)f[a][l]=-f[a][l];break}if(k>=49)throw"Error: no convergence.";for(_=d[c],b=d[l-1],y=p[l-1],v=p[l],m=((b-E)*(b+E)+(y-v)*(y+v))/(2*v*b),y=e(m,1),m=m<0?((_-E)*(_+E)+v*(b/(m-y)-v))/_:((_-E)*(_+E)+v*(b/(m+y)-v))/_,i=1,S=1,s=c+1;s<l+1;s++){for(y=p[s],b=d[s],v=S*y,y*=i,E=e(m,v),p[s-1]=E,i=m/E,S=v/E,m=_*i+y*S,y=-_*S+y*i,v=b*S,b*=i,a=0;a<h;a++)_=f[a][s-1],E=f[a][s],f[a][s-1]=_*i+E*S,f[a][s]=-_*S+E*i;for(E=e(m,v),d[s-1]=E,i=m/E,S=v/E,m=i*y+S*b,_=-S*y+i*b,a=0;a<g;a++)b=u[a][s-1],E=u[a][s],u[a][s-1]=b*i+E*S,u[a][s]=-b*S+E*i}p[c]=0,p[l]=m,d[l]=_}for(s=0;s<d.length;s++)d[s]<n&&(d[s]=0);for(s=0;s<h;s++)for(a=s-1;a>=0;a--)if(d[a]<d[s]){for(i=d[a],d[a]=d[s],d[s]=i,l=0;l<u.length;l++)o=u[l][s],u[l][s]=u[l][a],u[l][a]=o;for(l=0;l<f.length;l++)o=f[l][s],f[l][s]=f[l][a],f[l][a]=o;s=a}return{U:u,S:d,V:f}}}).call(exports,__webpack_require__(1))},function(t,e){!function(t){"use strict";function e(t){return new RegExp("^(("+t.join(")|(")+"))\\b")}function o(t){return t.scopes[t.scopes.length-1]}var n=e(["and","or","not","is"]),r=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],i=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],s={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},a={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};t.registerHelper("hintWords","python",r.concat(i)),t.defineMode("python",function(l,c){function u(t,e){if(t.sol()&&"py"==o(e).type){var n=o(e).offset;if(t.eatSpace()){var r=t.indentation();return r>n?p(t,e,"py"):r<n&&d(t,e)&&(e.errorToken=!0),null}var i=g(t,e);return n>0&&d(t,e)&&(i+=" "+m),i}return g(t,e)}function g(t,e){if(t.eatSpace())return null;if("#"==t.peek())return t.skipToEnd(),"comment";if(t.match(/^[0-9\.]/,!1)){var o=!1;if(t.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(o=!0),t.match(/^\d+\.\d*/)&&(o=!0),t.match(/^\.\d+/)&&(o=!0),o)return t.eat(/J/i),"number";var r=!1;if(t.match(/^0x[0-9a-f]+/i)&&(r=!0),t.match(/^0b[01]+/i)&&(r=!0),t.match(/^0o[0-7]+/i)&&(r=!0),t.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(t.eat(/J/i),r=!0),t.match(/^0(?![\dx])/i)&&(r=!0),r)return t.eat(/L/i),"number"}return t.match(x)?(e.tokenize=h(t.current()),e.tokenize(t,e)):t.match(b)||t.match(_)?null:t.match(v)||t.match(E)||t.match(n)?"operator":t.match(y)?null:t.match(w)?"keyword":t.match(B)?"builtin":t.match(/^(self|cls)\b/)?"variable-2":t.match(S)?"def"==e.lastToken||"class"==e.lastToken?"def":"variable":(t.next(),m)}function h(t){function e(e,r){for(;!e.eol();)if(e.eatWhile(/[^'"\\]/),e.eat("\\")){if(e.next(),o&&e.eol())return n}else{if(e.match(t))return r.tokenize=u,n;e.eat(/['"]/)}if(o){if(c.singleLineStringErrors)return m;r.tokenize=u}return n}for(;"rub".indexOf(t.charAt(0).toLowerCase())>=0;)t=t.substr(1);var o=1==t.length,n="string";return e.isString=!0,e}function p(t,e,n){var r=0,i=null;if("py"==n)for(;"py"!=o(e).type;)e.scopes.pop();r=o(e).offset+("py"==n?l.indentUnit:k),"py"==n||t.match(/^(\s|#.*)*$/,!1)||(i=t.column()+1),e.scopes.push({offset:r,type:n,align:i})}function d(t,e){for(var n=t.indentation();o(e).offset>n;){if("py"!=o(e).type)return!0;e.scopes.pop()}return o(e).offset!=n}function f(t,e){var n=e.tokenize(t,e),r=t.current();if("."==r)return n=t.match(S,!1)?null:m,null==n&&"meta"==e.lastStyle&&(n="meta"),n;if("@"==r)return c.version&&3==parseInt(c.version,10)?t.match(S,!1)?"meta":"operator":t.match(S,!1)?"meta":m;"variable"!=n&&"builtin"!=n||"meta"!=e.lastStyle||(n="meta"),"pass"!=r&&"return"!=r||(e.dedent+=1),"lambda"==r&&(e.lambda=!0),":"!=r||e.lambda||"py"!=o(e).type||p(t,e,"py");var i=1==r.length?"[({".indexOf(r):-1;if(-1!=i&&p(t,e,"])}".slice(i,i+1)),-1!=(i="])}".indexOf(r))){if(o(e).type!=r)return m;e.scopes.pop()}return e.dedent>0&&t.eol()&&"py"==o(e).type&&(e.scopes.length>1&&e.scopes.pop(),e.dedent-=1),n}var m="error",y=c.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),v=c.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),_=c.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),b=c.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))");if(c.version&&3==parseInt(c.version,10))var E=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!@]"),S=c.identifiers||new RegExp("^[_A-Za-z¡-￿][_A-Za-z0-9¡-￿]*");else var E=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),S=c.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*");var k=c.hangingIndent||l.indentUnit,T=r,C=i;if(void 0!=c.extra_keywords&&(T=T.concat(c.extra_keywords)),void 0!=c.extra_builtins&&(C=C.concat(c.extra_builtins)),c.version&&3==parseInt(c.version,10)){T=T.concat(a.keywords),C=C.concat(a.builtins);var x=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{T=T.concat(s.keywords),C=C.concat(s.builtins);var x=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var w=e(T),B=e(C);return{startState:function(t){return{tokenize:u,scopes:[{offset:t||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(t,e){var o=e.errorToken;o&&(e.errorToken=!1);var n=f(t,e);e.lastStyle=n;var r=t.current();return r&&n&&(e.lastToken=r),t.eol()&&e.lambda&&(e.lambda=!1),o?n+" "+m:n},indent:function(e,n){if(e.tokenize!=u)return e.tokenize.isString?t.Pass:0;var r=o(e),i=n&&n.charAt(0)==r.type;return null!=r.align?r.align-(i?1:0):i&&e.scopes.length>1?e.scopes[e.scopes.length-2].offset:r.offset},lineComment:"#",fold:"indent"}}),t.defineMIME("text/x-python","python");t.defineMIME("text/x-cython",{name:"python",extra_keywords:function(t){return t.split(" ")}("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}(CodeMirror)},function(t,e,o){(function(t){var e=function(t,e,o,n,r){"use strict";function i(e){const o=function(){};var n=new o;return n.name="G"+(t._groupCount=(t._groupCount||0)+1),n.resources=t.ref(),n.xobj=t.ref({Type:"XObject",Subtype:"Form",FormType:1,BBox:e,Group:{S:"Transparency",CS:"DeviceRGB",I:!0,K:!1},Resources:n.resources}),n.xobj.write(""),n.savedMatrix=t._ctm,n.savedPage=t.page,Vt.push(n),t._ctm=[1,0,0,1,0,0],t.page={width:t.page.width,height:t.page.height,write:function(t){n.xobj.write(t)},fonts:{},xobjects:{},ext_gstates:{},patterns:{}},n}function s(e){if(e!==Vt.pop())throw"Group not matching";Object.keys(t.page.fonts).length&&(e.resources.data.Font=t.page.fonts),Object.keys(t.page.xobjects).length&&(e.resources.data.XObject=t.page.xobjects),Object.keys(t.page.ext_gstates).length&&(e.resources.data.ExtGState=t.page.ext_gstates),Object.keys(t.page.patterns).length&&(e.resources.data.Pattern=t.page.patterns),e.resources.end(),e.xobj.end(),t._ctm=e.savedMatrix,t.page=e.savedPage}function a(e){t.page.xobjects[e.name]=e.xobj,t.addContent("/"+e.name+" Do")}function l(e,o){var n="M"+(t._maskCount=(t._maskCount||0)+1),r=t.ref({Type:"ExtGState",CA:1,ca:1,BM:"Normal",SMask:{S:"Luminosity",G:e.xobj,BC:o?[0,0,0]:[1,1,1]}});r.end(),t.page.ext_gstates[n]=r,t.addContent("/"+n+" gs")}function c(t,e,o,n){var r=new function(){};return r.group=t,r.dx=e,r.dy=o,r.matrix=n||[1,0,0,1,0,0],r}function u(e,o){var n="P"+(t._patternCount=(t._patternCount||0)+1),r=t.ref({Type:"Pattern",PatternType:1,PaintType:1,TilingType:2,BBox:[0,0,e.dx,e.dy],XStep:e.dx,YStep:e.dy,Matrix:k(t._ctm,e.matrix),Resources:{ProcSet:["PDF","Text","ImageB","ImageC","ImageI"],XObject:function(){var t={};return t[e.group.name]=e.group.xobj,t}()}});r.write("/"+e.group.name+" Do"),r.end(),t.page.patterns[n]=r,o?(t.addContent("/Pattern CS"),t.addContent("/"+n+" SCN")):(t.addContent("/Pattern cs"),t.addContent("/"+n+" scn"))}function g(e,o){t.page.fonts[e.id]||(t.page.fonts[e.id]=e.ref()),t.addContent("BT").addContent("/"+e.id+" "+o+" Tf")}function h(e,o,n,r,i,s){t.addContent(R(e)+" "+R(o)+" "+R(-n)+" "+R(-r)+" "+R(i)+" "+R(s)+" Tm")}function p(e,o){var n=e&&o?2:o?1:e?0:3;t.addContent(n+" Tr")}function d(e,o){function n(t){s+=t.glyph,0!==t.kern&&(i.push("<"+s+"> "+R(t.kern)),s="")}function r(){s.length&&(i.push("<"+s+"> 0"),s=""),i.length&&(t.addContent("["+i.join(" ")+"] TJ"),i=[])}var i=[],s="";const a=o.fauxItalic?-.25:0;for(var l=0;l<e.length;l++){const c=e[l];if(c.hidden||N(c.width,0))r();else if(c.continuous)n(c);else{r();const u=Math.cos(c.rotate),g=Math.sin(c.rotate);h(u*c.scale,g*c.scale,u*a-g,g*a+u,c.x,c.y),n(c)}}r()}function f(){t.addContent("ET")}function m(e){"PDFPattern"===e[0].constructor.name?(t.fillOpacity(e[1]),u(e[0],!1)):t.fillColor(e[0],e[1])}function y(e){"PDFPattern"===e[0].constructor.name?(t.strokeOpacity(e[1]),u(e[0],!0)):t.strokeColor(e[0],e[1])}function v(e,o,n,r,i){var s=t.ref({Type:"Annot",Subtype:"Link",Rect:[e,o,n,r],Border:[0,0,0],A:{S:"URI",URI:new String(i)}});s.end(),zt.push(s)}function _(t){var e=function(t,e,o,n){this.error=n,this.nodeName=t,this.nodeValue=o,this.nodeType=e,this.attributes=Object.create(null),this.childNodes=[],this.parentNode=null,this.id="",this.textContent="",this.classList=[]};e.prototype.getAttribute=function(t){return null!=this.attributes[t]?this.attributes[t]:null},e.prototype.getElementById=function(t){var e=null;return function o(n){if(!e&&1===n.nodeType){n.id===t&&(e=n);for(var r=0;r<n.childNodes.length;r++)o(n.childNodes[r])}}(this),e},e.prototype.getElementsByTagName=function(t){var e=[];return function o(n){if(1===n.nodeType){n.nodeName===t&&e.push(n);for(var r=0;r<n.childNodes.length;r++)o(n.childNodes[r])}}(this),e};for(var o,n,r=new tt(t.trim()),i=!1,s=function(){var t,o;if(t=r.match(/^<([\w:.-]+)\s*/,!0)){for(var n=new e(t[1],1,null,i);t=r.match(/^([\w:.-]+)(?:\s*=\s*"([^"]*)"|\s*=\s*'([^']*)')?\s*/,!0);){var a=t[1],l=b(t[2]||t[3]||"");n.attributes[a]?(Mt('parseXml: duplicate attribute "'+a+'"'),i=!0):(n.attributes[a]=l,"id"===a&&(n.id=l),"class"===a&&(n.classList=l.split(" ")))}if(r.match(/^>/)){for(;o=s();)n.childNodes.push(o),o.parentNode=n,n.textContent+=3===o.nodeType||4===o.nodeType?o.nodeValue:o.textContent;return(t=r.match(/^<\/([\w:.-]+)\s*>/,!0))?t[1]===n.nodeName?n:(Mt('parseXml: tag not matching, opening "'+n.nodeName+'" & closing "'+t[1]+'"'),i=!0,n):(Mt('parseXml: tag not matching, opening "'+n.nodeName+'" & not closing'),i=!0,n)}if(r.match(/^\/>/))return n;Mt('parseXml: tag could not be parsed "'+n.nodeName+'"'),i=!0}else{if(t=r.match(/^<!--[\s\S]*?-->/))return new e(null,8,t,i);if(t=r.match(/^<\?[\s\S]*?\?>/))return new e(null,7,t,i);if(t=r.match(/^<!DOCTYPE\s*([\s\S]*?)>/))return new e(null,10,t,i);if(t=r.match(/^<!\[CDATA\[([\s\S]*?)\]\]>/,!0))return new e("#cdata-section",4,t[1],i);if(t=r.match(/^([^<]+)/,!0))return new e("#text",3,b(t[1]),i)}};n=s();)1!==n.nodeType||o?(1===n.nodeType||3===n.nodeType&&""!==n.nodeValue.trim())&&Mt("parseXml: data after document end has been discarded"):o=n;return r.matchAll()&&Mt("parseXml: parsing error"),o}function b(t){return t.replace(/&(?:#([0-9]+)|#[xX]([0-9A-Fa-f]+)|([0-9A-Za-z]+));/g,function(t,e,o,n){return e?String.fromCharCode(parseInt(e,10)):o?String.fromCharCode(parseInt(o,16)):n&&$[n]?String.fromCharCode($[n]):t})}function E(t){var e,o;return t=(t||"").trim(),(e=K[t])?o=[e.slice(),1]:(e=t.match(/^cmyk\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)$/i))?(e[1]=parseInt(e[1]),e[2]=parseInt(e[2]),e[3]=parseInt(e[3]),e[4]=parseFloat(e[4]),e[1]<=100&&e[2]<=100&&e[3]<=100&&e[4]<=100&&(o=[e.slice(1,5),1])):(e=t.match(/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)$/i))?(e[1]=parseInt(e[1]),e[2]=parseInt(e[2]),e[3]=parseInt(e[3]),e[4]=parseFloat(e[4]),e[1]<256&&e[2]<256&&e[3]<256&&e[4]<=1&&(o=[e.slice(1,4),e[4]])):(e=t.match(/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)$/i))?(e[1]=parseInt(e[1]),e[2]=parseInt(e[2]),e[3]=parseInt(e[3]),e[1]<256&&e[2]<256&&e[3]<256&&(o=[e.slice(1,4),1])):(e=t.match(/^rgb\(\s*([0-9.]+)%\s*,\s*([0-9.]+)%\s*,\s*([0-9.]+)%\s*\)$/i))?(e[1]=2.55*parseFloat(e[1]),e[2]=2.55*parseFloat(e[2]),e[3]=2.55*parseFloat(e[3]),e[1]<256&&e[2]<256&&e[3]<256&&(o=[e.slice(1,4),1])):(e=t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i))?o=[[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)],1]:(e=t.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i))&&(o=[[17*parseInt(e[1],16),17*parseInt(e[2],16),17*parseInt(e[3],16)],1]),Ht?Ht(o,t):o}function S(t,e,o){var n=t[0].slice(),r=t[1]*e;if(o){for(var i=0;i<t.length;i++)n[i]*=r;return[n,1]}return[n,r]}function k(){for(var t=arguments[0],e=1;e<arguments.length;e++)t=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}(t,arguments[e]);return t}function T(t,e){return[e[0]*t[0]+e[2]*t[1]+e[4],e[1]*t[0]+e[3]*t[1]+e[5]]}function C(){for(var e=t._ctm,o=Vt.length-1;o>=0;o--)e=k(Vt[o].savedMatrix,e);return e}function x(){return(new nt).M(0,0).L(t.page.width,0).L(t.page.width,t.page.height).L(0,t.page.height).transform(w(C())).getBoundingBox()}function w(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[3]*t[4])/e,(t[1]*t[4]-t[0]*t[5])/e]}function B(t){var e=R(t[0]),o=R(t[1]),n=R(t[2]),r=R(t[3]),i=R(t[4]),s=R(t[5]);if(L(e*r-o*n,0))return[e,o,n,r,i,s]}function I(t){var e=t[2]||0,o=t[1]||0,n=t[0]||0;if(N(e,0)&&N(o,0))return[];if(N(e,0))return[-n/o];var r=o*o-4*e*n;return L(r,0)&&r>0?[(-o+Math.sqrt(r))/(2*e),(-o-Math.sqrt(r))/(2*e)]:N(r,0)?[-o/(2*e)]:[]}function A(t,e){return(e[0]||0)+(e[1]||0)*t+(e[2]||0)*t*t+(e[3]||0)*t*t*t}function N(t,e){return Math.abs(t-e)<1e-10}function L(t,e){return Math.abs(t-e)>=1e-10}function R(t){return t>-1e21&&t<1e21?Math.round(1e6*t)/1e6:0}function D(t){return"object"==typeof t&&null!==t&&"number"==typeof t.length}function O(t){for(var e,o=new tt((t||"").trim()),n=[1,0,0,1,0,0];e=o.match(/^([A-Za-z]+)\s*[(]([^(]+)[)]/,!0);){for(var r,i=e[1],s=[],a=new tt(e[2].trim());r=a.matchNumber();)s.push(Number(r)),a.matchSeparator();if("matrix"===i&&6===s.length)n=k(n,[s[0],s[1],s[2],s[3],s[4],s[5]]);else if("translate"===i&&2===s.length)n=k(n,[1,0,0,1,s[0],s[1]]);else if("translate"===i&&1===s.length)n=k(n,[1,0,0,1,s[0],0]);else if("scale"===i&&2===s.length)n=k(n,[s[0],0,0,s[1],0,0]);else if("scale"===i&&1===s.length)n=k(n,[s[0],0,0,s[0],0,0]);else if("rotate"===i&&3===s.length){var l=s[0]*Math.PI/180;n=k(n,[1,0,0,1,s[1],s[2]],[Math.cos(l),Math.sin(l),-Math.sin(l),Math.cos(l),0,0],[1,0,0,1,-s[1],-s[2]])}else if("rotate"===i&&1===s.length){var l=s[0]*Math.PI/180;n=k(n,[Math.cos(l),Math.sin(l),-Math.sin(l),Math.cos(l),0,0])}else if("skewX"===i&&1===s.length){var l=s[0]*Math.PI/180;n=k(n,[1,0,Math.tan(l),1,0,0])}else{if("skewY"!==i||1!==s.length)return;var l=s[0]*Math.PI/180;n=k(n,[1,Math.tan(l),0,1,0,0])}o.matchSeparator()}if(!o.matchAll())return n}function j(t,e,o,n,r,i){var s=(t||"").trim().match(/^(none)$|^x(Min|Mid|Max)Y(Min|Mid|Max)(?:\s+(meet|slice))?$/)||[],a=s[1]||s[4]||"meet",l=s[2]||"Mid",c=s[3]||"Mid",u=e/n,g=o/r,h={Min:0,Mid:.5,Max:1}[l]-(i||0),p={Min:0,Mid:.5,Max:1}[c]-(i||0);return"slice"===a?g=u=Math.max(u,g):"meet"===a&&(g=u=Math.min(u,g)),[u,0,0,g,h*(e-n*u),p*(o-r*g)]}function M(t){var e=Object.create(null);t=(t||"").trim().split(/;/);for(var o=0;o<t.length;o++){var n=(t[o].split(":")[0]||"").trim(),r=(t[o].split(":")[1]||"").trim();n&&(e[n]=r)}if(e.marker&&(e["marker-start"]||(e["marker-start"]=e.marker),e["marker-mid"]||(e["marker-mid"]=e.marker),e["marker-end"]||(e["marker-end"]=e.marker)),e.font){for(var i=null,s=null,a="normal",l="normal",c="normal",u=e.font.split(/\s+/),o=0;o<u.length;o++)switch(u[o]){case"normal":break;case"italic":case"oblique":a=u[o];break;case"small-caps":c=u[o];break;case"bold":case"bolder":case"lighter":case"100":case"200":case"300":case"400":case"500":case"600":case"700":case"800":case"900":l=u[o];break;default:s?i?i+=" "+u[o]:i=u[o]:s=u[o].split("/")[0]}e["font-style"]||(e["font-style"]=a),e["font-variant"]||(e["font-variant"]=c),e["font-weight"]||(e["font-weight"]=l),e["font-size"]||(e["font-size"]=s),e["font-family"]||(e["font-family"]=i)}return e}function P(t){for(var e,o=t.split(/(?=[.#])/g),n=[],r=[],i=[],s=0;s<o.length;s++)if(e=o[s].match(/^[#]([_A-Za-z0-9-]+)$/))n.push(e[1]);else if(e=o[s].match(/^[.]([_A-Za-z0-9-]+)$/))r.push(e[1]);else if(e=o[s].match(/^([_A-Za-z0-9-]+)$/))i.push(e[1]);else if("*"!==o[s])return;return{tags:i,ids:n,classes:r,specificity:1e4*n.length+100*r.length+i.length}}function F(t,e){if(1!==t.nodeType)return!1;for(var o=0;o<e.tags.length;o++)if(e.tags[o]!==t.nodeName)return!1;for(var o=0;o<e.ids.length;o++)if(e.ids[o]!==t.id)return!1;for(var o=0;o<e.classes.length;o++)if(-1===t.classList.indexOf(e.classes[o]))return!1;return!0}function H(t){for(var e=Object.create(null),o=Object.create(null),n=0;n<qt.length;n++){var r=qt[n];if(F(t,r.selector))for(var i in r.css)o[i]>r.selector.specificity||(e[i]=r.css[i],o[i]=r.selector.specificity)}return e}function U(t,e){return t.concat(e.slice(t.length))}function G(t,e){return Math.max(t.ascender,(t.bbox[3]||t.bbox.maxY)*(t.scale||1))*e/1e3}function V(t,e){return t||console.trace("font"),Math.min(t.descender,(t.bbox[1]||t.bbox.minY)*(t.scale||1))*e/1e3}function W(t,e){return(t.xHeight||.5*(t.ascender-t.descender))*e/1e3}function z(t,e,o,n){var r,i;switch(o){case"middle":r=.5*W(t,e);break;case"central":r=.5*(V(t,e)+G(t,e));break;case"after-edge":case"text-after-edge":r=V(t,e);break;case"alphabetic":case"auto":case"baseline":r=0;break;case"mathematical":r=.5*G(t,e);break;case"hanging":r=.8*G(t,e);break;case"before-edge":case"text-before-edge":r=G(t,e);break;default:r=0}switch(n){case"baseline":i=0;break;case"super":i=.6*e;break;case"sub":i=-.6*e;break;default:i=n}return r-i}function q(t,e,o){for(var n=t.encode(""+o),r=n[0],i=n[1],s=[],a=0;a<r.length;a++){var l=t.unicode?t.unicode[parseInt(r[a],16)]:[o.charCodeAt(a)];s.push({glyph:r[a],unicode:l,kern:i[a].advanceWidth-i[a].xAdvance,width:i[a].advanceWidth*e/1e3,xOffset:i[a].xOffset*e/1e3,yOffset:i[a].yOffset*e/1e3,xAdvance:i[a].xAdvance*e/1e3,yAdvance:i[a].yAdvance*e/1e3})}return s}function X(t,e){switch(t.nodeName){case"use":return new lt(t,e);case"symbol":return new ct(t,e);case"g":return new ut(t,e);case"a":return new gt(t,e);case"svg":return new ht(t,e);case"image":return new pt(t,e);case"rect":return new yt(t,e);case"circle":return new vt(t,e);case"ellipse":return new _t(t,e);case"line":return new bt(t,e);case"polyline":return new Et(t,e);case"polygon":return new St(t,e);case"path":return new kt(t,e);case"text":return new Nt(t,e);case"tspan":return new It(t,e);case"textPath":return new At(t,e);case"#text":case"#cdata-section":return new Bt(t,e);default:return new rt(t,e)}}const K={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgrey:[211,211,211],lightgreen:[144,238,144],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0]},Y={black:[K.black,1],white:[K.white,1],transparent:[K.black,0]},$={quot:34,amp:38,lt:60,gt:62,apos:39,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Q={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0},J={A3:!0,A4:!0,a3:!0,a4:!0},Z={color:{inherit:!0,initial:void 0},visibility:{inherit:!0,initial:"visible",values:{hidden:"hidden",collapse:"hidden",visible:"visible"}},fill:{inherit:!0,initial:Y.black},stroke:{inherit:!0,initial:"none"},"stop-color":{inherit:!1,initial:Y.black},"fill-opacity":{inherit:!0,initial:1},"stroke-opacity":{inherit:!0,initial:1},"stop-opacity":{inherit:!1,initial:1},"fill-rule":{inherit:!0,initial:"nonzero",values:{nonzero:"nonzero",evenodd:"evenodd"}},"clip-rule":{inherit:!0,initial:"nonzero",values:{nonzero:"nonzero",evenodd:"evenodd"}},"stroke-width":{inherit:!0,initial:1},"stroke-dasharray":{inherit:!0,initial:[]},"stroke-dashoffset":{inherit:!0,initial:0},"stroke-miterlimit":{inherit:!0,initial:4},"stroke-linejoin":{inherit:!0,initial:"miter",values:{miter:"miter",round:"round",bevel:"bevel"}},"stroke-linecap":{inherit:!0,initial:"butt",values:{butt:"butt",round:"round",square:"square"}},"font-size":{inherit:!0,initial:16,values:{"xx-small":9,"x-small":10,small:13,medium:16,large:18,"x-large":24,"xx-large":32}},"font-family":{inherit:!0,initial:"sans-serif"},"font-weight":{inherit:!0,initial:"normal",values:{600:"bold",700:"bold",800:"bold",900:"bold",bold:"bold",bolder:"bold",500:"normal",400:"normal",300:"normal",200:"normal",100:"normal",normal:"normal",lighter:"normal"}},"font-style":{inherit:!0,initial:"normal",values:{italic:"italic",oblique:"italic",normal:"normal"}},"text-anchor":{inherit:!0,initial:"start",values:{start:"start",middle:"middle",end:"end"}},direction:{inherit:!0,initial:"ltr",values:{ltr:"ltr",rtl:"rtl"}},"dominant-baseline":{inherit:!0,initial:"baseline",values:{auto:"baseline",baseline:"baseline","before-edge":"before-edge","text-before-edge":"before-edge",middle:"middle",central:"central","after-edge":"after-edge","text-after-edge":"after-edge",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"mathematical"}},"alignment-baseline":{inherit:!1,initial:void 0,values:{auto:"baseline",baseline:"baseline","before-edge":"before-edge","text-before-edge":"before-edge",middle:"middle",central:"central","after-edge":"after-edge","text-after-edge":"after-edge",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"mathematical"}},"baseline-shift":{inherit:!0,initial:"baseline",values:{baseline:"baseline",sub:"sub",super:"super"}},"word-spacing":{inherit:!0,initial:0,values:{normal:0}},"letter-spacing":{inherit:!0,initial:0,values:{normal:0}},"text-decoration":{inherit:!1,initial:"none",values:{none:"none",underline:"underline",overline:"overline","line-through":"line-through"}},"xml:space":{inherit:!0,initial:"default",css:"white-space",values:{preserve:"preserve",default:"default",pre:"preserve","pre-line":"preserve","pre-wrap":"preserve",nowrap:"default"}},"marker-start":{inherit:!0,initial:"none"},"marker-mid":{inherit:!0,initial:"none"},"marker-end":{inherit:!0,initial:"none"},opacity:{inherit:!1,initial:1},transform:{inherit:!1,initial:[1,0,0,1,0,0]},display:{inherit:!1,initial:"inline",values:{none:"none",inline:"inline",block:"inline"}},"clip-path":{inherit:!1,initial:"none"},mask:{inherit:!1,initial:"none"},overflow:{inherit:!1,initial:"hidden",values:{hidden:"hidden",scroll:"hidden",visible:"visible"}}};var tt=function(t){this.match=function(e,o){var n=t.match(e);if(n&&0===n.index)return t=t.substring(n[0].length),o?n:n[0]},this.matchSeparator=function(){return this.match(/^(?:\s*,\s*|\s*|)/)},this.matchSpace=function(){return this.match(/^(?:\s*)/)},this.matchLengthUnit=function(){return this.match(/^(?:px|pt|cm|mm|in|pc|em|ex|%|)/)},this.matchNumber=function(){return this.match(/^(?:[-+]?(?:[0-9]+[.][0-9]+|[0-9]+[.]|[.][0-9]+|[0-9]+)(?:[eE][-+]?[0-9]+)?)/)},this.matchAll=function(){return this.match(/^[\s\S]+/)}},et=function(t,e,o,n,r,i,s,a){for(var l=6*Gt,c=[t,-3*t+3*o,3*t-6*o+3*r,3*o-t-3*r+s],u=[e,-3*e+3*n,3*e-6*n+3*i,3*n-e-3*i+a],g=[-3*t+3*o,6*t-12*o+6*r,-3*t+9*o-9*r+3*s],h=[-3*e+3*n,6*e-12*n+6*i,-3*e+9*n-9*i+3*a],p=[0],d=1;d<=l;d++){var f=(d-.5)/l,m=A(f,g)/l,y=A(f,h)/l,v=Math.sqrt(m*m+y*y);p[d]=p[d-1]+v}this.totalLength=p[l],this.startPoint=[t,e,N(t,o)&&N(e,n)?Math.atan2(i-n,r-o):Math.atan2(n-e,o-t)],this.endPoint=[s,a,N(r,s)&&N(i,a)?Math.atan2(i-n,r-o):Math.atan2(a-i,s-r)],this.getBoundingBox=function(){var t,e=A(0,c),o=A(0,u),n=A(1,c),r=A(1,u);e>n&&(t=n,n=e,e=t),o>r&&(t=r,r=o,o=t);for(var i=I(g),s=0;s<i.length;s++)if(i[s]>=0&&i[s]<=1){var a=A(i[s],c);a<e&&(e=a),a>n&&(n=a)}for(var l=I(h),s=0;s<l.length;s++)if(l[s]>=0&&l[s]<=1){var p=A(l[s],u);p<o&&(o=p),p>r&&(r=p)}return[e,o,n,r]},this.getPointAtLength=function(t){if(N(t,0))return this.startPoint;if(N(t,this.totalLength))return this.endPoint;if(!(t<0||t>this.totalLength))for(var e=1;e<=l;e++){var o=p[e-1],n=p[e];if(o<=t&&t<=n){var r=(e-(n-t)/(n-o))/l,i=A(r,c),s=A(r,u),a=A(r,g),d=A(r,h);return[i,s,Math.atan2(d,a)]}}}},ot=function(t,e,o,n){this.totalLength=Math.sqrt((o-t)*(o-t)+(n-e)*(n-e)),this.startPoint=[t,e,Math.atan2(n-e,o-t)],this.endPoint=[o,n,Math.atan2(n-e,o-t)],this.getBoundingBox=function(){return[Math.min(this.startPoint[0],this.endPoint[0]),Math.min(this.startPoint[1],this.endPoint[1]),Math.max(this.startPoint[0],this.endPoint[0]),Math.max(this.startPoint[1],this.endPoint[1])]},this.getPointAtLength=function(t){if(t>=0&&t<=this.totalLength){var e=t/this.totalLength||0;return[this.startPoint[0]+e*(this.endPoint[0]-this.startPoint[0]),this.startPoint[1]+e*(this.endPoint[1]-this.startPoint[1]),this.startPoint[2]]}}},nt=function(){this.pathCommands=[],this.pathSegments=[],this.startPoint=null,this.endPoint=null,this.totalLength=0;var e,o,n,r=0,i=0,s=0,a=0;this.move=function(t,e){return r=s=t,i=a=e,null},this.line=function(t,e){var o=new ot(s,a,t,e);return s=t,a=e,o},this.curve=function(t,e,o,n,r,i){var l=new et(s,a,t,e,o,n,r,i);return s=r,a=i,l},this.close=function(){var t=new ot(s,a,r,i);return s=r,a=i,t},this.addCommand=function(t){this.pathCommands.push(t);var e=this[t[0]].apply(this,t.slice(3));e&&(e.hasStart=t[1],e.hasEnd=t[2],this.startPoint=this.startPoint||e.startPoint,this.endPoint=e.endPoint,this.pathSegments.push(e),this.totalLength+=e.totalLength)},this.M=function(t,o){return this.addCommand(["move",!0,!0,t,o]),e="M",this},this.m=function(t,e){return this.M(s+t,a+e)},this.Z=this.z=function(){return this.addCommand(["close",!0,!0]),e="Z",this},this.L=function(t,o){return this.addCommand(["line",!0,!0,t,o]),e="L",this},this.l=function(t,e){return this.L(s+t,a+e)},this.H=function(t){return this.L(t,a)},this.h=function(t){return this.L(s+t,a)},this.V=function(t){return this.L(s,t)},this.v=function(t){return this.L(s,a+t)},this.C=function(t,r,i,s,a,l){return this.addCommand(["curve",!0,!0,t,r,i,s,a,l]),e="C",o=i,n=s,this},this.c=function(t,e,o,n,r,i){return this.C(s+t,a+e,s+o,a+n,s+r,a+i)},this.S=function(t,r,i,l){return this.C(s+("C"===e?s-o:0),a+("C"===e?a-n:0),t,r,i,l)},this.s=function(t,r,i,l){return this.C(s+("C"===e?s-o:0),a+("C"===e?a-n:0),s+t,a+r,s+i,a+l)},this.Q=function(t,r,i,l){var c=s+2/3*(t-s),u=a+2/3*(r-a),g=i+2/3*(t-i),h=l+2/3*(r-l);return this.addCommand(["curve",!0,!0,c,u,g,h,i,l]),e="Q",o=t,n=r,this},this.q=function(t,e,o,n){return this.Q(s+t,a+e,s+o,a+n)},this.T=function(t,r){return this.Q(s+("Q"===e?s-o:0),a+("Q"===e?a-n:0),t,r)},this.t=function(t,r){return this.Q(s+("Q"===e?s-o:0),a+("Q"===e?a-n:0),s+t,a+r)},this.A=function(t,o,n,r,i,l,c){if(N(t,0)||N(o,0))this.addCommand(["line",!0,!0,l,c]);else{n*=Math.PI/180,t=Math.abs(t),o=Math.abs(o),r=1*!!r,i=1*!!i;var u=Math.cos(n)*(s-l)/2+Math.sin(n)*(a-c)/2,g=Math.cos(n)*(a-c)/2-Math.sin(n)*(s-l)/2,h=u*u/(t*t)+g*g/(o*o);h>1&&(t*=Math.sqrt(h),o*=Math.sqrt(h));var p=Math.sqrt(Math.max(0,t*t*o*o-t*t*g*g-o*o*u*u)/(t*t*g*g+o*o*u*u)),d=(r===i?-1:1)*p*t*g/o,f=(r===i?1:-1)*p*o*u/t,m=Math.cos(n)*d-Math.sin(n)*f+(s+l)/2,y=Math.sin(n)*d+Math.cos(n)*f+(a+c)/2,v=Math.atan2((g-f)/o,(u-d)/t),_=Math.atan2((-g-f)/o,(-u-d)/t);0===i&&_-v>0?_-=2*Math.PI:1===i&&_-v<0&&(_+=2*Math.PI);for(var b=Math.ceil(Math.abs(_-v)/(Math.PI/Gt)),E=0;E<b;E++){var S=v+E*(_-v)/b,k=v+(E+1)*(_-v)/b,T=4/3*Math.tan((k-S)/4),C=m+Math.cos(n)*t*(Math.cos(S)-T*Math.sin(S))-Math.sin(n)*o*(Math.sin(S)+T*Math.cos(S)),x=y+Math.sin(n)*t*(Math.cos(S)-T*Math.sin(S))+Math.cos(n)*o*(Math.sin(S)+T*Math.cos(S)),w=m+Math.cos(n)*t*(Math.cos(k)+T*Math.sin(k))-Math.sin(n)*o*(Math.sin(k)-T*Math.cos(k)),B=y+Math.sin(n)*t*(Math.cos(k)+T*Math.sin(k))+Math.cos(n)*o*(Math.sin(k)-T*Math.cos(k)),I=m+Math.cos(n)*t*Math.cos(k)-Math.sin(n)*o*Math.sin(k),A=y+Math.sin(n)*t*Math.cos(k)+Math.cos(n)*o*Math.sin(k);this.addCommand(["curve",0===E,E===b-1,C,x,w,B,I,A])}}return e="A",this},this.a=function(t,e,o,n,r,i,l){return this.A(t,e,o,n,r,s+i,a+l)},this.path=function(t){for(var e,o,n,r=new tt((t||"").trim());e=r.match(/^[astvzqmhlcASTVZQMHLC]/);){r.matchSeparator();for(var i=[];o=J[e+i.length]?r.match(/^[01]/):r.matchNumber();)r.matchSeparator(),i.length===Q[e]&&(this[e].apply(this,i),i=[],"M"===e?e="L":"m"===e&&(e="l")),i.push(Number(o));if(i.length!==Q[e])return void Mt("SvgPath: command "+e+" with "+i.length+" numbers");this[e].apply(this,i)}return(n=r.matchAll())&&Mt("SvgPath: unexpected string "+n),this},this.getBoundingBox=function(){for(var t=[1/0,1/0,-1/0,-1/0],e=0;e<this.pathSegments.length;e++)!function(e){e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3])}(this.pathSegments[e].getBoundingBox());return t[0]===1/0&&(t[0]=0),t[1]===1/0&&(t[1]=0),t[2]===-1/0&&(t[2]=0),t[3]===-1/0&&(t[3]=0),t},this.getPointAtLength=function(t){if(t>=0&&t<=this.totalLength){for(var e,o=0;o<this.pathSegments.length;o++){if(e=this.pathSegments[o].getPointAtLength(t))return e;t-=this.pathSegments[o].totalLength}return this.endPoint}},this.transform=function(t){this.pathSegments=[],this.startPoint=null,this.endPoint=null,this.totalLength=0;for(var e=0;e<this.pathCommands.length;e++){for(var o=this.pathCommands.shift(),n=3;n<o.length;n+=2){var r=T([o[n],o[n+1]],t);o[n]=r[0],o[n+1]=r[1]}this.addCommand(o)}return this},this.mergeShape=function(t){for(var e=0;e<t.pathCommands.length;e++)this.addCommand(t.pathCommands[e].slice());return this},this.clone=function(){return(new nt).mergeShape(this)},this.insertInDocument=function(){for(var e=0;e<this.pathCommands.length;e++){var o=this.pathCommands[e][0],n=this.pathCommands[e].slice(3);switch(o){case"move":t.moveTo(n[0],n[1]);break;case"line":t.lineTo(n[0],n[1]);break;case"curve":t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"close":t.closePath()}}},this.getSubPaths=function(){for(var t=[],e=new nt,o=0;o<this.pathCommands.length;o++){var n=this.pathCommands[o];"move"===this.pathCommands[o][0]&&0!==o&&(t.push(e),e=new nt),e.addCommand(n)}return t.push(e),t},this.getMarkers=function(){for(var t=[],e=this.getSubPaths(),o=0;o<e.length;o++){for(var n=e[o],r=[],i=0;i<n.pathSegments.length;i++){var s=n.pathSegments[i];if(L(s.totalLength,0)||0===i||i===n.pathSegments.length-1){if(s.hasStart){var a=s.getPointAtLength(0),l=r.pop();l&&(a[2]=.5*(l[2]+a[2])),r.push(a)}if(s.hasEnd){var c=s.getPointAtLength(s.totalLength);r.push(c)}}}t=t.concat(r)}return t}},rt=function(t,o){var n=Object.create(null),r=null;this.name=t.nodeName,this.isOuterElement=t===e||!t.parentNode,this.inherits=o||(this.isOuterElement?null:X(t.parentNode,null)),this.stack=this.inherits?this.inherits.stack.concat(t):[t],this.style=M("function"==typeof t.getAttribute&&t.getAttribute("style")),this.css=jt?getComputedStyle(t):H(t),this.allowedChildren=[],this.attr=function(e){if("function"==typeof t.getAttribute)return t.getAttribute(e)},this.resolveUrl=function(t){var o=(t||"").match(/^\s*(?:url\("(.*)#(.*)"\)|url\('(.*)#(.*)'\)|url\((.*)#(.*)\)|(.*)#(.*))\s*$/)||[],n=o[1]||o[3]||o[5]||o[7],r=o[2]||o[4]||o[6]||o[8];if(r){if(!n){var i=e.getElementById(r);if(i)return-1===this.stack.indexOf(i)?i:void Mt('SVGtoPDF: loop of circular references for id "'+r+'"')}if(Ut){var s=Wt[n];if(!s){s=Ut(n),D(s)||(s=[s]);for(var a=0;a<s.length;a++)"string"==typeof s[a]&&(s[a]=_(s[a]));Wt[n]=s}for(var a=0;a<s.length;a++){var i=s[a].getElementById(r);if(i)return-1===this.stack.indexOf(i)?i:void Mt('SVGtoPDF: loop of circular references for id "'+n+"#"+r+'"')}}}},this.computeUnits=function(t,e,o,n){return"%"===e?parseFloat(t)/100*(n||null!=o?o:this.getViewport()):"ex"===e||"em"===e?t*{em:1,ex:.5}[e]*(n?o:this.get("font-size")):t*{"":1,px:1,pt:96/72,cm:96/2.54,mm:96/25.4,in:96,pc:16}[e]},this.computeLength=function(t,e,o,n){var r,i,s=new tt((t||"").trim());return"string"!=typeof(r=s.matchNumber())||"string"!=typeof(i=s.matchLengthUnit())||s.matchAll()?o:this.computeUnits(r,i,e,n)},this.computeLengthList=function(t,e,o){for(var n,r,i=new tt((t||"").trim()),s=[];"string"==typeof(n=i.matchNumber())&&"string"==typeof(r=i.matchLengthUnit());)s.push(this.computeUnits(n,r,e)),i.matchSeparator();if(!o||!i.matchAll())return s},this.getLength=function(t,e,o){return this.computeLength(this.attr(t),e,o)},this.getLengthList=function(t,e){return this.computeLengthList(this.attr(t),e)},this.getUrl=function(t){return this.resolveUrl(this.attr(t))},this.getNumberList=function(t){for(var e,o=new tt((this.attr(t)||"").trim()),n=[];e=o.matchNumber();)n.push(Number(e)),o.matchSeparator();return n.error=o.matchAll(),n},this.getViewbox=function(t,e){var o=this.getNumberList(t);return 4===o.length&&o[2]>=0&&o[3]>=0?o:e},this.getPercent=function(t,e){var o=this.attr(t),n=new tt((o||"").trim()),r=n.matchNumber();return r?(n.match("%")&&(r*=.01),n.matchAll()?e:Math.max(0,Math.min(1,r))):e},this.chooseValue=function(t){for(var e=0;e<arguments.length;e++)if(null!=arguments[e]&&arguments[e]===arguments[e])return arguments[e];return arguments[arguments.length-1]},this.get=function(t){if(void 0!==n[t])return n[t];for(var e,o,r=Z[t]||{},i=0;i<3;i++){switch(i){case 0:"transform"!==t&&(e=this.css[r.css||t]);break;case 1:e=this.style[t];break;case 2:e=this.attr(t)}if("inherit"===e&&null!=(o=this.inherits?this.inherits.get(t):r.initial))return n[t]=o;if(null!=r.values&&null!=(o=r.values[e]))return n[t]=o;if(null!=e){var s;switch(t){case"font-size":o=this.computeLength(e,this.inherits?this.inherits.get(t):r.initial,void 0,!0);break;case"baseline-shift":o=this.computeLength(e,this.get("font-size"));break;case"font-family":o=e||void 0;break;case"opacity":case"stroke-opacity":case"fill-opacity":case"stop-opacity":s=parseFloat(e),isNaN(s)||(o=Math.max(0,Math.min(1,s)));break;case"transform":o=O(e);break;case"stroke-dasharray":if("none"===e)o=[];else if(s=this.computeLengthList(e,this.getViewport(),!0)){for(var a=0,l=!1,c=0;c<s.length;c++)s[c]<0&&(l=!0),a+=s[c];l||(s.length%2==1&&(s=s.concat(s)),o=0===a?[]:s)}break;case"color":o="none"===e||"transparent"===e?"none":E(e);break;case"fill":case"stroke":if("none"===e||"transparent"===e)o="none";else if("currentColor"===e)o=this.get("color");else{if(s=E(e))return s;if(s=(e||"").split(" ")){var u=this.resolveUrl(s[0]),g=E(s[1]);o=null==u?g:"linearGradient"===u.nodeName||"radialGradient"===u.nodeName?new ft(u,null,g):"pattern"===u.nodeName?new dt(u,null,g):g}}break;case"stop-color":o="none"===e||"transparent"===e?"none":"currentColor"===e?this.get("color"):E(e);break;case"marker-start":case"marker-mid":case"marker-end":case"clip-path":case"mask":o="none"===e?"none":this.resolveUrl(e);break;case"stroke-width":s=this.computeLength(e,this.getViewport()),null!=s&&s>=0&&(o=s);break;case"stroke-miterlimit":s=parseFloat(e),null!=s&&s>=1&&(o=s);break;case"word-spacing":case"letter-spacing":o=this.computeLength(e,this.getViewport());break;case"stroke-dashoffset":if(null!=(o=this.computeLength(e,this.getViewport()))&&o<0)for(var h=this.get("stroke-dasharray"),c=0;c<h.length;c++)o+=h[c]}if(null!=o)return n[t]=o}}return n[t]=r.inherit&&this.inherits?this.inherits.get(t):r.initial},this.getChildren=function(){if(null!=r)return r;for(var e=[],o=0;o<t.childNodes.length;o++){var n=t.childNodes[o];n.error||-1===this.allowedChildren.indexOf(n.nodeName)||e.push(X(n,this))}return r=e},this.getParentVWidth=function(){return this.inherits?this.inherits.getVWidth():Rt},this.getParentVHeight=function(){return this.inherits?this.inherits.getVHeight():Dt},this.getParentViewport=function(){return Math.sqrt(.5*this.getParentVWidth()*this.getParentVWidth()+.5*this.getParentVHeight()*this.getParentVHeight())},this.getVWidth=function(){return this.getParentVWidth()},this.getVHeight=function(){return this.getParentVHeight()},this.getViewport=function(){return Math.sqrt(.5*this.getVWidth()*this.getVWidth()+.5*this.getVHeight()*this.getVHeight())},this.getBoundingBox=function(){return this.getBoundingShape().getBoundingBox()}},it=function(e,o){rt.call(this,e,o),this.transform=function(){t.transform.apply(t,this.getTransformation())},this.clip=function(){if("none"!==this.get("clip-path")){return new Ct(this.get("clip-path"),null).useMask(this.getBoundingBox()),!0}},this.mask=function(){if("none"!==this.get("mask")){return new xt(this.get("mask"),null).useMask(this.getBoundingBox()),!0}},this.getFill=function(t,e){var o=this.get("opacity"),n=this.get("fill"),r=this.get("fill-opacity");return t?Y.white:"none"!==n&&o&&r?n instanceof ft||n instanceof dt?n.getPaint(this.getBoundingBox(),r*o,t,e):S(n,r*o,e):void 0},this.getStroke=function(t,e){var o=this.get("opacity"),n=this.get("stroke"),r=this.get("stroke-opacity");if(!t&&!N(this.get("stroke-width"),0))return"none"!==n&&o&&r?n instanceof ft||n instanceof dt?n.getPaint(this.getBoundingBox(),r*o,t,e):S(n,r*o,e):void 0}},st=function(t,e){it.call(this,t,e),this.allowedChildren=["use","g","a","svg","image","rect","circle","ellipse","line","polyline","polygon","path","text"],this.getBoundingShape=function(){for(var t=new nt,e=this.getChildren(),o=0;o<e.length;o++)if("none"!==e[o].get("display")&&"function"==typeof e[o].getBoundingShape){var n=e[o].getBoundingShape().clone();"function"==typeof e[o].getTransformation&&n.transform(e[o].getTransformation()),t.mergeShape(n)}return t},this.drawChildren=function(t,e){for(var o=this.getChildren(),n=0;n<o.length;n++)"none"!==o[n].get("display")&&"function"==typeof o[n].drawInDocument&&o[n].drawInDocument(t,e)}},at=function(e,o){st.call(this,e,o),this.drawContent=function(e,o){this.transform();var n,r=this.clip(),l=this.mask();(this.get("opacity")<1||r||l)&&!e&&(n=i(x())),this.drawChildren(e,o),n&&(s(n),t.fillOpacity(this.get("opacity")),a(n))}},lt=function(e,o){at.call(this,e,o);var n=this.getLength("x",this.getVWidth(),0),r=this.getLength("y",this.getVHeight(),0),i=this.getUrl("href")||this.getUrl("xlink:href");i&&(i=X(i,this)),this.getChildren=function(){return i?[i]:[]},this.drawInDocument=function(e,o){t.save(),this.drawContent(e,o),t.restore()},this.getTransformation=function(){return k(this.get("transform"),[1,0,0,1,n,r])}},ct=function(e,o){at.call(this,e,o);var n=this.getLength("width",this.getParentVWidth(),this.getParentVWidth()),r=this.getLength("height",this.getParentVHeight(),this.getParentVHeight());o instanceof lt&&(n=o.getLength("width",o.getParentVWidth(),n),r=o.getLength("height",o.getParentVHeight(),r));var i=(this.attr("preserveAspectRatio")||"").trim(),s=this.getViewbox("viewBox",[0,0,n,r]);this.getVWidth=function(){return s[2]},this.getVHeight=function(){return s[3]},this.drawInDocument=function(e,o){t.save(),this.drawContent(e,o),t.restore()},this.getTransformation=function(){return k(j(i,n,r,s[2],s[3]),[1,0,0,1,-s[0],-s[1]])}},ut=function(e,o){at.call(this,e,o),this.drawInDocument=function(e,o){t.save(),!this.link||e||o||this.addLink(),this.drawContent(e,o),t.restore()},this.getTransformation=function(){return this.get("transform")}},gt=function(t,e){e&&e.isText?(It.call(this,t,e),this.allowedChildren=["textPath","tspan","#text","#cdata-section","a"]):ut.call(this,t,e),this.link=this.attr("href")||this.attr("xlink:href"),this.addLink=function(){if(this.link.match(/^(?:[a-z][a-z0-9+.-]*:|\/\/)?/i)&&this.getChildren().length){var t=this.getBoundingShape().transform(C()).getBoundingBox();v(t[0],t[1],t[2],t[3],this.link)}}},ht=function(e,o){at.call(this,e,o);var n=this.getLength("width",this.getParentVWidth(),this.getParentVWidth()),r=this.getLength("height",this.getParentVHeight(),this.getParentVHeight()),i=this.getLength("x",this.getParentVWidth(),0),s=this.getLength("y",this.getParentVHeight(),0);o instanceof lt&&(n=o.getLength("width",o.getParentVWidth(),n),r=o.getLength("height",o.getParentVHeight(),r));var a=this.attr("preserveAspectRatio"),l=this.getViewbox("viewBox",[0,0,n,r]);this.isOuterElement&&Ot&&(i=s=0,n=Rt,r=Dt,a=Ot),this.getVWidth=function(){return l[2]},this.getVHeight=function(){return l[3]},this.drawInDocument=function(e,o){t.save(),"hidden"===this.get("overflow")&&((new nt).M(i,s).L(i+n,s).L(i+n,s+r).L(i,s+r).Z().transform(this.get("transform")).insertInDocument(),t.clip()),this.drawContent(e,o),t.restore()},this.getTransformation=function(){return k(this.get("transform"),[1,0,0,1,i,s],j(a,n,r,l[2],l[3]),[1,0,0,1,-l[0],-l[1]])}},pt=function(e,o){it.call(this,e,o);var n,r=Ft(this.attr("href")||this.attr("xlink:href")||""),i=this.getLength("x",this.getVWidth(),0),s=this.getLength("y",this.getVHeight(),0),a=this.getLength("width",this.getVWidth(),"auto"),l=this.getLength("height",this.getVHeight(),"auto");try{n=t.openImage(r)}catch(t){Mt('SVGElemImage: failed to open image "'+r+'" in PDFKit')}n&&("auto"===a&&"auto"!==l?a=l*n.width/n.height:"auto"===l&&"auto"!==a?l=a*n.height/n.width:"auto"===a&&"auto"===l&&(a=n.width,l=n.height)),("auto"===a||a<0)&&(a=0),("auto"===l||l<0)&&(l=0),this.getTransformation=function(){return this.get("transform")},this.getBoundingShape=function(){return(new nt).M(i,s).L(i+a,s).M(i+a,s+l).L(i,s+l)},this.drawInDocument=function(e,o){"hidden"!==this.get("visibility")&&n&&(t.save(),this.transform(),"hidden"===this.get("overflow")&&t.rect(i,s,a,l).clip(),this.clip(),this.mask(),t.translate(i,s),t.transform.apply(t,j(this.attr("preserveAspectRatio"),a,l,n?n.width:a,n?n.height:l)),e?(t.rect(0,0,n.width,n.height),m(Y.white).fill()):(t.fillOpacity(this.get("opacity")),t.image(n,0,0)),t.restore())}},dt=function(e,o,n){st.call(this,e,o),this.ref=function(){var t=this.getUrl("href")||this.getUrl("xlink:href");if(t&&t.nodeName===e.nodeName)return new dt(t,o,n)}.call(this);var r=this.attr;this.attr=function(t){var e=r.call(this,t);return null!=e||"href"===t||"xlink:href"===t?e:this.ref?this.ref.attr(t):null};var a=this.getChildren;this.getChildren=function(){var t=a.call(this);return t.length>0?t:this.ref?this.ref.getChildren():[]},this.getPaint=function(e,o,r,a){var l="userSpaceOnUse"!==this.attr("patternUnits"),u="objectBoundingBox"===this.attr("patternContentUnits"),g=this.getLength("x",l?1:this.getParentVWidth(),0),h=this.getLength("y",l?1:this.getParentVHeight(),0),p=this.getLength("width",l?1:this.getParentVWidth(),0),d=this.getLength("height",l?1:this.getParentVHeight(),0);u&&!l?(g=(g-e[0])/(e[2]-e[0])||0,h=(h-e[1])/(e[3]-e[1])||0,p=p/(e[2]-e[0])||0,d=d/(e[3]-e[1])||0):!u&&l&&(g=e[0]+g*(e[2]-e[0]),h=e[1]+h*(e[3]-e[1]),p*=e[2]-e[0],d*=e[3]-e[1]);var f=this.getViewbox("viewBox",[0,0,p,d]),m=(this.attr("preserveAspectRatio")||"").trim(),y=k(j(m,p,d,f[2],f[3],0),[1,0,0,1,-f[0],-f[1]]),v=O(this.attr("patternTransform"));if(u&&(v=k([e[2]-e[0],0,0,e[3]-e[1],e[0],e[1]],v)),v=k(v,[1,0,0,1,g,h]),(v=B(v))&&(y=B(y))&&(p=R(p))&&(d=R(d))){var _=i([0,0,p,d]);return t.transform.apply(t,y),this.drawChildren(r,a),s(_),[c(_,p,d,v),o]}return n?[n[0],n[1]*o]:void 0},this.getVWidth=function(){var t="userSpaceOnUse"!==this.attr("patternUnits"),e=this.getLength("width",t?1:this.getParentVWidth(),0);return this.getViewbox("viewBox",[0,0,e,0])[2]},this.getVHeight=function(){var t="userSpaceOnUse"!==this.attr("patternUnits"),e=this.getLength("height",t?1:this.getParentVHeight(),0);return this.getViewbox("viewBox",[0,0,0,e])[3]}},ft=function(e,o,n){rt.call(this,e,o),this.allowedChildren=["stop"],this.ref=function(){var t=this.getUrl("href")||this.getUrl("xlink:href");if(t&&t.nodeName===e.nodeName)return new ft(t,o,n)}.call(this);var r=this.attr;this.attr=function(t){var e=r.call(this,t);return null!=e||"href"===t||"xlink:href"===t?e:this.ref?this.ref.attr(t):null};var i=this.getChildren;this.getChildren=function(){var t=i.call(this);return t.length>0?t:this.ref?this.ref.getChildren():[]},this.getPaint=function(e,o,r,i){var s=this.getChildren();if(0!==s.length){if(1===s.length){var a=s[0],l=a.get("stop-color");if("none"===l)return;return S(l,a.get("stop-opacity")*o,i)}var c,u,g,h,p,d,f="userSpaceOnUse"!==this.attr("gradientUnits"),m=O(this.attr("gradientTransform")),y=this.attr("spreadMethod"),v=0,_=0,b=1;if(f&&(m=k([e[2]-e[0],0,0,e[3]-e[1],e[0],e[1]],m)),m=B(m)){if("linearGradient"===this.name)u=this.getLength("x1",f?1:this.getVWidth(),0),g=this.getLength("x2",f?1:this.getVWidth(),f?1:this.getVWidth()),h=this.getLength("y1",f?1:this.getVHeight(),0),p=this.getLength("y2",f?1:this.getVHeight(),0);else{g=this.getLength("cx",f?1:this.getVWidth(),f?.5:.5*this.getVWidth()),p=this.getLength("cy",f?1:this.getVHeight(),f?.5:.5*this.getVHeight()),d=this.getLength("r",f?1:this.getViewport(),f?.5:.5*this.getViewport()),u=this.getLength("fx",f?1:this.getVWidth(),g),h=this.getLength("fy",f?1:this.getVHeight(),p),d<0&&Mt("SvgElemGradient: negative r value");var E=Math.sqrt(Math.pow(g-u,2)+Math.pow(p-h,2)),C=1;E>d&&(C=d/E,u=g+(u-g)*C,h=p+(h-p)*C),d=Math.max(d,E*C*(1+1e-6))}if("reflect"===y||"repeat"===y){var x=w(m),I=T([e[0],e[1]],x),A=T([e[2],e[1]],x),N=T([e[2],e[3]],x),L=T([e[0],e[3]],x);"linearGradient"===this.name?(v=Math.max((I[0]-g)*(g-u)+(I[1]-p)*(p-h),(A[0]-g)*(g-u)+(A[1]-p)*(p-h),(N[0]-g)*(g-u)+(N[1]-p)*(p-h),(L[0]-g)*(g-u)+(L[1]-p)*(p-h))/(Math.pow(g-u,2)+Math.pow(p-h,2)),_=Math.max((I[0]-u)*(u-g)+(I[1]-h)*(h-p),(A[0]-u)*(u-g)+(A[1]-h)*(h-p),(N[0]-u)*(u-g)+(N[1]-h)*(h-p),(L[0]-u)*(u-g)+(L[1]-h)*(h-p))/(Math.pow(g-u,2)+Math.pow(p-h,2))):v=Math.sqrt(Math.max(Math.pow(I[0]-g,2)+Math.pow(I[1]-p,2),Math.pow(A[0]-g,2)+Math.pow(A[1]-p,2),Math.pow(N[0]-g,2)+Math.pow(N[1]-p,2),Math.pow(L[0]-g,2)+Math.pow(L[1]-p,2)))/d-1,v=Math.ceil(v+.5),_=Math.ceil(_+.5),b=_+1+v}c="linearGradient"===this.name?t.linearGradient(u-_*(g-u),h-_*(p-h),g+v*(g-u),p+v*(p-h)):t.radialGradient(u,h,0,g,p,d+v*d);for(var R=0;R<b;R++)for(var D=0,j="reflect"!==y||(R-_)%2==0,M=0;M<s.length;M++){var a=s[j?M:s.length-1-M],l=a.get("stop-color");"none"===l&&(l=Y.transparent),l=S(l,a.get("stop-opacity")*o,i),D=Math.max(D,j?a.getPercent("offset",0):1-a.getPercent("offset",0)),0===M&&4===l[0].length&&(c._colorSpace="DeviceCMYK"),0===M&&D>0&&c.stop((R+0)/b,l[0],l[1]),c.stop((R+D)/(v+_+1),l[0],l[1]),M===s.length-1&&D<1&&c.stop((R+1)/b,l[0],l[1])}return c.setTransform.apply(c,m),[c,1]}return n?[n[0],n[1]*o]:void 0}}},mt=function(e,o){it.call(this,e,o),this.dashScale=1,this.getBoundingShape=function(){return this.shape},this.getTransformation=function(){return this.get("transform")},this.drawInDocument=function(e,o){if("hidden"!==this.get("visibility")&&this.shape){if(t.save(),this.transform(),this.clip(),e)this.shape.insertInDocument(),m(Y.white),t.fill(this.get("clip-rule"));else{var n,r=this.mask();r&&(n=i(x()));var l=this.shape.getSubPaths(),c=this.getFill(e,o),u=this.getStroke(e,o),g=this.get("stroke-width"),h=this.get("stroke-linecap");if(c||u){if(c&&m(c),u){for(var p=0;p<l.length;p++)if(N(l[p].totalLength,0)&&("square"===h||"round"===h)&&g>0&&l[p].startPoint&&l[p].startPoint.length>1){var d=l[p].startPoint[0],f=l[p].startPoint[1];m(u),"square"===h?t.rect(d-.5*g,f-.5*g,g,g):"round"===h&&t.circle(d,f,.5*g),t.fill()}var v=this.get("stroke-dasharray"),_=this.get("stroke-dashoffset");if(L(this.dashScale,1)){for(var p=0;p<v.length;p++)v[p]*=this.dashScale;_*=this.dashScale}y(u),t.lineWidth(g).miterLimit(this.get("stroke-miterlimit")).lineJoin(this.get("stroke-linejoin")).lineCap(h).dash(v,{phase:_})}for(var p=0;p<l.length;p++)l[p].totalLength>0&&l[p].insertInDocument();c&&u?t.fillAndStroke(this.get("fill-rule")):c?t.fill(this.get("fill-rule")):u&&t.stroke()}var b=this.get("marker-start"),E=this.get("marker-mid"),S=this.get("marker-end");if("none"!==b||"none"!==E||"none"!==S){var k=this.shape.getMarkers();if("none"!==b&&k.length>0){var T=new Tt(b,null);T.drawMarker(!1,o,k[0],g)}if("none"!==E)for(var C=1;C<k.length-1;C++){var T=new Tt(E,null);T.drawMarker(!1,o,k[C],g)}if("none"!==S&&k.length>0){var T=new Tt(S,null);T.drawMarker(!1,o,k[k.length-1],g)}}n&&(s(n),a(n))}t.restore()}}},yt=function(t,e){mt.call(this,t,e);var o=this.getLength("x",this.getVWidth(),0),n=this.getLength("y",this.getVHeight(),0),r=this.getLength("width",this.getVWidth(),0),i=this.getLength("height",this.getVHeight(),0),s=this.getLength("rx",this.getVWidth()),a=this.getLength("ry",this.getVHeight());void 0===s&&void 0===a?s=a=0:void 0===s&&void 0!==a?s=a:void 0!==s&&void 0===a&&(a=s),r>0&&i>0?s&&a?(s=Math.min(s,.5*r),a=Math.min(a,.5*i),this.shape=(new nt).M(o+s,n).L(o+r-s,n).A(s,a,0,0,1,o+r,n+a).L(o+r,n+i-a).A(s,a,0,0,1,o+r-s,n+i).L(o+s,n+i).A(s,a,0,0,1,o,n+i-a).L(o,n+a).A(s,a,0,0,1,o+s,n).Z()):this.shape=(new nt).M(o,n).L(o+r,n).L(o+r,n+i).L(o,n+i).Z():this.shape=new nt},vt=function(t,e){mt.call(this,t,e);var o=this.getLength("cx",this.getVWidth(),0),n=this.getLength("cy",this.getVHeight(),0),r=this.getLength("r",this.getViewport(),0);this.shape=r>0?(new nt).M(o+r,n).A(r,r,0,0,1,o-r,n).A(r,r,0,0,1,o+r,n).Z():new nt},_t=function(t,e){mt.call(this,t,e);var o=this.getLength("cx",this.getVWidth(),0),n=this.getLength("cy",this.getVHeight(),0),r=this.getLength("rx",this.getVWidth(),0),i=this.getLength("ry",this.getVHeight(),0);this.shape=r>0&&i>0?(new nt).M(o+r,n).A(r,i,0,0,1,o-r,n).A(r,i,0,0,1,o+r,n).Z():new nt},bt=function(t,e){mt.call(this,t,e);var o=this.getLength("x1",this.getVWidth(),0),n=this.getLength("y1",this.getVHeight(),0),r=this.getLength("x2",this.getVWidth(),0),i=this.getLength("y2",this.getVHeight(),0);this.shape=(new nt).M(o,n).L(r,i)},Et=function(t,e){mt.call(this,t,e);var o=this.getNumberList("points");this.shape=new nt;for(var n=0;n<o.length-1;n+=2)0===n?this.shape.M(o[n],o[n+1]):this.shape.L(o[n],o[n+1]);o.error&&Mt("SvgElemPolygon: unexpected string "+o.error),o.length%2==1&&Mt("SvgElemPolyline: uneven number of coordinates")},St=function(t,e){mt.call(this,t,e);var o=this.getNumberList("points");this.shape=new nt;for(var n=0;n<o.length-1;n+=2)0===n?this.shape.M(o[n],o[n+1]):this.shape.L(o[n],o[n+1]);this.shape.Z(),o.error&&Mt("SvgElemPolygon: unexpected string "+o.error),o.length%2==1&&Mt("SvgElemPolygon: uneven number of coordinates")},kt=function(t,e){mt.call(this,t,e),this.shape=(new nt).path(this.attr("d"));var o=this.getLength("pathLength",this.getViewport());this.pathLength=o>0?o:void 0,this.dashScale=void 0!==this.pathLength?this.shape.totalLength/this.pathLength:1},Tt=function(e,o){st.call(this,e,o);var n=this.getLength("markerWidth",this.getParentVWidth(),3),r=this.getLength("markerHeight",this.getParentVHeight(),3),l=this.getViewbox("viewBox",[0,0,n,r]);this.getVWidth=function(){return l[2]},this.getVHeight=function(){return l[3]},this.drawMarker=function(e,o,c,u){t.save();var g=this.attr("orient"),h=this.attr("markerUnits"),p="auto"===g?c[2]:(parseFloat(g)||0)*Math.PI/180,d="userSpaceOnUse"===h?1:u;t.transform(Math.cos(p)*d,Math.sin(p)*d,-Math.sin(p)*d,Math.cos(p)*d,c[0],c[1]);var f=this.getLength("refX",this.getVWidth(),0),m=this.getLength("refY",this.getVHeight(),0),y=j(this.attr("preserveAspectRatio"),n,r,l[2],l[3],.5);"hidden"===this.get("overflow")&&t.rect(y[0]*(l[0]+l[2]/2-f)-n/2,y[3]*(l[1]+l[3]/2-m)-r/2,n,r).clip(),t.transform.apply(t,y),t.translate(-f,-m);var v;this.get("opacity")<1&&!e&&(v=i(x())),this.drawChildren(e,o),v&&(s(v),t.fillOpacity(this.get("opacity")),a(v)),t.restore()}},Ct=function(e,o){st.call(this,e,o),this.useMask=function(e){var o=i(x());t.save(),t.transform.apply(t,this.get("transform")),"objectBoundingBox"===this.attr("clipPathUnits")&&t.transform(e[2]-e[0],0,0,e[3]-e[1],e[0],e[1]),this.clip(),this.drawChildren(!0,!1),t.restore(),s(o),l(o,!0)}},xt=function(e,o){st.call(this,e,o),this.useMask=function(e){var o=i(x());t.save();"userSpaceOnUse"===this.attr("maskUnits")?(this.getLength("x",this.getVWidth(),-.1*(e[2]-e[0])+e[0]),this.getLength("y",this.getVHeight(),-.1*(e[3]-e[1])+e[1]),this.getLength("width",this.getVWidth(),1.2*(e[2]-e[0])),this.getLength("height",this.getVHeight(),1.2*(e[3]-e[1]))):(this.getLength("x",this.getVWidth(),-.1)*(e[2]-e[0])+e[0],this.getLength("y",this.getVHeight(),-.1)*(e[3]-e[1])+e[1],this.getLength("width",this.getVWidth(),1.2)*(e[2]-e[0]),this.getLength("height",this.getVHeight(),1.2),e[3],e[1]),"objectBoundingBox"===this.attr("maskContentUnits")&&t.transform(e[2]-e[0],0,0,e[3]-e[1],e[0],e[1]),this.clip(),this.drawChildren(!1,!0),t.restore(),s(o),l(o,!0)}},wt=function(e,o){it.call(this,e,o),this.allowedChildren=["tspan","#text","#cdata-section","a"],this.isText=!0,this.getBoundingShape=function(){for(var t=new nt,e=0;e<this._pos.length;e++){var o=this._pos[e];if(!o.hidden){var n=o.ascent*Math.sin(o.rotate),r=-o.ascent*Math.cos(o.rotate),i=o.descent*Math.sin(o.rotate),s=-o.descent*Math.cos(o.rotate),a=o.width*Math.cos(o.rotate),l=o.width*Math.sin(o.rotate);t.M(o.x+n,o.y+r).L(o.x+n+a,o.y+r+l).M(o.x+i+a,o.y+s+l).L(o.x+i,o.y+s)}}return t},this.drawTextInDocument=function(e,o){!this.link||e||o||this.addLink(),"underline"===this.get("text-decoration")&&this.decorate(.05*this._font.size,-.075*this._font.size,e,o),"overline"===this.get("text-decoration")&&this.decorate(.05*this._font.size,G(this._font.font,this._font.size)+.075*this._font.size,e,o);var n=this.getFill(e,o),r=this.getStroke(e,o),i=this.get("stroke-width");this._font.fauxBold&&(r?i+=.03*this._font.size:(r=n,i=.03*this._font.size));for(var s=this.getChildren(),a=0;a<s.length;a++){var l=s[a];switch(l.name){case"tspan":case"textPath":case"a":"none"!==l.get("display")&&l.drawTextInDocument(e,o);break;case"#text":case"#cdata-section":if("hidden"===this.get("visibility"))continue;(n||r||e)&&(n&&m(n),r&&i&&(y(r),t.lineWidth(i).miterLimit(this.get("stroke-miterlimit")).lineJoin(this.get("stroke-linejoin")).lineCap(this.get("stroke-linecap")).dash(this.get("stroke-dasharray"),{phase:this.get("stroke-dashoffset")})),g(this._font.font,this._font.size),p(!!n,!!r),d(l._pos,this._font),f())}}"line-through"===this.get("text-decoration")&&this.decorate(.05*this._font.size,.5*(G(this._font.font,this._font.size)+V(this._font.font,this._font.size)),e,o)},this.decorate=function(e,o,n,r){var i=this.getFill(n,r),s=this.getStroke(n,r);i&&m(i),s&&(y(s),t.lineWidth(this.get("stroke-width")).miterLimit(this.get("stroke-miterlimit")).lineJoin(this.get("stroke-linejoin")).lineCap(this.get("stroke-linecap")).dash(this.get("stroke-dasharray"),{phase:this.get("stroke-dashoffset")}));for(var a=0,l=this._pos;a<l.length;a++)if(!l[a].hidden&&L(l[a].width,0)){var c=(o+e/2)*Math.sin(l[a].rotate),u=-(o+e/2)*Math.cos(l[a].rotate),g=(o-e/2)*Math.sin(l[a].rotate),h=-(o-e/2)*Math.cos(l[a].rotate),p=l[a].width*Math.cos(l[a].rotate),d=l[a].width*Math.sin(l[a].rotate);(new nt).M(l[a].x+c,l[a].y+u).L(l[a].x+c+p,l[a].y+u+d).L(l[a].x+g+p,l[a].y+h+d).L(l[a].x+g,l[a].y+h).Z().insertInDocument(),i&&s?t.fillAndStroke():i?t.fill():s&&t.stroke()}}},Bt=function(t,e){this.name=t.nodeName,this.textContent=t.nodeValue},It=function(t,e){wt.call(this,t,e)},At=function(t,e){wt.call(this,t,e);var o,n;if((n=this.attr("path"))&&""!==n.trim()){var o=this.getLength("pathLength",this.getViewport());this.pathObject=(new nt).path(n),this.pathLength=o>0?o:this.pathObject.totalLength,this.pathScale=this.pathObject.totalLength/this.pathLength}else if((n=this.getUrl("href")||this.getUrl("xlink:href"))&&"path"===n.nodeName){var r=new kt(n,this);this.pathObject=r.shape.clone().transform(r.get("transform")),this.pathLength=this.chooseValue(r.pathLength,this.pathObject.totalLength),this.pathScale=this.pathObject.totalLength/this.pathLength}},Nt=function(e,o){wt.call(this,e,o),this.allowedChildren=["textPath","tspan","#text","#cdata-section","a"],function(o){function n(){if(g.length)for(var t=g[g.length-1],e=g[0],o=t.x+t.width-e.x,n={startltr:0,middleltr:.5,endltr:1,startrtl:1,middlertl:.5,endrtl:0}[s+a]*o||0,r=0;r<g.length;r++)g[r].x-=n;g=[]}function r(t,e,o){var n=t[0],r=t[t.length-1],i=n.x,s=r.x+r.width;if(o){var a=e/(s-i);if(a>0&&a<1/0)for(var l=0;l<t.length;l++)t[l].continuous=!1,t[l].x=i+a*(t[l].x-i),t[l].scale*=a,t[l].width*=a}else if(t.length>=2)for(var c=(e-(s-i))/(t.length-1),l=0;l<t.length;l++)t[l].continuous=!1,t[l].x+=l*c;h+=e-(s-i)}function i(e,o){e._x=U(e.getLengthList("x",e.getVWidth()),o?o._x.slice(o._pos.length):[]),e._y=U(e.getLengthList("y",e.getVHeight()),o?o._y.slice(o._pos.length):[]),e._dx=U(e.getLengthList("dx",e.getVWidth()),o?o._dx.slice(o._pos.length):[]),e._dy=U(e.getLengthList("dy",e.getVHeight()),o?o._dy.slice(o._pos.length):[]),e._rot=U(e.getNumberList("rotate"),o?o._rot.slice(o._pos.length):[]),e._defRot=e.chooseValue(e._rot[e._rot.length-1],o&&o._defRot,0),"textPath"===e.name&&(e._y=[]);var d={fauxItalic:!1,fauxBold:!1},f=Pt(e.get("font-family"),"bold"===e.get("font-weight"),"italic"===e.get("font-style"),d);try{t.font(f)}catch(t){Mt('SVGElemText: failed to open font "'+f+'" in PDFKit')}e._pos=[],e._index=0,e._font={font:t._font,size:e.get("font-size"),fauxItalic:d.fauxItalic,fauxBold:d.fauxBold};var m=e.getLength("textLength",e.getVWidth(),void 0),y="spacingAndGlyphs"===e.attr("lengthAdjust"),v=e.get("word-spacing"),_=e.get("letter-spacing"),b=e.get("text-anchor"),E=e.get("direction"),S=z(e._font.font,e._font.size,e.get("alignment-baseline")||e.get("dominant-baseline"),e.get("baseline-shift"));"textPath"===e.name&&(n(),h=p=0);for(var k=e.getChildren(),T=0;T<k.length;T++){var C=k[T];switch(C.name){case"tspan":case"textPath":case"a":i(C,e);break;case"#text":case"#cdata-section":var x,w=C.textContent,B=w;C._font=e._font,C._pos=[],c=c.substring(w.length),"preserve"===e.get("xml:space")?B=B.replace(/[\s]/g," "):(B=B.replace(/[\s]+/g," "),l.match(/[\s]$|^$/)&&(B=B.replace(/^[\s]/,"")),c.match(/^[\s]*$/)&&(B=B.replace(/[\s]$/,""))),l+=w,x=0===v?[B]:B.split(/(\s)/);for(var I=0;I<x.length;I++){for(var A=q(e._font.font,e._font.size,x[I]),N=0;N<A.length;N++){var L=e._index,R=e._x[L],D=e._y[L],O=e._dx[L],j=e._dy[L],M=e._rot[L],P=!(0===I&&0===N);0!==_&&(P=!1),0!==v&&(P=!1),void 0!==R&&(P=!1,n(),h=R),void 0!==D&&(P=!1,n(),p=D),void 0!==O&&(P=!1,h+=O),void 0!==j&&(P=!1,p+=j),void 0===M&&0===e._defRot||(P=!1);var F={glyph:A[N].glyph,rotate:Math.PI/180*e.chooseValue(M,e._defRot),x:h+A[N].xOffset,kern:A[N].kern,y:p+S+A[N].yOffset,width:A[N].width,ascent:G(e._font.font,e._font.size),descent:V(e._font.font,e._font.size),scale:1,hidden:!1,continuous:P};g.push(F),C._pos.push(F),e._pos.push(F),e._index+=A[N].unicode.length,1===g.length&&(s=b,a=E),h+=A[N].xAdvance+_,p+=A[N].yAdvance}" "===x[I]&&(h+=v)}break;default:c=c.substring(C.textContent.length)}}if(m&&e._pos.length&&r(e._pos,m,y),"textPath"!==e.name&&"text"!==e.name||n(),"textPath"===e.name){u.push(e);var H=e.pathObject;H&&(h=H.endPoint[0],p=H.endPoint[1])}o&&(o._pos=o._pos.concat(e._pos),o._index+=e._index)}var s,a,l="",c=e.textContent,u=[],g=[],h=0,p=0;i(o,null);for(var d=0;d<u.length;d++)!function(t){var e=t.pathObject,o=t.pathLength,n=t.pathScale;if(e)for(var r=t.getLength("startOffset",o,0),i=0;i<t._pos.length;i++){var s=r+t._pos[i].x+.5*t._pos[i].width;if(s>o||s<0)t._pos[i].hidden=!0;else{var a=e.getPointAtLength(s*n);L(n,1)&&(t._pos[i].scale*=n,t._pos[i].width*=n),t._pos[i].x=a[0]-.5*t._pos[i].width*Math.cos(a[2])-t._pos[i].y*Math.sin(a[2]),t._pos[i].y=a[1]-.5*t._pos[i].width*Math.sin(a[2])+t._pos[i].y*Math.cos(a[2]),t._pos[i].rotate=a[2]+t._pos[i].rotate,t._pos[i].continuous=!1}}else for(var i=0;i<t._pos.length;i++)t._pos[i].hidden=!0}(u[d])}(this),this.getTransformation=function(){return this.get("transform")},this.drawInDocument=function(e,o){t.save(),this.transform(),this.clip();var n,r=this.mask();r&&(n=i(x())),this.drawTextInDocument(e,o),n&&(s(n),a(n)),t.restore()}};r=r||{};var Lt=r.assumePt?1:.75,Rt=(r.width||t.page.width)/Lt,Dt=(r.height||t.page.height)/Lt,Ot=r.preserveAspectRatio||null,jt=r.useCSS&&"undefined"!=typeof SVGElement&&e instanceof SVGElement&&"function"==typeof getComputedStyle,Mt=r.warningCallback,Pt=r.fontCallback,Ft=r.imageCallback,Ht=r.colorCallback,Ut=r.documentCallback,Gt=Math.ceil(Math.max(1,r.precision))||3,Vt=[],Wt={},zt=[],qt=[];if("function"!=typeof Mt&&(Mt=function(t){void 0!==typeof console&&"function"==typeof console.warn&&console.warn(t)}),"function"!=typeof Pt&&(Pt=function(e,o,n,r){if(o&&n){if(t._registeredFonts.hasOwnProperty(e+"-BoldItalic"))return e+"-BoldItalic";if(t._registeredFonts.hasOwnProperty(e+"-Italic"))return r.fauxBold=!0,e+"-Italic";if(t._registeredFonts.hasOwnProperty(e+"-Bold"))return r.fauxItalic=!0,e+"-Bold";if(t._registeredFonts.hasOwnProperty(e))return r.fauxBold=!0,r.fauxItalic=!0,e}if(o&&!n){if(t._registeredFonts.hasOwnProperty(e+"-Bold"))return e+"-Bold";if(t._registeredFonts.hasOwnProperty(e))return r.fauxBold=!0,e}if(!o&&n){if(t._registeredFonts.hasOwnProperty(e+"-Italic"))return e+"-Italic";if(t._registeredFonts.hasOwnProperty(e))return r.fauxItalic=!0,e}if(!o&&!n&&t._registeredFonts.hasOwnProperty(e))return e;if(e.match(/(?:^|,)\s*serif\s*$/)){if(o&&n)return"Times-BoldItalic";if(o&&!n)return"Times-Bold";if(!o&&n)return"Times-Italic";if(!o&&!n)return"Times-Roman"}else if(e.match(/(?:^|,)\s*monospace\s*$/)){if(o&&n)return"Courier-BoldOblique";if(o&&!n)return"Courier-Bold";if(!o&&n)return"Courier-Oblique";if(!o&&!n)return"Courier"}else if(e.match(/(?:^|,)\s*sans-serif\s*$/),!0){if(o&&n)return"Helvetica-BoldOblique";if(o&&!n)return"Helvetica-Bold";if(!o&&n)return"Helvetica-Oblique";if(!o&&!n)return"Helvetica"}}),"function"!=typeof Ft&&(Ft=function(t){return t.replace(/\s+/g,"")}),"function"!=typeof Ht)Ht=null;else for(var Xt in Y){var Kt=Ht(Y[Xt]);Y[Xt][0]=Kt[0],Y[Xt][1]=Kt[1]}if("function"!=typeof Ut&&(Ut=null),"string"==typeof e&&(e=_(e)),e){for(var Yt=e.getElementsByTagName("style"),$t=0;$t<Yt.length;$t++)qt=qt.concat(function(t){for(var e,o=new tt(t.trim()),n=[];e=o.match(/^\s*([^\{\}]*?)\s*\{([^\{\}]*?)\}/,!0);)for(var r=e[1].split(/\s*,\s*/g),i=M(e[2]),s=0;s<r.length;s++){var a=P(r[s]);a&&n.push({selector:a,css:i})}return n}(Yt[$t].textContent));var Qt=X(e,null);if("function"==typeof Qt.drawInDocument){r.useCSS&&!jt&&Mt("SVGtoPDF: useCSS option can only be used for SVG *elements* in compatible browsers");var Jt=t._fillColor;t.save().translate(o||0,n||0).scale(Lt),Qt.drawInDocument();for(var $t=0;$t<zt.length;$t++)t.page.annotations.push(zt[$t]);t.restore(),t._fillColor=Jt}else Mt("SVGtoPDF: this element can't be rendered directly: "+e.nodeName)}else Mt("SVGtoPDF: the input does not look like a valid SVG")};void 0!==t&&t&&void 0!==t.exports&&(t.exports=e)}).call(e,o(26)(t))},function(t,e,o){(function(e){var o=function(){};o.getCSRFTokenCookie=function(){var t=e('meta[name="csrf-token"]').attr("content");return t||document.cookie.split("; ").map(function(e){var o=e.split("=");"csrf-token"===o[0]&&(t=o[1])}),t},t.exports=o}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.instant_search=function(){e(".search-query-dashboard").keyup(function(){var t=e(this).val(),o=0;e(".dashboard-list li").each(function(){e(this).text().search(new RegExp(t,"i"))<0?e(this).hide():(e(this).show(),o++)}),e(".dashboard-list").each(function(){0===e(this).find("li:visible").length?e(this).prev("h4").hide():e(this).prev("h4").show()}),0===o?e(".no_matches_found").show():e(".no_matches_found").hide()})}}(window.siteGui=window.siteGui||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.pageless=function(){if(e(".load_more").length){var t=e(".load_more").first().data("urlconstructor");e(".load_more").pagination({dataSelector:"ref",urlConstructor:t,startPage:1,loadingText:"<div class='load_more_loading'>Loading</div>",loadingImage:"https://s3-us-west-1.amazonaws.com/123d-circuits-assets/spinner_standard_white.gif"})}}}(window.siteGui=window.siteGui||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.tags=function(){e(".tagsinput").importTags(""),e(".tagsinput").tagsInput({autocomplete_url:e(".tagsinput").data("autocomplete"),defaultText:"+",height:"20px",width:"686px"})}}(window.siteGui=window.siteGui||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.analytics=function(){window&&(t.analytics.ga=window.googleGA||function(t,e,o,n,r){r?console.log("GA: "+n+", "+r):console.log("GA: "+n)},t.analytics.ga&&e("body").on("click touch",".js-analytics",function(e){t.analytics.clickTouch(this)}))},t.analytics.clickTouch=function(o){$element=e(o),data=$element.data()||{},properties={},Object.keys(data).forEach(function(t){"event"==t&&(event=data[t])}),event&&t.analytics.log(event)},t.analytics.log=function(e,o){t.analytics.ga&&(o?t.analytics.ga("send","event","cir-ops",e,o):t.analytics.ga("send","event","cir-ops",e))}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e){},function(t,e,o){(function(t){!function(t,e,o){t.card=function(){var t=this;e("body").on("mouseenter",".js-circuit_card__info",function(){t.show_actions(e(this))}),e("body").on("mouseleave",".js-circuit_card__info",function(){t.hide_actions(e(this))})},t.card.prototype.show_actions=function(t){e(".circuit_card__info",t).velocity("stop",!0),e(".circuit_card__info",t).velocity({height:120},{easing:[200,40],delay:150})},t.card.prototype.hide_actions=function(t){e(".circuit_card__info",t).velocity("stop",!0),e(".circuit_card__info",t).velocity({height:64},{easing:[200,40],delay:150})}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.cart_overview=function(){var o=this;o.address_flag=!1,o.coupon_flag=!1,o.spinner=new Spinner({width:2,length:3,radius:5,lines:9}).spin(),e(".js-cart__loading-container").html(o.spinner.el),this.cartControl=new t.canjsCart.CartControl(".js-cart-container",{ui_view:o})},t.cart_overview.prototype.refresh_page=function(){location.reload()},t.cart_overview.prototype.reset_ui=function(){e(".js-cart__empty").hide(),e(".js-cart__content").show(),this.show_loading()},t.cart_overview.prototype.show_loading=function(){e(".js-cart__loading-container").show(),e(".js-cart__recommondations").hide()},t.cart_overview.prototype.hide_loading=function(){e(".js-cart__loading-container").hide(),e(".js-cart__recommondations").show()},t.cart_overview.prototype.empty_cart=function(){e(".js-cart").empty(),e(".js-cart__summary").empty(),e(".js-cart__content").hide(),e(".js-cart__empty").show()},t.cart_overview.prototype.reset_address=function(t){e(".js-no-address-yet").hide(),e(".js-shipping-address--view").hide(),e(".js-shipping-address--edit").hide(),t||(this.address_flag?e(".js-shipping-address--view").show():e(".js-no-address-yet").show())},t.cart_overview.prototype.edit_address=function(){this.reset_address(!0),e(".js-shipping-address--edit").show()},t.cart_overview.prototype.show_coupons=function(t){e(".js-cart-coupons__add__btn").hide(),e(".js-cart-coupons__add__field").hide(),e(".js-cart-show-coupons").hide(),e(".js-cart-coupons").show(),!this.coupon_flag||t?e(".js-cart-coupons__add__field").show():e(".js-cart-coupons__add__btn").show()},t.cart_overview.prototype.hide_coupons=function(){this.coupon_flag?(e(".js-cart-coupons__add__btn").show(),e(".js-cart-coupons__add__field").hide()):(e(".js-cart-coupons").hide(),e(".js-cart-show-coupons").show())},t.cart_overview.prototype.check_valid_ascii=function(){var t=!1;return e(".js-ascii-message").each(function(){e(this).remove()}),e(".cart__required--field").each(function(){e(this).removeClass("cart__required--field")}),e(".js-valid-ascii-required").each(function(){var o=this;e(this).find("input").each(function(){var n=e(this).val();new RegExp(/[^\x00-\xFF]/g).test(n)&&(e(o).find(".js-required-append").append("<div class='right cart__required js-ascii-message'>Invalid characters</div>"),e(this).addClass("cart__required--field"),t=!0)})}),!t},t.cart_overview.prototype.check_required_fields=function(t){var o=!1,n="<div class='right cart__required js-required-message'>Required field</div>";return e(".js-required-message").each(function(){e(this).remove()}),e(".cart__required--field").each(function(){e(this).removeClass("cart__required--field")}),e(".js-required").each(function(r,i){var s=e(this).data("required-type");"string"==s?""==e(this).find("input:first").val()&&(t||(e(this).find(".js-required-append").append(n),e(this).find("input:first").addClass("cart__required--field"),e(this).find("select").each(function(){e(this).addClass("cart__required--field")})),o=!0):"dropdown"==s&&""==e(this).find("select:first").val()&&(t||(e(this).find(".js-required-append").append(n),e(this).find("select:first").addClass("cart__required--field")),o=!0)}),!o},t.cart_overview.prototype.check_if_first_time=function(){var t=0,o=0;return e(".js-required").each(function(n,r){t+=1,""!=e(this).find("input:first").val()&&""!=e(this).find("select:first").val()||(o+=1)}),t==o}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.canjsCart={},t.canjsCart.CartControl=can.Control({init:function(t,o){var n=this;n.ui_view=o.ui_view,n.template_cart="cart-template__cart--grouped",n.template_summary="cart-template__summary",n.template_cart__holder=e(".js-cart"),n.template_summary__holder=e(".js-cart__summary"),n.reload()},reload:function(){var e=this;e.ui_view.reset_ui(),t.canjsCart.CartModel.get(function(t){window.CART_DEBUG&&console.log(t),e.options.cart=t,e.refresh(!0)}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],e)})},refresh:function(o){var n=this;if(window.cart_menu&&(window.cart_menu.total_items=n.options.cart.TOTAL_NUMBER,window.cart_menu.updateTotal()),0==n.options.cart.LINE_ITEMS.length)return n.ui_view.empty_cart(),void n.ui_view.hide_loading();n.ui_view.reset_ui(),n.template_cart__holder.html(can.view(n.template_cart,n.options.cart)),console.log(n.options.cart),n.template_summary__holder.html(can.view(n.template_summary,n.options.cart)),n.options.cart.COUPONS&&n.options.cart.COUPONS.length?n.ui_view.coupon_flag=!0:n.ui_view.coupon_flag=!1,o?n.options.shipping?n.options.shipping.reload():n.options.shipping=new t.canjsCart.ShippingAddressControl(".js-cart-container",{parent:n,ui_view:n.ui_view,finish:n.ui_view.hide_loading}):n.options.shipping.refresh({finish:function(){n.ui_view.hide_loading()}}),e(".js-enable-tooltip").length&&e(".js-enable-tooltip").tipsy()},".js-remove-item click":function(e,o){var n=this,r=e.data("id");n.ui_view.show_loading(),this.options.cart.remove_item({line_item_id:r},function(t){n.options.cart=t,n.reload()}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],e),n.refresh()})},".js-edit-shipping-address click":function(o,n){var r=this;if(t.analytics){(new t.analytics).track("add shipping address button",{})}e(".js-user-is-logged-in").length>0&&r.ui_view.edit_address()},".js-cancel-shipping-address click":function(t,e){this.ui_view.reset_address()},".js-shipping-option change":function(e,o){var n=this,r=e.data("id"),i=e.val();n.ui_view.show_loading(),this.options.cart.change_shipping({line_item_id:r,option:i},function(t){n.options.cart=t,n.refresh(!0)}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],e),n.refresh()})},".js-cart-show-coupons click":function(t,e){this.ui_view.show_coupons()},".js-cart-coupons__add__btn--action click":function(t,e){this.ui_view.show_coupons(!0)},".js-cancel-adding-coupon click":function(t,e){this.ui_view.hide_coupons()},".js-add-coupon click":function(o,n){var r=this,i=e(".js-coupon-code").val();r.ui_view.show_loading(),this.options.cart.add_coupon({coupon_code:i},function(t){r.options.cart=t,r.refresh()}).fail(function(e){t.warning("Invalid coupon","Sorry invalid coupon, please try again",!1,e),r.refresh()})},".js-remove-coupon click":function(e,o){var n=this,r=e.data("code");n.ui_view.show_loading(),this.options.cart.remove_coupon({coupon_code:r},function(t){n.options.cart=t,n.refresh()}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],e),n.refresh()})},".js-cart__basket__item__quantity__input focusin":function(t,e){t.parent().parent().find(".js-cart__basket__item__update-btn").show(),t.parent().parent().find(".js-cart__basket__item__price").hide()},".js-cart__basket__item__quantity__input blur":function(t,e){console.log(e),t.parent().parent().find(".js-cart__basket__item__update-btn").hide(),t.parent().parent().find(".js-cart__basket__item__price").show()},".js-update-cart mousedown":function(o,n){var r=this,i=0,s=0;r.ui_view.show_loading(),e(".js-cart__basket__item__quantity__input").each(function(){var o=e(this).data("lineid"),n=e(this).data("product_id"),a=e(this).data("original_q"),l=parseInt(e(this).val());l&&l!=a&&(i+=1,e.ajax({type:"PUT",url:"/cart/update_quantity",data:{line_item_id:o,product_id:n,quantity:l},error:function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],!1)},success:function(t){s+=1,i==s&&r.reload()}}))}),0==i&&r.reload()},".js-cart__checkoutbtn click":function(o,n){var r=this;if(t.analytics){(new t.analytics).track("checkout button",{})}if(0==r.options.cart.LINE_ITEMS.length)return void r.ui_view.empty_cart();r.secure_session_window=openSessionPopup("signin","/cart/checkout"),r.secure_session_window.location.href="/cart/processing",e(r.secure_session_window.document.body).html("Processing..."),r.ui_view.show_loading(),e.ajax({url:window.location.origin+"/users/logged_in_secure/",type:"GET",complete:function(){r.ui_view.hide_loading()},error:function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],err)},success:function(t){window.CART_DEBUG&&console.log(t),"YES"==t?(r.secure_session_window.close(),window.location.href="/cart/checkout"):r.secure_session_window.location.href="/users/auth/adsk"}})},".js-cart__minimize_shipping change":function(e,o){var n=this;this.ui_view.show_loading(),!e.is(":checked")?this.options.cart.set_fastest_shipping({},function(t){n.reload()}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],e),n.refresh()}):this.options.cart.set_minimized_shipping({},function(t){n.reload()}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["contact_support","clear_cart"],e),n.refresh()})}})}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.shoppingcart_menu=function(){var t=this;t.total_items=0,t.queue=0,e(".js-shoppingcart-model-total").length&&(t.total_items=parseInt(e(".js-shoppingcart-model-total").html())),t.updateTotal(),e("body").on("click",".js-add-to-cart",function(){$this=e(this),t.addItemToCart($this.data("sku"),$this.data("origin"),$this.data("recommend"))})},t.shoppingcart_menu.prototype.updateTotal=function(){var t=this;e(".js-shoppingcart-total").html(t.total_items),t.total_items<=0&&e(".js-shoppingcart-menu").hide()},t.shoppingcart_menu.prototype.addItemToCart=function(o,n,r){var i=this;ga("send","event","addItemToCart","click",o),window.cart_overview&&window.cart_overview.show_loading(),i.queue+=1,e(".js-shoppingcart-menu").is(":visible")||e(".js-shoppingcart-menu").show(),i.animate_loading(),e.ajax({type:"POST",url:"/cart/add_item?method=get",data:{id:o,origin:n,recommend:r},error:function(e){i.queue-=1,i.animate_loading_hide(),i.updateTotal(),t.warning("No longer in stock","We're sorry, this item is no longer in stock.",!1),window.cart_overview&&window.cart_overview.hide_loading()},success:function(t){console.log(t),i.queue-=1;for(var e=0,o=0;o<t.CART.LINE_ITEMS.length;o++){var n=t.CART.LINE_ITEMS[o];"SHIPPING"!==n.PRODUCT_TYPE&&(e+=n.QUANTITY)}i.total_items=e,i.total_items_server=e,i.updateTotal(),i.animate_tada(),window.cart_overview&&window.cart_overview.cartControl.reload()}})},t.shoppingcart_menu.prototype.animate_loading=function(){e(".js-shoppingcart-menu__loading").show(),t.spinner(e(".js-shoppingcart-menu__loading")),e(".js-shoppingcart-menu__svgimage").hide(),e(".js-shoppingcart-total").hide(),e(".js-shoppingcart-menu__animation").removeClass("mediumAnimation tada")},t.shoppingcart_menu.prototype.animate_loading_hide=function(){e(".js-shoppingcart-menu__loading").hide(),e(".js-shoppingcart-menu__loading").empty(),e(".js-shoppingcart-menu__svgimage").show(),e(".js-shoppingcart-total").show()},t.shoppingcart_menu.prototype.animate_tada=function(){0==this.queue&&(this.animate_loading_hide(),e(".js-shoppingcart-menu__animation").addClass("mediumAnimation tada"))}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.canjsCart.CartModel=can.Model({get:function(o){return e.ajax({url:"/cart/get.json",type:"get",dataType:"json",success:function(e){var n=t.canjsCart.CartModel.preprocess(e);return o(new t.canjsCart.CartModel(n))},error:function(t){return t}})},preprocess:function(t){if(t&&t.LINE_ITEMS&&""!==t.LINE_ITEMS){for(var e=0,o={},n=0;n<t.LINE_ITEMS.length;n++){var r=t.LINE_ITEMS[n];if(r.DATA){r.DATA=JSON.parse(r.DATA);var i=r.DATA.name;i&&(r.NAME="PCB - "+i+" (x3)")}if("SHIPPING"!==r.PRODUCT_TYPE&&(r.not_shipping=!0,e+=r.QUANTITY),"SHIPPING"!==r.PRODUCT_TYPE){var s=new Date,a=s.toISOString(),l=new Date(r.DATA.back_in_stock),c=l.toISOString();r.IS_ITEM_IN_STOCK=a>=c?"In stock":'<span class="cart__notinstock">Not in stock</span>'}r.DOLLAR_PRICE=t.currencySymbol+(r.PRICE/r.QUANTITY).toFixed(2)}if(t.TOTAL_NUMBER=e,t.TOTAL_PRICE_EXCL_SHIPPING=t.currencySymbol+t.LINEITEM_SUBTOTAL.toFixed(2),t.TOTAL_PRICE_SHIPPING=t.currencySymbol+t.SHIPPING_PRICE.toFixed(2),t.DOLLAR_SUBTOTAL=t.currencySymbol+t.SUBTOTAL.toFixed(2),""!==t.SHIPPING_ADDRESS_ID?t.READY_TO_CHECKOUT=!0:t.READY_TO_CHECKOUT=!1,t.COUPONS.length>0)for(var n=0;n<t.COUPONS.length;n++){var u=t.COUPONS[n];u.PRICE="- "+t.currencySymbol+t.DISCOUNT}for(var n=0;n<t.LINE_ITEMS.length;n++){var r=t.LINE_ITEMS[n];if("SHIPPING"==r.PRODUCT_TYPE){var g=r.VENDOR_DISPLAY_NAME.toLowerCase().indexOf("oshpark")>-1?"123D Circuits":r.VENDOR_DISPLAY_NAME;group={shipping_item:r,shop:g,SHIPPING_DATE:function(t){var e=new Date,o=new Date;o.setDate(e.getDate()+t);var n=o.getDate();return o.getMonth()+1+"/"+n+"/"+o.getFullYear()}(r.LEAD_DATE),line_items:[]};for(var h=0;h<t.LINE_ITEMS.length;h++){var p=t.LINE_ITEMS[h];-1!==r.PARENT_IDS.indexOf(p.ID)&&group.line_items.push(p)}o[n]=group}}t.grouped_line_items=[];for(var n in o)t.grouped_line_items.push(o[n]);t.grouped_line_items.sort(function(t,e){return t.SHIPPING_DATE>e.SHIPPING_DATE?1:t.SHIPPING_DATE<e.SHIPPING_DATE?-1:0}),"MINIMUM_SHIPMENTS"==t.SHIPMENT_GROUPING_METHOD?t.MINIMIZED_SHIPPING="checked":t.MINIMIZED_SHIPPING="",t.grouped_line_items.length>1||"checked"==t.MINIMIZED_SHIPPING&&t.LINE_ITEMS.length>2?t.SHOW_MINIMIZED_SHIPPING=!0:t.SHOW_MINIMIZED_SHIPPING=!1}return t}},{remove_item:function(o,n){return e.ajax({url:"/cart/remove_item.json",type:"delete",dataType:"json",data:o,success:function(e){var o=t.canjsCart.CartModel.preprocess(e);return n(new t.canjsCart.CartModel(o))},error:function(t){return t}})},change_shipping:function(o,n){return e.ajax({url:"/cart/change_shipping.json",type:"put",dataType:"json",data:o,success:function(e){var o=t.canjsCart.CartModel.preprocess(e);return n(new t.canjsCart.CartModel(o))},error:function(t){return t}})},set_minimized_shipping:function(t,o){return e.ajax({url:"/cart/minimize_shipping",type:"put",dataType:"json",data:t,success:function(t){return o(t)},error:function(t){return t}})},set_fastest_shipping:function(t,o){return e.ajax({url:"/cart/fastest_shipping",type:"put",dataType:"json",data:t,success:function(t){return o(t)},error:function(t){return t}})},add_coupon:function(o,n){return e.ajax({url:"/cart/add_coupon.json",type:"put",dataType:"json",data:o,success:function(e){var o=t.canjsCart.CartModel.preprocess(e);return n(new t.canjsCart.CartModel(o))},error:function(t){return t}})},remove_coupon:function(o,n){return e.ajax({url:"/cart/remove_coupon.json",type:"delete",dataType:"json",data:o,success:function(e){var o=t.canjsCart.CartModel.preprocess(e);return n(new t.canjsCart.CartModel(o))},error:function(t){return t}})}})}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e){},function(t,e,o){(function(t){!function(t,e,o){t.canjsCart.ShippingAddressControl=can.Control({init:function(t,e){var o=this;o.parent=e.parent,o.ui_view=e.ui_view,o.finish=e.finish,o.prevCountryCode=!1,o.reload()},reload:function(e){var o=this;t.canjsCart.ShippingAddress.get(function(t){window.CART_DEBUG&&console.log(t),o.options.shipping_address=t,o.refresh(),o.ui_view.check_required_fields(!0)||(o.parent.options.cart.attr({READY_TO_CHECKOUT:!1}),o.parent.refresh(),o.ui_view.check_if_first_time()||(o.ui_view.check_required_fields(),o.ui_view.edit_address()))}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["clear_cart","contact_support"],e),o.refresh()})},refresh:function(t){var o=this;o.options.shipping_address.ADDRESS_TYPE?o.parent.ui_view.address_flag=!0:o.parent.ui_view.address_flag=!1,o.parent.ui_view.reset_address(),e(".js-shipping-address--view__address").html(can.view("shipping_address_view_template",o.options.shipping_address)),e(".js-shipping-address--edit").html(can.view("shipping_address_edit_template",o.options.shipping_address)),e(".js-shipping-address-country-code").val(o.options.shipping_address.COUNTRY_CODE),e(".js-shipping-address-states-canada").val(o.options.shipping_address.STATE),e(".js-shipping-address-states-usa").val(o.options.shipping_address.STATE),e(".js-shipping-address-country-code").change(),t&&t.finish&&(o.finish=t.finish),o.finish&&o.finish(),window.location.href.indexOf("edit_address")>-1&&o.parent.ui_view.edit_address()},".js-shipping-address-country-code change":function(t,o){e(".js-shipping-address-states-usa").hide(),e(".js-shipping-address-states-canada").hide(),e(".js-shipping-address-state").show(),self.prevCountryCodeDirty&&(e(".js-shipping-address-state").val(""),self.prevCountryCodeDirty=!1),"US"!=t.val()&&"CA"!=t.val()||(self.prevCountryCodeDirty=!0,e(".js-shipping-address-state").hide(),"US"==t.val()&&(e(".js-shipping-address-states-usa").show(),e(".js-shipping-address-states-usa").change()),"CA"==t.val()&&(e(".js-shipping-address-states-canada").show(),e(".js-shipping-address-states-canada").change()))},".js-shipping-address-states-usa change":function(t,o){e(".js-shipping-address-state").val(t.val())},".js-shipping-address-states-canada change":function(t,o){e(".js-shipping-address-state").val(t.val())},".js-save-shipping-address click":function(o,n){var r=this,i=o.closest(".js-shipping-address"),s={name:e(".js-shipping-address-name",i).val(),address1:e(".js-shipping-address-address1",i).val(),address2:e(".js-shipping-address-address2",i).val(),city:e(".js-shipping-address-city",i).val(),postalCode:e(".js-shipping-address-postal-code",i).val(),telephone:e(".js-shipping-address-telephone",i).val(),state:e(".js-shipping-address-state",i).val(),countryCode:e(".js-shipping-address-country-code",i).val()};r.ui_view.check_required_fields()&&r.ui_view.check_valid_ascii()&&(r.ui_view.show_loading(),r.options.shipping_address.set(s,function(t){r.options.shipping_address=t,r.parent.reload()}).fail(function(e){t.error("Cart Error","We're very sorry, something went wrong.",["clear_cart","contact_support"],e),r.refresh()}))}})}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.canjsCart.ShippingAddress=can.Model({get:function(o){return e.ajax({url:"/cart/shipping_address.json",type:"GET",dataType:"json",success:function(e){return o(new t.canjsCart.ShippingAddress(e))},error:function(t){return t}})}},{set:function(o,n){var r={shipping_address:o};return e.ajax({url:"/cart/shipping_address.json",type:"PUT",dataType:"json",data:r,success:function(e){return n(new t.canjsCart.ShippingAddress(e))},error:function(t){return t}})}})}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.confirm=function(){var t=this;e("body").on("click",".js-are-you-sure",function(e){t.are_you_sure(e)})},t.confirm.prototype.are_you_sure=function(t){if(!window.confirm("Are you sure?"))return t.preventDefault(),!1}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.eagle=function(){var t=this;e("body").on("click",".js-eagleimport__btn",function(){t.sendData()}),e("body").on("change input",".js-upload__data--board",function(){JSON.parse(e(this).val()).length>0?(e(".js-eagleimport__btn--enabled",".js-eagleimport").show(),e(".js-eagleimport__btn--disabled",".js-eagleimport").hide()):(e(".js-eagleimport__btn--enabled",".js-eagleimport").hide(),e(".js-eagleimport__btn--disabled",".js-eagleimport").show())})},t.eagle.prototype.sendData=function(){var t=e(".js-upload__data--schematic",".js-eagleimport").val(),o=e(".js-upload__data--board",".js-eagleimport").val();e.ajax({type:"POST",dataType:"json",url:"/eagle/receive",data:{schematic:t,board:o}}).success(function(t){window.location.href="/eagle/crunch/?job="+t.job}).error(function(t){alert("Something went wrong, please try again!"),location.reload()})}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.eagleBoardExport=function(){var t=this;e("body").on("click",".js-eagle-board-export",function(){t.sendData()})},t.eagleBoardExport.prototype.sendData=function(){var o=this,n=window.location.pathname.replace(/\/$/,""),r=n.substring(n.lastIndexOf("/")+1);if(r.indexOf("-")>-1)var i=r.substring(0,r.indexOf("-"));else var i=r;e.ajax({type:"POST",dataType:"json",url:"/eagle_board_export",data:{id:i}}).done(function(e){new t.cruncher(e.command,"/eagle_board_export",o.completed)})},t.eagleBoardExport.prototype.completed=function(t,e){e.hideLoading(),window.location.href=t.result}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.error=function(t,o,n,r,i){e(".js-error-message").length&&e(".js-error-message").remove();var s=e("<div class='circuits_error js-error-message hide'><div class='circuits_error__top clearfix'><div class='left'><div class='circuits_error__title js-error-message__title'>Sorry, something went wrong</div></div><div class='right'><a class='icon__close_error js-close-error'><?xml version='1.0' encoding='utf-8'?><!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg xmlns='http://www.w3.org/2000/svg' width='30' height='30'><g class='svg_icon' enable-background='new 0 0 30 30'><path d='M14.978 6.935c4.442 0 8.044 3.602 8.044 8.046 0 4.442-3.602 8.045-8.044 8.045-4.444 0-8.045-3.603-8.045-8.045 0-4.445 3.602-8.046 8.045-8.046m.001-1.935c-5.503 0-9.979 4.479-9.979 9.98s4.476 9.979 9.979 9.979c5.502 0 9.979-4.477 9.979-9.979s-4.478-9.98-9.979-9.98zM18.757 17.272l-2.292-2.295 2.301-2.297-1.482-1.484-2.299 2.299-2.291-2.292-1.497 1.469 2.306 2.305-2.3 2.302 1.478 1.478 2.303-2.3 2.295 2.295z'/></g></svg></a></div></div>    <div class='circuits_error__body js-error-message__body'>We have encountered a serious error, very sorry about that, our engineers have been notified, try to refresh the page to see if that solves the problem.</div></div>");return s.appendTo("body"),t&&e(".js-error-message__title",s).html(t),o&&e(".js-error-message__body",s).html(o),n&&"[object Array]"===Object.prototype.toString.call(n)&&n.forEach(function(t){if("contact_support"==t){r&&(""!=r.responseText?r.responseText:r.statusText&&r.statusText),e(".js-error-message__body",s).append("<div class='vertical-spacing--top'><a class='circ_btn circ_btn--m circ_btn--error_white_error js-cSite-error-contact-support'>Click here to contact support</a></div>"),e(".js-cSite-error-contact-support").click(function(){window.Zenbox.show()})}else"clear_cart"==t&&(e(".js-error-message__body",s).append("<div class='vertical-spacing--top'><a class='circ_btn circ_btn--m circ_btn--error_white_error js-clear-cart-btn'>Remove all the items from your cart</a></div>"),e(".js-clear-cart-btn").click(function(){window.location="/cart/clear"}))}),e(".js-close-error",s).on("click",function(){s.remove()}),i||s.show(),s},t.warning=function(e,o,n){t.error(e,o,!1,n).addClass("circuits_error--warning")}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.favorite=function(){var t=this;e("body").on("click",".js-circuit__show__favorite",function(o){o.preventDefault(),e(this).hasClass("js-circuit__show__favorite--unstar")?t.unstar(this):t.star(this)})},t.favorite.prototype.star=function(t){e(".js-circuit__show__favorite--star svg").velocity({rotateZ:"360",scale:"1.5"},{easing:"spring"}),e(".js-circuit__show__favorite--star svg").velocity({scale:"0"},{easing:"spring",complete:function(){e(".js-circuit__show__favorite--star").hide(),e(".js-circuit__show__favorite--star svg").css("transform","scale(1) rotateZ(-360deg)"),e(".js-circuit__show__favorite--unstar").velocity("fadeIn",{duration:300,easing:"easeInOutCirc"})}}),e.ajax({url:e(t).attr("href")+"?ajax=true"});var o=parseInt(e(".js-sitemenusub__stats__count__starrers").html());e(".js-sitemenusub__stats__count__starrers").html(o+1)},t.favorite.prototype.unstar=function(t){e(".js-circuit__show__favorite--unstar svg").velocity({rotateZ:"360",scale:"1.5"},{easing:"spring"}),e(".js-circuit__show__favorite--unstar svg").velocity({scale:"0"},{easing:"spring",complete:function(){e(".js-circuit__show__favorite--unstar").hide(),e(".js-circuit__show__favorite--unstar svg").css("transform","scale(1) rotateZ(-360deg)"),e(".js-circuit__show__favorite--star").velocity("fadeIn",{duration:300,easing:"easeInOutCirc"})}}),e.ajax({url:e(t).attr("href")+"?ajax=true"});var o=parseInt(e(".js-sitemenusub__stats__count__starrers").html());e(".js-sitemenusub__stats__count__starrers").html(o-1)}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.flash=function(){var t=this;e("body").on("click",".js-flash-message-close",function(e){e.preventDefault(),t.remove_message(e)})},t.flash.prototype.remove_message=function(t){t.target.closest(".js-flash_message").remove()}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.gerber=function(){var t=this;e("body").on("click",".js-download-gerber",function(){t.sendData()})},t.gerber.prototype.sendData=function(){var o=this,n=window.location.pathname.replace(/\/$/,""),r=n.substring(n.lastIndexOf("/")+1);if(r.indexOf("-")>-1)var i=r.substring(0,r.indexOf("-"));else var i=r;e.ajax({type:"POST",dataType:"json",url:"/gerber",data:{id:i}}).done(function(e){new t.cruncher(e.command,"/gerber",o.completed)})},t.gerber.prototype.completed=function(t,e){e.hideLoading(),window.location.href=t.result}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.cjax=function(){var t=this;t.loading=!1,e("body").on("click",".js-cjax-link",function(o){t.fetch(e(this)),o.preventDefault()})},t.cjax.prototype.fetch=function(t){var o=this,n=t.data("cjaxlink");o.add_loading(),o.remove_all_active(),o.set_active(n),e.ajax({url:n}).done(function(t){o.loading=!1,e(".js-cjax-target").html(t),e("html, body").scrollTop(e(".js-cjax-target").offset().top)})},t.cjax.prototype.add_loading=function(){var o=this;o.loading=!0,window.setTimeout(function(){o.loading&&t.spinner(e(".js-cjax-target"))},250)},t.cjax.prototype.remove_all_active=function(){e.each(e(".js-cjax-link"),function(t,o){e(".js-sitemenu_sub__center__item__link",this).removeClass("active")})},t.cjax.prototype.set_active=function(t){e.each(e(".js-cjax-link"),function(o,n){var r=e(n).data("cjaxlink");t==r&&e(".js-sitemenu_sub__center__item__link",this).addClass("active")})}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.pjaxc=function(o){var n=this;n.pjaxloading=!1,e.pjax.defaults.scrollTo=0,e.pjax.defaults.timeout=2e3,e(document).pjax(".js-pjax-link",".js-pjax-container"),e(document).on("pjax:send",function(r,i){n.pjaxloading=!0,window.setTimeout(function(){n.pjaxloading&&(o.side_close(),t.spinner(e(".js-pjax-container")))},750)}),e(document).on("pjax:complete",function(t,e){n.pjaxloading=!1}),e(document).on("pjax:end",function(t,e){ga&&(ga("set","location",window.location.href),ga("send","pageview"))})}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.iframeresize=function(){var t=this;e(document).on("pjax:end",function(e,o){t.checkForIframeResize()}),t.checkForIframeResize()},t.iframeresize.prototype.checkForIframeResize=function(){e(".js-iframe-resize").length>0&&e(".js-iframe-resize").iFrameResize({log:!0})}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.thumbs=function(){var t=this;this.interval=!1,this.interval_time=3e3,this.interval_timeout=20,e(document).on("pjax:end",function(e,o){t.check()}),e(document).on("pagination:success",function(e,o){t.check()}),this.check()},t.thumbs.prototype.clear_all=function(){clearInterval(this.interval),this.interval_counter=0,this.pulling=!1,this.check_array=[],this.check_array_ids=[],this.generate_hash={},this.generate_array_ids=[]},t.thumbs.prototype.add_queued=function(t,o){var n=this;if(t.indexOf("queued")>=0){var r=parseInt(t.split("queued")[1]);if(!isNaN(r))return-1===e.inArray(r,n.check_array_ids)&&n.check_array_ids.push(r),n.check_array.push({id:r,ref:o}),!0}return!1},t.thumbs.prototype.check=function(){var t=this;t.clear_all(),$thumb=e(".js-circuit-thumb"),$thumb.length&&$thumb.each(function(o,n){var r=e(this).data("status");if(r&&!t.add_queued(r,e(this))&&r.indexOf("expired")>=0){var i=parseInt(e(this).data("id"));isNaN(i)||(-1===e.inArray(i,t.generate_array_ids)&&t.generate_array_ids.push(i),t.generate_hash[i]=e(this))}}),t.generate_array_ids.length&&t.do_generate(),(t.check_array_ids.length||t.generate_array_ids.length)&&(t.interval=setInterval(function(){t.interval_counter+=1,(t.check_array_ids.length||t.generate_array_ids.length)&&t.interval_counter<t.interval_timeout?t.pulling||t.do_check():t.clear_all()},t.interval_time))},t.thumbs.prototype.do_generate=function(){var t=this;e.ajax({type:"GET",dataType:"json",url:"/command/bulk_generate?ids="+t.generate_array_ids.join()}).done(function(o){e.each(o,function(e,o){var n=t.generate_hash[o.id];n&&t.add_queued(""+o.status+o.cmd_id,n)}),t.generate_array_ids=[]})},t.thumbs.prototype.do_check=function(){var t=this;t.pulling=!0,e.ajax({type:"GET",dataType:"json",url:"/command/bulk_status?ids="+t.check_array_ids.join()}).done(function(o){e.each(o,function(e,o){"rendered"==o.status?t.replace_img("rendered",o.id,o.result):"error"==o.status&&t.replace_img("error",o.id,o.result)}),t.pulling=!1})},t.thumbs.prototype.replace_img=function(t,o,n){var r=this;e.each(r.check_array,function(r,i){i.id==o&&("rendered"==t?e(i.ref).attr("src",n):e(i.ref).attr("src","https://s3-us-west-1.amazonaws.com/123d-circuits-assets/circuit_thumb_failed.gif"))});for(var i=r.check_array.length-1;i>=0;i--)r.check_array[i].id==o&&r.check_array.splice(i,1);for(var i=r.check_array_ids.length-1;i>=0;i--)r.check_array_ids[i]==o&&r.check_array_ids.splice(i,1)}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.jumper=function(t){e("body").on("click",".js-jumper",function(){var t=e(this).data("target");e(document).scrollTop(e("."+t).offset().top-20)})}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.marketplace=function(){var o=this,n=e('meta[name="session"]').attr("content"),r=e('meta[name="secure-session"]').attr("content");r="false"!=r&&r;var i=e('meta[name="user"]').attr("content");o.user="false"!=i&&i;var s=e('meta[name="env"]').attr("content"),a=e('meta[name="coppa"]').attr("content");a="true"==a;var l=e('meta[name="member"]').attr("content");o.cart=new Spark.marketplace(e('meta[name="afc"]').attr("content"),"circuits",o.user,n,r,a,"/shop",s,l),o.number_of_cart_items=0,o.redirect_flag=!1,o.cart.on("spark:marketplace:loaded",function(){o.check_for_iframe()}),o.cart.on("spark:marketplace:updated",function(t){t.count>0?o.show_cart():o.hide_cart(),o.number_of_cart_items=t.count,o.update_all_mini_carts()}),o.cart.on("spark:marketplace:error",function(e){o.cartmenu_animate_loading_hide();var n=JSON.parse(e.err.responseText);return t.error("Marketplace error",n.message),!1}),e(document).on("pjax:end",function(t,e){o.check_for_iframe(),o.check_for_buttons(),o.update_all_mini_carts()}),e("body").on("click",".js-marketplace-add-to-cart",function(){o.add_to_cart(e(this))}),e("body").on("click",".js-marketplace-add-to-cart--pcb",function(){o.add_to_cart_pcb(e(this))}),o.cart.on("spark:marketplace:loading",function(){return o.cartmenu_animate_loading(),!1}),o.cart.on("spark:marketplace:new",function(){return o.animate_tada(),o.redirect_flag&&(window.location="/cart",o.redirect_flag=!1),!1}),this.check_for_buttons()},t.marketplace.prototype.check_for_iframe=function(){e(".js-marketplace-iframe").length&&this.cart.showCart(e(".js-marketplace-iframe"))},t.marketplace.prototype.show_cart=function(){e(".js-marketplace-cart").show()},t.marketplace.prototype.hide_cart=function(){e(".js-marketplace-cart").hide()},t.marketplace.prototype.update_all_mini_carts=function(){e(".js-marketplace-cart__count").html(this.number_of_cart_items)},t.marketplace.prototype.cartmenu_animate_loading=function(){this.show_cart(),e(".js-shoppingcart-menu__loading").show(),t.spinner(e(".js-shoppingcart-menu__loading")),e(".js-shoppingcart-menu__svgimage").hide(),e(".js-marketplace-cart__count").hide(),e(".js-shoppingcart-menu__animation").removeClass("mediumAnimation tada")},t.marketplace.prototype.cartmenu_animate_loading_hide=function(){e(".js-shoppingcart-menu__loading").hide(),e(".js-shoppingcart-menu__loading").empty(),e(".js-shoppingcart-menu__svgimage").show(),e(".js-marketplace-cart__count").show()},t.marketplace.prototype.animate_tada=function(){this.cartmenu_animate_loading_hide(),e(".js-shoppingcart-menu__animation").addClass("mediumAnimation tada")},t.marketplace.prototype.check_for_buttons=function(){var t=this;e(".js-marketplace-get-pcb-price").each(function(e,o){t.get_price_pcb(o)}),e(".js-marketplace-get-price").each(function(e,o){t.get_price(o)})},t.marketplace.prototype.get_price=function(t){this.cart.getPrice(e(t).data("sku"),e(t),this.set_price)},t.marketplace.prototype.get_price_pcb=function(t){this.cart.getPCBPrice(e(t).data("sqin"),e(t).data("boardtypeid"),e(t),this.set_price)},t.marketplace.prototype.add_to_cart=function(t){var o=0;e(".js-marketplace-get-price").each(function(n,r){e(r).data("sku")==e(t).data("sku")&&(o=e(r).html().replace("$",""))}),window.analytics.track("add to cart",{"item id":e(t).data("sku"),"item name":e(t).data("name"),"item price":o,"item type":e(t).data("analytics-designtype"),"add to cart origin":e(t).data("analytics-origin")}),e(t).data("redirect")&&1==e(t).data("redirect")&&(this.redirect_flag=!0),this.cart.addToCart(e(t).data("sku"),1,"PHYSICAL",this.analytics_obj(t))},t.marketplace.prototype.add_to_cart_pcb=function(t){this.cart.addToCartPCB(e(t).data("boardid"),e(t).data("name"),1,e(t).data("thumburl"),e(t).data("sqin"),e(t).data("boardtypeid"),e(t).data("check"),this.analytics_obj(t))},t.marketplace.prototype.analytics_obj=function(t){var o=0!=this.user,n={"item type":e(t).data("analytics-designtype"),"add to cart origin":e(t).data("analytics-origin"),platform:"Web","product name":"123d.circuits.io","login status":o,url:window.location.href,path:window.location.pathname},r=e(t).data("analytics-designtype");return"circuit scribe"!==r&&"arduino"!==r&&(n.designer=e(t).data("analytics-designer"),n["design type"]=r),o&&(n.userId=e('meta[name="member"]').attr("content")),n},t.marketplace.prototype.set_price=function(t,o){o.product_info&&0==o.product_info.is_available?e(".js-marketplace-out-of-stock[data-sku="+o.asset_id+"]").removeClass("hide"):e(".js-marketplace-add-to-cart[data-sku="+o.asset_id+"]").removeClass("hide"),e(t).html("$"+o.total_price)}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.sitemenu=function(){var t=this;e(document).on("pjax:end",function(e,o){t.check_if_sticky()}),t.check_if_sticky()},t.sitemenu.prototype.check_if_sticky=function(){e(".js-main-sitemenu-is-sticky").length?e(".js-sitemenu").first().addClass("sitemenu--sticky"):e(".js-sitemenu").removeClass("sitemenu--sticky")}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.sitemenu_search=function(){var t=this;e("body").on("click",".js-sitemenu__search__trigger",function(){t.do_search()}),e("body").on("focusin",".js-sitemenu__search__input",function(){e(".js-sitemenu__search").addClass("active")}),e("body").on("focusout",".js-sitemenu__search__input",function(){0==e(this).val().length&&e(".js-sitemenu__search").removeClass("active")}),e("body").on("keyup",".js-sitemenu__search__input",function(e){13==e.keyCode&&t.do_search()})},t.sitemenu_search.prototype.do_search=function(){var t=e(".js-sitemenu__search__input").val();window.location.href="/search/?q="+t}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.sitemenu_sub=function(){var t=this;t.open=!1,t.moved_submenu=!1,e("body").on("click",".js-toggle-submenu",function(e){t.toggle_dropdown(),e.preventDefault()}),e(document).on("pjax:end",function(e,o){t.check_for_submenu()}),t.check_for_submenu()},t.sitemenu_sub.prototype.check_for_submenu=function(){this.moved_submenu&&(this.moved_submenu.remove(),this.moved_submenu=!1),e(".js-sitemenu_sub").length&&(this.moved_submenu=e(".js-sitemenu_collapsed").detach().prependTo("body"),this.moved_submenu.addClass("js-sitemenu_collapsed--moved"),this.add_sticky_listeners())},t.sitemenu_sub.prototype.add_sticky_listeners=function(){var t=this;Waypoint.destroyAll(),t.waypoint=new Waypoint({element:e(".js-sitemenu_sub"),handler:function(e){"up"==e?t.hide_collapsed():t.show_collapsed()}})},t.sitemenu_sub.prototype.show_collapsed=function(){e(".js-sitemenu_collapsed").show()},t.sitemenu_sub.prototype.hide_collapsed=function(){e(".js-sitemenu_collapsed").hide()},t.sitemenu_sub.prototype.toggle_dropdown=function(){e(".sitemenu_sub__center__list--mobile").is(":hidden")?this.show_dropdown():this.hide_dropdown()},t.sitemenu_sub.prototype.show_dropdown=function(){var t=this;e(".sitemenu_sub__center__list--mobile").show(),e("body").on("click",".js-container-site",function(){t.hide_dropdown()})},t.sitemenu_sub.prototype.hide_dropdown=function(){e(".sitemenu_sub__center__list--mobile").hide(),e("body").off("click",".js-container-site")}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.pagination=function(){var t=this;t.loading_div='<div class="grid__item pagination__loading js-pagination__loading"></div>',e(document).on("pjax:end",function(e,o){t.check()}),t.check()},t.pagination.prototype.reset=function(){e(".js-pagination").data("ref",this),e(".js-pagination").data("busy",!1),e(".js-pagination").data("end",!1),e(".js-pagination").data("currentPage",1)},t.pagination.prototype.check=function(){e(document).off("scroll",this.scrollcheck),this.reset(),e(".js-pagination").length&&e(document).on("scroll",this.scrollcheck)},t.pagination.prototype.get=function(){var t=this;t.showLoading(),e(".js-pagination").data("currentPage",e(".js-pagination").data("currentPage")+1),e.ajax({url:e(".js-pagination").data("url"),type:"GET",data:{page:e(".js-pagination").data("currentPage")},beforeSend:function(t){t.setRequestHeader("X-PAGINATION",!0)},error:function(t){e(".js-pagination").data("end",!0)},success:function(t,o){e(".js-pagination").before(t),e(".js-pagination").data("busy",!1),e(document).triggerHandler("pagination:success")},complete:function(){t.hideLoading()}})},t.pagination.prototype.scrollcheck=function(){var t=e(document).height()-e(window).scrollTop()-e(window).height();!e(".js-pagination").data("end")&&!e(".js-pagination").data("busy")&&t<450&&(e(".js-pagination").data("busy",!0),e(".js-pagination").data("ref").get())},t.pagination.prototype.showLoading=function(){e(".js-pagination").before(this.loading_div),t.spinner(e(".js-pagination__loading"))},t.pagination.prototype.hideLoading=function(){e(".js-pagination__loading").remove()}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.shadowbox=function(t,o,n){var r=this;o=void 0!==o?o:320,n=void 0!==n?n:500,this.boxhtml='<div class="shadowbox js-shadowbox hide"><div class="shadowbox__inner js-shadowbox__inner"><iframe class="shadowbox__iframe js-shadowbox__iframe"></div><div class="shadowbox__close js-shadowbox__close"></div></div>',this.box_width=o,this.box_height=n,this.original_box_width=o,this.original_box_height=n,this.aspect_ratio=o/n,this.trigger=t,this.target=e(t),e("body").on("click touch",t,function(t){r.construct_box(t)})},t.shadowbox.prototype.construct_box=function(o){var n=this;e(".js-shadowbox").length&&this.remove_box(),e("body").append(this.boxhtml),n.resize_box(),$trigger=e(this.target),e(".js-shadowbox__iframe").attr("src",$trigger.data("link")+"&redirect_path="+window.location.pathname),$shadowBox=e(".js-shadowbox"),$shadowBox.velocity("stop",!0),$shadowBox.velocity("fadeIn",{duration:800,easing:"easeInOutCirc"}),e("body").on("click",".js-shadowbox__close",function(){n.remove_box()}),e("body").on("click",".js-shadowbox",function(){n.remove_box()}),e(window).on("resize",function(){n.resize_box()});var r=$trigger.data("analytics");if(r&&t.analytics){(new t.analytics).track(r.event||"",r.properties||{})}},t.shadowbox.prototype.resize_box=function(){var t=this,o=e(window).width(),n=e(window).height();o<t.box_width||t.box_width<t.original_box_width?(t.box_width=o,t.box_width>400&&(t.box_width-=20),t.box_height=t.box_width/t.aspect_ratio):(n<t.box_height||t.box_height<t.original_box_height)&&(t.box_height=n,t.box_height>400&&(t.box_height-=20),t.box_width=t.box_height/t.aspect_ratio),e(".js-shadowbox__inner").css("width",this.box_width),e(".js-shadowbox__inner").css("margin-left",-this.box_width/2),e(".js-shadowbox__inner").css("height",this.box_height)},t.shadowbox.prototype.remove_box=function(){var t=this;e(".js-shadowbox").velocity("stop",!0),e(".js-shadowbox").velocity("fadeOut",{duration:800,easing:"easeInOutCirc",complete:function(){e(".js-shadowbox").remove()}}),e(window).off("resize",function(){t.resize_box()})}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.sidebar=function(t,o){var n=this;n.hide_all(),e("body").on("click",".js-sidebar--left__trigger",function(t){$this=e(this),n.side_open("left")}),e("body").on("click",".js-sidebar--right__trigger",function(){n.side_open("right")}),e(document).on("pjax:end",function(t,e){n.clearActiveItems("left"),n.setActiveItems("left")}),e(document).on("pjax:complete",function(t,e){n.side_close()})},t.sidebar.prototype.hide_all=function(t){e(".js-sidebar--left").hide(),e(".js-sidebar--right").hide()},t.sidebar.prototype.side_open=function(t){var o=this,n="left"==t?"272px":"-272px";"left"==t?e(".js-sidebar--left").show().scrollTop(0):e(".js-sidebar--right").show().scrollTop(0),e(".js-sidebar-slide").velocity("stop",!0),e(".js-sidebar-slide").velocity({translateX:n},{easing:[200,40],complete:function(t){o.set_close_listeners()}})},t.sidebar.prototype.side_close=function(){var t=this;e("body").off("mousemove click touchstart",".js-container-site"),e(".js-sidebar-slide").velocity("stop",!0),e(".js-sidebar-slide").velocity({translateX:"0px"},{easing:[200,40],complete:function(){t.hide_all(),e(".js-sidebar-slide").css("transform","translateX(0)")}})},t.sidebar.prototype.set_close_listeners=function(){var t=this;e("body").click(),e("body").on("mousemove click touchstart",".js-container-site",function(){t.side_close()})},t.sidebar.prototype.clearActiveItems=function(t){"left"==t&&e("a .active",".js-sidebar--left").removeClass("active")},t.sidebar.prototype.setActiveItems=function(t){if("left"==t){var o=window.location.pathname.replace(/\/$/,"");e("a",".js-sidebar--left").each(function(){o==e(this).attr("href").replace(/\/$/,"")&&e(".js-sidebar--left__item",this).addClass("active")})}}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.sortabletable=function(){var t=this;e(document).on("pjax:end",function(e,o){t.init()}),t.init()},t.sortabletable.prototype.init=function(){var t=this;e(".js-sortable").length&&(e(".js-sortable").sortable(),e(".js-sortable").disableSelection(),e(".js-sortable-model").length&&(e(".js-sortable").on("sortupdate",function(e,o){t.updateSortModel()}),t.updateSortModel()))},t.sortabletable.prototype.updateSortModel=function(){var t=[],o=e(".js-sort-item").length;e(".js-sort-item").each(function(){var n={},r=e(".js-sort-id",this).html(),i=o;e(".js-sort-weight",this).html(o),n.id=r,n.w=i,t.push(n),o-=1}),e(".js-sortable-model").val(JSON.stringify(t))}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.fn.tipsy=function(e){function o(e,o){if(o.text)var n=o.text;else{t(e).attr("title")&&(t(e).attr("original-title",t(e).attr("title")),t(e).attr("title",""));var n=t(e).attr("original-title")}t(".tipsy").find(".tipsy-inner").html(n);var r=t.extend({},t(e).offset());t(e).parents("svg").size()>0?(r=t.extend(r,t(e)[0].getBBox()),o.zoom_stuff&&(r.width=r.width*o.zoom_stuff.viewS,r.height=r.height*o.zoom_stuff.viewS)):r=t.extend(r,{width:t(e)[0].offsetWidth||0,height:t(e)[0].offsetHeight||0});var i,s=t(".tipsy")[0].offsetWidth,a=t(".tipsy")[0].offsetHeight;switch(o.gravity.charAt(0)){case"n":i={top:r.top+r.height+o.offset,left:r.left+r.width/2-s/2};break;case"s":i={top:r.top-a-o.offset,left:r.left+r.width/2-s/2};break;case"e":i={top:r.top+r.height/2-a/2,left:r.left-s-o.offset};break;case"w":i={top:r.top+r.height/2-a/2,left:r.left+r.width+o.offset}}return t(".tipsy").css(i).removeClass("tipsy-n tipsy-s tipsy-e tipsy-w").addClass("tipsy-"+o.gravity),t(".tipsy").find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+o.gravity.charAt(0),t(".tipsy")}function n(){o(this,e).show()}function r(){t(".tipsy").hide()}return e=t.extend({},t.fn.tipsy.defaults,e),t(".tipsy").length||t("body").append('<div class="tipsy circ_hide" role="tooltip"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>'),t(this).data("tipsy_active",!0),t(this).on("mouseenter mouseover",!1,n),t(this).on("mouseleave mouseout remove",!1,r),this},t.fn.tipsy.defaults={gravity:"n",offset:0,text:!1,zoom_stuff:!1},t.fn.removeTipsy=function(){t(this).data("tipsy_active")&&(t(".tipsy").hide(),t(this).unbind("mouseenter mouseover"),t(this).unbind("mouseleave mouseout remove"),t(this).attr("title",t(this).attr("original-title")),t(this).attr("original-title",""),t(this).data("tipsy_active",!1))}}(t,window),function(t,e,o){t.tooltip=function(t,o,n,r){if(window.communicator){var i=e(t);if(i.length&&(i.removeAttr("title"),null!=o)){o||(o=i.attr("title")||"");var s={};n&&n.placement&&(s.placement=n.placement),n&&n.distance&&(s.distance=n.distance),r&&(s.hideOnClick=!1,s.touchHold=!1,s.trigger="manual",s.theme="base-error-tooltip");var a=n&&n.template?n.template:null,l=window.communicator.new(i[0]).tooltip(a,Circuits.localText(o)).options(s);return n&&n.extraThemes?l.addTheme(n.extraThemes):o.indexOf("<shortcut>")>=0&&l.addTheme("shortcut-break"),n&&n.stayAlive&&(i[0].communication._stayAlive=n.stayAlive),r&&l.show(),l}}}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){!function(t,e,o){t.cruncher=function(t,o,n){var r=this;return r.loaderDiv=e('<div class="cruncherloader"><div class="cruncherloader__spinner"></div><div class="cruncherloader__txt">Crunching... Hold on!<br>Status: <span class="cruncherloader__status">Initialize!</span></div></div>'),r.responseFunction=n,r.timeOutMax=1800,r.timeOutCounter=0,r.endpoint=o,r.interval=setInterval(function(){r.timeOutCounter<=r.timeOutMax&&r.check(t),r.timeOutCounter+=1},2e3),r.showLoading(),r},t.cruncher.prototype.showLoading=function(){this.loaderDiv=this.loaderDiv.prependTo(e("body")),t.spinner(e(".cruncherloader__spinner",this.loaderDiv))},t.cruncher.prototype.hideLoading=function(){this.loaderDiv.remove(),clearInterval(this.interval)},t.cruncher.prototype.check=function(t){var o=this;e.ajax({type:"GET",dataType:"json",url:o.endpoint+"/"+t}).done(function(t){101==t.status?e(".cruncherloader__status",this.loaderDiv).html("In Queue..."):102==t.status?e(".cruncherloader__status",this.loaderDiv).html("Crunching..."):200==t.status?(e(".cruncherloader__status",this.loaderDiv).html("Success!"),o.showSucces(t)):500==t.status&&o.showError(t)})},t.cruncher.prototype.showSucces=function(t){clearInterval(this.interval),this.responseFunction(t,this)},t.cruncher.prototype.showError=function(e){clearInterval(this.interval),this.hideLoading(),t.error("Crunch Error","We're sorry, we're currently unable to crunch your file.")}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){(function(t){var e=o(50);!function(t,o,n){t.upload=function(t){var e=this;o(document).on("pjax:complete",function(t,o){e.init()}),e.init()},t.upload.prototype.init=function(){o(".js-upload").each(function(){new t.uploader(this)})},t.uploader=function(t){var n=this;n.container=o(t),n.fileList=[];var r=e.getCSRFTokenCookie();o(".js-upload__input",n.container).fileupload({dataType:"json",maxFileSize:375e4,acceptFileTypes:"/(.|/)(sch)$/i",formData:[{name:"authenticity_token",value:r}],add:function(t,e){o(".js-upload__btn",n.container).hide(),o(".js-upload__progress",n.container).show(),e.submit()},done:function(t,e){o(".js-upload__progress",n.container).hide(),n.fileList=n.fileList.concat(e.result),n.buildList()},progressall:function(t,e){var r=parseInt(e.loaded/e.total*100,10);o(".js-upload__progress__bar",n.container).css("width",r+"%"),100==r?o(".js-upload__progress__bar",n.container).html("crunching..."):o(".js-upload__progress__bar",n.container).html(r+"%")}}),o(".js-upload__btn",n.container).on("click",function(){o(".js-upload__input",n.container).click()})},t.uploader.prototype.buildList=function(){var t=this;t.resetList();for(var e=0;e<t.fileList.length;e++){var n=t.fileList[e],r=o(".js-upload__item--template",t.container).clone();o(".js-upload__item__title",r).html(n.name),o(".js-upload__item__info__size",r).html(t.bytesToSize(n.size)),o(".js-upload__list",t.container).append(r),t.setRemovalListeners(r,e,n.id)}o(".js-upload__data",t.container).val(JSON.stringify(t.fileList)).change()},t.uploader.prototype.resetList=function(){0==this.fileList?o(".js-upload__btn",this.container).show():o(".js-upload__btn",this.container).hide(),o(".js-upload__progress",this.container).hide(),o(".js-upload__list",this.container).html()},t.uploader.prototype.removeFromArray=function(t){this.fileList.splice(t,1)},t.uploader.prototype.removeFromServer=function(t){o.ajax({type:"DELETE",url:"/document/"+t+"/delete"}).done(function(t){})},t.uploader.prototype.setRemovalListeners=function(t,e,n){var r=this;o(".js-upload__item__info__delete",t).click(function(){o(t).remove(),r.removeFromArray(e),r.removeFromServer(n),r.buildList()})},t.uploader.prototype.bytesToSize=function(t){var e=["Bytes","KB","MB","GB","TB"];if(0==t)return"0 Byte";var o=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,o),2)+" "+e[o]}}(window.cSite=window.cSite||{},t)}).call(e,o(0))},function(t,e,o){o(6),t.exports=o(7)}]);